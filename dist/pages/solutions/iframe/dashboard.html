<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>仪表板嵌入</title>
	<link rel="stylesheet" href="../../../styles/solutions/index.css">
</head>

<body>
	<div class="solution-header">
		<div class="solution-header-left">
			<div class="solution-title"><img class="header-icon" src="../../../images/sidebar/iframe.svg" />iframe集成-仪表板
			</div>
			<div class="solution-description">用户可以在其 Web 应用程序的 iFrame 中指定仪表板对应的URL来实现嵌入仪表板，同时可以通过外部参数传入来控制其交互行为，嵌入结果如下。
			</div>
		</div>
		<div class="solution-header-right"><a href="https://help.grapecity.com.cn/pages/viewpage.action?pageId=71039449"
				target="_blank">帮助文档</a></div>
	</div>
	<div class="solution-control">
		<span>请选择参数：</span>
		<div class="solution-control-list solution-dashboard-control-list">
			<div class="solution-control-item">
				<span class="select-text">工具栏</span>
				<select class="solution-control-dropdown" id="show-toolbar">
					<option value="show" selected>显示</option>
					<option value="hide">隐藏</option>
					<option value="auto">自动</option>
				</select>
			</div>
			<div class="solution-control-item">
				<span class="select-text">尺寸</span>
				<select class="solution-control-dropdown" id="set-size">
					<option value="fitscreen" selected>适应屏幕</option>
					<option value="fitheight">高度自适应</option>
					<option value="fitwidth">宽度自适应</option>
					<option value="auto">等比缩放</option>
				</select>
			</div>
		</div>
	</div>
	<div class="solution-content">
		<iframe id="solution-dashboard-iframe" class="solution-iframe"></iframe>
	</div>

	<div class="solution-code-panel">
		<div class="solution-code-panel-header">
			<input id="expand-code" type="button" class="solution-code-button" value="展开代码" onclick="expandCode()" />
		</div>
	</div>

	<div id="code-dialog-div" class="solution-code-mask hide-code-dialog">
		<div class="solution-code-dialog">
			<div class="solution-code-dialog-header">
				仪表板嵌入
				<div class="solution-code-dialog-close-button" onclick="closeDialog()"><img src="../../../images/关闭.svg" /></div>
			</div>
			<textarea id="dialog-code">
<iframe src="{basic_src}/dashboards/view/{dashboardId}?token={token}&toolbar=${toolbar}&size=${size}"></iframe>
			</textarea>
			<div class="code-dialog-footer">
				<input id="copy-code" type="button" class="code-button" value="复制代码" onclick="copyCode()" />
			</div>
		</div>
	</div>

	<script src="../../../js/codeMirror.js"></script>
	<script src="../../../js/utils.js"></script>

	<link href="../../../styles/codemirror/codemirror.css" rel="stylesheet" type="text/css">
	<link href="../../../styles/codemirror/monokai.css" rel="stylesheet" type="text/css">
	<link href="../../../styles/codemirror/fullscreen.css" rel="stylesheet" type="text/css">

	<!-- 引入CodeMirror核心文件 -->
	<script type="text/javascript" src="../../../js/codemirror/codemirror.js"></script>

	<!-- CodeMirror支持不同语言，根据需要引入JS文件 -->
	<!-- 因为HTML混合语言依赖Javascript、XML、CSS语言支持，所以都要引入 -->
	<script type="text/javascript" src="../../../js/codemirror/javascript.js"></script>
	<script type="text/javascript" src="../../../js/codemirror/xml.js"></script>
	<script type="text/javascript" src="../../../js/codemirror/css.js"></script>
	<script type="text/javascript" src="../../../js/codemirror/htmlmixed.js"></script>

	<!-- 下面分别为显示行数、括号匹配和全屏插件 -->
	<script type="text/javascript" src="../../../js/codemirror/active-line.js"></script>
	<script type="text/javascript" src="../../../js/codemirror/fullscreen.js"></script>
	<script>


		editor = undefined;

		const iframe = document.getElementById("solution-dashboard-iframe");
		let toolbar = "show";
		let size = "fitscreen";
		const getURL = () => {
			return `${solutionIframeDashboard}&toolbar=${toolbar}&size=${size}`;
		}
		iframe.src = getURL();

		const changeToolbar = (e) => {
			toolbar = e.target.value;
			iframe.src = getURL();
		}
		const changeSize = (e) => {
			size = e.target.value;
			iframe.src = getURL();
		}
		document.getElementById('show-toolbar').addEventListener('change', changeToolbar, false);
		document.getElementById('set-size').addEventListener('change', changeSize, false);
	</script>
</body>

</html>