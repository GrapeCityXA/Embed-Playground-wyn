!function(){function e(e){return new function(o,s){this.dashboard=null;var l=this;this.isDocumentDirty=function(){return!!this.dashboard&&this.dashboard.isDocumentDirty()},this._registerOnDashboardReady=function(e){if(this._onDashboardReady=e,this.dashboard)return this.dashboard.once("ready.dashboard",e)},this.destroy=function(){this.dashboard?this.dashboard.destroy():this.canceled=!0,this.dashboard=null},this.setParameterValue=function(e){return!!this.dashboard&&this.dashboard.setParameterValue(e)},this.requestFullScreen=function(){return!!this.dashboard&&this.dashboard.requestFullScreen()},this.executeCommand=function(e){return!!this.dashboard&&this.dashboard.executeCommand(e)},this.getDatasets=function(){return!!this.dashboard&&this.dashboard.getDatasetsAsync()};for(var e=s.__notNeedFetchConfig,a=s.baseUrl||"",n=s.token||"";"/"===a[a.length-1];)a=a.slice(0,a.length-1);function i(e){var t=e;return a&&(t=a+t),n&&(t=t+"?token="+n),t}this.initialize=function(r){l.canceled=!1;function n(e,t){return fetch(e,t).then(function(e){return l.canceled||!e.ok?Promise.reject():e.json()})}return(e?Promise.resolve({}):n(i("/api/dashboards/config"))).then(function(e){var t=e||{};return function(t){if(s.customLngResource)return Promise.resolve(null);var e=t.toLocaleLowerCase();if(-1!==["en","en-US","en-GB","zh","zh-CN","zh-TW","pl","pl-PL","es","es-ES"].map(function(e){return e.toLocaleLowerCase()}).indexOf(e))return Promise.resolve(null);var a=i("/language-resources/"+t+"/"+("DashboardDesigner"===o?"dashboard-designer":"dashboard-viewer"));return n(a).then(function(e){var n=[];return e.forEach(function(e){var a=e.nameSpace;e.localeData.forEach(function(e){var t=JSON.parse(e);n.push({namespace:a,localeData:t})})}),{languageCode:t,data:n}}).catch(function(){return Promise.resolve(null)})}((t=Object.assign(t,s)).lng?t.lng:t.defaultLng).then(function(e){return t.customLngResource=e,t}).catch(function(){return t})}).then(function(e){if(l.canceled)return Promise.reject();var t=e||{};t=Object.assign(t,s);var d$,p$={};p$.config=t||{},p$.clazz=o;var a=new(function(a){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=a,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/";var e=i(i.s=71);return p$.__webpack_require__=i,e}([function(e,t){e.exports=WynBi.__libs.Common.Enums},function(e,t){e.exports=WynBi.__libs.Common.R},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var n=a(46);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var r=a(8),o=a(47),s=a(76);e.exports=function(n){var i=o();return function(){var e,t=r(n);if(i){var a=r(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return s(this,e)}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var n=a(72),i=a(43),r=a(32),o=a(73);e.exports=function(e){return n(e)||i(e)||r(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(t,e){function a(e){return t.exports=a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(e,t,a){var r=a(75);function n(){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=n=Reflect.get:e.exports=n=function(e,t,a){var n=r(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:a):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=WynBi.__libs.Common._},function(e,t){e.exports=WynBi.__libs.GCSpread},function(e,t,a){var n=a(6);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}e.exports=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach(function(e){n(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=WynBi.__libs.GCDV},function(e,t,a){var n=a(44),i=a(74),r=a(32),o=a(45);e.exports=function(e,t){return n(e)||i(e,t)||r(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=WynBi.__libs.Common.ImmutabilityHelper},function(e,t){e.exports=WynBi.__libs.Common.BlueBird},function(t,e){function a(e){return t.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(e,t,a){var l=a(32);e.exports=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"==typeof e.length){a&&(e=a);function n(){}var i=0;return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=WynBi.__libs.Common.uuid},function(e,t,Lr){(function(_r){var Mr;_r.exports=function(){"use strict";var t,i;function u(){return t.apply(null,arguments)}function e(e){t=e}function o(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function s(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true}}function r(e){return e===void 0}function c(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function d(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function a(e,t){var a=[],n;for(n=0;n<e.length;++n){a.push(t(e[n],n))}return a}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var a in t){if(p(t,a)){e[a]=t[a]}}if(p(t,"toString")){e.toString=t.toString}if(p(t,"valueOf")){e.valueOf=t.valueOf}return e}function y(e,t,a,n){return ja(e,t,a,n,true).utc()}function n(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function g(e){if(e._pf==null){e._pf=n()}return e._pf}if(Array.prototype.some){i=Array.prototype.some}else{i=function(e){var t=Object(this);var a=t.length>>>0;for(var n=0;n<a;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}function m(e){if(e._isValid==null){var t=g(e);var a=i.call(t.parsedDateParts,function(e){return e!=null});var n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}}return e._isValid}function f(e){var t=y(NaN);if(e!=null){h(g(t),e)}else{g(t).userInvalidated=true}return t}var v=u.momentProperties=[];function b(e,t){var a,n,i;if(!r(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!r(t._i)){e._i=t._i}if(!r(t._f)){e._f=t._f}if(!r(t._l)){e._l=t._l}if(!r(t._strict)){e._strict=t._strict}if(!r(t._tzm)){e._tzm=t._tzm}if(!r(t._isUTC)){e._isUTC=t._isUTC}if(!r(t._offset)){e._offset=t._offset}if(!r(t._pf)){e._pf=g(t)}if(!r(t._locale)){e._locale=t._locale}if(v.length>0){for(a=0;a<v.length;a++){n=v[a];i=t[n];if(!r(i)){e[n]=i}}}return e}var C=false;function T(e){b(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(C===false){C=true;u.updateOffset(this);C=false}}function S(e){return e instanceof T||e!=null&&e._isAMomentObject!=null}function D(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function k(e){var t=+e,a=0;if(t!==0&&isFinite(t)){a=D(t)}return a}function w(e,t,a){var n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,o;for(o=0;o<n;o++){if(a&&e[o]!==t[o]||!a&&k(e[o])!==k(t[o])){r++}}return r+i}function x(e){if(u.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function A(i,r){var o=true;return h(function(){if(u.deprecationHandler!=null){u.deprecationHandler(null,i)}if(o){var e=[];var t;for(var a=0;a<arguments.length;a++){t="";if(typeof arguments[a]==="object"){t+="\n["+a+"] ";for(var n in arguments[0]){t+=n+": "+arguments[0][n]+", "}t=t.slice(0,-2)}else{t=arguments[a]}e.push(t)}x(i+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack);o=false}return r.apply(this,arguments)},r)}var I={},P;function _(e,t){if(u.deprecationHandler!=null){u.deprecationHandler(e,t)}if(!I[e]){x(t);I[e]=true}}function M(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function L(e){var t,a;for(a in e){t=e[a];if(M(t)){this[a]=t}else{this["_"+a]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(e,t){var a=h({},e),n;for(n in t){if(p(t,n)){if(s(e[n])&&s(t[n])){a[n]={};h(a[n],e[n]);h(a[n],t[n])}else if(t[n]!=null){a[n]=t[n]}else{delete a[n]}}}for(n in e){if(p(e,n)&&!p(t,n)&&s(e[n])){a[n]=h({},a[n])}}return a}function V(e){if(e!=null){this.set(e)}}if(u.suppressDeprecationWarnings=false,u.deprecationHandler=null,Object.keys){P=Object.keys}else{P=function(e){var t,a=[];for(t in e){if(p(e,t)){a.push(t)}}return a}}var N={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function E(e,t,a){var n=this._calendar[e]||this._calendar["sameElse"];return M(n)?n.call(t,a):n}var F={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function O(e){var t=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];if(t||!a){return t}this._longDateFormat[e]=a.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var H="Invalid date";function B(){return this._invalidDate}var U="%d",z=/\d{1,2}/;function K(e){return this._ordinal.replace("%d",e)}var j={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function W(e,t,a,n){var i=this._relativeTime[a];return M(i)?i(e,t,a,n):i.replace(/%d/i,e)}function G(e,t){var a=this._relativeTime[e>0?"future":"past"];return M(a)?a(t):a.replace(/%s/i,t)}var Y={};function q(e,t){var a=e.toLowerCase();Y[a]=Y[a+"s"]=Y[t]=e}function J(e){return typeof e==="string"?Y[e]||Y[e.toLowerCase()]:undefined}function X(e){var t={},a,n;for(n in e){if(p(e,n)){a=J(n);if(a){t[a]=e[n]}}}return t}var Q={};function Z(e,t){Q[e]=t}function $(e){var t=[];for(var a in e){t.push({unit:a,priority:Q[a]})}t.sort(function(e,t){return e.priority-t.priority});return t}function ee(e,t,a){var n=""+Math.abs(e),i=t-n.length,r=e>=0;return(r?a?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var te=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ae=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ne={},ie={};function re(e,t,a,n){var i=n;if(typeof n==="string"){i=function(){return this[n]()}}if(e){ie[e]=i}if(t){ie[t[0]]=function(){return ee(i.apply(this,arguments),t[1],t[2])}}if(a){ie[a]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function oe(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function se(n){var i=n.match(te),e,r;for(e=0,r=i.length;e<r;e++){if(ie[i[e]]){i[e]=ie[i[e]]}else{i[e]=oe(i[e])}}return function(e){var t="",a;for(a=0;a<r;a++){t+=M(i[a])?i[a].call(e,n):i[a]}return t}}function le(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ue(t,e.localeData());ne[t]=ne[t]||se(t);return ne[t](e)}function ue(e,t){var a=5;function n(e){return t.longDateFormat(e)||e}ae.lastIndex=0;while(a>=0&&ae.test(e)){e=e.replace(ae,n);ae.lastIndex=0;a-=1}return e}var ce=/\d/,de=/\d\d/,pe=/\d{3}/,he=/\d{4}/,ye=/[+-]?\d{6}/,ge=/\d\d?/,me=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,ve=/\d{1,3}/,be=/\d{1,4}/,Ce=/[+-]?\d{1,6}/,Te=/\d+/,Se=/[+-]?\d+/,De=/Z|[+-]\d\d:?\d\d/gi,ke=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[+-]?\d+(\.\d{1,3})?/,xe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ae={};function Ie(e,a,n){Ae[e]=M(a)?a:function(e,t){return e&&n?n:a}}function Pe(e,t){if(!p(Ae,e)){return new RegExp(_e(e))}return Ae[e](t._strict,t._locale)}function _e(e){return Me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,a,n,i){return t||a||n||i}))}function Me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Le={};function Re(e,a){var t,n=a;if(typeof e==="string"){e=[e]}if(c(a)){n=function(e,t){t[a]=k(e)}}for(t=0;t<e.length;t++){Le[e[t]]=n}}function Ve(e,i){Re(e,function(e,t,a,n){a._w=a._w||{};i(e,a._w,a,n)})}function Ne(e,t,a){if(t!=null&&p(Le,e)){Le[e](t,a._a,a,e)}}var Ee=0,Fe=1,Oe=2,He=3,Be=4,Ue=5,ze=6,Ke=7,je=8;function We(e){return Ge(e)?366:365}function Ge(e){return e%4===0&&e%100!==0||e%400===0}re("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),re(0,["YY",2],0,function(){return this.year()%100}),re(0,["YYYY",4],0,"year"),re(0,["YYYYY",5],0,"year"),re(0,["YYYYYY",6,true],0,"year"),q("year","y"),Z("year",1),Ie("Y",Se),Ie("YY",ge,de),Ie("YYYY",be,he),Ie("YYYYY",Ce,ye),Ie("YYYYYY",Ce,ye),Re(["YYYYY","YYYYYY"],Ee),Re("YYYY",function(e,t){t[Ee]=e.length===2?u.parseTwoDigitYear(e):k(e)}),Re("YY",function(e,t){t[Ee]=u.parseTwoDigitYear(e)}),Re("Y",function(e,t){t[Ee]=parseInt(e,10)}),u.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)};var Ye=Xe("FullYear",true),qe;function Je(){return Ge(this.year())}function Xe(t,a){return function(e){if(e!=null){Ze(this,t,e);u.updateOffset(this,a);return this}else{return Qe(this,t)}}}function Qe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Ze(e,t,a){if(e.isValid()&&!isNaN(a)){if(t==="FullYear"&&Ge(e.year())&&e.month()===1&&e.date()===29){e._d["set"+(e._isUTC?"UTC":"")+t](a,e.month(),at(a,e.month()))}else{e._d["set"+(e._isUTC?"UTC":"")+t](a)}}}function $e(e){e=J(e);if(M(this[e])){return this[e]()}return this}function et(e,t){if(typeof e==="object"){e=X(e);var a=$(e);for(var n=0;n<a.length;n++){this[a[n].unit](e[a[n].unit])}}else{e=J(e);if(M(this[e])){return this[e](t)}}return this}function tt(e,t){return(e%t+t)%t}if(Array.prototype.indexOf){qe=Array.prototype.indexOf}else{qe=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function at(e,t){if(isNaN(e)||isNaN(t)){return NaN}var a=tt(t,12);e+=(t-a)/12;return a===1?Ge(e)?29:28:31-a%7%2}re("M",["MM",2],"Mo",function(){return this.month()+1}),re("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),re("MMMM",0,0,function(e){return this.localeData().months(this,e)}),q("month","M"),Z("month",8),Ie("M",ge),Ie("MM",ge,de),Ie("MMM",function(e,t){return t.monthsShortRegex(e)}),Ie("MMMM",function(e,t){return t.monthsRegex(e)}),Re(["M","MM"],function(e,t){t[Fe]=k(e)-1}),Re(["MMM","MMMM"],function(e,t,a,n){var i=a._locale.monthsParse(e,n,a._strict);if(i!=null){t[Fe]=i}else{g(a).invalidMonth=e}});var nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,it="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function rt(e,t){if(!e){return o(this._months)?this._months:this._months["standalone"]}return o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]}var ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function st(e,t){if(!e){return o(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]}function lt(e,t,a){var n,i,r,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){r=y([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase()}}if(a){if(t==="MMM"){i=qe.call(this._shortMonthsParse,o);return i!==-1?i:null}else{i=qe.call(this._longMonthsParse,o);return i!==-1?i:null}}else{if(t==="MMM"){i=qe.call(this._shortMonthsParse,o);if(i!==-1){return i}i=qe.call(this._longMonthsParse,o);return i!==-1?i:null}else{i=qe.call(this._longMonthsParse,o);if(i!==-1){return i}i=qe.call(this._shortMonthsParse,o);return i!==-1?i:null}}}function ut(e,t,a){var n,i,r;if(this._monthsParseExact){return lt.call(this,e,t,a)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){i=y([2e3,n]);if(a&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!a&&!this._monthsParse[n]){r="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[n]=new RegExp(r.replace(".",""),"i")}if(a&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(a&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!a&&this._monthsParse[n].test(e)){return n}}}function ct(e,t){var a;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=k(t)}else{t=e.localeData().monthsParse(t);if(!c(t)){return e}}}a=Math.min(e.date(),at(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,a);return e}function dt(e){if(e!=null){ct(this,e);u.updateOffset(this,true);return this}else{return Qe(this,"Month")}}function pt(){return at(this.year(),this.month())}var ht=xe;function yt(e){if(this._monthsParseExact){if(!p(this,"_monthsRegex")){ft.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!p(this,"_monthsShortRegex")){this._monthsShortRegex=ht}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var gt=xe;function mt(e){if(this._monthsParseExact){if(!p(this,"_monthsRegex")){ft.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!p(this,"_monthsRegex")){this._monthsRegex=gt}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function ft(){function e(e,t){return t.length-e.length}var t=[],a=[],n=[],i,r;for(i=0;i<12;i++){r=y([2e3,i]);t.push(this.monthsShort(r,""));a.push(this.months(r,""));n.push(this.months(r,""));n.push(this.monthsShort(r,""))}t.sort(e);a.sort(e);n.sort(e);for(i=0;i<12;i++){t[i]=Me(t[i]);a[i]=Me(a[i])}for(i=0;i<24;i++){n[i]=Me(n[i])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function vt(e,t,a,n,i,r,o){var s=new Date(e,t,a,n,i,r,o);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function bt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function Ct(e,t,a){var n=7+t-a,i=(7+bt(e,0,n).getUTCDay()-t)%7;return-i+n-1}function Tt(e,t,a,n,i){var r=(7+a-n)%7,o=Ct(e,n,i),s=1+7*(t-1)+r+o,l,u;if(s<=0){l=e-1;u=We(l)+s}else if(s>We(e)){l=e+1;u=s-We(e)}else{l=e;u=s}return{year:l,dayOfYear:u}}function St(e,t,a){var n=Ct(e.year(),t,a),i=Math.floor((e.dayOfYear()-n-1)/7)+1,r,o;if(i<1){o=e.year()-1;r=i+Dt(o,t,a)}else if(i>Dt(e.year(),t,a)){r=i-Dt(e.year(),t,a);o=e.year()+1}else{o=e.year();r=i}return{week:r,year:o}}function Dt(e,t,a){var n=Ct(e,t,a),i=Ct(e+1,t,a);return(We(e)-n+i)/7}function kt(e){return St(e,this._week.dow,this._week.doy).week}re("w",["ww",2],"wo","week"),re("W",["WW",2],"Wo","isoWeek"),q("week","w"),q("isoWeek","W"),Z("week",5),Z("isoWeek",5),Ie("w",ge),Ie("ww",ge,de),Ie("W",ge),Ie("WW",ge,de),Ve(["w","ww","W","WW"],function(e,t,a,n){t[n.substr(0,1)]=k(e)});var wt={dow:0,doy:6};function xt(){return this._week.dow}function At(){return this._week.doy}function It(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Pt(e){var t=St(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function _t(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Mt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}re("d",0,"do","day"),re("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),re("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),re("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),re("e",0,0,"weekday"),re("E",0,0,"isoWeekday"),q("day","d"),q("weekday","e"),q("isoWeekday","E"),Z("day",11),Z("weekday",11),Z("isoWeekday",11),Ie("d",ge),Ie("e",ge),Ie("E",ge),Ie("dd",function(e,t){return t.weekdaysMinRegex(e)}),Ie("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Ie("dddd",function(e,t){return t.weekdaysRegex(e)}),Ve(["dd","ddd","dddd"],function(e,t,a,n){var i=a._locale.weekdaysParse(e,n,a._strict);if(i!=null){t.d=i}else{g(a).invalidWeekday=e}}),Ve(["d","e","E"],function(e,t,a,n){t[n]=k(e)});var Lt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Rt(e,t){if(!e){return o(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return o(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Vt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Nt(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Et="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ft(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ot(e,t,a){var n,i,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){r=y([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase()}}if(a){if(t==="dddd"){i=qe.call(this._weekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=qe.call(this._shortWeekdaysParse,o);return i!==-1?i:null}else{i=qe.call(this._minWeekdaysParse,o);return i!==-1?i:null}}else{if(t==="dddd"){i=qe.call(this._weekdaysParse,o);if(i!==-1){return i}i=qe.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=qe.call(this._minWeekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=qe.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=qe.call(this._weekdaysParse,o);if(i!==-1){return i}i=qe.call(this._minWeekdaysParse,o);return i!==-1?i:null}else{i=qe.call(this._minWeekdaysParse,o);if(i!==-1){return i}i=qe.call(this._weekdaysParse,o);if(i!==-1){return i}i=qe.call(this._shortWeekdaysParse,o);return i!==-1?i:null}}}function Ht(e,t,a){var n,i,r;if(this._weekdaysParseExact){return Ot.call(this,e,t,a)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){i=y([2e3,1]).day(n);if(a&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")}if(a&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(a&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(a&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!a&&this._weekdaysParse[n].test(e)){return n}}}function Bt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=_t(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Ut(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function zt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Mt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Kt=xe;function jt(e){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){Xt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!p(this,"_weekdaysRegex")){this._weekdaysRegex=Kt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Wt=xe;function Gt(e){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){Xt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!p(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Wt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Yt=xe,qt;function Jt(e){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){Xt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!p(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Yt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Xt(){function e(e,t){return t.length-e.length}var t=[],a=[],n=[],i=[],r,o,s,l,u;for(r=0;r<7;r++){o=y([2e3,1]).day(r);s=this.weekdaysMin(o,"");l=this.weekdaysShort(o,"");u=this.weekdays(o,"");t.push(s);a.push(l);n.push(u);i.push(s);i.push(l);i.push(u)}t.sort(e);a.sort(e);n.sort(e);i.sort(e);for(r=0;r<7;r++){a[r]=Me(a[r]);n[r]=Me(n[r]);i[r]=Me(i[r])}this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Zt(){return this.hours()||24}function $t(e,t){re(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ea(e,t){return t._meridiemParse}function ta(e){return(e+"").toLowerCase().charAt(0)==="p"}function aa(e,t,a){if(e>11){return a?"pm":"PM"}else{return a?"am":"AM"}}re("H",["HH",2],0,"hour"),re("h",["hh",2],0,Qt),re("k",["kk",2],0,Zt),re("hmm",0,0,function(){return""+Qt.apply(this)+ee(this.minutes(),2)}),re("hmmss",0,0,function(){return""+Qt.apply(this)+ee(this.minutes(),2)+ee(this.seconds(),2)}),re("Hmm",0,0,function(){return""+this.hours()+ee(this.minutes(),2)}),re("Hmmss",0,0,function(){return""+this.hours()+ee(this.minutes(),2)+ee(this.seconds(),2)}),$t("a",true),$t("A",false),q("hour","h"),Z("hour",13),Ie("a",ea),Ie("A",ea),Ie("H",ge),Ie("h",ge),Ie("k",ge),Ie("HH",ge,de),Ie("hh",ge,de),Ie("kk",ge,de),Ie("hmm",me),Ie("hmmss",fe),Ie("Hmm",me),Ie("Hmmss",fe),Re(["H","HH"],He),Re(["k","kk"],function(e,t,a){var n=k(e);t[He]=n===24?0:n}),Re(["a","A"],function(e,t,a){a._isPm=a._locale.isPM(e);a._meridiem=e}),Re(["h","hh"],function(e,t,a){t[He]=k(e);g(a).bigHour=true}),Re("hmm",function(e,t,a){var n=e.length-2;t[He]=k(e.substr(0,n));t[Be]=k(e.substr(n));g(a).bigHour=true}),Re("hmmss",function(e,t,a){var n=e.length-4;var i=e.length-2;t[He]=k(e.substr(0,n));t[Be]=k(e.substr(n,2));t[Ue]=k(e.substr(i));g(a).bigHour=true}),Re("Hmm",function(e,t,a){var n=e.length-2;t[He]=k(e.substr(0,n));t[Be]=k(e.substr(n))}),Re("Hmmss",function(e,t,a){var n=e.length-4;var i=e.length-2;t[He]=k(e.substr(0,n));t[Be]=k(e.substr(n,2));t[Ue]=k(e.substr(i))});var na=Xe("Hours",true),ia={calendar:N,longDateFormat:F,invalidDate:H,ordinal:U,dayOfMonthOrdinalParse:z,relativeTime:j,months:it,monthsShort:ot,week:wt,weekdays:Lt,weekdaysMin:Et,weekdaysShort:Vt,meridiemParse:/[ap]\.?m?\.?/i},ra={},oa={},sa;function la(e){return e?e.toLowerCase().replace("_","-"):e}function ua(e){var t=0,a,n,i,r;while(t<e.length){r=la(e[t]).split("-");a=r.length;n=la(e[t+1]);n=n?n.split("-"):null;while(a>0){i=ca(r.slice(0,a).join("-"));if(i){return i}if(n&&n.length>=a&&w(r,n,true)>=a-1){break}a--}t++}return null}function ca(e){var t=null;if(!ra[e]&&typeof _r!=="undefined"&&_r&&_r.exports){try{t=sa._abbr;var a=Mr;Lr(79)("./"+e);da(t)}catch(e){}}return ra[e]}function da(e,t){var a;if(e){if(r(t)){a=ya(e)}else{a=pa(e,t)}if(a){sa=a}}return sa._abbr}function pa(e,t){if(t!==null){var a=ia;t.abbr=e;if(ra[e]!=null){_("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");a=ra[e]._config}else if(t.parentLocale!=null){if(ra[t.parentLocale]!=null){a=ra[t.parentLocale]._config}else{if(!oa[t.parentLocale]){oa[t.parentLocale]=[]}oa[t.parentLocale].push({name:e,config:t});return null}}ra[e]=new V(R(a,t));if(oa[e]){oa[e].forEach(function(e){pa(e.name,e.config)})}da(e);return ra[e]}else{delete ra[e];return null}}function ha(e,t){if(null!=t){var a,n,i=ia;null!=(n=ca(e))&&(i=n._config),t=R(i,t),(a=new V(t)).parentLocale=ra[e],ra[e]=a,da(e)}else null!=ra[e]&&(null!=ra[e].parentLocale?ra[e]=ra[e].parentLocale:null!=ra[e]&&delete ra[e]);return ra[e]}function ya(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return sa}if(!o(e)){t=ca(e);if(t){return t}e=[e]}return ua(e)}function ga(){return P(ra)}function ma(e){var t;var a=e._a;if(a&&g(e).overflow===-2){t=a[Fe]<0||a[Fe]>11?Fe:a[Oe]<1||a[Oe]>at(a[Ee],a[Fe])?Oe:a[He]<0||a[He]>24||a[He]===24&&(a[Be]!==0||a[Ue]!==0||a[ze]!==0)?He:a[Be]<0||a[Be]>59?Be:a[Ue]<0||a[Ue]>59?Ue:a[ze]<0||a[ze]>999?ze:-1;if(g(e)._overflowDayOfYear&&(t<Ee||t>Oe)){t=Oe}if(g(e)._overflowWeeks&&t===-1){t=Ke}if(g(e)._overflowWeekday&&t===-1){t=je}g(e).overflow=t}return e}function fa(e,t,a){if(e!=null){return e}if(t!=null){return t}return a}function va(e){var t=new Date(u.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function ba(e){var t,a,n=[],i,r,o;if(e._d){return}i=va(e);if(e._w&&e._a[Oe]==null&&e._a[Fe]==null){Ca(e)}if(e._dayOfYear!=null){o=fa(e._a[Ee],i[Ee]);if(e._dayOfYear>We(o)||e._dayOfYear===0){g(e)._overflowDayOfYear=true}a=bt(o,0,e._dayOfYear);e._a[Fe]=a.getUTCMonth();e._a[Oe]=a.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=i[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[He]===24&&e._a[Be]===0&&e._a[Ue]===0&&e._a[ze]===0){e._nextDay=true;e._a[He]=0}e._d=(e._useUTC?bt:vt).apply(null,n);r=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[He]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==r){g(e).weekdayMismatch=true}}function Ca(e){var t,a,n,i,r,o,s,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){r=1;o=4;a=fa(t.GG,e._a[Ee],St(Wa(),1,4).year);n=fa(t.W,1);i=fa(t.E,1);if(i<1||i>7){l=true}}else{r=e._locale._week.dow;o=e._locale._week.doy;var u=St(Wa(),r,o);a=fa(t.gg,e._a[Ee],u.year);n=fa(t.w,u.week);if(t.d!=null){i=t.d;if(i<0||i>6){l=true}}else if(t.e!=null){i=t.e+r;if(t.e<0||t.e>6){l=true}}else{i=r}}if(n<1||n>Dt(a,r,o)){g(e)._overflowWeeks=true}else if(l!=null){g(e)._overflowWeekday=true}else{s=Tt(a,n,i,r,o);e._a[Ee]=s.year;e._dayOfYear=s.dayOfYear}}var Ta=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sa=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Da=/Z|[+-]\d\d(?::?\d\d)?/,ka=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]],wa=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xa=/^\/?Date\((\-?\d+)/i;function Aa(e){var t,a,n=e._i,i=Ta.exec(n)||Sa.exec(n),r,o,s,l;if(i){g(e).iso=true;for(t=0,a=ka.length;t<a;t++){if(ka[t][1].exec(i[1])){o=ka[t][0];r=ka[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(i[3]){for(t=0,a=wa.length;t<a;t++){if(wa[t][1].exec(i[3])){s=(i[2]||" ")+wa[t][0];break}}if(s==null){e._isValid=false;return}}if(!r&&s!=null){e._isValid=false;return}if(i[4]){if(Da.exec(i[4])){l="Z"}else{e._isValid=false;return}}e._f=o+(s||"")+(l||"");Fa(e)}else{e._isValid=false}}var Ia=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Pa(e,t,a,n,i,r){var o=[_a(e),ot.indexOf(t),parseInt(a,10),parseInt(n,10),parseInt(i,10)];if(r){o.push(parseInt(r,10))}return o}function _a(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function Ma(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function La(e,t,a){if(e){var n=Vt.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i){g(a).weekdayMismatch=true;a._isValid=false;return false}}return true}var Ra={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Va(e,t,a){if(e){return Ra[e]}else if(t){return 0}else{var n=parseInt(a,10);var i=n%100,r=(n-i)/100;return r*60+i}}function Na(e){var t=Ia.exec(Ma(e._i));if(t){var a=Pa(t[4],t[3],t[2],t[5],t[6],t[7]);if(!La(t[1],a,e)){return}e._a=a;e._tzm=Va(t[8],t[9],t[10]);e._d=bt.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);g(e).rfc2822=true}else{e._isValid=false}}function Ea(e){var t=xa.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}Aa(e);if(e._isValid===false){delete e._isValid}else{return}Na(e);if(e._isValid===false){delete e._isValid}else{return}u.createFromInputFallback(e)}function Fa(e){if(e._f===u.ISO_8601){Aa(e);return}if(e._f===u.RFC_2822){Na(e);return}e._a=[];g(e).empty=true;var t=""+e._i,a,n,i,r,o,s=t.length,l=0;i=ue(e._f,e._locale).match(te)||[];for(a=0;a<i.length;a++){r=i[a];n=(t.match(Pe(r,e))||[])[0];if(n){o=t.substr(0,t.indexOf(n));if(o.length>0){g(e).unusedInput.push(o)}t=t.slice(t.indexOf(n)+n.length);l+=n.length}if(ie[r]){if(n){g(e).empty=false}else{g(e).unusedTokens.push(r)}Ne(r,n,e)}else if(e._strict&&!n){g(e).unusedTokens.push(r)}}g(e).charsLeftOver=s-l;if(t.length>0){g(e).unusedInput.push(t)}if(e._a[He]<=12&&g(e).bigHour===true&&e._a[He]>0){g(e).bigHour=undefined}g(e).parsedDateParts=e._a.slice(0);g(e).meridiem=e._meridiem;e._a[He]=Oa(e._locale,e._a[He],e._meridiem);ba(e);ma(e)}function Oa(e,t,a){var n;if(a==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,a)}else if(e.isPM!=null){n=e.isPM(a);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Ha(e){var t,a,n,i,r;if(e._f.length===0){g(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){r=0;t=b({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];Fa(t);if(!m(t)){continue}r+=g(t).charsLeftOver;r+=g(t).unusedTokens.length*10;g(t).score=r;if(n==null||r<n){n=r;a=t}}h(e,a||t)}function Ba(e){if(e._d){return}var t=X(e._i);e._a=a([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});ba(e)}function Ua(e){var t=new T(ma(za(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function za(e){var t=e._i,a=e._f;e._locale=e._locale||ya(e._l);if(t===null||a===undefined&&t===""){return f({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(S(t)){return new T(ma(t))}else if(d(t)){e._d=t}else if(o(a)){Ha(e)}else if(a){Fa(e)}else{Ka(e)}if(!m(e)){e._d=null}return e}function Ka(e){var t=e._i;if(r(t)){e._d=new Date(u.now())}else if(d(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Ea(e)}else if(o(t)){e._a=a(t.slice(0),function(e){return parseInt(e,10)});ba(e)}else if(s(t)){Ba(e)}else if(c(t)){e._d=new Date(t)}else{u.createFromInputFallback(e)}}function ja(e,t,a,n,i){var r={};if(a===true||a===false){n=a;a=undefined}if(s(e)&&l(e)||o(e)&&e.length===0){e=undefined}r._isAMomentObject=true;r._useUTC=r._isUTC=i;r._l=a;r._i=e;r._f=t;r._strict=n;return Ua(r)}function Wa(e,t,a,n){return ja(e,t,a,n,false)}u.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),u.ISO_8601=function(){},u.RFC_2822=function(){};var Ga=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Wa.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return f()}}),Ya=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Wa.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return f()}});function qa(e,t){var a,n;if(t.length===1&&o(t[0])){t=t[0]}if(!t.length){return Wa()}a=t[0];for(n=1;n<t.length;++n){if(!t[n].isValid()||t[n][e](a)){a=t[n]}}return a}function Ja(){var e;return qa("isBefore",[].slice.call(arguments,0))}function Xa(){var e;return qa("isAfter",[].slice.call(arguments,0))}var Qa=function(){return Date.now?Date.now():+new Date},Za=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $a(e){for(var t in e){if(!(qe.call(Za,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var a=false;for(var n=0;n<Za.length;++n){if(e[Za[n]]){if(a){return false}if(parseFloat(e[Za[n]])!==k(e[Za[n]])){a=true}}}return true}function en(){return this._isValid}function tn(){return kn(NaN)}function an(e){var t=X(e),a=t.year||0,n=t.quarter||0,i=t.month||0,r=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=$a(t);this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60;this._days=+o+r*7;this._months=+i+n*3+a*12;this._data={};this._locale=ya();this._bubble()}function nn(e){return e instanceof an}function rn(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function on(e,a){re(e,0,0,function(){var e=this.utcOffset();var t="+";if(e<0){e=-e;t="-"}return t+ee(~~(e/60),2)+a+ee(~~e%60,2)})}on("Z",":"),on("ZZ",""),Ie("Z",ke),Ie("ZZ",ke),Re(["Z","ZZ"],function(e,t,a){a._useUTC=true;a._tzm=ln(ke,e)});var sn=/([\+\-]|\d\d)/gi;function ln(e,t){var a=(t||"").match(e);if(a===null){return null}var n=a[a.length-1]||[];var i=(n+"").match(sn)||["-",0,0];var r=+(i[1]*60)+k(i[2]);return r===0?0:i[0]==="+"?r:-r}function un(e,t){var a,n;if(t._isUTC){a=t.clone();n=(S(e)||d(e)?e.valueOf():Wa(e).valueOf())-a.valueOf();a._d.setTime(a._d.valueOf()+n);u.updateOffset(a,false);return a}else{return Wa(e).local()}}function cn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function dn(e,t,a){var n=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=ln(ke,e);if(e===null){return this}}else if(Math.abs(e)<16&&!a){e=e*60}if(!this._isUTC&&t){i=cn(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(n!==e){if(!t||this._changeInProgress){Pn(this,kn(e-n,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;u.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?n:cn(this)}}function pn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function hn(e){return this.utcOffset(0,e)}function yn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(cn(this),"m")}}return this}function gn(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=ln(De,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function mn(e){if(!this.isValid()){return false}e=e?Wa(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function fn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function vn(){if(!r(this._isDSTShifted)){return this._isDSTShifted}var e={};b(e,this);e=za(e);if(e._a){var t=e._isUTC?y(e._a):Wa(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function bn(){return this.isValid()?!this._isUTC:false}function Cn(){return this.isValid()?this._isUTC:false}function Tn(){return this.isValid()?this._isUTC&&this._offset===0:false}u.updateOffset=function(){};var Sn=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Dn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function kn(e,t){var a=e,n=null,i,r,o;if(nn(e)){a={ms:e._milliseconds,d:e._days,M:e._months}}else if(c(e)){a={};if(t){a[t]=e}else{a.milliseconds=e}}else if(!!(n=Sn.exec(e))){i=n[1]==="-"?-1:1;a={y:0,d:k(n[Oe])*i,h:k(n[He])*i,m:k(n[Be])*i,s:k(n[Ue])*i,ms:k(rn(n[ze]*1e3))*i}}else if(!!(n=Dn.exec(e))){i=n[1]==="-"?-1:n[1]==="+"?1:1;a={y:wn(n[2],i),M:wn(n[3],i),w:wn(n[4],i),d:wn(n[5],i),h:wn(n[6],i),m:wn(n[7],i),s:wn(n[8],i)}}else if(a==null){a={}}else if(typeof a==="object"&&("from"in a||"to"in a)){o=An(Wa(a.from),Wa(a.to));a={};a.ms=o.milliseconds;a.M=o.months}r=new an(a);if(nn(e)&&p(e,"_locale")){r._locale=e._locale}return r}function wn(e,t){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*t}function xn(e,t){var a={milliseconds:0,months:0};a.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(a.months,"M").isAfter(t)){--a.months}a.milliseconds=+t-+e.clone().add(a.months,"M");return a}function An(e,t){var a;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=un(t,e);if(e.isBefore(t)){a=xn(e,t)}else{a=xn(t,e);a.milliseconds=-a.milliseconds;a.months=-a.months}return a}function In(i,r){return function(e,t){var a,n;if(t!==null&&!isNaN(+t)){_(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");n=e;e=t;t=n}e=typeof e==="string"?+e:e;a=kn(e,t);Pn(this,a,i);return this}}function Pn(e,t,a,n){var i=t._milliseconds,r=rn(t._days),o=rn(t._months);if(!e.isValid()){return}n=n==null?true:n;if(o){ct(e,Qe(e,"Month")+o*a)}if(r){Ze(e,"Date",Qe(e,"Date")+r*a)}if(i){e._d.setTime(e._d.valueOf()+i*a)}if(n){u.updateOffset(e,r||o)}}kn.fn=an.prototype,kn.invalid=tn;var _n=In(1,"add"),Mn=In(-1,"subtract");function Ln(e,t){var a=e.diff(t,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function Rn(e,t){var a=e||Wa(),n=un(a,this).startOf("day"),i=u.calendarFormat(this,n)||"sameElse";var r=t&&(M(t[i])?t[i].call(this,a):t[i]);return this.format(r||this.localeData().calendar(i,this,Wa(a)))}function Vn(){return new T(this)}function Nn(e,t){var a=S(e)?e:Wa(e);if(!(this.isValid()&&a.isValid())){return false}t=J(!r(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>a.valueOf()}else{return a.valueOf()<this.clone().startOf(t).valueOf()}}function En(e,t){var a=S(e)?e:Wa(e);if(!(this.isValid()&&a.isValid())){return false}t=J(!r(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<a.valueOf()}else{return this.clone().endOf(t).valueOf()<a.valueOf()}}function Fn(e,t,a,n){n=n||"()";return(n[0]==="("?this.isAfter(e,a):!this.isBefore(e,a))&&(n[1]===")"?this.isBefore(t,a):!this.isAfter(t,a))}function On(e,t){var a=S(e)?e:Wa(e),n;if(!(this.isValid()&&a.isValid())){return false}t=J(t||"millisecond");if(t==="millisecond"){return this.valueOf()===a.valueOf()}else{n=a.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Hn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Bn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Un(e,t,a){var n,i,r,o;if(!this.isValid()){return NaN}n=un(e,this);if(!n.isValid()){return NaN}i=(n.utcOffset()-this.utcOffset())*6e4;t=J(t);switch(t){case"year":o=zn(this,n)/12;break;case"month":o=zn(this,n);break;case"quarter":o=zn(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-i)/864e5;break;case"week":o=(this-n-i)/6048e5;break;default:o=this-n}return a?o:D(o)}function zn(e,t){var a=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(a,"months"),i,r;if(t-n<0){i=e.clone().add(a-1,"months");r=(t-n)/(n-i)}else{i=e.clone().add(a+1,"months");r=(t-n)/(i-n)}return-(a+r)||0}function Kn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jn(e){if(!this.isValid()){return null}var t=e!==true;var a=t?this.clone().utc():this;if(a.year()<0||a.year()>9999){return le(a,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(M(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this._d.valueOf()).toISOString().replace("Z",le(a,"Z"))}}return le(a,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Wn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var a="["+e+'("]';var n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var i="-MM-DD[T]HH:mm:ss.SSS";var r=t+'[")]';return this.format(a+n+i+r)}function Gn(e){if(!e){e=this.isUtc()?u.defaultFormatUtc:u.defaultFormat}var t=le(this,e);return this.localeData().postformat(t)}function Yn(e,t){if(this.isValid()&&(S(e)&&e.isValid()||Wa(e).isValid())){return kn({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function qn(e){return this.from(Wa(),e)}function Jn(e,t){if(this.isValid()&&(S(e)&&e.isValid()||Wa(e).isValid())){return kn({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Xn(e){return this.to(Wa(),e)}function Qn(e){var t;if(e===undefined){return this._locale._abbr}else{t=ya(e);if(t!=null){this._locale=t}return this}}u.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",u.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Zn=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function $n(){return this._locale}function ei(e){e=J(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function ti(e){e=J(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function ai(){return this._d.valueOf()-(this._offset||0)*6e4}function ni(){return Math.floor(this.valueOf()/1e3)}function ii(){return new Date(this.valueOf())}function ri(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function oi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function si(){return this.isValid()?this.toISOString():null}function li(){return m(this)}function ui(){return h({},g(this))}function ci(){return g(this).overflow}function di(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function pi(e,t){re(0,[e,e.length],0,t)}function hi(e){return fi.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function yi(e){return fi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function gi(){return Dt(this.year(),1,4)}function mi(){var e=this.localeData()._week;return Dt(this.year(),e.dow,e.doy)}function fi(e,t,a,n,i){var r;if(e==null){return St(this,n,i).year}else{r=Dt(e,n,i);if(t>r){t=r}return vi.call(this,e,t,a,n,i)}}function vi(e,t,a,n,i){var r=Tt(e,t,a,n,i),o=bt(r.year,0,r.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}function bi(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}re(0,["gg",2],0,function(){return this.weekYear()%100}),re(0,["GG",2],0,function(){return this.isoWeekYear()%100}),pi("gggg","weekYear"),pi("ggggg","weekYear"),pi("GGGG","isoWeekYear"),pi("GGGGG","isoWeekYear"),q("weekYear","gg"),q("isoWeekYear","GG"),Z("weekYear",1),Z("isoWeekYear",1),Ie("G",Se),Ie("g",Se),Ie("GG",ge,de),Ie("gg",ge,de),Ie("GGGG",be,he),Ie("gggg",be,he),Ie("GGGGG",Ce,ye),Ie("ggggg",Ce,ye),Ve(["gggg","ggggg","GGGG","GGGGG"],function(e,t,a,n){t[n.substr(0,2)]=k(e)}),Ve(["gg","GG"],function(e,t,a,n){t[n]=u.parseTwoDigitYear(e)}),re("Q",0,"Qo","quarter"),q("quarter","Q"),Z("quarter",7),Ie("Q",ce),Re("Q",function(e,t){t[Fe]=(k(e)-1)*3}),re("D",["DD",2],"Do","date"),q("date","D"),Z("date",9),Ie("D",ge),Ie("DD",ge,de),Ie("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Re(["D","DD"],Oe),Re("Do",function(e,t){t[Oe]=k(e.match(ge)[0])});var Ci=Xe("Date",true);function Ti(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}re("DDD",["DDDD",3],"DDDo","dayOfYear"),q("dayOfYear","DDD"),Z("dayOfYear",4),Ie("DDD",ve),Ie("DDDD",pe),Re(["DDD","DDDD"],function(e,t,a){a._dayOfYear=k(e)}),re("m",["mm",2],0,"minute"),q("minute","m"),Z("minute",14),Ie("m",ge),Ie("mm",ge,de),Re(["m","mm"],Be);var Si=Xe("Minutes",false);re("s",["ss",2],0,"second"),q("second","s"),Z("second",15),Ie("s",ge),Ie("ss",ge,de),Re(["s","ss"],Ue);var Di=Xe("Seconds",false),ki;for(re("S",0,0,function(){return~~(this.millisecond()/100)}),re(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),re(0,["SSS",3],0,"millisecond"),re(0,["SSSS",4],0,function(){return this.millisecond()*10}),re(0,["SSSSS",5],0,function(){return this.millisecond()*100}),re(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),re(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),re(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),re(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),q("millisecond","ms"),Z("millisecond",16),Ie("S",ve,ce),Ie("SS",ve,de),Ie("SSS",ve,pe),ki="SSSS";ki.length<=9;ki+="S"){Ie(ki,Te)}function wi(e,t){t[ze]=k(("0."+e)*1e3)}for(ki="S";ki.length<=9;ki+="S"){Re(ki,wi)}var xi=Xe("Milliseconds",false);function Ai(){return this._isUTC?"UTC":""}function Ii(){return this._isUTC?"Coordinated Universal Time":""}re("z",0,0,"zoneAbbr"),re("zz",0,0,"zoneName");var Pi=T.prototype;function _i(e){return Wa(1e3*e)}function Mi(){return Wa.apply(null,arguments).parseZone()}function Li(e){return e}Pi.add=_n,Pi.calendar=Rn,Pi.clone=Vn,Pi.diff=Un,Pi.endOf=ti,Pi.format=Gn,Pi.from=Yn,Pi.fromNow=qn,Pi.to=Jn,Pi.toNow=Xn,Pi.get=$e,Pi.invalidAt=ci,Pi.isAfter=Nn,Pi.isBefore=En,Pi.isBetween=Fn,Pi.isSame=On,Pi.isSameOrAfter=Hn,Pi.isSameOrBefore=Bn,Pi.isValid=li,Pi.lang=Zn,Pi.locale=Qn,Pi.localeData=$n,Pi.max=Ya,Pi.min=Ga,Pi.parsingFlags=ui,Pi.set=et,Pi.startOf=ei,Pi.subtract=Mn,Pi.toArray=ri,Pi.toObject=oi,Pi.toDate=ii,Pi.toISOString=jn,Pi.inspect=Wn,Pi.toJSON=si,Pi.toString=Kn,Pi.unix=ni,Pi.valueOf=ai,Pi.creationData=di,Pi.year=Ye,Pi.isLeapYear=Je,Pi.weekYear=hi,Pi.isoWeekYear=yi,Pi.quarter=Pi.quarters=bi,Pi.month=dt,Pi.daysInMonth=pt,Pi.week=Pi.weeks=It,Pi.isoWeek=Pi.isoWeeks=Pt,Pi.weeksInYear=mi,Pi.isoWeeksInYear=gi,Pi.date=Ci,Pi.day=Pi.days=Bt,Pi.weekday=Ut,Pi.isoWeekday=zt,Pi.dayOfYear=Ti,Pi.hour=Pi.hours=na,Pi.minute=Pi.minutes=Si,Pi.second=Pi.seconds=Di,Pi.millisecond=Pi.milliseconds=xi,Pi.utcOffset=dn,Pi.utc=hn,Pi.local=yn,Pi.parseZone=gn,Pi.hasAlignedHourOffset=mn,Pi.isDST=fn,Pi.isLocal=bn,Pi.isUtcOffset=Cn,Pi.isUtc=Tn,Pi.isUTC=Tn,Pi.zoneAbbr=Ai,Pi.zoneName=Ii,Pi.dates=A("dates accessor is deprecated. Use date instead.",Ci),Pi.months=A("months accessor is deprecated. Use month instead",dt),Pi.years=A("years accessor is deprecated. Use year instead",Ye),Pi.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",pn),Pi.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",vn);var Ri=V.prototype;function Vi(e,t,a,n){var i=ya();var r=y().set(n,t);return i[a](r,e)}function Ni(e,t,a){if(c(e)){t=e;e=undefined}e=e||"";if(t!=null){return Vi(e,t,a,"month")}var n;var i=[];for(n=0;n<12;n++){i[n]=Vi(e,n,a,"month")}return i}function Ei(e,t,a,n){if(typeof e==="boolean"){if(c(t)){a=t;t=undefined}t=t||""}else{t=e;a=t;e=false;if(c(t)){a=t;t=undefined}t=t||""}var i=ya(),r=e?i._week.dow:0;if(a!=null){return Vi(t,(a+r)%7,n,"day")}var o;var s=[];for(o=0;o<7;o++){s[o]=Vi(t,(o+r)%7,n,"day")}return s}function Fi(e,t){return Ni(e,t,"months")}function Oi(e,t){return Ni(e,t,"monthsShort")}function Hi(e,t,a){return Ei(e,t,a,"weekdays")}function Bi(e,t,a){return Ei(e,t,a,"weekdaysShort")}function Ui(e,t,a){return Ei(e,t,a,"weekdaysMin")}Ri.calendar=E,Ri.longDateFormat=O,Ri.invalidDate=B,Ri.ordinal=K,Ri.preparse=Li,Ri.postformat=Li,Ri.relativeTime=W,Ri.pastFuture=G,Ri.set=L,Ri.months=rt,Ri.monthsShort=st,Ri.monthsParse=ut,Ri.monthsRegex=mt,Ri.monthsShortRegex=yt,Ri.week=kt,Ri.firstDayOfYear=At,Ri.firstDayOfWeek=xt,Ri.weekdays=Rt,Ri.weekdaysMin=Ft,Ri.weekdaysShort=Nt,Ri.weekdaysParse=Ht,Ri.weekdaysRegex=jt,Ri.weekdaysShortRegex=Gt,Ri.weekdaysMinRegex=Jt,Ri.isPM=ta,Ri.meridiem=aa,da("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,a=k(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+a}}),u.lang=A("moment.lang is deprecated. Use moment.locale instead.",da),u.langData=A("moment.langData is deprecated. Use moment.localeData instead.",ya);var zi=Math.abs;function Ki(){var e=this._data;return this._milliseconds=zi(this._milliseconds),this._days=zi(this._days),this._months=zi(this._months),e.milliseconds=zi(e.milliseconds),e.seconds=zi(e.seconds),e.minutes=zi(e.minutes),e.hours=zi(e.hours),e.months=zi(e.months),e.years=zi(e.years),this}function ji(e,t,a,n){var i=kn(t,a);e._milliseconds+=n*i._milliseconds;e._days+=n*i._days;e._months+=n*i._months;return e._bubble()}function Wi(e,t){return ji(this,e,t,1)}function Gi(e,t){return ji(this,e,t,-1)}function Yi(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function qi(){var e,t,a,n,i,r=this._milliseconds,o=this._days,s=this._months,l=this._data;if(!(0<=r&&0<=o&&0<=s||r<=0&&o<=0&&s<=0))r+=864e5*Yi(Xi(s)+o),s=o=0;return l.milliseconds=r%1e3,e=D(r/1e3),l.seconds=e%60,t=D(e/60),l.minutes=t%60,a=D(t/60),l.hours=a%24,o+=D(a/24),i=D(Ji(o)),s+=i,o-=Yi(Xi(i)),n=D(s/12),s%=12,l.days=o,l.months=s,l.years=n,this}function Ji(e){return e*4800/146097}function Xi(e){return e*146097/4800}function Qi(e){if(!this.isValid())return NaN;var t,a,n=this._milliseconds;if("month"===(e=J(e))||"year"===e)return t=this._days+n/864e5,a=this._months+Ji(t),"month"===e?a:a/12}function Zi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN}function $i(e){return function(){return this.as(e)}}var er=$i("ms"),tr=$i("s"),ar=$i("m"),nr=$i("h"),ir=$i("d"),rr=$i("w"),or=$i("M"),sr=$i("y");function lr(){return kn(this)}function ur(e){return e=J(e),this.isValid()?this[e+"s"]():NaN}function cr(e){return function(){return this.isValid()?this._data[e]:NaN}}var dr=cr("milliseconds"),pr=cr("seconds"),hr=cr("minutes"),yr=cr("hours"),gr=cr("days"),mr=cr("months"),fr=cr("years");function vr(){return D(this.days()/7)}var br=Math.round,Cr={ss:44,s:45,m:45,h:22,d:26,M:11};function Tr(e,t,a,n,i){return i.relativeTime(t||1,!!a,e,n)}function Sr(e,t,a){var n=kn(e).abs(),i=br(n.as("s")),r=br(n.as("m")),o=br(n.as("h")),s=br(n.as("d")),l=br(n.as("M")),u=br(n.as("y")),c=(i<=Cr.ss?["s",i]:i<Cr.s&&["ss",i])||r<=1&&["m"]||r<Cr.m&&["mm",r]||o<=1&&["h"]||o<Cr.h&&["hh",o]||s<=1&&["d"]||s<Cr.d&&["dd",s]||l<=1&&["M"]||l<Cr.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=0<+e,c[4]=a,function(e,t,a,n,i){return i.relativeTime(t||1,!!a,e,n)}.apply(null,c)}function Dr(e){return void 0!==e?"function"==typeof e&&(br=e,!0):br}function kr(e,t){if(void 0===Cr[e])return!1;if(void 0===t)return Cr[e];if(Cr[e]=t,"s"===e)Cr.ss=t-1;return!0}function wr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),a=function(e,t,a){var n=kn(e).abs(),i=br(n.as("s")),r=br(n.as("m")),o=br(n.as("h")),s=br(n.as("d")),l=br(n.as("M")),u=br(n.as("y")),c=(i<=Cr.ss?["s",i]:i<Cr.s&&["ss",i])||r<=1&&["m"]||r<Cr.m&&["mm",r]||o<=1&&["h"]||o<Cr.h&&["hh",o]||s<=1&&["d"]||s<Cr.d&&["dd",s]||l<=1&&["M"]||l<Cr.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=0<+e,c[4]=a,function(e,t,a,n,i){return i.relativeTime(t||1,!!a,e,n)}.apply(null,c)}(this,!e,t);if(e)a=t.pastFuture(+this,a);return t.postformat(a)}var xr=Math.abs;function Ar(e){return(e>0)-(e<0)||+e}function Ir(){if(!this.isValid()){return this.localeData().invalidDate()}var e=xr(this._milliseconds)/1e3;var t=xr(this._days);var a=xr(this._months);var n,i,r;n=D(e/60);i=D(n/60);e%=60;n%=60;r=D(a/12);a%=12;var o=r;var s=a;var l=t;var u=i;var c=n;var d=e?e.toFixed(3).replace(/\.?0+$/,""):"";var p=this.asSeconds();if(!p){return"P0D"}var h=p<0?"-":"";var y=Ar(this._months)!==Ar(p)?"-":"";var g=Ar(this._days)!==Ar(p)?"-":"";var m=Ar(this._milliseconds)!==Ar(p)?"-":"";return h+"P"+(o?y+o+"Y":"")+(s?y+s+"M":"")+(l?g+l+"D":"")+(u||c||d?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(d?m+d+"S":"")}var Pr=an.prototype;return Pr.isValid=function(){return this._isValid},Pr.abs=function(){var e=this._data;return this._milliseconds=zi(this._milliseconds),this._days=zi(this._days),this._months=zi(this._months),e.milliseconds=zi(e.milliseconds),e.seconds=zi(e.seconds),e.minutes=zi(e.minutes),e.hours=zi(e.hours),e.months=zi(e.months),e.years=zi(e.years),this},Pr.add=function(e,t){return ji(this,e,t,1)},Pr.subtract=function(e,t){return ji(this,e,t,-1)},Pr.as=function(e){if(!this.isValid())return NaN;var t,a,n=this._milliseconds;{if("month"===(e=J(e))||"year"===e)return t=this._days+n/864e5,a=this._months+Ji(t),"month"===e?a:a/12;switch(t=this._days+Math.round(Xi(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}},Pr.asMilliseconds=er,Pr.asSeconds=tr,Pr.asMinutes=ar,Pr.asHours=nr,Pr.asDays=ir,Pr.asWeeks=rr,Pr.asMonths=or,Pr.asYears=sr,Pr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN},Pr._bubble=function(){var e,t,a,n,i,r=this._milliseconds,o=this._days,s=this._months,l=this._data;0<=r&&0<=o&&0<=s||r<=0&&o<=0&&s<=0||(r+=864e5*Yi(Xi(s)+o),s=o=0);return l.milliseconds=r%1e3,e=D(r/1e3),l.seconds=e%60,t=D(e/60),l.minutes=t%60,a=D(t/60),l.hours=a%24,o+=D(a/24),i=D(Ji(o)),s+=i,o-=Yi(Xi(i)),n=D(s/12),s%=12,l.days=o,l.months=s,l.years=n,this},Pr.clone=function(){return kn(this)},Pr.get=function(e){return e=J(e),this.isValid()?this[e+"s"]():NaN},Pr.milliseconds=dr,Pr.seconds=pr,Pr.minutes=hr,Pr.hours=yr,Pr.days=gr,Pr.weeks=function(){return D(this.days()/7)},Pr.months=mr,Pr.years=fr,Pr.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),a=function(e,t,a){var n=kn(e).abs(),i=br(n.as("s")),r=br(n.as("m")),o=br(n.as("h")),s=br(n.as("d")),l=br(n.as("M")),u=br(n.as("y")),c=(i<=Cr.ss?["s",i]:i<Cr.s&&["ss",i])||r<=1&&["m"]||r<Cr.m&&["mm",r]||o<=1&&["h"]||o<Cr.h&&["hh",o]||s<=1&&["d"]||s<Cr.d&&["dd",s]||l<=1&&["M"]||l<Cr.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=0<+e,c[4]=a,function(e,t,a,n,i){return i.relativeTime(t||1,!!a,e,n)}.apply(null,c)}(this,!e,t);e&&(a=t.pastFuture(+this,a));return t.postformat(a)},Pr.toISOString=Ir,Pr.toString=Ir,Pr.toJSON=Ir,Pr.locale=Qn,Pr.localeData=$n,Pr.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ir),Pr.lang=Zn,re("X",0,0,"unix"),re("x",0,0,"valueOf"),Ie("x",Se),Ie("X",/[+-]?\d+(\.\d{1,3})?/),Re("X",function(e,t,a){a._d=new Date(1e3*parseFloat(e,10))}),Re("x",function(e,t,a){a._d=new Date(k(e))}),u.version="2.20.1",function(e){t=e}(Wa),u.fn=Pi,u.min=function(){return qa("isBefore",[].slice.call(arguments,0))},u.max=function(){return qa("isAfter",[].slice.call(arguments,0))},u.now=function(){return Date.now?Date.now():+new Date},u.utc=y,u.unix=function(e){return Wa(1e3*e)},u.months=function(e,t){return Ni(e,t,"months")},u.isDate=d,u.locale=da,u.invalid=f,u.duration=kn,u.isMoment=S,u.weekdays=function(e,t,a){return Ei(e,t,a,"weekdays")},u.parseZone=function(){return Wa.apply(null,arguments).parseZone()},u.localeData=ya,u.isDuration=nn,u.monthsShort=function(e,t){return Ni(e,t,"monthsShort")},u.weekdaysMin=function(e,t,a){return Ei(e,t,a,"weekdaysMin")},u.defineLocale=pa,u.updateLocale=function(e,t){if(null!=t){var a,n,i=ia;null!=(n=ca(e))&&(i=n._config),t=R(i,t),(a=new V(t)).parentLocale=ra[e],ra[e]=a,da(e)}else null!=ra[e]&&(null!=ra[e].parentLocale?ra[e]=ra[e].parentLocale:null!=ra[e]&&delete ra[e]);return ra[e]},u.locales=function(){return P(ra)},u.weekdaysShort=function(e,t,a){return Ei(e,t,a,"weekdaysShort")},u.normalizeUnits=J,u.relativeTimeRounding=function(e){return void 0!==e?"function"==typeof e&&(br=e,!0):br},u.relativeTimeThreshold=function(e,t){if(void 0===Cr[e])return!1;if(void 0===t)return Cr[e];Cr[e]=t,"s"===e&&(Cr.ss=t-1);return!0},u.calendarFormat=function(e,t){var a=e.diff(t,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"},u.prototype=Pi,u.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},u}()}).call(this,Lr(78)(e))},function(e,t){e.exports=WynBi.__libs.Common.Handlebars},function(e,t,a){"use strict";var n,i="object"==typeof Reflect?Reflect:null,c=i&&"function"==typeof i.apply?i.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}((e.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,a,n){var i,r,o,s;if(u(a),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),r=e._events),o=r[t]),void 0===o)o=r[t]=a,++e._eventsCount;else if("function"==typeof o?o=r[t]=n?[a,o]:[o,a]:n?o.unshift(a):o.push(a),0<(i=d(e))&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(e,t,a){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(n);return i.listener=a,n.wrapFn=i}function h(e,t,a){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?a?[i.listener||i]:[i]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(i):g(i,i.length)}function y(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function g(e,t){for(var a=new Array(t),n=0;n<t;++n)a[n]=e[n];return a}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var r;if(0<t.length&&(r=t[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)c(s,this,t);else{var l=s.length,u=g(s,l);for(a=0;a<l;++a)c(u[a],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var a,n,i,r,o;if(u(t),void 0===(n=this._events))return this;if(void 0===(a=n[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(i=-1,r=a.length-1;0<=r;r--)if(a[r]===t||a[r].listener===t){o=a[r].listener,i=r;break}if(i<0)return this;0===i?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,i),1===a.length&&(n[e]=a[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,a,n;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var i,r=Object.keys(a);for(n=0;n<r.length;++n)"removeListener"!==(i=r[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},o.prototype.listenerCount=y,o.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},function(n,e,t){var r=t(46),i=t(47);function o(e,t,a){return i()?n.exports=o=Reflect.construct:n.exports=o=function(e,t,a){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return a&&r(i,a.prototype),i},n.exports.__esModule=!0,n.exports.default=n.exports,o.apply(null,arguments)}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports},function(e,t){e.exports=WynBi.__libs.Common.HttpError},function(e,t){e.exports=WynBi.__libs.Common.ESPrima},function(e,t,a){"use strict";var d=a(81),p=a(84),h=[].slice,y=["keyword","gray","hex"],g={};Object.keys(p).forEach(function(e){g[h.call(p[e].labels).sort().join("")]=e});var m={};function f(e,t){if(!(this instanceof f))return new f(e,t);if(t&&t in y&&(t=null),t&&!(t in p))throw new Error("Unknown model: "+t);var a,n;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof f)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var i=d.get(e);if(null===i)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=p[this.model].channels,this.color=i.value.slice(0,n),this.valpha="number"==typeof i.value[n]?i.value[n]:1}else if(e.length){this.model=t||"rgb",n=p[this.model].channels;var r=h.call(e,0,n);this.color=v(r,n),this.valpha="number"==typeof e[n]?e[n]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var o=Object.keys(e);"alpha"in e&&(o.splice(o.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var s=o.sort().join("");if(!(s in g))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=g[s];var l=p[this.model].labels,u=[];for(a=0;a<l.length;a++)u.push(e[l[a]]);this.color=v(u)}if(m[this.model])for(n=p[this.model].channels,a=0;a<n;a++){var c=m[this.model][a];c&&(this.color[a]=c(this.color[a]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(a,n,i){return(a=Array.isArray(a)?a:[a]).forEach(function(e){(m[e]||(m[e]=[]))[n]=i}),a=a[0],function(e){var t;return arguments.length?(i&&(e=i(e)),(t=this[a]()).color[n]=e):(t=this[a]().color[n],i&&(t=i(t))),t}}function i(t){return function(e){return Math.max(0,Math.min(t,e))}}function v(e,t){for(var a=0;a<t;a++)"number"!=typeof e[a]&&(e[a]=0);return e}f.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in d.to?this:this.rgb(),a=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return d.to[t.model](a)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),a=1===t.valpha?t.color:t.color.concat(this.valpha);return d.to.rgb.percent(a)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=p[this.model].channels,a=p[this.model].labels,n=0;n<t;n++)e[a[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new f(this.color.map((a=e,function(e){return t=a,Number(e.toFixed(t));var t})).concat(this.valpha),this.model);var a},alpha:function(e){return arguments.length?new f(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:n("rgb",0,i(255)),green:n("rgb",1,i(255)),blue:n("rgb",2,i(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:n("hsl",1,i(100)),lightness:n("hsl",2,i(100)),saturationv:n("hsv",1,i(100)),value:n("hsv",2,i(100)),chroma:n("hcg",1,i(100)),gray:n("hcg",2,i(100)),white:n("hwb",1,i(100)),wblack:n("hwb",2,i(100)),cyan:n("cmyk",0,i(100)),magenta:n("cmyk",1,i(100)),yellow:n("cmyk",2,i(100)),black:n("cmyk",3,i(100)),x:n("xyz",0,i(100)),y:n("xyz",1,i(100)),z:n("xyz",2,i(100)),l:n("lab",0,i(100)),a:n("lab",1),b:n("lab",2),keyword:function(e){return arguments.length?new f(e):p[this.model].keyword(this.color)},hex:function(e){return arguments.length?new f(e):d.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],a=0;a<e.length;a++){var n=e[a]/255;t[a]=n<=.03928?n/12.92:Math.pow((.055+n)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),a=e.luminosity();return a<t?(t+.05)/(a+.05):(a+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return 7.1<=t?"AAA":4.5<=t?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return f.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),a=t.color[0];return a=(a=(a+e)%360)<0?360+a:a,t.color[0]=a,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var a=e.rgb(),n=this.rgb(),i=void 0===t?.5:t,r=2*i-1,o=a.alpha()-n.alpha(),s=(1+(r*o==-1?r:(r+o)/(1+r*o)))/2,l=1-s;return f.rgb(s*a.red()+l*n.red(),s*a.green()+l*n.green(),s*a.blue()+l*n.blue(),a.alpha()*i+n.alpha()*(1-i))}},Object.keys(p).forEach(function(a){if(-1===y.indexOf(a)){var n=p[a].channels;f.prototype[a]=function(){if(this.model===a)return new f(this);if(arguments.length)return new f(arguments,a);var e,t="number"==typeof arguments[n]?n:this.valpha;return new f((e=p[this.model][a].raw(this.color),(Array.isArray(e)?e:[e]).concat(t)),a)},f[a]=function(e){return"number"==typeof e&&(e=v(h.call(arguments),n)),new f(e,a)}}}),e.exports=f},function(e,t){e.exports=WynBi.__libs.Common.GCPerfectScrollbar},function(e,t){function l(e,t,a,n,i,r,o){try{var s=e[r](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,i)}e.exports=function(s){return function(){var e=this,o=arguments;return new Promise(function(t,a){var n=s.apply(e,o);function i(e){l(n,t,a,i,r,"next",e)}function r(e){l(n,t,a,i,r,"throw",e)}i(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(2),i=a.n(n),r=a(3),o=a.n(r),s=function(){function a(e){i()(this,a);var t=e.startsWith("?")?e.substring(1):e;this.query=this.parseQuery(t)}return o()(a,[{key:"parseQuery",value:function(e){return e?e.split("&").reduce(function(e,t){var a=t.split("=");return e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])||"",e},{}):{}}},{key:"getQuery",value:function(e){return e?this.query[e]||"":this.query}}]),a}()},function(e,t){e.exports=WynBi.__libs.Common.XRegExp},function(e,t,a){var n=a(42);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var n=a(44),i=a(43),r=a(32),o=a(45);e.exports=function(e){return n(e)||i(e)||r(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=WynBi.__libs.Common.GCQuill},function(e,t,a){function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r;window,e.exports=(r={},i.m=n=[function(e,t,a){"use strict";a.r(t),l=window,c=document,d={Time:"time",Day:"days",Month:"months",Quarter:"quarters",Year:"years"},v.version="0.4.14",v.status="beta",v.count=0,v.inst={},v.defaults={animate:!1,classNames:!1,closeButton:!0,dateFormat:"YYYY-mm-dd",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!1,stayOpen:!1,time12h:!1,timeFormat:"HH:ii:ss",timeHours:!0,timeMinutes:!0,timeSeconds:0,timeIncrement:!0,timeStepHours:1,timeStepMinutes:1,timeStepSeconds:1,today:!0,tooltips:[],viewDefault:"days",viewDecades:!0,viewYears:!0,viewQuarters:!0,viewMonths:!0,viewDays:!0,viewTime:!0,weekStart:0},v.strings={en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Su","Mo","Tu","We","Th","Fr","Sa"],time:["Hours","Minutes","Seconds"],quarters:["Q1","Q2","Q3","Q4"],current:["This Year","This Quarter","This Month","Today","Now"],weekStart:0,yearTitle:"YYYY",yearMonthTitle:"M YYYY"},modify:function(e,t,a){if(!(e in this))return!1;if(t instanceof Object)for(var n in t)this.modify(e,n,t[n]);else this[e][t]="string"==typeof a?a:this[e][t];return!0},register:function(e,t){return"string"==typeof e&&t instanceof Object&&(this[e]=t,!0)}},v.prototype={init:function(){this.abortController=new AbortController,this.prepare();var e=this.__.shortDays.slice(this.__.weekStart).concat(this.__.shortDays.slice(0,this.__.weekStart));this.weekdays="<thead>\n<tr>\n";for(var t=0;t<7;t++)this.weekdays+='<th class="calendar-week">'+e[t]+"</th>";this.weekdays+="\n</tr>\n</thead>",this.select=m(this.e.getAttribute("data-value")||this.e.value),(!this.select||this.select<this.con.dateStart||this.select>this.con.dateEnd)&&(this.select=null),null==this.view&&(this.view={type:this.con.viewDefault,date:this.select||new Date});for(var a=["Hours","Minutes","Seconds"],t=0;t<3;t++)if("number"==typeof this.con["time"+a[t]])this.view.date["set"+a[t]](this.con["time"+a[t]]);else for(;this.view.date["get"+a[t]]()%this.con["timeStep"+a[t]]!=0;)this.view.date["set"+a[t]](this.view.date["get"+a[t]]()+1);return this.ampm=!!this.con.time12h&&12<this.view.date.getHours(),this.events={},this.dt=this.renderCalendar(),this.con.startOpen&&this.open(),this.select&&this.selectDate(this.select),this.bind()},prepare:function(){if(this.__=h(v.strings.en,v.strings[this.con.locale]||{}),this.con.dateStart=m(this.con.dateStart,!0,!0)||-9999999999999,this.con.dateEnd=m(this.con.dateEnd,!0,!0)||9999999999999,this.con.viewDefault=this.con.mode!==d.Time?this.con.mode:d.Day,"string"==typeof this.con.weekStart&&(this.con.weekStart=v.strings.en.shortDays.indexOf(this.con.weekStart)),this.con.weekStart<0&&6<this.con.weekStart&&(this.con.weekStart=0),0<this.con.dateRanges.length){for(var e=[],t=(i=this.con.dateRanges).length,a=0;a<t;a++)i[a]instanceof Object&&(i[a].start||i[a].days)&&(!1===(i[a].start=m(i[a].start||!1,!0,!0))?i[a].start=i[a].end=1/0:(!1===(i[a].end=m(i[a].end||!1,!0,!0))&&(i[a].end=i[a].start),i[a].start=i[a].start>i[a].end?[i[a].end,i[a].end=i[a].start][0]:i[a].start),i[a].days=!("days"in i[a])||i[a].days,i[a].days="boolean"!=typeof i[a].days?function(e){for(var t=[],a=e.length,n=0;n<a;n++)"string"==typeof e[n]&&(e[n]=v.strings.en.shortDays.indexOf(e[n])),0<=e[n]&&e[n]<=6&&t.push(e[n]);return t}(i[a].days instanceof Array?i[a].days:[i[a].days]):[0,1,2,3,4,5,6],e.push({start:i[a].start,end:i[a].end,days:i[a].days}));this.con.dateRanges=e}if(0<this.con.tooltips.length){for(var n,i,e=[],r=this.con.tooltips,t=r.length,a=0;a<t;a++)r[a]instanceof Object&&r[a].date&&(r[a].date instanceof Array?(n=m(r[a].date[0]||!1,!0,!0),i=m(r[a].date[1]||!1,!0,!0)||n):n=i=m(r[a].date||!1,!0,!0),n&&e.push({date:n!==i?[n,i]:n,text:r[a].text||"Tooltip",color:r[a].color||"inherit",element:r[a].element||((o=c.createElement("DIV")).className="calendar-tooltip",o.innerHTML='<div class="tooltip-inner">'+r[a].text||!1,o)}));this.con.tooltips=e}var o;return this},bind:function(){var t=this,a=this;return void 0===this._bind&&(this.e.addEventListener("focusin",function(e){a.open.call(a)},{signal:this.abortController.signal}),this.e.addEventListener("keyup",function(e){a.callback.call(a,e)},{signal:this.abortController.signal}),c.addEventListener("keyup",function(e){a.dt.contains(e.target)&&a.callback.call(a,e)},{signal:this.abortController.signal}),a.dt.addEventListener("click",function(e){e.stopPropagation(),a.callback.call(a,e)},{signal:this.abortController.signal}),c.addEventListener("click",function(e){a.e.contains(e.target)||!p(a.dt,"calendar-open")||e.target==a.dt||e.target==a.e||a.con.stayOpen||a.close.call(a)},{signal:this.abortController.signal}),c.addEventListener("mouseover",function(e){a.dt.contains(e.target)&&a.callback.call(a,e)},{signal:this.abortController.signal}),this.dt.querySelectorAll("input[type=text]").forEach(function(e){e.addEventListener("blur",function(){e.value=e.value.padStart(2,"0")},{signal:t.abortController.signal})}),this._bind=!0),this},callback:function(e){var t=e.target,a="getAttribute",n="data-action",i=!t[a](n)&&t.parentElement[a](n)?t.parentElement:t,r="data-tooltip";if("mouseover"==e.type&&(!1!==(t=t[a](r)?t:!!i[a](r)&&i)?this.dt.querySelector("#tooltip-"+t[a](r)+"-"+t[a](r+"-time"))||this.showTooltip(t[a](r),t,t[a](r+"-time")):this.dt.querySelector(".calendar-tooltip:not(.remove)")&&this.hideTooltip(this.dt.querySelector(".calendar-tooltip").id.slice(8))),"click"==e.type){if(!i||1!=e.buttons&&1!=(e.which||e.button))return;if(i.hasAttribute("data-disabled"))return;switch(i[a](n)){case"prev":case"next":return this.browseView(i[a](n));case"cancel":this.con.stayOpen||this.close();break;case"submit":return this.con.stayOpen||this.close(),"now"===i[a]("data-date")?this.selectDate(new Date):this.selectDate(this.fetchDate(parseInt(i[a]("data-date")))),this.trigger("change");case"view":return this.switchDate(i[a]("data-year")||null,i[a]("data-month")||null,"auto"),this.switchView(i[a]("data-view"))}}if("keyup"==e.type){if("INPUT"!=e.target.tagName&&e.target!==this.e&&/calendar-(static|close)/i.test(this.dt.className))return!1;13==(e.keyCode||e.which)&&(this.selectDate(this.fetchDate(this.select)),this.trigger("change"),e.stopPropagation(),this.con.stayOpen||this.close()),27!=(e.keyCode||e.which)||this.con.stayOpen||this.close()}},trigger:function(e){var t={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==e&&(u(this.e,"input",t),u(this.e,"change",t)),u(this.dt,"tail::"+e,t);for(var a=(this.events[e]||[]).length,n=0;n<a;n++)this.events[e][n].cb.apply(this,function(e,t,a){for(var n=t.length,i=0;i<n;++i)e[i-1]=t[i];return e[i]=a,e}(new Array(arguments.length),arguments,this.events[e][n].args));return!0},calcPosition:function(){var e=d$.uiDelegatorManager.getViewPort(),t=this.dt.style,a=l.getComputedStyle(this.dt),n=parseInt(a.marginLeft)+parseInt(a.marginRight),i=parseInt(a.marginTop)+parseInt(a.marginBottom),r={top:this.e.getBoundingClientRect().top-e.top,left:this.e.getBoundingClientRect().left-e.left,width:this.e.offsetWidth||0,height:this.e.offsetHeight||0};switch(t.visibility="hidden",this.con.position){case"top":var o=r.top-(this.dt.offsetHeight+i),s=r.left;break;case"left":o=r.top+r.height/2-(this.dt.offsetHeight/2+i),s=r.left-(this.dt.offsetWidth+n);break;case"right":o=r.top+r.height/2-(this.dt.offsetHeight/2+i),s=r.left+r.width;break;default:o=r.top+r.height,s=r.left}return t.top=(0<=o?o:this.e.offsetTop)+"px",t.left=(0<=s?s:0)+"px",t.visibility="visible",this},convertDate:function(e,t){var a={H:String("00"+e.getHours()).toString().slice(-2),G:e.getHours()%12||12,A:12<=e.getHours()?"PM":"AM",a:12<=e.getHours()?"pm":"am",i:String("00"+e.getMinutes()).toString().slice(-2),s:String("00"+e.getSeconds()).toString().slice(-2),Y:e.getFullYear(),y:parseInt(e.getFullYear().toString().slice(2)),m:String("00"+(e.getMonth()+1)).toString().slice(-2),M:this.__.shortMonths[e.getMonth()],F:this.__.months[e.getMonth()],d:String("00"+e.getDate()).toString().slice(-2),D:this.__.days[e.getDay()],l:this.__.shortDays[e.getDay()].toLowerCase()};return t.replace(/([HGismd]{1,2}|[Y]{2,4}|y{2})/g,function(e){return 4==e.length||2==e.length?a[e.slice(-1)].toString().slice(-Math.abs(e.length)):1==e.length&&"0"==e[0]?a[e.slice(-1)].toString().slice(-1):a[e.slice(-1)].toString()}).replace(/(A|a|M|F|D|l)/g,function(e){return a[e]})},renderCalendar:function(){var e,t,a=["tail-datetime-calendar","calendar-close"],n=!0===this.con.classNames?this.e.className.split(" "):this.con.classNames,n=(["top","left","right","bottom"].indexOf(this.con.position)<0&&(e=c.querySelector(this.con.position),a.push("calendar-static")),(!0===this.con.rtl||0<=["ar","he","mdr","sam","syr"].indexOf(this.con.rtl))&&a.push("rtl"),this.con.stayOpen&&a.push("calendar-stay"),y("DIV",a=(n="function"==typeof n.split?n.split(" "):n)instanceof Array?a.concat(n):a)),a=(n.id="tail-datetime-"+this.id,n.innerHTML='<div class="calendar-actions"><span class="action action-prev" data-action="prev"></span><span class="label" data-action="view" data-view="up"></span><span class="action action-next" data-action="next"></span></div>',this.renderDatePicker(n,this.con.viewDefault),this.con.mode===d.Time&&this.renderTimePicker(n),this.con.closeButton&&!e&&((a=y("BUTTON","calendar-close")).addEventListener("click",function(e){e.preventDefault(),t.close()},{signal:(t=this).abortController.signal}),n.appendChild(a)),null!=(a=this.con.root)?a:c.body);return(e||a).appendChild(n),n},renderDatePicker:function(e,t){if(!(t=!t||["decades",d.Year,d.Quarter,d.Month,d.Day].indexOf(t)<0?this.con.viewDays?d.Day:this.con.viewMonths?d.Month:this.con.viewQuarters?d.Quarter:this.con.viewYears?d.Year:!!this.con.viewDecades&&"decades":t)||!this.con["view"+g(t)])return!1;var a=c.createElement("DIV");return a.className="calendar-datepicker calendar-view-"+t,a.innerHTML=this["view"+g(t)](),e.querySelector(".calendar-datepicker")?e.replaceChild(a,e.querySelector(".calendar-datepicker")):e.appendChild(a),this.view.type=t,this.handleLabel(e)},renderTimePicker:function(e){var t,a,n,i=[],r=0;for(a in this.con.time12h&&(o=12<this.view.date.getHours()?'checked="checked" ':"",i.push('<label class="timepicker-switch" data-am="AM" data-pm="PM"><input type="checkbox" value="1" data-input="PM" '+o+"/><span></span></label>")),{Hours:0,Minutes:0,Seconds:0})!1===this.con["time"+a]?i.push((r++,null)):((t=c.createElement("INPUT")).type="text",t.disabled=null===this.con["time"+a],t.setAttribute("min","Hours"===a&&this.con.time12h?"01":"00"),t.setAttribute("max","Hours"!==a?"60":this.con.time12h?"13":"24"),t.setAttribute("step",this.con["timeStep"+a]),t.setAttribute("value",(n=this.view.date["get"+a]())<10?"0"+n:n),t.setAttribute("pattern","d*"),t.setAttribute("inputmode","numeric"),t.setAttribute("data-input",a.toLowerCase()),t.setAttribute("readonly",!0),i.push('<div class="timepicker-field timepicker-'+a.toLowerCase()+'">'+t.outerHTML+'<button class="picker-step step-up"></button><button class="picker-step step-down"></button></div>'));i.push('<div class="current" data-action="submit" data-date="now">'.concat(this.__.current[4],"</div>"));var o=y("DIV","calendar-timepicker"),s=this;o.innerHTML=i.join("\n");for(var l=o.querySelectorAll("input"),r=0;r<l.length;r++)"checkbox"===l[r].type?l[r].addEventListener("change",function(e){s.handleTime.call(s,this)},{signal:this.abortController.signal}):(l[r].addEventListener("input",function(e){s.handleTime.call(s,this)},{signal:this.abortController.signal}),l[r].addEventListener("keydown",function(e){var t=event.keyCode||event.which||0;if(38===t||40===t)return e.preventDefault(),s.handleStep.call(s,this,38===t?"up":"down"),!1},{signal:this.abortController.signal}));for(l=o.querySelectorAll("button"),r=0;r<l.length;r++)l[r].addEventListener("mousedown",function(e){return e.preventDefault(),e=this.parentElement.querySelector("input"),s.handleStep.call(s,e,p(this,"step-up")?"up":"down"),!1},{signal:this.abortController.signal});var u=e.querySelector(".calendar-timepicker");return e[u?"replaceChild":"appendChild"](o,u),this.handleLabel(e)},handleTime:function(e){this.con.time12h&&"checkbox"===e.type&&(this.ampm=e.checked),e=[(e=e.parentElement.parentElement).querySelector("input[data-input=hours]")||{value:0},e.querySelector("input[data-input=minutes]")||{value:0},e.querySelector("input[data-input=seconds]")||{value:0}],this.selectTime(parseInt(e[0].value)+(this.ampm?12:0),parseInt(e[1].value),parseInt(e[2].value)),e[2].value=this.view.date.getSeconds(),e[1].value=this.view.date.getMinutes(),this.con.time12h?e[0].value=12<this.view.date.getHours()?this.view.date.getHours()-12:this.view.date.getHours():e[0].value=this.view.date.getHours(),this.trigger("change",!0)},handleStep:function(e,t,a){var n=null,i=parseInt(e.value),r=parseInt(e.getAttribute("min")),o=parseInt(e.getAttribute("max")),s=e.getAttribute("data-input"),l=parseInt(e.getAttribute("step"));return"up"===t?(n=o<=i+l||null,e.value=o<=i+l?13===o?1:0:i+l,this.ampm=!!this.con.time12h&&12<=this.view.date.getHours()+1):"down"===t&&(n=!(i-l<r)&&null,e.value=i-l<r?o-l:i-l,this.ampm=!!this.con.time12h&&this.view.date.getHours()-1<=0),e.value<10&&(e.value="0"+e.value),this.con.timeIncrement&&null!==n&&((t=e.parentElement.previousElementSibling)&&!1===t.disabled?this.handleStep(t.querySelector("input"),n?"up":"down",!0):"hours"==s&&this.view.date.setDate(this.view.date.getDate()+(n?1:-1))),(void 0===a||!0!==a)&&(r=e.parentElement.parentElement,this.selectTime(parseInt((r.querySelector("input[data-input=hours]")||{value:0}).value)+(this.ampm?12:0),parseInt((r.querySelector("input[data-input=minutes]")||{value:0}).value),parseInt((r.querySelector("input[data-input=seconds]")||{value:0}).value)),this.con.time12h&&(o=e.parentElement.parentElement.querySelector("input[type=checkbox]"))&&o.checked!==12<this.view.date.getHours()&&(o.checked=12<this.view.date.getHours()),this.trigger("change",!0),!0)},getQuarter:function(e){return e=e.getMonth(),Math.floor(e/3)+1},setQuarter:function(e,t,a){e.setMonth(3*t-3,a)},handleLabel:function(e){var t,a,n=e.querySelector(".label");switch(this.view.type){case d.Day:t=this.convertDate(this.view.date,this.__.yearMonthTitle);break;case d.Month:case d.Quarter:t=this.convertDate(this.view.date,this.__.yearTitle);break;case d.Year:t=(a=this.view.date.getFullYear()-f(this.view.date.getFullYear(),10))+" - "+(a+10);break;case"decades":t=(a=this.view.date.getFullYear()-f(this.view.date.getFullYear(),100))+" - "+(a+100);break;case d.Time:t=this.__.header[3]}return n.innerText=t,e},getNowString:function(){var e,t;switch(this.con.mode){case d.Day:e=7,t=3;break;case d.Month:e=4,t=2;break;case d.Quarter:e=4,t=1;break;case d.Year:e=4,t=0;break;default:t=e=null}if(null==e||null==t)return"";var a="current",n='data-action="submit" data-date="now"';return this.getDisabled(Date.now(),this.con.mode)&&(a+=" date-disabled",n+=' data-disabled="true"'),'<tr><td colspan="'.concat(e,'" class="').concat(a,'" ').concat(n,">").concat(this.__.current[t],"</td></tr>")},getDisabled:function(e,t){var a=!1,n=!1;if(this.con.dateStart){var i=new Date(this.con.dateStart);switch(i.setHours(0,0,0,0),t){case d.Month:i.setDate(1);break;case d.Quarter:this.setQuarter(i,this.getQuarter(i),1);break;case d.Year:i.setMonth(0,1);break;case"decades":var r=i.getFullYear();i.setFullYear(r-f(r,10),0,1)}a=e<i.getTime()}if(this.con.dateEnd){var o=new Date(this.con.dateEnd);switch(o.setHours(0,0,0,0),t){case d.Day:o.setDate(o.getDate()+1);break;case d.Month:o.setMonth(o.getMonth()+1,1);break;case d.Quarter:this.setQuarter(o,this.getQuarter(o)+1,1);break;case d.Year:o.setFullYear(o.getFullYear()+1,0,1);break;case"decades":var s=o.getFullYear();o.setFullYear(s-f(s,10)+10,0,1)}n=e>=o.getTime()}return a||n},viewDecades:function(){var e=this.view.date.getFullYear(),t=new Date(this.view.date.getTime()),a=this.con.today?(new Date).getYear():0;t.setFullYear(e-f(e,10)-30),t.setMonth(0,1),t.setHours(0,0,0,0);for(var n=[],i=[],r=1;r<=16;r++){var o="calendar-decade"+(a>=t.getYear()&&a<=t.getYear()+10?" date-today":""),s='data-action="view" data-view="down" data-year="'+t.getFullYear()+'"',l=t.getTime();this.getDisabled(l,"decades")&&(o+=" date-disabled",s+=' data-disabled="true"'),!this.select||(l=this.select.getYear())-f(l,10)===t.getYear()&&(o+=" date-select"),n.push('<td class="'+o+'" '+s+'><span class="inner">'+t.getFullYear()+" - "+(t.getFullYear()+10)+"</span></td>"),4<=r&&r%4==0&&(i.push("<tr>\n"+n.join("\n")+"\n</tr>"),n=[]),t.setFullYear(t.getFullYear()+10)}return i.push(this.getNowString()),'<table class="calendar-decades"><tbody>'+i.join("\n")+"</tbody></table>"},viewYears:function(){for(var e=this.view.date.getFullYear(),t=new Date(this.view.date.getTime()),a=this.con.today?(new Date).getYear():0,n=(t.setFullYear(e-f(e,10)-2),t.setMonth(0,1),t.setHours(0,0,0,0),this.con.mode===d.Year?"submit":"view"),i=[],r=[],o=1;o<=16;o++){var s="calendar-year"+(t.getYear()==a?" date-today":""),l='data-action="'.concat(n,'" data-view="down" data-year="').concat(t.getFullYear(),'" data-date="').concat(t.getTime(),'"'),u=t.getTime();this.getDisabled(u,d.Year)&&(s+=" date-disabled",l+=' data-disabled="true"'),this.select&&this.select.getFullYear()==t.getFullYear()&&(s+=" date-select"),i.push('<td class="'+s+'" '+l+'><span class="inner">'+t.getFullYear()+"</span></td>"),4<=o&&o%4==0&&(r.push("<tr>\n"+i.join("\n")+"\n</tr>"),i=[]),t.setFullYear(t.getFullYear()+1)}return r.push(this.getNowString()),'<table class="calendar-years"><tbody>'+r.join("\n")+"</tbody></table>"},viewQuarters:function(){var e=this.__.quarters,t=this.con.today?this.getQuarter(new Date):0,t=this.view.date.getYear()==(new Date).getYear()?t:0,a=[],n=new Date(this.view.date.getTime());n.setHours(0,0,0,0);for(var i=0;i<4;i++){this.setQuarter(n,i+1,1);var r="calendar-quarter ".concat(i+1===t?"date-today":""),o='data-action="submit" data-quarter="'.concat(i+1,'" data-date="').concat(n.getTime(),'"'),s=n.getTime();this.getDisabled(s,d.Quarter)&&(r+=" date-disabled",o+=' data-disabled="true"'),this.select&&this.select.getFullYear()===n.getFullYear()&&this.getQuarter(this.select)==i+1&&(r+=" date-select"),a.push('<td class="'.concat(r,'" ').concat(o,"><span>").concat(e[i],"</span></td>"))}return a.push(this.getNowString()),'<table class="calendar-quarters"><tbody><tr>'+a.join("\n")+"</tr></tbody></table>"},viewMonths:function(){for(var e=this.__.shortMonths,t=this.con.today?(new Date).getMonth():-1,t=this.view.date.getYear()==(new Date).getYear()?t:-1,a=new Date(this.view.date.getTime()),n=(a.setDate(1),a.setHours(0,0,0,0),this.con.mode===d.Month?"submit":"view"),i=[],r=[],o=0;o<12;o++){a.setMonth(o);var s="calendar-month"+(t==o?" date-today":""),l='data-action="'.concat(n,'" data-view="down" data-month="').concat(o,'" data-date="').concat(a.getTime(),'"'),u=a.getTime();this.getDisabled(u,d.Month)&&(s+=" date-disabled",l+=' data-disabled="true"'),this.select&&this.select.getFullYear()===a.getFullYear()&&this.select.getMonth()===o&&(s+=" date-select"),i.push('<td class="'+s+'" '+l+'><span class="inner">'+e[o]+"</span></td>"),4==i.length&&(r.push("<tr>\n"+i.join("\n")+"\n</tr>"),i=[])}return r.push(this.getNowString()),'<table class="calendar-months"><tbody>'+r.join("\n")+"</tbody></table>"},viewDays:function(){var a,e,t,n,i=new Date(this.view.date.getTime()),r=(new Date).toDateString(),o=i.getMonth(),s=[],l=[],u=([].concat(this.con.tooltips),[0,0]),c=(i.setHours(0,0,0,0),i.setDate(1),1-(i.getDay()-this.__.weekStart));for(i.setDate(1<c?c-7:c);l.length<6;)a=i.getTime(),[].concat(this.con.dateRanges),t='data-action="submit" data-date="'+i.getTime()+'"',e="calendar-day date-"+(i.getMonth()>o?"next":i.getMonth()<o?"previous":"current"),this.con.today&&r==i.toDateString()&&(e+=" date-today"),0<this.con.tooltips.length&&this.con.tooltips.filter(function(e,t){e.date instanceof Array?e.date[0]<=a&&e.date[1]>=a&&(u=[e.date[1],t,e.color]):e.date==a&&(u=[e.date,t,e.color])},this),u[0]<a&&(u=[0,0]),this.getDisabled(a,d.Day)&&(e+=" date-disabled",t+=' data-disabled="true"'),this.select&&this.select.toDateString()==i.toDateString()&&(e+=" date-select"),n='<span class="inner">'+i.getDate()+"</span>",0<u[0]&&(e+=" date-tooltip",t+=' data-tooltip="'+u[1]+'" data-tooltip-time="'+a+'"',"inherit"!==u[2]?n+='<span class="tooltip-tick" style="background:'+u[2]+';"></span>':n+='<span class="tooltip-tick"></span>'),s.push('<td class="'+e+'" '+t+">"+n+"</td>"),7==s.length&&(l.push("<tr>\n"+s.join("\n")+"\n</tr>"),s=[]),i.setDate(i.getDate()+1);return l.push(this.getNowString()),l="<tbody>"+l.join("\n")+"</tbody>",'<table class="calendar-days">'+this.weekdays+l+"</table>"},showTooltip:function(e,t,a){var n=this.con.tooltips[e].element,i=n.style,r=this.dt.querySelector(".calendar-datepicker");i.cssText="opacity:0;visibility:hidden;",n.id="tooltip-"+e+"-"+a,r.appendChild(n),e=n.offsetWidth,n.offsetHeight,i.top=t.offsetTop+t.offsetHeight+"px",i.left=t.offsetLeft+t.offsetWidth/2-e/2+"px",i.visibility="visible",this.con.animate?(n.setAttribute("data-top",parseInt(i.top)),i.top=parseInt(i.top)+5+"px",function e(){parseFloat(i.top)>n.getAttribute("data-top")&&(i.top=parseFloat(i.top)-.5+"px"),(i.opacity=parseFloat(i.opacity)+.125)<1&&setTimeout(e,20)}()):i.opacity=1},hideTooltip:function(e){var t=this.dt.querySelector("#tooltip-"+e),a=t.style;this.con.animate?(t.className+=" remove",function e(){return parseFloat(a.top)<parseInt(t.getAttribute("data-top"))+5&&(a.top=parseFloat(a.top)+.5+"px"),(a.opacity-=.125)<0?(t.className="calendar-tooltip",t.parentElement.removeChild(t)):void setTimeout(e,20)}()):t.parentElement.removeChild(t)},switchView:function(e){var t=[null,d.Day,d.Month,d.Year,"decades",null];return-1==(t=this.con.mode===d.Quarter?[null,d.Quarter,d.Year,"decades",null]:t).indexOf(e)&&("up"==e?e=t[(t.indexOf(this.view.type)||5)+1]||null:"down"==e&&(e=t[(t.indexOf(this.view.type)||1)-1]||null),e&&this.con["view"+g(e)]||(e=!1)),!!e&&(this.renderDatePicker(this.dt,e),this.con.mode===d.Time&&this.renderTimePicker(this.dt),this.trigger("view",e))},switchDate:function(e,t,a,n){return"auto"===a&&(a=this.view.date.getDate(),(1===this.view.date.getMonth()&&28<a||30<a)&&(a=(a=new Date(e,+t+1,0)).getDate())),this.view.date.setFullYear(null==e?this.view.date.getFullYear():e,null==t?this.view.date.getMonth():t,a||this.view.date.getDate()),!0===n||this.switchView(this.view.type)},switchMonth:function(e,t){return"string"==typeof e&&(e=0<=["previous","prev"].indexOf(e)?-1:1,e=this.view.date.getMonth()+type),this.switchDate(t||this.getFullYear(),e)},switchYear:function(e){return"string"==typeof e&&(e=0<=["previous","prev"].indexOf(e)?-1:1,e=this.view.date.getFullYear()+type),this.switchDate(e)},browseView:function(e){switch(e=0<=["previous","prev"].indexOf(e)?-1:1,this.view.type){case d.Day:return this.switchDate(null,this.view.date.getMonth()+e,"auto");case d.Month:case d.Quarter:return this.switchDate(this.view.date.getFullYear()+e,null,"auto");case d.Year:return this.switchDate(this.view.date.getFullYear()+10*e,null,"auto");case"decades":return this.switchDate(this.view.date.getFullYear()+100*e,null,"auto")}return!1},fetchDate:function(e){e=m(e||!1)||this.view.date;var t=this.dt.querySelectorAll("input[type=number]"),a=this.dt.querySelectorAll("input[type=text]");return t&&3==t.length?e.setHours(t[0].value||0,t[1].value||0,t[2].value||0,0):a&&3==a.length&&e.setHours(+a[0].value||0,+a[1].value||0,+a[2].value||0,0),e},selectDate:function(e,t,a,n,i,r){var o=new Date,s=[];s.push(v.defaults.dateFormat),this.con.mode===d.Time&&s.push(v.defaults.timeFormat),this.select=null===e?null:e instanceof Date?e:new Date(e||(null==e?this.view.date:o).getFullYear(),t||(null==t?this.view.date:o).getMonth(),a||(null==a?this.view.date:o).getDate(),n||(null==n?this.view.date.getHours():0),i||(null==i?this.view.date.getMinutes():0),r||(null==r?this.view.date.getSeconds():0)),this.view.date=new Date(null!=(s=this.select)?s:(new Date).setHours(0,0,0,0)),this.e.setAttribute("data-value",null==(e=this.select)?void 0:e.getTime()),this.switchView(this.con.mode)},selectTime:function(e,t,a){return this.selectDate(void 0,void 0,void 0,e,t,a)},open:function(){if(!p(this.dt,"calendar-close"))return this;var t=this,a=this.dt.style;return a.display="block",a.opacity=this.con.animate?0:1,s(this.dt,"calendar-close"),o(this.dt,"calendar-idle"),p(this.dt,"calendar-static")||t.calcPosition(),function e(){return 1<=(a.opacity=parseFloat(a.opacity)+.125)?(s(t.dt,"calendar-idle"),o(t.dt,"calendar-open"),t.trigger("open")):void setTimeout(e,20)}(),this},close:function(){if(!p(this.dt,"calendar-open"))return this;var t=this,a=this.dt.style;return a.display="block",a.opacity=this.con.animate?1:0,s(this.dt,"calendar-open"),o(this.dt,"calendar-idle"),function e(){return(a.opacity-=.125)<=0?(s(t.dt,"calendar-idle"),o(t.dt,"calendar-close"),a.display="none",t.trigger("close")):void setTimeout(e,20)}(),this.switchView(this.con.mode),this},toggle:function(){return p(this.dt,"calendar-open")?this.close():p(this.dt,"calendar-close")?this.open():this},on:function(e,t,a){return!(["open","close","change","view"].indexOf(e)<0||"function"!=typeof t)&&(e in this.events||(this.events[e]=[]),this.events[e].push({cb:t,args:a instanceof Array?a:[]}),this)},remove:function(){return this.abortController.abort(),this.e.removeAttribute("data-tail-datetime"),this.e.removeAttribute("data-value"),this.dt.parentElement.removeChild(this.dt),this._bind=void 0,this},reload:function(){return this.remove(),this.init()},config:function(e,t,a){if(e instanceof Object){for(var n in e)this.config(n,e[n],!1);return this.reload(),this.con}return void 0===e?this.con:e in this.con&&(void 0===t?this.con[e]:(this.con[e]=t,!1!==a&&this.reload(),this))}};var l,c,d,n,i,r=v;function p(e,t){return e&&"classList"in e&&e.classList.contains(t)}function o(e,t){e&&"classList"in e&&e.classList.add(t)}function s(e,t){e&&"classList"in e&&e.classList.remove(t)}function u(e,t,a){var n;CustomEvent&&CustomEvent.name?n=new CustomEvent(t,a):(n=c.createEvent("CustomEvent")).initCustomEvent(t,!!a.bubbles,!!a.cancelable,a.detail),e.dispatchEvent(n)}function h(e,t){if("function"==typeof Object.assign)return Object.assign({},e,t||{});var a,n=Object.constructor();for(a in e)n[a]=(a in t?t:e)[a];return n}function y(e,t){return(e=c.createElement(e)).className=t&&t.join?t.join(" "):t||"",e}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m(e,t,a){return(e=e instanceof Date?e:!!e&&new Date(e))instanceof Date&&!isNaN(e.getDate())&&(a&&e.setHours(0,0,0,0),!0===t?e.getTime():e)}function f(e,t){return(e%t+t)%t}function v(e,t){if((e="string"==typeof e?c.querySelectorAll(e):e)instanceof NodeList||e instanceof HTMLCollection||e instanceof Array){for(var a=[],n=e.length,i=0;i<n;i++)a.push(new v(e[i],t));return 1===a.length?a[0]:0!==a.length&&a}return e instanceof Element&&(this instanceof v?v.inst[e.getAttribute("data-tail-datetime")]?v.inst[e.getAttribute("data-tail-datetime")]:(e.getAttribute("data-datetime")&&(r=JSON.parse(e.getAttribute("data-datetime").replace(/\'/g,'"')))instanceof Object&&(t=h(t,r)),this.e=e,this.id=++v.count,this.con=h(v.defaults,t),(v.inst["tail-"+this.id]=this).e.setAttribute("data-tail-datetime","tail-"+this.id),this.init()):new v(e,t));var r}function b(e,t,a){return e.bottom-t>a.height+(3<arguments.length&&void 0!==arguments[3]?arguments[3]:0)}function C(e,t,a){return t-e.top>a.height+(3<arguments.length&&void 0!==arguments[3]?arguments[3]:0)}function T(e,t,a){return e.right-t>a.width+(3<arguments.length&&void 0!==arguments[3]?arguments[3]:0)}function S(e,t,a){return t-e.left>a.width+(3<arguments.length&&void 0!==arguments[3]?arguments[3]:0)}function D(e,t,a){var n=t.popInside?a:1,t=t.gapInside?a:1;return{width:n*((null==e?void 0:e.width)||0),height:n*((null==e?void 0:e.height)||0),gap:t*((null==e?void 0:e.gap)||0)}}(i=n=n||{}).Date="date",i.Year="year",i.YearQuarter="quarter",i.YearMonth="month",i.DateTime="second";var k=function(e,t,a){var n,i,r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"start";if(b(e,t.bottom,a,a.gap))return n=t.bottom+a.gap,i=function(){if(T(e,t.left,a))return{top:n,left:t.left}},r=function(){if(S(e,t.right,a))return{top:n,left:t.right-a.width}},"start"===o?null!=(o=i())?o:r():null!=(o=r())?o:i()},w=function(e,t,a){var n,i,r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"start";if(C(e,t.top,a,a.gap))return n=t.top-a.height-a.gap,i=function(){if(T(e,t.left,a))return{top:n,left:t.left}},r=function(){if(S(e,t.right,a))return{top:n,left:t.right-a.width}},"start"===o?null!=(o=i())?o:r():null!=(o=r())?o:i()},x=function(e,t,a){var n,i,r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"start";if(T(e,t.right,a,a.gap))return n=t.right+a.gap,i=function(){if(b(e,t.top,a))return{top:t.top,left:n}},r=function(){if(C(e,t.bottom,a))return{top:t.bottom-a.height,left:n}},"start"===o?null!=(o=i())?o:r():null!=(o=r())?o:i()},A=function(e,t,a){var n,i,r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"start";if(S(e,t.left,a,a.gap))return n=t.left-a.width-a.gap,i=function(){if(b(e,t.top,a))return{top:t.top,left:n}},r=function(){if(C(e,t.bottom,a))return{top:t.bottom-a.height,left:n}},"start"===o?null!=(o=i())?o:r():null!=(o=r())?o:i()};function I(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var P=function(){function i(e){var t,a=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.opened=!1,this.show=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];a.backdrop&&a.backdrop.classList.add("show"),a.showPopup(e,t),a.opened=!0},this.close=function(){a.opened&&(a.popup.classList.remove("show"),a.backdrop&&a.backdrop.classList.remove("show"),a.opened=!1)},this.popupHost=e.popupHost||document.body,this.popupContainer=e.popupContainer||document.body,this.width=e.width,this.onSelectCallback=e.onSelect,this.backdrop=document.createElement("div"),this.backdrop.className="gces-date-picker-backdrop gces-date-picker-backdrop-upper",this.backdrop.addEventListener("click",this.close),this.popupHost.appendChild(this.backdrop);var n=document.createElement("div");n.className="gces-date-picker-popup-container ".concat(null!=(t=e.customCSS)?t:""),this.popup=n,this.backdrop.appendChild(this.popup),e.content&&this.setContent(e.content)}var e;return I((e=i).prototype,[{key:"showPopup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=this.width||e.width;this.popup.classList.add("show"),this.popup.style.width=t?"auto":"".concat(a,"px"),t={width:t?null:a,height:this.popup.getBoundingClientRect().height,gap:3},a=function(e,t,a,n){for(var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,r=t.getBoundingClientRect(),o=0,s=a.length;o<s;o++){var l,u=D((l=a[o]).size,n,i);if(null!=(l=function(i,r){return function(e,t,a){var n;switch(i){case"bottom":n=k(e,t,a,r);break;case"top":n=w(e,t,a,r);break;case"right":n=x(e,t,a,r);break;case"left":n=A(e,t,a,r)}if(null!=n)return Object.assign({type:i},n)}}(l.type,l.preferAlign)(r,e,u)))return l}t=D(n.defaultPopoverSize,n,i);var c=e.top;c+t.height+t.gap>r.bottom?(c=r.bottom-t.height-t.gap)<0&&(c=0):c-=n.defaultPopoverSize.top||0,t=e.right-t.width-t.gap;return{type:"default",top:c,left:t=t<r.left?r.left:t}}(e,this.popupContainer,[{type:"bottom",size:t},{type:"top",size:t},{type:"left",size:t},{type:"right",size:t}],{defaultPopoverSize:t}),this.popup.style.top="".concat(a.top,"px"),this.popup.style.left="".concat(a.left,"px")}},{key:"setContent",value:function(e){this.popup.innerHTML="",this.popup.appendChild(e)}},{key:"isOpened",value:function(){return this.opened}},{key:"destroy",value:function(){this.popupHost.removeChild(this.backdrop),this.backdrop.removeEventListener("click",this.close)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}function R(e){var t;return L(t={},n.Date,"days"),L(t,n.DateTime,"time"),L(t,n.Year,"years"),L(t,n.YearMonth,"months"),L(t,n.YearQuarter,"quarters"),t[e]}var V=function(){function n(e){var t,i=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.init=function(){i.addEvent(),i.selectDate(i.value)},this.setClearBtnVisibility=function(){i.allowClear&&null!=i.value?i.clearBtn.classList.remove("gces-date-picker-hidden"):i.clearBtn.classList.add("gces-date-picker-hidden")},this.selectDate=function(e){i.value=e,i.setClearBtnVisibility(),i.input.value=i.formatValue(e),i.dateTimePicker.selectDate(null==e?null:new Date(e))},this.addEvent=function(){i.dateTimePicker.on("change",function(e){var t=i.dateTimePicker.fetchDate().getTime();i.onChange(t),i.input.value=i.formatValue(t),e||i.popup.close()}),i.dateTimePicker.on("view",function(){i.popup.isOpened()&&i.popup.show(i.wrapper.getBoundingClientRect())}),i.input.addEventListener("focus",i.inputFocus)},this.inputFocus=function(){i.popup.show(i.wrapper.getBoundingClientRect())},this.formatValue=function(e){if(i.configFormatValue)return i.configFormatValue(e);var t=new Date(e),a="en"===i.locale?"en":"zh",n=t.toLocaleDateString(a),t=t.toLocaleTimeString(a,{hour12:!1});return null!==e?"".concat(n," ").concat(t):""},this.onClear=function(){i.onChange(null)};var a=e.locale,a=(this.locale=a||"en",this.configFormatValue=e.formatValue,this.onChange=e.onChange,this.container=e.container,this.allowClear=e.allowClear,this.wrapper=document.createElement("div"),this.wrapper.className="gces-date-picker ".concat(e.customCSS),this.container.appendChild(this.wrapper),this.input=document.createElement("input"),this.input.className="gces-date-picker-input ".concat(e.allowClear?"allow-clear":""),this.input.readOnly=!0,this.input.placeholder=e.placeholder||"",this.formatValue(e.value)),a=(this.input.value=a,this.value=e.value,this.wrapper.appendChild(this.input),Date.now());this.popup=new P({customCSS:"gces-calendar-container-".concat(a," ").concat(null!=(t=e.popupCustomCss)?t:""),popupHost:e.popupHost||document.body,popupContainer:e.popupContainer||document.body}),this.dateTimePicker=new r(this.input,{position:".gces-calendar-container-".concat(a),stayOpen:!0,closeButton:!1,locale:"custom",mode:R(e.dateMode),dateStart:e.minValue,dateEnd:e.maxValue}),this.clearBtn=document.createElement("button"),this.clearBtn.className="mdi mdi-close",this.clearBtn.addEventListener("click",this.onClear),this.wrapper.appendChild(this.clearBtn),this.setClearBtnVisibility(),this.init()}var e,t;return t=[{key:"registerLocale",value:function(e){r.strings.register("custom",e)}}],M((e=n).prototype,[{key:"show",value:function(){this.wrapper.classList.remove("gces-date-picker-hidden")}},{key:"hide",value:function(){this.wrapper.classList.add("gces-date-picker-hidden")}},{key:"setState",value:function(e){var n=this;Object.entries(e).forEach(function(e){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),t=e[0],a=e[1];switch(t){case"value":n.selectDate(a);break;case"minValue":n.dateTimePicker.config("dateStart",a),n.init();break;case"maxValue":n.dateTimePicker.config("dateEnd",a),n.init();break;case"dateMode":n.dateTimePicker.config("mode",R(a)),n.init();break;case"formatValue":n.configFormatValue=a,n.input.value=n.formatValue(n.value);break;case"placeholder":n.input.placeholder=a;break;case"allowClear":n.allowClear=a,n.setClearBtnVisibility()}})}},{key:"destroy",value:function(){this.input.removeEventListener("focus",this.inputFocus),this.popup.destroy(),this.wrapper.removeChild(this.input),this.clearBtn&&(this.wrapper.removeChild(this.clearBtn),this.clearBtn.removeEventListener("click",this.onClear)),this.container.removeChild(this.wrapper)}}]),M(e,t),Object.defineProperty(e,"prototype",{writable:!1}),n}();a.d(t,"default",function(){return V}),a.d(t,"DatePicker",function(){return V}),a.d(t,"DateMode",function(){return n})}],i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0))},function(e,t){e.exports={type:"Hierarchy",id:"online-china-map",content:{title:"",nodeId:1e5,geoJsonId:1e5,children:[{title:"",nodeId:11e4,geoJsonId:11e4,children:[],connectionValue:11e4},{title:"",nodeId:12e4,geoJsonId:12e4,children:[],connectionValue:12e4},{title:"",nodeId:13e4,geoJsonId:13e4,children:[{title:"",nodeId:130100,geoJsonId:130100,children:[],connectionValue:130100},{title:"",nodeId:130200,geoJsonId:130200,children:[],connectionValue:130200},{title:"",nodeId:130300,geoJsonId:130300,children:[],connectionValue:130300},{title:"",nodeId:130400,geoJsonId:130400,children:[],connectionValue:130400},{title:"",nodeId:130500,geoJsonId:130500,children:[],connectionValue:130500},{title:"",nodeId:130600,geoJsonId:130600,children:[],connectionValue:130600},{title:"",nodeId:130700,geoJsonId:130700,children:[],connectionValue:130700},{title:"",nodeId:130800,geoJsonId:130800,children:[],connectionValue:130800},{title:"",nodeId:130900,geoJsonId:130900,children:[],connectionValue:130900},{title:"",nodeId:131e3,geoJsonId:131e3,children:[],connectionValue:131e3},{title:"",nodeId:131100,geoJsonId:131100,children:[],connectionValue:131100}],connectionValue:13e4,connectionKey:"adcode"},{title:"",nodeId:14e4,geoJsonId:14e4,children:[{title:"",nodeId:140100,geoJsonId:140100,children:[],connectionValue:140100},{title:"",nodeId:140200,geoJsonId:140200,children:[],connectionValue:140200},{title:"",nodeId:140300,geoJsonId:140300,children:[],connectionValue:140300},{title:"",nodeId:140400,geoJsonId:140400,children:[],connectionValue:140400},{title:"",nodeId:140500,geoJsonId:140500,children:[],connectionValue:140500},{title:"",nodeId:140600,geoJsonId:140600,children:[],connectionValue:140600},{title:"",nodeId:140700,geoJsonId:140700,children:[],connectionValue:140700},{title:"",nodeId:140800,geoJsonId:140800,children:[],connectionValue:140800},{title:"",nodeId:140900,geoJsonId:140900,children:[],connectionValue:140900},{title:"",nodeId:141e3,geoJsonId:141e3,children:[],connectionValue:141e3},{title:"",nodeId:141100,geoJsonId:141100,children:[],connectionValue:141100}],connectionValue:14e4,connectionKey:"adcode"},{title:"",nodeId:15e4,geoJsonId:15e4,children:[{title:"",nodeId:150100,geoJsonId:150100,children:[],connectionValue:150100},{title:"",nodeId:150200,geoJsonId:150200,children:[],connectionValue:150200},{title:"",nodeId:150300,geoJsonId:150300,children:[],connectionValue:150300},{title:"",nodeId:150400,geoJsonId:150400,children:[],connectionValue:150400},{title:"",nodeId:150500,geoJsonId:150500,children:[],connectionValue:150500},{title:"",nodeId:150600,geoJsonId:150600,children:[],connectionValue:150600},{title:"",nodeId:150700,geoJsonId:150700,children:[],connectionValue:150700},{title:"",nodeId:150800,geoJsonId:150800,children:[],connectionValue:150800},{title:"",nodeId:150900,geoJsonId:150900,children:[],connectionValue:150900},{title:"",nodeId:152200,geoJsonId:152200,children:[],connectionValue:152200},{title:"",nodeId:152500,geoJsonId:152500,children:[],connectionValue:152500},{title:"",nodeId:152900,geoJsonId:152900,children:[],connectionValue:152900}],connectionValue:15e4,connectionKey:"adcode"},{title:"",nodeId:21e4,geoJsonId:21e4,children:[{title:"",nodeId:210100,geoJsonId:210100,children:[],connectionValue:210100},{title:"",nodeId:210200,geoJsonId:210200,children:[],connectionValue:210200},{title:"",nodeId:210300,geoJsonId:210300,children:[],connectionValue:210300},{title:"",nodeId:210400,geoJsonId:210400,children:[],connectionValue:210400},{title:"",nodeId:210500,geoJsonId:210500,children:[],connectionValue:210500},{title:"",nodeId:210600,geoJsonId:210600,children:[],connectionValue:210600},{title:"",nodeId:210700,geoJsonId:210700,children:[],connectionValue:210700},{title:"",nodeId:210800,geoJsonId:210800,children:[],connectionValue:210800},{title:"",nodeId:210900,geoJsonId:210900,children:[],connectionValue:210900},{title:"",nodeId:211e3,geoJsonId:211e3,children:[],connectionValue:211e3},{title:"",nodeId:211100,geoJsonId:211100,children:[],connectionValue:211100},{title:"",nodeId:211200,geoJsonId:211200,children:[],connectionValue:211200},{title:"",nodeId:211300,geoJsonId:211300,children:[],connectionValue:211300},{title:"",nodeId:211400,geoJsonId:211400,children:[],connectionValue:211400}],connectionValue:21e4,connectionKey:"adcode"},{title:"",nodeId:22e4,geoJsonId:22e4,children:[{title:"",nodeId:220100,geoJsonId:220100,children:[],connectionValue:220100},{title:"",nodeId:220200,geoJsonId:220200,children:[],connectionValue:220200},{title:"",nodeId:220300,geoJsonId:220300,children:[],connectionValue:220300},{title:"",nodeId:220400,geoJsonId:220400,children:[],connectionValue:220400},{title:"",nodeId:220500,geoJsonId:220500,children:[],connectionValue:220500},{title:"",nodeId:220600,geoJsonId:220600,children:[],connectionValue:220600},{title:"",nodeId:220700,geoJsonId:220700,children:[],connectionValue:220700},{title:"",nodeId:220800,geoJsonId:220800,children:[],connectionValue:220800},{title:"",nodeId:222400,geoJsonId:222400,children:[],connectionValue:222400}],connectionValue:22e4,connectionKey:"adcode"},{title:"",nodeId:23e4,geoJsonId:23e4,children:[{title:"",nodeId:230100,geoJsonId:230100,children:[],connectionValue:230100},{title:"",nodeId:230200,geoJsonId:230200,children:[],connectionValue:230200},{title:"",nodeId:230300,geoJsonId:230300,children:[],connectionValue:230300},{title:"",nodeId:230400,geoJsonId:230400,children:[],connectionValue:230400},{title:"",nodeId:230500,geoJsonId:230500,children:[],connectionValue:230500},{title:"",nodeId:230600,geoJsonId:230600,children:[],connectionValue:230600},{title:"",nodeId:230700,geoJsonId:230700,children:[],connectionValue:230700},{title:"",nodeId:230800,geoJsonId:230800,children:[],connectionValue:230800},{title:"",nodeId:230900,geoJsonId:230900,children:[],connectionValue:230900},{title:"",nodeId:231e3,geoJsonId:231e3,children:[],connectionValue:231e3},{title:"",nodeId:231100,geoJsonId:231100,children:[],connectionValue:231100},{title:"",nodeId:231200,geoJsonId:231200,children:[],connectionValue:231200},{title:"",nodeId:232700,geoJsonId:232700,children:[],connectionValue:232700}],connectionValue:23e4,connectionKey:"adcode"},{title:"",nodeId:31e4,geoJsonId:31e4,children:[],connectionValue:31e4},{title:"",nodeId:32e4,geoJsonId:32e4,children:[{title:"",nodeId:320100,geoJsonId:320100,children:[],connectionValue:320100},{title:"",nodeId:320200,geoJsonId:320200,children:[],connectionValue:320200},{title:"",nodeId:320300,geoJsonId:320300,children:[],connectionValue:320300},{title:"",nodeId:320400,geoJsonId:320400,children:[],connectionValue:320400},{title:"",nodeId:320500,geoJsonId:320500,children:[],connectionValue:320500},{title:"",nodeId:320600,geoJsonId:320600,children:[],connectionValue:320600},{title:"",nodeId:320700,geoJsonId:320700,children:[],connectionValue:320700},{title:"",nodeId:320800,geoJsonId:320800,children:[],connectionValue:320800},{title:"",nodeId:320900,geoJsonId:320900,children:[],connectionValue:320900},{title:"",nodeId:321e3,geoJsonId:321e3,children:[],connectionValue:321e3},{title:"",nodeId:321100,geoJsonId:321100,children:[],connectionValue:321100},{title:"",nodeId:321200,geoJsonId:321200,children:[],connectionValue:321200},{title:"",nodeId:321300,geoJsonId:321300,children:[],connectionValue:321300}],connectionValue:32e4,connectionKey:"adcode"},{title:"",nodeId:33e4,geoJsonId:33e4,children:[{title:"",nodeId:330100,geoJsonId:330100,children:[],connectionValue:330100},{title:"",nodeId:330200,geoJsonId:330200,children:[],connectionValue:330200},{title:"",nodeId:330300,geoJsonId:330300,children:[],connectionValue:330300},{title:"",nodeId:330400,geoJsonId:330400,children:[],connectionValue:330400},{title:"",nodeId:330500,geoJsonId:330500,children:[],connectionValue:330500},{title:"",nodeId:330600,geoJsonId:330600,children:[],connectionValue:330600},{title:"",nodeId:330700,geoJsonId:330700,children:[],connectionValue:330700},{title:"",nodeId:330800,geoJsonId:330800,children:[],connectionValue:330800},{title:"",nodeId:330900,geoJsonId:330900,children:[],connectionValue:330900},{title:"",nodeId:331e3,geoJsonId:331e3,children:[],connectionValue:331e3},{title:"",nodeId:331100,geoJsonId:331100,children:[],connectionValue:331100}],connectionValue:33e4,connectionKey:"adcode"},{title:"",nodeId:34e4,geoJsonId:34e4,children:[{title:"",nodeId:340100,geoJsonId:340100,children:[],connectionValue:340100},{title:"",nodeId:340200,geoJsonId:340200,children:[],connectionValue:340200},{title:"",nodeId:340300,geoJsonId:340300,children:[],connectionValue:340300},{title:"",nodeId:340400,geoJsonId:340400,children:[],connectionValue:340400},{title:"",nodeId:340500,geoJsonId:340500,children:[],connectionValue:340500},{title:"",nodeId:340600,geoJsonId:340600,children:[],connectionValue:340600},{title:"",nodeId:340700,geoJsonId:340700,children:[],connectionValue:340700},{title:"",nodeId:340800,geoJsonId:340800,children:[],connectionValue:340800},{title:"",nodeId:341e3,geoJsonId:341e3,children:[],connectionValue:341e3},{title:"",nodeId:341100,geoJsonId:341100,children:[],connectionValue:341100},{title:"",nodeId:341200,geoJsonId:341200,children:[],connectionValue:341200},{title:"",nodeId:341300,geoJsonId:341300,children:[],connectionValue:341300},{title:"",nodeId:341500,geoJsonId:341500,children:[],connectionValue:341500},{title:"",nodeId:341600,geoJsonId:341600,children:[],connectionValue:341600},{title:"",nodeId:341700,geoJsonId:341700,children:[],connectionValue:341700},{title:"",nodeId:341800,geoJsonId:341800,children:[],connectionValue:341800}],connectionValue:34e4,connectionKey:"adcode"},{title:"",nodeId:35e4,geoJsonId:35e4,children:[{title:"",nodeId:350100,geoJsonId:350100,children:[],connectionValue:350100},{title:"",nodeId:350200,geoJsonId:350200,children:[],connectionValue:350200},{title:"",nodeId:350300,geoJsonId:350300,children:[],connectionValue:350300},{title:"",nodeId:350400,geoJsonId:350400,children:[],connectionValue:350400},{title:"",nodeId:350500,geoJsonId:350500,children:[],connectionValue:350500},{title:"",nodeId:350600,geoJsonId:350600,children:[],connectionValue:350600},{title:"",nodeId:350700,geoJsonId:350700,children:[],connectionValue:350700},{title:"",nodeId:350800,geoJsonId:350800,children:[],connectionValue:350800},{title:"",nodeId:350900,geoJsonId:350900,children:[],connectionValue:350900}],connectionValue:35e4,connectionKey:"adcode"},{title:"",nodeId:36e4,geoJsonId:36e4,children:[{title:"",nodeId:360100,geoJsonId:360100,children:[],connectionValue:360100},{title:"",nodeId:360200,geoJsonId:360200,children:[],connectionValue:360200},{title:"",nodeId:360300,geoJsonId:360300,children:[],connectionValue:360300},{title:"",nodeId:360400,geoJsonId:360400,children:[],connectionValue:360400},{title:"",nodeId:360500,geoJsonId:360500,children:[],connectionValue:360500},{title:"",nodeId:360600,geoJsonId:360600,children:[],connectionValue:360600},{title:"",nodeId:360700,geoJsonId:360700,children:[],connectionValue:360700},{title:"",nodeId:360800,geoJsonId:360800,children:[],connectionValue:360800},{title:"",nodeId:360900,geoJsonId:360900,children:[],connectionValue:360900},{title:"",nodeId:361e3,geoJsonId:361e3,children:[],connectionValue:361e3},{title:"",nodeId:361100,geoJsonId:361100,children:[],connectionValue:361100}],connectionValue:36e4,connectionKey:"adcode"},{title:"",nodeId:37e4,geoJsonId:37e4,children:[{title:"",nodeId:370100,geoJsonId:370100,children:[],connectionValue:370100},{title:"",nodeId:370200,geoJsonId:370200,children:[],connectionValue:370200},{title:"",nodeId:370300,geoJsonId:370300,children:[],connectionValue:370300},{title:"",nodeId:370400,geoJsonId:370400,children:[],connectionValue:370400},{title:"",nodeId:370500,geoJsonId:370500,children:[],connectionValue:370500},{title:"",nodeId:370600,geoJsonId:370600,children:[],connectionValue:370600},{title:"",nodeId:370700,geoJsonId:370700,children:[],connectionValue:370700},{title:"",nodeId:370800,geoJsonId:370800,children:[],connectionValue:370800},{title:"",nodeId:370900,geoJsonId:370900,children:[],connectionValue:370900},{title:"",nodeId:371e3,geoJsonId:371e3,children:[],connectionValue:371e3},{title:"",nodeId:371100,geoJsonId:371100,children:[],connectionValue:371100},{title:"",nodeId:371300,geoJsonId:371300,children:[],connectionValue:371300},{title:"",nodeId:371400,geoJsonId:371400,children:[],connectionValue:371400},{title:"",nodeId:371500,geoJsonId:371500,children:[],connectionValue:371500},{title:"",nodeId:371600,geoJsonId:371600,children:[],connectionValue:371600},{title:"",nodeId:371700,geoJsonId:371700,children:[],connectionValue:371700}],connectionValue:37e4,connectionKey:"adcode"},{title:"",nodeId:41e4,geoJsonId:41e4,children:[{title:"",nodeId:410100,geoJsonId:410100,children:[],connectionValue:410100},{title:"",nodeId:410200,geoJsonId:410200,children:[],connectionValue:410200},{title:"",nodeId:410300,geoJsonId:410300,children:[],connectionValue:410300},{title:"",nodeId:410400,geoJsonId:410400,children:[],connectionValue:410400},{title:"",nodeId:410500,geoJsonId:410500,children:[],connectionValue:410500},{title:"",nodeId:410600,geoJsonId:410600,children:[],connectionValue:410600},{title:"",nodeId:410700,geoJsonId:410700,children:[],connectionValue:410700},{title:"",nodeId:410800,geoJsonId:410800,children:[],connectionValue:410800},{title:"",nodeId:410900,geoJsonId:410900,children:[],connectionValue:410900},{title:"",nodeId:411e3,geoJsonId:411e3,children:[],connectionValue:411e3},{title:"",nodeId:411100,geoJsonId:411100,children:[],connectionValue:411100},{title:"",nodeId:411200,geoJsonId:411200,children:[],connectionValue:411200},{title:"",nodeId:411300,geoJsonId:411300,children:[],connectionValue:411300},{title:"",nodeId:411400,geoJsonId:411400,children:[],connectionValue:411400},{title:"",nodeId:411500,geoJsonId:411500,children:[],connectionValue:411500},{title:"",nodeId:411600,geoJsonId:411600,children:[],connectionValue:411600},{title:"",nodeId:411700,geoJsonId:411700,children:[],connectionValue:411700},{title:"",nodeId:419001,geoJsonId:419001,children:[],connectionValue:419001}],connectionValue:41e4,connectionKey:"adcode"},{title:"",nodeId:42e4,geoJsonId:42e4,children:[{title:"",nodeId:420100,geoJsonId:420100,children:[],connectionValue:420100},{title:"",nodeId:420200,geoJsonId:420200,children:[],connectionValue:420200},{title:"",nodeId:420300,geoJsonId:420300,children:[],connectionValue:420300},{title:"",nodeId:420500,geoJsonId:420500,children:[],connectionValue:420500},{title:"",nodeId:420600,geoJsonId:420600,children:[],connectionValue:420600},{title:"",nodeId:420700,geoJsonId:420700,children:[],connectionValue:420700},{title:"",nodeId:420800,geoJsonId:420800,children:[],connectionValue:420800},{title:"",nodeId:420900,geoJsonId:420900,children:[],connectionValue:420900},{title:"",nodeId:421e3,geoJsonId:421e3,children:[],connectionValue:421e3},{title:"",nodeId:421100,geoJsonId:421100,children:[],connectionValue:421100},{title:"",nodeId:421200,geoJsonId:421200,children:[],connectionValue:421200},{title:"",nodeId:421300,geoJsonId:421300,children:[],connectionValue:421300},{title:"",nodeId:422800,geoJsonId:422800,children:[],connectionValue:422800},{title:"",nodeId:429004,geoJsonId:429004,children:[],connectionValue:429004},{title:"",nodeId:429005,geoJsonId:429005,children:[],connectionValue:429005},{title:"",nodeId:429006,geoJsonId:429006,children:[],connectionValue:429006},{title:"",nodeId:429021,geoJsonId:429021,children:[],connectionValue:429021}],connectionValue:42e4,connectionKey:"adcode"},{title:"",nodeId:43e4,geoJsonId:43e4,children:[{title:"",nodeId:430100,geoJsonId:430100,children:[],connectionValue:430100},{title:"",nodeId:430200,geoJsonId:430200,children:[],connectionValue:430200},{title:"",nodeId:430300,geoJsonId:430300,children:[],connectionValue:430300},{title:"",nodeId:430400,geoJsonId:430400,children:[],connectionValue:430400},{title:"",nodeId:430500,geoJsonId:430500,children:[],connectionValue:430500},{title:"",nodeId:430600,geoJsonId:430600,children:[],connectionValue:430600},{title:"",nodeId:430700,geoJsonId:430700,children:[],connectionValue:430700},{title:"",nodeId:430800,geoJsonId:430800,children:[],connectionValue:430800},{title:"",nodeId:430900,geoJsonId:430900,children:[],connectionValue:430900},{title:"",nodeId:431e3,geoJsonId:431e3,children:[],connectionValue:431e3},{title:"",nodeId:431100,geoJsonId:431100,children:[],connectionValue:431100},{title:"",nodeId:431200,geoJsonId:431200,children:[],connectionValue:431200},{title:"",nodeId:431300,geoJsonId:431300,children:[],connectionValue:431300},{title:"",nodeId:433100,geoJsonId:433100,children:[],connectionValue:433100}],connectionValue:43e4,connectionKey:"adcode"},{title:"",nodeId:44e4,geoJsonId:44e4,children:[{title:"",nodeId:440100,geoJsonId:440100,children:[],connectionValue:440100},{title:"",nodeId:440200,geoJsonId:440200,children:[],connectionValue:440200},{title:"",nodeId:440300,geoJsonId:440300,children:[],connectionValue:440300},{title:"",nodeId:440400,geoJsonId:440400,children:[],connectionValue:440400},{title:"",nodeId:440500,geoJsonId:440500,children:[],connectionValue:440500},{title:"",nodeId:440600,geoJsonId:440600,children:[],connectionValue:440600},{title:"",nodeId:440700,geoJsonId:440700,children:[],connectionValue:440700},{title:"",nodeId:440800,geoJsonId:440800,children:[],connectionValue:440800},{title:"",nodeId:440900,geoJsonId:440900,children:[],connectionValue:440900},{title:"",nodeId:441200,geoJsonId:441200,children:[],connectionValue:441200},{title:"",nodeId:441300,geoJsonId:441300,children:[],connectionValue:441300},{title:"",nodeId:441400,geoJsonId:441400,children:[],connectionValue:441400},{title:"",nodeId:441500,geoJsonId:441500,children:[],connectionValue:441500},{title:"",nodeId:441600,geoJsonId:441600,children:[],connectionValue:441600},{title:"",nodeId:441700,geoJsonId:441700,children:[],connectionValue:441700},{title:"",nodeId:441800,geoJsonId:441800,children:[],connectionValue:441800},{title:"",nodeId:441900,geoJsonId:441900,children:[],connectionValue:441900},{title:"",nodeId:442e3,geoJsonId:442e3,children:[],connectionValue:442e3},{title:"",nodeId:442100,geoJsonId:442100,children:[],connectionValue:442100},{title:"",nodeId:445100,geoJsonId:445100,children:[],connectionValue:445100},{title:"",nodeId:445200,geoJsonId:445200,children:[],connectionValue:445200},{title:"",nodeId:445300,geoJsonId:445300,children:[],connectionValue:445300}],connectionValue:44e4,connectionKey:"adcode"},{title:"",nodeId:45e4,geoJsonId:45e4,children:[{title:"",nodeId:450100,geoJsonId:450100,children:[],connectionValue:450100},{title:"",nodeId:450200,geoJsonId:450200,children:[],connectionValue:450200},{title:"",nodeId:450300,geoJsonId:450300,children:[],connectionValue:450300},{title:"",nodeId:450400,geoJsonId:450400,children:[],connectionValue:450400},{title:"",nodeId:450500,geoJsonId:450500,children:[],connectionValue:450500},{title:"",nodeId:450600,geoJsonId:450600,children:[],connectionValue:450600},{title:"",nodeId:450700,geoJsonId:450700,children:[],connectionValue:450700},{title:"",nodeId:450800,geoJsonId:450800,children:[],connectionValue:450800},{title:"",nodeId:450900,geoJsonId:450900,children:[],connectionValue:450900},{title:"",nodeId:451e3,geoJsonId:451e3,children:[],connectionValue:451e3},{title:"",nodeId:451100,geoJsonId:451100,children:[],connectionValue:451100},{title:"",nodeId:451200,geoJsonId:451200,children:[],connectionValue:451200},{title:"",nodeId:451300,geoJsonId:451300,children:[],connectionValue:451300},{title:"",nodeId:451400,geoJsonId:451400,children:[],connectionValue:451400}],connectionValue:45e4,connectionKey:"adcode"},{title:"",nodeId:46e4,geoJsonId:46e4,children:[{title:"",nodeId:460100,geoJsonId:460100,children:[],connectionValue:460100},{title:"",nodeId:460200,geoJsonId:460200,children:[],connectionValue:460200},{title:"",nodeId:460300,geoJsonId:460300,children:[],connectionValue:460300},{title:"",nodeId:460400,geoJsonId:460400,children:[],connectionValue:460400},{title:"",nodeId:469001,geoJsonId:469001,children:[],connectionValue:469001},{title:"",nodeId:469002,geoJsonId:469002,children:[],connectionValue:469002},{title:"",nodeId:469005,geoJsonId:469005,children:[],connectionValue:469005},{title:"",nodeId:469006,geoJsonId:469006,children:[],connectionValue:469006},{title:"",nodeId:469007,geoJsonId:469007,children:[],connectionValue:469007},{title:"",nodeId:469021,geoJsonId:469021,children:[],connectionValue:469021},{title:"",nodeId:469022,geoJsonId:469022,children:[],connectionValue:469022},{title:"",nodeId:469023,geoJsonId:469023,children:[],connectionValue:469023},{title:"",nodeId:469024,geoJsonId:469024,children:[],connectionValue:469024},{title:"",nodeId:469025,geoJsonId:469025,children:[],connectionValue:469025},{title:"",nodeId:469026,geoJsonId:469026,children:[],connectionValue:469026},{title:"",nodeId:469027,geoJsonId:469027,children:[],connectionValue:469027},{title:"",nodeId:469028,geoJsonId:469028,children:[],connectionValue:469028},{title:"",nodeId:469029,geoJsonId:469029,children:[],connectionValue:469029},{title:"",nodeId:469030,geoJsonId:469030,children:[],connectionValue:469030}],connectionValue:46e4,connectionKey:"adcode"},{title:"",nodeId:5e5,geoJsonId:5e5,children:[],connectionValue:5e5},{title:"",nodeId:51e4,geoJsonId:51e4,children:[{title:"",nodeId:510100,geoJsonId:510100,children:[],connectionValue:510100},{title:"",nodeId:510300,geoJsonId:510300,children:[],connectionValue:510300},{title:"",nodeId:510400,geoJsonId:510400,children:[],connectionValue:510400},{title:"",nodeId:510500,geoJsonId:510500,children:[],connectionValue:510500},{title:"",nodeId:510600,geoJsonId:510600,children:[],connectionValue:510600},{title:"",nodeId:510700,geoJsonId:510700,children:[],connectionValue:510700},{title:"",nodeId:510800,geoJsonId:510800,children:[],connectionValue:510800},{title:"",nodeId:510900,geoJsonId:510900,children:[],connectionValue:510900},{title:"",nodeId:511e3,geoJsonId:511e3,children:[],connectionValue:511e3},{title:"",nodeId:511100,geoJsonId:511100,children:[],connectionValue:511100},{title:"",nodeId:511300,geoJsonId:511300,children:[],connectionValue:511300},{title:"",nodeId:511400,geoJsonId:511400,children:[],connectionValue:511400},{title:"",nodeId:511500,geoJsonId:511500,children:[],connectionValue:511500},{title:"",nodeId:511600,geoJsonId:511600,children:[],connectionValue:511600},{title:"",nodeId:511700,geoJsonId:511700,children:[],connectionValue:511700},{title:"",nodeId:511800,geoJsonId:511800,children:[],connectionValue:511800},{title:"",nodeId:511900,geoJsonId:511900,children:[],connectionValue:511900},{title:"",nodeId:512e3,geoJsonId:512e3,children:[],connectionValue:512e3},{title:"",nodeId:513200,geoJsonId:513200,children:[],connectionValue:513200},{title:"",nodeId:513300,geoJsonId:513300,children:[],connectionValue:513300},{title:"",nodeId:513400,geoJsonId:513400,children:[],connectionValue:513400}],connectionValue:51e4,connectionKey:"adcode"},{title:"",nodeId:52e4,geoJsonId:52e4,children:[{title:"",nodeId:520100,geoJsonId:520100,children:[],connectionValue:520100},{title:"",nodeId:520200,geoJsonId:520200,children:[],connectionValue:520200},{title:"",nodeId:520300,geoJsonId:520300,children:[],connectionValue:520300},{title:"",nodeId:520400,geoJsonId:520400,children:[],connectionValue:520400},{title:"",nodeId:520500,geoJsonId:520500,children:[],connectionValue:520500},{title:"",nodeId:520600,geoJsonId:520600,children:[],connectionValue:520600},{title:"",nodeId:522300,geoJsonId:522300,children:[],connectionValue:522300},{title:"",nodeId:522600,geoJsonId:522600,children:[],connectionValue:522600},{title:"",nodeId:522700,geoJsonId:522700,children:[],connectionValue:522700}],connectionValue:52e4,connectionKey:"adcode"},{title:"",nodeId:53e4,geoJsonId:53e4,children:[{title:"",nodeId:530100,geoJsonId:530100,children:[],connectionValue:530100},{title:"",nodeId:530300,geoJsonId:530300,children:[],connectionValue:530300},{title:"",nodeId:530400,geoJsonId:530400,children:[],connectionValue:530400},{title:"",nodeId:530500,geoJsonId:530500,children:[],connectionValue:530500},{title:"",nodeId:530600,geoJsonId:530600,children:[],connectionValue:530600},{title:"",nodeId:530700,geoJsonId:530700,children:[],connectionValue:530700},{title:"",nodeId:530800,geoJsonId:530800,children:[],connectionValue:530800},{title:"",nodeId:530900,geoJsonId:530900,children:[],connectionValue:530900},{title:"",nodeId:532300,geoJsonId:532300,children:[],connectionValue:532300},{title:"",nodeId:532500,geoJsonId:532500,children:[],connectionValue:532500},{title:"",nodeId:532600,geoJsonId:532600,children:[],connectionValue:532600},{title:"",nodeId:532800,geoJsonId:532800,children:[],connectionValue:532800},{title:"",nodeId:532900,geoJsonId:532900,children:[],connectionValue:532900},{title:"",nodeId:533100,geoJsonId:533100,children:[],connectionValue:533100},{title:"",nodeId:533300,geoJsonId:533300,children:[],connectionValue:533300},{title:"",nodeId:533400,geoJsonId:533400,children:[],connectionValue:533400}],connectionValue:53e4,connectionKey:"adcode"},{title:"",nodeId:54e4,geoJsonId:54e4,children:[{title:"",nodeId:540100,geoJsonId:540100,children:[],connectionValue:540100},{title:"",nodeId:540200,geoJsonId:540200,children:[],connectionValue:540200},{title:"",nodeId:540300,geoJsonId:540300,children:[],connectionValue:540300},{title:"",nodeId:540400,geoJsonId:540400,children:[],connectionValue:540400},{title:"",nodeId:540500,geoJsonId:540500,children:[],connectionValue:540500},{title:"",nodeId:540600,geoJsonId:540600,children:[],connectionValue:540600},{title:"",nodeId:542500,geoJsonId:542500,children:[],connectionValue:542500}],connectionValue:54e4,connectionKey:"adcode"},{title:"",nodeId:61e4,geoJsonId:61e4,children:[{title:"",nodeId:610100,geoJsonId:610100,children:[],connectionValue:610100},{title:"",nodeId:610200,geoJsonId:610200,children:[],connectionValue:610200},{title:"",nodeId:610300,geoJsonId:610300,children:[],connectionValue:610300},{title:"",nodeId:610400,geoJsonId:610400,children:[],connectionValue:610400},{title:"",nodeId:610500,geoJsonId:610500,children:[],connectionValue:610500},{title:"",nodeId:610600,geoJsonId:610600,children:[],connectionValue:610600},{title:"",nodeId:610700,geoJsonId:610700,children:[],connectionValue:610700},{title:"",nodeId:610800,geoJsonId:610800,children:[],connectionValue:610800},{title:"",nodeId:610900,geoJsonId:610900,children:[],connectionValue:610900},{title:"",nodeId:611e3,geoJsonId:611e3,children:[],connectionValue:611e3}],connectionValue:61e4,connectionKey:"adcode"},{title:"",nodeId:62e4,geoJsonId:62e4,children:[{title:"",nodeId:620100,geoJsonId:620100,children:[],connectionValue:620100},{title:"",nodeId:620200,geoJsonId:620200,children:[],connectionValue:620200},{title:"",nodeId:620300,geoJsonId:620300,children:[],connectionValue:620300},{title:"",nodeId:620400,geoJsonId:620400,children:[],connectionValue:620400},{title:"",nodeId:620500,geoJsonId:620500,children:[],connectionValue:620500},{title:"",nodeId:620600,geoJsonId:620600,children:[],connectionValue:620600},{title:"",nodeId:620700,geoJsonId:620700,children:[],connectionValue:620700},{title:"",nodeId:620800,geoJsonId:620800,children:[],connectionValue:620800},{title:"",nodeId:620900,geoJsonId:620900,children:[],connectionValue:620900},{title:"",nodeId:621e3,geoJsonId:621e3,children:[],connectionValue:621e3},{title:"",nodeId:621100,geoJsonId:621100,children:[],connectionValue:621100},{title:"",nodeId:621200,geoJsonId:621200,children:[],connectionValue:621200},{title:"",nodeId:622900,geoJsonId:622900,children:[],connectionValue:622900},{title:"",nodeId:623e3,geoJsonId:623e3,children:[],connectionValue:623e3}],connectionValue:62e4,connectionKey:"adcode"},{title:"",nodeId:63e4,geoJsonId:63e4,children:[{title:"",nodeId:630100,geoJsonId:630100,children:[],connectionValue:630100},{title:"",nodeId:630200,geoJsonId:630200,children:[],connectionValue:630200},{title:"",nodeId:632200,geoJsonId:632200,children:[],connectionValue:632200},{title:"",nodeId:632300,geoJsonId:632300,children:[],connectionValue:632300},{title:"",nodeId:632500,geoJsonId:632500,children:[],connectionValue:632500},{title:"",nodeId:632600,geoJsonId:632600,children:[],connectionValue:632600},{title:"",nodeId:632700,geoJsonId:632700,children:[],connectionValue:632700},{title:"",nodeId:632800,geoJsonId:632800,children:[],connectionValue:632800}],connectionValue:63e4,connectionKey:"adcode"},{title:"",nodeId:64e4,geoJsonId:64e4,children:[{title:"",nodeId:640100,geoJsonId:640100,children:[],connectionValue:640100},{title:"",nodeId:640200,geoJsonId:640200,children:[],connectionValue:640200},{title:"",nodeId:640300,geoJsonId:640300,children:[],connectionValue:640300},{title:"",nodeId:640400,geoJsonId:640400,children:[],connectionValue:640400},{title:"",nodeId:640500,geoJsonId:640500,children:[],connectionValue:640500}],connectionValue:64e4,connectionKey:"adcode"},{title:"",nodeId:65e4,geoJsonId:65e4,children:[{title:"",nodeId:650100,geoJsonId:650100,children:[],connectionValue:650100},{title:"",nodeId:650200,geoJsonId:650200,children:[],connectionValue:650200},{title:"",nodeId:650400,geoJsonId:650400,children:[],connectionValue:650400},{title:"",nodeId:650500,geoJsonId:650500,children:[],connectionValue:650500},{title:"",nodeId:652300,geoJsonId:652300,children:[],connectionValue:652300},{title:"",nodeId:652700,geoJsonId:652700,children:[],connectionValue:652700},{title:"",nodeId:652800,geoJsonId:652800,children:[],connectionValue:652800},{title:"",nodeId:652900,geoJsonId:652900,children:[],connectionValue:652900},{title:"",nodeId:653e3,geoJsonId:653e3,children:[],connectionValue:653e3},{title:"",nodeId:653100,geoJsonId:653100,children:[],connectionValue:653100},{title:"",nodeId:653200,geoJsonId:653200,children:[],connectionValue:653200},{title:"",nodeId:654e3,geoJsonId:654e3,children:[],connectionValue:654e3},{title:"",nodeId:654200,geoJsonId:654200,children:[],connectionValue:654200},{title:"",nodeId:654300,geoJsonId:654300,children:[],connectionValue:654300},{title:"",nodeId:659001,geoJsonId:659001,children:[],connectionValue:659001},{title:"",nodeId:659002,geoJsonId:659002,children:[],connectionValue:659002},{title:"",nodeId:659003,geoJsonId:659003,children:[],connectionValue:659003},{title:"",nodeId:659004,geoJsonId:659004,children:[],connectionValue:659004},{title:"",nodeId:659005,geoJsonId:659005,children:[],connectionValue:659005},{title:"",nodeId:659006,geoJsonId:659006,children:[],connectionValue:659006},{title:"",nodeId:659007,geoJsonId:659007,children:[],connectionValue:659007},{title:"",nodeId:659008,geoJsonId:659008,children:[],connectionValue:659008},{title:"",nodeId:659009,geoJsonId:659009,children:[],connectionValue:659009}],connectionValue:65e4,connectionKey:"adcode"},{title:"",nodeId:71e4,geoJsonId:71e4,children:[],connectionValue:71e4},{title:"",nodeId:81e4,geoJsonId:81e4,children:[],connectionValue:81e4},{title:"",nodeId:82e4,geoJsonId:82e4,children:[],connectionValue:82e4}],connectionKey:"adcode"}}},function(e,t){e.exports=WynBi.__libs.Common.SignalR},function(e,t){e.exports={common:{nullDisplay:"[NULL]",emptyDisplay:"[Blank]",showNullAs:"[NULL]",showEmptyAs:"[Blank]",currencyFormat:"$#,##0.00",max:"Max",min:"Min",maxValue:"Max Value",minValue:"Min Value",infinity:"Infinity",negativeInfinity:"-Infinity",NaN:"Not a Number",on:"On",off:"Off",yes:"Yes",no:"No",true:"True",false:"False",asc:"Ascending",desc:"Descending",noSort:"No Sort",dateFormat:"MM/DD/YYYY",default:"Default",reload:"Reload",builtIn:"Built-in",edit:"Edit",others:"Others",groupFilter:"Group Filter",exclude:"Exclude"},components:{pivotTable:"Pivot Table",rawDataTable:"Data Table",kpiMatrix:"KPI Matrix",webContent:"Embedded Web Content",embeddedReport:"Embedded Report",embeddedDashboard:"Embedded Dashboard",container:"Container",tabContainer:"Tab Container",image:"Image",richText:"Rich Text",labelSlicer:"Label Slicer",treeSlicer:"Multi-dimensional Slicer",comboSlicer:"Multi-dimensional Dropdown Slicer",dateRangeSlicer:"Date Range Slicer",relativeDateSlicer:"Relative Dates Slicer",dataRangeSlicer:"Data Range Slicer",group:"Group",devTools:"Dev Tools"},patterns:{measures:{pattern:"{{aggregation}} of {{measure}}",pattern_duplicated:"{{aggregation}} of {{measure}} ({{idx}})",nonePattern:"{{measure}}",nonePattern_duplicated:"{{measure}} ({{idx}})"},calculations:{running:"Running",moving:"Moving",pattern:"{{method}} {{calculation}} on {{aggregation}}",pattern_duplicated:"{{method}} {{calculation}} on {{aggregation}} ({{idx}})",accounting:"Percentile",ranking:"Ranking",value:"Value",ratio:"Ratio",difference:"Difference",percentDifference:"Percent Difference"},chartTitle:{default:"Chart",separator:", ",connector:" and ",pattern:"{{measure}} by {{dimension}}"},datetime:{fiscalYearPattern:"FY {{year}}",quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",parts:{year:"Year",quarter:"Quarter",month:"Month",week:"Week",day:"Day",hour:"Hour",minute:"Minute",second:"Second",millisecond:"Millisecond"}},pageName:{namePattern:"Page {{number}}",namePattern_copy:"{{name}} - Copy {{number}}",nameRegex:"^Page (\\d+)$",nameRegex_copy:"^{{name}} - Copy (\\d+)$"},parameterName:{namePattern:"Parameter{{number}}",nameRegex:"^Parameter(\\d+)$"},container:{defaultTitle:"Container",tabTitleButton:"Tab {{number}}",tabTitleRegex:"^Tab (\\d+)$"},tooltip:{selectedValue:"{{count}} value selected",selectedValue_plural:"{{count}} values selected"},conditions:{between:" Between {{min}} and {{max}}",notBetween:" Not between {{min}} and {{max}}",aboveMax:" Greater Than Max Of {{right}}",belowMin:" Less Than Min Of {{right}}",aboveAverage:" Greater Than Average Of {{right}}",belowAverage:" Less Than Average Of {{right}}"}},charts:{tooltip:{keep:"Keep",exclude:"Exclude",drill:"Drill Down",drillDown:"Drill Down",drillDetail:"Drill Detail",drillDetailNoFilter:"(No Filter)",drillRoot:"Home",drillClear:"Clear Drill Items",jump:"Jump",noDimensionToDrill:"No dimension to drill to",expandHierarchy:"Expand Groups",collapseHierarchy:"Collapse Groups",addMonitor:"Add Data Monitoring"},displayUnit:{none:"None",e2:"Hundreds",e3:"K",e4:"10K",e5:"100K",e6:"M",e7:"10M",e8:"100M",e9:"B",e12:"T",pattern:"({{unit}})"}},richText:{hint:"The rich text component is now empty. Please click the edit button on the top right corner to add content.",expression:{title:"Aggregation",loading:"{loading...}",noData:"-",preparing:"{preparing...}",dataset:"Dataset",chooseField:"Choose Field",field:"Field",noFilterHint:"There is no filter.",noConditionalFormatHint:"There is no conditional format.",addConditionalFormat:"Add",borderRadius:"Border Radius",backgroundColor:"Background Color",textStyle:"Text Style",displayUnit:"Display Unit",format:"Format",conditionalFormat:"Conditional Format"},expressionVariable:{title:"Context Variable",prompt:'Hint: Input single context variable, such as user["name"], datasets["datasetName"].lastUpdated'},fontSize:{smaller:"Smaller",small:"Small",normal:"Normal",large:"Large",larger:"Larger"},link:{title:"Link Settings",url:"Url",targetPage:"Target Page",none:"None"},toolbar:{font:"Font",fontSize:"Font Size",bold:"Bold",italic:"Italic",underline:"Underline",color:"Font Color",backgroundColor:"Background Color",numbering:"Numbering",bullets:"Bullets",decreaseIndent:"Decrease Indent",increaseIndent:"Increase Indent",alignLeft:"Align Left",center:"Center",alignRight:"Align Right",subscript:"Subscript",superscript:"Superscript",strikeThrough:"Strike Through",hyperlink:"Insert Jump",expression:"Insert Data Aggregation",parameter:"Insert Parameter",noParameters:"No Parameters",variable:"Insert Variable"}},chartTypes:{column:"Column Chart",rangeColumn:"Range Column Chart",rangeBar:"Range Bar Chart",rangeArea:"Range Area Chart",stackedColumn:"Stacked Column Chart",percentStackedColumn:"Percent Stacked Column Chart",bar:"Bar Chart",stackedBar:"Stacked Bar Chart",percentStackedBar:"Percent Stacked Bar Chart",line:"Line Chart",area:"Area Chart",stackedArea:"Stacked Area Chart",percentStackedArea:"Percent Stacked Area Chart",pie:"Pie Chart",donut:"Donut Chart",rose:"Rose Chart",sunburst:"Sunburst Chart",barInPolar:"Bar Chart In Polar Coordinates",stackedBarInPolar:"Stacked Bar Chart In Polar Coordinates",radialStackedBar:"Radial Stacked Bar Chart",radar:"Radar Chart",filledRadar:"Filled Radar Chart",scatter:"Scatter",bubble:"Bubble Chart",combined:"Combined Chart",map:"Map",treeMap:"Treemap",funnel:"Funnel",gauge:"Gauge",indicator:"Indicator",kpi:"KPI Chart",card:"Card Chart",floorPlan:"Floor Plan",pivotTable:"Pivot Table",spreadSource:"Calc Chart",multiSource:"Multi-Source Chart"},aggregationMethods:{sum:"Sum",cnt:"Count",avg:"Average",max:"Max",min:"Min",dst:"Distinct Count",none:"None",list:"List",fst:"First"},error:{noImage:"No Image",noImageInRunTime:"No Image",noData:"No data found",getDatasetFailed:"Failed to retrieve data!",getDatasetNoAccess:"No required permission to retrieve the data!",loadGeoDataFailed:"Failed to load geo data!",loadFloorPlanDataFailed:"Failed to load floor plan data!",exportFailed:"Failed to export.",getTokenFailed:"Failed to get token.",notSupportChangeChartType:"The visualization component does not support changing the chart type!",draftIsBeingReviewed:{title:"Draft Is Being Reviewed",content:"The draft of document is being reviewed. It can't be modified."},loadVisualFailed:"Failed to load visualization",docWithoutAccess:{title:"Some used documents without access or not found.",dashboard:"{{count}} Dashboard",dashboard_plural:"{{count}} Dashboards",report:"{{count}} Report",report_plural:"{{count}} Reports",dataset:"{{count}} Dataset",dataset_plural:"{{count}} Datasets",dataModel:"{{count}} Data Model",dataModel_plural:"{{count}} Data Models",image:"{{count}} Image",image_plural:"{{count}} Images",mapData:"{{count}} Map Data",mapHierarchy:"{{count}} Map Hierarchy",mapHierarchy_plural:"{{count}} Map Hierarchies",visualization:"{{count}} Visualization",font:"{{count}} Font",font_plural:"{{count}} Fonts",floorPlan:"{{count}} Floor Plan",theme:"{{count}} Theme",theme_plural:"{{count}} Themes",language:"{{count}} Language Resources",comma:", ",content:" without access."},shareResource:{ok:"Every resource can be accessed!",removeScenario:"Remove",removeResourceInPage:"Reset the broken share resource in page.",docStatus:"Dashboard Status",dashboard:"Dashboard ({{id}}) is unavailable.",report:"Report ({{id}}) is unavailable.",dataset:"Dataset ({{id}}) is unavailable.",dataModel:"Data Model ({{id}}) is unavailable.",image:"Image ({{id}}) is unavailable.",mapData:"Map Data ({{id}}) is unavailable.",mapHierarchy:"Map Hierarchy ({{id}}) is unavailable.",visualization:"Visualization ({{id}}) is unavailable.",font:"Font ({{id}}) is unavailable.",floorPlan:"Floor Plan ({{id}}) is unavailable.",theme:"Theme ({{id}}) is unavailable.",languageResource:"Language Resource ({{id}}) is unavailable.",unknown:"Unknown ({{id}}) is unavailable.",resourceNotFount:"Resource Not Found"},statusCode:{401:{title:"Unauthorized",content:"Your login info is either incorrect or expired. Try reload the page or login again."},403:{title:"Forbidden",content:"You do not have the required permission to access the resource."},404:{title:"Not Found",content:"{{content}} was not found."},500:{title:"Internal Server Error",content:""}},errorCode:{2e5:{title:"Unknown Error"},200001:{title:"Invalid Parameter: Id"},200002:{title:"Document Not Found",contentHasName:"Cannot find the {{type}} document '{{name}}'.",contentNoName:"Cannot find referenced {{type}} document."},200101:{title:"{{title}} - Dashboard Exists",content:"There is already a dashboard with the same name."},200102:{title:"Document Count Exceeded",content:"The count of dashboards reached your license limit."},200103:{title:"Document Pending Approval",content:"The document is pending approval."},200104:{title:"Draft Disabled",content:"The document draft has been disabled."},200201:{title:"Document Access Denied",content:"You do not have the required permission to access the {{type}} document '{{name}}'."},200204:{title:"Aggregated Data Points Exceeded",content:"The count of aggregated data points exceeds the limit setting."},200211:{title:"Get Dataset Data Failed",content:"Current user must belong to a dedicated organization to access dataset cache of a multi-tenant dataset"},200212:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200213:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200214:{title:"Exceeded Max Aggregated Data Points",content:"The count of aggregated data points exceeds the limit {{maxAggDataPoints}}."},200215:{title:"Insufficient Context Value",content:"Specified property, '{{property}}', not found on current user-context."},200216:{title:"Insufficient Context Value",content:"Specified property, '{{property}}', not found on current organization-context."},200217:{title:"Insufficient Context Value",content:"The literal value of context parameter, '{{parameter}}', can not be converted to '{{dataType}}' type."},200218:{title:"Insufficient Context Value",content:"Value of context parameter, '{{parameter}}', is null or empty."},200220:{title:"Query Data Failed"},200221:{title:"Query Data Failed"},200222:{title:"Query Data Failed"},200224:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200225:{title:"Query Data Failed",content:"Failed to generate SQL statement for analysis database."},200226:{title:"Query Data Failed",content:"Failed to open connection against analysis database."},200227:{title:"Query Data Failed",content:"Failed to execute command against analysis database."},200228:{title:"Query Data Failed",content:"Access denied on referenced datasource."},200229:{title:"Query Data Failed",content:"Referenced data source not found."},200301:{title:"Load Dataset Failed",content:"Failed to load the dataset, please contact the administrator or dataset author for help."},200302:{title:"No Available Cache",content:"Failed to generate dataset cache."},540001:{title:"Failed to Add Data Monitoring"},540002:{title:"No Enough Permissions to Create Data Monitoring"},540008:{title:"Data Monitoring License is Expired"},540009:{title:"{{name}} - already exists",content:"There is already a data monitoring with same name."},540010:{title:"Portal Uri is Empty",content:"Portal Uri is required. Please contact the Administrator."},600001:{title:'Invalid parameter "{{name}}" in WAX'}},devTools:{loadDefinitionError:"Failed to load visualization"},multiSourceChart:{measureInGroup:{title:"Operation Forbidden",content:"Do not add measure field to grouping role!"}},NoSearchResult:"Nothing can be founded!",saveDataMonitorFailed:"Save data monitoring failed!"},tables:{grandTotal:"Grand Total",subTotal:"Total"},slicers:{filterPlaceholder:"Search",selectAll:"(All)",search:"Search",clearSelection:"Clear Selection",sort:"Slicer Sort",notSelected:"(All)",startDate:"Start Date",endDate:"End Date",value:"Value",showMore:"Show more",selectParameter:"Select parameter",AND:" AND ",dateRangeSlicer:{dateMode:{title:"Date Mode",date:"Date",year:"Year",yearQuarter:"Year-Quarter",yearMonth:"Year-Month",dateTime:"Date Time"},rangeMode:{title:"Display Mode",basic:"Date",startEnd:"Date Range"},defaultValue:{title:"Default Value",dialogTitle:"Set Default Value",valueType:"Value Type",staticDate:"Static Date",relativeDate:"Relative Date",quickDate:"Quick Range",empty:"<Empty>"},dataFormat:{title:"Data Format",year:"yyyy",quarter:"qq yyyy",month:"mm/yyyy",date:"mm/dd/yyyy",second:"mm/dd/yyyy h:mm:ss",auto:"Auto"},placeholder:{dateTitle:"Date Placeholder",dateDefault:"Select date",startTitle:"Start Date Placeholder",startDefault:"Start date",endTitle:"End Date Placeholder",endDefault:"End date"},allowClear:"Allow Clear Date",quickRanges:{show:"Show Quick Ranges",title:"Quick Ranges",dialogTitle:"Set Quick Range",empty:"No quick ranges",custom:"Custom Range"},ok:"OK"},relativeDateSlicer:{Q1:"Q1",Q2:"Q2",Q3:"Q3",Q4:"Q4",none:"None",custom:"Custom",addRelativeDate:"Add Relative Date",itemName:"Name"}},editors:{relativeDateEditor:{this:{year:"This year",quarter:"This quarter",month:"This month",week:"This week",day:"Today",hour:"This hour",minute:"This minute",second:"This second",anchor:"Anchor {{unit}}"},previous:{year:"Previous year",quarter:"Previous quarter",month:"Previous month",week:"Previous week",day:"Yesterday",hour:"Previous hour",minute:"Previous minute",second:"Previous second"},next:{year:"Next year",quarter:"Next quarter",month:"Next month",week:"Next week",day:"Tomorrow",hour:"Next hour",minute:"Next minute",second:"Next second"},toDate:{toDate:"{{unit}} to date",toNow:"{{unit}} to now",toAnchorDate:"The {{unit}} to anchor date",toAnchorTime:"The {{unit}} to anchor time"},unit:{year:"year",year_plural:"years",quarter:"quarter",quarter_plural:"quarters",month:"month",month_plural:"months",week:"week",week_plural:"weeks",day:"day",day_plural:"days",hour:"hour",hour_plural:"hours",minute:"minute",minute_plural:"minutes",second:"second",second_plural:"seconds"},lastOrNext:{last:"Last {{count}} {{unit}}",next:"Next {{count}} {{unit}}"},offset:{addOffset:"Add offset",withOffset:"(Offset {{count}} {{unit}})"},lastN:"Last",nextN:"Next",year:"Year",quarter:"Quarter",month:"Month",week:"Week",day:"Day",hour:"Hour",minute:"Minute",second:"Second",anchorRelativeTo:"Anchor relative to"},parameterWrapper:{useCustomValue:"Use custom value"}},dialogs:{filter:{dateUnit:"Date Unit",selectAll:"(All)"},jumpToDocuments:{backFrom:"Back from"},common:{apply:"Apply",reset:"Reset",yes:"Yes",no:"No",ok:"OK",cancel:"Cancel",close:"Close",deleteAll:"Delete All"},dataMonitor:{title:"Add Data Monitoring"}},webContent:{emptyInRunTime:"Blank"},actionBar:{filter:"Filter",modelParameters:"Model Parameters",sort:"Sort",swapRowsAndCols:"Swap Rows And Columns",rank:"Conditional Visualization",changeChartType:"Chart Type",changePivotSetting:"Data Binding",conditionalFormat:"Conditional Format",referenceLine:"Reference Line",showData:"Show Data",hideData:"Hide Data",clearCustomData:"Clear Custom Data",expand:"Expand",shrink:"Shrink",focus:"Focus",exitFocus:"Back to Designer",selectMap:"Select Map",edit:"Edit",remove:"Remove",moreActions:"More Actions",enableCrossFilter:"Enable Cross Filter",disableCrossFilter:"Disable Cross Filter",trendLine:"Trend Line",export:"Export",addAnnotation:"Add Annotations",editAnnotation:"Edit Annotations",annotation:"Annotations",selectFloorPlan:"Select Floor Plan",clearRuntimeFilters:"Clear Runtime Filters",refreshDefinition:"Refresh",shareScenario:"Share Scenario",openFullDashboard:"Open Full Dashboard",clearSelection:"Clear Selection",analysisPath:"Analysis Path",mergeDatasets:"Merge Datasets",contentSetting:"Configure",hideThisComponent:"Hide This Component"},appBar:{pageBack:"Back"},inspector:{properties:{charts:{series:{defaultDisplay:"Total"}}}},spreadChart:{rowsPattern:"Row{{index}}",columnsPattern:"Column{{index}}",values:"Values"},notifications:{dashboardSaving:"Saving Dashboard",dashboardSaved:"Dashboard Saved.",dismiss:"Dismiss",dismissAll:"Dismiss All",showAll:"Show All",showDetails:"Show Details",infoCategory:"Info",warningCategory:"Warning",errorCategory:"Error",expandTitle:"Expand",collapseTitle:"Collapse",promptUsingMobileView:{title:"Mobile View Is In-use",content:"Note: You are seeing the 'Mobile View' of the dashboard. Switch to the 'Desktop View' to see the full dashboard."},dataMonitorSaved:"Data Monitoring Saved."},documentType:{Unknown:"unknown",Dashboard:"Dashboard",Dataset:"Dataset",DataSource:"DataSource",Image:"Image",Theme:"Theme",MapHierarchy:"MapHierarchy",GeoJson:"GeoJson",Report:"Report",FloorPlan:"FloorPlan",AnalysisModel:"DataModel",Visual:"Visual"},dataBindingPanel:{chooseDataset:"Choose Data",loadingDatasetList:"Loading dataset list from server...",loadDatasetListFailed:"Failed to load dataset list from server!",searchField:"Search...",measures:"Measures",dimensions:"Dimensions",bindingHint:"Please select a dataset from the above list for data binding.",values:"Values",lower:"Lower Value",upper:"Upper Value",leftValue:"Left Value Axis",rightValue:"Right Value Axis",axis:"Axis (Category)",axis_x:"X Axis",axis_y:"Y Axis",legend:"Legend (Series)",category:"Category",details:"Details",rows:"Rows",columns:"Columns",location:"Region",latitude:"Latitude",longtitude:"Longitude",layers:"Layers",mapTiles:"Regions",scatter:"Points",color:"Color",size:"Size",shape:"Shape",trellisRows:"Trellis Rows",trellisColumns:"Trellis Columns",tooltip:"Tooltip",mainValue:"Actual Value",comparisonValue:"Target Value",forecastValue:"Forecast Value",imageSource:"Image Source",pivotSettingHint:"Drag data fields here.",pivotSettingHintRunTime:"Click + to add fields here.",aggregationMethod:"Aggregation Method",editName:"Rename",editFormat:"Edit Format",deleteFormat:"Delete Format",createHierarchy:"Create Hierarchy Field",editHierarchy:"Edit Hierarchy Field",deleteHierarchy:"Delete Hierarchy Field",editNameHierarchyItem:"Rename",deleteHierarchyItem:"Remove",exactDate:"Exact Date",ymd:"Year/Month/Day",yq:"Year/Quarter",ym:"Year/Month",yw:"Year/Week",runningCalculation:"Running Calculation",movingCalculation:"Moving Calculation",origin:"Original Value",addMoMCalculation:"MoM Calculation",addYoYCalculation:"YoY Calculation",accountingCalculation:"Percentile Calculation",rankingCalculation:"Ranking Calculation",addAccountingCalculation:"Percentile Calculation",addRankingCalculation:"Ranking Calculation",totalRanking:"Total Ranking",groupRanking:"Group Ranking",totalAccounting:"Total Percentile",groupAccounting:"Group Percentile",dateCalcualtionHint:"Need a date column to enable this.",advanced:"Advanced",filter:"Filter",value:"Value",ratio:"Ratio",difference:"Difference",percentDifference:"Percent Difference",slicerColumn:"Columns",search:"Search...",seriesAxisLabel:"Axis",seriesAxis:{both:"Both Axis",left:"Left Axis",right:"Right Axis"},quickFunction:"Quick Functions",pastValue:"Past Value",pastYear:"Past Year",pastQuarter:"Past Quarter",pastMonth:"Past Month",pastWeek:"Past Week",changeOverTime:"Change Over Time",growthRate:"Growth Rate",fromPreviousPeriod:"From Previous Period",fromSamePeriodPreviousYear:"Same Period, YoY",fromSamePeriodPreviousQuarter:"Same Period, QoQ",fromSamePeriodPreviousMonth:"Same Period, MoM",fromSamePeriodPreviousWeek:"Same Period, WoW",fromSamePeriodPreviousYearPercent:"Same Period, YoY%",fromSamePeriodPreviousQuarterPercent:"Same Period, QoQ%",fromSamePeriodPreviousMonthPercent:"Same Period, MoM%",fromSamePeriodPreviousWeekPercent:"Same Period, WoW%",changeOverTimePercent:"% Change Over Time",dateBasedFunctions:"Date Based Functions...",growth:"Growth",singleValue:"Number",Image:"Image",bulletGraph:"Bullet Graph",paretoGraph:"Pareto Graph",hBarGraph:"HBar Graph",diagram:"Diagram",trend:"Trend",bar:"Bar",area:"Area",winLoss:"Win-Loss",number:"Number",editText:"Edit",alignmentSetting:"Text Alignment",sparklineSetting:"Settings",moveUp:"Move Up",moveDown:"Move Down",collapse:"Collapse",expand:"Expand",floorPlanArea:"Area",floorPlanColor:"Color",renderSetting:"Render Setting",multiDimensions:"Multi-Dimensions",parentChild:"Parent-Child",pid:"ParentId",id:"Id",hierarchy:"Hierarchy",display:"Display",rootId:"Root Id",separator:"Separator",separatorEG:'e.g. "-", "," or " " between levels',missMatchedNode:"Miss-matched Node",addToRoot:"Add to root",ignore:"Ignore",separateType:"Separate type",length:"Length",pivotSettingItemTitlePattern:"{{ itemDisplay }} from `{{ entityName }}`",displayTimezone:"Display Timezone",displayUTC:"UTC",displayLocal:"Local Date Time",attribute:"Attribute",customMeasure:"Custom Measure",calculatedColumn:"Calculated Column",dataModelCustomMeasure:"Data Model Custom Measure",dataModelCalculatedColumn:"Data Model Calculated Column",invalidColumn:{conflict:"Invalid data attribute name"}}}},function(e,t){e.exports={coreui:{editorsLocalization:{collectionEditor:{closeBtnTitle:"Close",showBtnTitle:"Show Items",addBtnText:"Add",addBtnTitle:"Add Item",textEmpty:"Collection is empty",textItems:"items"}},textUnknownProperty:"Unknown Property",emptyListPlaceholder:"Empty List",gridSearchPlaceholder:"enter property name here...",closeSearchBtnTitle:"Close"},moment:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],week:{dow:0}},spreadjs:{ContextMenu:{insertRows:"Insert",deleteRows:"Delete"}},dateTimePicker:{quarters:["Q1","Q2","Q3","Q4"],current:["This Year","This Quarter","This Month","Today","Now"],yearTitle:"YYYY",yearMonthTitle:"M YYYY"},dataMonitor:{ui:{tabHeaders:{Basic:"Basic Information",Notification:"Notification",ExecutionPlan:"Execution Plan"},basic:{name:"Name",namePlaceholder:"Please enter name",description:"Description",descriptionPlaceholder:"Please enter description",monitorValue:"Monitor Value",condition:"Condition",conditionEnums:{equal:"Equal To",greater:"Greater Than",equalOrGreater:"Greater Than or Equal To",less:"Less Than",equalOrLess:"Less Than or Equal To"},threshold:"Threshold",thresholdPlaceholder:"Please enter the threshold",filterInformation:"Filter Information",filterField:"Field",filterValue:"Value",errors:{nameRequired:"Name is required.",invalidThreshold:"Invalid Float."}},executionPlan:{repeat:"Repeat",repeatType:{daily:"Daily",monthly:"Monthly",advanced:"Advanced"},dailyEditor:{at:"At ${time}",every:"Every",hours:"hour(s)",minutes:"minute(s)"},monthlyEditor:{every:"Every",months:"month(s)",onDay:"On day",onTheLast:"On the last",onTheFirst:"On the first",lastDay:"Day",lastWeekday:"Weekday"},cronExpressionEditor:{cronExpression:"CRON Expression"},start:"Start",end:"End",noEndDate:"No End Date",timezone:"Executing Timezone",errors:{invalidCronExpression:"Invalid Cron Expression."}},notification:{Email:"Email",WeChat4Work:"WeCom",DingTalk:"DingTalk",MSTeams:"MSTeams",Slack:"Slack",contactsPlaceholder:"Choose one or more contacts",emailPlaceholder:"Please enter the email addresses separated by semicolons",contentPlaceholder:"Please enter content",defaultContent:"This is an automated message sent to notify you that the $field is now $value and the data monitoring trigger $dataMonitorName with the rule set as ($field $condition $threshold) has been triggered on the $dashboardName.\nThis is an automated message. Please follow the link below to check the dashboard directly.\n$dashboardURL",channel:"Channels",content:"Content",variables:"Variables",variableItems:{dashboardId:"Dashboard Id",dashboardName:"Dashboard Name",dashboardUrl:"Dashboard URL",dataMonitorName:"Monitoring Name",field:"Monitoring field",value:"Monitoring field value",condition:"Condition",threshold:"Threshold",time:"Time"},mechanism:"Options",everyTime:"Notification Every Time",periodTime:"Notification Only Once",onlyOnce:"Within",withinPlaceholder:"Enter a number",search:"Search",timeUnit:{day:"Day(s)",hour:"Hour(s)",minute:"Minute(s)",second:"Second(s)"},errors:{emailInvalid:"Invalid email address.",emailDomainInvalid:"Invalid domain.",contentRequired:"Content is required.",withinInvalid:"Invalid integer."}},errors:{noValidChannel:"There is no notification channels, cannot create data monitoring.",getContactsFailed:"Failed to get contacts."}},timezone:{"timezone_Etc/GMT+12":"(UTC-12:00) International Date Line west","timezone_Etc/GMT+11":"(UTC-11:00) Coordinated Universal Time-11","timezone_America/Adak":"(UTC-10:00) Aleutian Islands","timezone_Pacific/Honolulu":"(UTC-10:00) Hawaii","timezone_Pacific/Marquesas":"(UTC-09:30) Marquesas Islands","timezone_America/Anchorage":"(UTC-09:00) Alaska","timezone_Etc/GMT+9":"(UTC-09:00) Coordinated Universal Time-09","timezone_America/Tijuana":"(UTC-08:00) Baja California","timezone_Etc/GMT+8":"(UTC-08:00) Coordinated Universal Time-08","timezone_America/Los_Angeles":"(UTC-08:00) Pacific Time (US & Canada)","timezone_America/Phoenix":"(UTC-07:00) Arizona","timezone_America/Chihuahua":"(UTC-07:00) Chihuahua, La Paz, Mazatlan","timezone_America/Denver":"(UTC-07:00) Mountain Time (US & Canada)","timezone_America/Guatemala":"(UTC-06:00) Central America","timezone_America/Chicago":"(UTC-06:00) Central Time (US & Canada)","timezone_Pacific/Easter":"(UTC-06:00) Easter Island","timezone_America/Mexico_City":"(UTC-06:00) Guadalajara, Mexico City, Monterrey","timezone_America/Regina":"(UTC-06:00) Saskatchewan","timezone_America/Bogota":"(UTC-05:00) Bogota, Lima, Quito, Rio Branco","timezone_America/Cancun":"(UTC-05:00) Chetumal","timezone_America/New_York":"(UTC-05:00) Eastern Time (US & Canada)","timezone_America/Port-au-Prince":"(UTC-05:00) Haiti","timezone_America/Havana":"(UTC-05:00) Havana","timezone_America/Indiana/Indianapolis":"(UTC-05:00) Indiana (East)","timezone_America/Grand_Turk":"(UTC-05:00) Turks and Caicos","timezone_America/Asuncion":"(UTC-04:00) Asuncion","timezone_America/Halifax":"(UTC-04:00) Atlantic Time (Canada)","timezone_America/Caracas":"(UTC-04:00) Caracas","timezone_America/Cuiaba":"(UTC-04:00) Cuiaba","timezone_America/La_Paz":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","timezone_America/Santiago":"(UTC-04:00) Santiago","timezone_America/St_Johns":"(UTC-03:30) Newfoundland","timezone_America/Araguaina":"(UTC-03:00) Araguaina","timezone_America/Sao_Paulo":"(UTC-03:00) Brasilia","timezone_America/Cayenne":"(UTC-03:00) Cayenne, Fortaleza","timezone_America/Argentina/Buenos_Aires":"(UTC-03:00) City of Buenos Aires","timezone_America/Godthab":"(UTC-03:00) Greenland","timezone_America/Montevideo":"(UTC-03:00) Montevideo","timezone_America/Punta_Arenas":"(UTC-03:00) Punta Arenas","timezone_America/Miquelon":"(UTC-03:00) Saint Pierre and Miquelon","timezone_America/Bahia":"(UTC-03:00) Salvador","timezone_Etc/GMT+2":"(UTC-02:00) Coordinated Universal Time-02","timezone_Atlantic/Azores":"(UTC-01:00) Azores","timezone_Atlantic/Cape_Verde":"(UTC-01:00) Cabo Verde Is.","timezone_Etc/UTC":"(UTC) Coordinated Universal Time","timezone_Europe/London":"(UTC+00:00) Dublin, Edinburgh, Lisbon, London","timezone_Atlantic/Reykjavik":"(UTC+00:00) Monrovia, Reykjavik","timezone_Africa/Sao_Tome":"(UTC+00:00) Sao Tome","timezone_Africa/Casablanca":"(UTC+01:00) Casablanca","timezone_Europe/Berlin":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","timezone_Europe/Budapest":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","timezone_Europe/Paris":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","timezone_Europe/Warsaw":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","timezone_Africa/Lagos":"(UTC+01:00) West Central Africa","timezone_Asia/Amman":"(UTC+02:00) Amman","timezone_Europe/Bucharest":"(UTC+02:00) Athens, Bucharest","timezone_Asia/Beirut":"(UTC+02:00) Beirut","timezone_Africa/Cairo":"(UTC+02:00) Cairo","timezone_Europe/Chisinau":"(UTC+02:00) Chisinau","timezone_Asia/Damascus":"(UTC+02:00) Damascus","timezone_Asia/Hebron":"(UTC+02:00) Gaza, Hebron","timezone_Africa/Johannesburg":"(UTC+02:00) Harare, Pretoria","timezone_Europe/Kiev":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","timezone_Asia/Jerusalem":"(UTC+02:00) Jerusalem","timezone_Europe/Kaliningrad":"(UTC+02:00) Kaliningrad","timezone_Africa/Khartoum":"(UTC+02:00) Khartoum","timezone_Africa/Tripoli":"(UTC+02:00) Tripoli","timezone_Africa/Windhoek":"(UTC+02:00) Windhoek","timezone_Asia/Baghdad":"(UTC+03:00) Baghdad","timezone_Europe/Istanbul":"(UTC+03:00) Istanbul","timezone_Asia/Riyadh":"(UTC+03:00) Kuwait, Riyadh","timezone_Europe/Minsk":"(UTC+03:00) Minsk","timezone_Europe/Moscow":"(UTC+03:00) Moscow, St. Petersburg","timezone_Africa/Nairobi":"(UTC+03:00) Nairobi","timezone_Asia/Tehran":"(UTC+03:30) Tehran","timezone_Asia/Dubai":"(UTC+04:00) Abu Dhabi, Muscat","timezone_Europe/Astrakhan":"(UTC+04:00) Astrakhan, Ulyanovsk","timezone_Asia/Baku":"(UTC+04:00) Baku","timezone_Europe/Samara":"(UTC+04:00) Izhevsk, Samara","timezone_Indian/Mauritius":"(UTC+04:00) Port Louis","timezone_Europe/Saratov":"(UTC+04:00) Saratov","timezone_Asia/Tbilisi":"(UTC+04:00) Tbilisi","timezone_Europe/Volgograd":"(UTC+04:00) Volgograd","timezone_Asia/Yerevan":"(UTC+04:00) Yerevan","timezone_Asia/Kabul":"(UTC+04:30) Kabul","timezone_Asia/Tashkent":"(UTC+05:00) Ashgabat, Tashkent","timezone_Asia/Yekaterinburg":"(UTC+05:00) Ekaterinburg","timezone_Asia/Karachi":"(UTC+05:00) Islamabad, Karachi","timezone_Asia/Qyzylorda":"(UTC+05:00) Qyzylorda","timezone_Asia/Kolkata":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","timezone_Asia/Colombo":"(UTC+05:30) Sri Jayawardenepura","timezone_Asia/Kathmandu":"(UTC+05:45) Kathmandu","timezone_Asia/Almaty":"(UTC+06:00) Astana","timezone_Asia/Dhaka":"(UTC+06:00) Dhaka","timezone_Asia/Omsk":"(UTC+06:00) Omsk","timezone_Asia/Yangon":"(UTC+06:30) Yangon (Rangoon)","timezone_Asia/Bangkok":"(UTC+07:00) Bangkok, Hanoi, Jakarta","timezone_Asia/Barnaul":"(UTC+07:00) Barnaul, Gorno-Altaysk","timezone_Asia/Hovd":"(UTC+07:00) Hovd","timezone_Asia/Krasnoyarsk":"(UTC+07:00) Krasnoyarsk","timezone_Asia/Novosibirsk":"(UTC+07:00) Novosibirsk","timezone_Asia/Tomsk":"(UTC+07:00) Tomsk","timezone_Asia/Shanghai":"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi","timezone_Asia/Irkutsk":"(UTC+08:00) Irkutsk","timezone_Asia/Singapore":"(UTC+08:00) Kuala Lumpur, Singapore","timezone_Australia/Perth":"(UTC+08:00) Perth","timezone_Asia/Taipei":"(UTC+08:00) Taipei","timezone_Asia/Ulaanbaatar":"(UTC+08:00) Ulaanbaatar","timezone_Australia/Eucla":"(UTC+08:45) Eucla","timezone_Asia/Chita":"(UTC+09:00) Chita","timezone_Asia/Tokyo":"(UTC+09:00) Osaka, Sapporo, Tokyo","timezone_Asia/Pyongyang":"(UTC+09:00) Pyongyang","timezone_Asia/Seoul":"(UTC+09:00) Seoul","timezone_Asia/Yakutsk":"(UTC+09:00) Yakutsk","timezone_Australia/Adelaide":"(UTC+09:30) Adelaide","timezone_Australia/Darwin":"(UTC+09:30) Darwin","timezone_Australia/Brisbane":"(UTC+10:00) Brisbane","timezone_Australia/Sydney":"(UTC+10:00) Canberra, Melbourne, Sydney","timezone_Pacific/Port_Moresby":"(UTC+10:00) Guam, Port Moresby","timezone_Australia/Hobart":"(UTC+10:00) Hobart","timezone_Asia/Vladivostok":"(UTC+10:00) Vladivostok","timezone_Australia/Lord_Howe":"(UTC+10:30) Lord Howe Island","timezone_Pacific/Bougainville":"(UTC+11:00) Bougainville Island","timezone_Asia/Srednekolymsk":"(UTC+11:00) Chokurdakh","timezone_Asia/Magadan":"(UTC+11:00) Magadan","timezone_Pacific/Norfolk":"(UTC+11:00) Norfolk Island","timezone_Asia/Sakhalin":"(UTC+11:00) Sakhalin","timezone_Pacific/Guadalcanal":"(UTC+11:00) Solomon Is., New Caledonia","timezone_Asia/Kamchatka":"(UTC+12:00) Anadyr, Petropavlovsk-Kamchatsky","timezone_Pacific/Auckland":"(UTC+12:00) Auckland, Wellington","timezone_Etc/GMT-12":"(UTC+12:00) Coordinated Universal Time+12","timezone_Pacific/Fiji":"(UTC+12:00) Fiji","timezone_Pacific/Chatham":"(UTC+12:45) Chatham Islands","timezone_Etc/GMT-13":"(UTC+13:00) Coordinated Universal Time+13","timezone_Pacific/Tongatapu":"(UTC+13:00) Nuku'alofa","timezone_Pacific/Apia":"(UTC+13:00) Samoa","timezone_Pacific/Kiritimati":"(UTC+14:00) Kiritimati Island"},dateTimePicker:"$t(dateTimePicker)",moment:"$t(moment)"}}},function(e,t){e.exports={license:{textA:"Powered by Wyn Enterprise evaluation edition.",textB:"Not licensed for production use."}}},function(e,t){e.exports=WynBi.__libs.Common.GCESHeartBeat},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(a,e){function n(e,t){return a.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a.exports.__esModule=!0,a.exports.default=a.exports,n(e,t)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,a){var u=a(48),c={};for(var n in u)u.hasOwnProperty(n)&&(c[u[n]]=n);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in o)if(o.hasOwnProperty(i)){if(!("channels"in o[i]))throw new Error("missing channels property: "+i);if(!("labels"in o[i]))throw new Error("missing channel labels property: "+i);if(o[i].labels.length!==o[i].channels)throw new Error("channel and label counts mismatch: "+i);var r=o[i].channels,s=o[i].labels;delete o[i].channels,delete o[i].labels,Object.defineProperty(o[i],"channels",{value:r}),Object.defineProperty(o[i],"labels",{value:s})}o.rgb.hsl=function(e){var t,a,n=e[0]/255,i=e[1]/255,r=e[2]/255,o=Math.min(n,i,r),s=Math.max(n,i,r),l=s-o;return s===o?t=0:n===s?t=(i-r)/l:i===s?t=2+(r-n)/l:r===s&&(t=4+(n-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),a=(o+s)/2,[t,100*(s===o?0:a<=.5?l/(s+o):l/(2-s-o)),100*a]},o.rgb.hsv=function(e){function t(e){return(c-e)/6/d+.5}var a,n,i,r,o,s=e[0]/255,l=e[1]/255,u=e[2]/255,c=Math.max(s,l,u),d=c-Math.min(s,l,u);return 0==d?r=o=0:(o=d/c,a=t(s),n=t(l),i=t(u),s===c?r=i-n:l===c?r=1/3+a-i:u===c&&(r=2/3+n-a),r<0?r+=1:1<r&&--r),[360*r,100*o,100*c]},o.rgb.hwb=function(e){var t=e[0],a=e[1],n=e[2];return[o.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(a,n))),100*(n=1-1/255*Math.max(t,Math.max(a,n)))]},o.rgb.cmyk=function(e){var t,a=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-a-(t=Math.min(1-a,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},o.rgb.keyword=function(e){var t=c[e];if(t)return t;var a,n,i,r=1/0;for(var o in u)if(u.hasOwnProperty(o)){var s=u[o],l=(n=e,i=s,Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)+Math.pow(n[2]-i[2],2));l<r&&(r=l,a=o)}return a},o.keyword.rgb=function(e){return u[e]},o.rgb.xyz=function(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255;return[100*(.4124*(t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(a=.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92)+.1805*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*a+.0722*n),100*(.0193*t+.1192*a+.9505*n)]},o.rgb.lab=function(e){var t=o.rgb.xyz(e),a=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,a=.008856<(a/=95.047)?Math.pow(a,1/3):7.787*a+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(a-n),200*(n-(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116))]},o.hsl.rgb=function(e){var t,a,n,i,r,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[r=255*l,r,r];t=2*l-(a=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(n=o+1/3*-(u-1))<0&&n++,1<n&&n--,r=6*n<1?t+6*(a-t)*n:2*n<1?a:3*n<2?t+(a-t)*(2/3-n)*6:t,i[u]=255*r;return i},o.hsl.hsv=function(e){var t=e[0],a=e[1]/100,n=e[2]/100,i=a,r=Math.max(n,.01);return a*=(n*=2)<=1?n:2-n,i*=r<=1?r:2-r,[t,100*(0===n?2*i/(r+i):2*a/(n+a)),100*((n+a)/2)]},o.hsv.rgb=function(e){var t=e[0]/60,a=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,r=t-Math.floor(t),o=255*n*(1-a),s=255*n*(1-a*r),l=255*n*(1-a*(1-r));switch(n*=255,i){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}},o.hsv.hsl=function(e){var t,a,n,i=e[0],r=e[1]/100,o=e[2]/100,s=Math.max(o,.01);return n=(2-r)*o,a=r*s,[i,100*(a=(a/=(t=(2-r)*s)<=1?t:2-t)||0),100*(n/=2)]},o.hwb.rgb=function(e){var t,a,n,i,r,o,s,l=e[0]/360,u=e[1]/100,c=e[2]/100,d=u+c;switch(1<d&&(u/=d,c/=d),n=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(n=1-n),i=u+n*((a=1-c)-u),t){default:case 6:case 0:r=a,o=i,s=u;break;case 1:r=i,o=a,s=u;break;case 2:r=u,o=a,s=i;break;case 3:r=u,o=i,s=a;break;case 4:r=i,o=u,s=a;break;case 5:r=a,o=u,s=i}return[255*r,255*o,255*s]},o.cmyk.rgb=function(e){var t=e[0]/100,a=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,a*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},o.xyz.rgb=function(e){var t,a,n,i=e[0]/100,r=e[1]/100,o=e[2]/100;return a=-.9689*i+1.8758*r+.0415*o,n=.0557*i+-.204*r+1.057*o,t=.0031308<(t=3.2406*i+-1.5372*r+-.4986*o)?1.055*Math.pow(t,1/2.4)-.055:12.92*t,a=.0031308<a?1.055*Math.pow(a,1/2.4)-.055:12.92*a,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(a=Math.min(Math.max(0,a),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(e){var t=e[0],a=e[1],n=e[2];return a/=100,n/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(a=.008856<a?Math.pow(a,1/3):7.787*a+16/116)-16,500*(t-a),200*(a-(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116))]},o.lab.xyz=function(e){var t,a,n,i=e[0];t=e[1]/500+(a=(i+16)/116),n=a-e[2]/200;var r=Math.pow(a,3),o=Math.pow(t,3),s=Math.pow(n,3);return a=.008856<r?r:(a-16/116)/7.787,t=.008856<o?o:(t-16/116)/7.787,n=.008856<s?s:(n-16/116)/7.787,[t*=95.047,a*=100,n*=108.883]},o.lab.lch=function(e){var t,a=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[a,Math.sqrt(n*n+i*i),t]},o.lch.lab=function(e){var t,a=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[a,n*Math.cos(t),n*Math.sin(t)]},o.rgb.ansi16=function(e){var t=e[0],a=e[1],n=e[2],i=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var r=30+(Math.round(n/255)<<2|Math.round(a/255)<<1|Math.round(t/255));return 2===i&&(r+=60),r},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var t=e[0],a=e[1],n=e[2];return t===a&&a===n?t<8?16:248<t?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(a/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return 50<e&&(t+=3.5),[t=t/10.5*255,t,t];var a=.5*(1+~~(50<e));return[(1&t)*a*255,(t>>1&1)*a*255,(t>>2&1)*a*255]},o.ansi256.rgb=function(e){if(232<=e){var t=10*(e-232)+8;return[t,t,t]}var a;return e-=16,[Math.floor(e/36)/5*255,Math.floor((a=e%36)/6)/5*255,a%6/5*255]},o.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var a=t[0];3===t[0].length&&(a=a.split("").map(function(e){return e+e}).join(""));var n=parseInt(a,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(e){var t,a=e[0]/255,n=e[1]/255,i=e[2]/255,r=Math.max(Math.max(a,n),i),o=Math.min(Math.min(a,n),i),s=r-o;return t=s<=0?0:r===a?(n-i)/s%6:r===n?2+(i-a)/s:4+(a-n)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?o/(1-s):0)]},o.hsl.hcg=function(e){var t=e[1]/100,a=e[2]/100,n=1,i=0;return(n=a<.5?2*t*a:2*t*(1-a))<1&&(i=(a-.5*n)/(1-n)),[e[0],100*n,100*i]},o.hsv.hcg=function(e){var t=e[1]/100,a=e[2]/100,n=t*a,i=0;return n<1&&(i=(a-n)/(1-n)),[e[0],100*n,100*i]},o.hcg.rgb=function(e){var t=e[0]/360,a=e[1]/100,n=e[2]/100;if(0==a)return[255*n,255*n,255*n];var i,r=[0,0,0],o=t%1*6,s=o%1,l=1-s;switch(Math.floor(o)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return i=(1-a)*n,[255*(a*r[0]+i),255*(a*r[1]+i),255*(a*r[2]+i)]},o.hcg.hsv=function(e){var t=e[1]/100,a=t+e[2]/100*(1-t),n=0;return 0<a&&(n=t/a),[e[0],100*n,100*a]},o.hcg.hsl=function(e){var t=e[1]/100,a=e[2]/100*(1-t)+.5*t,n=0;return 0<a&&a<.5?n=t/(2*a):.5<=a&&a<1&&(n=t/(2*(1-a))),[e[0],100*n,100*a]},o.hcg.hwb=function(e){var t=e[1]/100,a=t+e[2]/100*(1-t);return[e[0],100*(a-t),100*(1-a)]},o.hwb.hcg=function(e){var t=e[1]/100,a=1-e[2]/100,n=a-t,i=0;return n<1&&(i=(a-n)/(1-n)),[e[0],100*n,100*i]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),a=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(a.length)+a},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t){e.exports={common:{dateFormat:"DD/MM/YYYY"},error:{},tables:{},slicers:{dateRangeSlicer:{dataFormat:{date:"dd/mm/yyyy",second:"dd/mm/yyyy h:mm:ss"}}},editors:{parameterWrapper:{}},dialogs:{filter:{},jumpToDocuments:{},dataMonitor:{}},webContent:{},appBar:{},inspector:{properties:{charts:{series:{}}}},spreadChart:{},notifications:{}}},function(e,t){e.exports={common:{nullDisplay:"[]",emptyDisplay:"[]",showNullAs:"()",showEmptyAs:"()",currencyFormat:"#,##0.00",max:"",min:"",maxValue:"",minValue:"",infinity:"",negativeInfinity:"",NaN:"",on:"",off:"",yes:"",no:"",true:"",false:"",asc:"",desc:"",noSort:"",dateFormat:"YYYY/MM/DD",default:"",reload:"",builtIn:"",edit:"",others:"",groupFilter:"",exclude:""},components:{pivotTable:"",rawDataTable:"",kpiMatrix:"KPI ",webContent:"",embeddedReport:"",embeddedDashboard:"",container:"",tabContainer:"",image:"",richText:"",labelSlicer:"",treeSlicer:"",comboSlicer:"",dateRangeSlicer:"",relativeDateSlicer:"",dataRangeSlicer:"",group:"",devTools:""},patterns:{measures:{pattern:"{{measure}}{{aggregation}}",pattern_duplicated:"{{measure}}{{aggregation}}{{idx}}",nonePattern:"{{measure}}",nonePattern_duplicated:"{{measure}}{{idx}}"},calculations:{running:"",moving:"",pattern:"{{aggregation}}({{method}}{{calculation}})",pattern_duplicated:"{{aggregation}}({{method}}{{calculation}}){{idx}}",accounting:"",ranking:"",value:"",ratio:"",difference:"",percentDifference:""},chartTitle:{default:"",separator:"",connector:"  ",pattern:"{{measure}} ( {{dimension}}) "},datetime:{fiscalYearPattern:"{{year}}",quarter1:"",quarter2:"",quarter3:"",quarter4:"",parts:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:"",millisecond:""}},pageName:{namePattern:"{{number}}",namePattern_copy:"{{name}} - {{number}}",nameRegex:"^(\\d+)$",nameRegex_copy:"^{{name}} - (\\d+)$"},parameterName:{namePattern:"{{number}}",nameRegex:"^(\\d+)$"},container:{defaultTitle:"",tabTitleButton:" {{number}}",tabTitleRegex:"^ (\\d+)$"},tooltip:{selectedValue:" {{count}} ",selectedValue_plural:" {{count}} "},conditions:{between:" {{min}}  {{max}} ",notBetween:" {{min}}  {{max}} ",aboveMax:" {{right}}",belowMin:" {{right}}",aboveAverage:" {{right}}",belowAverage:" {{right}}"}},charts:{tooltip:{keep:"",exclude:"",drill:"",drillDown:"",drillDetail:"",drillDetailNoFilter:"()",drillRoot:"",drillClear:"",jump:"",noDimensionToDrill:"",expandHierarchy:"",collapseHierarchy:"",addMonitor:""},displayUnit:{none:"",e2:"",e3:"",e4:"",e5:"",e6:"",e7:"",e8:"",e9:"",e12:"",pattern:"{{unit}}"}},richText:{hint:"",expression:{title:"",loading:"...",noData:"-",preparing:"...",dataset:"",chooseField:"",field:"",noFilterHint:"",noConditionalFormatHint:"",addConditionalFormat:"",borderRadius:"",backgroundColor:"",textStyle:"",displayUnit:"",format:"",conditionalFormat:""},expressionVariable:{title:"",prompt:'user["name"], datasets["datasetName"].lastUpdated'},fontSize:{smaller:"",small:"",normal:"",large:"",larger:""},link:{title:"",url:"",targetPage:"",none:""},toolbar:{font:"",fontSize:"",bold:"",italic:"",underline:"",color:"",backgroundColor:"",numbering:"",bullets:"",decreaseIndent:"",increaseIndent:"",alignLeft:"",center:"",alignRight:"",subscript:"",superscript:"",strikeThrough:"",hyperlink:"",expression:"",parameter:"",noParameters:"",variable:""}},chartTypes:{column:"",rangeColumn:"",rangeBar:"",rangeArea:"",stackedColumn:"",percentStackedColumn:"",bar:"",stackedBar:"",percentStackedBar:"",line:"",area:"",stackedArea:"",percentStackedArea:"",pie:"",donut:"",rose:"",sunburst:"",barInPolar:"",stackedBarInPolar:"",radialStackedBar:"",radar:"",filledRadar:"",scatter:"",bubble:"",combined:"",map:"",treeMap:"",funnel:"",gauge:"",indicator:"",kpi:"KPI",card:"",floorPlan:"",pivotTable:"",spreadSource:"",multiSource:""},aggregationMethods:{sum:"",cnt:"",avg:"",max:"",min:"",dst:"()",none:"",list:"",fst:""},error:{noImage:"",noImageInRunTime:"",noData:"",getDatasetFailed:"",getDatasetNoAccess:"",loadGeoDataFailed:"",loadFloorPlanDataFailed:"",exportFailed:"",getTokenFailed:"",notSupportChangeChartType:"",draftIsBeingReviewed:{title:"",content:", "},loadVisualFailed:"",docWithoutAccess:{title:"",dashboard:"{{count}} ",dashboard_plural:"{{count}} ",report:"{{count}} ",report_plural:"{{count}} ",dataset:"{{count}} ",dataset_plural:"{{count}} ",dataModel:"{{count}} ",dataModel_plural:"{{count}} ",image:"{{count}} ",image_plural:"{{count}} ",mapData:"{{count}} ",mapHierarchy:"{{count}} ",mapHierarchy_plural:"{{count}} ",visualization:"{{count}} ",font:"{{count}} ",font_plural:"{{count}} ",floorPlan:"{{count}} ",theme:"{{count}} ",theme_plural:"{{count}} ",language:"{{count}} ",comma:"",content:""},shareResource:{ok:"",removeScenario:"",removeResourceInPage:"",docStatus:"",dashboard:"{{id}}",report:"{{id}}",dataset:"{{id}}",dataModel:"{{id}}",image:"{{id}}",mapData:"{{id}}",mapHierarchy:"{{id}}",visualization:"{{id}}",font:"{{id}}",floorPlan:"{{id}}",theme:"{{id}}",languageResource:" ({{id}}) ",unknown:"{{id}}",resourceNotFount:""},statusCode:{401:{title:"",content:""},403:{title:"",content:""},404:{title:"",content:" {{content}} "},500:{title:"",content:""}},errorCode:{2e5:{title:""},200001:{title:"Id"},200002:{title:"",contentHasName:"{{type}}'{{name}}'",contentNoName:"{{type}}"},200101:{title:"{{title}} - ",content:""},200102:{title:"",content:""},200103:{title:"",content:""},200104:{title:"",content:""},200201:{title:"",content:"{{type}}'{{name}}'"},200204:{title:"",content:""},200211:{title:"",content:""},200212:{title:"",content:" '{{datasetName}}'"},200213:{title:"",content:" '{{datasetName}}'"},200214:{title:"",content:" {{maxAggDataPoints}}"},200215:{title:"",content:" '{{property}}'"},200216:{title:"",content:" '{{property}}'"},200217:{title:"",content:" '{{parameter}}'  '{{dataType}}' "},200218:{title:"",content:" '{{parameter}}' "},200220:{title:""},200221:{title:""},200222:{title:""},200224:{title:"",content:" '{{datasetName}}'"},200225:{title:"",content:"SQL"},200226:{title:"",content:""},200227:{title:"",content:""},200228:{title:"",content:""},200229:{title:"",content:""},200301:{title:"",content:""},200302:{title:"",content:""},540001:{title:""},540002:{title:""},540008:{title:""},540009:{title:"{{name}} - ",content:""},540010:{title:"",content:""},600001:{title:'WAX"{{name}}"'}},devTools:{loadDefinitionError:""},multiSourceChart:{measureInGroup:{title:"",content:""}},NoSearchResult:"",saveDataMonitorFailed:""},tables:{grandTotal:"",subTotal:""},slicers:{filterPlaceholder:"",selectAll:"",search:"",clearSelection:"",sort:"",notSelected:"",startDate:"",endDate:"",value:"",showMore:"",selectParameter:"",AND:" > ",dateRangeSlicer:{dateMode:{title:"",date:"",year:"",yearQuarter:"-",yearMonth:"-",dateTime:""},rangeMode:{title:"",basic:"",startEnd:""},defaultValue:{title:"",dialogTitle:"",valueType:"",staticDate:"",relativeDate:"",quickDate:"",empty:"<>"},dataFormat:{title:"",year:"yyyy",quarter:"yyyy qq",month:"yyyy/mm",date:"yyyy/mm/dd",second:"yyyy/mm/dd h:mm:ss",auto:""},placeholder:{dateTitle:"",dateDefault:"",startTitle:"",startDefault:"",endTitle:"",endDefault:""},allowClear:"",quickRanges:{show:"",title:"",dialogTitle:"",empty:"",custom:""},ok:""},relativeDateSlicer:{Q1:"",Q2:"",Q3:"",Q4:"",none:"",custom:"",addRelativeDate:"",itemName:""}},editors:{relativeDateEditor:{this:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:"",anchor:"{{unit}}"},previous:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:""},next:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:""},toDate:{toDate:"{{unit}}",toNow:"{{unit}}",toAnchorDate:"{{unit}}",toAnchorTime:"{{unit}}"},unit:{year:"",year_plural:"",quarter:"",quarter_plural:"",month:"",month_plural:"",week:"",week_plural:"",day:"",day_plural:"",hour:"",hour_plural:"",minute:"",minute_plural:"",second:"",second_plural:""},lastOrNext:{last:" {{count}} {{unit}}",next:" {{count}} {{unit}}"},offset:{addOffset:"",withOffset:" {{count}} {{unit}}"},lastN:"",nextN:"",year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:"",anchorRelativeTo:""},parameterWrapper:{useCustomValue:""}},dialogs:{filter:{dateUnit:"",selectAll:""},jumpToDocuments:{backFrom:""},common:{apply:"",reset:"",yes:"",no:"",ok:"",cancel:"",close:"",deleteAll:""},dataMonitor:{title:""}},webContent:{emptyInRunTime:""},actionBar:{filter:"",modelParameters:"",sort:"",swapRowsAndCols:"",rank:"",changeChartType:"",changePivotSetting:"",conditionalFormat:"",referenceLine:"",showData:"",hideData:"",clearCustomData:"",expand:"",shrink:"",focus:"",exitFocus:"",selectMap:"",edit:"",remove:"",moreActions:"",enableCrossFilter:"",disableCrossFilter:"",trendLine:"",export:"",addAnnotation:"",editAnnotation:"",annotation:"",selectFloorPlan:"",clearRuntimeFilters:"",refreshDefinition:"",shareScenario:"",openFullDashboard:"",clearSelection:"",analysisPath:"",mergeDatasets:"",contentSetting:"",hideThisComponent:""},appBar:{pageBack:""},inspector:{properties:{charts:{series:{defaultDisplay:""}}}},spreadChart:{rowsPattern:"{{index}}",columnsPattern:"{{index}}",values:""},notifications:{dashboardSaving:"",dashboardSaved:"!",dismiss:"",dismissAll:"",showAll:"",showDetails:"",infoCategory:"",warningCategory:"",errorCategory:"",expandTitle:"",collapseTitle:"",promptUsingMobileView:{title:"",content:""},dataMonitorSaved:"!"},documentType:{Unknown:"",Dashboard:"",Dataset:"",DataSource:"",Image:"",Theme:"",MapHierarchy:"",GeoJson:"",Report:"",FloorPlan:"",AnalysisModel:"",Visual:""},dataBindingPanel:{chooseDataset:"",loadingDatasetList:"...",loadDatasetListFailed:"",searchField:"...",measures:"",dimensions:"",bindingHint:"",values:"",lower:"",upper:"",leftValue:"",rightValue:"",axis:"",axis_x:"X ",axis_y:"Y ",legend:"",category:"",details:"",rows:"",columns:"",location:"",longtitude:"",latitude:"",layers:"",mapTiles:"",color:"",size:"",shape:"",scatter:"",trellisRows:"",trellisColumns:"",tooltip:"",mainValue:"",comparisonValue:"",forecastValue:"",imageSource:"",pivotSettingHint:"",pivotSettingHintRunTime:" + ",aggregationMethod:"",editName:"",editFormat:"",deleteFormat:"",createHierarchy:"",editHierarchy:"",deleteHierarchy:"",editNameHierarchyItem:"",deleteHierarchyItem:"",exactDate:"",ymd:"//",yq:"/",ym:"/",yw:"/",runningCalculation:"",movingCalculation:"",origin:"",addMoMCalculation:"",addYoYCalculation:"",accountingCalculation:"",rankingCalculation:"",addAccountingCalculation:"",addRankingCalculation:"",totalRanking:"",groupRanking:"",totalAccounting:"",groupAccounting:"",dateCalcualtionHint:"",advanced:"",filter:"",value:"",ratio:"",difference:"",percentDifference:"",slicerColumn:"",search:"...",seriesAxisLabel:"",seriesAxis:{both:"",left:"",right:""},quickFunction:"",pastValue:"",pastYear:"",pastQuarter:"",pastMonth:"",pastWeek:"",changeOverTime:"-",growthRate:"",fromPreviousPeriod:"",fromSamePeriodPreviousYear:"()",fromSamePeriodPreviousQuarter:"()",fromSamePeriodPreviousMonth:"()",fromSamePeriodPreviousWeek:"()",fromSamePeriodPreviousYearPercent:"()",fromSamePeriodPreviousQuarterPercent:"()",fromSamePeriodPreviousMonthPercent:"()",fromSamePeriodPreviousWeekPercent:"()",changeOverTimePercent:"-",dateBasedFunctions:"",growth:"",singleValue:"",Image:"",bulletGraph:"",paretoGraph:"",hBarGraph:"",diagram:"",trend:"",bar:"",area:"",winLoss:"",number:"",editText:"",alignmentSetting:"",sparklineSetting:"",moveUp:"",moveDown:"",collapse:"",expand:"",floorPlanArea:"",floorPlanColor:"",renderSetting:"...",multiDimensions:"",parentChild:"",pid:"",id:"",hierarchy:"",display:"",rootId:"",separator:"",separatorEG:'"-", ","  " "',missMatchedNode:"",addToRoot:"",ignore:"",separateType:"",length:"",pivotSettingItemTitlePattern:"{{ itemDisplay }}  `{{ entityName }}`",displayTimezone:"",displayUTC:"UTC",displayLocal:"",attribute:"",customMeasure:"",calculatedColumn:"",dataModelCustomMeasure:"",dataModelCalculatedColumn:"",invalidColumn:{conflict:""}}}},function(e,t){e.exports={common:{nullDisplay:"[]",emptyDisplay:"[]",showNullAs:"()",showEmptyAs:"()",currencyFormat:"#,##0.00",max:"",min:"",maxValue:"",minValue:"",infinity:"",negativeInfinity:"",NaN:"",on:"",off:"",yes:"",no:"",true:"",false:"",asc:"",desc:"",noSort:"",dateFormat:"YYYY/MM/DD",default:"",reload:"",builtIn:"",edit:"",others:"",groupFilter:"",exclude:""},components:{pivotTable:"",rawDataTable:"",kpiMatrix:"KPI ",webContent:"",embeddedReport:"",embeddedDashboard:"",container:"",tabContainer:"",image:"",richText:"",labelSlicer:"",treeSlicer:"",comboSlicer:"",dateRangeSlicer:"",relativeDateSlicer:"",dataRangeSlicer:"",group:"",devTools:""},patterns:{measures:{pattern:"{{measure}}{{aggregation}}",pattern_duplicated:"{{measure}}{{aggregation}}{{idx}}",nonePattern:"{{measure}}",nonePattern_duplicated:"{{measure}}{{idx}}"},calculations:{running:"",moving:"",pattern:"{{aggregation}}({{method}}{{calculation}})",pattern_duplicated:"{{aggregation}}({{method}}{{calculation}}){{idx}}",accounting:"",ranking:"",value:"",ratio:"",difference:"",percentDifference:""},chartTitle:{default:"",separator:"",connector:"  ",pattern:"{{measure}} ( {{dimension}}) "},datetime:{fiscalYearPattern:"{{year}}",quarter1:"",quarter2:"",quarter3:"",quarter4:"",parts:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:"",millisecond:""}},pageName:{namePattern:"{{number}}",namePattern_copy:"{{name}} - {{number}}",nameRegex:"^(\\d+)$",nameRegex_copy:"^{{name}} - (\\d+)$"},parameterName:{namePattern:"{{number}}",nameRegex:"^(\\d+)$"},container:{defaultTitle:"",tabTitleButton:" {{number}}",tabTitleRegex:"^ (\\d+)$"},tooltip:{selectedValue:" {{count}} ",selectedValue_plural:" {{count}} "},conditions:{between:" {{min}}  {{max}} ",notBetween:" {{min}}  {{max}} ",aboveMax:" {{right}}",belowMin:" {{right}}",aboveAverage:" {{right}}",belowAverage:" {{right}}"}},charts:{tooltip:{keep:"",exclude:"",drill:"",drillDown:"",drillDetail:"",drillDetailNoFilter:"()",drillRoot:"",drillClear:"",jump:"",noDimensionToDrill:"",expandHierarchy:"",collapseHierarchy:"",addMonitor:""},displayUnit:{none:"",e2:"",e3:"",e4:"",e5:"",e6:"",e7:"",e8:"",e9:"",e12:"",pattern:"{{unit}}"}},richText:{hint:"",expression:{title:"",loading:"...",noData:"-",preparing:"...",dataset:"",chooseField:"",field:"",noFilterHint:"",noConditionalFormatHint:"",addConditionalFormat:"",borderRadius:"",backgroundColor:"",textStyle:"",displayUnit:"",format:"",conditionalFormat:""},expressionVariable:{title:"",prompt:'user["name"], datasets["datasetName"].lastUpdated'},fontSize:{smaller:"",small:"",normal:"",large:"",larger:""},link:{title:"",url:"",targetPage:"",none:""},toolbar:{font:"",fontSize:"",bold:"",italic:"",underline:"",color:"",backgroundColor:"",numbering:"",bullets:"",decreaseIndent:"",increaseIndent:"",alignLeft:"",center:"",alignRight:"",subscript:"",superscript:"",strikeThrough:"",hyperlink:"",expression:"",parameter:"",noParameters:"",variable:""}},chartTypes:{column:"",rangeColumn:"",rangeBar:"",rangeArea:"",stackedColumn:"",percentStackedColumn:"",bar:"",stackedBar:"",percentStackedBar:"",line:"",area:"",stackedArea:"",percentStackedArea:"",pie:"",donut:"",rose:"",sunburst:"",barInPolar:"",stackedBarInPolar:"",radialStackedBar:"",radar:"",filledRadar:"",scatter:"",bubble:"",combined:"",map:"",treeMap:"",funnel:"",gauge:"",indicator:"",kpi:"KPI",card:"",floorPlan:"",pivotTable:"",spreadSource:"",multiSource:""},aggregationMethods:{sum:"",cnt:"",avg:"",max:"",min:"",dst:"()",none:"",list:"",fst:""},error:{noImage:"",noImageInRunTime:"",noData:"",getDatasetFailed:"",getDatasetNoAccess:"",loadGeoDataFailed:"",loadFloorPlanDataFailed:"",exportFailed:"",getTokenFailed:"",notSupportChangeChartType:"",draftIsBeingReviewed:{title:"",content:", "},loadVisualFailed:"",docWithoutAccess:{title:"",dashboard:"{{count}} ",dashboard_plural:"{{count}} ",report:"{{count}} ",report_plural:"{{count}} ",dataset:"{{count}} ",dataset_plural:"{{count}} ",dataModel:"{{count}} ",dataModel_plural:"{{count}} ",image:"{{count}} ",image_plural:"{{count}} ",mapData:"{{count}} ",mapHierarchy:"{{count}} ",mapHierarchy_plural:"{{count}} ",visualization:"{{count}} ",font:"{{count}} ",font_plural:"{{count}} ",floorPlan:"{{count}} ",theme:"{{count}} ",theme_plural:"{{count}} ",language:"{{count}} ",comma:"",content:""},shareResource:{ok:"",removeScenario:"",removeResourceInPage:"",docStatus:"",dashboard:"{{id}}",report:"{{id}}",dataset:"{{id}}",dataModel:"{{id}}",image:"{{id}}",mapData:"{{id}}",mapHierarchy:"{{id}}",visualization:"{{id}}",font:"{{id}}",floorPlan:"{{id}}",theme:"{{id}}",languageResource:" ({{id}}) ",unknown:"{{id}}",resourceNotFount:""},statusCode:{401:{title:"",content:" "},403:{title:"",content:" "},404:{title:"",content:" {{content}}  "},500:{title:"",content:""}},errorCode:{2e5:{title:""},200001:{title:"Id"},200002:{title:"",contentHasName:"{{type}}'{{name}}'",contentNoName:"{{type}}"},200101:{title:"{{title}} - ",content:" "},200102:{title:"",content:" "},200103:{title:"",content:""},200104:{title:"",content:""},200201:{title:"",content:"{{type}}'{{name}}' "},200204:{title:"",content:" "},200211:{title:"",content:""},200212:{title:"",content:" '{{datasetName}}'"},200213:{title:"",content:" '{{datasetName}}'"},200214:{title:"",content:" {{maxAggDataPoints}}"},200215:{title:"",content:" '{{property}}'"},200216:{title:"",content:" '{{property}}'"},200217:{title:"",content:" '{{parameter}}'  '{{dataType}}' "},200218:{title:"",content:" '{{parameter}}' "},200220:{title:""},200221:{title:""},200222:{title:""},200224:{title:"",content:" '{{datasetName}}'"},200225:{title:"",content:"SQL"},200226:{title:"",content:""},200227:{title:"",content:""},200228:{title:"",content:""},200229:{title:"",content:""},200301:{title:"",content:""},200302:{title:"",content:""},540001:{title:""},540002:{title:""},540008:{title:""},540009:{title:"{{name}} - ",content:""},540010:{title:"",content:""},600001:{title:'WAX"{{name}}"'}},devTools:{loadDefinitionError:""},multiSourceChart:{measureInGroup:{title:"",content:""}},NoSearchResult:"",saveDataMonitorFailed:""},tables:{grandTotal:"",subTotal:""},slicers:{filterPlaceholder:"",selectAll:"",search:"",clearSelection:"",sort:"",notSelected:"",startDate:"",endDate:"",value:"",showMore:"",selectParameter:"",AND:" > ",dateRangeSlicer:{dateMode:{title:"",date:"",year:"",yearQuarter:"-",yearMonth:"-",dateTime:""},rangeMode:{title:"",basic:"",startEnd:""},defaultValue:{title:"",dialogTitle:"",valueType:"",staticDate:"",relativeDate:"",quickDate:"",empty:"<>"},dataFormat:{title:"",year:"yyyy",quarter:"yyyy qq",month:"yyyy/mm",date:"yyyy/mm/dd",second:"yyyy/mm/dd h:mm:ss",auto:""},placeholder:{dateTitle:"",dateDefault:"",startTitle:"",startDefault:"",endTitle:"",endDefault:""},allowClear:"",quickRanges:{show:"",title:"",dialogTitle:"",empty:"",custom:""},ok:""},relativeDateSlicer:{Q1:"",Q2:"",Q3:"",Q4:"",none:"",custom:"",addRelativeDate:"",itemName:""}},editors:{relativeDateEditor:{this:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:"",anchor:"{{unit}}"},previous:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:""},next:{year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:""},toDate:{toDate:"{{unit}}",toNow:"{{unit}}",toAnchorDate:"{{unit}}",toAnchorTime:"{{unit}}"},unit:{year:"",year_plural:"",quarter:"",quarter_plural:"",month:"",month_plural:"",week:"",week_plural:"",day:"",day_plural:"",hour:"",hour_plural:"",minute:"",minute_plural:"",second:"",second_plural:""},lastOrNext:{last:" {{count}} {{unit}}",next:" {{count}} {{unit}}"},offset:{addOffset:"",withOffset:" {{count}} {{unit}}"},lastN:"",nextN:"",year:"",quarter:"",month:"",week:"",day:"",hour:"",minute:"",second:"",anchorRelativeTo:""},parameterWrapper:{useCustomValue:""}},dialogs:{filter:{dateUnit:"",selectAll:""},jumpToDocuments:{backFrom:""},common:{apply:"",reset:"",yes:"",no:"",ok:"",cancel:"",close:"",deleteAll:""},dataMonitor:{title:""}},webContent:{emptyInRunTime:""},actionBar:{filter:"",modelParameters:"",sort:"",swapRowsAndCols:"",rank:"",changeChartType:"",changePivotSetting:"",conditionalFormat:"",referenceLine:"",showData:"",hideData:"",clearCustomData:"",expand:"",shrink:"",focus:"",exitFocus:"",selectMap:"",edit:"",remove:"",moreActions:"",enableCrossFilter:"",disableCrossFilter:"",trendLine:"",export:"",addAnnotation:"",editAnnotation:"",annotation:"",selectFloorPlan:"",clearRuntimeFilters:"",refreshDefinition:"",shareScenario:"",openFullDashboard:"",clearSelection:"",analysisPath:"",mergeDatasets:"",contentSetting:"",hideThisComponent:""},appBar:{pageBack:""},inspector:{properties:{charts:{series:{defaultDisplay:""}}}},spreadChart:{rowsPattern:"{{index}}",columnsPattern:"{{index}}",values:""},notifications:{dashboardSaving:"",dashboardSaved:"!",dismiss:"",dismissAll:"",showAll:"",showDetails:"",infoCategory:"",warningCategory:"",errorCategory:"",expandTitle:"",collapseTitle:"",promptUsingMobileView:{title:"",content:" "},dataMonitorSaved:"!"},documentType:{Unknown:"",Dashboard:"",Dataset:"",DataSource:"",Image:"",Theme:"",MapHierarchy:"",GeoJson:"",Report:"",FloorPlan:"",AnalysisModel:"",Visual:""},dataBindingPanel:{chooseDataset:"",loadingDatasetList:"...",loadDatasetListFailed:" ",searchField:"...",measures:"",dimensions:"",bindingHint:"",values:"",lower:"",upper:"",leftValue:"",rightValue:"",axis:"",axis_x:"X ",axis_y:"Y ",legend:"",category:"",details:"",rows:"",columns:"",location:"",longtitude:"",latitude:"",layers:"",mapTiles:"",color:"",size:"",shape:"",scatter:"",trellisRows:"",trellisColumns:"",tooltip:"",mainValue:"",comparisonValue:"",forecastValue:"",imageSource:"",pivotSettingHint:"",pivotSettingHintRunTime:" + ",aggregationMethod:"",editName:"",editFormat:"",deleteFormat:"",createHierarchy:"",editHierarchy:"",deleteHierarchy:"",editNameHierarchyItem:"",deleteHierarchyItem:"",exactDate:"",ymd:"//",yq:"/",ym:"/",yw:"/",runningCalculation:"",movingCalculation:"",origin:"",addMoMCalculation:"",addYoYCalculation:"",accountingCalculation:"",rankingCalculation:"",addAccountingCalculation:"",addRankingCalculation:"",totalRanking:"",groupRanking:"",totalAccounting:"",groupAccounting:"",dateCalcualtionHint:"",advanced:"",filter:"",value:"",ratio:"",difference:"",percentDifference:"",slicerColumn:"",search:"...",seriesAxisLabel:"",seriesAxis:{both:"",left:"",right:""},quickFunction:"",pastValue:"",pastYear:"",pastQuarter:"",pastMonth:"",pastWeek:"",changeOverTime:"-",growthRate:"",fromPreviousPeriod:"",fromSamePeriodPreviousYear:"()",fromSamePeriodPreviousQuarter:"()",fromSamePeriodPreviousMonth:"()",fromSamePeriodPreviousWeek:"()",fromSamePeriodPreviousYearPercent:"()",fromSamePeriodPreviousQuarterPercent:"()",fromSamePeriodPreviousMonthPercent:"()",fromSamePeriodPreviousWeekPercent:"()",changeOverTimePercent:"-",dateBasedFunctions:"",growth:"",singleValue:"",Image:"",bulletGraph:"",paretoGraph:"",hBarGraph:"",diagram:"",trend:"",bar:"",area:"",winLoss:"",number:"",editText:"",alignmentSetting:"",sparklineSetting:"",moveUp:"",moveDown:"",collapse:"",expand:"",floorPlanArea:"",floorPlanColor:"",renderSetting:"...",multiDimensions:"",parentChild:"",pid:"",id:"",hierarchy:"",display:"",rootId:"",separator:"",separatorEG:'"-", ","  " "',missMatchedNode:"",addToRoot:"",ignore:"",separateType:"",length:"",pivotSettingItemTitlePattern:"{{ itemDisplay }} from `{{ entityName }}`",displayTimezone:"",displayUTC:"UTC",displayLocal:"",attribute:"",customMeasure:"",calculatedColumn:"",dataModelCustomMeasure:"",dataModelCalculatedColumn:"",invalidColumn:{conflict:""}}}},function(e,t){e.exports={common:{nullDisplay:"[NULL]",emptyDisplay:"[Pusty]",showNullAs:"[NULL]",showEmptyAs:"[Blank]",currencyFormat:"$#,##0.00",max:"Max",min:"Min",maxValue:"Maksymalna warto",minValue:"Minimalna warto",infinity:"Nieskoczono",negativeInfinity:"-Nieskoczono",NaN:"To nie jest liczba",on:"Wcz",off:"Wycz",yes:"Tak",no:"Nie",true:"Prawda",false:"Fasz",asc:"Rosnco",desc:"Malejco",noSort:"Nie sortuj",dateFormat:"MM/DD/YYYY",default:"Domylny",reload:"Przeaduj",builtIn:"Wbudowany",edit:"Edytuj",others:"Inne",groupFilter:"Group Filter",exclude:"Exclude"},components:{pivotTable:"Pivot Table",rawDataTable:"Tabela danych",kpiMatrix:"Macierz KPI",webContent:"Wbudowana zawarto internetowa",embeddedReport:"Wbudowany raport",embeddedDashboard:"Wbudowany dashboard",container:"Kontener",tabContainer:"Pojemnik kontenerowy",image:"Obraz",richText:"Tekst sformatowany",labelSlicer:"Fragmentator etykiet",treeSlicer:"Wielowymiarowa fragmentator",comboSlicer:"Wielowymiarowy fragmentator listy rozwijanej",dateRangeSlicer:"Fragmentator zakresu dat",relativeDateSlicer:"Fragmentator dat wzgldnych",dataRangeSlicer:"Fragmentator zakresu danych",group:"Grupa",devTools:"Narzdzia deweloperskie"},patterns:{measures:{pattern:"{{aggregation}} z {{measure}}",pattern_duplicated:"{{aggregation}} z {{measure}} ({{idx}})",nonePattern:"{{measure}}",nonePattern_duplicated:"{{measure}} ({{idx}})"},calculations:{running:"Uruchomiona",moving:"Przenoszenie",pattern:"{{method}} {{calculation}} na {{aggregation}}",pattern_duplicated:"{{method}} {{calculation}} na {{aggregation}} ({{idx}})",accounting:"Percentyl",ranking:"Ranking",value:"Warto",ratio:"Wspczynnik",difference:"Rnica",percentDifference:"Rnica procentowa"},chartTitle:{default:"Wykres",separator:", ",connector:" i ",pattern:"{{measure}} wedug {{dimension}}"},datetime:{fiscalYearPattern:"Rok fiskalny {{year}}",quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",parts:{year:"Rok",quarter:"Kwarta",month:"Miesic",week:"Tydzie",day:"Dzie",hour:"Godzina",minute:"Minuta",second:"Sekunda",millisecond:"Milisekunda"}},pageName:{namePattern:"Strona {{number}}",namePattern_copy:"{{name}} - Kopia {{number}}",nameRegex:"^Strona (\\d+)$",nameRegex_copy:"^{{name}} - Kopia (\\d+)$"},parameterName:{namePattern:"Parametr{{number}}",nameRegex:"^Parametr(\\d+)$"},container:{defaultTitle:"Kontener",tabTitleButton:"Etykieta {{number}}",tabTitleRegex:"^Etykieta (\\d+)$"},tooltip:{selectedValue:"{{count}} wybrana warto",selectedValue_plural:"{{count}} wybrane wartoci"},conditions:{between:" Pomidzy {{min}} i {{max}}",notBetween:" Nie pomidzy {{min}} i {{max}}",aboveMax:" Wikszy ni maks {{right}}",belowMin:" Mniej ni min {{right}}",aboveAverage:" Wikszy ni rednia {{right}}",belowAverage:" Mniej ni rednia {{right}}"}},charts:{tooltip:{keep:"Trzymaj",exclude:"Wyklucz",drill:"Przejd niej",drillDown:"Przejd niej",drillDetail:"Przejd do szczegw",drillDetailNoFilter:"(Brak filtra)",drillRoot:"Katalog domowy",drillClear:"Wyczy elementy wiercenia",jump:"Skocz",noDimensionToDrill:"Brak wymiaru do wiercenia",expandHierarchy:"Rozwi grupy",collapseHierarchy:"Zwi grupy",addMonitor:"Add Data Monitoring"},displayUnit:{none:"adne",e2:"Setki",e3:"K",e4:"10K",e5:"100K",e6:"Mln",e7:"10M",e8:"100M",e9:"Mld",e12:"Bil",pattern:"({{unit}})"}},richText:{hint:"Komponent tekstu sformatowanego jest teraz pusty. Kliknij przycisk edycji w prawym grnym rogu, aby doda tre.",expression:{title:"Agregacja",loading:"{adowanie...}",noData:"-",preparing:"{przygotowywanie...}",dataset:"Zbir danych",chooseField:"Wybierz pole",field:"Pole",noFilterHint:"There is no filter.",noConditionalFormatHint:"There is no conditional format.",addConditionalFormat:"Add",borderRadius:"Border Radius",backgroundColor:"Background Color",textStyle:"Text Style",displayUnit:"Wywietlacz",format:"Format",conditionalFormat:"Conditional Format"},expressionVariable:{title:"Zmienna kontekstowa",prompt:'Wskazwka: wprowad pojedyncz zmienn kontekstow tak jak zestawy user["name"], datasets["datasetName"].lastUpdated.'},fontSize:{smaller:"Mniejszy",small:"May",normal:"Normalny",large:"Duy",larger:"Wikszy"},link:{title:"Ustawienia linku",url:"Url",targetPage:"Strona docelowa",none:"Brak"},toolbar:{font:"Font",fontSize:"Font Size",bold:"Bold",italic:"Italic",underline:"Underline",color:"Font Color",backgroundColor:"Background Color",numbering:"Numbering",bullets:"Bullets",decreaseIndent:"Decrease Indent",increaseIndent:"Increase Indent",alignLeft:"Align Left",center:"Center",alignRight:"Align Right",subscript:"Subscript",superscript:"Superscript",strikeThrough:"Strike Through",hyperlink:"Insert Jump",expression:"Insert Data Aggregation",parameter:"Insert Parameter",noParameters:"No Parameters",variable:"Insert Variable"}},chartTypes:{column:"Wykres kolumnowy",rangeColumn:"Wykres kolumnowy zakresu",rangeBar:"Wykres supkowy zakresu",rangeArea:"Wykres warstwowy zakresu",stackedColumn:"Skumulowany wykres kolumnowy",percentStackedColumn:"Procentowy skumulowany wykres kolumnowy",bar:"Wykres supkowy",stackedBar:"Skumulowany wykres supkowy",percentStackedBar:"Procentowy skumulowany wykres supkowy",line:"Wykres liniowy",area:"Wykres warstwowy",stackedArea:"Skumulowany wykres warstwowy",percentStackedArea:"Skumulowany procentowy wykres warstwowy",pie:"Wykres koowy",donut:"Wykres piercieniowy",rose:"Wykres rany",sunburst:"Wykres Sunburst",barInPolar:"Wykres supkowy we wsprzdnych biegunowych",stackedBarInPolar:"Skumulowany wykres supkowy we wsprzdnych biegunowych",radialStackedBar:"Wykres supkowy skumulowany promieniowy",radar:"Wykres radarowy",filledRadar:"Wypeniony wykres radarowy",scatter:"Rozproszony",bubble:"Wykres bbelkowy",combined:"Schemat czony",map:"Mapa",treeMap:"Mapa drzewa",funnel:"Lejek",gauge:"Miernik",indicator:"Wskanik",kpi:"Wykres KPI",card:"Card Chart",floorPlan:"Plan budynku",pivotTable:"Pivot Table",spreadSource:"Wykres rozproszony",multiSource:"Wykres wielordowy"},aggregationMethods:{sum:"Sum",cnt:"Count",avg:"Average",max:"Max",min:"Min",dst:"Distinct Count",none:"None",list:"List",fst:"First"},error:{noImage:"Brak obrazu",noImageInRunTime:"Brak obrazu",noData:"Nie znaleziono danych",getDatasetFailed:"Nie udao si pobra danych!",getDatasetNoAccess:"Brak wymaganych uprawnie do pobierania danych!",loadGeoDataFailed:"Nie udao si zaadowa danych geograficznych!",loadFloorPlanDataFailed:"Nie udao si wczyta danych planu pitra!",exportFailed:"Nie udao si wyeksportowa.",getTokenFailed:"Nie udao si uzyska tokena.",notSupportChangeChartType:"Komponent wizualizacji nie obsuguje zmiany typu wykresu!",draftIsBeingReviewed:{title:"Draft Is Being Reviewed",content:"The draft of document is being reviewed. It can't be modified."},loadVisualFailed:"Nie udao si zaadowa wizualizacji",docWithoutAccess:{title:"Niektre uywane dokumenty bez dostpu lub nie znalezione.",dashboard:"{{count}} Dashboard",dashboard_plural:"{{count}} Dashboardy",report:"{{count}} Raport",report_plural:"{{count}} Raporty",dataset:"{{count}} Zestaw danych",dataset_plural:"{{count}} Zestawy danych",dataModel:"{{count}} Model danych",dataModel_plural:"{{count}} Modele danych",image:"{{count}} Obraz",image_plural:"{{count}} Obrazy",mapData:"{{count}} Mapa danych",mapHierarchy:"{{count}} Mapa hierarchii",mapHierarchy_plural:"{{count}} Map/y hierarchii",visualization:"{{count}} Wizualizacja",font:"{{count}} Czcionka",font_plural:"{{count}} Czcionki",floorPlan:"{{count}} Plan budynku",theme:"{{count}} Motyw",theme_plural:"{{count}} Motywy",language:"{{count}} Language Resources",comma:", ",content:" bez dostpu."},shareResource:{ok:"Every resource can be accessed!",removeScenario:"Remove",removeResourceInPage:"Reset the broken share resource in page.",docStatus:"Dashboard Status",dashboard:"Dashboard ({{id}}) is unavailable.",report:"Report ({{id}}) is unavailable.",dataset:"Dataset ({{id}}) is unavailable.",dataModel:"Data Model ({{id}}) is unavailable.",image:"Image ({{id}}) is unavailable.",mapData:"Map Data ({{id}}) is unavailable.",mapHierarchy:"Map Hierarchy ({{id}}) is unavailable.",visualization:"Visualization ({{id}}) is unavailable.",font:"Font ({{id}}) is unavailable.",floorPlan:"Floor Plan ({{id}}) is unavailable.",theme:"Theme ({{id}}) is unavailable.",languageResource:"Language Resource ({{id}}) is unavailable.",unknown:"Unknown ({{id}}) is unavailable.",resourceNotFount:"Resource Not Found"},statusCode:{401:{title:"Brak autoryzacji",content:"Twoje dane logowania s nieprawidowe lub wygasy. Sprbuj ponownie zaadowa stron lub zalogowa si ponownie."},403:{title:"Zakaz",content:"Nie masz wymaganych uprawnie, aby uzyska dostp do zasobu."},404:{title:"Nie znaleziono",content:"{{content}} nie zosta znaleziony."},500:{title:"Wewntrzny bd serwera",content:""}},errorCode:{2e5:{title:"Nieznany bd"},200001:{title:"Nieprawidowy parametr: Id"},200002:{title:"Nie znaleziono dokumentu",contentHasName:"Nie mona znale dokumentu {{type}} '{{name}}'.",contentNoName:"Nie mona znale dokumentu {{type}}, do ktrego si odwouje."},200101:{title:"{{title}} - Dashboard istnieje",content:"Ju istnieje dashboard z tak nazw"},200102:{title:"Przekroczono liczb dokumentw",content:"Liczba pulpitw nawigacyjnych osigna limit licencji."},200103:{title:"Document Pending Approval",content:"The document is pending approval."},200104:{title:"Draft Disabled",content:"The document draft has been disabled."},200201:{title:"Odmowa dostpu do dokumentu",content:"Nie masz wymaganych uprawnie, aby uzyska dostp do dokumentu {{type}} '{{name}}'."},200204:{title:"Przekroczono zagregowane punkty danych",content:"Liczba zagregowanych punktw danych przekracza ustawiony limit."},200211:{title:"Pobieranie danych zbioru danych nie powiodo si",content:"Biecy uytkownik musi nalee do dedykowanej organizacji, aby uzyska dostp do pamici podrcznej zestawu danych zestawu danych z wieloma dzierawcami"},200212:{title:"Pami podrczna zestawu danych jest niedostpna",content:"Odwie pami podrczn zbioru danych '{{datasetName}}'."},200213:{title:"Pami podrczna zestawu danych jest niedostpna",content:"Odwie pami podrczn zbioru danych '{{datasetName}}'."},200214:{title:"Przekroczono zagregowan liczb punktw danych",content:"Liczba zagregowanych punktw danych przekracza limit {{maxAggDataPoints}}."},200215:{title:"Niewystarczajca warto kontekstu",content:"Okrelona waciwo '{{property}}' nie zostaa znaleziona w kontekcie biecego uytkownika."},200216:{title:"Niewystarczajca warto kontekstu",content:"Okrelona waciwo '{{property}}' nie zostaa znaleziona w biecym kontekcie organizacji."},200217:{title:"Niewystarczajca warto kontekstu",content:"Dosowna warto parametru kontekstu '{{parametr}}' nie moe zosta przekonwertowana na typ '{{dataType}}'."},200218:{title:"Niewystarczajca warto kontekstu",content:"Warto parametru kontekstu '{{parametr}}' jest nullem lub pusta."},200220:{title:"Zapytanie o dane nie powiodo si"},200221:{title:"Zapytanie o dane nie powiodo si"},200222:{title:"Zapytanie o dane nie powiodo si"},200224:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200225:{title:"Query Data Failed",content:"Failed to generate SQL statement for analysis database."},200226:{title:"Query Data Failed",content:"Failed to open connection against analysis database."},200227:{title:"Query Data Failed",content:"Failed to execute command against analysis database."},200228:{title:"Query Data Failed",content:"Access denied on referenced datasource."},200229:{title:"Query Data Failed",content:"Referenced data source not found."},200301:{title:"Load Dataset Failed",content:"Failed to load the dataset, please contact the administrator or dataset author for help."},200302:{title:"No Available Cache",content:"Failed to generate dataset cache."},540001:{title:"Failed to Add Data Monitoring"},540002:{title:"No Enough Permissions to Create Data Monitoring"},540008:{title:"Data Monitoring License is Expired"},540009:{title:"{{name}} - already exists",content:"There is already a data monitoring with same name."},540010:{title:"Portal Uri is Empty",content:"Portal Uri is required. Please contact the Administrator."},600001:{title:'Invalid parameter "{{name}}" in WAX'}},devTools:{loadDefinitionError:"Nie udao si zaadowa wizualizacji"},multiSourceChart:{measureInGroup:{title:"Operacja zabroniona",content:"Nie dodawaj pola miary do roli grupujcej!"}},NoSearchResult:"Nic nie znaleziono!",saveDataMonitorFailed:"Save data monitoring failed!"},tables:{grandTotal:"czna suma",subTotal:"cznie"},slicers:{filterPlaceholder:"Szukaj",selectAll:"(Wszystko)",search:"Szukaj",clearSelection:"Wyczy wybr",sort:"Sortowanie fragmentowe",notSelected:"Nie ustawione",startDate:"Data pocztkowa",endDate:"Data kocowa",value:"Warto",showMore:"Poka wicej",selectParameter:"Wybierz parametr",AND:" AND ",dateRangeSlicer:{dateMode:{title:"Tryb daty",date:"Data",year:"Rok",yearQuarter:"Rok-Kwarta",yearMonth:"Rok-Miesic",dateTime:"Data i godzina"},rangeMode:{title:"Display Mode",basic:"Date",startEnd:"Date Range"},defaultValue:{title:"Default Value",dialogTitle:"Set Default Value",valueType:"Value Type",staticDate:"Static Date",relativeDate:"Relative Date",quickDate:"Quick Range",empty:"(Empty)"},dataFormat:{title:"Data Format",year:"yyyy",quarter:"qq yyyy",month:"mm/yyyy",date:"dd/mm/yyyy",second:"dd/mm/yyyy h:mm:ss",auto:"Auto"},placeholder:{dateTitle:"Date Placeholder",dateDefault:"Select date",startTitle:"Start Date Placeholder",startDefault:"Start date",endTitle:"End Date Placeholder",endDefault:"End date"},allowClear:"Allow Clear Date",quickRanges:{show:"Show Quick Ranges",title:"Quick Ranges",dialogTitle:"Set Quick Range",empty:"No quick ranges",custom:"Custom Range"},ok:"OK"},relativeDateSlicer:{Q1:"Q1",Q2:"Q2",Q3:"Q3",Q4:"Q4",none:"aden",custom:"Niestandardowy",addRelativeDate:"Dodaj dat wzgldn",itemName:"Nazwa"}},editors:{relativeDateEditor:{this:{year:"This year",quarter:"This quarter",month:"This month",week:"This week",day:"Today",hour:"This hour",minute:"This minute",second:"This second",anchor:"Anchor {{unit}}"},previous:{year:"Previous year",quarter:"Previous quarter",month:"Previous month",week:"Previous week",day:"Yesterday",hour:"Previous hour",minute:"Previous minute",second:"Previous second"},next:{year:"Next year",quarter:"Next quarter",month:"Next month",week:"Next week",day:"Tomorrow",hour:"Next hour",minute:"Next minute",second:"Next second"},toDate:{toDate:"{{unit}} to date",toNow:"{{unit}} to now",toAnchorDate:"The {{unit}} to anchor date",toAnchorTime:"The {{unit}} to anchor time"},unit:{year:"year",year_plural:"years",quarter:"quarter",quarter_plural:"quarters",month:"month",month_plural:"months",week:"week",week_plural:"weeks",day:"day",day_plural:"days",hour:"hour",hour_plural:"hours",minute:"minute",minute_plural:"minutes",second:"second",second_plural:"seconds"},lastOrNext:{last:"Last {{count}} {{unit}}",next:"Next {{count}} {{unit}}"},offset:{addOffset:"Add offset",withOffset:"(Offset {{count}} {{unit}})"},lastN:"Ostatni",nextN:"Nastpny",year:"Rok",quarter:"Kwarta",month:"Miesic",week:"Tydzie",day:"Dzie",hour:"Godzina",minute:"Minuta",second:"Sekunda",anchorRelativeTo:"Zakotwiczenie wzgldem"},parameterWrapper:{useCustomValue:"Uyj niestandardowej wartoci"}},dialogs:{filter:{dateUnit:"Jednostka daty",selectAll:"(Wszystkie)"},jumpToDocuments:{backFrom:"Powrt z"},common:{apply:"Zastosuj",reset:"Reset",yes:"Tak",no:"Nie",ok:"OK",cancel:"Anuluj",close:"Zamknij",deleteAll:"Delete All"},dataMonitor:{title:"Add Data Monitoring"}},webContent:{emptyInRunTime:"Pusty"},actionBar:{filter:"Filtr",modelParameters:"parametr modelu",sort:"Sortowanie",swapRowsAndCols:"Zamie wiersze i kolumny",rank:"Wizualizacja warunkowa",changeChartType:"Typ wykresu",changePivotSetting:"Wizanie danych",conditionalFormat:"Format warunkowy",referenceLine:"Linia referencyjna",showData:"Poka dane",hideData:"Ukryj dane",clearCustomData:"Wyczy dane niestandardowe",expand:"Rozszerz",shrink:"Zmniejsz",focus:"Skupienie",exitFocus:"Powrt do designera",selectMap:"Wybierz Map",edit:"Edytuj",remove:"Usu",moreActions:"Wicej akcji",enableCrossFilter:"Wcz filtr krzyowy",disableCrossFilter:"Wycz filtr krzyowy",trendLine:"Linia trendu",export:"Eksport",addAnnotation:"Dodaj adnotacj",editAnnotation:"Edytuj adnotacj",annotation:"Adnotacje",selectFloorPlan:"Wybierz plan budynku",clearRuntimeFilters:"Wyczy filtry wykonawcze",refreshDefinition:"Odwierz",shareScenario:"Udostpnij scenariusz",openFullDashboard:"Otwrz peny dashboard",clearSelection:"Wyczy zaznaczenie",analysisPath:"cieka analizy",mergeDatasets:"Scal zestawy danych",contentSetting:"Skonfiguruj",hideThisComponent:"Hide This Component"},appBar:{pageBack:"Powrt"},inspector:{properties:{charts:{series:{defaultDisplay:"Cakowity"}}}},spreadChart:{rowsPattern:"Wiersz{{index}}",columnsPattern:"Kolumna{{index}}",values:"Wartoci"},notifications:{dashboardSaving:"Zapisywanie dashboardu",dashboardSaved:"Dashboard zapisany.",dismiss:"Odwoaj",dismissAll:"Odwoaj wszystkie",showAll:"Poka wszystkie",showDetails:"Poka szczegy",infoCategory:"Informacje",warningCategory:"Uwaga",errorCategory:"Bd",expandTitle:"Rozwi",collapseTitle:"Zwi",promptUsingMobileView:{title:"Widok mobilny jest uywany",content:"Uwaga: na pulpicie nawigacyjnym jest wywietlany 'Widok mobilny'. Przejd do 'widoku pulpitu', aby zobaczy peny pulpit nawigacyjny."},dataMonitorSaved:"Data Monitoring Saved."},documentType:{Unknown:"nieznany",Dashboard:"Dashboard",Dataset:"Zestaw danych",DataSource:"rdo danych",Image:"Obraz",Theme:"Motyw",MapHierarchy:"Hierarchia",GeoJson:"GeoJson",Report:"Raport",FloorPlan:"",AnalysisModel:"Model danych",Visual:"Visual"},dataBindingPanel:{chooseDataset:"Choose Data",loadingDatasetList:"adowanie listy zbiorw danych z serwera ...",loadDatasetListFailed:"Nie udao si zaadowa listy zbiorw danych z serwera!",searchField:"Szukaj...",measures:"Miary",dimensions:"Wymiary",bindingHint:"Wybierz zbir danych z powyszej listy do powizania danych.",values:"Wartoci",lower:"Nisza warto",upper:"Wysza warto",leftValue:"Lewa o wartoci",rightValue:"Prawa o wartoci",axis:"O (kategoria)",axis_x:"O X",axis_y:"O Y",legend:"Legenda (seria)",category:"Kategoria",details:"Detale",rows:"Wiersze",columns:"Kolumny",location:"Region",latitude:"Szeroko",longtitude:"Dugo",layers:"Warstwy",mapTiles:"Regiony",scatter:"Punkty",color:"Kolor",size:"Rozmiar",shape:"Ksztat",trellisRows:"Wiersze kratowe",trellisColumns:"Kolumny kratowe",tooltip:"Etykietka",mainValue:"Aktualna warto",comparisonValue:"Docelowa warto",forecastValue:"Prognozowana warto",imageSource:"rdo obrazu",pivotSettingHint:"Przecignij tutaj pola danych.",pivotSettingHintRunTime:"Kliknij + aby doda pola tutaj.",aggregationMethod:"Metoda agregacji",editName:"Zmie nazw",editFormat:"Edytuj Format",deleteFormat:"Usu Format",createHierarchy:"Utwrz pole hierarchii",editHierarchy:"Edytuj pole hierarchii",deleteHierarchy:"Usu pole hierarchii",editNameHierarchyItem:"Zmie nazw",deleteHierarchyItem:"Usu",exactDate:"Dokadna data",ymd:"Rok/Miesic/Dzie",yq:"Rok/Kwarta",ym:"Rok/Miesic",yw:"Rok/Tydzie",runningCalculation:"Trwa obliczanie",movingCalculation:"Przenosz obliczenia",origin:"Oryginalna warto",addMoMCalculation:"Obliczanie z miesica na miesic",addYoYCalculation:"Obliczanie z roku na rok",accountingCalculation:"Obliczanie percentyla",rankingCalculation:"Obliczanie rankingu",addAccountingCalculation:"Obliczanie percentyla",addRankingCalculation:"Obliczanie rankingu",totalRanking:"Cakowity ranking",groupRanking:"Ranking grupowy",totalAccounting:"Cakowity percentyl",groupAccounting:"Percentyl grupy",dateCalcualtionHint:"Aby to wczy, potrzebna jest kolumna z dat.",advanced:"Zaawansowane",filter:"Filtr",value:"Warto",ratio:"Stosunek",difference:"Rnica",percentDifference:"Rnica procentowa",slicerColumn:"Kolumny",search:"Szukaj...",seriesAxisLabel:"O",seriesAxis:{both:"Obie osie",left:"Lewa o",right:"Prawa o"},quickFunction:"Szybkie funkcje",pastValue:"Warto przesza",pastYear:"Poprzedni rok",pastQuarter:"Poprzedni kwarta",pastMonth:"Poprzedni miesic",pastWeek:"Poprzedni tydzie",changeOverTime:"Zmienia si w czasie",growthRate:"Tempo wzrostu",fromPreviousPeriod:"Z poprzedniego okresu",fromSamePeriodPreviousYear:"Ten sam okres, rok po roku",fromSamePeriodPreviousQuarter:"Ten sam okres, kwarta po kwartale",fromSamePeriodPreviousMonth:"Ten sam okres, miesic po miesicu",fromSamePeriodPreviousWeek:"Ten sam okres, tydzie po tygodniu",fromSamePeriodPreviousYearPercent:"en sam okres, rok po roku %",fromSamePeriodPreviousQuarterPercent:"Ten sam okres, kwarta po kwartale %",fromSamePeriodPreviousMonthPercent:"Ten sam okres, miesic po miesicu %",fromSamePeriodPreviousWeekPercent:"Ten sam okres, tydzie po tygodniu %",changeOverTimePercent:"% Zmienia si w czasie",dateBasedFunctions:"Funkcje oparte na datach ...",growth:"Wzrost",singleValue:"Numer",Image:"Obraz",bulletGraph:"Wykres punktowy",paretoGraph:"Wykres Pareto",hBarGraph:"Wykres HBar",diagram:"Diagram",trend:"Tendencja",bar:"Belka",area:"Obszar",winLoss:"Wygrana-Przegrana",number:"Numer",editText:"Edytuj",alignmentSetting:"Wyrwnanie tekstu",sparklineSetting:"Opcje",moveUp:"W gr",moveDown:"W d",collapse:"Zwi",expand:"Rozwi",floorPlanArea:"Obszar",floorPlanColor:"Kolor",renderSetting:"Ustawienia renderowania",multiDimensions:"Wiele wymiarw",parentChild:"Parent-Child",pid:"ParentId",id:"Id",hierarchy:"Hierarchia",display:"Pokaz",rootId:"Root Id",separator:"Separator",separatorEG:'na przykad, "-", "," lub "" midzy poziomami',missMatchedNode:"Niedopasowany wze",addToRoot:"Dodaj do katalogu gwnego",ignore:"Ignoruj",separateType:"Oddzielny typ",length:"Dugo",pivotSettingItemTitlePattern:"{{ itemDisplay }} z `{{ entityName }}`",displayTimezone:"Display Timezone",displayUTC:"UTC",displayLocal:"Local Date Time",attribute:"Attribute",customMeasure:"Custom Measure",calculatedColumn:"Calculated Column",dataModelCustomMeasure:"Data Model Custom Measure",dataModelCalculatedColumn:"Data Model Calculated Column",invalidColumn:{conflict:"Invalid data attribute name"}}}},function(e,t){e.exports={common:{nullDisplay:"[NULL]",emptyDisplay:"[Blank]",showNullAs:"[NULL]",showEmptyAs:"[Blank]",currencyFormat:"$#,##0.00",max:"Max",min:"Min",maxValue:"Max Value",minValue:"Min Value",infinity:"Infinity",negativeInfinity:"-Infinity",NaN:"Not a Number",on:"On",off:"Off",yes:"Yes",no:"No",true:"True",false:"False",asc:"Ascending",desc:"Descending",noSort:"No Sort",dateFormat:"MM/DD/YYYY",default:"Default",reload:"Reload",builtIn:"Built-in",edit:"Edit",others:"Others",groupFilter:"Group Filter",exclude:"Exclude"},components:{pivotTable:"Pivot Table",rawDataTable:"Data Table",kpiMatrix:"KPI Matrix",webContent:"Embedded Web Content",embeddedReport:"Embedded Report",embeddedDashboard:"Embedded Dashboard",container:"Container",tabContainer:"Tab Container",image:"Image",richText:"Rich Text",labelSlicer:"Label Slicer",treeSlicer:"Multi-dimensional Slicer",comboSlicer:"Multi-dimensional Dropdown Slicer",dateRangeSlicer:"Date Range Slicer",relativeDateSlicer:"Relative Dates Slicer",dataRangeSlicer:"Data Range Slicer",group:"Group",devTools:"Dev Tools"},patterns:{measures:{pattern:"{{aggregation}} of {{measure}}",pattern_duplicated:"{{aggregation}} of {{measure}} ({{idx}})",nonePattern:"{{measure}}",nonePattern_duplicated:"{{measure}} ({{idx}})"},calculations:{running:"Running",moving:"Moving",pattern:"{{method}} {{calculation}} on {{aggregation}}",pattern_duplicated:"{{method}} {{calculation}} on {{aggregation}} ({{idx}})",accounting:"Percentile",ranking:"Ranking",value:"Value",ratio:"Ratio",difference:"Difference",percentDifference:"Percent Difference"},chartTitle:{default:"Chart",separator:", ",connector:" and ",pattern:"{{measure}} by {{dimension}}"},datetime:{fiscalYearPattern:"FY {{year}}",quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",parts:{year:"Year",quarter:"Quarter",month:"Month",week:"Week",day:"Day",hour:"Hour",minute:"Minute",second:"Second",millisecond:"Millisecond"}},pageName:{namePattern:"Page {{number}}",namePattern_copy:"{{name}} - Copy {{number}}",nameRegex:"^Page (\\d+)$",nameRegex_copy:"^{{name}} - Copy (\\d+)$"},parameterName:{namePattern:"Parameter{{number}}",nameRegex:"^Parameter(\\d+)$"},container:{defaultTitle:"Container",tabTitleButton:"Tab {{number}}",tabTitleRegex:"^Tab (\\d+)$"},tooltip:{selectedValue:"{{count}} value selected",selectedValue_plural:"{{count}} values selected"},conditions:{between:" Between {{min}} and {{max}}",notBetween:" Not between {{min}} and {{max}}",aboveMax:" Greater Than Max Of {{right}}",belowMin:" Less Than Min Of {{right}}",aboveAverage:" Greater Than Average Of {{right}}",belowAverage:" Less Than Average Of {{right}}"}},charts:{tooltip:{keep:"Keep",exclude:"Exclude",drill:"Drill Down",drillDown:"Drill Down",drillDetail:"Drill Detail",drillDetailNoFilter:"(No Filter)",drillRoot:"Home",drillClear:"Clear Drill Items",jump:"Jump",noDimensionToDrill:"No dimension to drill to",expandHierarchy:"Expand Groups",collapseHierarchy:"Collapse Groups",addMonitor:"Add Data Monitoring"},displayUnit:{none:"None",e2:"Hundreds",e3:"K",e4:"10K",e5:"100K",e6:"M",e7:"10M",e8:"100M",e9:"B",e12:"T",pattern:"({{unit}})"}},richText:{hint:"The rich text component is now empty. Please click the edit button on the top right corner to add content.",expression:{title:"Aggregation",loading:"{loading...}",noData:"-",preparing:"{preparing...}",dataset:"Dataset",chooseField:"Choose Field",field:"Field",noFilterHint:"There is no filter.",noConditionalFormatHint:"There is no conditional format.",addConditionalFormat:"Add",borderRadius:"Border Radius",backgroundColor:"Background Color",textStyle:"Text Style",displayUnit:"Display Unit",format:"Format",conditionalFormat:"Conditional Format"},expressionVariable:{title:"Context Variable",prompt:'Hint: Input single context variable, such as user["name"], datasets["datasetName"].lastUpdated'},fontSize:{smaller:"Smaller",small:"Small",normal:"Normal",large:"Large",larger:"Larger"},link:{title:"Link Settings",url:"Url",targetPage:"Target Page",none:"None"},toolbar:{font:"Font",fontSize:"Font Size",bold:"Bold",italic:"Italic",underline:"Underline",color:"Font Color",backgroundColor:"Background Color",numbering:"Numbering",bullets:"Bullets",decreaseIndent:"Decrease Indent",increaseIndent:"Increase Indent",alignLeft:"Align Left",center:"Center",alignRight:"Align Right",subscript:"Subscript",superscript:"Superscript",strikeThrough:"Strike Through",hyperlink:"Insert Jump",expression:"Insert Data Aggregation",parameter:"Insert Parameter",noParameters:"No Parameters",variable:"Insert Variable"}},chartTypes:{column:"Column Chart",rangeColumn:"Range Column Chart",rangeBar:"Range Bar Chart",rangeArea:"Range Area Chart",stackedColumn:"Stacked Column Chart",percentStackedColumn:"Percent Stacked Column Chart",bar:"Bar Chart",stackedBar:"Stacked Bar Chart",percentStackedBar:"Percent Stacked Bar Chart",line:"Line Chart",area:"Area Chart",stackedArea:"Stacked Area Chart",percentStackedArea:"Percent Stacked Area Chart",pie:"Pie Chart",donut:"Donut Chart",rose:"Rose Chart",sunburst:"Sunburst Chart",barInPolar:"Bar Chart In Polar Coordinates",stackedBarInPolar:"Stacked Bar Chart In Polar Coordinates",radialStackedBar:"Radial Stacked Bar Chart",radar:"Radar Chart",filledRadar:"Filled Radar Chart",scatter:"Scatter",bubble:"Bubble Chart",combined:"Combined Chart",map:"Map",treeMap:"Treemap",funnel:"Funnel",gauge:"Gauge",indicator:"Indicator",kpi:"KPI Chart",card:"Card Chart",floorPlan:"Floor Plan",pivotTable:"Pivot Table",spreadSource:"Calc Chart",multiSource:"Multi-Source Chart"},aggregationMethods:{sum:"Sum",cnt:"Count",avg:"Average",max:"Max",min:"Min",dst:"Distinct Count",none:"None",list:"List",fst:"First"},error:{noImage:"No Image",noImageInRunTime:"No Image",noData:"No data found",getDatasetFailed:"Failed to retrieve data!",getDatasetNoAccess:"No required permission to retrieve the data!",loadGeoDataFailed:"Failed to load geo data!",loadFloorPlanDataFailed:"Failed to load floor plan data!",exportFailed:"Failed to export.",getTokenFailed:"Failed to get token.",notSupportChangeChartType:"The visualization component does not support changing the chart type!",draftIsBeingReviewed:{title:"Draft Is Being Reviewed",content:"The draft of document is being reviewed. It can't be modified."},loadVisualFailed:"Failed to load visualization",docWithoutAccess:{title:"Some used documents without access or not found.",dashboard:"{{count}} Dashboard",dashboard_plural:"{{count}} Dashboards",report:"{{count}} Report",report_plural:"{{count}} Reports",dataset:"{{count}} Dataset",dataset_plural:"{{count}} Datasets",dataModel:"{{count}} Data Model",dataModel_plural:"{{count}} Data Models",image:"{{count}} Image",image_plural:"{{count}} Images",mapData:"{{count}} Map Data",mapHierarchy:"{{count}} Map Hierarchy",mapHierarchy_plural:"{{count}} Map Hierarchies",visualization:"{{count}} Visualization",font:"{{count}} Font",font_plural:"{{count}} Fonts",floorPlan:"{{count}} Floor Plan",theme:"{{count}} Theme",theme_plural:"{{count}} Themes",language:"{{count}} Language Resources",comma:", ",content:" without access."},shareResource:{ok:"Every resource can be accessed!",removeScenario:"Remove",removeResourceInPage:"Reset the broken share resource in page.",docStatus:"Dashboard Status",dashboard:"Dashboard ({{id}}) is unavailable.",report:"Report ({{id}}) is unavailable.",dataset:"Dataset ({{id}}) is unavailable.",dataModel:"Data Model ({{id}}) is unavailable.",image:"Image ({{id}}) is unavailable.",mapData:"Map Data ({{id}}) is unavailable.",mapHierarchy:"Map Hierarchy ({{id}}) is unavailable.",visualization:"Visualization ({{id}}) is unavailable.",font:"Font ({{id}}) is unavailable.",floorPlan:"Floor Plan ({{id}}) is unavailable.",theme:"Theme ({{id}}) is unavailable.",languageResource:"Language Resource ({{id}}) is unavailable.",unknown:"Unknown ({{id}}) is unavailable.",resourceNotFount:"Resource Not Found"},statusCode:{401:{title:"Unauthorized",content:"Your login info is either incorrect or expired. Try reload the page or login again."},403:{title:"Forbidden",content:"You do not have the required permission to access the resource."},404:{title:"Not Found",content:"{{content}} was not found."},500:{title:"Internal Server Error",content:""}},errorCode:{2e5:{title:"Unknown Error"},200001:{title:"Invalid Parameter: Id"},200002:{title:"Document Not Found",contentHasName:"Cannot find the {{type}} document '{{name}}'.",contentNoName:"Cannot find referenced {{type}} document."},200101:{title:"{{title}} - Dashboard Exists",content:"There is already a dashboard with the same name."},200102:{title:"Document Count Exceeded",content:"The count of dashboards reached your license limit."},200103:{title:"Document Pending Approval",content:"The document is pending approval."},200104:{title:"Draft Disabled",content:"The document draft has been disabled."},200201:{title:"Document Access Denied",content:"You do not have the required permission to access the {{type}} document '{{name}}'."},200204:{title:"Aggregated Data Points Exceeded",content:"The count of aggregated data points exceeds the limit setting."},200211:{title:"Get Dataset Data Failed",content:"Current user must belong to a dedicated organization to access dataset cache of a multi-tenant dataset"},200212:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200213:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200214:{title:"Exceeded Max Aggregated Data Points",content:"The count of aggregated data points exceeds the limit {{maxAggDataPoints}}."},200215:{title:"Insufficient Context Value",content:"Specified property, '{{property}}', not found on current user-context."},200216:{title:"Insufficient Context Value",content:"Specified property, '{{property}}', not found on current organization-context."},200217:{title:"Insufficient Context Value",content:"The literal value of context parameter, '{{parameter}}', can not be converted to '{{dataType}}' type."},200218:{title:"Insufficient Context Value",content:"Value of context parameter, '{{parameter}}', is null or empty."},200220:{title:"Query Data Failed"},200221:{title:"Query Data Failed"},200222:{title:"Query Data Failed"},200224:{title:"Dataset Cache Unavailable",content:"Please refresh dataset cache '{{datasetName}}'."},200225:{title:"Query Data Failed",content:"Failed to generate SQL statement for analysis database."},200226:{title:"Query Data Failed",content:"Failed to open connection against analysis database."},200227:{title:"Query Data Failed",content:"Failed to execute command against analysis database."},200228:{title:"Query Data Failed",content:"Access denied on referenced datasource."},200229:{title:"Query Data Failed",content:"Referenced data source not found."},200301:{title:"Load Dataset Failed",content:"Failed to load the dataset, please contact the administrator or dataset author for help."},200302:{title:"No Available Cache",content:"Failed to generate dataset cache."},540001:{title:"Failed to Add Data Monitoring"},540002:{title:"No Enough Permissions to Create Data Monitoring"},540008:{title:"Data Monitoring License is Expired"},540009:{title:"{{name}} - already exists",content:"There is already a data monitoring with same name."},540010:{title:"Portal Uri is Empty",content:"Portal Uri is required. Please contact the Administrator."},600001:{title:'Invalid parameter "{{name}}" in WAX'}},devTools:{loadDefinitionError:"Failed to load visualization"},multiSourceChart:{measureInGroup:{title:"Operation Forbidden",content:"Do not add measure field to grouping role!"}},NoSearchResult:"Nothing can be founded!",saveDataMonitorFailed:"Save data monitoring failed!"},tables:{grandTotal:"Grand Total",subTotal:"Total"},slicers:{filterPlaceholder:"Search",selectAll:"(All)",search:"Search",clearSelection:"Clear Selection",sort:"Slicer Sort",notSelected:"(All)",startDate:"Start Date",endDate:"End Date",value:"Value",showMore:"Show more",selectParameter:"Select parameter",AND:" AND ",dateRangeSlicer:{dateMode:{title:"Date Mode",date:"Date",year:"Year",yearQuarter:"Year-Quarter",yearMonth:"Year-Month",dateTime:"Date Time"},rangeMode:{title:"Display Mode",basic:"Date",startEnd:"Date Range"},defaultValue:{title:"Default Value",dialogTitle:"Set Default Value",valueType:"Value Type",staticDate:"Static Date",relativeDate:"Relative Date",quickDate:"Quick Range",empty:"(Empty)"},dataFormat:{title:"Data Format",year:"yyyy",quarter:"qq yyyy",month:"mm/yyyy",date:"dd/mm/yyyy",second:"dd/mm/yyyy h:mm:ss",auto:"Auto"},placeholder:{dateTitle:"Date Placeholder",dateDefault:"Select date",startTitle:"Start Date Placeholder",startDefault:"Start date",endTitle:"End Date Placeholder",endDefault:"End date"},allowClear:"Allow Clear Date",quickRanges:{show:"Show Quick Ranges",title:"Quick Ranges",dialogTitle:"Set Quick Range",empty:"No quick ranges",custom:"Custom Range"},ok:"OK"},relativeDateSlicer:{Q1:"Q1",Q2:"Q2",Q3:"Q3",Q4:"Q4",none:"None",custom:"Custom",addRelativeDate:"Add Relative Date",itemName:"Name"}},editors:{relativeDateEditor:{this:{year:"This year",quarter:"This quarter",month:"This month",week:"This week",day:"Today",hour:"This hour",minute:"This minute",second:"This second",anchor:"Anchor {{unit}}"},previous:{year:"Previous year",quarter:"Previous quarter",month:"Previous month",week:"Previous week",day:"Yesterday",hour:"Previous hour",minute:"Previous minute",second:"Previous second"},next:{year:"Next year",quarter:"Next quarter",month:"Next month",week:"Next week",day:"Tomorrow",hour:"Next hour",minute:"Next minute",second:"Next second"},toDate:{toDate:"{{unit}} to date",toNow:"{{unit}} to now",toAnchorDate:"The {{unit}} to anchor date",toAnchorTime:"The {{unit}} to anchor time"},unit:{year:"year",year_plural:"years",quarter:"quarter",quarter_plural:"quarters",month:"month",month_plural:"months",week:"week",week_plural:"weeks",day:"day",day_plural:"days",hour:"hour",hour_plural:"hours",minute:"minute",minute_plural:"minutes",second:"second",second_plural:"seconds"},lastOrNext:{last:"Last {{count}} {{unit}}",next:"Next {{count}} {{unit}}"},offset:{addOffset:"Add offset",withOffset:"(Offset {{count}} {{unit}})"},lastN:"Last",nextN:"Next",year:"Year",quarter:"Quarter",month:"Month",week:"Week",day:"Day",hour:"Hour",minute:"Minute",second:"Second",anchorRelativeTo:"Anchor relative to"},parameterWrapper:{useCustomValue:"Use custom value"}},dialogs:{filter:{dateUnit:"Date Unit",selectAll:"(All)"},jumpToDocuments:{backFrom:"Back from"},common:{apply:"Apply",reset:"Reset",yes:"Yes",no:"No",ok:"OK",cancel:"Cancel",close:"Close",deleteAll:"Delete All"},dataMonitor:{title:"Add Data Monitoring"}},webContent:{emptyInRunTime:"Blank"},actionBar:{filter:"Filter",modelParameters:"Model Parameters",sort:"Sort",swapRowsAndCols:"Swap Rows And Columns",rank:"Conditional Visualization",changeChartType:"Chart Type",changePivotSetting:"Data Binding",conditionalFormat:"Conditional Format",referenceLine:"Reference Line",showData:"Show Data",hideData:"Hide Data",clearCustomData:"Clear Custom Data",expand:"Expand",shrink:"Shrink",focus:"Focus",exitFocus:"Back to Designer",selectMap:"Select Map",edit:"Edit",remove:"Remove",moreActions:"More Actions",enableCrossFilter:"Enable Cross Filter",disableCrossFilter:"Disable Cross Filter",trendLine:"Trend Line",export:"Export",addAnnotation:"Add Annotations",editAnnotation:"Edit Annotations",annotation:"Annotations",selectFloorPlan:"Select Floor Plan",clearRuntimeFilters:"Clear Runtime Filters",refreshDefinition:"Refresh",shareScenario:"Share Scenario",openFullDashboard:"Open Full Dashboard",clearSelection:"Clear Selection",analysisPath:"Analysis Path",mergeDatasets:"Merge Datasets",contentSetting:"Configure",hideThisComponent:"Hide This Component"},appBar:{pageBack:"Back"},inspector:{properties:{charts:{series:{defaultDisplay:"Total"}}}},spreadChart:{rowsPattern:"Row{{index}}",columnsPattern:"Column{{index}}",values:"Values"},notifications:{dashboardSaving:"Saving Dashboard",dashboardSaved:"Dashboard Saved.",dismiss:"Dismiss",dismissAll:"Dismiss All",showAll:"Show All",showDetails:"Show Details",infoCategory:"Info",warningCategory:"Warning",errorCategory:"Error",expandTitle:"Expand",collapseTitle:"Collapse",promptUsingMobileView:{title:"Mobile View Is In-use",content:"Note: You are seeing the 'Mobile View' of the dashboard. Switch to the 'Desktop View' to see the full dashboard."},dataMonitorSaved:"Data Monitoring Saved."},documentType:{Unknown:"unknown",Dashboard:"Dashboard",Dataset:"Dataset",DataSource:"DataSource",Image:"Image",Theme:"Theme",MapHierarchy:"MapHierarchy",GeoJson:"GeoJson",Report:"Report",FloorPlan:"FloorPlan",AnalysisModel:"DataModel",Visual:"Visual"},dataBindingPanel:{chooseDataset:"Choose Data",loadingDatasetList:"Loading dataset list from server...",loadDatasetListFailed:"Failed to load dataset list from server!",searchField:"Search...",measures:"Measures",dimensions:"Dimensions",bindingHint:"Please select a dataset from the above list for data binding.",values:"Values",lower:"Lower Value",upper:"Upper Value",leftValue:"Left Value Axis",rightValue:"Right Value Axis",axis:"Axis (Category)",axis_x:"X Axis",axis_y:"Y Axis",legend:"Legend (Series)",category:"Category",details:"Details",rows:"Rows",columns:"Columns",location:"Region",latitude:"Latitude",longtitude:"Longitude",layers:"Layers",mapTiles:"Regions",scatter:"Points",color:"Color",size:"Size",shape:"Shape",trellisRows:"Trellis Rows",trellisColumns:"Trellis Columns",tooltip:"Tooltip",mainValue:"Actual Value",comparisonValue:"Target Value",forecastValue:"Forecast Value",imageSource:"Image Source",pivotSettingHint:"Drag data fields here.",pivotSettingHintRunTime:"Click + to add fields here.",aggregationMethod:"Aggregation Method",editName:"Rename",editFormat:"Edit Format",deleteFormat:"Delete Format",createHierarchy:"Create Hierarchy Field",editHierarchy:"Edit Hierarchy Field",deleteHierarchy:"Delete Hierarchy Field",editNameHierarchyItem:"Rename",deleteHierarchyItem:"Remove",exactDate:"Exact Date",ymd:"Year/Month/Day",yq:"Year/Quarter",ym:"Year/Month",yw:"Year/Week",runningCalculation:"Running Calculation",movingCalculation:"Moving Calculation",origin:"Original Value",addMoMCalculation:"MoM Calculation",addYoYCalculation:"YoY Calculation",accountingCalculation:"Percentile Calculation",rankingCalculation:"Ranking Calculation",addAccountingCalculation:"Percentile Calculation",addRankingCalculation:"Ranking Calculation",totalRanking:"Total Ranking",groupRanking:"Group Ranking",totalAccounting:"Total Percentile",groupAccounting:"Group Percentile",dateCalcualtionHint:"Need a date column to enable this.",advanced:"Advanced",filter:"Filter",value:"Value",ratio:"Ratio",difference:"Difference",percentDifference:"Percent Difference",slicerColumn:"Columns",search:"Search...",seriesAxisLabel:"Axis",seriesAxis:{both:"Both Axis",left:"Left Axis",right:"Right Axis"},quickFunction:"Quick Functions",pastValue:"Past Value",pastYear:"Past Year",pastQuarter:"Past Quarter",pastMonth:"Past Month",pastWeek:"Past Week",changeOverTime:"Change Over Time",growthRate:"Growth Rate",fromPreviousPeriod:"From Previous Period",fromSamePeriodPreviousYear:"Same Period, YoY",fromSamePeriodPreviousQuarter:"Same Period, QoQ",fromSamePeriodPreviousMonth:"Same Period, MoM",fromSamePeriodPreviousWeek:"Same Period, WoW",fromSamePeriodPreviousYearPercent:"Same Period, YoY%",fromSamePeriodPreviousQuarterPercent:"Same Period, QoQ%",fromSamePeriodPreviousMonthPercent:"Same Period, MoM%",fromSamePeriodPreviousWeekPercent:"Same Period, WoW%",changeOverTimePercent:"% Change Over Time",dateBasedFunctions:"Date Based Functions...",growth:"Growth",singleValue:"Number",Image:"Image",bulletGraph:"Bullet Graph",paretoGraph:"Pareto Graph",hBarGraph:"HBar Graph",diagram:"Diagram",trend:"Trend",bar:"Bar",area:"Area",winLoss:"Win-Loss",number:"Number",editText:"Edit",alignmentSetting:"Text Alignment",sparklineSetting:"Settings",moveUp:"Move Up",moveDown:"Move Down",collapse:"Collapse",expand:"Expand",floorPlanArea:"Area",floorPlanColor:"Color",renderSetting:"Render Setting",multiDimensions:"Multi-Dimensions",parentChild:"Parent-Child",pid:"ParentId",id:"Id",hierarchy:"Hierarchy",display:"Display",rootId:"Root Id",separator:"Separator",separatorEG:'e.g. "-", "," or " " between levels',missMatchedNode:"Miss-matched Node",addToRoot:"Add to root",ignore:"Ignore",separateType:"Separate type",length:"Length",pivotSettingItemTitlePattern:"{{ itemDisplay }} from `{{ entityName }}`",displayTimezone:"Display Timezone",displayUTC:"UTC",displayLocal:"Local Date Time",attribute:"Attribute",customMeasure:"Custom Measure",calculatedColumn:"Calculated Column",dataModelCustomMeasure:"Data Model Custom Measure",dataModelCalculatedColumn:"Data Model Calculated Column",invalidColumn:{conflict:"Invalid data attribute name"}}}},function(e,t){e.exports={moment:{week:{dow:1}}}},function(e,t){e.exports={coreui:{editorsLocalization:{collectionEditor:{closeBtnTitle:"",showBtnTitle:"",addBtnText:"",addBtnTitle:"",textEmpty:"",textItems:""}},textUnknownProperty:"",emptyListPlaceholder:"",gridSearchPlaceholder:"",closeSearchBtnTitle:""},moment:{months:["","","","","","","","","","","",""],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],weekdaysMin:["","","","","","",""],week:{dow:1}},spreadjs:{ContextMenu:{insertRows:"",deleteRows:""}},dateTimePicker:{quarters:["","","",""],current:["","","","",""],yearTitle:"YYYY",yearMonthTitle:"YYYY M"},dataMonitor:{ui:{tabHeaders:{Basic:"",Notification:"",ExecutionPlan:""},basic:{name:"",namePlaceholder:"",description:"",descriptionPlaceholder:"",monitorValue:"",condition:"",conditionEnums:{equal:"",greater:"",equalOrGreater:"",less:"",equalOrLess:""},threshold:"",thresholdPlaceholder:"",filterInformation:"",filterField:"",filterValue:"",errors:{nameRequired:"",invalidThreshold:""}},executionPlan:{repeat:"",repeatType:{daily:"",monthly:"",advanced:""},dailyEditor:{at:" ${time} ",every:"",hours:"",minutes:""},monthlyEditor:{every:"",months:"",onDay:"",onTheLast:"",onTheFirst:"",lastDay:"",lastWeekday:""},cronExpressionEditor:{cronExpression:"CRON "},start:"",end:"",noEndDate:"",timezone:"",errors:{invalidCronExpression:"CRON"}},notification:{Email:"",WeChat4Work:"",DingTalk:"",MSTeams:"MSTeams",Slack:"Slack",contactsPlaceholder:"",emailPlaceholder:"",contentPlaceholder:"",defaultContent:"$dashboardName$field$value$field $condition $threshold",channel:"",content:"",variables:"",variableItems:{dashboardId:"ID",dashboardName:"",dashboardUrl:"",dataMonitorName:"",field:"",value:"",condition:"",threshold:"",time:""},mechanism:"",everyTime:"",periodTime:"",onlyOnce:"",withinPlaceholder:"",search:"",timeUnit:{day:"",hour:"",minute:"",second:""},errors:{emailInvalid:"",emailDomainInvalid:"",contentRequired:"",withinInvalid:""}},errors:{noValidChannel:"",getContactsFailed:""}},timezone:{"timezone_Etc/GMT+12":"(UTC-12:00) ","timezone_Etc/GMT+11":"(UTC-11:00) -11","timezone_Pacific/Honolulu":"(UTC-10:00) ","timezone_America/Adak":"(UTC-10:00) ","timezone_Pacific/Marquesas":"(UTC-09:30) ","timezone_Etc/GMT+9":"(UTC-09:00) -09","timezone_America/Anchorage":"(UTC-09:00) ","timezone_America/Tijuana":"(UTC-08:00) ","timezone_Etc/GMT+8":"(UTC-08:00) -08","timezone_America/Los_Angeles":"(UTC-08:00) ()","timezone_America/Phoenix":"(UTC-07:00) ","timezone_America/Chihuahua":"(UTC-07:00) ","timezone_America/Denver":"(UTC-07:00) ()","timezone_America/Guatemala":"(UTC-06:00) ","timezone_America/Chicago":"(UTC-06:00) ()","timezone_Pacific/Easter":"(UTC-06:00) ","timezone_America/Mexico_City":"(UTC-06:00) ","timezone_America/Regina":"(UTC-06:00) ","timezone_America/New_York":"(UTC-05:00) ()","timezone_America/Cancun":"(UTC-05:00) ","timezone_America/Indiana/Indianapolis":"(UTC-05:00) ()","timezone_America/Havana":"(UTC-05:00) ","timezone_America/Bogota":"(UTC-05:00) ","timezone_America/Port-au-Prince":"(UTC-05:00) ","timezone_America/Grand_Turk":"(UTC-05:00) ","timezone_America/La_Paz":"(UTC-04:00) ","timezone_America/Asuncion":"(UTC-04:00) ","timezone_America/Caracas":"(UTC-04:00) ","timezone_America/Santiago":"(UTC-04:00) ","timezone_America/Halifax":"(UTC-04:00) ()","timezone_America/Cuiaba":"(UTC-04:00) ","timezone_America/St_Johns":"(UTC-03:30) ","timezone_America/Cayenne":"(UTC-03:00) ","timezone_America/Miquelon":"(UTC-03:00) ","timezone_America/Sao_Paulo":"(UTC-03:00) ","timezone_America/Argentina/Buenos_Aires":"(UTC-03:00) ","timezone_America/Godthab":"(UTC-03:00) ","timezone_America/Bahia":"(UTC-03:00) ","timezone_America/Montevideo":"(UTC-03:00) ","timezone_America/Punta_Arenas":"(UTC-03:00) ","timezone_America/Araguaina":"(UTC-03:00) ","timezone_Etc/GMT+2":"(UTC-02:00)  - ","timezone_Atlantic/Azores":"(UTC-01:00) ","timezone_Atlantic/Cape_Verde":"(UTC-01:00) ","timezone_Etc/UTC":"(UTC) ","timezone_Africa/Sao_Tome":"(UTC+00:00) ","timezone_Atlantic/Reykjavik":"(UTC+00:00) ","timezone_Europe/London":"(UTC+00:00) ","timezone_Africa/Casablanca":"(UTC+01:00) ","timezone_Africa/Lagos":"(UTC+01:00) ","timezone_Europe/Paris":"(UTC+01:00) ","timezone_Europe/Warsaw":"(UTC+01:00) ","timezone_Europe/Budapest":"(UTC+01:00) ","timezone_Europe/Berlin":"(UTC+01:00) ","timezone_Asia/Hebron":"(UTC+02:00) ","timezone_Europe/Kaliningrad":"(UTC+02:00) ","timezone_Africa/Johannesburg":"(UTC+02:00) ","timezone_Africa/Khartoum":"(UTC+02:00) ","timezone_Europe/Chisinau":"(UTC+02:00) ","timezone_Asia/Damascus":"(UTC+02:00) ","timezone_Asia/Amman":"(UTC+02:00) ","timezone_Africa/Cairo":"(UTC+02:00) ","timezone_Africa/Windhoek":"(UTC+02:00) ","timezone_Africa/Tripoli":"(UTC+02:00) ","timezone_Asia/Jerusalem":"(UTC+02:00) ","timezone_Asia/Beirut":"(UTC+02:00) ","timezone_Europe/Kiev":"(UTC+02:00) ","timezone_Europe/Bucharest":"(UTC+02:00) ","timezone_Europe/Istanbul":"(UTC+03:00) ","timezone_Africa/Nairobi":"(UTC+03:00) ","timezone_Asia/Baghdad":"(UTC+03:00) ","timezone_Europe/Minsk":"(UTC+03:00) ","timezone_Asia/Riyadh":"(UTC+03:00) ","timezone_Europe/Moscow":"(UTC+03:00) ","timezone_Asia/Tehran":"(UTC+03:30) ","timezone_Europe/Samara":"(UTC+04:00) ","timezone_Europe/Volgograd":"(UTC+04:00) ","timezone_Asia/Yerevan":"(UTC+04:00) ","timezone_Asia/Baku":"(UTC+04:00) ","timezone_Asia/Tbilisi":"(UTC+04:00) ","timezone_Europe/Saratov":"(UTC+04:00) ","timezone_Indian/Mauritius":"(UTC+04:00) ","timezone_Asia/Dubai":"(UTC+04:00) ","timezone_Europe/Astrakhan":"(UTC+04:00) ","timezone_Asia/Kabul":"(UTC+04:30) ","timezone_Asia/Karachi":"(UTC+05:00) ","timezone_Asia/Qyzylorda":"(UTC+05:00) ","timezone_Asia/Yekaterinburg":"(UTC+05:00) ","timezone_Asia/Tashkent":"(UTC+05:00) ","timezone_Asia/Colombo":"(UTC+05:30) ","timezone_Asia/Kolkata":"(UTC+05:30) ","timezone_Asia/Kathmandu":"(UTC+05:45) ","timezone_Asia/Dhaka":"(UTC+06:00) ","timezone_Asia/Omsk":"(UTC+06:00) ","timezone_Asia/Almaty":"(UTC+06:00) ","timezone_Asia/Yangon":"(UTC+06:30) ","timezone_Asia/Krasnoyarsk":"(UTC+07:00) ","timezone_Asia/Barnaul":"(UTC+07:00) -","timezone_Asia/Tomsk":"(UTC+07:00) ","timezone_Asia/Novosibirsk":"(UTC+07:00) ","timezone_Asia/Bangkok":"(UTC+07:00) ","timezone_Asia/Hovd":"(UTC+07:00) ","timezone_Asia/Ulaanbaatar":"(UTC+08:00) ","timezone_Asia/Irkutsk":"(UTC+08:00) ","timezone_Asia/Shanghai":"(UTC+08:00) ","timezone_Asia/Taipei":"(UTC+08:00) ","timezone_Asia/Singapore":"(UTC+08:00) ","timezone_Australia/Perth":"(UTC+08:00) ","timezone_Australia/Eucla":"(UTC+08:45) ","timezone_Asia/Tokyo":"(UTC+09:00) ","timezone_Asia/Pyongyang":"(UTC+09:00) ","timezone_Asia/Chita":"(UTC+09:00) ","timezone_Asia/Yakutsk":"(UTC+09:00) ","timezone_Asia/Seoul":"(UTC+09:00) ","timezone_Australia/Darwin":"(UTC+09:30) ","timezone_Australia/Adelaide":"(UTC+09:30) ","timezone_Pacific/Port_Moresby":"(UTC+10:00) ","timezone_Australia/Sydney":"(UTC+10:00) ","timezone_Australia/Brisbane":"(UTC+10:00) ","timezone_Asia/Vladivostok":"(UTC+10:00) ","timezone_Australia/Hobart":"(UTC+10:00) ","timezone_Australia/Lord_Howe":"(UTC+10:30) ","timezone_Asia/Srednekolymsk":"(UTC+11:00) ","timezone_Pacific/Bougainville":"(UTC+11:00) ","timezone_Pacific/Guadalcanal":"(UTC+11:00) ","timezone_Asia/Sakhalin":"(UTC+11:00) ","timezone_Pacific/Norfolk":"(UTC+11:00) ","timezone_Asia/Magadan":"(UTC+11:00) ","timezone_Etc/GMT-12":"(UTC+12:00) +12","timezone_Pacific/Auckland":"(UTC+12:00) ","timezone_Asia/Kamchatka":"(UTC+12:00) - - ","timezone_Pacific/Fiji":"(UTC+12:00) ","timezone_Pacific/Chatham":"(UTC+12:45) ","timezone_Pacific/Tongatapu":"(UTC+13:00) ","timezone_Etc/GMT-13":"(UTC+13:00) +13","timezone_Pacific/Apia":"(UTC+13:00) ","timezone_Pacific/Kiritimati":"(UTC+14:00) "},dateTimePicker:"$t(dateTimePicker)",moment:"$t(moment)"}}},function(e,t){e.exports={coreui:{editorsLocalization:{collectionEditor:{closeBtnTitle:"",showBtnTitle:"",addBtnText:"",addBtnTitle:"",textEmpty:"",textItems:""}},textUnknownProperty:"",emptyListPlaceholder:"",gridSearchPlaceholder:"",closeSearchBtnTitle:""},moment:{months:["","","","","","","","","","","",""],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],weekdaysMin:["","","","","","",""],weekdays:["","","","","","",""],week:{dow:0}},spreadjs:{ContextMenu:{insertRows:"",deleteRows:""}},dateTimePicker:{quarters:["","","",""],current:["","","","",""],yearTitle:"YYYY",yearMonthTitle:"YYYY M"},dataMonitor:{ui:{tabHeaders:{Basic:"",Notification:"",ExecutionPlan:""},basic:{name:"",namePlaceholder:"",description:"",descriptionPlaceholder:"",monitorValue:"",condition:"",conditionEnums:{equal:"",greater:"",equalOrGreater:"",less:"",equalOrLess:""},threshold:"",thresholdPlaceholder:"",filterInformation:"",filterField:"",filterValue:"",errors:{nameRequired:"",invalidThreshold:""}},executionPlan:{repeat:"",repeatType:{daily:"",monthly:"",advanced:""},dailyEditor:{at:" ${time} ",every:"",hours:"",minutes:""},monthlyEditor:{every:"",months:"",onDay:"",onTheLast:"",onTheFirst:"",lastDay:"",lastWeekday:""},cronExpressionEditor:{cronExpression:"CRON "},start:"",end:"",noEndDate:"",timezone:"",errors:{invalidCronExpression:"CRON"}},notification:{Email:"",WeChat4Work:"",DingTalk:"",MSTeams:"MSTeams",Slack:"Slack",contactsPlaceholder:"",emailPlaceholder:"",contentPlaceholder:"",defaultContent:"$dashboardName$field$value$field $condition $threshold",channel:"",content:"",variables:"",variableItems:{dashboardId:"ID",dashboardName:"",dashboardUrl:"",dataMonitorName:"",field:"",value:"",condition:"",threshold:"",time:""},mechanism:"",everyTime:"",periodTime:"",onlyOnce:"",withinPlaceholder:"",search:"",timeUnit:{day:"",hour:"",minute:"",second:""},errors:{emailInvalid:"",emailDomainInvalid:"",contentRequired:"",withinInvalid:""}},errors:{noValidChannel:"",getContactsFailed:""}},timezone:{"timezone_Etc/GMT+12":"(UTC-12:00) ","timezone_Etc/GMT+11":"(UTC-11:00) -11","timezone_Pacific/Honolulu":"(UTC-10:00) ","timezone_America/Adak":"(UTC-10:00) ","timezone_Pacific/Marquesas":"(UTC-09:30) ","timezone_Etc/GMT+9":"(UTC-09:00) -09","timezone_America/Anchorage":"(UTC-09:00) ","timezone_America/Tijuana":"(UTC-08:00) ","timezone_Etc/GMT+8":"(UTC-08:00) -08","timezone_America/Los_Angeles":"(UTC-08:00) ()","timezone_America/Phoenix":"(UTC-07:00) ","timezone_America/Chihuahua":"(UTC-07:00) ","timezone_America/Denver":"(UTC-07:00) ()","timezone_America/Guatemala":"(UTC-06:00) ","timezone_America/Chicago":"(UTC-06:00) ()","timezone_Pacific/Easter":"(UTC-06:00) ","timezone_America/Mexico_City":"(UTC-06:00) ","timezone_America/Regina":"(UTC-06:00) ","timezone_America/New_York":"(UTC-05:00) ()","timezone_America/Cancun":"(UTC-05:00) ","timezone_America/Indiana/Indianapolis":"(UTC-05:00) ()","timezone_America/Havana":"(UTC-05:00) ","timezone_America/Bogota":"(UTC-05:00) ","timezone_America/Port-au-Prince":"(UTC-05:00) ","timezone_America/Grand_Turk":"(UTC-05:00) ","timezone_America/La_Paz":"(UTC-04:00) ","timezone_America/Asuncion":"(UTC-04:00) ","timezone_America/Caracas":"(UTC-04:00) ","timezone_America/Santiago":"(UTC-04:00) ","timezone_America/Halifax":"(UTC-04:00) ()","timezone_America/Cuiaba":"(UTC-04:00) ","timezone_America/St_Johns":"(UTC-03:30) ","timezone_America/Cayenne":"(UTC-03:00) ","timezone_America/Miquelon":"(UTC-03:00) ","timezone_America/Sao_Paulo":"(UTC-03:00) ","timezone_America/Argentina/Buenos_Aires":"(UTC-03:00) ","timezone_America/Godthab":"(UTC-03:00) ","timezone_America/Bahia":"(UTC-03:00) ","timezone_America/Montevideo":"(UTC-03:00) ","timezone_America/Punta_Arenas":"(UTC-03:00) ","timezone_America/Araguaina":"(UTC-03:00) ","timezone_Etc/GMT+2":"(UTC-02:00)  - ","timezone_Atlantic/Azores":"(UTC-01:00) ","timezone_Atlantic/Cape_Verde":"(UTC-01:00) ","timezone_Etc/UTC":"(UTC) ","timezone_Africa/Sao_Tome":"(UTC+00:00) ","timezone_Atlantic/Reykjavik":"(UTC+00:00) ","timezone_Europe/London":"(UTC+00:00) ","timezone_Africa/Casablanca":"(UTC+01:00) ","timezone_Africa/Lagos":"(UTC+01:00) ","timezone_Europe/Paris":"(UTC+01:00) ","timezone_Europe/Warsaw":"(UTC+01:00) ","timezone_Europe/Budapest":"(UTC+01:00) ","timezone_Europe/Berlin":"(UTC+01:00) ","timezone_Asia/Hebron":"(UTC+02:00) ","timezone_Europe/Kaliningrad":"(UTC+02:00) ","timezone_Africa/Johannesburg":"(UTC+02:00) ","timezone_Africa/Khartoum":"(UTC+02:00) ","timezone_Europe/Chisinau":"(UTC+02:00) ","timezone_Asia/Damascus":"(UTC+02:00) ","timezone_Asia/Amman":"(UTC+02:00) ","timezone_Africa/Cairo":"(UTC+02:00) ","timezone_Africa/Windhoek":"(UTC+02:00) ","timezone_Africa/Tripoli":"(UTC+02:00) ","timezone_Asia/Jerusalem":"(UTC+02:00) ","timezone_Asia/Beirut":"(UTC+02:00) ","timezone_Europe/Kiev":"(UTC+02:00) ","timezone_Europe/Bucharest":"(UTC+02:00) ","timezone_Europe/Istanbul":"(UTC+03:00) ","timezone_Africa/Nairobi":"(UTC+03:00) ","timezone_Asia/Baghdad":"(UTC+03:00) ","timezone_Europe/Minsk":"(UTC+03:00) ","timezone_Asia/Riyadh":"(UTC+03:00) ","timezone_Europe/Moscow":"(UTC+03:00) ","timezone_Asia/Tehran":"(UTC+03:30) ","timezone_Europe/Samara":"(UTC+04:00) ","timezone_Europe/Volgograd":"(UTC+04:00) ","timezone_Asia/Yerevan":"(UTC+04:00) ","timezone_Asia/Baku":"(UTC+04:00) ","timezone_Asia/Tbilisi":"(UTC+04:00) ","timezone_Europe/Saratov":"(UTC+04:00) ","timezone_Indian/Mauritius":"(UTC+04:00) ","timezone_Asia/Dubai":"(UTC+04:00) ","timezone_Europe/Astrakhan":"(UTC+04:00) ","timezone_Asia/Kabul":"(UTC+04:30) ","timezone_Asia/Karachi":"(UTC+05:00) ","timezone_Asia/Qyzylorda":"(UTC+05:00) ","timezone_Asia/Yekaterinburg":"(UTC+05:00) ","timezone_Asia/Tashkent":"(UTC+05:00) ","timezone_Asia/Colombo":"(UTC+05:30) ","timezone_Asia/Kolkata":"(UTC+05:30) ","timezone_Asia/Kathmandu":"(UTC+05:45) ","timezone_Asia/Dhaka":"(UTC+06:00) ","timezone_Asia/Omsk":"(UTC+06:00) ","timezone_Asia/Almaty":"(UTC+06:00) ","timezone_Asia/Yangon":"(UTC+06:30) ","timezone_Asia/Krasnoyarsk":"(UTC+07:00) ","timezone_Asia/Barnaul":"(UTC+07:00) -","timezone_Asia/Tomsk":"(UTC+07:00) ","timezone_Asia/Novosibirsk":"(UTC+07:00) ","timezone_Asia/Bangkok":"(UTC+07:00) ","timezone_Asia/Hovd":"(UTC+07:00) ","timezone_Asia/Ulaanbaatar":"(UTC+08:00) ","timezone_Asia/Irkutsk":"(UTC+08:00) ","timezone_Asia/Shanghai":"(UTC+08:00) ","timezone_Asia/Taipei":"(UTC+08:00) ","timezone_Asia/Singapore":"(UTC+08:00) ","timezone_Australia/Perth":"(UTC+08:00) ","timezone_Australia/Eucla":"(UTC+08:45) ","timezone_Asia/Tokyo":"(UTC+09:00) ","timezone_Asia/Pyongyang":"(UTC+09:00) ","timezone_Asia/Chita":"(UTC+09:00) ","timezone_Asia/Yakutsk":"(UTC+09:00) ","timezone_Asia/Seoul":"(UTC+09:00) ","timezone_Australia/Darwin":"(UTC+09:30) ","timezone_Australia/Adelaide":"(UTC+09:30) ","timezone_Pacific/Port_Moresby":"(UTC+10:00) ","timezone_Australia/Sydney":"(UTC+10:00) ","timezone_Australia/Brisbane":"(UTC+10:00) ","timezone_Asia/Vladivostok":"(UTC+10:00) ","timezone_Australia/Hobart":"(UTC+10:00) ","timezone_Australia/Lord_Howe":"(UTC+10:30) ","timezone_Asia/Srednekolymsk":"(UTC+11:00) ","timezone_Pacific/Bougainville":"(UTC+11:00) ","timezone_Pacific/Guadalcanal":"(UTC+11:00) ","timezone_Asia/Sakhalin":"(UTC+11:00) ","timezone_Pacific/Norfolk":"(UTC+11:00) ","timezone_Asia/Magadan":"(UTC+11:00) ","timezone_Etc/GMT-12":"(UTC+12:00) +12","timezone_Pacific/Auckland":"(UTC+12:00) ","timezone_Asia/Kamchatka":"(UTC+12:00) - - ","timezone_Pacific/Fiji":"(UTC+12:00) ","timezone_Pacific/Chatham":"(UTC+12:45) ","timezone_Pacific/Tongatapu":"(UTC+13:00) ","timezone_Etc/GMT-13":"(UTC+13:00) +13","timezone_Pacific/Apia":"(UTC+13:00) ","timezone_Pacific/Kiritimati":"(UTC+14:00) "},dateTimePicker:"$t(dateTimePicker)",moment:"$t(moment)"}}},function(e,t){e.exports={coreui:{editorsLocalization:{collectionEditor:{closeBtnTitle:"Zamknij",showBtnTitle:"Poka przedmioty",addBtnText:"Dodaj",addBtnTitle:"Dodaj przedmiot",textEmpty:"Kolekcja jest pusta",textItems:"przedmioty"}},textUnknownProperty:"Nieznana waciwo",emptyListPlaceholder:"Pusta Lista",gridSearchPlaceholder:"wpisz tutaj nazwe waciwoci...",closeSearchBtnTitle:"Zamknij"},moment:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],monthsShort:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru"],weekdaysMin:["Nd","Pn","Wt","r","Cz","Pt","So"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],week:{dow:1}},spreadjs:{ContextMenu:{insertRows:"Wstawia",deleteRows:"Skasuj"}},dateTimePicker:{quarters:["Q1","Q2","Q3","Q4"],current:["This Year","This Quarter","This Month","Today","Now"],yearTitle:"YYYY",yearMonthTitle:"M YYYY"},dataMonitor:{ui:{tabHeaders:{Basic:"Basic Information",Notification:"Notification",ExecutionPlan:"Execution Plan"},basic:{name:"Name",namePlaceholder:"Please enter name",description:"Description",descriptionPlaceholder:"Please enter description",monitorValue:"Monitor Value",condition:"Condition",conditionEnums:{equal:"Equal To",greater:"Greater Than",equalOrGreater:"Greater Than or Equal To",less:"Less Than",equalOrLess:"Less Than or Equal To"},threshold:"Threshold",thresholdPlaceholder:"Please enter the threshold",filterInformation:"Filter Information",filterField:"Field",filterValue:"Value",errors:{nameRequired:"Name is required.",invalidThreshold:"Invalid Float."}},executionPlan:{repeat:"Repeat",repeatType:{daily:"Daily",monthly:"Monthly",advanced:"Advanced"},dailyEditor:{at:"At ${time}",every:"Every",hours:"hour(s)",minutes:"minute(s)"},monthlyEditor:{every:"Every",months:"month(s)",onDay:"On day",onTheLast:"On the last",onTheFirst:"On the first",lastDay:"Day",lastWeekday:"Weekday"},cronExpressionEditor:{cronExpression:"CRON Expression"},start:"Start",end:"End",noEndDate:"No End Date",timezone:"Executing Timezone",errors:{invalidCronExpression:"Invalid Cron Expression."}},notification:{Email:"Email",WeChat4Work:"WeCom",DingTalk:"DingTalk",MSTeams:"MSTeams",Slack:"Slack",contactsPlaceholder:"Choose one or more contacts",emailPlaceholder:"Please enter the email addresses separated by semicolons",contentPlaceholder:"Please enter content",defaultContent:"This is an automated message sent to notify you that the $field is now $value and the data monitoring trigger $dataMonitorName with the rule set as ($field $condition $threshold) has been triggered on the $dashboardName.\nThis is an automated message. Please follow the link below to check the dashboard directly.\n$dashboardURL",channel:"Channels",content:"Content",variables:"Variables",variableItems:{dashboardId:"Dashboard Id",dashboardName:"Dashboard Name",dashboardUrl:"Dashboard URL",dataMonitorName:"Monitoring Name",field:"Monitoring field",value:"Monitoring field value",condition:"Condition",threshold:"Threshold",time:"Time"},mechanism:"Options",everyTime:"Notification Every Time",periodTime:"Notification Only Once",onlyOnce:"Within",withinPlaceholder:"Enter a number",search:"Search",timeUnit:{day:"Day(s)",hour:"Hour(s)",minute:"Minute(s)",second:"Second(s)"},errors:{emailInvalid:"Invalid email address.",emailDomainInvalid:"Invalid domain.",contentRequired:"Content is required.",withinInvalid:"Invalid integer."}},errors:{noValidChannel:"There is no notification channels, cannot create data monitoring.",getContactsFailed:"Failed to get contacts."}},timezone:{"timezone_Etc/GMT+12":"(UTC-12:00) International Date Line west","timezone_Etc/GMT+11":"(UTC-11:00) Coordinated Universal Time-11","timezone_America/Adak":"(UTC-10:00) Aleutian Islands","timezone_Pacific/Honolulu":"(UTC-10:00) Hawaii","timezone_Pacific/Marquesas":"(UTC-09:30) Marquesas Islands","timezone_America/Anchorage":"(UTC-09:00) Alaska","timezone_Etc/GMT+9":"(UTC-09:00) Coordinated Universal Time-09","timezone_America/Tijuana":"(UTC-08:00) Baja California","timezone_Etc/GMT+8":"(UTC-08:00) Coordinated Universal Time-08","timezone_America/Los_Angeles":"(UTC-08:00) Pacific Time (US & Canada)","timezone_America/Phoenix":"(UTC-07:00) Arizona","timezone_America/Chihuahua":"(UTC-07:00) Chihuahua, La Paz, Mazatlan","timezone_America/Denver":"(UTC-07:00) Mountain Time (US & Canada)","timezone_America/Guatemala":"(UTC-06:00) Central America","timezone_America/Chicago":"(UTC-06:00) Central Time (US & Canada)","timezone_Pacific/Easter":"(UTC-06:00) Easter Island","timezone_America/Mexico_City":"(UTC-06:00) Guadalajara, Mexico City, Monterrey","timezone_America/Regina":"(UTC-06:00) Saskatchewan","timezone_America/Bogota":"(UTC-05:00) Bogota, Lima, Quito, Rio Branco","timezone_America/Cancun":"(UTC-05:00) Chetumal","timezone_America/New_York":"(UTC-05:00) Eastern Time (US & Canada)","timezone_America/Port-au-Prince":"(UTC-05:00) Haiti","timezone_America/Havana":"(UTC-05:00) Havana","timezone_America/Indiana/Indianapolis":"(UTC-05:00) Indiana (East)","timezone_America/Grand_Turk":"(UTC-05:00) Turks and Caicos","timezone_America/Asuncion":"(UTC-04:00) Asuncion","timezone_America/Halifax":"(UTC-04:00) Atlantic Time (Canada)","timezone_America/Caracas":"(UTC-04:00) Caracas","timezone_America/Cuiaba":"(UTC-04:00) Cuiaba","timezone_America/La_Paz":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","timezone_America/Santiago":"(UTC-04:00) Santiago","timezone_America/St_Johns":"(UTC-03:30) Newfoundland","timezone_America/Araguaina":"(UTC-03:00) Araguaina","timezone_America/Sao_Paulo":"(UTC-03:00) Brasilia","timezone_America/Cayenne":"(UTC-03:00) Cayenne, Fortaleza","timezone_America/Argentina/Buenos_Aires":"(UTC-03:00) City of Buenos Aires","timezone_America/Godthab":"(UTC-03:00) Greenland","timezone_America/Montevideo":"(UTC-03:00) Montevideo","timezone_America/Punta_Arenas":"(UTC-03:00) Punta Arenas","timezone_America/Miquelon":"(UTC-03:00) Saint Pierre and Miquelon","timezone_America/Bahia":"(UTC-03:00) Salvador","timezone_Etc/GMT+2":"(UTC-02:00) Coordinated Universal Time-02","timezone_Atlantic/Azores":"(UTC-01:00) Azores","timezone_Atlantic/Cape_Verde":"(UTC-01:00) Cabo Verde Is.","timezone_Etc/UTC":"(UTC) Coordinated Universal Time","timezone_Europe/London":"(UTC+00:00) Dublin, Edinburgh, Lisbon, London","timezone_Atlantic/Reykjavik":"(UTC+00:00) Monrovia, Reykjavik","timezone_Africa/Sao_Tome":"(UTC+00:00) Sao Tome","timezone_Africa/Casablanca":"(UTC+01:00) Casablanca","timezone_Europe/Berlin":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","timezone_Europe/Budapest":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","timezone_Europe/Paris":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","timezone_Europe/Warsaw":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","timezone_Africa/Lagos":"(UTC+01:00) West Central Africa","timezone_Asia/Amman":"(UTC+02:00) Amman","timezone_Europe/Bucharest":"(UTC+02:00) Athens, Bucharest","timezone_Asia/Beirut":"(UTC+02:00) Beirut","timezone_Africa/Cairo":"(UTC+02:00) Cairo","timezone_Europe/Chisinau":"(UTC+02:00) Chisinau","timezone_Asia/Damascus":"(UTC+02:00) Damascus","timezone_Asia/Hebron":"(UTC+02:00) Gaza, Hebron","timezone_Africa/Johannesburg":"(UTC+02:00) Harare, Pretoria","timezone_Europe/Kiev":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","timezone_Asia/Jerusalem":"(UTC+02:00) Jerusalem","timezone_Europe/Kaliningrad":"(UTC+02:00) Kaliningrad","timezone_Africa/Khartoum":"(UTC+02:00) Khartoum","timezone_Africa/Tripoli":"(UTC+02:00) Tripoli","timezone_Africa/Windhoek":"(UTC+02:00) Windhoek","timezone_Asia/Baghdad":"(UTC+03:00) Baghdad","timezone_Europe/Istanbul":"(UTC+03:00) Istanbul","timezone_Asia/Riyadh":"(UTC+03:00) Kuwait, Riyadh","timezone_Europe/Minsk":"(UTC+03:00) Minsk","timezone_Europe/Moscow":"(UTC+03:00) Moscow, St. Petersburg","timezone_Africa/Nairobi":"(UTC+03:00) Nairobi","timezone_Asia/Tehran":"(UTC+03:30) Tehran","timezone_Asia/Dubai":"(UTC+04:00) Abu Dhabi, Muscat","timezone_Europe/Astrakhan":"(UTC+04:00) Astrakhan, Ulyanovsk","timezone_Asia/Baku":"(UTC+04:00) Baku","timezone_Europe/Samara":"(UTC+04:00) Izhevsk, Samara","timezone_Indian/Mauritius":"(UTC+04:00) Port Louis","timezone_Europe/Saratov":"(UTC+04:00) Saratov","timezone_Asia/Tbilisi":"(UTC+04:00) Tbilisi","timezone_Europe/Volgograd":"(UTC+04:00) Volgograd","timezone_Asia/Yerevan":"(UTC+04:00) Yerevan","timezone_Asia/Kabul":"(UTC+04:30) Kabul","timezone_Asia/Tashkent":"(UTC+05:00) Ashgabat, Tashkent","timezone_Asia/Yekaterinburg":"(UTC+05:00) Ekaterinburg","timezone_Asia/Karachi":"(UTC+05:00) Islamabad, Karachi","timezone_Asia/Qyzylorda":"(UTC+05:00) Qyzylorda","timezone_Asia/Kolkata":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","timezone_Asia/Colombo":"(UTC+05:30) Sri Jayawardenepura","timezone_Asia/Kathmandu":"(UTC+05:45) Kathmandu","timezone_Asia/Almaty":"(UTC+06:00) Astana","timezone_Asia/Dhaka":"(UTC+06:00) Dhaka","timezone_Asia/Omsk":"(UTC+06:00) Omsk","timezone_Asia/Yangon":"(UTC+06:30) Yangon (Rangoon)","timezone_Asia/Bangkok":"(UTC+07:00) Bangkok, Hanoi, Jakarta","timezone_Asia/Barnaul":"(UTC+07:00) Barnaul, Gorno-Altaysk","timezone_Asia/Hovd":"(UTC+07:00) Hovd","timezone_Asia/Krasnoyarsk":"(UTC+07:00) Krasnoyarsk","timezone_Asia/Novosibirsk":"(UTC+07:00) Novosibirsk","timezone_Asia/Tomsk":"(UTC+07:00) Tomsk","timezone_Asia/Shanghai":"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi","timezone_Asia/Irkutsk":"(UTC+08:00) Irkutsk","timezone_Asia/Singapore":"(UTC+08:00) Kuala Lumpur, Singapore","timezone_Australia/Perth":"(UTC+08:00) Perth","timezone_Asia/Taipei":"(UTC+08:00) Taipei","timezone_Asia/Ulaanbaatar":"(UTC+08:00) Ulaanbaatar","timezone_Australia/Eucla":"(UTC+08:45) Eucla","timezone_Asia/Chita":"(UTC+09:00) Chita","timezone_Asia/Tokyo":"(UTC+09:00) Osaka, Sapporo, Tokyo","timezone_Asia/Pyongyang":"(UTC+09:00) Pyongyang","timezone_Asia/Seoul":"(UTC+09:00) Seoul","timezone_Asia/Yakutsk":"(UTC+09:00) Yakutsk","timezone_Australia/Adelaide":"(UTC+09:30) Adelaide","timezone_Australia/Darwin":"(UTC+09:30) Darwin","timezone_Australia/Brisbane":"(UTC+10:00) Brisbane","timezone_Australia/Sydney":"(UTC+10:00) Canberra, Melbourne, Sydney","timezone_Pacific/Port_Moresby":"(UTC+10:00) Guam, Port Moresby","timezone_Australia/Hobart":"(UTC+10:00) Hobart","timezone_Asia/Vladivostok":"(UTC+10:00) Vladivostok","timezone_Australia/Lord_Howe":"(UTC+10:30) Lord Howe Island","timezone_Pacific/Bougainville":"(UTC+11:00) Bougainville Island","timezone_Asia/Srednekolymsk":"(UTC+11:00) Chokurdakh","timezone_Asia/Magadan":"(UTC+11:00) Magadan","timezone_Pacific/Norfolk":"(UTC+11:00) Norfolk Island","timezone_Asia/Sakhalin":"(UTC+11:00) Sakhalin","timezone_Pacific/Guadalcanal":"(UTC+11:00) Solomon Is., New Caledonia","timezone_Asia/Kamchatka":"(UTC+12:00) Anadyr, Petropavlovsk-Kamchatsky","timezone_Pacific/Auckland":"(UTC+12:00) Auckland, Wellington","timezone_Etc/GMT-12":"(UTC+12:00) Coordinated Universal Time+12","timezone_Pacific/Fiji":"(UTC+12:00) Fiji","timezone_Pacific/Chatham":"(UTC+12:45) Chatham Islands","timezone_Etc/GMT-13":"(UTC+13:00) Coordinated Universal Time+13","timezone_Pacific/Tongatapu":"(UTC+13:00) Nuku'alofa","timezone_Pacific/Apia":"(UTC+13:00) Samoa","timezone_Pacific/Kiritimati":"(UTC+14:00) Kiritimati Island"},dateTimePicker:"$t(dateTimePicker)",moment:"$t(moment)"}}},function(e,t){e.exports={coreui:{editorsLocalization:{collectionEditor:{closeBtnTitle:"Close",showBtnTitle:"Show Items",addBtnText:"Add",addBtnTitle:"Add Item",textEmpty:"Collection is empty",textItems:"items"}},textUnknownProperty:"Unknown Property",emptyListPlaceholder:"Empty List",gridSearchPlaceholder:"enter property name here...",closeSearchBtnTitle:"Close"},moment:{months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthsShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],weekdaysMin:["do","lu","ma","mi","ju","vi","s"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],week:{dow:1}},spreadjs:{ContextMenu:{insertRows:"Insert",deleteRows:"Delete"}},dateTimePicker:{quarters:["Q1","Q2","Q3","Q4"],current:["This Year","This Quarter","This Month","Today","Now"],yearTitle:"YYYY",yearMonthTitle:"M YYYY"},dataMonitor:{ui:{tabHeaders:{Basic:"Basic Information",Notification:"Notification",ExecutionPlan:"Execution Plan"},basic:{name:"Name",namePlaceholder:"Please enter name",description:"Description",descriptionPlaceholder:"Please enter description",monitorValue:"Monitor Value",condition:"Condition",conditionEnums:{equal:"Equal To",greater:"Greater Than",equalOrGreater:"Greater Than or Equal To",less:"Less Than",equalOrLess:"Less Than or Equal To"},threshold:"Threshold",thresholdPlaceholder:"Please enter the threshold",filterInformation:"Filter Information",filterField:"Field",filterValue:"Value",errors:{nameRequired:"Name is required.",invalidThreshold:"Invalid Float."}},executionPlan:{repeat:"Repeat",repeatType:{daily:"Daily",monthly:"Monthly",advanced:"Advanced"},dailyEditor:{at:"At ${time}",every:"Every",hours:"hour(s)",minutes:"minute(s)"},monthlyEditor:{every:"Every",months:"month(s)",onDay:"On day",onTheLast:"On the last",onTheFirst:"On the first",lastDay:"Day",lastWeekday:"Weekday"},cronExpressionEditor:{cronExpression:"CRON Expression"},start:"Start",end:"End",noEndDate:"No End Date",timezone:"Executing Timezone",errors:{invalidCronExpression:"Invalid Cron Expression."}},notification:{Email:"Email",WeChat4Work:"WeCom",DingTalk:"DingTalk",MSTeams:"MSTeams",Slack:"Slack",contactsPlaceholder:"Choose one or more contacts",emailPlaceholder:"Please enter the email addresses separated by semicolons",contentPlaceholder:"Please enter content",defaultContent:"This is an automated message sent to notify you that the $field is now $value and the data monitoring trigger $dataMonitorName with the rule set as ($field $condition $threshold) has been triggered on the $dashboardName.\nThis is an automated message. Please follow the link below to check the dashboard directly.\n$dashboardURL",channel:"Channels",content:"Content",variables:"Variables",variableItems:{dashboardId:"Dashboard Id",dashboardName:"Dashboard Name",dashboardUrl:"Dashboard URL",dataMonitorName:"Monitoring Name",field:"Monitoring field",value:"Monitoring field value",condition:"Condition",threshold:"Threshold",time:"Time"},mechanism:"Options",everyTime:"Notification Every Time",periodTime:"Notification Only Once",onlyOnce:"Within",withinPlaceholder:"Enter a number",search:"Search",timeUnit:{day:"Day(s)",hour:"Hour(s)",minute:"Minute(s)",second:"Second(s)"},errors:{emailInvalid:"Invalid email address.",emailDomainInvalid:"Invalid domain.",contentRequired:"Content is required.",withinInvalid:"Invalid integer."}},errors:{noValidChannel:"There is no notification channels, cannot create data monitoring.",getContactsFailed:"Failed to get contacts."}},timezone:{"timezone_Etc/GMT+12":"(UTC-12:00) International Date Line west","timezone_Etc/GMT+11":"(UTC-11:00) Coordinated Universal Time-11","timezone_America/Adak":"(UTC-10:00) Aleutian Islands","timezone_Pacific/Honolulu":"(UTC-10:00) Hawaii","timezone_Pacific/Marquesas":"(UTC-09:30) Marquesas Islands","timezone_America/Anchorage":"(UTC-09:00) Alaska","timezone_Etc/GMT+9":"(UTC-09:00) Coordinated Universal Time-09","timezone_America/Tijuana":"(UTC-08:00) Baja California","timezone_Etc/GMT+8":"(UTC-08:00) Coordinated Universal Time-08","timezone_America/Los_Angeles":"(UTC-08:00) Pacific Time (US & Canada)","timezone_America/Phoenix":"(UTC-07:00) Arizona","timezone_America/Chihuahua":"(UTC-07:00) Chihuahua, La Paz, Mazatlan","timezone_America/Denver":"(UTC-07:00) Mountain Time (US & Canada)","timezone_America/Guatemala":"(UTC-06:00) Central America","timezone_America/Chicago":"(UTC-06:00) Central Time (US & Canada)","timezone_Pacific/Easter":"(UTC-06:00) Easter Island","timezone_America/Mexico_City":"(UTC-06:00) Guadalajara, Mexico City, Monterrey","timezone_America/Regina":"(UTC-06:00) Saskatchewan","timezone_America/Bogota":"(UTC-05:00) Bogota, Lima, Quito, Rio Branco","timezone_America/Cancun":"(UTC-05:00) Chetumal","timezone_America/New_York":"(UTC-05:00) Eastern Time (US & Canada)","timezone_America/Port-au-Prince":"(UTC-05:00) Haiti","timezone_America/Havana":"(UTC-05:00) Havana","timezone_America/Indiana/Indianapolis":"(UTC-05:00) Indiana (East)","timezone_America/Grand_Turk":"(UTC-05:00) Turks and Caicos","timezone_America/Asuncion":"(UTC-04:00) Asuncion","timezone_America/Halifax":"(UTC-04:00) Atlantic Time (Canada)","timezone_America/Caracas":"(UTC-04:00) Caracas","timezone_America/Cuiaba":"(UTC-04:00) Cuiaba","timezone_America/La_Paz":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","timezone_America/Santiago":"(UTC-04:00) Santiago","timezone_America/St_Johns":"(UTC-03:30) Newfoundland","timezone_America/Araguaina":"(UTC-03:00) Araguaina","timezone_America/Sao_Paulo":"(UTC-03:00) Brasilia","timezone_America/Cayenne":"(UTC-03:00) Cayenne, Fortaleza","timezone_America/Argentina/Buenos_Aires":"(UTC-03:00) City of Buenos Aires","timezone_America/Godthab":"(UTC-03:00) Greenland","timezone_America/Montevideo":"(UTC-03:00) Montevideo","timezone_America/Punta_Arenas":"(UTC-03:00) Punta Arenas","timezone_America/Miquelon":"(UTC-03:00) Saint Pierre and Miquelon","timezone_America/Bahia":"(UTC-03:00) Salvador","timezone_Etc/GMT+2":"(UTC-02:00) Coordinated Universal Time-02","timezone_Atlantic/Azores":"(UTC-01:00) Azores","timezone_Atlantic/Cape_Verde":"(UTC-01:00) Cabo Verde Is.","timezone_Etc/UTC":"(UTC) Coordinated Universal Time","timezone_Europe/London":"(UTC+00:00) Dublin, Edinburgh, Lisbon, London","timezone_Atlantic/Reykjavik":"(UTC+00:00) Monrovia, Reykjavik","timezone_Africa/Sao_Tome":"(UTC+00:00) Sao Tome","timezone_Africa/Casablanca":"(UTC+01:00) Casablanca","timezone_Europe/Berlin":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","timezone_Europe/Budapest":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","timezone_Europe/Paris":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","timezone_Europe/Warsaw":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","timezone_Africa/Lagos":"(UTC+01:00) West Central Africa","timezone_Asia/Amman":"(UTC+02:00) Amman","timezone_Europe/Bucharest":"(UTC+02:00) Athens, Bucharest","timezone_Asia/Beirut":"(UTC+02:00) Beirut","timezone_Africa/Cairo":"(UTC+02:00) Cairo","timezone_Europe/Chisinau":"(UTC+02:00) Chisinau","timezone_Asia/Damascus":"(UTC+02:00) Damascus","timezone_Asia/Hebron":"(UTC+02:00) Gaza, Hebron","timezone_Africa/Johannesburg":"(UTC+02:00) Harare, Pretoria","timezone_Europe/Kiev":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","timezone_Asia/Jerusalem":"(UTC+02:00) Jerusalem","timezone_Europe/Kaliningrad":"(UTC+02:00) Kaliningrad","timezone_Africa/Khartoum":"(UTC+02:00) Khartoum","timezone_Africa/Tripoli":"(UTC+02:00) Tripoli","timezone_Africa/Windhoek":"(UTC+02:00) Windhoek","timezone_Asia/Baghdad":"(UTC+03:00) Baghdad","timezone_Europe/Istanbul":"(UTC+03:00) Istanbul","timezone_Asia/Riyadh":"(UTC+03:00) Kuwait, Riyadh","timezone_Europe/Minsk":"(UTC+03:00) Minsk","timezone_Europe/Moscow":"(UTC+03:00) Moscow, St. Petersburg","timezone_Africa/Nairobi":"(UTC+03:00) Nairobi","timezone_Asia/Tehran":"(UTC+03:30) Tehran","timezone_Asia/Dubai":"(UTC+04:00) Abu Dhabi, Muscat","timezone_Europe/Astrakhan":"(UTC+04:00) Astrakhan, Ulyanovsk","timezone_Asia/Baku":"(UTC+04:00) Baku","timezone_Europe/Samara":"(UTC+04:00) Izhevsk, Samara","timezone_Indian/Mauritius":"(UTC+04:00) Port Louis","timezone_Europe/Saratov":"(UTC+04:00) Saratov","timezone_Asia/Tbilisi":"(UTC+04:00) Tbilisi","timezone_Europe/Volgograd":"(UTC+04:00) Volgograd","timezone_Asia/Yerevan":"(UTC+04:00) Yerevan","timezone_Asia/Kabul":"(UTC+04:30) Kabul","timezone_Asia/Tashkent":"(UTC+05:00) Ashgabat, Tashkent","timezone_Asia/Yekaterinburg":"(UTC+05:00) Ekaterinburg","timezone_Asia/Karachi":"(UTC+05:00) Islamabad, Karachi","timezone_Asia/Qyzylorda":"(UTC+05:00) Qyzylorda","timezone_Asia/Kolkata":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","timezone_Asia/Colombo":"(UTC+05:30) Sri Jayawardenepura","timezone_Asia/Kathmandu":"(UTC+05:45) Kathmandu","timezone_Asia/Almaty":"(UTC+06:00) Astana","timezone_Asia/Dhaka":"(UTC+06:00) Dhaka","timezone_Asia/Omsk":"(UTC+06:00) Omsk","timezone_Asia/Yangon":"(UTC+06:30) Yangon (Rangoon)","timezone_Asia/Bangkok":"(UTC+07:00) Bangkok, Hanoi, Jakarta","timezone_Asia/Barnaul":"(UTC+07:00) Barnaul, Gorno-Altaysk","timezone_Asia/Hovd":"(UTC+07:00) Hovd","timezone_Asia/Krasnoyarsk":"(UTC+07:00) Krasnoyarsk","timezone_Asia/Novosibirsk":"(UTC+07:00) Novosibirsk","timezone_Asia/Tomsk":"(UTC+07:00) Tomsk","timezone_Asia/Shanghai":"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi","timezone_Asia/Irkutsk":"(UTC+08:00) Irkutsk","timezone_Asia/Singapore":"(UTC+08:00) Kuala Lumpur, Singapore","timezone_Australia/Perth":"(UTC+08:00) Perth","timezone_Asia/Taipei":"(UTC+08:00) Taipei","timezone_Asia/Ulaanbaatar":"(UTC+08:00) Ulaanbaatar","timezone_Australia/Eucla":"(UTC+08:45) Eucla","timezone_Asia/Chita":"(UTC+09:00) Chita","timezone_Asia/Tokyo":"(UTC+09:00) Osaka, Sapporo, Tokyo","timezone_Asia/Pyongyang":"(UTC+09:00) Pyongyang","timezone_Asia/Seoul":"(UTC+09:00) Seoul","timezone_Asia/Yakutsk":"(UTC+09:00) Yakutsk","timezone_Australia/Adelaide":"(UTC+09:30) Adelaide","timezone_Australia/Darwin":"(UTC+09:30) Darwin","timezone_Australia/Brisbane":"(UTC+10:00) Brisbane","timezone_Australia/Sydney":"(UTC+10:00) Canberra, Melbourne, Sydney","timezone_Pacific/Port_Moresby":"(UTC+10:00) Guam, Port Moresby","timezone_Australia/Hobart":"(UTC+10:00) Hobart","timezone_Asia/Vladivostok":"(UTC+10:00) Vladivostok","timezone_Australia/Lord_Howe":"(UTC+10:30) Lord Howe Island","timezone_Pacific/Bougainville":"(UTC+11:00) Bougainville Island","timezone_Asia/Srednekolymsk":"(UTC+11:00) Chokurdakh","timezone_Asia/Magadan":"(UTC+11:00) Magadan","timezone_Pacific/Norfolk":"(UTC+11:00) Norfolk Island","timezone_Asia/Sakhalin":"(UTC+11:00) Sakhalin","timezone_Pacific/Guadalcanal":"(UTC+11:00) Solomon Is., New Caledonia","timezone_Asia/Kamchatka":"(UTC+12:00) Anadyr, Petropavlovsk-Kamchatsky","timezone_Pacific/Auckland":"(UTC+12:00) Auckland, Wellington","timezone_Etc/GMT-12":"(UTC+12:00) Coordinated Universal Time+12","timezone_Pacific/Fiji":"(UTC+12:00) Fiji","timezone_Pacific/Chatham":"(UTC+12:45) Chatham Islands","timezone_Etc/GMT-13":"(UTC+13:00) Coordinated Universal Time+13","timezone_Pacific/Tongatapu":"(UTC+13:00) Nuku'alofa","timezone_Pacific/Apia":"(UTC+13:00) Samoa","timezone_Pacific/Kiritimati":"(UTC+14:00) Kiritimati Island"},dateTimePicker:"$t(dateTimePicker)",moment:"$t(moment)"}}},function(e,t){e.exports={license:{textA:"Wyn,",textB:"400-657-6008"}}},function(e,t){e.exports={license:{textA:"Wyn,",textB:"400-657-6008"}}},function(e,t){e.exports={license:{textA:"Powered by Wyn Enterprise evaluation edition.",textB:"Not licensed for production use."}}},function(e,t){e.exports={license:{textA:"Powered by Wyn Enterprise evaluation edition.",textB:"Not licensed for production use."}}},function(e,t,a){var o=a(80);e.exports=function(e,t){if(null==e)return{};var a,n,i=o(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],0<=t.indexOf(a)||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=WynBi.__libs.Common.WebFontLoader},function(e,t){e.exports=WynBi.__libs.Common.WYNUtils},function(e,t){e.exports=WynBi.__libs.Common.Reselect},function(e,t){e.exports=WynBi.__libs.Common.GCESWAXExpression},function(e,t){e.exports=WynBi.__libs.Common.GCESDataMonitorEditor},function(e,t){e.exports={matrix:{columns:[{headers:[],levels:[]},{headers:[{column:"Type",label:"T1",type:"Grouping",next:[]},{column:"Type",label:"T2",type:"Grouping",next:[]},{column:"Type",label:"T3",type:"Grouping",next:[]},{column:"Type",label:"T4",type:"Grouping",next:[]},{column:"Type",label:"T5",type:"Grouping",next:[]},{column:"Type",label:"T6",type:"Grouping",next:[]}],levels:["Type"]}],rows:{headers:[{column:"Row",label:"A1",type:"Grouping",next:[]},{column:"Row",label:"A2",type:"Grouping",next:[]},{column:"Row",label:"A3",type:"Grouping",next:[]},{column:"Row",label:"A4",type:"Grouping",next:[]},{column:"Row",label:"A5",type:"Grouping",next:[]},{column:"Row",label:"A6",type:"Grouping",next:[]},{column:"Row",label:"A7",type:"Grouping",next:[]}],levels:["Row"]},values:[[{Row:"A1",Number:1167},{Row:"A2",Number:3258},{Row:"A3",Number:2979},{Row:"A4",Number:480},{Row:"A5",Number:698},{Row:"A6",Number:1364},{Row:"A7",Number:555}],[{Type:"T1",Row:"A1",Value:275},{Type:"T1",Row:"A2",Value:514},{Type:"T1",Row:"A3",Value:632},{Type:"T1",Row:"A4",Value:150},{Type:"T1",Row:"A5",Value:222},{Type:"T1",Row:"A6",Value:203},{Type:"T1",Row:"A7",Value:157},{Type:"T2",Row:"A1",Value:201},{Type:"T2",Row:"A2",Value:509},{Type:"T2",Row:"A3",Value:448},{Type:"T2",Row:"A4",Value:88},{Type:"T2",Row:"A5",Value:80},{Type:"T2",Row:"A6",Value:177},{Type:"T2",Row:"A7",Value:59},{Type:"T3",Row:"A1",Value:238},{Type:"T3",Row:"A2",Value:612},{Type:"T3",Row:"A3",Value:452},{Type:"T3",Row:"A4",Value:33},{Type:"T3",Row:"A5",Value:117},{Type:"T3",Row:"A6",Value:243},{Type:"T3",Row:"A7",Value:60},{Type:"T4",Row:"A1",Value:207},{Type:"T4",Row:"A2",Value:630},{Type:"T4",Row:"A3",Value:594},{Type:"T4",Row:"A4",Value:106},{Type:"T4",Row:"A5",Value:76},{Type:"T4",Row:"A6",Value:239},{Type:"T4",Row:"A7",Value:104},{Type:"T5",Row:"A1",Value:105},{Type:"T5",Row:"A2",Value:522},{Type:"T5",Row:"A3",Value:316},{Type:"T5",Row:"A4",Value:40},{Type:"T5",Row:"A5",Value:101},{Type:"T5",Row:"A6",Value:172},{Type:"T5",Row:"A7",Value:102},{Type:"T6",Row:"A1",Value:141},{Type:"T6",Row:"A2",Value:471},{Type:"T6",Row:"A3",Value:537},{Type:"T6",Row:"A4",Value:63},{Type:"T6",Row:"A5",Value:102},{Type:"T6",Row:"A6",Value:330},{Type:"T6",Row:"A7",Value:73}]]},profile:[{name:"value",variant:"Template",options:{type:"number"},roles:{value:{values:[{display:"Number",name:"Value",category:1,valueType:1,originalItem:{name:"Value",valueType:1,method:"sum",idx:1},method:"sum",format:"General",options:{}}],options:{}},rows:{options:{},values:[{display:"Row",name:"Row",category:2,valueType:1,originalItem:{name:"Row",valueType:1},format:"@",options:{}}]}}},{name:"commonChart",variant:"Template",options:{type:"line",display:"Graph"},roles:{chartValue:{values:[{display:"Value",name:"Value",category:1,valueType:1,originalItem:{name:"Value",valueType:1,method:"sum",idx:0},method:"sum",format:"General",options:{}}],options:{}},chartCategory:{values:[{display:"Type",name:"Type",category:2,valueType:1,originalItem:{name:"Type",valueType:1},format:"@",options:{}}],options:{}},rows:{options:{},values:[{display:"Row",name:"Row",category:2,valueType:1,originalItem:{name:"Row",valueType:1},format:"@",options:{}}]}}}]}},function(e,t,a){e.exports=a(113)},function(e,t,a){var n=a(42);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,r=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return r}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var n=a(8);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var n=a(18).default,i=a(15);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){"DashboardDesigner"===p$.clazz?(p$.reduxDocPath="undo.present",p$.isViewer=!1):(p$.reduxDocPath="docData",p$.isViewer=!0),p$.edition=p$.config.edition},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,(e.exports=a).id=79},function(e,t){e.exports=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],0<=t.indexOf(a)||(i[a]=e[a]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){var o=a(48),i=a(82),n={};for(var r in o)o.hasOwnProperty(r)&&(n[o[r]]=r);var s=e.exports={to:{},get:{}};function l(e,t,a){return Math.min(Math.max(t,e),a)}function u(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}s.get=function(e){var t,a;switch(e.substring(0,3).toLowerCase()){case"hsl":t=s.get.hsl(e),a="hsl";break;case"hwb":t=s.get.hwb(e),a="hwb";break;default:t=s.get.rgb(e),a="rgb"}return t?{model:a,value:t}:null},s.get.rgb=function(e){if(!e)return null;var t,a,n,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=t[2],t=t[1],a=0;a<3;a++){var r=2*a;i[a]=parseInt(t.slice(r,2+r),16)}n&&(i[3]=Math.round(parseInt(n,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(n=(t=t[1])[3],a=0;a<3;a++)i[a]=parseInt(t[a]+t[a],16);n&&(i[3]=Math.round(parseInt(n+n,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(a=0;a<3;a++)i[a]=parseInt(t[a+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=o[t[1]])?(i[3]=1,i):null:null;for(a=0;a<3;a++)i[a]=Math.round(2.55*parseFloat(t[a+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(a=0;a<3;a++)i[a]=l(i[a],0,255);return i[3]=l(i[3],0,1),i},s.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var a=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(a)?1:a,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var a=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(a)?1:a,0,1)]}return null},s.to.hex=function(){var e=i(arguments);return"#"+u(e[0])+u(e[1])+u(e[2])+(e[3]<1?u(Math.round(255*e[3])):"")},s.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),a=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+a+"%, "+n+"%)":"rgba("+t+"%, "+a+"%, "+n+"%, "+e[3]+")"},s.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(){var e=i(arguments),t="";return 4<=e.length&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},s.to.keyword=function(e){return n[e.slice(0,3)]}},function(e,t,a){"use strict";var r=a(83),o=Array.prototype.concat,s=Array.prototype.slice,n=e.exports=function(e){for(var t=[],a=0,n=e.length;a<n;a++){var i=e[a];r(i)?t=o.call(t,s.call(i)):t.push(i)}return t};n.wrap=function(e){return function(){return e(n(arguments))}}},function(e,t){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||0<=e.length&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,a){var i=a(49),r=a(85),o={};function s(t){function e(e){return null==e?e:(1<arguments.length&&(e=Array.prototype.slice.call(arguments)),t(e))}return"conversion"in t&&(e.conversion=t.conversion),e}function l(i){function e(e){if(null==e)return e;1<arguments.length&&(e=Array.prototype.slice.call(arguments));var t=i(e);if("object"==typeof t)for(var a=t.length,n=0;n<a;n++)t[n]=Math.round(t[n]);return t}return"conversion"in i&&(e.conversion=i.conversion),e}Object.keys(i).forEach(function(a){o[a]={},Object.defineProperty(o[a],"channels",{value:i[a].channels}),Object.defineProperty(o[a],"labels",{value:i[a].labels});var n=r(a);Object.keys(n).forEach(function(e){var t=n[e];o[a][e]=l(t),o[a][e].raw=s(t)})}),e.exports=o},function(e,t,a){var u=a(49);function s(e){var t=function(){for(var e={},t=Object.keys(u),a=t.length,n=0;n<a;n++)e[t[n]]={distance:-1,parent:null};return e}(),a=[e];for(t[e].distance=0;a.length;)for(var n=a.pop(),i=Object.keys(u[n]),r=i.length,o=0;o<r;o++){var s=i[o],l=t[s];-1===l.distance&&(l.distance=t[n].distance+1,l.parent=n,a.unshift(s))}return t}function r(t,a){return function(e){return a(t(e))}}function l(e,t){for(var a=[t[e].parent,e],n=u[t[e].parent][e],i=t[e].parent;t[i].parent;)a.unshift(t[i].parent),n=r(u[t[i].parent][i],n),i=t[i].parent;return n.conversion=a,n}e.exports=function(e){for(var t=s(e),a={},n=Object.keys(t),i=n.length,r=0;r<i;r++){var o=n[r];null!==t[o].parent&&(a[o]=l(o,t))}return a}},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"editionVersion",function(){return Xr}),a.d(n,"dashboardOptions",function(){return Zr}),a.d(n,"scenarioOptions",function(){return $r}),a.d(n,"designerSettings",function(){return Qr}),a.d(n,"showOnlineTabInSwitchMap",function(){return eo}),a.d(n,"showBuiltInTabInSwitchMap",function(){return to}),a.d(n,"showTemplateTabInWebContent",function(){return ao}),a.d(n,"showWebContent",function(){return no}),a.d(n,"displayUnit",function(){return io}),a.d(n,"currencySymbol",function(){return ro}),a.d(n,"nonePatternAggMethods",function(){return oo}),a.d(n,"fontFamily",function(){return so});var i={};a.r(i),a.d(i,"editionVersion",function(){return lo}),a.d(i,"dashboardOptions",function(){return co}),a.d(i,"scenarioOptions",function(){return po}),a.d(i,"designerSettings",function(){return uo}),a.d(i,"showOnlineTabInSwitchMap",function(){return ho}),a.d(i,"showBuiltInTabInSwitchMap",function(){return yo}),a.d(i,"showTemplateTabInWebContent",function(){return go}),a.d(i,"showWebContent",function(){return mo}),a.d(i,"displayUnit",function(){return fo}),a.d(i,"currencySymbol",function(){return vo}),a.d(i,"nonePatternAggMethods",function(){return bo}),a.d(i,"fontFamily",function(){return Co});var r={};a.r(r),a.d(r,"findChildNodeId",function(){return nd}),a.d(r,"findNodeById",function(){return id}),a.d(r,"getHierarchyNodes",function(){return od}),a.d(r,"getOfflineData",function(){return sd}),a.d(r,"getDefaultMapHierarchyInfo",function(){return ld}),a.d(r,"getCheckedNodeDisplay",function(){return ud}),a.d(r,"findMapInfo",function(){return cd}),a.d(r,"fetchGeoJson",function(){return pd});var c={};a.r(c),a.d(c,"MergedSourceDecorator",function(){return BM}),a.d(c,"SpreadSourceDecorator",function(){return RF}),a.d(c,"SlicerCustomDataSourceDecorator",function(){return OF}),a.d(c,"RangeCustomDataSourceDecorator",function(){return BF});var y={};a.r(y),a.d(y,"getMapId",function(){return aj}),a.d(y,"getGeoName",function(){return nj}),a.d(y,"findGradientRange",function(){return ij}),a.d(y,"buildRange",function(){return rj}),a.d(y,"buildPalette",function(){return oj}),a.d(y,"mapDataProcessor",function(){return pj}),a.d(y,"getMapDataFromScenario",function(){return hj});var o=a(7),R=a.n(o),s=a(14),N=a.n(s),l=a(2),I=a.n(l),u=a(3),D=a.n(u),d=a(8),b=a.n(d),p=a(9),C=a.n(p),h=a(4),k=a.n(h),g=a(5),w=a.n(g),m=(a(77),a(23)),f=a.n(m),H=a(0),ae=a(1),v=a(18),E=a.n(v),T=a(6),V=a.n(T),S=a(12),F=a.n(S);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&t.push.apply(t,Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.forEach(function(e){var t,a,n;t=i,n=r[a=e],a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n})}return i}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,a){return t&&A(e.prototype,t),a&&A(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}var K={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}};function j(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};x(this,j),this.init(e,t)}var W=new(P(j,[{key:"init",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};this.prefix=a.prefix||"i18next:",this.logger=e||K,this.options=a,this.debug=a.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,a,n){return n&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(a).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(e){return new j(this.logger,B({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),j),G=(P(Y,[{key:"on",value:function(e,t){var a=this;return e.split(" ").forEach(function(e){a.observers[e]=a.observers[e]||[],a.observers[e].push(t)}),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter(function(e){return e!==t}):delete this.observers[e])}},{key:"emit",value:function(t){for(var e=arguments.length,a=new Array(1<e?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];this.observers[t]&&[].concat(this.observers[t]).forEach(function(e){e.apply(void 0,a)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(e){e.apply(e,[t].concat(a))})}}]),Y);function Y(){x(this,Y),this.observers={}}function q(){var a,n,e=new Promise(function(e,t){a=e,n=t});return e.resolve=a,e.reject=n,e}function J(e){return null==e?"":""+e}function X(e,t,a){function n(e){return e&&-1<e.indexOf("###")?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var r="string"!=typeof t?[].concat(t):t.split(".");1<r.length;){if(i())return{};var o=n(r.shift());!e[o]&&a&&(e[o]=new a),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return i()?{}:{obj:e,k:n(r.shift())}}function Q(e,t,a){var n=X(e,t,Object);n.obj[n.k]=a}function Z(e,t){var a=X(e,t),n=a.obj,i=a.k;if(n)return n[i]}function $(e,t,a){var n=Z(e,a);return void 0!==n?n:Z(t,a)}function ee(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ne(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return te[e]}):e}var ie="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&-1<window.navigator.userAgent.indexOf("MSIE");var re=(z(oe,G),P(oe,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);-1<t&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];a&&"string"!=typeof a&&(s=s.concat(a)),a&&"string"==typeof a&&(s=s.concat(r?a.split(r):a)),-1<e.indexOf(".")&&(s=e.split("."));var l=Z(this.data,s);return l||!o||"string"!=typeof a?l:function e(t,a,n){var i=2<arguments.length&&void 0!==n?n:".";if(t){if(t[a])return t[a];for(var r=a.split(i),o=t,s=0;s<r.length;++s){if("string"==typeof o[r[s]]&&s+1<r.length)return;if(void 0===o[r[s]]){for(var l=2,u=r.slice(s,s+l).join(i),c=o[u];void 0===c&&r.length>s+l;)l++,c=o[u=r.slice(s,s+l).join(i)];if(void 0===c)return;if("string"==typeof c)return c;if(u&&"string"==typeof c[u])return c[u];var d=r.slice(s+l).join(i);return d?e(c,d,i):void 0}o=o[r[s]]}return o}}(this.data&&this.data[e]&&this.data[e][t],a,r)}},{key:"addResource",value:function(e,t,a,n,i){var r=4<arguments.length&&void 0!==i?i:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];a&&(s=s.concat(o?a.split(o):a)),-1<e.indexOf(".")&&(n=t,t=(s=e.split("."))[1]),this.addNamespaces(t),Q(this.data,s,n),r.silent||this.emit("added",e,t,a,n)}},{key:"addResources",value:function(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:{silent:!1};for(var r in a)"string"!=typeof a[r]&&"[object Array]"!==Object.prototype.toString.apply(a[r])||this.addResource(e,t,r,a[r],{silent:!0});i.silent||this.emit("added",e,t,a)}},{key:"addResourceBundle",value:function(e,t,a,n,i,r){var o=5<arguments.length&&void 0!==r?r:{silent:!1},s=[e,t];-1<e.indexOf(".")&&(n=a,a=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var l=Z(this.data,s)||{};n?function e(t,a,n){for(var i in a)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof a[i]||a[i]instanceof String?n&&(t[i]=a[i]):e(t[i],a[i],n):t[i]=a[i]);return t}(l,a,i):l=B({},l,a),Q(this.data,s,l),o.silent||this.emit("added",e,t,a)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t=t||this.options.defaultNS,"v1"===this.options.compatibilityAPI?B({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),oe);function oe(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return x(this,oe),t=M(this,L(oe).call(this)),ie&&G.call(_(t)),t.data=e||{},t.options=a,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}var se={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,a,n,i){var r=this;return e.forEach(function(e){r.processors[e]&&(t=r.processors[e].process(t,a,n,i))}),t}},le={},ue=(z(ce,G),P(ce,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:{interpolation:{}},n=this.resolve(e,a);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var a=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===a&&(a=":");var n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(a&&-1<e.indexOf(a)){var r=e.match(this.interpolator.nestingRegexp);if(r&&0<r.length)return{key:e,namespaces:i};var o=e.split(a);(a!==n||a===n&&-1<this.options.ns.indexOf(o[0]))&&(i=o.shift()),e=o.join(n)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,t){var i=this;if("object"!==O(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n=n||{},null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,r=this.extractFromKey(e[e.length-1],n),o=r.key,s=r.namespaces,l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(c){var d=n.nsSeparator||this.options.nsSeparator;return l+d+o}return o}var p=this.resolve(e,n),h=p&&p.res,y=p&&p.usedKey||o,g=p&&p.exactUsedKey||o,m=Object.prototype.toString.apply(h),f=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject;if(v&&h&&"string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h&&["[object Number]","[object Function]","[object RegExp]"].indexOf(m)<0&&("string"!=typeof f||"[object Array]"!==m)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,h,B({},n,{ns:s})):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");if(a){var b="[object Array]"===m,C=b?[]:{},T=b?g:y;for(var S in h)if(Object.prototype.hasOwnProperty.call(h,S)){var D="".concat(T).concat(a).concat(S);C[S]=this.translate(D,B({},n,{joinArrays:!1,ns:s})),C[S]===D&&(C[S]=h[S])}h=C}}else if(v&&"string"==typeof f&&"[object Array]"===m)h=(h=h.join(f))&&this.extendTranslation(h,e,n,t);else{var k=!1,w=!1,x=void 0!==n.count&&"string"!=typeof n.count,A=ce.hasDefaultValue(n),I=x?this.pluralResolver.getSuffix(u,n.count):"",P=n["defaultValue".concat(I)]||n.defaultValue;!this.isValidLookup(h)&&A&&(k=!0,h=P),this.isValidLookup(h)||(w=!0,h=o);var _=A&&P!==h&&this.options.updateMissing;if(w||k||_){if(this.logger.log(_?"updateKey":"missingKey",u,l,o,_?P:h),a){var M=this.resolve(o,B({},n,{keySeparator:!1}));M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var L=[],R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&R&&R[0])for(var V=0;V<R.length;V++)L.push(R[V]);else"all"===this.options.saveMissingTo?L=this.languageUtils.toResolveHierarchy(n.lng||this.language):L.push(n.lng||this.language);var N=function(e,t,a){i.options.missingKeyHandler?i.options.missingKeyHandler(e,l,t,_?a:h,_,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,l,t,_?a:h,_,n),i.emit("missingKey",e,l,t,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?L.forEach(function(t){i.pluralResolver.getSuffixes(t).forEach(function(e){N([t],o+e,n["defaultValue".concat(e)]||P)})}):N(L,o,P))}h=this.extendTranslation(h,e,n,p,t),w&&h===o&&this.options.appendNamespaceToMissingKey&&(h="".concat(l,":").concat(o)),w&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(h))}return h}},{key:"extendTranslation",value:function(e,n,i,t,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,i,t.usedLng,t.usedNS,t.usedKey,{resolved:t});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(B({},i,{interpolation:B({},this.options.interpolation,i.interpolation)}));var a,s=i.interpolation&&i.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);a=l&&l.length}var u=i.replace&&"string"!=typeof i.replace?i.replace:i;if(this.options.interpolation.defaultVariables&&(u=B({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,i.lng||this.language,i),s){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(i.nest=!1)}!1!==i.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r&&r[0]===t[0]&&!i.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(t[0]," in key: ").concat(n[0])),null):o.translate.apply(o,t.concat([n]))},i)),i.interpolation&&this.interpolator.reset()}var d=i.postProcess||this.options.postProcess,p="string"==typeof d?[d]:d;return null!=e&&p&&p.length&&!1!==i.applyPostProcessor&&(e=se.handle(p,e,n,this.options&&this.options.postProcessPassResolved?B({i18nResolved:t},i):i,this)),e}},{key:"resolve",value:function(e,t){var u,i,c,d,p,h=this,y=1<arguments.length&&void 0!==t?t:{};return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!h.isValidLookup(u)){var t=h.extractFromKey(e,y),o=t.key;i=o;var a=t.namespaces;h.options.fallbackNS&&(a=a.concat(h.options.fallbackNS));var s=void 0!==y.count&&"string"!=typeof y.count,l=void 0!==y.context&&("string"==typeof y.context||"number"==typeof y.context)&&""!==y.context,n=y.lngs?y.lngs:h.languageUtils.toResolveHierarchy(y.lng||h.language,y.fallbackLng);a.forEach(function(r){h.isValidLookup(u)||(p=r,!le["".concat(n[0],"-").concat(r)]&&h.utils&&h.utils.hasLoadedNamespace&&!h.utils.hasLoadedNamespace(p)&&(le["".concat(n[0],"-").concat(r)]=!0,h.logger.warn('key "'.concat(i,'" for languages "').concat(n.join(", "),'" won\'t get resolved as namespace "').concat(p,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),n.forEach(function(e){if(!h.isValidLookup(u)){d=e;var t,a,n=o,i=[n];for(h.i18nFormat&&h.i18nFormat.addLookupKeys?h.i18nFormat.addLookupKeys(i,o,e,r,y):(s&&(t=h.pluralResolver.getSuffix(e,y.count)),s&&l&&i.push(n+t),l&&i.push(n+="".concat(h.options.contextSeparator).concat(y.context)),s&&i.push(n+=t));a=i.pop();)h.isValidLookup(u)||(c=a,u=h.getResource(e,r,a,y))}}))})}}),{res:u,usedKey:i,exactUsedKey:c,usedLng:d,usedNS:p}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,a,i):this.resourceStore.getResource(e,t,a,i)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t===a.substring(0,t.length)&&void 0!==e[a])return!0;return!1}}]),ce);function ce(e){var t,a,n,i,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return x(this,ce),t=M(this,L(ce).call(this)),ie&&G.call(_(t)),a=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n=e,i=_(t),a.forEach(function(e){n[e]&&(i[e]=n[e])}),t.options=r,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=W.create("translator"),t}function de(e){return e.charAt(0).toUpperCase()+e.slice(1)}var pe=(P(he,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&-1<e.indexOf("-")){var t=["hans","hant","latn","cyrl","cans","mong","arab"],a=e.split("-");return this.options.lowerCaseLng?a=a.map(function(e){return e.toLowerCase()}):2===a.length?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),-1<t.indexOf(a[1].toLowerCase())&&(a[1]=de(a[1].toLowerCase()))):3===a.length&&(a[0]=a[0].toLowerCase(),2===a[1].length&&(a[1]=a[1].toUpperCase()),"sgn"!==a[0]&&2===a[2].length&&(a[2]=a[2].toUpperCase()),-1<t.indexOf(a[1].toLowerCase())&&(a[1]=de(a[1].toLowerCase())),-1<t.indexOf(a[2].toLowerCase())&&(a[2]=de(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return"languageOnly"!==this.options.load&&!this.options.nonExplicitSupportedLngs||(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||-1<this.supportedLngs.indexOf(e)}},{key:"getBestMatchFromCodes",value:function(e){var a,n=this;return e?(e.forEach(function(e){if(!a){var t=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(t)||(a=t)}}),!a&&this.options.supportedLngs&&e.forEach(function(e){if(!a){var t=n.getLanguagePartFromCode(e);if(n.isSupportedCode(t))return a=t;a=n.options.supportedLngs.find(function(e){if(0===e.indexOf(t))return e})}}),a=a||this.getFallbackCodes(this.options.fallbackLng)[0]):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var a=e[t];return(a=(a=(a=(a=a||e[this.getScriptPartFromCode(t)])||e[this.formatLanguageCode(t)])||e[this.getLanguagePartFromCode(t)])||e.default)||[]}},{key:"toResolveHierarchy",value:function(e,t){function a(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))}var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[];return"string"==typeof e&&-1<e.indexOf("-")?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),i.forEach(function(e){r.indexOf(e)<0&&a(n.formatLanguageCode(e))}),r}}]),he);function he(e){x(this,he),this.options=e,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}var ye=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ge={1:function(e){return Number(1<e)},2:function(e){return Number(1!=e)},3:function(){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5)},6:function(e){return Number(1==e?0:2<=e&&e<=4?1:2)},7:function(e){return Number(1==e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(2<=e)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:2<e&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&(e%100<10||20<=e%100)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||1<e%100&&e%100<11?1:10<e%100&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||0<e%100&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||10<e)&&e%10==0?2:3)}};var me=(P(fe,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&1<t.numbers.length}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map(function(e){return t+e})}},{key:"getSuffixes",value:function(t){var a=this,e=this.getRule(t);return e?e.numbers.map(function(e){return a.getSuffix(t,e)}):[]}},{key:"getSuffix",value:function(e,t){var a=this,n=this.getRule(e);if(n){var i=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),r=n.numbers[i];this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var o=function(){return a.options.prepend&&r.toString()?a.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),fe);function fe(e){var a,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};x(this,fe),this.languageUtils=e,this.options=t,this.logger=W.create("pluralResolver"),this.rules=(a={},ye.forEach(function(t){t.lngs.forEach(function(e){a[e]={numbers:t.nr,plurals:ge[t.fc]}})}),a)}var ve=(P(be,[{key:"init",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};t.interpolation||(t.interpolation={escapeValue:!0});var a=t.interpolation;this.escape=void 0!==a.escape?a.escape:ne,this.escapeValue=void 0===a.escapeValue||a.escapeValue,this.useRawValueToEscape=void 0!==a.useRawValueToEscape&&a.useRawValueToEscape,this.prefix=a.prefix?ee(a.prefix):a.prefixEscaped||"{{",this.suffix=a.suffix?ee(a.suffix):a.suffixEscaped||"}}",this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||",",this.unescapePrefix=a.unescapeSuffix?"":a.unescapePrefix||"-",this.unescapeSuffix=!this.unescapePrefix&&a.unescapeSuffix||"",this.nestingPrefix=a.nestingPrefix?ee(a.nestingPrefix):a.nestingPrefixEscaped||ee("$t("),this.nestingSuffix=a.nestingSuffix?ee(a.nestingSuffix):a.nestingSuffixEscaped||ee(")"),this.nestingOptionsSeparator=a.nestingOptionsSeparator?a.nestingOptionsSeparator:a.nestingOptionsSeparator||",",this.maxReplaces=a.maxReplaces?a.maxReplaces:1e3,this.alwaysFormat=void 0!==a.alwaysFormat&&a.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var a="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(a,"g")}},{key:"interpolate",value:function(n,r,o,s){var i,l,u,c=this,d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function t(e){return e.replace(/\$/g,"$$$$")}function p(e){if(e.indexOf(c.formatSeparator)<0){var t=$(r,d,e);return c.alwaysFormat?c.format(t,void 0,o,B({},s,r,{interpolationkey:e})):t}var a=e.split(c.formatSeparator),n=a.shift().trim(),i=a.join(c.formatSeparator).trim();return c.format($(r,d,n),i,o,B({},s,r,{interpolationkey:n}))}this.resetRegExp();var h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s&&s.interpolation&&s.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return t(e)}},{regex:this.regexp,safeValue:function(e){return c.escapeValue?t(c.escape(e)):t(e)}}].forEach(function(e){for(u=0;i=e.regex.exec(n);){if(void 0===(l=p(i[1].trim())))if("function"==typeof h){var t=h(n,i,s);l="string"==typeof t?t:""}else{if(y){l=i[0];continue}c.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(n)),l=""}else"string"==typeof l||c.useRawValueToEscape||(l=J(l));var a=e.safeValue(l);if(n=n.replace(i[0],a),y?(e.regex.lastIndex+=a.length,e.regex.lastIndex-=i[0].length):e.regex.lastIndex=0,++u>=c.maxReplaces)break}}),n}},{key:"nest",value:function(e,t,a){var n,i,r=this,o=2<arguments.length&&void 0!==a?a:{},s=B({},o);function l(t,e){var a=this.nestingOptionsSeparator;if(t.indexOf(a)<0)return t;var n=t.split(new RegExp("".concat(a,"[ ]*{"))),i="{".concat(n[1]);t=n[0],i=(i=this.interpolate(i,s)).replace(/'/g,'"');try{s=JSON.parse(i),e&&(s=B({},e,s))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(a).concat(i)}return delete s.defaultValue,t}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var u=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map(function(e){return e.trim()});n[1]=d.shift(),u=d,c=!0}if((i=t(l.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=J(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),c&&(i=u.reduce(function(e,t){return r.format(e,t,o.lng,B({},o,{interpolationkey:n[1].trim()}))},i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),be);function be(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};x(this,be),this.logger=W.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.init(e)}var Ce=(z(Te,G),P(Te,[{key:"queueLoad",value:function(e,t,i,a){var r=this,o=[],s=[],l=[],u=[];return e.forEach(function(a){var n=!0;t.forEach(function(e){var t="".concat(a,"|").concat(e);!i.reload&&r.store.hasResourceBundle(a,e)?r.state[t]=2:r.state[t]<0||(1===r.state[t]?s.indexOf(t)<0&&s.push(t):(r.state[t]=1,n=!1,s.indexOf(t)<0&&s.push(t),o.indexOf(t)<0&&o.push(t),u.indexOf(e)<0&&u.push(e)))}),n||l.push(a)}),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:a}),{toLoad:o,pending:s,toLoadLanguages:l,toLoadNamespaces:u}}},{key:"loaded",value:function(s,l,e){var t=s.split("|"),u=t[0],c=t[1];l&&this.emit("failedLoading",u,c,l),e&&this.store.addResourceBundle(u,c,e),this.state[s]=l?-1:2;var d={};this.queue.forEach(function(e){var t,a,n,i,r,o;t=e.loaded,a=c,i=X(t,[u],Object),r=i.obj,o=i.k,r[o]=r[o]||[],n&&(r[o]=r[o].concat(a)),n||r[o].push(a),function(e,t){for(var a=e.indexOf(t);-1!==a;)e.splice(a,1),a=e.indexOf(t)}(e.pending,s),l&&e.errors.push(l),0!==e.pending.length||e.done||(Object.keys(e.loaded).forEach(function(t){d[t]||(d[t]=[]),e.loaded[t].length&&e.loaded[t].forEach(function(e){d[t].indexOf(e)<0&&d[t].push(e)})}),e.done=!0,e.errors.length?e.callback(e.errors):e.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(a,n,i,e,t,r){var o=this,s=3<arguments.length&&void 0!==e?e:0,l=4<arguments.length&&void 0!==t?t:350,u=5<arguments.length?r:void 0;return a.length?this.backend[i](a,n,function(e,t){e&&t&&s<5?setTimeout(function(){o.read.call(o,a,n,i,s+1,2*l,u)},l):u(e,t)}):u(null,{})}},{key:"prepareLoading",value:function(e,t,a,n){var i=this,r=2<arguments.length&&void 0!==a?a:{},o=3<arguments.length?n:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(function(e){i.loadOne(e)})}},{key:"load",value:function(e,t,a){this.prepareLoading(e,t,{},a)}},{key:"reload",value:function(e,t,a){this.prepareLoading(e,t,{reload:!0},a)}},{key:"loadOne",value:function(a,e){var n=this,i=1<arguments.length&&void 0!==e?e:"",t=a.split("|"),r=t[0],o=t[1];this.read(r,o,"read",void 0,void 0,function(e,t){e&&n.logger.warn("".concat(i,"loading namespace ").concat(o," for language ").concat(r," failed"),e),!e&&t&&n.logger.log("".concat(i,"loaded namespace ").concat(o," for language ").concat(r),t),n.loaded(a,e,t)})}},{key:"saveMissing",value:function(e,t,a,n,i,r){var o=5<arguments.length&&void 0!==r?r:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=a&&""!==a&&(this.backend&&this.backend.create&&this.backend.create(e,t,a,n,null,B({},o,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,a,n))}}]),Te);function Te(e,t,a){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return x(this,Te),n=M(this,L(Te).call(this)),ie&&G.call(_(n)),n.backend=e,n.store=t,n.services=a,n.languageUtils=a.languageUtils,n.options=i,n.logger=W.create("backendConnector"),n.state={},n.queue=[],n.backend&&n.backend.init&&n.backend.init(a,i.backend,i),n}function Se(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function De(){}function ke(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0;if(x(this,ke),e=M(this,L(ke).call(this)),ie&&G.call(_(e)),e.options=Se(t),e.services={},e.logger=W,e.modules={external:[]},a&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,a),M(e,_(e));setTimeout(function(){e.init(t,a)},0)}return e}var we,xe,Ae,Ie=new(z(ke,G),P(ke,[{key:"init",value:function(e,t){var i=this,a=0<arguments.length&&void 0!==e?e:{},n=1<arguments.length?t:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof a&&(n=a,a={}),a.whitelist&&!a.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),a.nonExplicitWhitelist&&!a.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=B({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===O(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===O(e[2])||"object"===O(e[3])){var a=e[3]||e[2];Object.keys(a).forEach(function(e){t[e]=a[e]})}return t},interpolation:{escapeValue:!0,format:function(e){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}},this.options,Se(a)),this.format=this.options.interpolation.format,n=n||De,!this.options.isClone){this.modules.logger?W.init(r(this.modules.logger),this.options):W.init(null,this.options);var o=new pe(this.options);this.store=new re(this.options.resources,this.options);var s=this.services;s.logger=W,s.resourceStore=this.store,s.languageUtils=o,s.pluralResolver=new me(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new ve(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new Ce(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(e){for(var t=arguments.length,a=new Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];i.emit.apply(i,[e].concat(a))}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new ue(this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,a=new Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];i.emit.apply(i,[e].concat(a))}),this.modules.external.forEach(function(e){e.init&&e.init(i)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);0<l.length&&"dev"!==l[0]&&(this.options.lng=l[0])}function u(){function e(e,t){i.isInitialized&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),c.resolve(t),n(e,t)}if(i.languages&&"v1"!==i.options.compatibilityAPI&&!i.isInitialized)return e(null,i.t.bind(i));i.changeLanguage(i.options.lng,e)}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){i[t]=function(){var e;return(e=i.store)[t].apply(e,arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(t){i[t]=function(){var e;return(e=i.store)[t].apply(e,arguments),i}});var c=q();return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e,t){var a=this,n=1<arguments.length&&void 0!==t?t:De,i="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var r=[],o=function(e){e&&a.services.languageUtils.toResolveHierarchy(e).forEach(function(e){r.indexOf(e)<0&&r.push(e)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return o(e)}),this.options.preload&&this.options.preload.forEach(function(e){return o(e)}),this.services.backendConnector.load(r,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,a){var n=q();return e=e||this.languages,t=t||this.options.ns,a=a||De,this.services.backendConnector.reload(e,t,function(e){n.resolve(),a(e)}),n}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&se.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(t,i){var r=this;this.isLanguageChangingTo=t;var o=q();function e(e){t||e||!r.services.languageDetector||(e=[]);var n="string"==typeof e?e:r.services.languageUtils.getBestMatchFromCodes(e);n&&(r.language||(r.language=n,r.languages=r.services.languageUtils.toResolveHierarchy(n)),r.translator.language||r.translator.changeLanguage(n),r.services.languageDetector&&r.services.languageDetector.cacheUserLanguage(n)),r.loadResources(n,function(e){var t,a;t=e,(a=n)?(r.language=a,r.languages=r.services.languageUtils.toResolveHierarchy(a),r.translator.changeLanguage(a),r.isLanguageChangingTo=void 0,r.emit("languageChanged",a),r.logger.log("languageChanged",a)):r.isLanguageChangingTo=void 0,o.resolve(function(){return r.t.apply(r,arguments)}),i&&i(t,function(){return r.t.apply(r,arguments)})})}return this.emit("languageChanging",t),t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(e):e(t):e(this.services.languageDetector.detect()),o}},{key:"getFixedT",value:function(e,t){function o(e,t){var a;if("object"!==O(t)){for(var n=arguments.length,i=new Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];a=s.options.overloadTranslationOptionHandler([e,t].concat(i))}else a=B({},t);return a.lng=a.lng||o.lng,a.lngs=a.lngs||o.lngs,a.ns=a.ns||o.ns,s.t(e,a)}var s=this;return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e,t){var n=this,a=1<arguments.length&&void 0!==t?t:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;function s(e,t){var a=n.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===a||2===a}if(a.precheck){var l=a.precheck(this,s);if(void 0!==l)return l}return!!this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||!(!s(i,e)||r&&!s(o,e))}},{key:"loadNamespaces",value:function(e,t){var a=this,n=q();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){a.options.ns.indexOf(e)<0&&a.options.ns.push(e)}),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var a=q();"string"==typeof e&&(e=[e]);var n=this.options.preload||[],i=e.filter(function(e){return n.indexOf(e)<0});return i.length?(this.options.preload=n.concat(i),this.loadResources(function(e){a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return!(e=e||(this.languages&&0<this.languages.length?this.languages[0]:this.language))||0<=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))?"rtl":"ltr"}},{key:"createInstance",value:function(e,t){return new ke(0<arguments.length&&void 0!==e?e:{},1<arguments.length?t:void 0)}},{key:"cloneInstance",value:function(e,t){var a=this,n=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length&&void 0!==t?t:De,r=B({},this.options,n,{isClone:!0}),o=new ke(r);return["store","services","language"].forEach(function(e){o[e]=a[e]}),o.services=B({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new ue(o.services,o.options),o.translator.on("*",function(e){for(var t=arguments.length,a=new Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];o.emit.apply(o,[e].concat(a))}),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),ke),Pe=a(21),_e=a.n(Pe),Me=a(38),Le=a.n(Me),Re=a(50),Ve=a.n(Re),Ne=a(51),Ee=a.n(Ne),Fe=a(52),Oe=a.n(Fe),He=a(53),Be=a.n(He),Ue=a(54),ze=a.n(Ue),Ke=Object(ae.mergeDeepRight)(Le.a,Ve.a),je=(we={},V()(we,H.Language.EN_US,Le.a),V()(we,H.Language.EN_GB,Ke),V()(we,H.Language.ZH_CN,Ee.a),V()(we,H.Language.ZH_TW,Oe.a),V()(we,H.Language.PL_PL,Be.a),V()(we,H.Language.ES_ES,ze.a),we),We=a(39),Ge=a.n(We),Ye=a(55),qe=a.n(Ye),Je=a(56),Xe=a.n(Je),Qe=a(57),Ze=a.n(Qe),$e=a(58),et=a.n($e),tt=a(59),at=a.n(tt),nt=Object(ae.mergeDeepRight)(Ge.a,qe.a),it=(xe={},V()(xe,H.Language.EN_US,Ge.a),V()(xe,H.Language.EN_GB,nt),V()(xe,H.Language.ZH_CN,Xe.a),V()(xe,H.Language.ZH_TW,Ze.a),V()(xe,H.Language.PL_PL,et.a),V()(xe,H.Language.ES_ES,at.a),xe),rt=a(40),ot=a.n(rt),st=a(60),lt=a.n(st),ut=a(61),ct=a.n(ut),dt=a(62),pt=a.n(dt),ht=a(63),yt=a.n(ht),gt=(Ae={},V()(Ae,H.Language.EN_US,ot.a),V()(Ae,H.Language.EN_GB,ot.a),V()(Ae,H.Language.ZH_CN,lt.a),V()(Ae,H.Language.ZH_TW,ct.a),V()(Ae,H.Language.PL_PL,pt.a),V()(Ae,H.Language.ES_ES,yt.a),Ae),mt=[],ft=mt.forEach,vt=mt.slice;function bt(){if(null!==xt)return xt;try{xt="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){xt=!1}return xt}function Ct(){if(null!==It)return It;try{It="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){It=!1}return It}var Tt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,St=function(e,t,a,n,i){var r=4<arguments.length&&void 0!==i?i:{path:"/",sameSite:"strict"};a&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*a*1e3)),n&&(r.domain=n),document.cookie=function(e,t,a){var n=a||{};n.path=n.path||"/";var i=e+"="+encodeURIComponent(t);if(0<n.maxAge){var r=+n.maxAge;if(isNaN(r))throw new Error("maxAge should be a Number");i+="; Max-Age="+Math.floor(r)}if(n.domain){if(!Tt.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!Tt.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i}(e,encodeURIComponent(t),r)},Dt=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},kt={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var a=Dt(e.lookupCookie);a&&(t=a)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&St(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},wt={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var a=window.location.search.substring(1).split("&"),n=0;n<a.length;n++){var i=a[n].indexOf("=");if(0<i)a[n].substring(0,i)===e.lookupQuerystring&&(t=a[n].substring(i+1))}return t}},xt=null,At={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&bt()){var a=window.localStorage.getItem(e.lookupLocalStorage);a&&(t=a)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&bt()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},It=null,Pt={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&Ct()){var a=window.sessionStorage.getItem(e.lookupSessionStorage);a&&(t=a)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&Ct()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},_t={name:"navigator",lookup:function(){var e=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var t=0;t<navigator.languages.length;t++)e.push(navigator.languages[t]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return 0<e.length?e:void 0}},Mt={name:"htmlTag",lookup:function(e){var t,a=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return a&&"function"==typeof a.getAttribute&&(t=a.getAttribute("lang")),t}},Lt={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(a instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof a[e.lookupFromPathIndex])return;t=a[e.lookupFromPathIndex].replace("/","")}else t=a[0].replace("/","")}return t}},Rt={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var a=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);a instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?a[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):a[0].replace("http://","").replace("https://","").replace(".",""))}return t}};var Vt=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};x(this,a),this.type="languageDetector",this.detectors={},this.init(e,t)}return P(a,[{key:"init",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==a?a:{};this.services=e,this.options=function(a){return ft.call(vt.call(arguments,1),function(e){if(e)for(var t in e)void 0===a[t]&&(a[t]=e[t])}),a}(n,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(kt),this.addDetector(wt),this.addDetector(At),this.addDetector(Pt),this.addDetector(_t),this.addDetector(Mt),this.addDetector(Lt),this.addDetector(Rt)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var a=this;e=e||this.options.order;var n=[];return e.forEach(function(e){if(a.detectors[e]){var t=a.detectors[e].lookup(a.options);t&&"string"==typeof t&&(t=[t]),t&&(n=n.concat(t))}}),this.services.languageUtils.getBestMatchFromCodes?n:0<n.length?n[0]:null}},{key:"cacheUserLanguage",value:function(t,e){var a=this;(e=e||this.options.caches)&&(this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(t)||e.forEach(function(e){a.detectors[e]&&a.detectors[e].cacheUserLanguage(t,a.options)}))}}]),a}();Vt.type="languageDetector";var Nt=Vt,Et=function(e,t){if(e)return e.use(Nt).init({ns:Object.values(H.LocaleNamespace),defaultNS:H.LocaleNamespace.Dashboard,fallbackLng:{en:[H.Language.EN_US],zh:[H.Language.ZH_CN],es:[H.Language.ES_ES],pl:[H.Language.PL_PL],default:[null==t?void 0:t.defaultLng,H.Language.EN_US]},debug:!1,lng:null==t?void 0:t.lng,detection:{order:["querystring"],lookupQuerystring:"lng"},resources:{},interpolation:{escapeValue:!1,format:function(e,t){return"uppercase"===t?e.toUpperCase():"lowercase"===t?e.toLowerCase():e}},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}}),e}(Ie,p$.config),Ft=Et.t.bind(Et),Ot=Et.exists.bind(Et);var Ht="$LOCALE$";[{namespace:H.LocaleNamespace.Dashboard,data:Object(ae.mapObjIndexed)(function(e,t){return F()({},e,V()({},Ht,t))},je)},{namespace:H.LocaleNamespace.DashboardThird,data:it},{namespace:H.LocaleNamespace.Internal,data:gt}].forEach(function(e){var t,a,n;t=Et,a=e,(n=Object.keys(a.data)).length&&n.forEach(function(e){return t.addResourceBundle(e,a.namespace,a.data[e])})});var Bt=p$.config.customLngResource;if(Bt){var Ut=Bt.languageCode;Bt.data.forEach(function(e){var t=e.namespace,a=e.localeData;Et.addResourceBundle(Ut,t,a)}),Et.addResourceBundle(Ut,H.LocaleNamespace.Dashboard,V()({},Ht,Ut))}function zt(e){var t;return Object(ae.mergeDeepRight)(Et.getResourceBundle(H.Language.EN_US,e),null!==(t=Et.getResourceBundle(Wt,e))&&void 0!==t?t:{})}var Kt,jt,Wt=Ft(Ht),Gt=V()({},Wt,zt(H.LocaleNamespace.Dashboard)),Yt=zt(H.LocaleNamespace.DashboardThird),qt=(Yt.coreui,Yt.spreadjs),Jt=Yt.moment,Xt=Yt.dateTimePicker;_e.a.defineLocale(Wt,F()({parentLocale:"en"},Jt)),_e.a.locale(Wt);function Qt(t,a){var n=function(e){return e===a};return Array.isArray(a)&&(n=function(e){return a.includes(e)}),function(e){return e&&"object"===E()(e)?n(e[t]):n(e)}}var Zt,$t,ea,ta,aa,na,ia=[{key:"png-image",value:"png-image",display:"dialogs.exportDashboard.fileTypeItems.pngImage"},{key:"ppt-document",value:"ppt-document",display:"dialogs.exportDashboard.fileTypeItems.pptDocument"},{key:"svg-image",value:"svg-image",display:"dialogs.exportDashboard.fileTypeItems.svgImage"}],ra=(ia[0].value,ia[1].value,ia[2].value,[{key:"current-page",value:"current-page",display:"dialogs.exportDashboard.pagesOptions.currentPage"},{key:"all-pages",value:"all-pages",display:"dialogs.exportDashboard.pagesOptions.allPages"},{key:"all-visible-pages",value:"all-visible-pages",display:"dialogs.exportDashboard.pagesOptions.allVisiblePages"},{key:"custom-pages",value:"custom-pages",display:"dialogs.exportDashboard.pagesOptions.customPages"}]),oa=(ra[0].value,ra[1].value,ra[2].value,ra[3].value,[{key:"single-image",value:"single-image",display:"dialogs.exportDashboard.exportToItems.singleImage"},{key:"separated-pages",value:"separated-pages",display:"dialogs.exportDashboard.exportToItems.separatedPages"}]),sa=(oa[0].value,oa[1].value,"FROM_GRADIENT_COLOR"),la="GRADIENT_COLOR",ua=(Ft("inspector.properties.charts.customPalette.customPaletteMode.customColor"),Ft("inspector.properties.charts.customPalette.customPaletteMode.fromGradientColor"),Ft("inspector.properties.charts.customPalette.customPaletteMode.gradientColor"),1e3),ca="NormalConditionRule",da="DataBarRule",pa="add3ScaleRule",ha="add2ScaleRule",ya="ScaleRule",ga="IconSetRule",ma="CustomIconSetRule",fa=1,va=2,ba=1,Ca=2,Ta="Step",Sa="Connected",Da=1,ka=2,wa=3,xa="Top",Aa="Right",Ia="Bottom",Pa="Left",_a=1,Ma=2,La=3,Ra=4,Va="Ordinal",Na="Linear",Ea="Logarithmic",Fa="Percentage",Oa="General",Ha=(Ft("common.currencyFormat"),"top"),Ba="bottom",Ua="subtotalSetting_none",za="for_rows_and_columns",Ka="for_rows_only",ja="for_columns_only",Wa="grandTotalSetting_none",Ga="lock_column",Ya="lock_row",qa="lock_row_and_column",Ja="unlock",Xa=1,Qa=2,Za=0,$a=1,en=2,tn=3,an=4,nn=5,rn=6,on=7,sn=8,ln=9,un=10,cn=11,dn=12,pn=13,hn=14,yn=15,gn=16,mn=17,fn=18,vn=19,bn=20,Cn=21,Tn=22,Sn=23,Dn=24,kn=25,wn=26,xn=27,An=28,In={Top:1,Middle:2,Bottom:3},Pn="Constant",_n="Max",Mn="Min",Ln="Median",Rn="Average",Vn="Count",Nn="X",En="Y",Fn={Solid:"Solid",Dashed:"Dashed"},On="Group",Hn="Total",Bn="Trellis",Un=0,zn=1,Kn=2,jn=-1,Wn=0,Gn=1,Yn="Single",qn="Multiple",Jn={Top:"Top",Left:"Left"},Xn="Horizontal",Qn="Vertical",Zn="Input Box",$n="Slider",ei="Input Box + Slider",ti=1,ai=2,ni=3,ii=4,ri=2,oi=3,si=4,li=5,ui=6,ci={Both:"both",Left:"left",Right:"right"},di=6,pi=7,hi={None:1,Top:2,Bottom:3},yi={All:1,None:2,RowOnly:3,ColumnOnly:4,LockColumn:5,LockRow:6,LockRowAndColumn:7,LockNone:8},gi="no-repeat",mi="100% 100%",fi="center",vi="center",bi="auto",Ci="center",Ti="left",Si="right",Di="auto",ki="center",wi="top",xi="bottom",Ai=(Kt={},V()(Kt,Ba,hi.Bottom),V()(Kt,Ha,hi.Top),V()(Kt,Ua,hi.None),V()(Kt,za,yi.All),V()(Kt,Ka,yi.RowOnly),V()(Kt,ja,yi.ColumnOnly),V()(Kt,Wa,yi.None),V()(Kt,Ga,yi.LockColumn),V()(Kt,Ya,yi.LockRow),V()(Kt,qa,yi.LockRowAndColumn),V()(Kt,Ja,yi.LockNone),Kt),Ii="none",Pi="both",_i="inner",Mi="outer",Li="thin",Ri="medium",Vi="thick",Ni="thin",Ei="medium",Fi="thick",Oi=(jt={},V()(jt,Ni,1),V()(jt,Ei,2),V()(jt,Fi,3),jt),Hi="complete",Bi="boundary",Ui={CustomInput:"customInput",Dataset:"dataset"},zi="precentage",Ki="precentage",ji="constant",Wi="value",Gi="ratio",Yi="difference",qi="percentDifference",Ji="accounting",Xi="ranking",Qi="noBackground",Zi="deltaLabelBackground",$i="fullBackground",er="valueCustomUnit",tr="deltaLabel",ar="subTitleLabel",nr="displayUnit",ir="gaugePointer",rr="gaugeCalibration",or="valueOverlay",sr="value",lr="pareto",ur="hBar",cr="bullet",dr="commonChart",pr="image",hr={Online:"online",Offline:"offline",DirectGeo:"direct"},yr="Normal",gr="Italic",mr="Auto",fr="Hidden",vr="Visible",br="Hover",Cr="None",Tr="Linear",Sr="Polynomial",Dr="Power",kr="Logarithmic",wr="Exponential",xr="Fourier",Ar="Flow",Ir="Linear",Pr="Radial",_r={Center:"Center",Top:"Top",Bottom:"Bottom",Left:"Left",Right:"Right",LeftTop:"LeftTop",RightTop:"RightTop",LeftBottom:"LeftBottom",RightBottom:"RightBottom"},Mr={FarthestCorner:"FarthestCorner",FarthestSide:"FarthestSide"},Lr=(Mr.FarthestSide,_r.Center,Mr.FarthestCorner,_r.Center,Mr.FarthestSide,_r.RightBottom,Mr.FarthestSide,_r.LeftBottom,Mr.FarthestSide,_r.LeftTop,Mr.FarthestSide,_r.RightTop,Mr.FarthestCorner,_r.RightBottom,Mr.FarthestCorner,_r.LeftBottom,Mr.FarthestCorner,_r.LeftTop,Mr.FarthestCorner,_r.RightTop,"container"),Rr="global",Vr={Auto:"auto",Fixed:"fixed",Distribute:"distribute"},Nr={Auto:"auto",Fixed:"fixed"},Er="colHeader",Fr="content",Or="cell",Hr="fieldValue",Br="comparison",Ur="anotherField",zr={Auto:"auto",Show:"show",Hide:"hide"},Kr="tabular",jr="compact",Wr={AlongType:(Zt={},V()(Zt,H.AlongType.TABLE,"aggregationAreas.trellisTable"),V()(Zt,H.AlongType.ROW,"aggregationAreas.trellisRow"),V()(Zt,H.AlongType.COLUMN,"aggregationAreas.trellisColumn"),V()(Zt,H.AlongType.CELL,"aggregationAreas.trellisCell"),V()(Zt,H.AlongType.ADVANCE,"aggregationAreas.advanced"),V()(Zt,H.AlongType.DATAROLE,"aggregationAreas.dataRole"),Zt),GroupCalculationType:($t={},V()($t,Ji,"dialogs.group.accounting"),V()($t,Xi,"dialogs.group.ranking"),$t),AggregationMethods:(ea={},V()(ea,H.AggregationMethod.Sum,"aggregationMethods.sum"),V()(ea,H.AggregationMethod.Average,"aggregationMethods.avg"),V()(ea,H.AggregationMethod.Max,"aggregationMethods.max"),V()(ea,H.AggregationMethod.Min,"aggregationMethods.min"),V()(ea,H.AggregationMethod.Count,"aggregationMethods.cnt"),V()(ea,H.AggregationMethod.List,"aggregationMethods.list"),V()(ea,H.AggregationMethod.First,"aggregationMethods.fst"),ea),DocumentType:(ta={},V()(ta,H.DocumentType.Unknown,"documentType.Unknown"),V()(ta,H.DocumentType.Dashboard,"documentType.Dashboard"),V()(ta,H.DocumentType.Dataset,"documentType.Dataset"),V()(ta,H.DocumentType.DataSource,"documentType.DataSource"),V()(ta,H.DocumentType.Image,"documentType.Image"),V()(ta,H.DocumentType.Theme,"documentType.Theme"),V()(ta,H.DocumentType.MapHierarchy,"documentType.MapHierarchy"),V()(ta,H.DocumentType.GeoJson,"documentType.GeoJson"),V()(ta,H.DocumentType.Report,"documentType.Report"),V()(ta,H.DocumentType.FloorPlan,"documentType.FloorPlan"),V()(ta,H.DocumentType.AnalysisModel,"documentType.AnalysisModel"),V()(ta,H.ShareResourceDocument.Visual,"documentType.Visual"),ta)},Gr=Object(ae.map)(Object(ae.map)(Ft),Wr),Yr=[{id:"slicer-cool1",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAZCAYAAADHXotLAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAGQAAAAAu+fo/AAAA3UlEQVRoBe2aMQrCQBQFXUmpdfAUItpp6VnUuxiIpYex1C4g3iJ4idi48M2r3ddMmmQfgYEZ0iVtu+cw+V6PzSrlZ+7lDMQGVcTO2+YQzzyXN5Bml/Ox7vuuPBri2MC7Xqyn45Gz1wBBvP6FThBR4h0I4vUvdIKIEu9AEK9/oRNElHgHgnj9C50gosQ7EMTrX+gEESXegSBe/0IniCjxDgTx+hc6QUSJdyCI17/QCSJKvANBvP6FThBR4h0I4vUv9BR/QXndbyd5g+HvBpa7/TVDfoLwX1bWUvYeP4oPR/8bzAKEguIAAAAASUVORK5CYII=",name:"slicer-cool1"},{id:"slicer-cool1-hover",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAZCAYAAADHXotLAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAGQAAAAAu+fo/AAAD90lEQVRoBe1awW7TQBC125RP4cahEgeknvgc+AXOfBPiABKHShwQnBC/UhLHZt56XzJ+XWfsOmk4ZKV6ZmfevJn1ZnftNPXdj19dldv969ua+kU+3x3wc7AapP3y+V1VXZmpHZjHO8RCoiGONvSpP9UPDt+Er7V8V2aDRBN3wdDjRq9a/ygwOzShxk/17/PU1ddP729evvqZTJiexv5206QGOiGtSbc3umsQnvKQI4UFAcTm9I/jXe4pasg3sx7NGYRr/Zvff25XVdPWXdX0W9WDMYIEMjWOnBJGpxMLiaYDpC0588WFpzzkSG46s4SvMd3zA0eY6uj7Blzi8EanMzf5zz3+pqlXttzr6iFPCGr1g3W1F1ViKTWedsoSyRSfx5R0b9McU3we43Xl0j6xlPCXdG8b44C9a21C0GxmkrxcznsHbHHYCunqars90YRsbIA39geJRh2y1ObiSxz/k23ueFrbYTtbHc1DeUKw1PweTJ177qSxb/eoxvTEkW1FPoevqFPuqSZpS+tfGp+KdLVH408rxA716u+BFeL4lt4fre8ofNHMLK1/abzWd4iv6S5niN6vs/bTod7aljV6hsxdsxE+8uvtiPCRfy7fqfFxvatqi0P9b3+GKD7Vd2iN6QDQj/CR33HyvOGZpXtwgjq+lelpDNkWjWcufjc2l9OV26veR50SiJKebf17iE2IP0M8/lGyZzawFkodj5ZDHOWx8Zrv2H174u0/e+t1+SlLE+pTkX4CI7/yRf2lfEvjtb6IL/Irn/Y7TAgee0fPEInY4qN3bavOfQSdWm3NhyWZJGKpE5T94JjSHuVjbsaDl5wgpJ79TEt59Hos5Y4bes6/YPzpu6yqnrhCMOZBBcngLqyOUvG0U7rQUdVjqVM+hb8U622jhWTHISx9lDPr688QewdpRyZk7pYULVn169ijfIqP+kv5ovilfq2/nxCzru3lcKytnYM6JVwlvWTzWO939En1PuqUip3S97HUKY8R77moU4K/pHubr2F3hmzsSQtNtmCPLepYmYwpAeiDRJuL76P2V41X/j2y1yJ85Fc+7Wu8+rW+EN/ZN0v2ut7hK3i0Nq/BJJW91Lc9iDHJLWu4zXtUkjk+/3Ov703AD9IanpywU/f8B/HZuatB6udYzjX+6hpPWbY6Bo+9Y+tpMNLcIZYS5pLubcrjfdQpFbuUX/mYh1L5Fa99xlFqPO2UGi/4F1c2Ifh/9GYzfoaUOC6209yB6zq/h7R5QnSP0z1Qy4jwkX8u31K8xmv/2PXO5bOtt/Y/Qbn//u2DbcxWJn4tgUZ9t+n25rNdo19xLC3s1Pzl+u7evP1Iz3BCLr/L4n15VukXxT/h9FuLJwdcFgAAAABJRU5ErkJggg==",name:"slicer-cool1-hover"},{id:"slicer-cool1-selected",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAZCAYAAADHXotLAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAGQAAAAAu+fo/AAAHFElEQVRoBe1aO5LcNhAlOXMCJw58ClU5U+DIJ3L5dkocWIHsKpXLp1DgA7iGH7/X3Q8EGtzhqrQ7mxiy2A30B/1Dg0N5fP/n522I8fuP70bh/8PHRaDOwbXZ9u+/Po7DOGz485whXkIflCMe8hsmrs4YNuAj1gjJvxNdnvtqzemuSdp33cG/gX+EMkAbXJYJQLUXoTOk5wjKBmsIMfL+ibubylZCH9o87NndMYan/B/+XYvucfz8x6fh+x/+sZXk0ASFK/wlPNpwhcsTYkxYNDYITDAaIQf5tMYp/soHoHk/7U0I8s4bu2lvQpJXBHZCgAk5z0M0QtI6+0/syQZ08nnD4uvz/B++fPnuuq3beJlvdlJWuDHBKEIOC0QkxVfa54SQIrdIiicsy0sX4dFYUdkTKpyQAw7iuQXcbZF81t8l1LRALqBsI+SS6lDwzP5H+7/N8+U6LMtluN0uNHgKDx3SAQQMa4ROd6cqh815OUieGjeh6pEDmhNGWeqWDiuMqkDO+KutDD09cUngrf1f1nmyhKyzJ2QPh4e8awlouDAapyJKegM+Agekb33AcktbEewq5JRL8sx9OREgygaPndrdEy3AUrnrL4lV4JO9st2g8Uj2bfwfcTiYkGm6zd6yTgLgZnraaH/fQ3PA7Gh5HwI/5O+2OBzG/V7lBmqXusOkydJPhvZOUvJ0p5CjHucn9H4BvLb/27qO13GZLwN6Fw3vNoxqtdZBhhQQ8qvNkCxcldnRk758oqijHllfeSOKS9nejqq3pFqW+FkCyCOfa1xrWf61/V+X9XLd5nVa4w6hUc1AAHGxxZUIKLxUaD4RbcUqMYLUXeNQDE2SYQBRoXgpJiSvcEKTTXTaY8VS7GHrZDv1Frrj3mLFa5AKKcedijwXq/Fg/7dbXOrjzd+yKlMOUdlOyMGWxaA6pF+OEzpH+0TnAcF/iri8JwR3kvHzwYRJWHidxBonn2xyfa7/KXvEK/uzPHXcG1n+xf1Ht8IdMk983TJD8o7FXXdBP8IInR+B1I8rLIDLI+xxAgnhR3FW/Ig2ZL1gO7pqO8im0a+P4/2lu/wwZEkUmyGeI542sHcRrMU7iVstGXewUkLTO39e1H+0LLxlrcukE9IFtCpp2odoe3nT74OB81KOwBH/Gd1kKr2IjR9BD60FzGpBu3v8+UPZVjJ/9udMf+Z/jr2VuTT22/zna+84rxf0LrvHqnizTuBl0R8Ol3wc0llrjKFDN9UEa6sbvMT7Cf2eiV1Hy88SoY1WKmZvuyeNpKwZ66Tm+bX+ncXnm/2f47V3iF/qclyQ1tc4po2P/BHBYDjM1BCWhE0RAivnXeuOgaFVb92NBtipoDxSrbbh3PsR4RwByfq1e+REySN0iX3P3dfaphqHRKPvxf1ny9pwkUw3tC4MhBYlh//iW5BwwjC/uSO41o7GXpDojtaIIoDq45zGXrv+9kRmeWgqEYU4tTf29PSv1PfG/q/26WRe0K7Kpd6UGLy1EjTIAHoQDEZAyhrnmc61eyOlq5PP9Hu6nkXLR0jHlZAj0R/uf/xSv6Bo7S0rB1TFTGijY8Cq1oCyXFW2xp8jKl5CjDS1ly+2p3o/w4NfZgh28pVO2wCMssnmSUB6BBP50J5y6KmQghLiNHCDB/TCSz4MicYU71cLLnW0rHFZvWWhI+jiMgFwKimcp/27loOWhBqDimh5BVfLSy0h02EitqA73uOVHN0hmR/HubGXHtYJzC2RPtwbWV/e//X9H/hxccU/D/ALOkf71uJr+1OZFMwO9CnrisDyy42oFRNrGgYxPwtAyHF7kwdSMoi1rmBoH1bxiAQHzqJz/pTQwut08tRDfgu+uP/TwE8nt2naRj8hjAyioh9a5jUsEqyNIy5eQo7uLSh0iW5M1SPzY3dqwR/X1yUo2ZczqEAJ9vp9c/lzZr/4BCvTDT2Tz/Qs39k3Tf75fZjti1WEAYEOydO3rtyCINcYr/b1RMvKLSXvh/ibMQYN9WovFX6wf5huwI5G9GAulP6GNWNI9slvwWzPmb22hymOR9J/qu/ChOCD1rbEF6KkYMTnWPyL4kBom6F4UbWwSw4Bp3NR0iMa3wZVhMYfONd8iDXSlj73KhCC0lXkqZe6Qn/BpV+2RMBRgXafGTQDnEElJ9sNkv7m/l+QEH46mReLAStRbcLs4yrWYLCNmO4nKPEbgbEOfl4StcJ8hLfFWQltSJaQA3q22aHNxSeY+GU74dFI7Gfmut8QepT/CNc41v8LysffPnB7/HWXUM+wha9MXOsH/OZtSXstBMIJyX1GzxrP+GULIWXP7DvTbyrcdrMXKPQ+3v/3P/2sMz/YZS7Dt19+LYSyJuQAhhce/aBrjVPhgvVasDdAfIKZX+uCmd4oO5hITvCApVu6xyuaIIWP8KO1ZqPq/437DypRwTAp1luAAAAAAElFTkSuQmCC",name:"slicer-cool1-selected"},{id:"slicer-cool2",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAeCAYAAADaW7vzAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAHgAAAACc2SYvAAAHGUlEQVRoBe1aTWwdVxU+59x7Z+b52TG2aZNntUL8KZGbbsiWKIQgIcQGKiK1dMMWhJC66IZVs+qWIsQuLEG4SKCGUokCImLFolIXxRsKiEBjp1VsXp/95s3cn8N334tdd5nnVF1krhK/8bw749H55jvf+WM6tuxP/UVum+8S05iYNTX1TXl3961jW7rDE1ogra2el4XeJVJlIukry/Xwg+oPh7fFydmyP64vcQjfTrff+R1RCsRGieL0H1E43NZ9nsgC9oOrBa89iZXB+jfUFb8AKL/PX04BqV6qL8cYnk4777xKoQ3MDkhoAoqJ5B4wH9yqO5rbAgbvemQSZngg0ZQMGePk9Po3RXSzeW75Na5e8pdjOHgm3dn5LcXosRPsiJ7YeeYUyWdQLNji536M7sJsAZcdD5MhaIHkn5aMOpjVqTPFDBSzye5H45+n7Vu/JJ88awxgxATeakJBG2b2bEzEsZIpAEq3TmQB9qIkQj5adVxqjBWpLZVDAYko+LHHv2PhmWqwIAKxvBdiARCSAJRUg0YNPj3bKtHBAUjT60CZAxH1NVMfIjA2ooUxWpoiqU8E36OmtSBL0kyflCZHKsNZKyJB9GMCrSIHbqVNje1p6xJ0ZUVU+osdIHMAkg4aBhgcSyehF1wYZ0U3TgVEUE6zyEmmd7Zp//1X85FCbLLsAxXhaJkcHFbhk4sLYXGh9H0ap+rUf3Vp+0IHyn2CMhqc5mHztoxu9W0c3jXkClIDc0cGMknwS0aA0v7oj1b29v6VVB8jI5wpBF9m1TinxFYDooBPEtle0I0zG3HzKnZ0674tcO0a8Y3B52hEd0iXregkWFjSQSQcaXZNjSGICh8M/2OrUm7V3q9pNBUZxhfRQcQLbC6SKazfq22olzydmT0HeNMx5D4heeEF5cn2Fkcxkg4g6FEKtVzCH4EqyeLdh3MKahK9LeWVc2tfXHzyz4Dp36oe4Viyyr5QaQu4MZfYSUt35b2tWc5yn8/SbYcF/rbxMjerBYe2NokLRFjJafAF3JRVhfMK6X+ri3Jz6avnjYTa//DNL/jXT33lXCNqdyAj8GmIkxErKyMqIAu1We8Me0ILhF0EU5VBZuGNeuQg2caa4JM0rX3tiTf9hbMv+jrclDSeIBybfCmM9p8FhXJuDi2B4GTRIY+YmTnuQ1+6dQILXJ1eq42ZBktT2+Zs3ULMg6Ewqs/ruP4+1RNjadxC3yHhx00uSO8jil8gS7c+CgvkrH2CFx8AIceg8RjSPZNmC1RQskLIdQiIAgxoe7c+QgvkCtWxBVdF0BScAWkyQ3IM3K2P0QJ1jdwQGQVgsjoBQ5C4zyDDz2nZ/WN8uIfhTyNJp4CC+uEae7gs1HOzrKSDCU7DZU11u5ptSQiCEQcAqcNLus8HagG4p1xBl2lOxwSGaAYoA0J1k9nxHht+nVB8ZAcwsqigykJI4alCoFyCQt06sQW4hHKjpj61L4JeCnjhkV3o2P+DYvgriPEZobr9E7qJT7ZuaScZcxonEfhKxMaYS+/cZjBun/hhHu4bvEx2NSBdR+iqMbHAvhH/YeecGE6o/6nlsf2yTpoXpRys/6axC2dDK+emrdqIppQ2gcWjDO+DuCYWtJYe2QCi3ZrLAk9sXdVyt1U76EWuDGwrObuD30JNHQeJ9cy7K9XF1PvEph29335WVZbJhJwOwpEVLeLeBkXhFqUXb6oi2rvhCAwgOtP/uR7t4bwIxUWqBhtq/n4nmcWhT622zLZBMOWQjOdCI/J143xhztu0svJp2hsiO0y5YQJXhUZJDJ7L3MJ1Ucbwe58/S//ce0MuX7vQgTHHOzUavMHDt5aFSgzzDC1efAyR2KwmBRrkHtLACd1D0f7a41YWT3097Q1/fa9BhfwQAXHVi9T6nL5jEKU2w90tN9p3aha3j5gyx3M9vJdsr5Nf24NoLIiO0P9AiTDbGVHTTK8TDiHusrh05ahjOG1Q5UZWrrGkgPa7utjWIFUhYb9E9R499Qa1x27NYYEllAUDCNHjVKGa3sQ82IC+LMARcOBYdmHRklpAd9CAQPm0QVMRZeEcAUBt2NpEFhHBJIfBWOUcD9NdQpSrIXj3PepXUHQww2nblipFAVDQ7kDnMCcmTD1r2F6nR888jTGgV+DH8B2mHXKrF40Q9E2g5mjGZwino0Cdcee2QB4BYhQVPbTCoPQuKOxGBLAsGAdKTh4ZPIWphetTka5+sn8ltumZtHP7ldls1r1cJOckOWvvJhfnxuHDF4IluZIOFDD7BlY4YIBBuUdPfwux1K+a51dvHEVNFtOLHPyzafv2jTzRBVLMgOhqWx+26YP4DX4oTy9ktyODwVOQ9s34/PJ02OQIkPx3MGx9iX3zPYg/yo+ApR7/hXf3tvJxtx6MBXR1ZUN6Cxfz3cCOPnzQz+Jz/dcO7/5/VRx8xMDRDGgAAAAASUVORK5CYII=",name:"slicer-cool2"},{id:"slicer-cool2-hover",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAeCAYAAADaW7vzAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAHgAAAACc2SYvAAAGs0lEQVRoBe1aS4sdRRSuOnWq5947TGYmojDkhUrARQRBcBGCSUgGf4Q7o24imKArl27cqhiEIAhBF4KKCFE0PhKUQJbuIpJNNllIcs1jum93PY7f6Ts3cxMXZh66SVcy04+prrnzfX1e3ylrpgZ/EJ6nHF43kkd6m+vmor9TXp6a0p1uEoEwGDwV+8X+dhmhgRU6XZ/sfTtZ1k5O+P1wkOPoVb4x/NUaicaSGJPa/8bkybTuuCkEaO1pslaM5bB98Qiw/rg+OXtWf9gS0jtVHTZ1epmHN36xKUbYRjYOLGQRS25MzNpS3dmGEXBwPskCW7zjlkzOThxxWFw86kjOlCe2fW1771VHTIov8XAIMnI0jmJrIYajZUkmCcxDV4C1dGMTCKxiCMswwTohkGGzN0FYmHxYACnOn4Ep5OPFX8NzLRkioM82lm1NyTRsXLSOshH8szOwlG5sDoFIAkKiyQxAixxEhJyBV7J+OPwxPPrIcYZbGtkES8CwTMk6G8lw450dkaeGlBQP3kKAoWCdbqwfAQBuvDFSeRJniDj7JoZsM6xFkpNErvVKSWAEk6GxIiPOaOwgTDEu4NmGHAWKLoEssb2iI2SC1zqOMmqsRIDfgzHYCDdljM/kG+MyAEVIUHsY51fMZfkDrmApyYq1hNsINiCMjbVeMkWfeMDBJrgtgyCfOlLWwUU7VXre4t22qbacm6jBxKjrgl/StAtfehCUGeVF9lV1NeX8JOIGbmIS8itxCOfZulxb5/q4i+SAqEhgC9aDad1YFwJaRCRTgIhghOF/msQaR5AwaSzR+2QAOtWja+TYXSaWlTYNE4VePEKNzzl7sOhyDPBxq/a0ro/RTb4HgdjY3ATKdXQ5ANuUC2RaHnkwIgM8EgK5S/k3ogM7Bnt3Pv6Zy/S7MiWYIDn4IMHnhAdRtWTBfbB8zy/oLh4YAXGNNYU6JeCIlzw4ZFkheqS9sI6MiC3XadZ9zgf3rFCswltXlsL3fGDnNUt8FQ4K5gNLgcuCg4LvUyKQInRjUwiolxFgKSk5E/DSa+CIyLmA8uyhPd/ZfTveDlW8QLkcGSlHh+LtOy8qFS0Jmo7pwyYRYoo1Cdfd2AQCMA8dE1z1JdcC0SEgC5zP7WqflNVrpho5NmUDFuCYpiFHOSJZ8ECbEIwX675vIQLqqQLihnofaIZliXJkXFEwWEEc1xJkkgmrkNgRsYXo/3Mp1bOmBlwV5FwUJ+CntRANN+PRxYopnP6/06pCbQhDAE0sI1gI6sUxZUpIV2j850yoKpLUIlZHifoE1xZxg/OK9qLgslD1OT83nqFCJGSXyfzuuNUIQCpp2xqIFYoyLEQi7ikhpqrVOv6EqHgOJ4N2otWgguRXE2DNvNzqg1v9uR629VDlGYQLq/q5Yhy1s4GbZbiCFsglGMYTZKrmJyhUT9P8UoUMdxdu4gDxnfDlHFReRW3KvB42ELfk721a+UmJGItTlG0CtgxFJWW2s48927+1sCyj+h2eX9r7za0wOpxrswhHBjIgClOEDE+RbEY/BMqv9Vomdi5sg+S0gmwGKQVwrHPySWLtYkSliGRXoIzI7nr3zFLf7DpLKzE8g5x3u2opKrtbx6jzfQN5GImyi8Q+jZXeDX6a7rExAgzpqhXd0V8iF8h5iFsUkFYlbZVDVSlq4/dz6Pd3u7JCzMDN1jq0ayhKRKSC0TfEenMF2r8NSsrinvy5w/rBEGi1rFYLRCYFmVc9D2N7T4NmIF72DKZgKOjdzswucRwMjoKQ8xrM0RDRqjCzLzAN9SIcmFIXyxXfuqzObT0YA/fPAqoo/NAtRASBHzKQ1y3at9CkQAZidVLvhPd9ZrB/rWPY7oZA3qU9XOyGgNzCOdToRjlC2wrtRrA43q51/6/rrv8VAajsaBma7DVsjOV3xj4rbVC18snaAtoX7IM5sNCWh6pAIvLAQYEH8MigCF3HURfQ1zDbwJm2aGEl8FA4IHC08nuBHQ7oyaJRhXuIF+DC9MCT+zBumz/GN2/+jJ0n6GjBSwH+3Ag3BbIsiciXJ4WMLtuNDSGgHojh8/WInsg4u4oFWEKHNnNYWFimTKfbID3z7p1lOLdj2LV4vt0OBD40R26paaX7McMb+iDdQ1MIQLRVJV3dVM7QqLBzBI4ozM+/gItPqzfmvribNTE2zHGOr/D14YV2S4pmXeAFK0wt2J1uGQK6yWG8lXQZydMnzZtzX+radwnRCz4VDlMKJxD1Ndk1rh5d4rL6Q8+7sTUIxEF/b+oNnoPvguuiPt75j5qTs19NVv8bRuFR7kHx6y8AAAAASUVORK5CYII=",name:"slicer-cool2-hover"},{id:"slicer-cool2-selected",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAeCAYAAADaW7vzAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZKADAAQAAAABAAAAHgAAAACc2SYvAAAFvUlEQVRoBe1av4ucRRh+58fu3u1djFWKC4mFHJ5yEYmCrQoSRMHGSksLUxxcY+OFaCUGUkRvEytBbFKIf4AgBBsLwUosFBFMQEXTGM7db3e/+WZ8nndu9zaV3t4mTWY+bne++WZm955nnveZH2tkJvlr9fOtKO9akcDiVpIflqO/NVOlZI+IQGXD6drIJruJRpbEm4+q8/6LSbdmkvG9+oVlkYvd4P+QhMvgr6R7hwARxjVwYT1Yc7na8p/zw5SQztXhi63kL6wE9zvKIq5kSEgmhfSUtAgE8vCfiMCkKJbXwDfrMTZX+tud66bzYX2uJbKzkvxvpAJEgA5pUBGK0nyhYxFkTPqgLjDUDYiISVxKQNqIo1KMMVfMcq/++qHgVRkkwCYJYCDARxqQ06DRRCmTLsv7vAgASQtCgK+NIg54e7x73Dt0af/xYdOTAECewxJUgYfROpASQIqV4BJUIniOpGGMmZIOhQBUMA1T1ANClQPumD+pWjD2VSXkIPppzxQSYedrI8lZvkqT8A5WI2hVUqb1S+Z/I4CBLEoKgxN8AwNdUqOqSBj8qWkOuvJL0X6H21OA2yhPZA0NKBVoKoEIekmjXJLSbPQHPZTcfyJAMoAbVWKBPfmhJujQBjjrLYs6yf3s28n+hcLTqEAFsHKObzAbFNB8NGDtK6TohMgdMgHDpDMqggtMmzy7Ut9AV5xp6TBvNeaOxQrwBur9TYWQSYiA1DiEKceqIIuUlHQUBOjCQDHR0IEp/lyEj+DeKVFUECdRUb606YwM7J68Dbq+ARHkykINrkHlyDhHSWW5HeUrPdhtiR8HO7EENSbjmhUCxOEjN0HGxfCUfO9DVe+Es/KId623/I9yDCrZhGkYVCCTBq3YSUmLQUBNHV0hACH6AGOEszpuyPujcXMpVek1HwdDToyfCzJ6w9vVPRoNGmRNkFE6C3VT0tERAJaMXpFGwgwTXDnsVZuYam0B5dteBmOWaRATWSX4auIsUhqKgyhuC3/J6OZuBwPMfTnysUqUaogpQJ7b5qfl9Z4jkL1k+jF1hbV5qHFvQAgUkiWBN9pMSfcfgarCHAsxDMbg0xAKmaxOjt3/7/JAfiKdOUeo/O8PaoSsGrYBhcT+EIUIWfT9WUKynWcXKj6y+HFDSkgKp0tQSAp5DW+lGompxrfNcPyVfqo6/H5l5knGhBytUF7mRgDgE05uhUwTCtKg/kWq8beCGS8IGd9IY/dk99SzJzEnOwPVJOyZkAiejTCazYpr2k/JzIUA0SSegBX4cnc9SXtl7ek3jz/8xCtpOPrAnNhNj9pazmMZv8bKqMQlfI0INgJ5IywOx/B6HAODrkLOXCxQFiCAe4Meu7xtBKcO8h1g3gIh3HGncCpv5Lp1jbyKhyfZgoyhFU8LAypzh1e33uf7FqXVXQhwEsUB7zDgMafimRMiEA8BuRQH+rKMk8HX/djEE95okGIhCNOFJKMcK8PtkUMPeMBJQElzIIANRC4DCT3PMhB0EKr0lwuKLuOOLsNrl477oY3PrEb7J6rnB5nFqEt7dpD3s3RzHj2RtJIOiwAHMiBPDkEI5OBdDwFZisOqiAMqXQGOTLN+cGKoHKEKSrglDNeBqvCrIXZEqhjlCh0AYc6EwQ0bIDXcVHQIXdkUiPtM8pBQG0W8FHZuDbMtlyUggjM0kpZD10zDkp0LAZqDkgJVeFgAseZQVwZAmId9mMsDE97pJv/rvoHwcEq4NYyKqA8y7uJwri9SGu0jwOUfsoRYT2b1gAr5vg0brWh3Feru7vBlJ36n27ibqJx/KIfYhjxVU9IiESDiNHl4MydKeAcZ8XGXmo/vbLc/UUL4eZ1eeKkt6QJ+SnoLDegZmQrSUtLiEGDcYSIZuPoubKRkev1t/ymLp4TwptOrz6H+ezByKEukncxPS1F/XsrbkhaAwNA2a2OTHtvvqgPLuNbf8p9Nuv4X0OtYscgPSpMAAAAASUVORK5CYII=",name:"slicer-cool2-selected"},{id:"slicer-cool3",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAZCAYAAAD6zOotAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAeKADAAQAAAABAAAAGQAAAACssAsTAAAJpUlEQVRoBe1aa4yUVxk+t++yM7PD3uTWXQSLTS8osLSpooj0lwnVugVMrSUFo2ma2h8mjcaGILWi9ZY0xrYSTbpcQmMbILXtD000FsJ2Cy52GzBFS2HJLuwul90dZnZmvnPzObN8dMDdkLgDXcycZOab+S7nvOd5zvue9/JRUtaWrdu1TWnTagjRhNiyK9fiJyWMEp8S0r5/c8evI+NtwSj1Y+NSYq19M5z7i19GJ7+3Hr/vjyVghOQFF48Sy8LIRM8RQnn8DGGsPWh5Zlex5/tPEWJa3TOMoC9i+7w58x+XvSdarVEb3DlzcX6U0qe8lpu7iz3HXqCUzIj7gmwHvDk/f7p4/IkHIOg34vEJZVIR+50vbfzMSo/xn+WiQm/pGmUA7FpjNiZF2q9pOT94qrnrtUdGL8k1wQ/gO9aWfHlLImxofOtEZvBdgKZxQY/hAEgBR2Ua+qLoyxKHhiOGz0tPX5Q/PLf1L89vXgbQv1s+DmV8Y55GR0PFt1BG60rXxmDsbLh7z+ahzlXftFS30TESCciKJBGPcaMFpeY3uB9jxI291HD37p1DB776I2vJ4vgs5jk4PFr3WDoxshhL4Un04RaX64tYSp+pT/CDI6P6eWMMyI8b7cb4G5av33Pw38On38fNDiCLb3fUkFWXOolvn/SREQNKoBKMWMMD7qVaUg3szfZVbVfr+hLBn1+367mB3PCsvIqGIGCeGVaEbijmxKa0MkvTojNqmdVEGGYCa2xNQgSN05Pp3n0vrnq8//XFy7GqPiSF2XPNK995p/eNhbcQw1rKJyPPTtsfNF1gwPSz5eetoT0t9x16/8RrS1oFMbAIYw3QyNkr/7G3/09Lp6so/6n4vDtKJo7MW3mw/+Sri7+A+7z4GqN0ePa9h7oGXr/rE9KqefF5dxS+7rx35w8XESOfPZUbOkqx0jixkaWswAiwI1bj+cpgV8KNMmOUj0UXGGvDWYn07T4VT3Zs/9pfy+W68neJ4LnrXgybTfrt49kzXUA36zF/RBCahb4VQTYwrBDBWC0gFaSQICImaa2ZpoxKNdSkZtb7KQ+rSF4p4NT87xQVyoR9Aub+k8dGBt6CTYqwdkd9wjKc0Sy3okA50wRsTHoOWClWG66pCZUxtZKqtNE2NX/azNYV87oXbdq0yQk0bhPubItN/XQgP3KcUVYUlmU9Sod8G2Q4pUXYUmeqK9MwVUMJ11YFUOOogP+CCXI+n+s7V8hB4ezFkeJjZYatfC9uwQNTxh15p6GoUAEeMWsLYHzUs34m8HiOKCJpaW+epARuNGEEyA0tkfCPBIuI8vpHh47/+diCF9D7IxONIJYs+TtMUs89OR11Qdyi4DzrEZH1OcsKwiOsHQvz6CYy+caAA2yMgl2jypkvRoq2aDjjRWizh/+VWkqTl/WqPUBUhwoAolaY0nZm/FFYPnxYHogVBPcrgx9wM9RjjDr/jtAiiYTm1AdnZ+qYvnPh13fe0f3Sg0fGE1kEd/Q8PVjI9AB5zTgvcsvzMDFFzoTkCjQ4givVDMwaCKYc1lhAA5QCp0JJbAeUaOAy1TW3HAhsYLakwSXHEXu/Ec4CMpbn1uEXSGaAKZyN8qf+p9/ADdDAGAgLD4Zpw3xFOPZi7Z8eGT4yr276VvR753h9C6jnimyU/xeedt248MiZG4jriK28QrkFgzVvPOrBWgjDCYtCZoWWwvlzlR9wvFlX6twlaTlxWizg7MKXlj6nEjACQyyACrkvDjeG3S2guggfNQuSAgwQKli+M/nM2aUP79rQsXXVj6+cmoAZHvSFF0qlCtpqAS/QQ5TImeMZHoQzQFc+NNn/jsmxiIJGPvUU3EMXFGMKNxjBZUCM7bWYAYNxLq1UZ6sqaP0wllM6y5mCE1xAHJaFHQTJUZCJCn31QXLNgq+8+rvDf7xvoEwsIvpC9VAzbdz3wchAFxZkoI2uiYQNGbUFz/m82H8rLagTwJHsjugffjVMBQaH/+VO3cANM7jor2A6FVcMx4OzfpyzyFNeTjMbKOqH1kReb27oyMcbmv4A8L5YDiAf6nql2LJwdT1AXpCPZM4F7cBbUsaUb5iEpwi1quxKLBcA0btjF5vv/8nHzQefa9UcTgixCSIc58fDFGru9mKNBAhnrGnu4gdtb/fL3fH48BQI2b9tzU+awvR0cBtC9RMRkbVKqUTBysAQzZ2xiR+oHj96BOCyGAQc0uMsj6zWBWxzGYSbo2cKF475lD3hspKxlCWC3Z9I6UdnJhtu00TXaENSiuoUwpka7CfoTV26L36wevzoEIhNdYBsI3KyCMu8C3DnkJiihVO5c+8lm5p2xNJdIq5z++q3E8Lrq2F+Gg5QQllVK61JFk0+hPLDTsOIV9uUQQAbKfZNrj3LCx4TWU7ZBfg1+YJRw6OyOHvp2pfvccJeRtrZnF47O1l3KzbEQBposNW1ktmENsrD7o4eq6Z6qjDstNg5qi5fgfCsRDICkRz26Oh0LnPUY96zSGGyy9zWM/98JWr+9JoEaGzNS5nFfu7UVqGqIz2NxBvi1mvpcE0V8G4UOUrqhhSay1EhT42chg3gutcgGPeLVsv+3Jxll2mwm1jH9jW/aghSjYjrQm1tMiLQZDhcRaL9qsM19alHWbMkJJJXI4jKF/0Xwe5qpOy3ZyXrbtdUh1rbWum8akLhfCmv6nBNHZKdX+SUTlPrIQcSKHygwQIqzW5K1d+GBPkPxiW4c8eqQ6HgxxLcr0MnNQidUtLKJFJOAeKlqsM1BTgu5clAsIJllVYnwE+tNiblzHR9mLwJodMbne1tfyuVC8eT9yRpWNdcQw6iRpxBURMOV1SUCuVDJEACPIBqNpztClWZxhOgem5iBOKqnDV+pGWqQHQa2ymiH50MuahDbZ3u23r/RtfBhASfaF9RmLV2928bwmTbUD73gWWod1IduZSiduWwUqWpSvDELFzDKygJYadFsU+Gkpi0sbJO4kUAnKqZnWy89SQduSse/aoZquXr9hw4nhl8D1UnvAjAMwIfVKwKSGXC9Ltxqu26IxC/4QFzDL+oNqIgmdgk3tNqRZHooY7tDxyOZZpQg+MblM2vn5Go23Yqe/5diaoYXrEJkDGJXA3a1Zri+6rH64iAduUqvCpiNZxeE4KI8GNh7c1g5PcdOz4k10l0VQ12N33u4d07+kfPJwtKZfCEhuJi93XF7qoCO3yufxt7y5JRjnqfFgnh189KNkZ729tWXynLVTXYPdBHR751y7QZp0ai0d5SB47Xcf3v0tXq1/VA4KJugWSR8Pxw2ZxD8/eOM+5/ALTyxW5w9yrzAAAAAElFTkSuQmCC",name:"slicer-cool3"},{id:"slicer-cool3-hover",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAZCAYAAAD6zOotAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAeKADAAQAAAABAAAAGQAAAACssAsTAAAJlElEQVRoBe1abYxUVxk+X/fe+dyZZdaVz6BVkwIqywJqTEjaJtLGaBVSE00w1kTb+EPjD4g1pbiytErRyB8/Gv3RNjWxf4RGaWNssIk/KiCQrkAKkRbo7hIWdnd25s7M/TgfPmfGWaYrmw3ZgQUzJ9m9d+6595z3Pu953/d533MpaWnrdvkvKqP6jTGq5fKtO6XUFcY8f+J7+38Z1arnCDFLiDGEUEooIb93V+7bFl7c/iwxZEdTCPSUHe6uIlSnYxmfMpQ6zWcYYz9wVux9Nry04zWizUP2GYqxMORZd+WKteq94QeV1q80rmEeNM755/nyZYejS8NnMP89zbFw/idv5c8eji/s2KmJGazfjH+UssBh7BPrfvXE/TyR2BvGtWHbRwnHgLp52y09JpzkipHF48tHH19anWsi4NhoS58bTfWOZN68NnV1CAAoQ6ySOSS2QrdLcIax7J9iUBTHQuKFfG+fWJrpf71v69e00S80pGn855xtzmW7/zExNX4O9y+uX7X6Z/RA96cObJ04umWf0Xq7XQ6QF920xqmzhjHiSh3/C+M70+NR+uPCpw8OjB/58l+gxM3N63j2QrfoXVNUY5u1MQeayrdHxvgjuZ7soeJY8Qz6Ptx8BsfXC5955XPrflQ5dqV0+d/M4mQ0BDCaGmDHqGoI1EbcMLDREIkarEk3syhVYCcG01taZLrhqWhe7R3O7SsFU+chWAS8ao7mIUCTDSXb1dmWhgWloVwuJNMe5kr61dL57Aj5Rf6xP3738p/XKU3JtEyEU53feKB8+bW+h5Uiq1slGP3n+pQKxnaHxcqp1utM8O6lDx0/Mfrq2i9oTZc0+6DI0J6H1y4+BmXd17xuj5Ez+sHFDx49OPJq/1exYBLNPkZZJb/xRDB8qG8rZF3bvG6PE39dn9t0OPx+d6qwf6o2ebauWEIjdAWOZiGcIAzEsRpuB3bWEBm8lmsM9ZRWKlDB6jVPFB84/dP8YfTN2uyD5EOP/i2RX77hyNXy2HFuqO8YNgUl+BxKRremQGTWEW6iAyu7LqhiyoNrTccmzmHwTDqVXZxKpBzMEt/EcAt+K14GoNOPjZeuvgkDjuAZqkKLEtfGZ8YJ8LaqHdhZ3IANB1YJyVVWMdMFZWd6cr39XyLpvoEBOqurqFtLftmGn5TD4rucsJBp4nMjJjkEdQ0NtWbti8cYiTHNI008vHlEBCcxUKqF/ohfKwvrtxtaM/89LrgOZxGANhZ8PS7oy8a+FGERkAoQgKoOsBNGVLiisbLRY74NuFGqhWI8AU0rOAamNXFK1al3D3r61xj+8dmmEOufM44aqTwQRNFxTkkojOM7kvmcuj4CWaQQXSjC5WwD3Mx1yEY54/BmLObc6EhKYgTVSurQYdqB0He4Yme+LYIiFYi6sFNCJaJ2FV6vCgOp4VrgGGqVPm/8LG6MCBbSWDoO8NMUIc64YRxeTbnpDaufGl9zZrBweqZ09reQ75UHy0H5oiVWTNOQQTi46dCF/4RXkHA3UG5b9IvpGKgbpcJFcFeSuPjNYpxS41MlBFzQXaVgRj3T4J8xsVYMsgUDITWhaAhzi41hCkwS7nO++AE3uOkEFlNkoCZpXC2oBz/iTlWKpwvZnhcA7gar0JkNLtrcH8XVc4xaxszgUcBz8Dxl4KA2IrYZchtNmIS/ESIEmdac0UhTB7hgcmMd9t3UmooTBJ5PgztbS465ZrGl1Qg5DXLfhleysRxJh4K/CLXQvjLCszEZmYfjh5Vra58q73xrMLtn5lQC7neMMzeB/DcA9gKCgfrBJ2OJEIZY2DYRr0+NeTSUbFd95BouG3PBjoHO9bvurrN6GNPwfQyvQ2DNwA0v1FwB7XkZKMcIIGfdPzG+9hxPk9CrhdWRtJP8ysef9n976snMldbJRCmKtuWzi/4+URo7bpjxsCKSSkSJiItARKBYVmgLfZubVTJWPJRsc0gsJAVCCpd9dzdo1eJVJ0W3ADOAZr2fS52IClFRMvKI4yQkkc5kbeL0ItbzMvC7rxVD9s7eRVNI2f6Q8DJLCDUJpDAZGFfamDCJrBrk8NZalXU9dWVbhf8//Nn3wYu0gtzOc4sRAFNg6CFTzEdQLRNFqkrpSiBr9JNPlr7ROl/dZIaezj+T9jK9YAwJ8NyUZCqLQkQqpNqjHDyhkb+2Ptc5X0AEUMyyfCkWkteQjiG/dEuIptVSpXSeCbbdViWb4k37RG3kd3KpwipDVNJwk4mFzkgRJy3phc+Zvq/5YOe4cAhYr8ck0Z5xQhCmKhh7GemZLwgPSpXxt3tHci81pZtW3NBg7ojL3RHHEV1YHillTBZBMi1ZhOQapAtV9uZDneMdgECduRglYh6A0vkOXDWIXS2SphjJYKktY1op36e0kFe+nk8V7kWu5NVjMTdZSVQqQlTXApwaWr4DXq0jAhCwcR55sK2gxUhqoWThowpZsfWjcjB51nXF/oEBUNhWtK6+sS9asmlHCkX+fqliHxwXZIFKoU0slAH3Qjl0/ll765Sd83kgYAumSDXBjZHsIBVHGu6BfSWxe4A6lYkvcLLpfRZs5zq5p/vnaTdbgGITqLKllaAZyeCyGXU7hGse2rhdjyK+2hbFtSlldN//KNh2qjj+dlemezV8QAKkK6uozKL2lsQKQXm1Q7gsRndCs7wIBQSb5zhKo4aBOgYyHoENc9adWbRKE/3DGyp46Jn8CYeJ8yBcefjkZMxMBmWxtOQG9U/RIVx3gHZt6mp5UYgcCWltSvIoC4PMwGt7SS+5DB8rHDq1p/uN+nbhjeSdvJR+NLeSHLtWvFLiUDBYecixgWFELD3pECXsPvG8q+g3mrpzbQ4EGrtyIEfEuDGNM5LLLskZsh+ZdgXPJ700fWt3dpcdZlYFX3ieBn07p36TTmS2BEHlHUkZymMqcrGnFwlZQ1FUEt5R8By6uGXd4EQcmQ54ku6C8eWxY5nFdnqyK124t3jx2MbmxHOmPesG/KPj5fG3qdI+NayEPb0SkwxfK2Djz4CYd9ptR8C6Z0ORISHuxjaVZRrWq9I9XYV+w5Pbhga86c+YZrXgptRaOd/MeV0vFqsTQ6DlFIzaIx4+T0EEx9c8cPmdtgAIWMPE9rMB6TV2yzDRlez6CILm74YGryvXyjWnBdub+nb5L5Uqk+lYxSVUyeznBYi+NgvrGLDF5/Y3cGPYMJJg+9mXcITbjTJzdHJ3+pGZssxpwfaB4qVj3/rAPZ8drcXV4foAHbudieOC/cY3McJxvMQXjffRkzeQ4j/hUUz+6sOyvgAAAABJRU5ErkJggg==",name:"slicer-cool3-hover"},{id:"slicer-cool3-selected",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAZCAYAAAD6zOotAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAeKADAAQAAAABAAAAGQAAAACssAsTAAAJWUlEQVRoBe1aW2wcVxk+t5nd2V1717GTxrmQNqqAEkW50RSJPlQCkqaqKogIRNweQALeKkRCRBOqQFqjJJWKEKhVX4AHQKLQtCptVFHxgHgoAeLmQlCDgNyNL9ms7b3MzpwL3z/uOBvjKFW7iWO0x7Jn5sycc/7zf//9mLOWtn735K81tx92ztmW7pt2yxlXnLGfvPno0wejRv00Y66fOccYxxvGfu6vOPiF5tkdB5hjO1Mi8GbSk/49jNt8rOOTjnMvHSOE2OUt33+geW7nYWbdgzSGYy5M+Za/Yvkac/7CZmPtS1N9WAdNSvmQXLb099G5C6ew/sp0Lty/nFnx1CPxmZ17LHP7ko/xh3MRekKsXvvMt7co3x+I4ubo1DtQDEJvRcv6Qd8ZN75kdO+i6o3WI6qStnDvSGFJnDlWmbhyRoB7jlvLrXDYEahuF94CPHDcCYtZhQDjRKlnwZ1adN3zxy1bt1tnf5bSQ1cpxaZiV88b5fHLpwHs4uQd4S/4oZ6Nh7aWj3zqoLN2B4mDS5jLG5J7q4RgvrbxCQiqNz0f59/tve/FvZf/9MnXQMOmtB9jz/SoRasqZmSTde5QCj5dhZCfLvZ1vVIZqZzCu7vSMbi+3vuRlz6x7vHqyXJldCzhEQjA7iwD1yB0ljtD0tAmxAXtD5u0AnsXXKpsKV+qHX2isLmFpllvVdq7NM7+aLJWG8YsmjseKaciYGEAcZuIpJUEiQq2L6Rh1sf+/Vp1cqSQE8+WNr7wlaHfrjOWs2mamOS2dO+hyaHDax8xhn0opZWul/6yIWfCke81K7WTrf1CyZ4lD/716KVX1zwMEe1P3wHIJt03x85+FWA9kPbTNfIu3bF485EXL766fjsEJpu+Ay9rpXuPhhdeWbsVXFiT9tO1/LsNxQcOh48WCt3PVGuTF0gpgEHMnYsV47FzCrxrl3KAb44JJ7gCJp4zxjZ19L7Vu8a3nNhfPNxK18z7RIOXfeN8sDBfPHGlcvlfkomGtKqG2UJpRYwPgEn7NBjSIoywHgQ9a7jJGWGCIJsrBkEhBuPjmQTels/gMmkneANc+d1XKqNkYWJuWFM5WVeWNziTABs9beEdNJg7CV3ztIxzmvMcrGC2VOq78+6/5z74/PO0zuwt0Za+oPSDajgxIpiIpZUNz8qqNKqumIstSSaTs49+F70gVWjLPSN4zCQJjmRhs2EbjbrksK1JIwbezi01vZbod6cYlzA8TEM5IgnFEADZsyKEG4JFoqDivTcIC6AxPlTAMt9wbZ2sNibG/vEB81PM/sXrraBW7XU+09WPxWEE7ZURtDZUVjVUcuXQKhint/l+vUnecT/4IUj2udOMGwdScW8tzHUMn6+YodiK2u2N7xSN+EtKBd4gpIC7hzuDG4Dli5JfI+HmCIc28A9845CcSAujCAvDJJZWcRiPa9/dt25Xdc3g/sKxabpabpSKqk/VmtUxzqWBb4yhxZGwLobOaseF4RRQk6C2qTmEIgAZtgYTKsRwjGv4eZ8LCeUmRZhHjSwO7QNxFfbloMGxdI6UJJacGYBLGyJBfu/NSZuBnY5JPeDgrREI5mFmJyfOFUs9v8ACq2ZbBEJmPh5F4RC0F6yn4BlEgViKA9tjXGYui91CqoGm9oxqOAgTBElCn5NIYubX8+NZUmQPg4z4XEBgrdTYl4XLwU7bgS64AHeACS2sRSyNDp2SHpbzsIyq1+uNdXsmBgaf6H5sJr8UHN+QkD5FZhEsJqyLlc5YBEKSrCd5m7b4kNaFaU6ASkkYZUyG1pLzTXtbN0T3hCPYB2ixE6gGZW6Jj5754bt/TrDg3CgrI6t1qDzhx856zahxOZvxP/v+3WM/Pv1k38XWFVRUc9u6u7r/PDFe/ifUytPWZqBPvjBJFAiyAUNbbEzrsuAFCQ4BDTNHgoSeaz+Yj0/AFYJLVhCtTZp7DR8wJ5aAUmqPeaHTsWd95TlrVLU2cb67sOAQPt/YOkT87elimRv7S9/P9gJJH8lb1gqWhT/3ya1QQtA6oO33kHIC+//ld0prbwa4U5wnPqEhy+QxjG1Dat6ACjYRqTbCqB6s2V35eitGSXz85kBxTy7I5yB6PrJ1AjdArppB9OPBMSIqSj5rHde5n0MOoBYEX+ygixSpJ3WLOhBqNuq1IS7lTqpKpuRdRc7GXyvkupfBf/gYHSBSCOAefYCMXEBf/S4d2bnOHQcS3y6QV4oYACOtBcgG+TeHx62OX1qqg9+kxE0DN/hkzx885Z+VnsoZzjKI2QCwzRLIiMzhWG6yqU4p6lzfEQeSTAemWmhE1TDVVEGDJqKCaWo4hEnKmDTRNMD04I03t3UVupZCi1FpMoFWLtDcZFAHQ3kV2eu1n9OQTpszDiB2QYkFwAImHiHtCekXfXG9MXFRZdQPt21z8poa5MUjB5p33P+tImL8DagvNRB0IXlH3QRlJzhyXEmR2541zRmL5v3CFLWjPsTgjqF7qJciLxbWh2J72hhXXezuv0aDacPHBnr25YN8FqEtAi6bRYEVAZfLIGntBFzzQSLeDuAj3awBv3X/AzDtwTSbX84XisuTgIubAGUPmGrnw1yjuNgJuG4XnCkuEhaqhxPipKoFDUZqm7jTYldpGZLPHbMCfPxA7xtKqrc8X+Up4NJJwGWQH+MskstOwHU7IEypK+IiSmVRkwI2OrDSZlE+87wg6EXx9OVjA8XXrh6uzyB6eHhi+8LF3SfGy2MNlBKDGEeHEBgcZDuj6Ew+qdfcvIR+Bjmdx1YOgO0CtQ6cBKlY6CwqHjmAkkM9P6t8L5/LZMPBfd3fpCHXBfjSc0vqix6rPJsJ8p+Lwvp/DBMA2Wim6YzPNamWDD/dibhaGX+r7hH5osCLoz6DyiPAZTavncmhM1Mo9PWPTpZXp6TcsAy5/vHaicp4eRgluDDJtYyo45ggwjFignQ6Ued6KzlA/zaBH5cUohAf2Rz0OVsq9qzEEeVnjg+UjqbUXFeD0w9MFH0pnyv8CsXsf2sLmZHWwzEYRVowFB0TnfLp1l6n/kcLR3B0iO/jyNAPcvl+KOFzx7+/YBpcoumGGkwfrf1O7YVqtbLYGF2H4kJzcchHRwQdgIk9c9CgwQiCgB79U7BE9bHQlSuVB/cVHppJzA01mAaMVcuf7+9ZNBw265fJAXdqHTPZOHfP0FDl+Rmx8mT2o4OzkPFfKMb7XpZ8dN8AAAAASUVORK5CYII=",name:"slicer-cool3-selected"}],qr={isSlicer:function(e){return e.scenarioType===H.ScenarioType.Slicer},isVisualSlicer:function(e){return e.scenarioType===H.ScenarioType.Visual&&e.options.sliceFilters},isGroup:function(e){return(null==e?void 0:e.scenarioType)===H.ScenarioType.Group},isInGroup:function(e){return!!e.groupId},isInSpecifiedGroupFn:function(t){return function(e){return e.groupId===t.id}},isContainer:function(e){return[H.ScenarioType.Container,H.ScenarioType.TabContainer].includes(e.scenarioType)},isTabContainer:function(e){return e.scenarioType===H.ScenarioType.TabContainer},isScenarioSupportDataset:function(e){return[H.ScenarioType.PivotChart,H.ScenarioType.Slicer,H.ScenarioType.Visual,H.ScenarioType.Picture].includes(e.scenarioType)},isAffectedSlicer:function(e){return[H.SlicerType.TreeSlicer,H.SlicerType.ComboBoxSlicer,H.SlicerType.LabelSlicer].includes(e.SlicerType)},isSlicerSupportAggregatedData:function(e){return[H.SlicerType.TreeSlicer,H.SlicerType.ComboBoxSlicer,H.SlicerType.LabelSlicer,H.SlicerType.DataRangeSlicer].includes(e.SlicerType)},isScenarioSupportAggregatedData:function(e){return[H.ScenarioType.PivotChart,H.ScenarioType.Slicer,H.ScenarioType.Visual].includes(e.scenarioType)},isMapChart:function(e){return e.chartType===H.ChartType.Map||e.hostDefinitionId===H.ChartType.Map},isSpreadChart:Qt("dataSourceType",H.DataSourceType.Spread),isMergedChart:Qt("dataSourceType",H.DataSourceType.Merged),isPivotChart:function(e){return e.scenarioType===H.ScenarioType.PivotChart},isCardChart:function(e){return e.chartType===H.ChartType.Card},isVisual:function(e){return e.scenarioType===H.ScenarioType.Visual},isPicture:Qt("scenarioType",H.ScenarioType.Picture),isRichEditor:Qt("scenarioType",H.ScenarioType.RichEditor),isWebContent:function(e){return e.scenarioType===H.ScenarioType.PivotChart&&e.chartType===H.ChartType.WebContent},isDataRangeSlicer:function(e){return e.slicerType===H.SlicerType.DataRangeSlicer},isDateRangeSlicer:function(e){return e.slicerType===H.SlicerType.DateRangeSlicer},isInContainer:function(e){return!!e.containerId},isInSpecifiedContainerFn:function(e){return ae.propEq("containerId",e.id)},isWebRunTime:function(e){return[H.AppViewMode.Preview,H.AppViewMode.Viewer].includes(e)},isViewer:function(e){return H.AppViewMode.Viewer===e},isDesignTime:function(e){return e===H.AppViewMode.Designer},isLoadSuccess:function(e){return e===H.ServerDataStatus.LoadSuccess},isNumber:Qt("dataType",H.DatasetFieldDataType.Number),isDate:Qt("dataType",[H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]),isString:Qt("dataType",H.DatasetFieldDataType.String),isBoolean:Qt("dataType",H.DatasetFieldDataType.Boolean),isMeasure:Qt("category",H.ColumnCategory.Measure),isDimension:Qt("category",H.ColumnCategory.Dimension),isCalculation:Qt("valueType",H.AggregationValueType.Calculation),isValue:Qt("valueType",H.AggregationValueType.Value),isCustomMeasureValue:Qt("valueType",H.AggregationValueType.CustomMeasure),isValueOrCustomMeasure:Qt("valueType",[H.AggregationValueType.Value,H.AggregationValueType.CustomMeasure]),isRunningOrMoving:Qt("type",[H.DatasetExtendColumnType.Running,H.DatasetExtendColumnType.Moving]),isHierarchy:Qt("type",[H.DatasetExtendColumnType.Hierarchy,H.DatasetExtendColumnType.DateHierarchy]),isDimensionHierarchy:Qt("type",H.DatasetExtendColumnType.Hierarchy),isCustomAttribute:function(e){return e.parentIsCustomAttribute||!!e.expression},isDateHierarchy:Qt("type",H.DatasetExtendColumnType.DateHierarchy),isSubDate:Qt("type",H.DatasetExtendColumnType.SubDate),isFiscalDate:Qt("type",H.DatasetExtendColumnType.FiscalDate),isBubbleOrScatter:Qt("chartType",[H.ChartType.Bubble,H.ChartType.DisaggregateScatter]),isMap:Qt("chartType",H.ChartType.Map),isGroupingRole:Qt("kind",H.DataRoleType.Grouping),isValueRole:Qt("kind",H.DataRoleType.Value),isGroupingOrValueRole:Qt("kind",H.DataRoleType.GroupingOrValue),isValueOrGroupingRole:Qt("kind",[H.DataRoleType.Value,H.DataRoleType.GroupingOrValue]),isGroupingItem:function(e){return Qt("method",[null,void 0,H.AggregationMethod.None])(e)&&!Qt("valueType",H.AggregationValueType.CustomMeasure)(e)},isAttributeItem:Qt("method",[H.AggregationMethod.First]),isTable:Qt("chartType",[H.ChartType.PivotTable,H.ChartType.DataTable,H.ChartType.KpiMatrix]),isPivotTable:Qt("chartType",H.ChartType.PivotTable),isDataTable:Qt("chartType",H.ChartType.DataTable),isKpiMatrix:Qt("chartType",H.ChartType.KpiMatrix),isEmbeddedDashboard:Qt("scenarioType",H.ScenarioType.EmbeddedDashboard),isEmbeddedReport:Qt("scenarioType",H.ScenarioType.EmbeddedReport),isCOTDataset:Qt("datasetType",H.DatasetType.COT),isAnalysisModel:Qt("datasetType",H.DatasetType.AnalysisModel),isActualDataset:Qt("datasetType",[H.DatasetType.COT,H.DatasetType.AnalysisModel,H.DatasetType.PushDataset,H.DatasetType.StreamingDataset]),isDatasetCategory:Qt("subType",[H.DatasetType.COT,H.DatasetType.PushDataset,H.DatasetType.StreamingDataset]),isItemInvalid:function(e){return e.invalid||e.notMatchSchema},isNormalAggregator:function(e){return e&&"Aggregator"===e.type},isFloorPlanChart:function(e){return e.chartType===H.ChartType.FloorPlan||e.hostDefinitionId===H.ChartType.FloorPlan},isConstantCF:function(e){var t;return(null===(t=e.extends)||void 0===t?void 0:t._type)===Hr},isComparisonCF:function(e){var t;return(null===(t=e.extends)||void 0===t?void 0:t._type)===Br},isAnotherFieldCF:function(e){var t;return(null===(t=e.extends)||void 0===t?void 0:t._type)===Ur},isWebFont:function(e){return new RegExp("^".concat(H.WRAP_NUMBER_START_FONT_MARKER,"((\\w|-)+)")).test(e)},isSVGExport:function(e){return e.state.isSVGExport},isBlankFormula:function(e){return/ISBLANK/i.test(e)},isErrorFormula:function(e){return/ISERROR/i.test(e)},isDisplayTimezoneColumn:function(e){return e&&e.dataType===H.DatasetFieldDataType.Datetime&&e.displayTimezone},isCustomMeasure:function(e){return e&&e.type===H.DatasetExtendColumnType.CustomMeasure},isCalculatedColumn:function(e){return e&&e.type===H.DatasetExtendColumnType.CalculatedColumn},isSlicerImage:function(t){return Yr.some(function(e){return e.id===t})},isCustomInputType:ae.pathEq(["options","dataSourceType"],H.DataSourceType.CustomInput),isCustomDataSource:ae.allPass([ae.pathEq(["options","dataSourceType"],H.DataSourceType.CustomInput),ae.hasPath(["pivot","customDataSource"])]),isCartesianChart:function(e){return[H.ChartType.Column,H.ChartType.StackColumn,H.ChartType.PercentStackColumn,H.ChartType.RangeColumn,H.ChartType.Bar,H.ChartType.StackBar,H.ChartType.PercentStackBar,H.ChartType.RangeBar,H.ChartType.Line,H.ChartType.Area,H.ChartType.StackArea,H.ChartType.PercentStackArea,H.ChartType.RangeArea,H.ChartType.Composite].includes(e)},isRadialChart:function(e){return[H.ChartType.Pie,H.ChartType.Donut,H.ChartType.Rose,H.ChartType.RadialStackedBar,H.ChartType.StackBarInPolar,H.ChartType.Sunburst,H.ChartType.BarInPolar,H.ChartType.Radar,H.ChartType.FilledRadar].includes(e)},isInSpecifiedContainerTabFn:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ae.path(["tabSettingContent","activeTab"],t);return function(e){return e.containerId===t.id&&e.tabId===a}},isNormalScenario:function(e){return!(qr.isInContainer(e)||qr.isContainer(e))},isEditingSpreadChart:function(e){return qr.isSpreadChart(e)&&e.state.editing}},Jr=qr,Xr="en",Qr={showGrid:!1},Zr={scenario:{autoGradient:!1}},$r=V()({},H.ScenarioType.PivotChart,(aa={},V()(aa,H.ChartType.Line,{property:{showDots:!1}}),V()(aa,H.ChartType.Composite,{property:{showDots:!1}}),V()(aa,H.ChartType.Area,{property:{showDots:!1}}),V()(aa,H.ChartType.RangeArea,{property:{showDots:!1}}),V()(aa,H.ChartType.StackArea,{property:{showDots:!1}}),V()(aa,H.ChartType.PercentStackArea,{property:{showDots:!1}}),V()(aa,H.ChartType.Map,{property:{mapInfo:{nodeId:"",hierarchyId:"",mode:H.MapMode.Offline}}}),aa)),eo=!1,to=!0,ao=!1,no=!1,io=[{value:H.DisplayUnit.Auto,label:"inspector.properties.charts.displayUnit.auto"},{value:H.DisplayUnit.None,label:"inspector.properties.charts.displayUnit.none"},{value:H.DisplayUnit.Thousands,label:"inspector.properties.charts.displayUnit.e3"},{value:H.DisplayUnit.Millions,label:"inspector.properties.charts.displayUnit.e6"},{value:H.DisplayUnit.Billions,label:"inspector.properties.charts.displayUnit.e9"},{value:H.DisplayUnit.Trillions,label:"inspector.properties.charts.displayUnit.e12"}],ro="$",oo=[H.AggregationMethod.None,H.AggregationMethod.List],so=["Arial","Arial Black","Comic Sans MS","Courier New","Geneva","Georgia","Helvetica","Impact","Lucida Console","Meiryo","Meiryo UI","MingLiU","MingLiU-ExtB","MS Gothic","MS Mincho","MS PGothic","MS PMincho","MS Song","MS UI Gothic","NSimSun","Osaka","PMingLiU","PMingLiU-ExtB","SimSun","SimSun-ExtB","Song","Tahoma","Times New Roman","Trebuchet MS","Verdana","Yu Gothic"],lo="cn",uo={showGrid:!0},co={scenario:{autoGradient:!0}},po=V()({},H.ScenarioType.PivotChart,(na={},V()(na,H.ChartType.Line,{property:{showDots:!0}}),V()(na,H.ChartType.Composite,{property:{showDots:!0}}),V()(na,H.ChartType.Area,{property:{showDots:!0}}),V()(na,H.ChartType.RangeArea,{property:{showDots:!0}}),V()(na,H.ChartType.StackArea,{property:{showDots:!0}}),V()(na,H.ChartType.PercentStackArea,{property:{showDots:!0}}),V()(na,H.ChartType.Map,{property:{mapInfo:{nodeId:1e5,hierarchyId:"online-china-map",mode:H.MapMode.Online}}}),na)),ho=!0,yo=!1,go=!0,mo=!0,fo=[{value:H.DisplayUnit.Auto,label:"inspector.properties.charts.displayUnit.auto"},{value:H.DisplayUnit.None,label:"inspector.properties.charts.displayUnit.none"},{value:H.DisplayUnit.Hundreds,label:"inspector.properties.charts.displayUnit.e2"},{value:H.DisplayUnit.Thousands,label:"inspector.properties.charts.displayUnit.e3"},{value:H.DisplayUnit.TenThousand,label:"inspector.properties.charts.displayUnit.e4"},{value:H.DisplayUnit.HundredThousand,label:"inspector.properties.charts.displayUnit.e5"},{value:H.DisplayUnit.Millions,label:"inspector.properties.charts.displayUnit.e6"},{value:H.DisplayUnit.TenMillion,label:"inspector.properties.charts.displayUnit.e7"},{value:H.DisplayUnit.HundredMillion,label:"inspector.properties.charts.displayUnit.e8"},{value:H.DisplayUnit.Billions,label:"inspector.properties.charts.displayUnit.e9"},{value:H.DisplayUnit.Trillions,label:"inspector.properties.charts.displayUnit.e12"}],vo="",bo=[H.AggregationMethod.Sum,H.AggregationMethod.None,H.AggregationMethod.List],Co=[""," Light",""," Light","","","","","","","","Arial","Arial Black","Comic Sans MS","Courier New","Geneva","Georgia","Helvetica","Impact","Lucida Console","Meiryo","Meiryo UI","MingLiU","MingLiU-ExtB","MS Gothic","MS Mincho","MS PGothic","MS PMincho","MS Song","MS UI Gothic","NSimSun","Osaka","PMingLiU","PMingLiU-ExtB","SimSun","SimSun-ExtB","Song","Tahoma","Times New Roman","Trebuchet MS","Verdana","Yu Gothic"],To=Object.keys(n).reduce(function(e,t){return e[t]=function(e){var t;switch(p$.edition||(null===(t=p$.config)||void 0===t?void 0:t.edition)){case"ZH":return i[e];case"EN":default:return n[e]}}(t),e},{}),So=p$.config.defaultViewer;To.dashboardOptions.dashboard?To.dashboardOptions.dashboard.defaultViewer=So:To.dashboardOptions.dashboard={defaultViewer:So};function Do(e){return p$.reduxDocPath?Go(p$.reduxDocPath)(e):null}function ko(e){var t=e.getState();return{designer:t.designer,docData:Go(p$.reduxDocPath)(t)}}function wo(e){return ae.compose(ae.prop(e),Do)}function xo(e){return void 0!==e}function Ao(e){var t=0<arguments.length&&void 0!==e?e:navigator.userAgent;return/Mobi|Android|EofficeApp/.test(t)}function Io(e,t){var a=1<arguments.length&&void 0!==t?t:navigator.userAgent;return void 0!==e?e:Ao(a)}function Po(e){if(e){var t=e.trimEnd();return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}/.test(e)&&!t.includes("\n")&&!t.includes("\r")}}function _o(e){return Ft("dialogs.spreadFormat.conditionalFormatting.dateOccurringFormat.date.".concat(e))}function Mo(a,e){return e.reduce(function(e,t){return e[t]=a(t),e},{})}function Lo(t){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return ae.path(["options",t].concat(e))}}function Ro(a){return Object.keys(a).reduce(function(e,t){return Object.assign(e,Mo(Lo(t),a[t]||[]))},{})}var Vo,No=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},Eo=To.scenarioOptions,Fo=No(To,["scenarioOptions"]),Oo=Object.assign(Object.assign({},Fo),{getScenarioOptions:function(e,t){return Eo?(a=Eo[e]||{},t&&(a=a[t]||{}),a):{};var a}}),Ho=a(10),Bo=a.n(Ho),Uo=Symbol.for("null"),zo="",Ko="EMPTY_PREFIX",jo="NULL_PREFIX",Wo=ae.curry(function(e,t){if(ae.isEmpty(e))return t;var a=ae.path(e,t);return a||Wo(ae.tail(e),t)}),Go=ae.compose(Wo,ae.split(".")),Yo={styles:{optionWidth:80,optionHeight:26.667,optionMargin:0,contentRadius:{left:0,top:0,right:0,bottom:0},backgroundPadding:{left:0,top:0,right:0,bottom:0},optionPadding:{left:10,top:5,right:10,bottom:5},optionBackgroundColor:void 0,gradient:void 0,collapseBorder:!1,textAlign:ka,textVerticalAlign:ka,slicerItemsAlignment:ka,slicerItemsVerticalAlignment:void 0,widthAdaptive:!0,regular:{font:{fontSize:void 0,fontFamily:void 0,color:void 0,fontWeight:void 0,fontStyle:void 0},showBorder:!1,borderColor:void 0,thickness:1,backgroundColor:void 0,image:void 0,borderRadius:void 0,gradient:void 0,shadow:void 0,showMarkingLine:!1,markingLine:{width:100,height:5,position:"bottom",color:"=Theme.Colors!Hyperlink",gradient:void 0,borderRadius:void 0}},hover:{font:{fontSize:void 0,fontFamily:void 0,color:void 0,fontWeight:void 0,fontStyle:void 0},backgroundColor:"rgba(0, 0, 0, 0.2)",showBorder:void 0,borderColor:void 0,thickness:void 0,image:void 0,borderRadius:void 0,showMarkingLine:!1,gradient:void 0,shadow:void 0,markingLine:{width:100,height:5,position:"bottom",color:"=Theme.Colors!Hyperlink",gradient:void 0,borderRadius:void 0}},selected:{font:{color:"=Theme.Colors!Hyperlink",fontSize:void 0,fontFamily:void 0,fontWeight:void 0,fontStyle:void 0},backgroundColor:void 0,borderColor:void 0,showBorder:void 0,thickness:void 0,image:void 0,borderRadius:void 0,showMarkingLine:!1,gradient:void 0,shadow:void 0,markingLine:{width:void 0,height:void 0,position:void 0,color:void 0,gradient:void 0,borderRadius:void 0}}},editorStyles:{regular:{font:{}}},relativeDateStyles:{regular:{borderRadius:{left:0,top:0,right:0,bottom:0},font:{},thickness:1},hover:{},selected:{font:{color:"=Theme.Colors!Hyperlink"}}}},qo={id:H.LabelSlicerType.Label,displayNameKey:"inspector.properties.slicers.lablesLayout.label",styles:{textAlign:Da,slicerItemsAlignment:Da},editorStyles:{regular:{font:{fontSize:"12px"}}}},Jo={id:H.LabelSlicerType.List,displayNameKey:"inspector.properties.slicers.lablesLayout.list",styles:{textAlign:Da,slicerItemsAlignment:Da,optionMargin:4,regular:{showBorder:!0,thickness:1},hover:{backgroundColor:"rgba(0, 0, 0, 0.2)"}},editorStyles:{regular:{backgroundColor:"unset",font:{fontSize:"12px"}}}},Xo={id:H.LabelSlicerType.ButtonGroup,displayNameKey:"inspector.properties.slicers.lablesLayout.buttonGroup",styles:{textAlign:Da,slicerItemsAlignment:Da,collapseBorder:!0,regular:{showBorder:!0,thickness:1}},editorStyles:{regular:{backgroundColor:"unset",font:{fontSize:"12px"}}}},Qo={id:H.LabelSlicerType.Cool1,displayNameKey:"inspector.properties.slicers.lablesLayout.cool1",styles:{optionMargin:4,optionWidth:67,optionHeight:25,textAlign:ka,slicerItemsVerticalAlignment:ka,widthAdaptive:!1,regular:{image:"slicer-cool1",font:{fontSize:"12px"}},hover:{image:"slicer-cool1-hover",backgroundColor:"unset",font:{}},selected:{font:{color:"#fff",fontSize:"12px"},borderColor:"=Theme.Colors!Hyperlink",image:"slicer-cool1-selected"}},editorStyles:{regular:{backgroundColor:"unset"}}},Zo={id:H.LabelSlicerType.Cool2,displayNameKey:"inspector.properties.slicers.lablesLayout.cool2",styles:{optionMargin:4,textAlign:ka,slicerItemsVerticalAlignment:ka,optionWidth:70,optionHeight:30,widthAdaptive:!1,regular:{image:"slicer-cool2",font:{fontSize:"12px"}},hover:{image:"slicer-cool2-hover",backgroundColor:"unset",font:{}},selected:{image:"slicer-cool2-selected",font:{color:"#fff"}}},editorStyles:{regular:{backgroundColor:"unset"}}},$o={id:H.LabelSlicerType.Cool3,displayNameKey:"inspector.properties.slicers.lablesLayout.cool3",styles:{optionMargin:4,textAlign:ka,slicerItemsVerticalAlignment:ka,optionPadding:{left:10,top:7,right:10,bottom:5},optionWidth:90,optionHeight:25,widthAdaptive:!1,regular:{thickness:1,image:"slicer-cool3",font:{fontSize:"12px"}},hover:{image:"slicer-cool3-hover",backgroundColor:"unset",font:{}},selected:{image:"slicer-cool3-selected",font:{color:"#fff",fontSize:"12px"}}},editorStyles:{regular:{backgroundColor:"unset"}}},es={id:H.LabelSlicerType.Gradient1,displayNameKey:"inspector.properties.slicers.lablesLayout.gradient1",styles:{optionMargin:1,contentRadius:{left:14,top:14,right:14,bottom:14},backgroundPadding:{left:1,top:1,right:1,bottom:1},textAlign:ka,slicerItemsVerticalAlignment:ka,widthAdaptive:!1,gradient:{type:Ir,angle:90,colorStops:["#5266FB","#73F5F6"]},regular:{thickness:1,borderRadius:{left:0,top:0,right:0,bottom:0},backgroundColor:"=Theme.Colors!Light1",font:{fontSize:"12px"}},hover:{font:{},gradient:{type:Ir,angle:90,colorStops:["rgba(83, 104, 251, .3)","rgba(114, 240, 246, .3)"]}},selected:{font:{color:"#fff"},gradient:{type:Ir,angle:90,colorStops:["#5368FB","#72F0F6"]}}},editorStyles:{regular:{}}},ts={id:H.LabelSlicerType.Gradient2,displayNameKey:"inspector.properties.slicers.lablesLayout.gradient2",styles:{contentRadius:{left:13,top:13,right:13,bottom:13},optionBackgroundColor:"rgba(76, 153, 228, 0.35)",slicerItemsVerticalAlignment:ka,textAlign:ka,widthAdaptive:!1,regular:{font:{fontSize:"12px"}},hover:{gradient:{type:Ir,angle:90,colorStops:["rgba(16, 117, 239, .3)","rgba(35, 169, 248, .3)"]},font:{}},selected:{gradient:{type:Ir,angle:90,colorStops:["#1075EF","#23A9F8"]},font:{color:"#fff"}}},editorStyles:{regular:{backgroundColor:"unset"}}},as={id:H.LabelSlicerType.Gradient3,displayNameKey:"inspector.properties.slicers.lablesLayout.gradient3",styles:{contentRadius:{left:13,top:13,right:13,bottom:13},slicerItemsVerticalAlignment:ka,textAlign:ka,optionBackgroundColor:"unset",optionMargin:4,widthAdaptive:!1,regular:{showBorder:!0,thickness:1,borderColor:"#74F5F7",backgroundColor:"unset",font:{fontSize:"12px"}},hover:{backgroundColor:"unset",borderColor:"#74F5F7",gradient:{type:Ir,angle:90,colorStops:["rgba(82, 104, 251, .5)","rgba(115, 243, 246, .5)"]},font:{}},selected:{borderColor:"#74F5F7",gradient:{type:Ir,angle:90,colorStops:["rgb(82, 104, 251)","rgb(115, 243, 246)"]},font:{color:"#fff"}}},editorStyles:{regular:{backgroundColor:"unset"}}},ns=[qo,Jo,Xo,{id:H.LabelSlicerType.UnderLine,displayNameKey:"inspector.properties.slicers.lablesLayout.underline",styles:{optionMargin:1,slicerItemsVerticalAlignment:ka,textAlign:ka,widthAdaptive:!1,regular:{backgroundColor:"rgba(89, 112, 129, 0.5)",font:{fontSize:"12px"}},hover:{backgroundColor:"rgba(71, 242, 255, 0.5)",font:{}},selected:{backgroundColor:"rgba(71, 242, 255, .7)",showMarkingLine:!0,font:{color:"#fff"},markingLine:{length:100,thickness:1,position:"bottom",color:"rgb(71, 242, 255)",offset:3}}},editorStyles:{regular:{}}},es,ts,as,Qo,Zo,$o].map(function(e){e.relativeDateStyles=ae.mergeDeepLeft(e.relativeDateStyles,Yo.relativeDateStyles),e.relativeDateStyles.selected=ae.mergeDeepLeft(e.relativeDateStyles.selected,e.relativeDateStyles.regular),e.relativeDateStyles.hover=ae.mergeDeepLeft(e.relativeDateStyles.hover,e.relativeDateStyles.regular);var t=e.styles,a=t.regular,n=t.hover,i=t.selected,r=ae.mergeDeepLeft(i,a),o=ae.mergeDeepLeft(n,a),s=ae.mergeDeepLeft(e.relativeDateStyles,Object.assign(Object.assign({},e.styles),{regular:a,hover:o,selected:r}));return e.relativeDateStyles=ae.mergeDeepLeft(s,Yo.styles),ae.mergeDeepLeft(e,Yo)}),is="NONE_COLOR_STRING",rs="=Theme.Colors!Dark1",os={id:"docTheme000",name:"default",colors:{Dark1:"#000000",Dark2:"#333333",Light1:"#ffffff",Light2:"#efefef",Accent1:"#4ECDC4",Accent2:"#556270",Accent3:"#C7F464",Accent4:"#FF6B6B",Accent5:"#C44D58",Accent6:"#6977F4",Hyperlink:"#0000FF",HyperlinkFollowed:"#800080",scrollbarThumb:"#CFCFCF",scrollbarTrack:"#E3E3E3"},textStyle:{majorFontSize:"15.6px",minorFontSize:"13px",majorFontStyle:"Normal",minorFontStyle:"Normal",majorFontFamily:"Arial",minorFontFamily:"Arial",majorFontWeight:"Normal",minorFontWeight:"Normal"}},ss={type:Cr,detailLevel:Hn,lineType:Fn.Solid,lineColor:void 0,lineWidth:1,polynomialDegree:2},ls={view:H.AppViewMode.Designer,dirty:!1,restoreFromLocalCache:!1,user:{},datasetInfoList:[],datasetInfoListStatus:H.ServerDataStatus.NotLoad,docThemeList:[],docThemeListStatus:H.ServerDataStatus.NotLoad,serverImageList:R()(Yr),serverImageListStatus:H.ServerDataStatus.NotLoad,serverTagList:[],serverTagListStatus:H.ServerDataStatus.NotLoad,serverTagWithDashboardDocList:[],serverTagWithDashboardDocListStatus:H.ServerDataStatus.NotLoad,reportDocList:[],reportDocListStatus:H.ServerDataStatus.NotLoad,dashboardDocList:[],dashboardDocListStatus:H.ServerDataStatus.NotLoad,webContentTemplateList:[],webContentTemplateListStatus:H.ServerDataStatus.NotLoad,userPermission:"All",documentMeta:{draftIsBeingReviewed:!1},datasetList:[],optionChanged:{},clipboard:{scenarios:null,pageId:null},settings:ae.mergeDeepRight({zoom:1,showGrid:!1,gridSize:{width:1,height:1},showDataInteraction:!1},Oo.designerSettings),notifications:{expanded:!1,active:-1,list:[]},tasks:[],activeActionBar:"",isFullScreen:!1,visualList:[],languageList:[],languageResource:{},i18nResource:[],languageVersion:-1},us={color:"#A6A6A6",type:H.BuildInBorderEnums.Default,size:Ni},cs=ae.mergeDeepRight({dashboard:{docThemeId:"",ratio:"auto",stretch:!0,fontSizeAdaptation:!1,crossFilterMode:H.CrossFilterMode.SingleSource,snapToGrid:!0,showAuxiliaryLine:!0,enableOverlap:!1,pageSwitchAnimation:H.AnimationType.Slide,tabStrip:{visible:!0,style:H.TabStripStyle.Navigator,position:H.TabStripPosition.Bottom,autoSwitch:!1,switchInterval:300,alignment:"left",width:{mode:"auto",value:100}},promptUsingMobileView:!1,customPaletteList:[],toolbar:"show"},page:{backgroundColor:"=Theme.Colors!Light1",displayMode:H.PageDisplayMode.FitToScreen,showShadow:!1,backgroundImage:{id:"",repeat:gi,displayMode:mi,vAlign:vi,hAlign:fi},isSizeFixed:!1,size:{width:1280,height:720}},scenario:{padding:{left:10,right:10,top:10,bottom:10},margin:{left:3,right:3,top:3,bottom:3},cornerRadius:0,graphOpacity:100,titleTextStyle:{fontFamily:"",color:rs,fontSize:"",fontWeight:"",fontStyle:""},contentTextStyle:{fontFamily:"",color:rs,fontSize:"",fontWeight:"",fontStyle:""},border:us,shadow:{type:Ii,color:"=Theme.Colors(1,0)",size:Li},paletteId:"",autoGradient:!1,backgroundColor:is,customTableStyleTemplates:{dataTable:[],pivotTable:[],kpiMatrix:[]},scrollbarThumbBackColor:"",scrollbarTrackBackColor:"",noDataTextStyle:{fontFamily:"",color:rs,fontSize:"",fontWeight:"",fontStyle:""},noDataTextAlignment:ka,noDataTextVerticalAlignment:0,noDataImageSize:"100% 100%",noDataText:Ft("error.noData"),nullItemsString:Ft("common.showNullAs"),emptyItemsString:Ft("common.showEmptyAs")}},Oo.dashboardOptions),ds={name:"",comment:"",selectedTags:[],pageIdList:[],imageList:[],datasetDesignerStatus:{},options:cs,state:{focusedScenarioId:"",mobileMode:!1,exportPageList:[],currentProgress:0,totalProgress:100}},ps={page:{title:Ft("patterns.pageName.namePattern",{number:1}),mobileAutoLayout:!0,hidden:!1}},hs=(H.DatasetAutoRefreshType.None,360),ys=function(e){var t=0<arguments.length&&void 0!==e?e:{};return Jr.isSlicer(t)&&t.slicerType!==H.SlicerType.TreeSlicer?100:240},gs=[{key:Za,display:"=",value:Za,label:Ft("conditions.equal"),icon:"icon-equal-to"},{key:$a,display:"<>",value:$a,label:Ft("conditions.notEqual"),icon:"icon-not-equal"},{key:en,display:">",value:en,label:Ft("conditions.greater"),icon:"icon-greater-than"},{key:tn,display:">=",value:tn,label:Ft("conditions.equalOrGreater"),icon:"icon-greater-than-or-equal-to"},{key:an,display:"<",value:an,label:Ft("conditions.less"),icon:"icon-less-than"},{key:nn,display:"<=",value:nn,label:Ft("conditions.equalOrLess"),icon:"icon-less-than-or-equal-to"},{key:rn,display:"conditions.between",value:rn,label:Ft("conditions.between"),icon:"icon-between"},{key:on,value:on,display:"conditions.notBetween",label:Ft("conditions.notBetween"),icon:"icon-not-between"}],ms=(Ft("dialogs.conditionalFormat_table.text.contains"),Ft("dialogs.conditionalFormat_table.text.doesNotContain"),Ft("dialogs.conditionalFormat_table.text.beginsWith"),Ft("dialogs.conditionalFormat_table.text.endsWith"),Ft("conditions.equal"),Ft("conditions.notEqual"),_o("today"),_o("yesterday"),_o("tomorrow"),_o("last7days"),_o("thismonth"),_o("lastmonth"),_o("nextmonth"),_o("thisweek"),_o("lastweek"),_o("nextweek"),Ft("dialogs.referenceLine.aggregationTypes.constant"),Ft("dialogs.referenceLine.aggregationTypes.max"),Ft("dialogs.referenceLine.aggregationTypes.min"),Ft("dialogs.referenceLine.aggregationTypes.median"),Ft("dialogs.referenceLine.aggregationTypes.average"),Ft("dialogs.referenceLine.aggregationTypes.count"),Ft("lineTypes.dashed"),Ft("lineTypes.solid"),Ft("dialogs.referenceLine.detailLevelTypes.total"),Ft("dialogs.referenceLine.detailLevelTypes.group"),Ft("dialogs.referenceLine.detailLevelTypes.trellis"),Ft("dialogs.trendLine.trendLineTypes.None"),Ft("dialogs.trendLine.trendLineTypes.Linear"),Ft("dialogs.trendLine.trendLineTypes.Polynomial"),Ft("dialogs.trendLine.trendLineTypes.Power"),Ft("dialogs.trendLine.trendLineTypes.Logarithmic"),Ft("dialogs.trendLine.trendLineTypes.Exponential"),Ft("dialogs.trendLine.trendLineTypes.Fourier"),H.DrillDownType.Default,Oo.fontFamily),fs=(Vo={},V()(Vo,H.PageDisplayMode.Default,"default"),V()(Vo,H.PageDisplayMode.FitToScreen,"fitscreen"),V()(Vo,H.PageDisplayMode.FitToWidth,"fitwidth"),V()(Vo,H.PageDisplayMode.FitToHeight,"fitheight"),V()(Vo,H.PageDisplayMode.Auto,"auto"),V()(Vo,H.PageDisplayMode.FitToPage,"fitpage"),V()(Vo,"fitwidth","fitwidth"),V()(Vo,"fitpage","fitpage"),Vo),vs=(H.PageDisplayMode.Default,Ft("appBar.displayMode.default"),H.PageDisplayMode.FitToWidth,Ft("appBar.displayMode.fitToWidth"),H.PageDisplayMode.FitToPage,Ft("appBar.displayMode.fitToPage"),H.ReportDisplayMode.Default,Ft("dialogs.jumpToDocuments.reportDisplay.default"),H.ReportDisplayMode.SinglePage,Ft("dialogs.jumpToDocuments.reportDisplay.single"),H.ReportDisplayMode.Pageless,Ft("dialogs.jumpToDocuments.reportDisplay.pageless"),H.ReportDisplayMode.Continuous,Ft("dialogs.jumpToDocuments.reportDisplay.continuous"),[].concat(R()(Oo.fontFamily),["times new roman,  pro w3, hiragino mincho pro, hiraminpron-w3, hgse,  , ms pmincho, serif"," pro w3, hiragino kaku gothic pro, , meiryo,  , ms pgothic, osaka, sans-serif"]),ae.compose),bs=ae.map(function(e){return(t=e)&&"object"===E()(t)&&!Array.isArray(t)?Object.keys(e):[];var t}),Cs=Lo("page"),Ts=Lo("scenario"),Ss=vs(Ro,bs),Ds=bs(cs),ks=Ro(Ds);ks.mobileMode=ae.path(["state","mobileMode"]),ks.focusedScenarioId=ae.path(["state","focusedScenarioId"]),ks.virtualPageId=ae.pathOr("",["state","virtualPageId"]),ks.exportPageId=ae.pathOr("",["state","exportPageId"]),ks.exportPageList=ae.pathOr([],["state","exportPageList"]),ks.exportSVGScenarios=ae.pathOr([],["state","exportScenarios"]),ks.currentProgress=ae.pathOr([],["state","currentProgress"]),ks.totalProgress=ae.pathOr([],["state","totalProgress"]),ks.name=ae.pathOr("",["name"]),ks.dashboardId=ae.pathOr("",["id"]),ks.imageList=ae.prop("imageList"),ks.datasetDesignerStatus=ae.prop("datasetDesignerStatus"),ks.pageSwitchAnimation=ae.path(["options","dashboard","pageSwitchAnimation"]),ks.pageIdList=ae.prop("pageIdList"),ks.parameters=ae.pathOr([],["options","dashboard","parameters"]),ks.pivotFilters=ae.pathOr([],["options","dashboard","pivotFilters"]),ks.customPaletteList=ae.pathOr([],["options","dashboard","customPaletteList"]),ks.paletteId=ae.pathOr([],["options","scenario","paletteId"]),ks.contentTextStyle=ae.path(["options","scenario","contentTextStyle"]),ks.titleTextStyle=ae.path(["options","scenario","titleTextStyle"]),ks.noDataTextStyle=ae.path(["options","scenario","noDataTextStyle"]),ks.nullItemsString=ae.path(["options","scenario","nullItemsString"]),ks.emptyItemsString=ae.path(["options","scenario","emptyItemsString"]),ks.noDataText=ae.path(["options","scenario","noDataText"]),ks.all=ae.applySpec(ks),ks.backgroundColor=ae.path(["options","page","backgroundColor"]),ks.scenarioBackgroundColor=ae.path(["options","scenario","backgroundColor"]),ks.inherit2Page=Cs(),ks.inherit2Scenario=Ts(),ks.customTableStyleTemplates=ae.path(["options","scenario","customTableStyleTemplates"]),ks.tabWidthInfo=ae.path(["options","dashboard","tabStrip","width"]),ks.tabAlignment=ae.path(["options","dashboard","tabStrip","alignment"]),ks.toolbar=ae.path(["options","dashboard","toolbar"]),ks.scenarioOptions=ae.path(["options","scenario"]),ks.languageResourceId=ae.path(["options","dashboard","languageResourceId"]);var ws=Ss(ps);Object.assign(ws,Ro(ae.omit("dashboard",Ds))),ws.inherit2Page=Cs(),ws.inherit2Scenario=Ts(),ws.textStyle=ae.path(["options","scenario","contentTextStyle"]);var xs=ae.path(["state","selected"]),As=ae.path(["state","virtual"]),Is=ae.path(["state","exporting"]);ws.selected=xs,ws.virtual=As,ws.exporting=Is,ws.pageBackgroundColor=ae.path(["options","page","backgroundColor"]),ws.scenarioBackgroundColor=ae.path(["options","scenario","backgroundColor"]);function Ps(e){return vs(e?ae.prop(e):ae.identity,ae.prop("designer"))}function _s(e){return function(t){return(Ps("docThemeList")(e)||[]).find(function(e){return e.id===t})}}var Ms=ae.pathOr(-1,["state","drillState","activeDrillItemIndex"]),Ls=wo("dashboard"),Rs=wo("pages"),Vs=ae.compose(wo("scenarios")),Ns=wo("profiles"),Es=vs(ae.find(ws.selected),ae.values,Rs),Fs=vs(ae.find(ws.virtual),ae.values,Rs),Os=vs(ae.find(ws.exporting),ae.values,Rs),Hs=F()({designer:Ps,designerSetting:Ps("settings")},Mo(Ps,Object.keys(ls)),{dashboard:Ls,dashboardId:vs(function(e){return e.id},Ls)},ae.map(function(e){return vs(e,Ls)},ks),{docThemeInSever:function(e){return _s(e)(ks.docThemeId(Ls(e)))},docTheme:function(e){return a=e,function(e){var t=_s(a)(e);return null==t?os:t}(ks.docThemeId(Ls(e)));var a},pages:Rs,selectedPage:Es,virtualPage:Fs,exportPage:Os,selectedPageId:vs(function(e){return e&&e.id},Es),virtualPageId:vs(function(e){return e&&e.id},Fs),exportPageId:vs(function(e){return e&&e.id},Os),mobileAutoLayout:vs(ws.mobileAutoLayout,Es),scenarios:Vs,scenariosByPageId:ae.curry(function(n,e){var i=Vs(e);return Object.keys(i).reduce(function(e,t){var a=i[t];return a.pageId===n&&e.push(a),e},[])}),profiles:Ns,profilesOnlyContent:function(e){var t=Ns(e);return ae.mapObjIndexed(ae.prop("content"),t)},jumpToDocumentBuildIn:ae.path(["designer","jumpToDocument"]),editingCardTemplateId:ae.path(["designer","editingCardTemplateId"])});Hs.docData=ae.applySpec({dashboard:Hs.dashboard,pages:Hs.pages,scenarios:Hs.scenarios,profiles:Hs.profiles}),Hs.pageById=function(e,t){return Hs.pages(t)[e]},Hs.scenarioById=ae.curry(function(e,t){return Hs.scenarios(t)[e]}),Hs.scenarioWithoutDrillDataById=ae.curry(function(e,t){return Hs.scenarios(t)[e]});var Bs,Us=F()({},Mo(function(e){return ae.path(["options","appearance",e])},Object.keys(cs.scenario)),{color:ae.path(["options","textStyle","color"]),fontFamily:ae.path(["options","textStyle","fontFamily"]),enableCrossFilter:ae.path(["options","enableCrossFilter"]),property:ae.path(["options","property"]),mapInfo:ae.path(["options","property","mapInfo"]),titleText:ae.path(["options","title","text"]),drillThrough:ae.pathOr([],["options","drillThrough"]),margin:ae.pathOr({},["options","appearance","margin"]),paletteId:ae.path(["options","property","paletteId"]),mapTilePaletteId:ae.path(["options","property","mapTile","paletteId"]),scatterPaletteId:ae.path(["options","property","scatter","paletteId"]),interactionSetting:ae.pathOr({},["options","interactionSetting"]),contentSetting:ae.pathOr({docId:"",pageNumber:1,parameters:[]},["options","property","contentSetting"]),backgroundImageId:ae.path(["options","appearance","backgroundImage","id"]),pictureBackgroundImageId:ae.path(["options","property","imageSetting","id"]),hiddenActions:ae.pathOr([],["options","hiddenActions"]),showTopN:ae.path(["options","property","showTopN"]),topN:ae.path(["options","property","topN"]),sliceFilters:ae.pathOr([],["options","sliceFilters"]),selected:xs,notMatchedDataRoleDescriptors:ae.pathOr([],["state","notMatchedDataRoleDescriptors"]),notMatchedDataRoles:ae.pathOr([],["state","notMatchedDataRoles"]),pivotSetting:ae.path(["pivot","pivotSetting"]),pivotFilters:ae.path(["pivot","pivotFilters"]),pivotRanks:ae.path(["pivot","pivotRanks"]),pivotSortInfo:ae.path(["pivot","pivotSortInfo"]),pivotModelParameters:ae.path(["pivot","pivotModelParameters"]),datasetId:function(e){return Jr.isCustomInputType(e)?null:ae.path(["pivot","datasetId"],e)},customData:ae.path(["pivot","customData"]),slicerSetting:ae.path(["slicerSetting"]),crossFilterSetting:ae.path(["crossFilterSetting"]),activeDrillItemIndex:Ms,drillItemName:ae.path(["state","drillItemName"]),position:ae.prop("layout"),mobilePosition:ae.prop("mobileLayout"),isUsedInMobile:ae.prop("usedInMobile"),containerTitle:ae.path(["options","property","header","text"]),tabSettingContent:ae.path(["tabSettingContent"]),tabs:ae.path(["tabSettingContent","tabs"]),activeTab:ae.path(["tabSettingContent","activeTab"]),mobileAutoLayoutPolicy:ae.path(["options","property","mobileAutoLayoutPolicy"]),zIndex:ae.pathOr(1,["zIndex"]),pivotSettingSchema:ae.path(["state","pivotSettingSchema"]),leftValueChartType:ae.path(["pivot","pivotSetting","leftValues","options","valueChartType"]),rightValueChartType:ae.path(["pivot","pivotSetting","rightValues","options","valueChartType"]),groupId:ae.prop("groupId"),containerId:ae.prop("containerId"),tabId:ae.prop("tabId"),uiSortInfo:ae.path(["pivot","uiSortInfo"]),fixedColumnsWidthInfo:ae.prop("fixedColumnsWidthInfo"),textStyle:ae.path(["options","appearance","textStyle"]),titleTextStyle:ae.path(["options","title","textStyle"]),contentTextStyle:ae.path(["options","appearance","contentTextStyle"]),propertyContentTextStyle:ae.path(["options","property","contentTextStyle"]),drillDown:ae.pathOr({type:H.DrillDownType.Default,items:[],_rootType:H.DrillDownType.Default,_rootItems:[]},["drillDown"]),showPivotTable:ae.path(["state","showPivotTable"]),annotation:ae.path(["annotation"]),pinAnnotation:ae.path(["options","pinAnnotation"]),scenarioName:ae.path(["options","scenarioName"]),floorPlanId:ae.path(["options","property","floorPlanId"]),slicerType:ae.path(["slicerType"]),referenceLine:ae.path(["options","property","referenceLine"]),conditionalFormats:ae.path(["options","property","conditionalFormat"]),dashboardId:ae.path(["options","property","dashboardId"]),clickAction:ae.path(["options","property","clickAction"]),contextMenuActions:ae.path(["options","contextMenuActions"]),dataSourceType:ae.path(["options","dataSourceType"]),customDataSource:ae.path(["pivot","customDataSource"]),customDataSourceContent:ae.path(["pivot","customDataSource","content"])}),zs={mapping:Bs=ae.curry(function(e,t){return ae.path([e,"mapping"],t)}),mappingInSubSetting:function(e,t,a){return ae.compose(Bs(t),ae.prop(e))(a)}};Us.unAssociatedScenarios=function(e){var a=Us.interactionSetting(e);return Object.keys(a).reduce(function(e,t){return a[t].unassociate?[].concat(R()(e),[t]):e},[])},Us.isUnassociated=ae.curry(function(e,t){return Us.unAssociatedScenarios(e).includes(t)}),Us.interactionMapping=ae.curry(function(e,t){return zs.mapping(t,Us.interactionSetting(e))}),Us.interactionMappingByScenario=ae.curry(function(e,t){if(t.parentId){var a=Us.interactionSetting(e);return zs.mappingInSubSetting(t.parentId,t.id,a)}return Us.interactionMapping(e,t.id)}),Us.interactionMappingByDatasetId=ae.curry(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(t){var a=Us.interactionSetting(e);return zs.mappingInSubSetting(e.id,t,a)}return[]}),Us.interactionMappingTargetColumns=ae.curry(function(e,t){var a=Us.interactionMapping(e,t);return Array.isArray(a)?a.map(function(e){return ae.path(["target","name"],e)}):null}),Hs.profileByScenarioId=function(e,t){var a=Hs.scenarioById(e,t);return Hs.profilesOnlyContent(t)[Us.datasetId(a)]},Hs.profileByDatasetId=function(e,t){return Hs.profilesOnlyContent(t)[e]};function Ks(e,t){var a=ae.propEq("pageId",t.id);return ae.values(e).filter(a)}var js=vs(ae.filter(Us.selected),Ks),Ws=ae.converge(js,[Hs.scenarios,Hs.selectedPage]),Gs=vs(ae.filter(Us.selected),Vs);Hs.currentScenarios=ae.converge(Ks,[Hs.scenarios,Hs.selectedPage]),Hs.selectedScenarios=Ws,Hs.selectedScenario=vs(ae.head,Ws),Hs.selectedScenariosInAllPages=Gs,Hs.scenariosInGroup=function(a,e){var n=Hs.scenarios(e);return Object.values(n).filter(function(e){for(var t=e;null!==t&&void 0!==t&&t.groupId;){if((t=n[t.groupId]).id===a)return t}})},Hs.visiblePageId=function(e,t){var a=Hs.selectedPageId(e),n=Hs.virtualPageId(e);return t===H.PageType.ActivePage?a:n},Us.getValueByDescriptor=function(e,t){var a=t.valuePath.split(".");return ae.pathOr(t.defaultValue,a,e)},Us.getValueByPath=function(e,t){var a=t.split(".");return ae.path(a,e)},Hs.scenarioByName=ae.curry(function(t,e){return ae.compose(ae.find(function(e){return Us.scenarioName(e)===t}),ae.values,Hs.scenarios)(e)}),Hs.scenarioWithoutDrillDataByName=ae.curry(function(t,e){return ae.compose(ae.find(function(e){return Us.scenarioName(e)===t}),ae.values,Hs.scenarios)(e)}),Hs.scenarioNameById=ae.curry(function(e,t){return ae.compose(Us.scenarioName,Hs.scenarioById(e))(t)});var Ys=function(e){return ae.pathOr(H.DatasetAutoRefreshType.None,["reloadData","autoReload"],e)};Hs.slicers=function(e){return ae.compose(ae.filter(Jr.isSlicer),ae.values)(Hs.scenarios(e))},Hs.pivotChartScenarioNames=function(e){return ae.compose(ae.map(Us.scenarioName),ae.filter(function(e){return Jr.isPivotChart(e)||Jr.isVisual(e)}),ae.values)(Hs.scenarios(e))},Hs.slicerScenarioNames=function(e){return ae.compose(ae.map(Us.scenarioName))(Hs.slicers(e))};function qs(e){return e&&e.split(".")||[]}function Js(a){return function(e){var t=qs(e);return ae.path(t,a)}}ae.addIndex(ae.map),ae.converge(Ks,[Hs.scenarios,Hs.selectedPage]);function Xs(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return function(){var e,t,n,i,r,o,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ae.identity;return e=s,t=a,i=n=null,r=ae.compose(t,ae.last(e)),o=ae.init(e),function(t){var a=o.map(function(e){return e(t)});return n&&n.every(function(e,t){return e===a[t]})?i:(n=a,i=r.apply(void 0,R()(a)))}}}var Qs=ae.curry(function(a,n){return n&&ae.reduce(function(e,t){return ae.assoc(a[t]||t,n[t],e)},{},ae.keys(n))}),Zs=function(e,t){return e.reduce(function(e,t){var a=t.path,n=t.keysMap,i=ae.lensPath(a),r=ae.view(i,e);return!r||"object"!==E()(r)||Array.isArray(r)?e:ae.over(i,Qs(n),e)},t)};Xs(Hs.scenarios,Hs.selectedPage,Ks),Xs(Hs.scenarios,Hs.virtualPageId,function(e,t){var a=ae.propEq("pageId",t);return ae.values(e).filter(a)}),Xs(Hs.scenarios,Hs.exportPageId,function(e,t){var a=ae.propEq("pageId",t);return ae.values(e).filter(a)}),Xs(Hs.scenarios,Hs.selectedPage,js);function $s(e,t){return null==t?e:"".concat(e).concat(zo,"(").concat(t,")")}function el(e,a){return e&&e.delta&&e.delta.ops?e.delta.ops.reduce(function(e,t){return t.insert&&t.insert.expression&&(a&&t.insert.expression.type!==a&&(t.insert.expression.type||a!==H.RichTextExpressionType.AggregatedData)||e.push(t.insert.expression)),e},[]):[]}function tl(e){if(e){var t=Jr.isGroupingItem(e)?{columnName:e.name}:{columnName:e.name,aggregationMethod:e.method,valueType:e.valueType};return Jr.isCalculation(e)&&(t.calculation={type:e.originalItem.type,method:e.originalItem.along.method}),t}}function al(e){return!!e&&/^(data:image|https?:\/\/.+)/.test(e)}function nl(n,e){if(Array.isArray(e)&&e.length&&!e.some(function(e){return!n[e]})){var t=e.slice(0).reverse(),i=e.reduce(function(e,t){var a=n[t].order;return e[t]=a.reduce(function(e,t,a){return e[t]=a,e},{}),e},{}),r=[1];return t.forEach(function(e){return r.push(n[e].order.length*ae.last(r))}),function(n){return t.map(function(a){if(n[a]instanceof Date){var e=Object.keys(i[a]).find(function(e){if(e){var t=new Date(e).valueOf();return n[a].valueOf()===t}return!1});if(e)return i[a][e]}return i[a][n[a]]}).reduce(function(e,t,a){return e+t*r[a]},0)}}}function il(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}function rl(e,t){return F()({},e,{slicerType:H.SlicerType.RelativeDateSlicer,slicerSetting:{rule:H.FilterRule.SLICER_RELATIVE_DATE,range:{items:[t],selectedIndex:0}}})}function ol(e,t,a){var n;switch(e){case H.AggregationMethod.Sum:n=Ft("aggregationMethods.sum");break;case H.AggregationMethod.Average:n=Ft("aggregationMethods.avg");break;case H.AggregationMethod.Max:n=Ft("aggregationMethods.max");break;case H.AggregationMethod.Min:n=Ft("aggregationMethods.min");break;case H.AggregationMethod.DistinctCount:n=Ft("aggregationMethods.dst");break;case H.AggregationMethod.Count:n=Ft("aggregationMethods.cnt");break;case H.AggregationMethod.First:n=Ft("aggregationMethods.fst")}var i=Oo.nonePatternAggMethods.includes(e),r="patterns.measures.".concat(i?"nonePattern":"pattern").concat(a?"_duplicated":"");return Ft(r,{measure:t,aggregation:n,idx:a})}function sl(e){var t,a,n=e.type,i=e.along,r=e.idx?"patterns.calculations.pattern_duplicated":"patterns.calculations.pattern",o=ol(e.method,e.display);if(Jr.isRunningOrMoving(n)){switch(i.method){case H.AggregationMethod.Sum:t=Ft("aggregationMethods.sum");break;case H.AggregationMethod.Average:t=Ft("aggregationMethods.avg");break;case H.AggregationMethod.Max:t=Ft("aggregationMethods.max");break;case H.AggregationMethod.Min:t=Ft("aggregationMethods.min");break;case H.AggregationMethod.Count:t=Ft("aggregationMethods.cnt")}return a=Ft(n===H.DatasetExtendColumnType.Running?"patterns.calculations.running":"patterns.calculations.moving"),Ft(r,{method:a,calculation:t,aggregation:o,idx:e.idx})}return n===H.DatasetExtendColumnType.Group||n===H.DatasetExtendColumnType.Date?(a=Ft("patterns.calculations.".concat(e.along.method)),Ft(r,{method:a,calculation:"",aggregation:o,idx:e.idx})):ol(e.method,e.display,e.idx)}function ll(e,t){var a=function(t,e){var a,n=1<arguments.length&&void 0!==e?e:[];if(t){var i=ae.find(function(e){return e.id===t},n);if(null!=i)return i.src;if(al(t))return t;var r=d$.globalConfigManager.get("dashboardId"),o=Hs.serverImageList(null===(a=d$.reduxProxy)||void 0===a?void 0:a.getState()),s=ae.find(function(e){return e.id===t},o);return null!=s&&s.src||"/api/dashboardResources/image/".concat(t,"?dashboardId=").concat(r)}}(e,t);return d$.accessService.attachBaseUrlAndToken(a)}function ul(e){return e&&new RegExp("^#{".concat(H.DashboardVariables.Language,'\\["\\S+"]}$')).test(e.toLowerCase())?e.slice(4+H.DashboardVariables.Language.length,e.length-3):e}function cl(e){var t=e.languageResource,a=void 0===t?{}:t,n=e.formatString,i=ul(n);if(i!==n){var r=a[i];if(r)return r}return n}function dl(e){var t=window.open(e,"_blank","noreferrer");t&&(t.opener=null)}function pl(e,t){Object.assign(e.prototype,t)}function hl(e){if(!isFinite(e)||null==e)return 0;for(var t=1,a=0;Math.round(e*t)/t!==e;)t*=10,a+=1;return a}function yl(e,t){var a=null==e,n=null==t;if(a&&n)return 0;if(a)return 2;if(n)return-2;var i=e.valueOf(),r=t.valueOf();return r<i?1:i<r?-1:0}function gl(e,t){var a=yl(t,e);return 2===Math.abs(a)&&(a=-a),a}function ml(e){return e===zn?yl:gl}function fl(e,t,a){var n=null==e,i=null==t;if(n&&i)return 0;if(n)return 2;if(i)return-2;var r=e.toString(),o=t.toString(),s=r.localeCompare(o,a);return 0===s?s:0<s?1:-1}function vl(e,t,a){var n=fl(t,e,a);return 2===Math.abs(n)&&(n=-n),n}function bl(e,a){return e===zn?function(e,t){return"string"==typeof e&&"string"==typeof t?fl(e,t,a):yl(e,t)}:function(e,t){return"string"==typeof e&&"string"==typeof t?vl(e,t,a):gl(e,t)}}var Cl=a(64),Tl=a.n(Cl),Sl=a(11),Dl=a.n(Sl),kl=function(e){var t=Ft("common.dateFormat");return e&&(t+=" HH:mm:ss"),t},wl=function(e,t){return e&&e.toPrecision?(void 0===t&&(t=14),Number(e.toPrecision(t))):e};function xl(e){return null==e?"\0":""+(e instanceof Date?e.valueOf():e)}function Al(e){var a,n,t=e.dataType,i=e.isSubDate,r=void 0!==i&&i,o=e.sortOrder,s="en";try{s=0<Intl.Collator.supportedLocalesOf(Wt).length?Wt:"en"}catch(e){}switch(t){case"number":case"date":case"datetime":return o===zn||o!==Kn&&r?yl:gl;case"boolean":case"string":default:return o===zn?(n=s,function(e,t){return fl(e,t,n)}):o===Kn?(a=s,function(e,t){return vl(e,t,a)}):void 0}}function Il(n,e){var t=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],i=/\W+/;var r,o={d:function(){return n.getDate()},dd:function(){return s(n.getDate(),2)},ddd:function(){return t[n.getDay()].slice(0,3)},dddd:function(){return t[n.getDay()]+"day"},f:function(){return parseInt(n.getMilliseconds()/100)},ff:function(){return parseInt(n.getMilliseconds()/10)},fff:function(){return n.getMilliseconds()},F:function(){return 0<n.getMilliseconds()/100?parseInt(n.getMilliseconds()/100):""},FF:function(){return 0<n.getMilliseconds()/10?parseInt(n.getMilliseconds()/10):""},FFF:function(){return 0<n.getMilliseconds()?n.getMilliseconds():""},h:function(){return n.getHours()%12||12},hh:function(){return s(n.getHours()%12||12,2)},H:function(){return n.getHours()},HH:function(){return s(n.getHours(),2)},m:function(){return n.getMinutes()},mm:function(){return s(n.getMinutes(),2)},M:function(){return n.getMonth()+1},MM:function(){return s(n.getMonth()+1,2)},MMM:function(){return a[n.getMonth()].slice(0,3)},MMMM:function(){return a[n.getMonth()]},s:function(){return n.getSeconds()},ss:function(){return s(n.getSeconds(),2)},t:function(){return 12<=n.getHours()?"P":"A"},tt:function(){return 12<=n.getHours()?"PM":"AM"},y:function(){return Number(n.getFullYear().toString().substr(2,2))},yy:function(){return s(n.getFullYear().toString().substr(2,2),2)},yyy:function(){var e=Number(n.getFullYear().toString().substr(1,2));return 100<e?e:n.getFullYear()},yyyy:function(){return n.getFullYear()},yyyyy:function(){return s(n.getFullYear(),5)},z:function(){return parseInt(n.getTimezoneOffset()/60)},zz:function(){var e=parseInt(n.getTimezoneOffset()/60);return e<0&&(e="-"+s(Math.abs(e),2)),e},zzz:function(){var e=parseInt(n.getTimezoneOffset()/60),t=n.getTimezoneOffset()-60*e,a=s(e,2)+":"+s(Math.abs(t),2);return e<0&&(a="-"+s(Math.abs(e),2)+":"+s(Math.abs(t),2)),a},st:function(){var e=o.d();return e<4|20<e&&["st","nd","rd"][e%10-1]||"th"},e:function(e){throw"ERROR: Not supported method ["+e+"]"}},s=function(e,t){return(e+="").length<t?new Array(++t-e.length).join("0")+e:e};return(r=e).split(i).forEach(function(e){"function"==typeof o[e]?r=r.replace(e,o[e]()):o.e(e)}),r.replace(/\s+(?=\b(?:st|nd|rd|th)\b)/g,"")}function Pl(e){return e&&Bo.a.isString(e)?_e()(e,Nl,!0):_e()(e)}function _l(e,t){var a=t?"YYYY-MM-DD":"YYYY-MM-DDTHH:mm:ss";return e&&e._isAMomentObject?e.format(a):e}function Ml(e){if(e){var t=Pl(e);if(!t.isValid()&&!(t=_e()(e)).isValid())return e;var a=(new Date).getTimezoneOffset();return _l(t.add(-a,"minutes"))}return e}function Ll(e){if(e){var t=Pl(e);if(!t.isValid()&&!(t=_e()(e)).isValid())return e;var a=(new Date).getTimezoneOffset();return _l(t.subtract(-a,"minutes"))}return e}function Rl(e){var t;return(t={},V()(t,H.DateMode.Year,H.DateUnit.Year),V()(t,H.DateMode.YearQuarter,H.DateUnit.Quarter),V()(t,H.DateMode.YearMonth,H.DateUnit.Month),V()(t,H.DateMode.Date,H.DateUnit.Day),V()(t,H.DateMode.DateTime,H.DateUnit.Second),t)[e]}function Vl(e){return!(null==e||!Bo.a.isString(e))&&ae.compose(ae.startsWith(El),ae.trim)(e)}var Nl=["YYYY-MM-DD","YYYY-MM-DD HH:mm:ss","YYYY-MM-DDTHH:mm:ss","YYYY-MM-DDTHH:mm:ss.S","YYYY-MM-DDTHH:mm:ss.SS","YYYY-MM-DDTHH:mm:ss.SSS","YYYY-MM-DDTHH:mm:ssZZ","YYYY-MM-DDTHH:mm:ss.SZZ","YYYY-MM-DDTHH:mm:ss.SSZZ","YYYY-MM-DDTHH:mm:ss.SSSZZ"],El="=Parameters!",Fl=function(e){if(!Vl(e))return{isParameterValue:!1,value:e,display:e};var t=ae.compose(ae.replace(El,""),ae.head,ae.split("."))(e),a=d$.reduxProxy.getState(),n=Hs.parameters(a).find(function(e){return e.name===t});return{isParameterValue:!0,value:t,display:null==n?void 0:n.prompt}};ae.curry(function(e,t){return e===H.ParameterDataType.MultiDimension?Bo.a.isArray(t)?t:[t]:Bo.a.isArray(t)?ae.head(t):t});function Ol(e,n,i,r,t){var o=4<arguments.length&&void 0!==t?t:0;return null!=e&&e.length&&!Vl(e)&&n.length?e.map(function(e){if(e.children){var t=Ol(e.children,n,i,r,o+1);return Object.assign(Object.assign({},e),{children:t})}var a=d$.datasetManager.getDatasetColumnInfo(i,n[o].name);return Jr.isDisplayTimezoneColumn(a)?Object.assign(Object.assign({},e),{value:r(e.value)}):e}):e}function Hl(e,i,r,t){var o=3<arguments.length&&void 0!==t?t:0;return null!=e&&e.length&&i.length?e.map(function(e){if(e.children){var t=Hl(e.children,i,r,o+1);return Object.assign(Object.assign({},e),{children:t})}var a=d$.datasetManager.getDatasetColumnInfo(r,i[o].name);if(Jr.isDate(a)&&e.value){var n=_l(Pl(e.value));return Object.assign(Object.assign({},e),{value:n})}return e}):e}function Bl(r,o,s){var l=r;return Object.keys(r).forEach(function(e){var t,a=r[e];if(a&&null!==(t=a.manual)&&void 0!==t&&t.length){var n=d$.datasetManager.getDatasetColumnInfo(o,e);if(Jr.isDisplayTimezoneColumn(n)){var i=a.manual.map(function(e){return s(e)});l=ae.assocPath([e,"manual"],i,l)}}}),l}function Ul(e,t,a){switch(null==e?void 0:e.filterType){case H.VisualFilterType.Basic:return function(e,t,a){var n,i=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.column;if(i){var r=d$.datasetManager.getDatasetColumnInfo(t,i);if(Jr.isDisplayTimezoneColumn(r)){var o=e.values.map(function(e){return a(e)});return ae.assoc("values",o,e)}}return e}(e,t,a);case H.VisualFilterType.Tuple:return function(e,a,n){var t,i=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.map(function(e){return e.column});if(null!=i&&i.length){for(var r=ae.clone(e.values),o=function(t){var e=d$.datasetManager.getDatasetColumnInfo(a,i[t]);Jr.isDisplayTimezoneColumn(e)&&(r=r.map(function(e){return e[t].value=n(e[t].value),e}))},s=0,l=i.length;s<l;s++)o(s);return ae.assoc("values",r,e)}return e}(e,t,a);case H.VisualFilterType.Advanced:return function(e,t,a){var n,i=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.column;if(i){var r=d$.datasetManager.getDatasetColumnInfo(t,i);if(Jr.isDisplayTimezoneColumn(r)){var o=e.conditions.map(function(e){return ae.assoc("value",a(e.value),e)});return ae.assoc("conditions",o,e)}}return e}(e,t,a);default:return e}}function zl(e,t){var a,n;switch(t){case H.ParameterValueType.Static:return!(null!==(a=null==e?void 0:e.binding)&&void 0!==a&&a.valueType);case H.ParameterValueType.Dynamic:return!(null===(n=null==e?void 0:e.binding)||void 0===n||!n.valueType);default:return!0}}function Kl(e,t){var a=Fl(e);return a.isParameterValue?su(a.value,t):e}function jl(e){var t=Fl(e);return t.isParameterValue?t.value:null}function Wl(e){return ae.compose(ae.lensPath,ae.split("."))(e)}function Gl(e){return ae.map(Wl,e)}function Yl(a){return function(e){return ou([ae.flatten,ae.values,ae.map((t=a,function(e){return ae.compose(ae.filter(function(e){return e}),ae.map(jl),function(e){return ae.map(ae.view(ae.__,e),Gl(t))})(e)}))])(e||[]);var t}}function ql(t,a){return function(e){return ae.reduce(function(e,t){return void 0!==ae.view(t,e)?ae.over(t,ru(a),e):ae.identity(e)})(e||[],Gl(t))}}function Jl(e,t){if(Bo.a.isNil(e)||""===e)return e;var a=t.dataType,n=t.dateOnly,i=e;switch(a){case H.ParameterDataType.DateTime:i=n?_l(Pl(e),n):e}return i}function Xl(e,t){var a=Fl(e);if(!a.isParameterValue)return!0;var n,i=iu(a.value);if(i)for(var r=0;r<t.length;r++)if(t[r]&&!t[r].includes((n=i).outputDataType?n.outputDataType:n.dataType))return!1;return null!=i}function Ql(e){return void 0===e?null:null==e||0===e.length?_e()(""):Pl(e).isValid()?Pl(e):null}function Zl(e,t){var o=ae.reduce(function(e,t){return ae.assoc("".concat(t.value),!0,e)},{},t);return ae.reduce(function(e,t){var a=function e(t){var a,n=[];if(!t.isAutoBuild&&o["".concat(t.id)]&&(n=[{value:t.id}]),null!==(a=t.children)&&void 0!==a&&a.length)for(var i=0;i<t.children.length;i++){var r=e(t.children[i]);n=[].concat(R()(n),R()(r))}return n}(t);return[].concat(R()(e),R()(a))},[],e)}function $l(e,t,a,n,i,r,o){var s,l,u,c=4<arguments.length&&void 0!==i?i:H.TreeSlicerMode.Classic,d=5<arguments.length?r:void 0,p=6<arguments.length?o:void 0,h=p?Hl(t,n,d):Ol(t,n,d,Ml);function y(e){return e&&Array.isArray(e.children)&&0<e.children.length}function g(e,n){return e.reduce(function(e,t){if(n&&!t.visible||!n&&!t.unVisible)return e;var a=ae.pick(["value"],t);return Array.isArray(t.children)&&(a=ae.assoc("children",g(t.children,n),a)),[].concat(R()(e),[a])},[])}return s=c===H.TreeSlicerMode.Classic?(l=a,u=function r(e,t){var o=1<arguments.length&&void 0!==t?t:[],s=o.reduce(function(e,t,a){return e[xl(t.value)]=a,e},{});return e.map(function(e,t){var a=Object.assign({},e),n=xl(e.value),i=o[s[n]];return i?(a.visible=!0,y(e)&&y(i)?(a.unVisible=!0,a.children=r(a.children,i&&i.children)):a.unVisible=!1):(a.visible=!1,a.unVisible=!0),a})}(e,h),{values:g(u,!0),_unCheckedValues:l?g(u,!1):void 0}):{values:Zl(e,h)},p?s:{values:Ol(s.values,n,d,Ll),_unCheckedValues:a?Ol(s._unCheckedValues,n,d,Ll):void 0}}function eu(e){var t,a=e.range,n=e.columnNames;switch(e.rule){case H.FilterRule.GENERAL:var i=Fl(a.items),r=[];if(i.isParameterValue){var o=null===(t=iu(i.value))||void 0===t?void 0:t.dataType,s=Kl(a.items);void 0!==s&&(Bo.a.isArray(s)?s.length?o===H.ParameterDataType.MultiDimension?(r=function(e){var t=0<arguments.length&&void 0!==e?e:[];if(null==t)return[];var a={};return t.forEach(function(e){return lu(e,a)}),a.children||[]}(s),1===n.length&&(r=ae.map(ae.dissoc("children"),r))):r=ae.map(function(e){return{value:e}},s):r=[]:r=[{value:s}])}else r=a.items;return Object.assign(Object.assign({},a),{items:r});case H.FilterRule.DATE_RANGE:var l=a.max;if(null!=l){var u=Fl(l),c=u.isParameterValue,d=u.value;if(c){l=Ql(su(d,!0));var p=d$.parameterManager.getParameterDataTypeFull(d);p===H.ParameterDataTypeFull.Date?l=l.add(1,"d"):p===H.ParameterDataTypeFull.DateTime&&(l=l.add(1,"s"))}else l=Ql(l)}return Object.assign(Object.assign({},a),{min:null==a.min?a.min:Ql(Kl(a.min,!0)),max:l});case H.FilterRule.RELATIVE_DATE:return Object.assign(Object.assign({},a),{lastDateNumber:Kl(a.lastDateNumber,!0),nextDateNumber:Kl(a.nextDateNumber,!0),anchorDate:Ql(Kl(a.anchorDate,!0)),offsetNumber:Kl(a.offsetNumber,!0)});case H.FilterRule.SLICER_RELATIVE_DATE:return Object.assign(Object.assign({},a),{items:a.items.map(function(e){return Object.assign(Object.assign({},e),{lastDateNumber:Kl(e.lastDateNumber,!0),nextDateNumber:Kl(e.nextDateNumber,!0),anchorDate:Ql(Kl(e.anchorDate,!0)),offsetNumber:Kl(e.offsetNumber,!0)})})});case H.FilterRule.VALUE_RANGE:return Object.assign(Object.assign({},a),{min:Kl(a.min,!0),max:Kl(a.max,!0)});case H.FilterRule.WILDCARD:return Object.assign(Object.assign({},a),{pattern:Kl(a.pattern,!0)})}return a}function tu(a,t){function e(e){return Xl(ae.pathOr("",e,t.range),s)}var n,i,r=t.rule,o=t.columnNames,s=1<o.length?[H.ParameterDataTypeFull.MultiDimension]:o.map(function(e){var t;return function(e){switch(e){case H.DatasetFieldDataType.Boolean:return[H.ParameterDataTypeFull.Boolean];case H.DatasetFieldDataType.Number:return[H.ParameterDataTypeFull.Integer,H.ParameterDataTypeFull.Float];case H.DatasetFieldDataType.Date:case H.DatasetFieldDataType.Datetime:return[H.ParameterDataTypeFull.DateTime,H.ParameterDataTypeFull.Date];case H.DatasetFieldDataType.String:return[H.ParameterDataTypeFull.String];default:return}}(null===(t=a.getColumn(e))||void 0===t?void 0:t.dataType)}),l=eu(t);switch(r){case H.FilterRule.GENERAL:if(e(["items"]))return 0<l.items.length;break;case H.FilterRule.WILDCARD:if(e(["pattern"]))return!!l.pattern;break;case H.FilterRule.VALUE_RANGE:switch(t.conditionRule){case Za:case $a:case en:case tn:if(e(["min"]))return null!=l.min&&Bo.a.isNumber(l.min);break;case an:case nn:if(e(["max"]))return null!=l.max&&Bo.a.isNumber(l.max);break;default:if(e(["min"])&&e(["max"])&&(null==l.min||Bo.a.isNumber(l.min))&&(null==l.max||Bo.a.isNumber(l.max)))return null!=l.min||null!=l.max}break;case H.FilterRule.DATE_RANGE:if(e(["min"])&&e(["max"])&&(null==l.min||Pl(l.min).isValid())&&(null==l.max||Pl(l.max).isValid()))return l.min||l.max;break;case H.FilterRule.RELATIVE_DATE:case H.FilterRule.SLICER_RELATIVE_DATE:var u=[];if(r===H.FilterRule.SLICER_RELATIVE_DATE){if(!(0<=l.selectedIndex))return!1;u=["items","".concat(l.selectedIndex)]}var c=function(e){var t=ae.path(e,l);return Bo.a.isNumber(t)&&1<=t},d=function(e){return Xl(ae.pathOr("",e,l),[H.ParameterDataType.Integer])},p=ae.path([].concat(R()(u),["useAnchorDate"]),l),h=ae.path([].concat(R()(u),["dateRelativeType"]),l)===H.DateRelativeType.LastN,y=ae.path([].concat(R()(u),["dateRelativeType"]),l)===H.DateRelativeType.NextN,g=ae.path([].concat(R()(u),["useOffset"]),l),m=!p||Pl(ae.path([].concat(R()(u),["anchorDate"]),l)).isValid(),f=!h||d([].concat(R()(u),["lastDateNumber"]))&&c([].concat(R()(u),["lastDateNumber"])),v=!y||d([].concat(R()(u),["nextDateNumber"]))&&c([].concat(R()(u),["nextDateNumber"])),b=!g||d([].concat(R()(u),["offsetNumber"]))&&(n=[].concat(R()(u),["offsetNumber"]),i=ae.path(n,l),Bo.a.isNumber(i));if(f&&v&&m&&b)return r!==H.FilterRule.SLICER_RELATIVE_DATE||-1<l.selectedIndex;break;default:return nu.error("Unexpected filter rule: ".concat(r," !")),!1}return!1}function au(e,t){var a=1<arguments.length&&void 0!==t?t:null,n=Fl(e);if(n.isParameterValue){var i=iu(n.value,a);return"<i>".concat(i?"":"<del>").concat(i?Bo.a.escape(i.prompt):n.value).concat(i?"":"</del>","</i>")}return e}var nu={log:function(){},warn:function(){},error:function(){},assert:function(){},printShallowDiff:function(e,t,a){},printDirtyTree:function(e,t,a,n){},time:function(){},timeEnd:function(){}},iu=(H.ParameterDataTypeFull.Boolean,Ft("dialogs.jumpToDocuments.parameterDataType.boolean"),H.ParameterDataTypeFull.Date,Ft("dialogs.jumpToDocuments.parameterDataType.date"),H.ParameterDataTypeFull.DateTime,Ft("dialogs.jumpToDocuments.parameterDataType.dateTime"),H.ParameterDataTypeFull.Integer,Ft("dialogs.jumpToDocuments.parameterDataType.integer"),H.ParameterDataTypeFull.Float,Ft("dialogs.jumpToDocuments.parameterDataType.float"),H.ParameterDataTypeFull.String,Ft("dialogs.jumpToDocuments.parameterDataType.string"),H.ParameterDataTypeFull.MultiDimension,Ft("dialogs.jumpToDocuments.parameterDataType.multiDimension"),function(e,t){var a=function(e){var t=0<arguments.length&&void 0!==e?e:null;return Hs.parameters(d$.reduxProxy.getState()).filter(function(e){return zl(e,t)})}(1<arguments.length&&void 0!==t?t:null);return ae.find(ae.propEq("name",e),a)}),ru=ae.flip(Kl),ou=ae.composeWith(function(e,t){return ae.isNil(t)?t:e(t)}),su=function(e,t){var a=d$.parameterManager.getParameterValue(e);return t&&Array.isArray(a)?a[0]:a},lu=function e(t,a){if(t.length){var n=Bo.a.isArray(t),i=n?ae.head(t):t,r=n?ae.tail(t):[],o=ae.find(function(e){return e.value===i},a.children||[]);o||(null==a.children&&(a.children=[]),o={value:i},a.children.push(o)),e(r,o)}},uu=ae.curry(function(e,t){switch(e){case H.ParameterDataTypeFull.Boolean:return"TRUE"==="".concat(t).toLocaleUpperCase();case H.ParameterDataTypeFull.Integer:var a=Number.parseInt(t,10);return Number.isNaN(a)?0:a;case H.ParameterDataTypeFull.Float:var n=Number.parseFloat(t);return Number.isNaN(n)?0:n;case H.ParameterDataTypeFull.Date:case H.ParameterDataTypeFull.DateTime:var i=Pl(t);return i.isValid()?_l(i):function(e){switch(e){case H.ParameterDataTypeFull.Boolean:return!1;case H.ParameterDataTypeFull.Integer:case H.ParameterDataTypeFull.Float:return 0;case H.ParameterDataTypeFull.Date:case H.ParameterDataTypeFull.DateTime:var t=e===H.ParameterDataTypeFull.DateTime;return _l(t?_e()():_e()().startOf("day"));default:return""}}(e);case H.ParameterDataTypeFull.MultiDimension:return[t];case H.ParameterDataTypeFull.String:default:return null==t?"":t._isAMomentObject?t.isValid()?_l(t):"":"".concat(t)}});ae.replace(/<[^>]+>/g,"");function cu(e){if(!e||!e.items||!e.items.length)return e;var t=function e(t){var a=[],n=t[0],i={value:n.value};return n.children&&n.children.length&&(i.children=e(n.children)),a.push(i),a}(e.items);return Object.assign(Object.assign({},e),{items:t})}function du(n,i){return{format:function(e){var t;switch(n){case H.SubColumnTypes.Year:t=e&&i?Ft("patterns.datetime.fiscalYearPattern",{year:e}):e;break;case H.SubColumnTypes.Quarter:var a="patterns.datetime.quarter".concat(e);t=Ot(a)?Ft(a):e;break;case H.SubColumnTypes.Month:t=null!=e?_e()(e,"MM").format("MMM"):e;break;case H.SubColumnTypes.Week:case H.SubColumnTypes.Day:case H.SubColumnTypes.Hour:case H.SubColumnTypes.Minute:case H.SubColumnTypes.Second:case H.SubColumnTypes.Millisecond:default:t=e}return null!=t&&"Invalid date"!==t||(t=e),"".concat(t)}}}function pu(n,e){var i=1<arguments.length&&void 0!==e?e:{};return function(e){if(e===Uo)return Ft("common.nullDisplay");if(null===e)return void 0!==i.nullString?i.nullString:Ft("common.nullDisplay");if(void 0===e||""===e)return void 0!==i.emptyString?i.emptyString:Ft("common.emptyDisplay");var t=e;Bo.a.isBoolean(e)&&(t=e.toString().replace(/^\S/,function(e){return e.toUpperCase()}));var a=n;return"string"==typeof n&&(a=new Dl.a.Spread.Formatter.GeneralFormatter(n,Wt)),a?a.format(t):"".concat(t)}}var hu,yu;function gu(e,t){var a,n=1<arguments.length&&void 0!==t?t:{};return F()({},n,{id:e.uuid,pivot:{pivotFilters:R()(e.config.filters),datasetId:e.config.datasetId,pivotSetting:function(e){if(e){var t={value:{options:{valueFormat:e.format},values:[e.value]},conditionalFormatValues:{options:{},values:[]}};return e.conditionalFormats&&e.conditionalFormats.forEach(function(e){e.conditionalFormatValues&&(t.conditionalFormatValues.values=t.conditionalFormatValues.values.concat(e.conditionalFormatValues))}),t}}(e.config)},options:{enableCrossFilter:null==n||null===(a=n.options)||void 0===a?void 0:a.enableCrossFilter,property:{displayUnit:e.config.displayUnit,conditionalFormats:e.config.conditionalFormats||[]}},scenarioType:H.ScenarioType.Visual})}function mu(e){return!!e.options.property.tabStrip&&e.options.property.tabStrip.visible}function fu(e){return!!e.options.property.header&&e.options.property.header.visible}function vu(e){return mu(e)?ae.path(["options","property","tabStrip","position"],e):0}function bu(e){switch(e){case H.DateUnit.Year:return Ft("editors.relativeDateEditor.year");case H.DateUnit.Quarter:return Ft("editors.relativeDateEditor.quarter");case H.DateUnit.Month:return Ft("editors.relativeDateEditor.month");case H.DateUnit.Week:return Ft("editors.relativeDateEditor.week");case H.DateUnit.Day:return Ft("editors.relativeDateEditor.day");case H.DateUnit.Hour:return Ft("editors.relativeDateEditor.hour");case H.DateUnit.Minute:return Ft("editors.relativeDateEditor.minute");case H.DateUnit.Second:return Ft("editors.relativeDateEditor.second");default:return""}}function Cu(r,o){return function(e){var t=Ft("editors.relativeDateEditor.unit.".concat(r)),a=Ft("editors.relativeDateEditor.this.".concat(r));switch(e){case H.DateRelativeType.Last:return Ft("editors.relativeDateEditor.previous.".concat(r));case H.DateRelativeType.Next:return Ft("editors.relativeDateEditor.next.".concat(r));case H.DateRelativeType.This:return o?Ft("editors.relativeDateEditor.this.anchor",{unit:t}):a;case H.DateRelativeType.LastN:return Ft("editors.relativeDateEditor.lastN");case H.DateRelativeType.NextN:return Ft("editors.relativeDateEditor.nextN");case H.DateRelativeType.ToDate:var n=[H.DateUnit.Day,H.DateUnit.Hour,H.DateUnit.Minute].includes(r),i=o?t:a;return Ft("editors.relativeDateEditor.toDate.".concat(o?n?"toAnchorTime":"toAnchorDate":n?"toNow":"toDate"),{unit:i});default:return"Unrecognized relative type: ".concat(e)}}}function Tu(e){return e?e.display||function(e){var t=e.dateRelativeType,a=e.useAnchorDate,n=e.lastDateNumber,i=e.nextDateNumber,r=e.dateUnit,o=e.useOffset,s=e.offsetNumber,l=Cu(r,a)(t);if(t===H.DateRelativeType.LastN){var u=Vl(n)?au(n):n;l=Ft("editors.relativeDateEditor.lastOrNext.last",{count:u,unit:"$t(editors.relativeDateEditor.unit.".concat(r,")")})}else if(t===H.DateRelativeType.NextN){var c=Vl(i)?au(i):i;l=Ft("editors.relativeDateEditor.lastOrNext.next",{count:c,unit:"$t(editors.relativeDateEditor.unit.".concat(r,")")})}if(!o)return l;var d=Vl(s)?au(s):s,p=Ft("editors.relativeDateEditor.offset.withOffset",{count:d,unit:"$t(editors.relativeDateEditor.unit.".concat(r,")")});return"".concat(l).concat(p)}(e):""}function Su(e){var t="charts.displayUnit.";switch(+e){case H.DisplayUnit.Hundreds:t+="e2";break;case H.DisplayUnit.Thousands:t+="e3";break;case H.DisplayUnit.TenThousand:t+="e4";break;case H.DisplayUnit.HundredThousand:t+="e5";break;case H.DisplayUnit.Millions:t+="e6";break;case H.DisplayUnit.TenMillion:t+="e7";break;case H.DisplayUnit.HundredMillion:t+="e8";break;case H.DisplayUnit.Billions:t+="e9";break;case H.DisplayUnit.Trillions:t+="e12";break;default:t=""}return Ft(t)}function Du(e,t){return t===H.DisplayUnit.None?e:"".concat(e).concat(Su(t))}function ku(e,t){var a=H.DisplayUnit.None;if(e){var n=e.split(zo);if(e=n[0],1<n.length&&"number"==typeof t&&(t/=function(e){switch(e){case H.DisplayUnit.Hundreds:return 100;case H.DisplayUnit.Thousands:return 1e3;case H.DisplayUnit.TenThousand:return 1e4;case H.DisplayUnit.HundredThousand:return 1e5;case H.DisplayUnit.Millions:return 1e6;case H.DisplayUnit.TenMillion:return 1e7;case H.DisplayUnit.HundredMillion:return 1e8;case H.DisplayUnit.Billions:return 1e9;case H.DisplayUnit.Trillions:return 1e12;default:return 1}}(a=parseInt(n[1],10)),"General"===e&&a!==H.DisplayUnit.None&&(e="0")),"n"===e||"n0"===e)e="General";else{var i=e.split("_");if(i[0]===H.DatasetExtendColumnType.SubDate&&null!=i[1]&&null!=t){var r=du(parseInt(i[1],10));return Du(r.format(t),a)}}}return Du(pu(e)(wl(t)),a)}function wu(e,t,a){return t===Uo||null==t||""===t?pu(e,2<arguments.length&&void 0!==a?a:{})(t):ku(e,t)}function xu(e){var t=e.format,a=e.emptyString,n=e.nullString;return"".concat(t).concat("").concat(Ko).concat(a).concat("").concat(jo).concat(n)}function Au(e){var t=H.DisplayUnit.None;if(e&&e.length){var a=Math.max.apply(Math,R()(e.map(function(e){return Math.abs(e)})));"en"===Oo.editionVersion?1e3<=a&&a<1e6?t=H.DisplayUnit.Thousands:1e6<=a&&a<1e9?t=H.DisplayUnit.Millions:1e9<=a&&a<1e12?t=H.DisplayUnit.Billions:1e12<=a&&(t=H.DisplayUnit.Trillions):1e4<=a&&a<1e8?t=H.DisplayUnit.TenThousand:1e8<=a&&(t=H.DisplayUnit.HundredMillion)}return t}function Iu(e,t,a){var n=e,i=t===H.DisplayUnit.Auto?Au(a):t;return t===H.DisplayUnit.Auto&&i!==H.DisplayUnit.None&&"General"===e&&(n="0.0"),[n,i].join(zo)}function Pu(e){try{return"data:image/*;base64,".concat(e)}catch(e){}}function _u(e,t){if(!e)return null;if(H.FontSizeList.RatioAuto===e)return"auto";if(e.endsWith("X")||e.endsWith("x")&&!e.endsWith("px")&&t){var a=parseFloat(e),n=t.fontSize.match(/^(\d+(?:\.\d+)?)(.*)$/);return n?a*n[1]+n[2]:e}return e===parseFloat(e).toString()?"".concat(e,"px"):e}function Mu(e,n,t,a,i){var r=2<arguments.length&&void 0!==t?t:{top:0,left:0},o=r.top,s=r.left,l=3<arguments.length&&void 0!==a?a:function(){return!0},u=4<arguments.length&&void 0!==i?i:{top:0,left:0};return e.filter(l).reduce(function(e,t){var a=Us.position(t);return e[t.id]={top:u.top+(a.top-o)*n.y,left:u.left+(a.left-s)*n.x,width:a.width*n.x,height:a.height*n.y},e},{})}function Lu(e,t){var a=[Us.position(e),Us.position(t)],n=a[0],i=a[1];return n.top!==i.top?n.top-i.top:n.left-i.left}function Ru(_,M,e,t,a){var n=2<arguments.length&&void 0!==e?e:function(e){return!Jr.isInContainer(e)},i=3<arguments.length&&void 0!==t?t:0,L=4<arguments.length&&void 0!==a?a:hs,R=ys,r=M.filter(n).filter(function(e){return!Jr.isInGroup(e)}).sort(Lu).reduce(function(e,t){var a,n=R(t);if(Jr.isContainer(t)){var i,r=d$.definitionManager.getEntireScenario(t),o=M.filter(Jr.isInSpecifiedContainerFn(r)),s=function(e){return function(t,e){var a=1<arguments.length&&void 0!==e?e:t.tabSettingContent.activeTab;return function(e){return e.containerId===t.id&&e.tabId===a}}(r,e)},l=ae.mergeRight(_,Us.margin(r)),u=L-l.left-l.right;if(Us.mobileAutoLayoutPolicy(r)===Ar){var c,d=e.top,p=n,h=0,y=0;fu(r)&&(d+=h=40,p-=40),mu(r)&&vu(r)===H.TabStripPosition.Top&&(d+=y=40,p-=40);var g=Us.tabs(r).map(function(e){return Ru(_,o,s(e),0,u)}).reduce(ae.merge),m=p;ae.isEmpty(g)||(m=ae.values(g).reduce(function(e,t){var a=t.top,n=t.height;return ae.max(e,a+n)},0));var f=m+d+l.top+l.bottom;return mu(r)&&vu(r)===H.TabStripPosition.Bottom&&(f+=y=40),F()({},e,{},g,(c={},V()(c,r.id,{top:e.top,left:0,width:L,height:f-e.top}),V()(c,"".concat(r.id,"container"),{headerHeight:h,tabStripHeight:y}),V()(c,"top",f),c))}var v=Us.position(r),b=u/(v.width-l.left-l.right),C=0,T=0;fu(r)&&(C=Zu(r)),mu(r)&&(T=Qu(r));var S=Us.tabs(r).map(function(e){return Mu(o,{x:b,y:b},void 0,s(e))}).reduce(ae.merge),D=l.top+l.bottom+T+C+(v.height-l.top-l.bottom-T-C)*b;return F()({},e,{},S,(i={},V()(i,r.id,{top:e.top,left:0,width:L,height:D}),V()(i,"".concat(r.id,"container"),{headerHeight:C,tabStripHeight:T}),V()(i,"top",e.top+D),i))}if(Jr.isGroup(t)){var k,w=t,x=Us.position(w),A=L/x.width,I=x.height*A,P=Hs.scenariosInGroup(w.id,{scenarios:il(M)});return F()({},e,{},Mu(P,{x:A,y:A},x,void 0,{top:e.top,left:0}),(k={},V()(k,w.id,{top:e.top,left:0,width:L,height:I}),V()(k,"top",e.top+I),k))}return F()({},e,(a={},V()(a,t.id,{top:e.top,left:0,width:L,height:n}),V()(a,"top",e.top+n),a))},{top:i});return r.top,Tl()(r,["top"])}function Vu(e){if(!e)return[];var o=e.columnNames;return function n(i,r,e){return e.reduce(function(e,t){var a=F()({},i);return a[o[r]]=t.value,t.children&&0<t.children.length&&r<o.length-1?e.concat(n(a,r+1,t.children)):(e.push(a),e)},[])}({},0,e.range.items)}function Nu(e,t){var a=Math.floor(Math.log10(Math.abs(e))),n=t.displayUnit===H.DisplayUnit.Auto?"en"===Oo.editionVersion?Math.max(0,Math.min(12<=a?12:9<=a?9:6<=a?6:3<=a?3:1,a<12?H.DisplayUnit.Billions:H.DisplayUnit.Trillions)):Math.max(0,8<=a?8:4<=a?4:1):t.displayUnit,i=t.displayUnit===H.DisplayUnit.Auto?Math.max(0,Math.min(n,9<n?12:9)):9<t.displayUnit?12:t.displayUnit,r="tooltip"===t.categoryName&&t.dataType===H.DatasetFieldDataType.Number&&n!==H.DisplayUnit.None&&n!==H.DisplayUnit.Auto,o=t.formatValue(r?e/Math.pow(10,i):e);return r?o+Su(n):o}function Eu(e){switch(e.scenarioType){case H.ScenarioType.Slicer:return function(e){switch(e){case H.SlicerType.TreeSlicer:case H.SlicerType.LabelSlicer:case H.SlicerType.ComboBoxSlicer:return[H.DataSourceEditorType.Column];case H.SlicerType.DataRangeSlicer:return[H.DataSourceEditorType.ValueRange];default:return[H.DataSourceEditorType.Collection]}}(e.slicerType);default:return[H.DataSourceEditorType.Collection]}}function Fu(e){return!/^data:image/.test(0<arguments.length&&void 0!==e?e:"")}function Ou(e){return/^https?:/.test(0<arguments.length&&void 0!==e?e:"")}function Hu(e){return"/"===e}function Bu(e,t,a){var n=1<arguments.length&&void 0!==t?t:"";return function(e,t){var a=0<arguments.length&&void 0!==e?e:"",n=1<arguments.length&&void 0!==t?t:"";return n&&Fu(a)&&!Ou(a)?"".concat(ae.dropLastWhile(Hu,n||""),"/").concat(ae.dropWhile(Hu,a||"")):a}(function(e,t){var a=0<arguments.length&&void 0!==e?e:"",n=1<arguments.length&&void 0!==t?t:"",i=-1<a.indexOf("".concat(tc,"="));if(!n||i||!Fu(a))return a;var r="".concat(tc,"=").concat(n),o=a.indexOf("?"),s=a.indexOf("#"),l=-1<o;if(!(-1<s))return l?"".concat(a,"&").concat(r):"".concat(a,"?").concat(r);var u=a.substring(s);if(!l){var c=a.substring(0,s);return"".concat(c,"?").concat(r).concat(u)}var d=a.substring(0,o),p=a.substring(o,s);return"".concat(d).concat(p,"&").concat(r).concat(u)}(0<arguments.length&&void 0!==e?e:"",2<arguments.length&&void 0!==a?a:""),n)}function Uu(e){switch(e){case H.FontWeight.Light:return"100";case H.FontWeight.Bold:return"bold";case H.FontWeight.Heavy:return"900";default:return"normal"}}function zu(e){return parseFloat(e)}function Ku(e){return"".concat(e.fontStyle," ").concat(Uu(e.fontWeight)," ").concat(e.fontSize," ").concat(e.fontFamily)}function ju(e){return zu("string"==typeof e?oc(e):e)}function Wu(e){var t,a=e.id,n=e.content;return t=n instanceof Blob?URL.createObjectURL(n):n.url,'\n    @font-face {\n      font-family: "'.concat(H.WRAP_NUMBER_START_FONT_MARKER).concat(a,'";\n      src: url("').concat(t,'");\n      src: url("').concat(t,"\") format('truetype'), /* Safari, Android, iOS */\n           url(\"").concat(t,"\") format('woff'), /* Pretty Modern Browsers */\n           url(\"").concat(t,"\") format('woff2'), /* Super Modern Browsers */\n           url(\"").concat(t,"\") format('svg'), /* Legacy iOS */\n           url(\"").concat(t,"\") format('embedded-opentype'); /* IE6-IE8 */\n      font-display: swap;\n    }\n  ")}function Gu(e,t,a){var n=e.length;rc.a.load({timeout:6e4,custom:{families:e.map(function(e){return"".concat(H.WRAP_NUMBER_START_FONT_MARKER).concat(e.id)})},fontactive:function(e){n--,null!=t&&t(e),n||null!=a&&a()},fontinactive:function(e){n--,nu.log("Font inactive : ".concat(e)),n||null!=a&&a()},classes:!1})}function Yu(e){return"string"==typeof e&&pc.test(e)}var qu=ae.reduce(function(e,t){var a=t.width,n=t.height,i=t.top,r=t.left;return{width:Math.max(r+a,e.width),height:Math.max(i+n,e.height)}},{width:0,height:0}),Ju=ae.curry(function(e,t){var a=e.widthScale,n=e.heightScale,i=t.height;return{width:Math.floor(i*a/n),height:i}}),Xu=ae.curry(function(e,t){var a=e.widthScale,n=e.heightScale,i=t.width;return{width:i,height:Math.floor(i*n/a)}}),Qu=(ae.curry(function(e,t,a){function n(){return Xu({widthScale:r,heightScale:o},{width:s})}function i(){return Ju({widthScale:r,heightScale:o},{height:l})}var r=e.widthScale,o=e.heightScale,s=t.width,l=t.height,u=r/o<s/l;return isNaN(r/o)?{width:s,height:l}:(u?a?i:n:a?n:i)()}),ae.curry(function(e,t){var a=ae.prop("display"),n=ae.propEq("value",t);return ae.compose(a,ae.find(n))(e)}),ae.path(["options","property","tabStrip","height"])),Zu=(ae.path(["options","property","mobile","tabStripHeight"]),ae.path(["options","property","header","height"])),$u=(ae.path(["options","property","mobile","headerHeight"]),hu={},V()(hu,H.DisplayUnit.Auto,H.DisplayUnitString.Auto),V()(hu,H.DisplayUnit.None,H.DisplayUnitString.None),V()(hu,H.DisplayUnit.Hundreds,H.DisplayUnitString.Hundreds),V()(hu,H.DisplayUnit.Thousands,H.DisplayUnitString.Thousands),V()(hu,H.DisplayUnit.TenThousand,H.DisplayUnitString.TenThousand),V()(hu,H.DisplayUnit.HundredThousand,H.DisplayUnitString.HundredThousand),V()(hu,H.DisplayUnit.Millions,H.DisplayUnitString.Millions),V()(hu,H.DisplayUnit.TenMillion,H.DisplayUnitString.TenMillion),V()(hu,H.DisplayUnit.HundredMillion,H.DisplayUnitString.HundredMillion),V()(hu,H.DisplayUnit.Billions,H.DisplayUnitString.Billions),V()(hu,H.DisplayUnit.Trillions,H.DisplayUnitString.Trillions),hu),ec=(yu={},V()(yu,H.DisplayUnitString.Auto,H.DisplayUnit.Auto),V()(yu,H.DisplayUnitString.None,H.DisplayUnit.None),V()(yu,H.DisplayUnitString.Hundreds,H.DisplayUnit.Hundreds),V()(yu,H.DisplayUnitString.Thousands,H.DisplayUnit.Thousands),V()(yu,H.DisplayUnitString.TenThousand,H.DisplayUnit.TenThousand),V()(yu,H.DisplayUnitString.HundredThousand,H.DisplayUnit.HundredThousand),V()(yu,H.DisplayUnitString.Millions,H.DisplayUnit.Millions),V()(yu,H.DisplayUnitString.TenMillion,H.DisplayUnit.TenMillion),V()(yu,H.DisplayUnitString.HundredMillion,H.DisplayUnit.HundredMillion),V()(yu,H.DisplayUnitString.Billions,H.DisplayUnit.Billions),V()(yu,H.DisplayUnitString.Trillions,H.DisplayUnit.Trillions),yu),tc="token",ac={themeColors:[{id:"palette-theme-color-Accent123456",name:"Theme-Palette-12",colors:["=Theme.Colors!Accent1","=Theme.Colors!Accent2","=Theme.Colors!Accent3","=Theme.Colors!Accent4","=Theme.Colors!Accent5","=Theme.Colors!Accent6"]},{id:"palette-theme-color-Accent135",name:"Theme-Palette-13",colors:["=Theme.Colors!Accent1","=Theme.Colors!Accent3","=Theme.Colors!Accent5","=Theme.Colors(3,4)","=Theme.Colors(3,6)","=Theme.Colors(3,8)"]},{id:"palette-theme-color-Accent246",name:"Theme-Palette-14",colors:["=Theme.Colors!Accent2","=Theme.Colors!Accent4","=Theme.Colors!Accent6","=Theme.Colors(3,5)","=Theme.Colors(3,7)","=Theme.Colors(3,9)"]},{id:"palette-theme-color-Accent654",name:"Theme-Palette-15",colors:["=Theme.Colors!Accent6","=Theme.Colors!Accent5","=Theme.Colors!Accent4","=Theme.Colors(3,9)","=Theme.Colors(3,8)","=Theme.Colors(3,7)"]},{id:"palette-theme-color-D2L-Accent1",name:"Theme-Palette-1",colors:["=Theme.Colors(5,4)","=Theme.Colors(4,4)","=Theme.Colors!Accent1","=Theme.Colors(3,4)","=Theme.Colors(2,4)","=Theme.Colors(1,4)"]},{id:"palette-theme-color-L2D-Accent1",name:"Theme-Palette-2",colors:["=Theme.Colors(1,4)","=Theme.Colors(2,4)","=Theme.Colors(3,4)","=Theme.Colors!Accent1","=Theme.Colors(4,4)","=Theme.Colors(5,4)"]},{id:"palette-theme-color-D2L-Accent2",name:"Theme-Palette-16",colors:["=Theme.Colors(5,5)","=Theme.Colors(4,5)","=Theme.Colors!Accent2","=Theme.Colors(3,5)","=Theme.Colors(2,5)","=Theme.Colors(1,5)"]},{id:"palette-theme-color-L2D-Accent2",name:"Theme-Palette-3",colors:["=Theme.Colors(1,5)","=Theme.Colors(2,5)","=Theme.Colors(3,5)","=Theme.Colors!Accent2","=Theme.Colors(4,5)","=Theme.Colors(5,5)"]},{id:"palette-theme-color-D2L-Accent3",name:"Theme-Palette-4",colors:["=Theme.Colors(5,6)","=Theme.Colors(4,6)","=Theme.Colors!Accent3","=Theme.Colors(3,6)","=Theme.Colors(2,6)","=Theme.Colors(1,6)"]},{id:"palette-theme-color-L2D-Accent3",name:"Theme-Palette-5",colors:["=Theme.Colors(1,6)","=Theme.Colors(2,6)","=Theme.Colors(3,6)","=Theme.Colors!Accent3","=Theme.Colors(4,6)","=Theme.Colors(5,6)"]},{id:"palette-theme-color-D2L-Accent4",name:"Theme-Palette-6",colors:["=Theme.Colors(5,7)","=Theme.Colors(4,7)","=Theme.Colors!Accent4","=Theme.Colors(3,7)","=Theme.Colors(2,7)","=Theme.Colors(1,7)"]},{id:"palette-theme-color-L2D-Accent4",name:"Theme-Palette-7",colors:["=Theme.Colors(1,7)","=Theme.Colors(2,7)","=Theme.Colors(3,7)","=Theme.Colors!Accent4","=Theme.Colors(4,7)","=Theme.Colors(5,7)"]},{id:"palette-theme-color-D2L-Accent5",name:"Theme-Palette-8",colors:["=Theme.Colors(5,8)","=Theme.Colors(4,8)","=Theme.Colors!Accent5","=Theme.Colors(3,8)","=Theme.Colors(2,8)","=Theme.Colors(1,8)"]},{id:"palette-theme-color-L2D-Accent5",name:"Theme-Palette-9",colors:["=Theme.Colors(1,8)","=Theme.Colors(2,8)","=Theme.Colors(3,8)","=Theme.Colors!Accent5","=Theme.Colors(4,8)","=Theme.Colors(5,8)"]},{id:"palette-theme-color-D2L-Accent6",name:"Theme-Palette-10",colors:["=Theme.Colors(5,9)","=Theme.Colors(4,9)","=Theme.Colors!Accent6","=Theme.Colors(3,9)","=Theme.Colors(2,9)","=Theme.Colors(1,9)"]},{id:"palette-theme-color-L2D-Accent6",name:"Theme-Palette-11",colors:["=Theme.Colors(1,9)","=Theme.Colors(2,9)","=Theme.Colors(3,9)","=Theme.Colors!Accent6","=Theme.Colors(4,9)","=Theme.Colors(5,9)"]}],standardColors:[{id:"palette-standard-color-0",name:"Standard-Palette-1",colors:["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7"]},{id:"palette-standard-color-1",name:"Standard-Palette-2",colors:["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872"]},{id:"palette-standard-color-2",name:"Standard-Palette-3",colors:["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2"]},{id:"palette-standard-color-3",name:"Standard-Palette-4",colors:["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c"]},{id:"palette-standard-color-4",name:"Standard-Palette-5",colors:["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a"]},{id:"palette-standard-color-5",name:"Standard-Palette-6",colors:["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7"]},{id:"palette-standard-color-6",name:"Standard-Palette-7",colors:["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7"]},{id:"palette-standard-color-7",name:"Standard-Palette-8",colors:["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6"]},{id:"palette-standard-color-8",name:"Standard-Palette-9",colors:["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0"]},{id:"palette-standard-color-9",name:"Standard-Palette-10",colors:["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4"]},{id:"palette-standard-color-11",name:"Standard-Palette-12",colors:["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3"]},{id:"palette-standard-color-12",name:"Standard-Palette-13",colors:["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c"]},{id:"palette-standard-color-13",name:"Standard-Palette-14",colors:["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5"]},{id:"palette-standard-color-14",name:"Standard-Palette-15",colors:["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3"]},{id:"palette-standard-color-15",name:"Standard-Palette-16",colors:["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323"]}]},nc=ac.themeColors[0].id,ic=a(65),rc=a.n(ic),oc=function(e){var t,a=[(t=e.match(/^(\d+(?:\.\d+)?)(.*)$/))[1],t[2]],n=N()(a,2),i=n[0];switch(n[1].toLowerCase()){case"pt":return"".concat(4*i/3,"px");case"cm":return"".concat(37.795276*i,"px");default:return e}},sc=a(27),lc=a.n(sc),uc=["Transparent","Black","DarkSlateGray","SlateGray","LightSlateGray","DimGray","Gray","DarkGray","Silver","LightGrey","Gainsboro","WhiteSmoke","White","Snow","HoneyDew","MintCream","Azure","AliceBlue","GhostWhite","SeaShell","Beige","OldLace","FloralWhite","Ivory","AntiqueWhite","Linen","LavenderBlush","MistyRose","Pink","LightPink","HotPink","DeepPink","PaleVioletRed","MediumVioletRed","LightSalmon","Salmon","DarkSalmon","LightCoral","IndianRed","Crimson","FireBrick","DarkRed","Red","OrangeRed","Tomato","Coral","DarkOrange","Orange","Yellow","LightYellow","LemonChiffon","LightGoldenrodYellow","PapayaWhip","Moccasin","PeachPuff","PaleGoldenrod","Khaki","DarkKhaki","Gold","Cornsilk","BlanchedAlmond","Bisque","NavajoWhite","Wheat","BurlyWood","Tan","RosyBrown","SandyBrown","Goldenrod","DarkGoldenrod","Peru","Chocolate","SaddleBrown","Sienna","Brown","Maroon","DarkOliveGreen","Olive","OliveDrab","YellowGreen","LimeGreen","Lime","LawnGreen","Chartreuse","GreenYellow","SpringGreen","MediumSpringGreen","LightGreen","PaleGreen","DarkSeaGreen","MediumAquamarine","MediumSeaGreen","SeaGreen","ForestGreen","Green","DarkGreen","Aqua","Cyan","LightCyan","PaleTurquoise","Aquamarine","Turquoise","MediumTurquoise","DarkTurquoise","LightSeaGreen","CadetBlue","DarkCyan","Teal","LightSteelBlue","PowderBlue","LightBlue","SkyBlue","LightSkyBlue","DeepSkyBlue","DodgerBlue","CornflowerBlue","SteelBlue","RoyalBlue","Blue","MediumBlue","DarkBlue","Navy","MidnightBlue","Lavender","Thistle","Plum","Violet","Orchid","Fuchsia","Magenta","MediumOrchid","MediumPurple","BlueViolet","DarkViolet","DarkOrchid","DarkMagenta","Purple","Indigo","DarkSlateBlue","RebeccaPurple","SlateBlue","MediumSlateBlue"],cc=/^#([0-9A-F]{3}|[0-9A-F]{6}|[0-9A-F]{8})$/i,dc=/^#([0-9A-F]{8})$/i,pc=/^=.*$/i,hc=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?\d+(\.\d+)?)\s*)?\)$/,yc=/^=theme\.colors(!(Dark[1-2]|Light[1-2]|Accent[1-6]|Hyperlink(Followed)?)$|\([0-5],([0-9]|1[0-1])(,([+-]?\d+(\.\d+)?))?(,\d+)?\)$)/i;var gc=is,mc={0:"Dark1",1:"Light1",2:"Dark2",3:"Light2",4:"Accent1",5:"Accent2",6:"Accent3",7:"Accent4",8:"Accent5",9:"Accent6",10:"Hyperlink",11:"HyperlinkFollowed"},fc="1",vc="2",bc="3",Cc="4",Tc="5",Sc=Object.keys(mc).reduce(function(e,t){return Object.assign(e,V()({},mc[t],t))},{});function Dc(e){var t=e&&"string"==typeof e&&e.toLowerCase();return"transparent"===t?t:t&&{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[t]}var kc=function(e){return mc[e]};function wc(e,t){function a(e){return Math.round((i-e)*Math.abs(t))+e}var n=parseInt(e.slice(1),16),i=t<0?0:255,r=n>>8&255,o=255&n,s=(16777216+65536*a(n>>16&255)+256*a(r)+a(o)).toString(16).slice(1);return"#".concat(s)}function xc(e,t,a){var n=Dc(e)||e;return n&&n.startsWith("#")?(a?function(e,t){var a="editors.colorFriendlyDisplay";switch(e){case fc:return Ft("".concat(a,".Tint20Percent"));case vc:return Ft("".concat(a,".Tint40Percent"));case bc:return Ft("".concat(a,".Tint60Percent"));case Cc:return Ft("".concat(a,".Shade75Percent"));case Tc:return Ft("".concat(a,".Shade50Percent"));default:return t}}:function(e,t){switch(e){case fc:return wc(t,.75);case vc:return wc(t,.5);case bc:return wc(t,.25);case Cc:return wc(t,-.25);case Tc:return wc(t,-.5);default:return t}})(t,n):""}var Ac=function(e,t,a){return(xc(e,t,a)||"transparent").toString()},Ic=function(e){return"("===e[0]&&")"===e[e.length-1]},Pc=function(e){return e.slice(1,-1).split(",")},_c="Theme.Colors";function Mc(e){return e&&"string"==typeof e&&e.includes(_c)}var Lc=function(e,t){var a=lc()(e);return a.alpha(a.alpha()*t/100).toString().replace(/\s+/g,"")},Rc=function(e,t){return lc()(e).rotate(+t).rgb().toString().replace(/\s+/g,"")};function Vc(e,t){if(Dc(e))return Dc(e);if(null==t&&(t=os),t&&Mc(e)){var a=e.split(" ").find(function(e){return e.includes(_c)}),n=a.indexOf(_c)+_c.length,i=a.substring(n);if(Ic(i)){var r=Pc(i),o=N()(r,4),s=o[0],l=o[1],u=o[2],c=o[3],d=kc(l),p=Ac(t.colors[d],s),h=u?Lc(p,100*u):p;return c&&(h=Rc(h,c)),h}return t.colors[i.slice(1)]}if("string"!=typeof e||-1===e.search(dc))return e!==gc?e:void 0;var y=parseInt(parseInt(e.substring(7,9),16)/255*100,10)/100,g=e.substring(0,7);return lc()(g).alpha(y).toString()}function Nc(t,a){if(ae.is(Object,t)){var e=Object.keys(t.colorStops).map(function(e){return t.colorStops[e]});return F()({},t,{colorStops:e.map(function(e){return Vc(e,a)})})}return"string"==typeof t?Vc(t,a):t}function Ec(e,t){if(t&&(e=Nc(e,t)),ae.is(Object,e)){if(e.type===Ir)return"linear-gradient(".concat(e.angle,"deg, ").concat(e.colorStops.join(","),")");if(e.type===Pr)return"radial-gradient(".concat(e.extentKeyword===Mr.FarthestCorner?"farthest-corner":"farthest-side"," ").concat(function(e){var t="at 50% 50%";switch(e){case _r.Top:t="at 50% 0%";break;case _r.Bottom:t="at 50% 100%";break;case _r.Left:t="at 0% 50%";break;case _r.Right:t="at 100% 50%";break;case _r.LeftTop:t="at 0% 0%";break;case _r.RightTop:t="at 100% 0%";break;case _r.LeftBottom:t="at 0% 100%";break;case _r.RightBottom:t="at 100% 100%"}return t}(e.position),",").concat(e.colorStops.join(","),")")}}function Fc(e,t){return Mc(e)?function(e,t){var a="=Theme.Colors";if(Mc(e)){var n=e.indexOf(a)+a.length,i=e.substring(n);if(Ic(i)){var r=Pc(i),o=N()(r,4),s=o[0],l=o[1],u=o[2],c=void 0===u?1:u,d=o[3],p=((void 0===d?0:d)+t)%360;return"".concat(a,"(").concat(s,",").concat(l,",").concat(c,",").concat(p,")")}var h=Sc[i.slice(1)];return"".concat(a,"(").concat("0",",").concat(h,",1,").concat(t%360,")")}}(e,t):Rc(Dc(e)||e,t)}function Oc(e,t,a){return a.indexOf(e)===t}function Hc(t,e,a){return a.findIndex(function(e){return ae.equals(e,t)})===e}function Bc(a,e,t){if(null!=a&&a.values.length&&null!=e&&e.length){var n=e;if(null!=t){var i=nl(t,a.values.map(function(e){return e.display}));i&&(n=e.sort(function(e,t){return i(e)<i(t)?-1:1}))}if(1<a.values.length)return{dataPoints:n.map(function(e){return t=a.values,i=e,t.reduce(function(e,t,a){var n=ku(t.format,i[t.display]);return 0<a?"".concat(e,",").concat(n):"".concat(e).concat(n)},"");var t,i}).filter(Oc),type:H.ColorRelationType.DimensionItem,columns:a.values.map(function(e){return tl(e)}),format:"General"};var r=a.values[0];return{dataPoints:n.map(function(e){return e[r.display]}).filter(Oc),type:H.ColorRelationType.DimensionItem,columns:[tl(r)],format:r.format}}return null}function Uc(e,t,a){var n,i,r,o,s,l,u,c,d=2<arguments.length&&void 0!==a?a:"";if(ae.isEmpty(t))return null;switch(e){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.RadialStackedBar:case H.ChartType.StackBarInPolar:case H.ChartType.BarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.Funnel:case H.ChartType.Rose:return function(e){var t=e.data,a=e.profile,n=a.series,i=a.values,r=e.sort,o=Bc(n,t,r);if(o)return o;if(null!=i&&i.values.length){var s=i.values.map(function(e){return tl(e)}).filter(Hc);return{dataPoints:s,type:H.ColorRelationType.MeasureName,columns:s,format:"General"}}return null}(t[0]);case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:return s=t[0],l=s.data,u=s.profile.series,c=s.sort,Bc(u,l,c);case H.ChartType.Map:return function(e,t){var a,n,i,r;if(!(r="scatter"===t?e.find(function(e){var t;return void 0!==(null===(t=e.profile)||void 0===t?void 0:t.roles.shape)}):e.find(function(e){var t;return void 0===(null===(t=e.profile)||void 0===t?void 0:t.roles.shape)})))return null;var o=r.data,s=(null===(n=null===(a=null==r?void 0:r.profile)||void 0===a?void 0:a.roles)||void 0===n?void 0:n.color)||(null===(i=null==r?void 0:r.profile)||void 0===i?void 0:i.color);if(!s||ae.isEmpty(s.values))return null;var l=s.values[0].display;return{dataPoints:o.map(function(e){return e[l]}).filter(Oc),format:s.values[0].format,type:H.ColorRelationType.DimensionItem,columns:s.values.map(function(e){return tl(e)})}}(t,d);case H.ChartType.TreeMap:case H.ChartType.Sunburst:return function(e){var t=e.data,a=e.profile.details;if(null!=a&&a.values.length){var n=a.values[0];return{dataPoints:t.map(function(e){return e[n.display]}).filter(Oc),type:H.ColorRelationType.DimensionItem,columns:[tl(n)],format:n.format}}return null}(t[0]);case H.ChartType.FloorPlan:return n=t[0],i=n.data,r=n.profile.color,o=n.sort,Bc(r,i,o);case H.ChartType.Composite:return function(e){var t=e.filter(function(e,t){var a,n,i,r,o,s,l,u;return 0===t?(null===(n=null===(a=null==e?void 0:e.profile)||void 0===a?void 0:a.series)||void 0===n?void 0:n.values.length)&&(null===(r=null===(i=null==e?void 0:e.profile)||void 0===i?void 0:i.leftValues)||void 0===r?void 0:r.values.length):1===t?(null===(s=null===(o=null==e?void 0:e.profile)||void 0===o?void 0:o.series)||void 0===s?void 0:s.values.length)&&(null===(u=null===(l=null==e?void 0:e.profile)||void 0===l?void 0:l.rightValues)||void 0===u?void 0:u.values.length):null});if(t.length){var a=t[0],n=a.data,i=a.profile.series,r=a.sort;return Bc(i,n,r)}return null}(t);default:return null}}function zc(e,t,a){var n,i,r,o,s,l,u,c,d=2<arguments.length&&void 0!==a?a:"";switch(e){case H.ChartType.Map:c=t.map(function(e){return{data:null==e?void 0:e.data,profile:null==e?void 0:e.profile}});break;case H.ChartType.Composite:c=[{data:null===(i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.leftValues)||void 0===i?void 0:i.data,profile:null===(r=null==t?void 0:t.data.leftValues)||void 0===r?void 0:r.profile},{data:null===(s=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.rightValues)||void 0===s?void 0:s.data,profile:null===(u=null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.rightValues)||void 0===u?void 0:u.profile}];break;default:c=[t]}return Uc(e,c,d)}function Kc(e,t,a){return Uc(e,t,a)}function jc(e,t,a){return null!=e&&e.length?e.find(function(e){if(e.type===t)return t===H.ColorRelationType.MeasureName||function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!ae.equals(e[a],t[a]))return!1;return!0}(a,e.columns)}):null}function Wc(e,t){if(!t)return null;switch(e){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.RadialStackedBar:case H.ChartType.StackBarInPolar:case H.ChartType.BarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.Funnel:case H.ChartType.Rose:return l=(o=t).series,u=o.values,null!=l&&l.values.length?(s=l.values.map(function(e){return tl(e)}),{type:H.ColorRelationType.DimensionItem,columns:s}):null!=u&&u.values.length?(s=u.values.map(function(e){return tl(e)}),{type:H.ColorRelationType.MeasureName,columns:s}):null;case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:case H.ChartType.Composite:return null!=(r=t.series)&&r.values.length?(i=r.values.map(function(e){return tl(e)}),{type:H.ColorRelationType.DimensionItem,columns:i}):null;case H.ChartType.Map:return function(e){var t=e.roles,a=e.color,n=((null==t?void 0:t.color)||a).values;if(null!=n&&n.length){var i=n.map(function(e){return tl(e)});return{type:H.ColorRelationType.DimensionItem,columns:i}}return null}(t);case H.ChartType.TreeMap:case H.ChartType.Sunburst:return null!=(n=t.details)&&n.values.length?(a=[tl(n.values[0])],{type:H.ColorRelationType.DimensionItem,columns:a}):null;case H.ChartType.FloorPlan:return function(e){var t=e.color;if(null!=t&&t.values.length){var a=t.values.map(function(e){return tl(e)});return{type:H.ColorRelationType.DimensionItem,columns:a}}return null}(t);default:return null}var a,n,i,r,o,s,l,u}function Gc(e,a,t){var n=[];if(null!=t&&t.length)if(e===H.ColorRelationType.MeasureName)t.forEach(function(t){-1===a.findIndex(function(e){return ae.equals(e.dataPoint,t)})&&n.push(t)});else{var i=a.reduce(function(e,t,a){return e[t.dataPoint]=a,e},{});t.forEach(function(e){void 0===i[e]&&n.push(e)})}return n}function Yc(e,t){var a,n,i=t.length;if(i<=e){var r=e%i,o=50*Math.floor(e/i);return a=t[r],n=o,ae.is(Object,a)?F()({},a,{colorStops:a.colorStops.map(function(e){return Fc(e,n)})}):"string"==typeof a?Fc(a,n):null}return t[e]}function qc(t,e){var a=function(t,e){return(1<arguments.length&&void 0!==e?e:[]).find(function(e){return ae.pathEq(["key"],t,e)})}(t,e);return a?{id:a.key,name:a.mode,colors:a.colors}:ae.flatten(Object.values(ac)).find(function(e){return e.id===t})||ac.themeColors[0]}function Jc(e,t){if(!e||"auto"===e||e===H.FontSizeList.RatioAuto)return e;var a=e.match(/^(\d+(?:\.\d+)?)(.*)$/);return a[1]*t+a[2]}function Xc(i,e,t){var r=2<arguments.length&&void 0!==t?t:1;if(1===r)return i;var o=i;return e.forEach(function(e){var t=e.split("."),a=ae.path(t,i);if(a){var n=F()({},a,{fontSize:Jc(a.fontSize,r)});o=ae.assocPath(t,n,o)}}),o}function Qc(e){var t=0<arguments.length&&void 0!==e?e:{},a=[];return t.id?a=t.id.values:t.hierarchy?a=t.hierarchy.values:t.columns&&(a=t.columns.values),a}function Zc(e,t,a){var n=1<arguments.length&&void 0!==t?t:"",i=2<arguments.length&&void 0!==a?a:0;if(e.nodeId===n){var r=!e.connectionKey&&e.connectionValue;return F()({},e,{level:r?"district":i})}for(var o=0;o<e.children.length;o+=1){var s=Zc(e.children[o],n,i+1);if(s)return s}}function $c(e,t){var a=1<arguments.length&&void 0!==t?t:"";if(e.geoJsonId===a)return F()({},e,{level:"district"})}var ed=a(17),td=a(36),ad=a.n(td),nd=function(e,t){var a=e[t.connectionKey],n=t.children.find(function(e){if(e.connectionValue===a)return!0});return n&&n.nodeId},id=function(a,e){var n=e===hr.DirectGeo?$c:Zc,t=rd(e),i={};return t.some(function(e){var t=n(e,a);if(t)return i=F()({},t,{hierarchyId:e.id}),!0}),i},rd=function(e){var t;switch(e){case hr.Offline:t=d$.httpResourceManager.get("MapHierarchyList").get().map(function(e){return F()({},e.content,{id:e.id})});break;case hr.DirectGeo:t=(d$.httpResourceManager.getData("GeoJsonList")||[]).reduce(function(e,t){return t.isSystemReserved||e.push({geoJsonId:t.id,title:t.title,children:[]}),e},[]);break;default:t=[F()({},ad.a.content,{id:ad.a.id})]}return t},od=function(n,e){var i=[];return rd(e).forEach(function(e,t){var a=function r(e,o,t,a){var s=2<arguments.length&&void 0!==t?t:"",l=3<arguments.length&&void 0!==a?a:0,u=!1,n=e.children.map(function(e,t){var a=r(e,o,s+l+"_",t),n=a.isParentExpand,i=a.child;return n&&(u=!0),i}),i=o===e.nodeId||o===e.geoJsonId,c={checked:i?1:0,display:e.title,expanded:u,inAffectedTree:!0,value:e.nodeId||e.geoJsonId,visible:!0,key:s+l,disabled:e.disabled,children:0<n.length?n:null};return{isParentExpand:u||i,child:c}}(e,n,null,t).child;i.push(a)}),i},sd=function(e){return e===hr.Online?new ed.Promise.resolve(ad.a):(e===hr.Offline?d$.httpResourceManager.get("MapHierarchyList"):d$.httpResourceManager.get("GeoJsonList")).fetch()},ld=function(e){var a={hierarchyId:"",nodeId:""};return e&&0<e.length&&e.find(function(e){var t=e.content.children.find(function(e){return"United States"===e.title});if(t)return a.nodeId=t.nodeId,a.hierarchyId=e.id,!0}),a},ud=function(e){return e?e.nodeId?ae.pathOr("",["title"],id(e.nodeId,e.mode)):void 0:""};function cd(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:hr.Online,a=id(e,t);return{name:a.title,level:a.level}}function dd(e,t){var a=id(e,t).geoJsonId;if(t!==hr.Offline)return d$.amapLoader.fetchGeoJSON(a);var n=d$.httpResourceManager.get("GeoDocument");return a?n.fetch(a):ed.Promise.resolve({})}function pd(e,t){switch(t){case hr.Online:return dd(e,t);case hr.DirectGeo:return sd(t).then(function(){return d$.httpResourceManager.get("GeoDocument").fetch(e)});default:return sd(t).then(function(){return dd(e,t)})}}function hd(e){var t=Hs.datasetInfoList(e).map(function(e){return{id:e.id,type:e.datasetType}}),a=ae.compose(ae.values,ae.mapObjIndexed(function(e,t){return{id:t,type:e.datasetType||H.DatasetType.COT}}))(Hs.profiles(e));return ae.compose(ae.uniqBy(ae.prop("id")),ae.concat(a))(t)}ae.curry(function(e,t){var a=ae.find(ae.propEq("id",t),Hs.datasetInfoList(e));if(a)return a.datasetType;var n=Hs.profiles(e)[t];return n?n.datasetType:H.DatasetType.COT});function yd(e,t,a){var n,i=2<arguments.length&&void 0!==a?a:{};Cd[e]=null!==(n=Cd[e])&&void 0!==n?n:{};var r=Cd[e];r[t]||(r[t]=function t(e,a,n){var i,r=2<arguments.length&&void 0!==n?n:{},o=(null!==(i=a[e])&&void 0!==i?i:[]).concat([e]);r[e]=!0;var s=o.filter(function(e){return!r[e]});return s.forEach(function(e){return r[e]=!0}),s.flatMap(function(e){return t(e,a,r)}).forEach(function(e){return o.push(e)}),o}(t,i))}function gd(e,t,a,n){if(!e)return!0;if(!Jr.isAnalysisModel(e))return!0;yd(e.id,t,e.relationMapping);var i=Cd[e.id][t];return a.length?a.some(function(e){return i.includes(e)}):!!n.every(function(e){return e===t})||n.some(function(e){return i.includes(e)})}function md(t,a,e,n){if(!t)return!0;if(!Jr.isAnalysisModel(t))return!0;yd(t.id,a,t.relationMapping);var i=Cd[t.id],r=i[a];return e.length?e.every(function(e){return r.includes(e)}):!!n.some(function(e){return e===a})||(n.forEach(function(e){return yd(t.id,e,t.relationMapping)}),!!n.reduce(function(e,t){return e.filter(function(e){return i[t].includes(e)})},r).length)}function fd(t,a,e,n){if(!t)return!0;if(!Jr.isAnalysisModel(t))return!0;n.forEach(function(e){return yd(t.id,e,t.relationMapping)});var i=Cd[t.id];return n.every(function(e){return i[e].includes(a)})}var vd,bd,Cd={};(bd=vd=vd||{})[bd.None=0]="None",bd[bd.Dimension=1]="Dimension",bd[bd.Value=2]="Value",bd[bd.Filter=4]="Filter";function Td(e,t,a){if(!Jr.isAnalysisModel(e.getDatasetType()))return!0;var n=e.getColumn(a);return!n.invalid&&t(e.getDatasetSchema(),n.entityId,e.getUsedValueItems().map(function(e){return e.entityId}),e.getUsedDimensionItems().map(function(e){return e.entityId}))}function Sd(e){return!isNaN(e)&&0<=e}function Dd(e,t){switch(e){case H.ParameterDataTypeFull.Integer:if(-1===t.toString().search(Nd))return!1;break;case H.ParameterDataTypeFull.Float:if(a=t,isNaN(parseFloat(a))||!isFinite(a))return!1;break;case H.ParameterDataTypeFull.Boolean:if("boolean"!=typeof t)return!1;break;case H.ParameterDataTypeFull.String:if("string"!=typeof t)return!1;break;case H.ParameterDataTypeFull.Date:if(!Pl(t).isValid())return!1;case H.ParameterDataTypeFull.DateTime:if(!Pl(t).isValid())return!1}var a;return!0}function kd(e){var a=e.split(".");return[a.filter(function(e,t){return t<a.length-1}).join("."),a[a.length-1]]}function wd(e,t,a){var n,i,r=e.name,o=e.valueType,s=e.value,l=e.multiValue,u=kd(r),c=N()(u,2),d=c[0],p=c[1],h=a.find(function(e){return e.name===d});if(!h)return!1;var y=h.parameters.find(function(e){return e.name===p});if(!y)return!1;if(l!==y.multiValue)return!1;if(o===H.modelParameterType.StaticValue)if(l){if(!(null===(i=(n=[!0].concat(R()(s))).reduce)||void 0===i?void 0:i.call(n,function(e,t){return e&&Dd(y.dataType,t)})))return!1}else if(!Dd(y.dataType,s))return!1;if(o===H.modelParameterType.DashboardParameter&&s.name){var g=t.find(function(e){return e.name===s.name});if(!g)return!1;var m=y.dataType.toUpperCase(),f=g.dataType.toUpperCase();if(m===H.ParameterDataTypeFull.Integer.toUpperCase()||m===H.ParameterDataTypeFull.Float.toUpperCase()){if(f!==H.ParameterDataTypeFull.Integer.toUpperCase()&&f!==H.ParameterDataTypeFull.Float.toUpperCase())return!1}else if(f!==m)return!1}return!0}function xd(e,t,a,n){var i="".concat(e,".").concat(t,".").concat(a);return Ot(i)?Ft(i,n):""}function Ad(e,t,a){return xd("error.statusCode",t,e,a)}function Id(e,t,a){return xd("error.errorCode",t,e,a)}function Pd(e){switch(e.errorCode){case 2e5:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode,{context:e.context})};case 200002:return e.context.DocumentName?{title:Id("title",e.errorCode),content:Id("contentHasName",e.errorCode,{name:e.context.DocumentName,type:Gr.DocumentType[e.context.DocumentType]})}:{title:Id("title",e.errorCode),content:Id("contentNoName",e.errorCode,{type:Gr.DocumentType[e.context.DocumentType]})};case 200201:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode,{name:e.context.DocumentName,type:Gr.DocumentType[e.context.DocumentType]})};case 200101:return{title:Id("title",e.errorCode,{title:e.context.Title}),content:Id("content",e.errorCode)};case 200102:case 200103:case 200104:case 200204:case 200211:case 200225:case 200226:case 200227:case 200228:case 200229:case 200301:case 200302:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode)};case 200212:case 200213:case 200224:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode,{datasetId:e.context.DatasetId,datasetName:e.context.DatasetName})};case 200214:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode,{maxAggDataPoints:e.context.MaxAggDataPoints})};case 200215:case 200216:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode,{property:e.context.Property})};case 200217:case 200218:return{title:Id("title",e.errorCode),content:Id("content",e.errorCode,{parameter:e.context.Parameter,dataType:e.context.DataType})};case 200001:case 200220:case 200221:case 200222:return{title:Id("title",e.errorCode)};case 200223:var t=0===e.context.ContextType?200215:200216;return{title:Id("title",t),content:Id("content",t,{property:e.context.ContextName})};case 300006:return{title:Id("title",200002),content:Id("contentNoName",200002,{type:Gr.DocumentType[e.context.DocType]})};case 54e4:return{title:Id("title",2e5)};case 540001:case 540004:return{title:Id("title",540001)};case 540002:case 540003:return{title:Id("title",540002)};case 540008:return{title:Id("title",540008)};case 540009:return{title:Id("title",540009,{name:e.context.name}),content:Id("content",540009)};case 540010:return{title:Id("title",540010),content:Id("content",540010)};case 600001:return{title:Id("title",600001,{name:e.context})}}switch(e.httpStatusCode){case 401:case 404:case 500:return{title:Ad("title",e.httpStatusCode),content:Ad("content",e.httpStatusCode)};case 403:return{title:Ad("title",e.httpStatusCode),content:Ad("content",e.httpStatusCode,{id:e.context&&e.context.DocumentId})}}return e.title?{title:e.title,content:e.content}:{title:Id("title",2e5),content:""}}var _d=ae.curry(function(o,s){return[function(e){var t=e.name,a=o.getUsedDimensionItems().find(function(e){return e.name===t});return!!a&&!a.invalid},function(e){var t=e.sortBy,a=e.type;if(![H.SortType.Value,H.SortType.Group].includes(a))return!0;if(null!=t&&t.measure){var n=t.measure;return"boolean"==typeof n.invalid?!n.invalid:o.getUsedValueItems().find(function(e){return e.name===n.name&&e.method===n.method})}return!0},function(e){var t=e.manual,a=o.getColumn(s.name),n=o.getDatasetId(),i=d$.datasetManager.getDatasetColumnLookups(n,a.attributeId),r=!a.invalid&&i;return!t||!r||r.length===t.length},function(e){var t,a=e.column,n=e.columnName;return e.type!==H.SortType.Column||(a?!a.invalid:!(null!==(t=o.getColumn(n))&&void 0!==t&&t.invalid))},function(e){var t=e.columnName;return e.type!==H.SortType.Column||Td(o.clone({dim:{values:[{name:s.name}],options:{}}}),fd,t)}].every(function(e){return e(s)})}),Md={order:function(e){return[H.SortOrder.Ascending,H.SortOrder.Descending].includes(e)}},Ld=ae.curry(function(s,t){return[function(e){function t(e){return n.includes(e)}var a=e.along,n=s.getUsedDimensionItems().map(function(e){return e.name});if(a.name===H.AlongType.DIMENSION)return t(a.dimension);if(a.advance){var i=a.advance,r=i.addressing,o=i.partitioning;return r.concat(o).every(function(e){return t(e.name)})}return!0},function(e){var t=e.sortBy;return!s.getPivotSettingItem(Object.assign(Object.assign({},t.measure),{idx:0,valueType:Jr.isCustomMeasureValue(t.measure)?H.AggregationValueType.CustomMeasure:H.AggregationValueType.Value}),"").invalid},function(e){var t=e.sortBy;return Td(s,fd,t.measure.name)}].every(function(e){return e(t)})}),Rd={"rank.range.min":Sd,"rank.range.max":Sd,"rank.rankOrder":function(e){return Object.values(In).includes(e)}},Vd=ae.curry(function(e,t,a){return!!function(t,e,a){if(null==t||null==e)return!1;var n=e.columnNames;if(ae.isEmpty(n))return!1;var i=n.map(function(e){return t.getColumn(e)});return!i.some(function(e){return null==e||e.invalid})&&!(!a&&i.some(function(e){return!Td(t,gd,e.attributeId)}))}(e,t,a)&&tu(e,t)}),Nd=/^-?(\d+)$/,Ed=ae.curry(function(t,a){return ae.all(function(e){return ae.call(t[e],ae.path(ae.split(".",e),a))})(Object.keys(t))}),Fd=function(){function a(e){I()(this,a),this.baseUrl="",this.token="";var t=e[tc];this.token=t,this.baseUrl=ae.dropLastWhile(Hu,e.baseUrl||"")}return D()(a,[{key:"attachBaseUrlAndToken",value:function(e){return Bu(0<arguments.length&&void 0!==e?e:"",this.baseUrl,this.token)}},{key:"hasBaseUrl",value:function(){return!!this.baseUrl}},{key:"getUrl",value:function(){var e=new URL(this.baseUrl||window.location.href),t=e.origin,a=e.pathname,n=a.endsWith("/")?a:"".concat(a,"/");return"".concat(t).concat(n)}}]),a}(),Od=a(66),Hd=a(20),Bd=a.n(Hd),Ud=a(25),zd=a.n(Ud);ed.config({warnings:!1,longStackTraces:!1,cancellation:!0,monitoring:!1});function Kd(e){return e}function jd(e){return"function"==typeof e}var Wd={credentials:"same-origin",headers:{"Content-type":"application/json",Accept:"application/json"}},Gd=function(){function l(e){I()(this,l),this.errorHandler=null,this.pendingTasks=[],this.name=e.name,this.url=e.url,this.method=e.method||"get",this.headers=e.headers,this.preFetch=e.preFetch,this.beforeRequest=e.beforeRequest||Kd,this.convertResponse=e.convertResponse,this.parseResponse=e.parseResponse,this.mergePending=e.mergePending||!1,"boolean"==typeof e.checkIsKeyHit?this.checkIsKeyHit=function(){return!!e.checkIsKeyHit}:jd(e.checkIsKeyHit)&&(this.checkIsKeyHit=e.checkIsKeyHit)}return D()(l,[{key:"_makeFetchArgs",value:function(e){var t=this.url,a=Object.assign(Object.assign({},Wd),{method:this.method});if(e.pathParams&&(t=Object(Ho.template)(t,{interpolate:/\{\{(.+?)\}\}/g})(e.pathParams)),e.data&&(a.body=JSON.stringify(e.data)),e.params){var n=Object.entries(e.params).reduce(function(e,t){return e.push("".concat(t[0],"=").concat(t[1])),e},[]).join("&");t=-1<t.indexOf("?")?"".concat(t,"&").concat(n):"".concat(t,"?").concat(n)}return this.headers&&(a.headers=Object.assign(Object.assign({},a.headers),this.headers)),{config:a,url:t}}},{key:"_makeHttpError",value:function(e,t,a,n){var i,r;return new zd.a({type:null!==(i=this.name)&&void 0!==i?i:"",stateCode:a,errorCode:null==e?void 0:e.errorCode,msg:null!==(r=null==e?void 0:e.errorMessage)&&void 0!==r?r:"",errors:null==e?void 0:e.errors,context:null==e?void 0:e.context,config:t,id:n})}},{key:"_processError",value:function(e){this.errorHandler&&(this.errorHandler(e),e.done=!0)}},{key:"_getPreFetchPromise",value:function(t){var a=this,e=t.pathParams&&t.pathParams.id,n=l.getPreFetchResult(e);return n?n.then(function(e){return 200===e.status?e:a._fetchData(t)}).catch(function(){return a._fetchData(t)}):this._fetchData(t)}},{key:"_fetchData",value:function(e){var t=this._makeFetchArgs(e),a=t.url,n=t.config,i=l.globalConfig,r=i.baseUrl,o=i.token,s=Bu(a,r,o);return window.fetch(s,n)}},{key:"_getFetchPromise",value:function(e){return this.preFetch?this._getPreFetchPromise(e):this._fetchData(e)}},{key:"_request",value:function(t){var r,a,o=this,s=t.paramsConfig,l=t.qList;this._getFetchPromise(s).then(function(e){return r=e.status,a=e.ok,o.parseResponse?o.parseResponse(e):e.json()}).then(function(e){var n=e;if(zd.a.validate(n)&&a)jd(o.convertResponse)&&(n=o.convertResponse(s,n)),l.forEach(function(e){return e.resolve(n)});else{var i=Bd.a.v1();l.forEach(function(e,t){var a=o._makeHttpError(n,s,r,i);o._processError(a),0!==t&&(a.done=!0),e.reject(a)})}o._removeTaskInPending(t)}).catch(function(a){o._processError(a);var n=Bd.a.v1();l.forEach(function(e,t){0!==t&&(a.done=!0),200===r?(a.id=n,e.reject(a)):e.reject(o._makeHttpError(null,s,r,n))}),o._removeTaskInPending(t)})}},{key:"fetch",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},a={params:t.params,data:t.body||"",pathParams:t.pathParams};return this.beforeRequest(a),this._processFetchRequest(a)}},{key:"_processFetchRequest",value:function(e){var t=this._getSameTaskInPending(e),a={resolve:null,reject:null,q:null},n=new ed.Promise(function(e,t){a.resolve=e,a.reject=t});if(a.q=n,t)t.qList.push(a);else{var i={paramsConfig:e,qList:[a]};this.pendingTasks.push(i),this._request(i)}return n}},{key:"_removeTaskInPending",value:function(e){var t=this.pendingTasks.indexOf(e);-1!==t&&this.pendingTasks.splice(t,1)}},{key:"checkIsKeyHit",value:function(e,t){return e===t}},{key:"_getSameTaskInPending",value:function(e){if(!this.mergePending)return null;for(var t=this.pendingTasks,a=0,n=t.length;a<n;a++){var i=t[a];if(this.checkIsKeyHit(e,i.paramsConfig))return i}return null}},{key:"onError",value:function(e){jd(e)&&(this.errorHandler=e)}},{key:"destroy",value:function(){this.pendingTasks.forEach(function(e){e.qList.forEach(function(e){e.q.cancel()})})}}]),l}();Gd.globalConfig={},Gd.getPreFetchResult=function(e){var t=d$._legacyWynbi.preFetch;if(t){var a=t[e];if(a)return t[e]=void 0,a}},Gd.setGlobalConfig=function(e){var t=e.baseUrl,a=void 0===t?"":t,n=e.token,i=void 0===n?"":n;Gd.globalConfig.baseUrl=a,Gd.globalConfig.token=i};var Yd=function(){function T(e){var t,a,n,i,r,o,s,l,u=1<arguments.length&&void 0!==arguments[1]&&arguments[1];I()(this,T),this.setting={disableAnimation:!1,disableAutoScroll:!1,disableAutoSwitchPage:!1,webContentStoreLink:"https://www.grapecity.com.cn/solutions/wyn/plugin?utm_source=exe&utm_medium=wyn&utm_term=wyn&utm_content=linktoplugin",dp:null,toolbar:"show",hideErrors:!1,pageDisplayMode:null,lng:"",defaultLng:"",theme:"",commonQuery:"",token:"",baseUrl:"",templateId:"",datasetId:"",sandboxURL:"dashboards/visualSandbox",allQueries:{},enableAmap:!1,amapToken:"",pageNumber:"0",enableDeveloperMode:!1,clickAction:"",contextMenuActions:"",dashboardId:"",version:"",containerFilterScope:"",userId:"",edition:"",disableIframe:!0,scenario:"",actions:"",openfulldashboardmode:"",parentDashboardIds:[],__notNeedFetchConfig:!1,__isBuildInApp:!1,__isMobile:void 0,hideNav:!1,static:!1,inSingleScenarioMode:!1,preloadFonts:!1,viewerLitePath:"",hiddenToolbarActions:[],showWizard:!1,enableDraft:!1,disableNotification:!1,suspendAutoSave:!1,readonly:!1,notificationTime:4e3,allowPublishOnSave:!1,showInspectorWhenOpen:!0,showMobileDesigner:!0,showPanelWhenOpen:!1,showHelp:!0,availableComponents:{showCharts:!0,showVisual:!0,showComponent:!0,showSlicer:!0,showGallery:!0,showWizard:!0},hasCreateDataMonitorLicense:!0,visualMarketURL:"",isInTrial:!0,customLngResource:null},this.state={pauseAutoSwitch:!1};var c=e.dp;if(c)try{this.setting.dp=JSON.parse(decodeURIComponent(c))}catch(e){}switch(null===(t=e.size)||void 0===t?void 0:t.toLowerCase()){case"fittoheight":case"fitheight":this.setting.pageDisplayMode=H.PageDisplayMode.FitToHeight;break;case"fittowidth":case"fitwidth":this.setting.pageDisplayMode=H.PageDisplayMode.FitToWidth;break;case"fittoscreen":case"fitscreen":this.setting.pageDisplayMode=H.PageDisplayMode.FitToScreen;break;case"auto":this.setting.pageDisplayMode=H.PageDisplayMode.Auto}var d=e.pageNumber;""===d||isNaN(+d)||(this.setting.pageNumber=d);var p=null===(a=e.toolbar)||void 0===a?void 0:a.toLowerCase();if(this.setting.toolbar=p,this.setting.hideErrors=e.hideErrors||!1,this.setting.lng=e.lng,this.setting.defaultLng=e.defaultLng,this.setting.theme=(null===(n=e.theme)||void 0===n?void 0:n.toLowerCase())||e.defaultTheme||"default",this.setting.baseUrl=e.baseUrl,this.setting.token=e.token,Gd.setGlobalConfig({baseUrl:e.baseUrl,token:e.token}),this.setting.templateId=e.templateId,this.setting.datasetId=e.datasetId,this.setting.scenario=null===(i=e.scenario)||void 0===i?void 0:i.replace(/\+/g," "),this.setting.actions=null===(r=e.actions)||void 0===r?void 0:r.toLowerCase(),this.setting.openfulldashboardmode=null===(o=e.openfulldashboardmode)||void 0===o?void 0:o.toLowerCase(),this.setting.commonQuery=this.getCommonQueryString(),this.setting.allQueries={token:e.token,theme:e.theme,lng:e.lng},this.setting.edition=e.edition,this.setting.enableAmap="ZH"===e.edition,this.setting.enableDeveloperMode=!!e.enableDeveloperMode,this.setting.enableDraft=!!e.enableDraft,this.setting.clickAction=null!==(s=e.clickAction)&&void 0!==s?s:H.InteractionMouseEventAction.None,this.setting.contextMenuActions=e.contextMenuActions?JSON.parse(e.contextMenuActions.replace(/&quot;/g,'"')):[H.InteractionMouseEventAction.Keep,H.InteractionMouseEventAction.Exclude,H.InteractionMouseEventAction.DrillTo,H.InteractionMouseEventAction.JumpTo,H.InteractionMouseEventAction.AddMonitor],this.setting.version=e.version||"",this.setting.containerFilterScope=e.containerFilterScope,this.setting.userId=e.userId||"anonymous",this.setting.hasCreateDataMonitorLicense=e.hasCreateDataMonitorLicense,this.setting.visualMarketURL=e.visualMarketURL,this.setting.customLngResource=e.customLngResource,this.setting.dashboardId=e.dashboardId||"",this.setting.parentDashboardIds=e.parentDashboardIds,this.setting.__notNeedFetchConfig=e.__notNeedFetchConfig,this.setting.__isBuildInApp=e.__isBuildInApp,this.setting.disableAnimation=e.disableAnimation||e.static||!1,this.setting.disableAutoScroll=e.disableAutoScroll||e.static||!1,this.setting.disableAutoSwitchPage=e.disableAutoSwitchPage||e.static||!1,this.setting.disableNotification=e.hideErrors||e.disableNotification||e.static||!1,this.setting.hideNav=e.__hideNav||!!e.static,this.setting.static=!!e.static,e.hiddenToolbarActions&&("string"==typeof e.hiddenToolbarActions?this.setting.hiddenToolbarActions=e.hiddenToolbarActions.split(","):this.setting.hiddenToolbarActions=e.hiddenToolbarActions),u&&this.setting.scenario&&(this.setting.inSingleScenarioMode=!0,this.setting.toolbar="hide"),this.setting.preloadFonts=!!e.preloadFonts,this.setting.viewerLitePath="".concat(null===(l=e.baseUrl)||void 0===l?void 0:l.replace(/\/$/,""),"/api/PluginAssets/dashboards-").concat(e.version),this.setting.showWizard=e.showWizard,this.setting.readonly=!!e.readonly,this.setting.readonly&&(this.setting.suspendAutoSave=!0),void 0!==e.notificationTime&&(this.setting.notificationTime=e.notificationTime),void 0!==e.showMobileDesigner&&(this.setting.showMobileDesigner=e.showMobileDesigner),void 0!==e.showPanelWhenOpen&&(this.setting.showPanelWhenOpen=e.showPanelWhenOpen),void 0!==e.showHelp&&(this.setting.showHelp=e.showHelp),void 0!==e.showHelp&&(this.setting.showInspectorWhenOpen=e.showInspectorWhenOpen),void 0!==e.availableComponents){var h=e.availableComponents;"string"==typeof h&&(h=h.replace(/&quot;/g,'"'));var y=-1!==h.indexOf(H.AvailableComponents.Charts),g=-1!==h.indexOf(H.AvailableComponents.Visual),m=-1!==h.indexOf(H.AvailableComponents.Component),f=-1!==h.indexOf(H.AvailableComponents.Slicers),v=-1!==h.indexOf(H.AvailableComponents.Gallery),b=-1!==h.indexOf(H.AvailableComponents.Wizard);this.setting.availableComponents={showCharts:y,showVisual:g,showComponent:m,showSlicer:f,showGallery:v,showWizard:b}}var C="boolean"==typeof e.isTrial&&!e.isTrial;this.setting.isInTrial=!C}return D()(T,[{key:"getCommonQueryString",value:function(){var n=this;return T.commonQueryKeys.reduce(function(e,t){var a=n.get(t);return a&&e.push("".concat(t,"=").concat(a)),e},[]).join("&")}},{key:"getInitConfig",value:function(){var e,a=this;return(e=["lng","defaultLng","theme","token","baseUrl","userId","version","edition","containerFilterScope","disableIframe","__notNeedFetchConfig","viewerLitePath","hideErrors","hasCreateDataMonitorLicense","customLngResource"]).concat.apply(e,R()(T.autoEffectProps)).reduce(function(e,t){return void 0!==a.setting[t]&&(e[t]=a.setting[t]),e},{isTrial:!1})}},{key:"get",value:function(e){return this.setting[e]}},{key:"set",value:function(e,t){this.setting[e]=t}},{key:"getState",value:function(e){return this.state[e]}},{key:"setState",value:function(e,t){this.state[e]=t}},{key:"getLng",value:function(){return this.setting.lng||this.setting.defaultLng}},{key:"disableAutoEffect",value:function(t){var a=this;T.autoEffectProps.forEach(function(e){return a.set(e,t)})}},{key:"getThemeName",value:function(e){var t=0<arguments.length&&void 0!==e?e:"",a=this.get("theme");return["ars","blue","dark-forest","default","forest","green","red","warm-light","light","minimal-blue"].includes(a)||(a=t),a}},{key:"getThemeClass",value:function(){var e=this.getThemeName("custom");return"theme-".concat(e)}},{key:"suspendAutoSave",value:function(){this.setting.suspendAutoSave=!0}},{key:"resumeAutoSave",value:function(){this.setting.readonly||(this.setting.suspendAutoSave=!1)}},{key:"setUserInfo",value:function(e){var t=Object(Od.isApprover)(e.tenantId,e.roles);this.setting.allowPublishOnSave=t&&this.get("enableDraft")}}]),T}();Yd.autoEffectProps=["disableAnimation","disableAutoScroll","disableAutoSwitchPage"],Yd.commonQueryKeys=["token","baseUrl","theme","lng","scenario","actions","openfulldashboardmode","hideErrors"];function qd(){var a=this;I()(this,qd),this.emitter=new m.EventEmitter,this.subscribe=function(e,t){a.emitter.on(e.toString(),t)},this.deSubscribe=function(e,t){a.emitter.off(e.toString(),t)},this.unsubscribe=function(e,t){a.emitter.off(e.toString(),t)},this.inform=function(e,t){a.emitter.emit(e.toString(),t)},this.destroy=function(){a.emitter.removeAllListeners()},this.emitter.setMaxListeners(0)}var Jd=a(37),Xd=function(){function t(e){I()(this,t),this.connection=e}return D()(t,[{key:"register",value:function(e,t){this.connection.send("RegisterDatasetRefresh",e),this.connection.on("DatasetRefreshMessage",t)}}]),t}(),Qd=function(){function a(e){var t=this;I()(this,a),this.started=!1,this.registerAll=function(){t.datasetRefresh.register(t.config.datasetRefresh.ids,t.config.datasetRefresh.onRefresh)},this.connection=(new Jd.HubConnectionBuilder).configureLogging(Jd.LogLevel.Error).withUrl(e.attachBaseUrlAndToken("dashboardsHub"),{transport:Jd.HttpTransportType.WebSockets,skipNegotiation:!0}).withAutomaticReconnect().build(),this.connection.onreconnected(this.registerAll),this.datasetRefresh=new Xd(this.connection)}return D()(a,[{key:"connect",value:function(){this.started=!0,this.connection.start().then(this.registerAll,function(){})}},{key:"init",value:function(e){var t=this;this.config=e,this.started?this.connection.stop().then(function(){t.connect()},function(){}):this.connect()}},{key:"destroy",value:function(){var e=this;if(this.started)try{this.connection.stop().then(function(){e.started=!1,e.connection=null},function(){})}catch(e){}this.config=null}}]),a}(),Zd=function(){function e(){I()(this,e),this._topic=new m.EventEmitter}return D()(e,[{key:"on",value:function(e,t){this._topic.addListener(e,t)}},{key:"once",value:function(e,t){this._topic.once(e,t)}},{key:"off",value:function(e,t){this._topic.removeListener(e,t)}},{key:"emit",value:function(e){for(var t,a=arguments.length,n=new Array(1<a?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];(t=this._topic).emit.apply(t,[e].concat(n))}},{key:"destroy",value:function(){this._topic.removeAllListeners()}}]),e}(),$d=a(41),ep=function(){function t(e){I()(this,t),this.started=!1,this.configManager=e}return D()(t,[{key:"shouldStart",value:function(){var e=this.configManager.get("edition");return!(this.started||"ZH"!==e||window.Portal||window.ResourcePortal)}},{key:"run",value:function(){var a=this;if(this.shouldStart()){var e={},t=this.configManager.get("baseUrl"),n=this.configManager.get("token");t&&(e.url=t),n&&(e.token=n),this.timerId=Object($d.startHeartbeat)(e,function(e){var t;null!==(t=a.onEveryHeartBeat)&&void 0!==t&&t.call(a,e)}),this.started=!0}}},{key:"setOnEveryHeartBeat",value:function(e){this.onEveryHeartBeat=e}},{key:"stop",value:function(){this.started&&(Object($d.endHeartbeat)(this.timerId),this.started=!1)}},{key:"destroy",value:function(){this.stop(),this.onEveryHeartBeat=null}}]),t}(),tp=function(){function e(t){I()(this,e),this.namespace="wyn-dashboard-ns-".concat(Date.now()),this.cleanUpTasks=[],this.cleanUpTasks.push(function(){Object.keys(t.__webpack_require__.c).forEach(function(e){return delete t.__webpack_require__.c[e]}),Object.keys(t.__webpack_require__.m).forEach(function(e){return delete t.__webpack_require__.c[e]}),t.__webpack_require__=null})}return D()(e,[{key:"registerCleanUpTask",value:function(e){this.cleanUpTasks.push(e)}},{key:"doCleanUp",value:function(){this.cleanUpTasks.forEach(function(e){return e()}),this.cleanUpTasks=[]}},{key:"destroy",value:function(){this.doCleanUp()}}]),e}();if(!d$){var ap=new(function(){function a(e){I()(this,a),this._legacyWynbi={},this._parameters=[],this._applicationEmitter=null,this.appEventHub=new Zd;var t=e.config;this.globalConfigManager=new Yd(t,e.isViewer),this.accessService=new Fd(t),this._legacyWynbi.preFetch=t.prefetch,this._legacyWynbi.reduxDocData=e.reduxDocPath,this._legacyWynbi.scenarioOthersCacheMap={},this._legacyWynbi.serverFontList=[],this.visiblePageType=H.PageType.ActivePage,e.config.__isBuildInApp||(this.wsEventSource=new Qd(this.accessService),this.heartbeatManager=new ep(this.globalConfigManager),this.heartbeatManager.run()),this.informManager=new qd,this.applicationManager=new tp(e)}return D()(a,[{key:"setDatasetManager",value:function(e){this.datasetManager=e}},{key:"setCommandService",value:function(e){this.commandService=e}},{key:"setHttpResourceManager",value:function(e){this.httpResourceManager=e}},{key:"setDataProviderManagerCache",value:function(e){this.dataProviderManagerCache=e}},{key:"setDashboardManager",value:function(e){this.dashboardManager=e}},{key:"setDefinitionManager",value:function(e){this.definitionManager=e}},{key:"setDashboardVariableManager",value:function(e){this.dashboardVariableManager=e}},{key:"setEmbeddedDashboardManager",value:function(e){this.embeddedDashboardManager=e}},{key:"setEmbeddedReportManager",value:function(e){this.embeddedReportManager=e}},{key:"setExportManager",value:function(e){this.exportManager=e}},{key:"setUIDelegatorManager",value:function(t){var e;this.uiDelegatorManager=t,null!==(e=this.heartbeatManager)&&void 0!==e&&e.setOnEveryHeartBeat(function(e){t.checkMarker(e)})}},{key:"setMessageHost",value:function(e){this.messageHost=e}},{key:"setReduxProxy",value:function(e){this.reduxProxy=e}},{key:"setAMapLoader",value:function(e){this.amapLoader=e}},{key:"setColorAssignmentManager",value:function(e){this.colorAssignmentManager=e}},{key:"setScenarioHistoryManager",value:function(e){this.scenarioHistoryManager=e}},{key:"setSortContainerManager",value:function(e){this.sortContainerManager=e}},{key:"setParameterManager",value:function(e){this.parameterManager=e}},{key:"setShareResourceManger",value:function(e){this.shareResourceManager=e}},{key:"setCustomAttributeManager",value:function(e){this.customAttributeManager=e}},{key:"setCacheManager",value:function(e){this.cacheManager=e}},{key:"init",value:function(){var t=this;this.httpResourceManager.get("DatasetSchema").onError(function(e){return t.uiDelegatorManager.notificationDelegator.showError(e)})}},{key:"setParameters",value:function(e){this._parameters=e}},{key:"getParameters",value:function(){return this._parameters}},{key:"getApplicationEmitter",value:function(){return this._applicationEmitter||(this._applicationEmitter=new m.EventEmitter,this._applicationEmitter.setMaxListeners(0)),this._applicationEmitter}},{key:"setReduxStore",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t;this.reduxProxy.setStore(e),this.reduxProxy.isLite=a}},{key:"getDatasetSchema",value:function(e){return this.httpResourceManager.getData("DatasetSchema",e)}},{key:"destroy",value:function(e){var t,a,n,i,r;this.applicationManager.destroy(),this.reduxProxy.destroy(),null!==(t=this.heartbeatManager)&&void 0!==t&&t.destroy(),this.commandService.destroy(),this.httpResourceManager.destroy(e),this.dashboardManager.destroy(),this.definitionManager.destroy(e),this.messageHost.destroy(),this.appEventHub.destroy(),null!==(a=this._applicationEmitter)&&void 0!==a&&a.removeAllListeners(),null!==(n=this.scenarioHistoryManager)&&void 0!==n&&n.destroy(),null!==(i=this.wsEventSource)&&void 0!==i&&i.destroy(),this.dashboardVariableManager.destroy(),this.embeddedDashboardManager.destroy(),this.embeddedReportManager.destroy(),this.exportManager.destroy(),this.informManager.destroy(),this.uiDelegatorManager.destroy(e),this.cacheManager.destroy(),null!==(r=this.shareResourceManager)&&void 0!==r&&r.destroy(),this.parameterManager.destroy(e),this.reduxProxy=null,this.heartbeatManager=null,this.commandService=null,this.httpResourceManager=null,this.dashboardManager=null,this.definitionManager=null,this.messageHost=null,this.appEventHub=null,this._applicationEmitter=null,this.scenarioHistoryManager=null,this.wsEventSource=null,this.dashboardVariableManager=null,this.embeddedDashboardManager=null,this.embeddedReportManager=null,this.exportManager=null,this.informManager=null,this.uiDelegatorManager=null,this.cacheManager=null,this.shareResourceManager=null,this.accessService=null,this.datasetManager=null,this.globalConfigManager=null,this.dataProviderManagerCache=null,this.amapLoader=null,this._legacyWynbi=null,this.colorAssignmentManager=null,this.sortContainerManager=null,this.parameterManager=null,this.resourceManager=null,this._parameters=null,this.applicationManager=null}}]),a}())(p$);0,d$=ap}function np(){for(var n=arguments,i=[],e=function(e){var t=e<0||n.length<=e?void 0:n[e],a=E()(t);if(!t)return"continue";"string"===a||"number"===a?i.push("".concat(t)):Array.isArray(t)&&t.length?i.push(np(t)):"object"===a&&Object.keys(t).forEach(function(e){return t[e]&&i.push(e)})},t=0;t<arguments.length;t++)e(t);return i.join(" ")}function ip(t,a){t&&t.style&&Object.keys(a).forEach(function(e){void 0!==a[e]&&(null===a[e]?t.style[e]="":"string"==typeof a[e]?t.style[e]=a[e]:up.includes(e.toLowerCase())?t.style[e]="".concat(a[e]):t.style[e]="".concat(a[e],"px"))})}function rp(a,n){a&&n&&Object.keys(n).forEach(function(e){if(void 0!==n[e]){var t=n[e];a.setAttribute(e,"".concat(t))}})}function op(e){return gp(e.id)}function sp(){return"undefined"!=typeof window&&window.chrome?16777100:15e5}var lp,up=["animationiterationcount","boxflex","boxflexgroup","boxordinalgroup","columncount","fillopacity","flex","flexgrow","flexpositive","flexshrink","flexnegative","flexorder","gridrow","gridcolumn","fontweight","lineclamp","lineheight","opacity","order","orphans","stopopacity","strokedashoffset","strokeopacity","strokewidth","tabsize","widows","zindex","zoom"],cp=a(28),dp=a.n(cp),pp=(lp="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||lp.webkitRequestAnimationFrame||lp.mozRequestAnimationFrame||lp.oRequestAnimationFrame||lp.msRequestAnimationFrame||function(e){return lp.setTimeout(e,1e3/60)},hp=lp.cancelAnimationFrame||lp.webkitCancelAnimationFrame||lp.mozCancelAnimationFrame||lp.oCancelAnimationFrame||lp.msCancelAnimationFrame||function(e){lp.clearTimeout(e)},yp=pp,gp=hp,mp=function(){function i(e){var t=e.cellCount,a=e.cellSizeGetter,n=e.estimatedCellSize;I()(this,i),this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1,this._lastBatchedIndex=-1,this._cellSizeGetter=a,this._cellCount=t,this._estimatedCellSize=n}return D()(i,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,a=e.estimatedCellSize,n=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=a,this._cellSizeGetter=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),a=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var i=this._cellSizeGetter({index:n});if(void 0===i||isNaN(i))throw Error("Invalid size returned for cell ".concat(n," of value ").concat(i));null===i?(this._cellSizeAndPositionData[n]={offset:a,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[n]={offset:a,size:i},a+=i,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,a=void 0===t?"auto":t,n=e.containerSize,i=e.currentOffset,r=e.targetIndex;if(n<=0)return 0;var o,s=this.getSizeAndPositionOfCell(r),l=s.offset,u=l-n+s.size;switch(a){case"start":o=l;break;case"end":o=u;break;case"center":o=l-(n-s.size)/2;break;default:o=Math.max(u,Math.min(l,i))}var c=this.getTotalSize();return Math.max(0,Math.min(c-n,o))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,a=e.offset;if(0===this.getTotalSize())return{};var n=a+t,i=this._findNearestCell(a),r=this.getSizeAndPositionOfCell(i);a=r.offset+r.size;for(var o=i;a<n&&o<this._cellCount-1;)o++,a+=this.getSizeAndPositionOfCell(o).size;return{start:i,stop:o}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,a){for(var n=e,i=t;i<=n;){var r=i+Math.floor((n-i)/2),o=this.getSizeAndPositionOfCell(r).offset;if(o===a)return r;o<a?i=r+1:a<o&&(n=r-1)}return 0<i?i-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var a=1,n=e;n<this._cellCount&&this.getSizeAndPositionOfCell(n).offset<t;)n+=a,a*=2;return this._binarySearch(Math.min(n,this._cellCount-1),Math.floor(n/2),t)}},{key:"_findNearestCell",value:function(e){var t=e;if(isNaN(t))throw Error("Invalid offset ".concat(t," specified"));t=Math.max(0,t);var a=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return a.offset>=t?this._binarySearch(n,0,t):this._exponentialSearch(n,t)}}]),i}(),fp=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},vp=function(){function i(e){I()(this,i);var t=e.maxScrollSize,a=void 0===t?sp():t,n=fp(e,["maxScrollSize"]);this._cellSizeAndPositionManager=new mp(n),this._maxScrollSize=a}return D()(i,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,a=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize(),r=this._getOffsetPercentage({containerSize:t,offset:a,totalSize:i});return Math.round(r*(i-n))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,a=void 0===t?"auto":t,n=e.containerSize,i=e.currentOffset,r=e.targetIndex,o=this._safeOffsetToOffset({containerSize:n,offset:i}),s=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:a,containerSize:n,currentOffset:o,targetIndex:r});return this._offsetToSafeOffset({containerSize:n,offset:s})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,a=e.offset,n=this._safeOffsetToOffset({containerSize:t,offset:a});return this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,a=e.offset,n=e.totalSize;return n<=t?0:a/(n-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,a=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(n===i)return a;var r=this._getOffsetPercentage({containerSize:t,offset:a,totalSize:n});return Math.round(r*(i-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,a=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(n===i)return a;var r=this._getOffsetPercentage({containerSize:t,offset:a,totalSize:i});return Math.round(r*(n-t))}}]),i}();function bp(e){var o=!(0<arguments.length&&void 0!==e)||e,s={};return function(e){var t=e.callback,n=e.indices,a=Object.keys(n),i=!o||a.every(function(e){var t=n[e];return Array.isArray(t)?0<t.length:0<=t}),r=a.length!==Object.keys(s).length||a.some(function(e){var t=s[e],a=n[e];return Array.isArray(a)?t.join(",")!==a.join(","):t!==a});s=n,i&&r&&t&&t(n)}}var Cp="requested",Tp=function(){function d(e,t){var v=this;I()(this,d),this.state={},this._onGridRenderedMemoizer=bp(),this._onScrollMemoizer=bp(!1),this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this._recomputeScrollLeftFlag=!1,this._recomputeScrollTopFlag=!1,this._horizontalScrollBarSize=0,this._verticalScrollBarSize=0,this._scrollbarPresenceChanged=!1,this._renderedColumnStartIndex=0,this._renderedColumnStopIndex=0,this._renderedRowStartIndex=0,this._renderedRowStopIndex=0,this._styleCache={},this._cellCache={},this.setState=function(e,t){var a=ae.mergeRight(v.state,e),n=v.shouldComponentUpdate(a);v.state=a,requestAnimationFrame(function(){n&&v.render(),"function"==typeof t&&t()})},this.setStateByFn=function(e,t){var a=e(v.state),n=v.shouldComponentUpdate(a);v.state=a,requestAnimationFrame(function(){n&&v.render(),"function"==typeof t&&t()})},this.forceUpdate=function(){v.render()},this.componentDidMount=function(){var e=v.props,a=e.getScrollbarSize,t=e.height,n=e.scrollLeft,i=e.scrollToColumn,r=e.scrollTop,o=e.scrollToRow,s=e.width,l=v.state.instanceProps;if(v._perfectScrollBar=new dp.a(v._scrollingContainer,{minScrollbarLength:30}),v._initialScrollTop=0,v._initialScrollLeft=0,v._handleInvalidatedGridSize(),l.scrollbarSizeMeasured||v.setStateByFn(function(e){var t=Object.assign(Object.assign({},e),{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=a(),t.instanceProps.scrollbarSizeMeasured=!0,t}),"number"==typeof n&&0<=n||"number"==typeof r&&0<=r){var u=d._getScrollToPositionStateUpdate({prevState:v.state,scrollLeft:n,scrollTop:r});u&&(u.needToResetStyleCache=!1,v.setState(u))}v._scrollingContainer&&(v._scrollingContainer.scrollLeft!==v.state.scrollLeft&&(v._scrollingContainer.scrollLeft=v.state.scrollLeft),v._scrollingContainer.scrollTop!==v.state.scrollTop&&(v._scrollingContainer.scrollTop=v.state.scrollTop));var c=0<t&&0<s;0<=i&&c&&v._updateScrollLeftForScrollToColumn(),0<=o&&c&&v._updateScrollTopForScrollToRow(),v._invokeOnGridRenderedHelper(),v._invokeOnScrollMemoizer({scrollLeft:n||0,scrollTop:r||0,totalColumnsWidth:l.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:l.rowSizeAndPositionManager.getTotalSize()}),v._maybeCallOnScrollbarPresenceChange()},this.componentWillUnmount=function(){v._disablePointerEventsTimeoutId&&op(v._disablePointerEventsTimeoutId)},this.shouldComponentUpdate=function(e){return!Ho.isEqual(e,v.state)},this.render=function(){var e=v.props,t=e.autoContainerWidth,a=e.autoHeight,n=e.autoWidth,i=e.containerStyle,r=e.height,o=e.style,s=e.width,l=v.state,u=l.instanceProps,c=l.needToResetStyleCache,d=v._isScrolling(),p={boxSizing:"border-box",direction:"ltr",height:a?"auto":r,position:"relative",width:n?"auto":s};c&&(v._styleCache={}),v.state.isScrolling||v._resetStyleCache(),v._calculateChildrenToRender(v.props,v.state);var h=u.columnSizeAndPositionManager.getTotalSize(),y=u.rowSizeAndPositionManager.getTotalSize(),g=r<y?u.scrollbarSize:0,m=s<h?u.scrollbarSize:0;m===v._horizontalScrollBarSize&&g===v._verticalScrollBarSize||(v._horizontalScrollBarSize=m,v._verticalScrollBarSize=g,v._scrollbarPresenceChanged=!0),p.overflowX=h+g<=s?"hidden":"auto",p.overflowY=y+m<=r?"hidden":"auto";var f=v._childrenToDisplay;ip(v._scrollingContainer,Object.assign(Object.assign({},p),o)),0!==f.length?(v._scrollingContent.innerHTML="",v._scrollingContainer.contains(v._scrollingContent)||v._scrollingContainer.appendChild(v._scrollingContent),ip(v._scrollingContent,Object.assign({width:t?"auto":h,height:y,maxWidth:h,maxHeight:y,overflow:"hidden",pointerEvents:d?"none":"",position:"relative"},i)),f.forEach(function(e){return v._scrollingContent.appendChild(e)})):v._scrollingContainer.hasChildNodes()&&v._scrollingContent.remove()},this._debounceScrollEndedCallback=function(){v._disablePointerEventsTimeoutId=null,v.setState({isScrolling:!1,needToResetStyleCache:!1})},this._invokeOnGridRenderedHelper=function(){var e=v.props.onSectionRendered;v._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:v._columnStartIndex,columnOverscanStopIndex:v._columnStopIndex,columnStartIndex:v._renderedColumnStartIndex,columnStopIndex:v._renderedColumnStopIndex,rowOverscanStartIndex:v._rowStartIndex,rowOverscanStopIndex:v._rowStopIndex,rowStartIndex:v._renderedRowStartIndex,rowStopIndex:v._renderedRowStopIndex}})},this._onScroll=function(e){e.target===v._scrollingContainer&&v.handleScrollEvent(e.target)},this._parentContainer=e,this.props=ae.mergeRight(d.defaultProps,t);var a=new vp({cellCount:t.columnCount,cellSizeGetter:function(e){return d._wrapSizeGetter(t.columnWidth)(e)},estimatedCellSize:d._getEstimatedColumnSize(t)}),n=new vp({cellCount:t.rowCount,cellSizeGetter:function(e){return d._wrapSizeGetter(t.rowHeight)(e)},estimatedCellSize:d._getEstimatedRowSize(t)});this.state={instanceProps:{columnSizeAndPositionManager:a,rowSizeAndPositionManager:n,prevColumnWidth:t.columnWidth,prevRowHeight:t.rowHeight,prevColumnCount:t.columnCount,prevRowCount:t.rowCount,prevIsScrolling:!0===t.isScrolling,prevScrollToColumn:t.scrollToColumn,prevScrollToRow:t.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<t.scrollToRow&&(this._initialScrollTop=this._getCalculatedScrollTop(t,this.state)),0<t.scrollToColumn&&(this._initialScrollLeft=this._getCalculatedScrollLeft(t,this.state)),this.initDom(),this.render(),this.componentDidMount()}return D()(d,[{key:"initDom",value:function(){var e=this.props,t=e.role,a=e.containerRole,n=e.className,i=e.id,r=e.style,o=e.containerStyle;this._scrollingContainer=document.createElement("div"),this._scrollingContainer.addEventListener("scroll",this._onScroll);var s=Object.assign({},r),l={"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],class:np("ReactVirtualized__Grid",n),id:i,role:t};rp(this._scrollingContainer,l),ip(this._scrollingContainer,s),this._scrollingContent=document.createElement("div");var u=Object.assign({},o),c={role:a};rp(this._scrollingContent,c),ip(this._scrollingContent,u),this._parentContainer.appendChild(this._scrollingContainer)}},{key:"destroy",value:function(){this.componentWillUnmount(),this._scrollingContainer.removeEventListener("scroll",this._onScroll),this._perfectScrollBar.destroy(),this._parentContainer.hasChildNodes()&&this._parentContainer.removeChild(this._scrollingContainer)}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,a=void 0===t?0:t,n=e.scrollTop,i=void 0===n?0:n;if(!(i<0)){this._debounceScrollEnded();var r=this.props,o=r.autoHeight,s=r.autoWidth,l=r.height,u=r.width,c=this.state.instanceProps,d=c.scrollbarSize,p=c.rowSizeAndPositionManager.getTotalSize(),h=c.columnSizeAndPositionManager.getTotalSize(),y=Math.min(Math.max(0,h-u+d),a),g=Math.min(Math.max(0,p-l+d),i);if(this.state.scrollLeft!==y||this.state.scrollTop!==g){var m={isScrolling:!0,scrollDirectionHorizontal:y!==this.state.scrollLeft?y>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:g!==this.state.scrollTop?g>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};o||(m.scrollTop=g),s||(m.scrollLeft=y),m.needToResetStyleCache=!1,this.setState(m)}this._invokeOnScrollMemoizer({scrollLeft:y,scrollTop:g,totalColumnsWidth:h,totalRowsHeight:p})}}},{key:"recomputeGridSize",value:function(e){var t=0<arguments.length&&void 0!==e?e:{columnIndex:0,rowIndex:0},a=t.columnIndex,n=t.rowIndex,i=this.props,r=i.scrollToColumn,o=i.scrollToRow,s=this.state.instanceProps;s.columnSizeAndPositionManager.resetCell(a),s.rowSizeAndPositionManager.resetCell(n),this._recomputeScrollLeftFlag=0<=r&&(1===this.state.scrollDirectionHorizontal?a<=r:r<=a),this._recomputeScrollTopFlag=0<=o&&(1===this.state.scrollDirectionVertical?n<=o:o<=n),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"_calculateChildrenToRender",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state,i=a.cellRenderer,r=a.cellRangeRenderer,o=a.columnCount,s=a.deferredMeasurementCache,l=a.height,u=a.overscanColumnCount,c=a.overscanIndicesGetter,d=a.overscanRowCount,p=a.rowCount,h=a.width,y=a.isScrollingOptOut,g=n.scrollDirectionHorizontal,m=n.scrollDirectionVertical,f=n.instanceProps,v=0<this._initialScrollTop?this._initialScrollTop:n.scrollTop,b=0<this._initialScrollLeft?this._initialScrollLeft:n.scrollLeft,C=this._isScrolling(a,n);if(this._childrenToDisplay=[],0<l&&0<h){var T=f.columnSizeAndPositionManager.getVisibleCellRange({containerSize:h,offset:b}),S=f.rowSizeAndPositionManager.getVisibleCellRange({containerSize:l,offset:v}),D=f.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:h,offset:b}),k=f.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:l,offset:v});this._renderedColumnStartIndex=T.start,this._renderedColumnStopIndex=T.stop,this._renderedRowStartIndex=S.start,this._renderedRowStopIndex=S.stop;var w=c({direction:"horizontal",cellCount:o,overscanCellsCount:u,scrollDirection:g,startIndex:"number"==typeof T.start?T.start:0,stopIndex:"number"==typeof T.stop?T.stop:-1}),x=c({direction:"vertical",cellCount:p,overscanCellsCount:d,scrollDirection:m,startIndex:"number"==typeof S.start?S.start:0,stopIndex:"number"==typeof S.stop?S.stop:-1}),A=w.overscanStartIndex,I=w.overscanStopIndex,P=x.overscanStartIndex,_=x.overscanStopIndex;if(s){if(!s.hasFixedHeight())for(var M=P;M<=_;M++)if(!s.has(M,0)){A=0,I=o-1;break}if(!s.hasFixedWidth())for(var L=A;L<=I;L++)if(!s.has(0,L)){P=0,_=p-1;break}}this._childrenToDisplay=r({cellCache:this._cellCache,cellRenderer:i,columnSizeAndPositionManager:f.columnSizeAndPositionManager,columnStartIndex:A,columnStopIndex:I,deferredMeasurementCache:s,horizontalOffsetAdjustment:D,isScrolling:C,isScrollingOptOut:y,parent:this,rowSizeAndPositionManager:f.rowSizeAndPositionManager,rowStartIndex:P,rowStopIndex:_,scrollLeft:b,scrollTop:v,styleCache:this._styleCache,verticalOffsetAdjustment:k,visibleColumnIndices:T,visibleRowIndices:S});var R=ae.compose(ae.map(function(e){var t=ae.split("-",e);return{rowIndex:+t[0],columnIndex:+t[1]}}),ae.filter(function(e){return e}),ae.map(function(e){return e.getAttribute("key")}))(this._childrenToDisplay);this.props.onDisplayChildrenChange&&this.props.onDisplayChildrenChange(R),this._columnStartIndex=A,this._columnStopIndex=I,this._rowStartIndex=P,this._rowStopIndex=_}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&op(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=function(t,a){var n;Promise.resolve().then(function(){n=Date.now()});var i={id:yp(function e(){Date.now()-n>=a?t&&t():i.id=yp(e)})};return i}(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var r=this,t=e.scrollLeft,a=e.scrollTop,o=e.totalColumnsWidth,s=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var t=e.scrollLeft,a=e.scrollTop,n=r.props,i=n.height;(0,n.onScroll)({clientHeight:i,clientWidth:n.width,scrollHeight:s,scrollLeft:t,scrollTop:a,scrollWidth:o})},indices:{scrollLeft:t,scrollTop:a}})}},{key:"_isScrolling",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state;return Object.hasOwnProperty.call(a,"isScrolling")?Boolean(a.isScrolling):Boolean(n.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state;return d._getCalculatedScrollLeft(a,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state,i=d._getScrollLeftForScrollToColumnStateUpdate(a,n);i&&(i.needToResetStyleCache=!1,this.setState(i))}},{key:"_getCalculatedScrollTop",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state;return d._getCalculatedScrollTop(a,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,a=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var n=this._rowStartIndex;n<=this._rowStopIndex;n++)for(var i=this._columnStartIndex;i<=this._columnStopIndex;i++){var r="".concat(n,"-").concat(i);this._styleCache[r]=e[r],a&&(this._cellCache[r]=t[r])}}},{key:"_updateScrollTopForScrollToRow",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state,i=d._getScrollTopForScrollToRowStateUpdate(a,n);i&&(i.needToResetStyleCache=!1,this.setState(i))}}],[{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,a=e.scrollLeft,n=e.scrollTop,i={scrollPositionChangeReason:Cp};return"number"==typeof a&&0<=a&&(i.scrollDirectionHorizontal=a>t.scrollLeft?1:-1,i.scrollLeft=a),"number"==typeof n&&0<=n&&(i.scrollDirectionVertical=n>t.scrollTop?1:-1,i.scrollTop=n),"number"==typeof a&&0<=a&&a!==t.scrollLeft||"number"==typeof n&&0<=n&&n!==t.scrollTop?i:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var a=e.columnCount,n=e.height,i=e.scrollToAlignment,r=e.scrollToColumn,o=e.width,s=t.scrollLeft,l=t.instanceProps;if(0<a){var u=a-1,c=r<0?u:Math.min(u,r),d=l.rowSizeAndPositionManager.getTotalSize(),p=l.scrollbarSizeMeasured&&n<d?l.scrollbarSize:0;return l.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:o-p,currentOffset:s,targetIndex:c})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,t){var a=t.scrollLeft,n=d._getCalculatedScrollLeft(e,t);return"number"==typeof n&&0<=n&&a!==n?d._getScrollToPositionStateUpdate({prevState:t,scrollLeft:n,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var a=e.height,n=e.rowCount,i=e.scrollToAlignment,r=e.scrollToRow,o=e.width,s=t.scrollTop,l=t.instanceProps;if(0<n){var u=n-1,c=r<0?u:Math.min(u,r),d=l.columnSizeAndPositionManager.getTotalSize(),p=l.scrollbarSizeMeasured&&o<d?l.scrollbarSize:0;return l.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:a-p,currentOffset:s,targetIndex:c})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,t){var a=t.scrollTop,n=d._getCalculatedScrollTop(e,t);return"number"==typeof n&&0<=n&&a!==n?d._getScrollToPositionStateUpdate({prevState:t,scrollLeft:-1,scrollTop:n}):{}}}]),d}();Tp.defaultProps={"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,a=e.cellRenderer,n=e.columnSizeAndPositionManager,i=e.columnStartIndex,r=e.columnStopIndex,o=e.deferredMeasurementCache,s=e.horizontalOffsetAdjustment,l=e.isScrolling,u=e.isScrollingOptOut,c=e.parent,d=e.rowSizeAndPositionManager,p=e.rowStartIndex,h=e.rowStopIndex,y=e.styleCache,g=e.verticalOffsetAdjustment,m=e.visibleColumnIndices,f=e.visibleRowIndices,v=[],b=n.areOffsetsAdjusted()||d.areOffsetsAdjusted(),C=!l&&!b,T=p;T<=h;T++)for(var S=d.getSizeAndPositionOfCell(T),D=i;D<=r;D++){var k=n.getSizeAndPositionOfCell(D),w=D>=m.start&&D<=m.stop&&T>=f.start&&T<=f.stop,x="".concat(T,"-").concat(D),A=void 0;C&&y[x]?A=y[x]:o&&!o.has(T,D)?A={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(A={height:S.size,left:k.offset+s,position:"absolute",top:S.offset+g,width:k.size},y[x]=A);var I={columnIndex:D,isScrolling:l,isVisible:w,key:x,parent:c,rowIndex:T,style:A},P=void 0;null!=(P=!u&&!l||s||g?a(I):(t[x]||(t[x]=a(I)),t[x]))&&!1!==P&&v.push(P)}return v},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:function(){return 0},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,a=e.overscanCellsCount,n=e.scrollDirection,i=e.startIndex,r=e.stopIndex;return 1===n?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(t-1,r+a)}:{overscanStartIndex:Math.max(0,i-a),overscanStopIndex:Math.min(t-1,r)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1},function(e){var t=d$.applicationManager.namespace.split("-").join("_"),a="".concat(t,"_GCESFORMAT");function n(){this.name=a,this.maxArgs=2,this.minArgs=2}(n.prototype=new e.Spread.CalcEngine.Functions.Function).evaluate=function(e,t){return ku(t,e)};var i=new n;e.Spread.CalcEngine.Functions.defineGlobalCustomFunction(a,i),d$.applicationManager.registerCleanUpTask(function(){e.Spread.CalcEngine.Functions.removeGlobalFunction(a)})}(Dl.a),Dl.a.Spread.Common.CultureManager.addCultureInfo(Wt,null,qt);function Sp(e,t){if(t<=0)return!1;for(var a=0,n=t-1;0<=n&&"\\"===e[n];n--)a++;return 0<a&&a%2==1}function Dp(e){var n,t;return t=(n=e).matchAll(xp),R()(t).map(function(e){var t=e[1].split("|");return 1===t.length?{variableFullText:e[0],index:e.index,variableText:e[1]}:{variableFullText:e[0],index:e.index,variableText:t[0],formatterText:t.slice(1).join("|")}}).filter(function(e){var t=Sp(n,e.index),a=Sp(n,e.index+e.variableFullText.length-1);return!t&&!a}).map(function(e){return Object.assign(Object.assign({},e),{variable:function(e){if(null==e||!e.length)return{};var t=Ap.parseScript(e);return 1!==t.body.length?{}:Ip(t.body[0],{})}(e.variableText)})})}function kp(e,i){var t=Dp(e),r=[];return t.forEach(function(e){var t;if(e.variable.name.toLocaleLowerCase()===H.DashboardVariables.Datasets&&e.variable.path){var a=e.variable.path[0],n=null===(t=i.find(function(e){return e.name===a}))||void 0===t?void 0:t.id;n&&r.push(n)}}),r}function wp(e){var t=[];return e.forEach(function(e){e.type===H.JumpToType.OuterURL&&t.push(e.href)}),t}var xp=/#{(.+?)}/g,Ap=a(26),Ip=function(e,t){if(e.type!==Ap.Syntax.ExpressionStatement)throw'Not supported "'.concat(e.type,'" statement when parse DashboardVariable.');switch(e.expression.type){case Ap.Syntax.Identifier:return{name:e.expression.name,path:[]};case Ap.Syntax.MemberExpression:return Pp(e.expression,t);default:throw'Not supported "'.concat(e.expression.type,'" expression when parse DashboardVariable.')}},Pp=function e(t,a){switch(null==a.path&&(a.path=[]),t.computed?a.path.unshift(t.property.value):a.path.unshift(t.property.name),t.object.type){case Ap.Syntax.Identifier:a.name=t.object.name;break;case Ap.Syntax.MemberExpression:return e(t.object,a);default:throw'Not supported "'.concat(t.object.type,'" expression when parse Variable')}return a},_p={type:H.DashboardVariableFormatterType.Common,formatterText:""},Mp=function(e){if(null==e||!e.length)return _p;var t=ae.trim(e);if(!t.length)return _p;var a=Ep(t);switch(a){case H.DashboardVariableFormatterType.Json:case H.DashboardVariableFormatterType.Collection:case H.DashboardVariableFormatterType.FormatFn:return Lp(t,a);default:return{type:H.DashboardVariableFormatterType.Common,formatterText:t}}},Lp=function(e,t){var a,n,i,r,o,s,l,u,c,d=Ap.parseScript(e).body[0];if(d.type!==Ap.Syntax.ExpressionStatement)throw'Not supported "'.concat(d.type,'" statement when parse functionFormatter.');switch(t){case H.DashboardVariableFormatterType.Json:if((null===(a=null==d?void 0:d.expression)||void 0===a?void 0:a.type)===Ap.Syntax.Identifier){var p=null===(n=d.expression)||void 0===n?void 0:n.name;if(p!==H.DashboardVariableFormatterType.Json)throw'Not supported "'.concat(null===(i=null==d?void 0:d.expression)||void 0===i?void 0:i.type,"\" expression '").concat(p,"' when parse ").concat(t,".")}else if((null===(r=null==d?void 0:d.expression)||void 0===r?void 0:r.type)!==Ap.Syntax.CallExpression)throw'Not supported "'.concat(null===(o=null==d?void 0:d.expression)||void 0===o?void 0:o.type,'" expression when parse ').concat(t,".");return Rp(d.expression);case H.DashboardVariableFormatterType.Collection:if((null===(s=null==d?void 0:d.expression)||void 0===s?void 0:s.type)!==Ap.Syntax.CallExpression)throw'Not supported "'.concat(null===(l=null==d?void 0:d.expression)||void 0===l?void 0:l.type,'" expression when parse ').concat(t,".");return Vp(d.expression);case H.DashboardVariableFormatterType.FormatFn:if((null===(u=null==d?void 0:d.expression)||void 0===u?void 0:u.type)!==Ap.Syntax.CallExpression)throw'Not supported "'.concat(null===(c=null==d?void 0:d.expression)||void 0===c?void 0:c.type,'" expression when parse ').concat(t,".");return Np(d.expression);default:return null}},Rp=function(e){var t={type:H.DashboardVariableFormatterType.Json,dimensionNames:[]};return e.type===Ap.Syntax.CallExpression&&(t.dimensionNames=e.arguments.map(function(e){return Op(e,null)})),t},Vp=function(e){return{type:H.DashboardVariableFormatterType.Collection,commonFormatterText:Fp(e,0,""),leftBracket:Fp(e,1,"["),rightBracket:Fp(e,2,"]"),itemSeparator:Fp(e,3,",")}},Np=function(e){for(var t={type:H.DashboardVariableFormatterType.FormatFn},a=0;;){var n=Fp(e,a,"");if(!n)break;var i=Fp(e,a+1,""),r=new Dl.a.Spread.Formatter.GeneralFormatter(i,Wt);t[n]=r.format.bind(r),a+=2}return t},Ep=function(e){return ae.startsWith(H.DashboardVariableFormatterType.Json,e)?H.DashboardVariableFormatterType.Json:ae.startsWith(H.DashboardVariableFormatterType.Collection,e)?H.DashboardVariableFormatterType.Collection:ae.startsWith(H.DashboardVariableFormatterType.FormatFn,e)?H.DashboardVariableFormatterType.FormatFn:H.DashboardVariableFormatterType.Common},Fp=function(e,t,a){var n,i=null===(n=null==e?void 0:e.arguments)||void 0===n?void 0:n[t];return Op(i,a)},Op=function(e,t){if(null!=e&&e.type!==Ap.Syntax.Literal)throw'Not support "'.concat(e.type,'" expression when parse FunctionFormatterArgument.');return null==(null==e?void 0:e.value)?t:"".concat(e.value)};function Hp(e,a){var t;if(Jr.isRichEditor(e))return function(e,i){var t;if(!e||!e.delta||!e.delta.ops)return[];var r=[];return el(e,H.RichTextExpressionType.DashboardVariable).forEach(function(e){var t=kp("#{".concat(e.config.variable,"}"),i);r.push.apply(r,R()(t))}),el(e,H.RichTextExpressionType.AggregatedData).forEach(function(e){e.config.datasetId&&r.push(e.config.datasetId)}),null!==(t=e.delta.ops)&&void 0!==t&&t.forEach(function(e){var t,a,n=null!==(a=null===(t=e.attributes)||void 0===t?void 0:t.jumpToDocuments)&&void 0!==a?a:[];wp(n).forEach(function(e){var t=kp(e,i);r.push.apply(r,R()(t))})}),r}(e.editorContent,a);if(Jr.isSpreadChart(e))return e.pivotTables.map(Us.datasetId).filter(function(e){return e});if(Jr.isMergedChart(e))return e.pivot.datasetsInfo.datasetIds;if(Jr.isWebContent(e)){var n=null!==(t=e.options.property.src)&&void 0!==t?t:"";return kp(n,a)}var i=[Us.datasetId(e)],r=Us.drillThrough(e);return wp(r).forEach(function(e){var t=kp(e,a);i.push.apply(i,R()(t))}),i.filter(Boolean)}function Bp(e,t){var a=ae.compose(ae.uniq,ae.filter(function(e){return!!e}),ae.flatten,ae.map(function(e){return Hp(e,t)}),ae.values,ae.propOr({},"scenarios"))(e),n=ae.compose(ae.uniq,ae.filter(function(e){return!!e}),ae.map(ae.prop("datasetId")),ks.pivotFilters,ae.pathOr({},["dashboard"]))(e),i=ae.compose(ae.uniq,ae.filter(function(e){return!!e}),ae.map(ae.pathOr(null,["validValues","datasetReference","datasetId"])),ks.parameters,ae.pathOr({},["dashboard"]))(e);return ae.compose(ae.uniq,ae.flatten)([a,n,i])}function Up(e,t){var a=1<arguments.length&&void 0!==t?t:H.DatasetAutoRefreshType.Polling,n=Hs.docData(e),i=Hs.datasetInfoList(e),r=n.profiles;if(ae.isEmpty(r))return[];var o=Bp(n,i);return ae.compose(ae.filter(function(e){return ae.contains(e,o)}),ae.keys,ae.filter(function(e){return Ys(e)===a}))(r)}function zp(e){var t=new Dl.a.Spread.Formatter.GeneralFormatter(e.format,Wt);return e.format&&e.format.startsWith(H.DatasetExtendColumnType.SubDate)&&Jr.isSubDate(e)&&(t=du(e.subColumnType,e.isFiscal)),t}var Kp,jp,Wp,Gp,Yp,qp,Jp,Xp,Qp,Zp,$p,eh,th,ah,nh,ih,rh=a(16),oh=a.n(rh);(jp=Kp=Kp||{}).Sum="sum",jp.Cnt="cnt",jp.Max="max",jp.Min="min",jp.Avg="avg",(Gp=Wp=Wp||{}).Accumulation="accumulation",Gp.Aggregation="aggregation",Gp.Percentage="percentage",Gp.Rank="rank",Gp.DateTimeOffset="dateTimeOffset",Gp.Identity="identity",(qp=Yp=Yp||{}).Partition="partition",qp.Group="group",(Xp=Jp=Jp||{})[Xp.Exact=10]="Exact",Xp[Xp.Range=20]="Range",Xp[Xp.Greater=21]="Greater",Xp[Xp.Less=22]="Less",Xp[Xp.StartWith=30]="StartWith",Xp[Xp.EndWith=31]="EndWith",Xp[Xp.Contain=32]="Contain",Xp[Xp.MatchWord=33]="MatchWord",(Zp=Qp=Qp||{}).Asc="ascending",Zp.Desc="descending",(eh=$p=$p||{}).Value="value",eh.Ratio="ratio",eh.Difference="difference",eh.PercentDifference="percentDifference",(ah=th=th||{}).Auto="auto",ah.Value="value",ah.Manual="manual",ah.Column="column",(ih=nh=nh||{})[ih.Competition=1]="Competition",ih[ih.ModifiedCompetition=2]="ModifiedCompetition",ih[ih.Dense=3]="Dense",ih[ih.Unique=4]="Unique";function sh(e,t){var a=1<arguments.length&&void 0!==t?t:null;if(!e)return[];var n=Dp(e);return ae.compose(ae.map(function(e){return d$.dashboardVariableManager.getVariableContent(e.variable.name,e.variable.path,a)}),ae.filter(function(e){return d$.dashboardVariableManager.isValidVariableName(e.variable.name)}))(n)}function lh(s,l,u,c,d){return xh(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&!Po(s))return e.abrupt("return",s);e.next=2;break;case 2:t=s,e.prev=3,a=Dp(s),n=0;case 6:if(!(n<a.length)){e.next=16;break}if(i=a[n],d$.dashboardVariableManager.isValidVariableName(i.variable.name))return e.next=11,d$.dashboardVariableManager.getVariableValue({variableName:i.variable.name,path:i.variable.path,formatterText:i.formatterText,defaultText:d,scenarioId:l,selectedDataList:u});e.next=13;break;case 11:r=e.sent,t=void 0===r?t.replace(i.variableFullText,null!=d?d:""):null==r?t.replace(i.variableFullText,null!=d?d:"null"):(o=Bo.a.isArray(r)?JSON.stringify(r):r,t.replace(i.variableFullText,o));case 13:n++,e.next=6;break;case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(3);case 20:return nu.log("dynamicUrl: ",s),nu.log("actualUrl: ",t),e.abrupt("return",t);case 23:case"end":return e.stop()}},e,null,[[3,18]])}))}function uh(e){if(!e)return[];var t=Dp(e),a=[];return t.forEach(function(e){e.variable.name.toLocaleLowerCase()===H.DashboardVariables.Parameters&&e.variable.path&&a.push(e.variable.path[0])}),a}function ch(e,t,a){var n=2<arguments.length&&void 0!==a?a:H.LogicalType.And,i=null==e||0===e.items.length,r=null==t||0===t.items.length;if(!i||!r)return i?t:r?e:{type:n,items:[e,t]}}function dh(e,t){return{type:e,items:t}}function ph(e){var t;return e.dataType!==H.DatasetFieldDataType.Datetime&&!e.subColumnType||(t=e.displayTimezone?(new Date).getTimezoneOffset():0),t}function hh(e,t,a,n,i,r){return{attributeId:e,tableName:t,columnId:a,subColumnType:n,isCustomAttribute:4<arguments.length&&void 0!==i&&i,timezoneOffset:5<arguments.length?r:void 0}}function yh(e,t){return e.tableName===t.tableName&&e.columnId===t.columnId&&e.subColumnType===t.subColumnType}function gh(e,t){var a={column:e};return e.isCustomAttribute&&t===H.AggregationMethod.None||(a.aggregationType=t),a}function mh(e,t){return e.aggregationType===t.aggregationType&&yh(e.column,t.column)}function fh(e,t){return t?{column:e,orderBy:t}:{column:e}}function vh(e,t){return e.type===t.type&&function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!yh(e[a],t[a]))return!1;return!0}(e.columns,t.columns)}function bh(e,t){if(e.type!==t.type)return!1;if(!mh(e.value,t.value))return!1;if(a=e.options,n=t.options,!ae.equals(a,n))return!1;var a,n;switch(e.type){case Wp.Identity:case Wp.Aggregation:case Wp.Accumulation:case Wp.Rank:case Wp.Percentage:return vh(e.divideBy,t.divideBy);case Wp.DateTimeOffset:}return!0}function Ch(e,t){return{type:e,columns:t}}function Th(e,t,a,n,i,r,o){var s=2<arguments.length&&void 0!==a?a:[],l=3<arguments.length&&void 0!==n?n:[],u=4<arguments.length?i:void 0,c=5<arguments.length&&void 0!==r?r:[],d=6<arguments.length?o:void 0,p={id:e,dimensions:1<arguments.length&&void 0!==t?t:[]};return s.length&&(p.values=s),l.length&&(p.calcValues=l),u&&u.items.length&&(p.filters=u),c.length&&(p.calcFilters=c),d&&(p.options=d),p}function Sh(e){var t,a=0<arguments.length&&void 0!==e?e:{datasetId:""},n=a.pivot,i=a.table,r=a.filters,o=a.customAttributes,s=a.datasetId,l=a.userParameters,u=null!=n?n:[];Array.isArray(u)||(u=[u]);var c=null!=i?i:[];Array.isArray(c)||(c=[c]);var d=new Fh(s,o);return d.setPivots(u),d.setTables(c),d.setUserParameter(null!=l?l:[]),r&&0!==(null===(t=null==r?void 0:r.items)||void 0===t?void 0:t.length)&&d.setFilters(r),d.getJSON()}function Dh(e,t,a){return{type:e,range:t,exclude:a}}function kh(e,t){return{columns:e,filterBy:t}}function wh(e){return Math.floor(e/3+1)}var xh=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},Ah=function(e){return{type:th.Auto,order:e}},Ih=function(e,t){return{type:th.Value,order:t,value:e}},Ph=function(e){return{type:th.Manual,manual:e}},_h=function(e,t,a){return{type:Wp.Identity,value:e,divideBy:t,options:a}},Mh=function(e,t,a){return{type:Wp.Accumulation,value:e,divideBy:t,options:a}},Lh=function(e,t,a){return{type:Wp.Rank,value:e,divideBy:t,options:a}},Rh=function(e,t,a){return{type:Wp.Percentage,value:e,divideBy:t,options:a}},Vh=function(e,t){return{type:Wp.DateTimeOffset,value:e,options:t}},Nh=function(e,t,a,n){var i={accumulationType:e};return null!=t&&(i.include=t),null!=a&&(i.previous=a),null!=n&&(i.next=n),i},Eh=function(e,t,a){return{usePercentage:0<arguments.length&&void 0!==e&&e,order:1<arguments.length&&void 0!==t?t:Qp.Desc,treatDuplicateAs:2<arguments.length&&void 0!==a?a:nh.Unique}},Fh=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];I()(this,a),this.data={pivots:[],tables:[],userParameters:[]},this.customAttributes=[],this.usedCustomAttributes={},this.useCustomAttribute=!1,this.datasetId=e,this.customAttributes=t}return D()(a,[{key:"record",value:function(e){this.useCustomAttribute=!0;var t=this.usedCustomAttributes[e.tableName]||{};t[e.columnId]=!0,this.usedCustomAttributes[e.tableName]=t}},{key:"collectCustomAttributeFromValueOrDimension",value:function(e){var n=this;(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){var t,a;e.column.isCustomAttribute&&n.record(e.column),null!==(a=null===(t=e.orderBy)||void 0===t?void 0:t.value)&&void 0!==a&&a.column.isCustomAttribute&&n.record(e.orderBy.value.column)})}},{key:"collectCustomAttributeFromColumns",value:function(e){var t=this;(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){e.isCustomAttribute&&t.record(e)})}},{key:"collectCustomAttributeFromFilter",value:function(e){var t=this;e&&Hh(function(e){t.collectCustomAttributeFromColumns(e.columns)})(e)}},{key:"collectCustomAttributeFromCalcValueOrCalcFilter",value:function(e){var t,a,n;return e.value.column.isCustomAttribute&&this.record(e.value.column),null!==(a=null===(t=e.options)||void 0===t?void 0:t.subdate)&&void 0!==a&&a.isCustomAttribute&&this.record(e.options.subdate),this.collectCustomAttributeFromColumns(null===(n=e.divideBy)||void 0===n?void 0:n.columns)}},{key:"collectCustomAttributeFromPivots",value:function(){var t=this;this.data.pivots.forEach(function(e){t.collectCustomAttributeFromValueOrDimension(e.values),t.collectCustomAttributeFromValueOrDimension(e.dimensions),t.collectCustomAttributeFromFilter(e.filters),e.calcValues&&e.calcValues.forEach(function(e){t.collectCustomAttributeFromCalcValueOrCalcFilter(e)}),e.calcFilters&&e.calcFilters.forEach(function(e){t.collectCustomAttributeFromCalcValueOrCalcFilter(e)})})}},{key:"collectCustomAttributeFromRawModels",value:function(){var t=this;this.data.tables.forEach(function(e){t.collectCustomAttributeFromValueOrDimension(e.dimensions),t.collectCustomAttributeFromFilter(e.filters)})}},{key:"setPivots",value:function(e){this.data.pivots=e,this.customAttributes.length&&this.collectCustomAttributeFromPivots()}},{key:"setTables",value:function(e){this.data.tables=e,this.customAttributes.length&&this.collectCustomAttributeFromRawModels()}},{key:"setUserParameter",value:function(e){this.data.userParameters=e}},{key:"setFilters",value:function(e){this.data.filters=e,this.customAttributes.length&&this.collectCustomAttributeFromFilter(e)}},{key:"findBackendAttributeMeta",value:function(e){var t=e.entity,a=e.attribute,n=this.customAttributes.find(function(e){return e.tableName.toUpperCase()===t.toUpperCase()&&e.columnId.toUpperCase()===a.toUpperCase()});return n&&n._backendExpression?d$.customAttributeManager.getOrCreateBackendCustomAttribute(this.datasetId,n._backendExpression):null}},{key:"getJSON",value:function(){var o=this;if(this.useCustomAttribute){var e=this.customAttributes.filter(function(e){var t;return!(null===(t=o.usedCustomAttributes[e.tableName])||void 0===t||!t[e.columnId])}),s=new Set;this.data.customAttributes=e.reduce(function(a,e){if(e._backendExpression){var t=d$.customAttributeManager.getOrCreateBackendCustomAttribute(o.datasetId,e._backendExpression);if(!t||s.has(t.id))return a;s.add(t.id),a.push(t.toRuntimeJSON())}else{var n=d$.customAttributeManager.getRelatedAttributes(o.datasetId,e.tableName,e.columnId),i=n.metas,r=n.attrs;i.forEach(function(e){if(!s.has(e.id)){s.add(e.id);var t=e.toRuntimeJSON();a.push(Object.assign(Object.assign({},t),{definition:function(e){for(var t=e,a=Dp(t),n=0;n<a.length;n++){var i=a[n],r=i.variable.path[0];if(!d$.dashboardVariableManager.isValidVariableName(i.variable.name)||!d$.dashboardVariableManager.isValidParameterName(r))throw new zd.a({type:"pivot",stateCode:200,errorCode:600001,context:r});try{var o=d$.dashboardVariableManager.getVariableValueSync({variableName:i.variable.name,path:i.variable.path,formatterText:i.formatterText,defaultText:"",scenarioId:"",selectedDataList:[]}),s=Bo.a.isArray(o)?"":o;if(i.variable.name===H.DashboardVariables.Parameters){var l=d$.parameterManager.getParameterDataType(i.variable.path[0]);t=l===H.ParameterDataType.Boolean||l===H.ParameterDataType.Integer||l===H.ParameterDataType.Float?(""===s&&(s='""'),t.replace(i.variableFullText,"".concat(s))):t.replace(i.variableFullText,'"'.concat(s,'"'))}else t=t.replace(i.variableFullText,'"'.concat(s,'"'))}catch(e){}nu.log("convertCustomAttributeVariable Item: ",i)}return nu.log("convertCustomAttributeVariable: ",e,t),t}(t.definition)}))}}),r.forEach(function(e){var t=o.findBackendAttributeMeta(e);t&&!s.has(t.id)&&(s.add(t.id),a.push(t.toRuntimeJSON()))})}return a},[]),this.data.pivots=this.data.pivots.map(function(e){return Object.assign(Object.assign({},e),{_extendFields:o.data.customAttributes})}),this.data.tables=this.data.tables.map(function(e){return Object.assign(Object.assign({},e),{_extendFields:o.data.customAttributes})})}return this.data}}]),a}(),Oh=function(e,t,a,n){return{min:e,max:t,minIncluded:a,maxIncluded:n}},Hh=function a(n){return function(e){if(Array.isArray(e))return e.map(function(e){return a(n)(e)}).filter(function(e){return e});if(Array.isArray(e.items)){var t=a(n)(e.items);if(!t.length)return;return Object.assign(Object.assign({},e),{items:t})}return n(e)}},Bh=a(24),Uh=a.n(Bh),zh=function(e,t,a,n){if(!n)return new Date(e,t,1);var i,r=t+n.startFiscalMonth,o=Math.floor(r/12);return r%=12,i=n.endActualYearAsFiscalYear?e-1+o:e+o,new Date(i,r,a)},Kh=function(e,t){var a=e.getFullYear();if(!t)return a;var n=e.getMonth();return t.endActualYearAsFiscalYear?n>=t.startFiscalMonth?a+1:a:n>=t.startFiscalMonth?a:a-1},jh=function(e,t){var a=Wh(e,t);return wh(a)},Wh=function(e,t){var a=e.getMonth();return t?(a-t.startFiscalMonth+12)%12:a};function Gh(e,t,a,n,i){if(this._fiscalDateSetting=n,null==i){if(this._fiscalYear=e,this._fiscalMonth=t,"lastDay"===a){var r=zh(this._fiscalYear,this._fiscalMonth,1,this._fiscalDateSetting);this._fiscalDay=(o=r.getFullYear(),s=r.getMonth(),new Date(o,s+1,0).getDate())}else this._fiscalDay=a;this._fiscalQuarter=wh(this._fiscalMonth),this._actualDate=zh(this._fiscalYear,this._fiscalMonth,this._fiscalDay,this._fiscalDateSetting)}else this._actualDate=i,this._fiscalYear=Kh(this._actualDate,this._fiscalDateSetting),this._fiscalMonth=Wh(this._actualDate,this._fiscalDateSetting),this._fiscalQuarter=jh(this._actualDate,this._fiscalDateSetting),this._fiscalDay=this._actualDate.getDate();var o,s}function Yh(e,t,a,n,i){e||(nu.warn("Fiscal original date is null!"),e=new Date),this._originalDate=new Date(e),this._startMonth=t,this._useEndAsYear=a}function qh(e){switch(e){case H.DatasetFieldDataType.Date:return kl();case H.DatasetFieldDataType.Datetime:return kl(!0);case H.DatasetFieldDataType.Number:return"General";case H.DatasetFieldDataType.String:case H.DatasetFieldDataType.Boolean:default:return"@"}}function Jh(e){switch(e){case"Date":return H.DatasetFieldDataType.Date;case"DateTime":return H.DatasetFieldDataType.Datetime;case"Number":return H.DatasetFieldDataType.Number;case"Boolean":return H.DatasetFieldDataType.Boolean;case"String":default:return H.DatasetFieldDataType.String}}function Xh(e){var t,a=Jh(e.dataType),n=(t=e.dataCategory,Object.values(H.DatasetFieldSmartCategory)[t]);return{entityId:e.entityId,entityName:e.entityName,attributeId:e.attributeId,attributeName:e.attributeName,name:e.columnId,display:e.columnName||e.columnId,dataType:a,isContainTimeZone:e.isContainTimeZone,format:qh(a),category:[H.DatasetFieldSmartCategory.GeoLatitude,H.DatasetFieldSmartCategory.GeoLongitude].includes(n)?H.ColumnCategory.Dimension:e.category,smartCategory:n}}pl(Gh,{getFullYear:function(){return this._fiscalYear},getMonth:function(){return this._fiscalMonth},getQuarter:function(){return this._fiscalQuarter},getDate:function(){return this._actualDate.getDate()},getDay:function(){return this._actualDate.getDay()},getActualDate:function(){return this._actualDate},format:function(){}}),Gh.fromDate=function(e,t){return new Gh(Kh(e,t),Wh(e,t),e.getDate(),t,e)},function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(Yh,Date),pl(Yh,{getFullYear:function(){var e=function(e,t){var a,n=[];for(a=0;a<12;a++)n[a]=0;if(0!==e)if(t)for(a=e;a<12;a++)n[a]=1;else for(a=0;a<e;a++)n[a]=-1;return n}(this._startMonth,this._useEndAsYear);return this._originalDate.getFullYear()+e[this._originalDate.getMonth()]},getQuarter:function(){return 1+~~((this._originalDate.getMonth()+12-this._startMonth)%12/3)},getMonth:function(){return this._originalDate.getMonth()},getDay:function(){return this._originalDate.getDay()},getFiscalWeek:function(){var e=new Date(this.getFullYear()+(this._useEndAsYear?-1:0),this._startMonth,1),t=e.getDay(),a=((this._originalDate-e)/864e5+t)/7+(t?0:1);return Math.ceil(a)},getDate:function(){return this._originalDate.getDate()},getTime:function(){return this._originalDate.getTime()},getHours:function(){return this._originalDate.getHours()},getMinutes:function(){return this._originalDate.getMinutes()},getSeconds:function(){return this._originalDate.getSeconds()},getMilliseconds:function(){return this._originalDate.getMilliseconds()},getTimezoneOffset:function(){return this._originalDate.getTimezoneOffset()},toISOString:function(){return toWynDateString(this._originalDate)},toString:function(){return this._originalDate.toString()},valueOf:function(){return this._originalDate.valueOf()},toJSON:function(){return{originalDate:this._originalDate,startMonth:this._startMonth,useEndAsYear:this._useEndAsYear,type:"FiscalDate"}}});var Qh=function(e){return"".concat(H.DatasetExtendColumnType.SubDate,"_").concat(e)};function Zh(u){var e=["Year","Quarter","Month","Week","Day"].concat(u.dataType===H.DatasetFieldDataType.Datetime?["Hour","Minute","Second"]:[]);return ae.compose(ae.reduce(function(e,t){return ae.merge(e,(n=t,o=$s((a=u).name,n),s=H.DatasetFieldDataType.Number,l=H.SubColumnTypes[n],V()({},o,{entityId:a.entityId,entityName:a.entityName,attributeId:o,attributeName:o,parentAttributeName:a.attributeName,parentIsCustomAttribute:Jr.isCustomAttribute(a),name:o,display:(i=a.name,null==(r=n)?i:"".concat(i,"(").concat(r,")")),dataType:s,format:Qh(l),category:H.ColumnCategory.Dimension,parentColumnName:a.name,subColumnType:l,type:H.DatasetExtendColumnType.SubDate,displayUnit:H.DisplayUnit.None})));var a,n,i,r,o,s,l},{}),ae.values)(e)}var $h=function(e,t){var a=t.lastUpdatedAt,n=t.entities,i=t.relations,r=t.datasetType,o=t.nameMapping,s=t.calculatedExpression,l=void 0===s?[]:s,u=n.flatMap(function(t){return t.attributes.map(function(e){return{dataType:e.dataType,category:e.category,columnId:e.columnId,columnName:e.columnName,entityId:t.id,entityName:t.name,attributeId:e.columnId,attributeName:e.columnName,dataCategory:e.dataCategory,isContainTimeZone:e.isContainTimeZone}})});u._nameMapping=o;var c=n.flatMap(function(t){var e,a;return(null==t||null===(e=t.usedEntityParameters)||void 0===e||null===(a=e.map)||void 0===a?void 0:a.call(e,function(e){return{name:e.parameterName,dataType:function(e){switch(e){case H.EntityParameterDataType.Boolean:return H.ParameterDataTypeFull.Boolean;case H.EntityParameterDataType.Text:return H.ParameterDataTypeFull.String;case H.EntityParameterDataType.Date:return H.ParameterDataTypeFull.Date;case H.EntityParameterDataType.DateTime:return H.ParameterDataTypeFull.DateTime;case H.EntityParameterDataType.Number:return H.ParameterDataTypeFull.Float;default:return H.ParameterDataTypeFull.String}}(e.valueType),multiValue:e.isMultivalued,entityId:t.id,defaultValue:e.literalValue}}))||[]}),d={};n.forEach(function(e){var t=e.id;return e.attributes.forEach(function(e){return d[e.id]=t})});var p=i.filter(function(e){return!e.isInactive}).reduce(function(r,e){function o(e,t,a){var n,i=2<arguments.length&&void 0!==a&&a;r[e]=null!==(n=r[e])&&void 0!==n?n:[],r[e].push(t),i&&o(t,e)}var t=e.type,a=e.bidirectional,n=e.source,i=e.target;return a||0===t?o(n,i,!0):1===t||2===t?o(n,i):3!==t&&4!==t||o(i,n),r},{});return Cd[e]={},{id:e,columns:u.reduce(function(e,t){var a=Xh(t),n=ae.merge(e,V()({},a.name,a));return Jr.isDate(a)?ae.merge(n,Zh(a)):n},{}),origin:u,entities:n,parameters:c,relationMapping:p,lastUpdatedAt:a,datasetType:r,calculatedExpression:l.map(function(e){return F()({},e,{dataType:Jh(e.dataType)})})}};function ey(e,t,a){switch(t){case H.DatasetType.COT:case H.DatasetType.AnalysisModel:case H.DatasetType.StreamingDataset:case H.DatasetType.PushDataset:return $h(e,a);default:return a}}var ty=[{name:"LASTYEAR",maxArgs:2,minArgs:1,evaluate:function(){var e,t=Array.prototype.slice.call(arguments);return ay(0===t[0]?e=t[1]?new Date(t[1]).getFullYear()-1:(new Date).getFullYear()-1:(e=t[1]?new Date(t[1]).getFullYear():(new Date).getFullYear())-t[0]+1,e)}},{name:"NEXTYEAR",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);return t=0===a[0]?e=a[1]?new Date(a[1]).getFullYear()+1:(new Date).getFullYear()+1:(e=a[1]?new Date(a[1]).getFullYear():(new Date).getFullYear())+a[0]-1,ay(e,t)}},{name:"THISYEAR",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);return t=e=a[0]?new Date(a[0]).getFullYear():(new Date).getFullYear(),ay(e,t)}},{name:"YEARTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t=Array.prototype.slice.call(arguments);return(e=t[0]?new Date(t[0]):new Date).setHours(0,0,0,0),e.setDate(e.getDate()+1),{start:ay(e.getFullYear(),e.getFullYear()).start,end:e}}},{name:"LASTFISCALYEAR",maxArgs:3,minArgs:2,evaluate:function(){var e,t=Array.prototype.slice.call(arguments),a=t[0],n=t[1],i=t[2];return iy(0===n?e=i?new Yh(i,a,!1).getFullYear()-1:new Yh(new Date,a,!1).getFullYear()-1:(e=i?new Yh(i,a,!1).getFullYear():new Yh(new Date,a,!1).getFullYear())-n+1,e,a)}},{name:"NEXTFISCALYEAR",maxArgs:3,minArgs:2,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=a[0],i=a[1],r=a[2];return t=0===i?e=r?new Yh(r,n,!1).getFullYear()+1:new Yh(new Date,n,!1).getFullYear()+1:(e=r?new Yh(r,n,!1).getFullYear():new Yh(new Date,n,!1).getFullYear())+i-1,iy(e,t,n)}},{name:"THISFISCALYEAR",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=a[0],i=a[1];return t=e=i?new Yh(i,n,!1).getFullYear():new Yh(new Date,n,!1).getFullYear(),iy(e,t,n)}},{name:"FISCALYEARTODATE",maxArgs:2,minArgs:1,evaluate:function(){var e=Array.prototype.slice.call(arguments),t=e[0],a=e[1],n=a?new Date(a):new Date;return{start:iy(n.getFullYear(),n.getFullYear(),t).start,end:n}}},{name:"LASTQUARTER",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a,n,i=Array.prototype.slice.call(arguments),r=i[1]?new Date(i[1]):new Date;if(0===i[0])a=n=~~((4+~~(r.getMonth()/3)-1)%4),e=t=0==~~(r.getMonth()/3)?r.getFullYear()-1:r.getFullYear();else{t=r.getFullYear(),n=Math.floor(r.getMonth()/3);var o=new Date(r);o.setMonth(r.getMonth()-3*(i[0]-1)),e=o.getFullYear(),a=Math.floor(o.getMonth()/3)}return ny(e,a,t,n)}},{name:"NEXTQUARTER",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a,n,i=Array.prototype.slice.call(arguments),r=i[1]?new Date(i[1]):new Date;if(0===i[0]){var o=1+~~(r.getMonth()/3);a=n=o%4,e=t=~~(o/4)+r.getFullYear()}else{e=r.getFullYear(),a=Math.floor(r.getMonth()/3);var s=new Date(r);s.setMonth(r.getMonth()+3*(i[0]-1)),t=s.getFullYear(),n=Math.floor(s.getMonth()/3)}return ny(e,a,t,n)}},{name:"QUARTERTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t=Array.prototype.slice.call(arguments);return(e=t[0]?new Date(t[0]):new Date).setHours(0,0,0,0),e.setDate(e.getDate()+1),{start:ny(e.getFullYear(),Math.floor(e.getMonth()/3),0,0).start,end:e}}},{name:"THISQUARTER",maxArgs:1,minArgs:0,evaluate:function(){var e=Array.prototype.slice.call(arguments),t=e[0]?new Date(e[0]):new Date;return ny(t.getFullYear(),Math.floor(t.getMonth()/3),t.getFullYear(),Math.floor(t.getMonth()/3))}},{name:"LASTDAY",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[1]?(e=new Date(a[1]),new Date(a[1])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1);var n=a[0];return n?(--n,e.setDate(e.getDate()-n)):(e.setDate(e.getDate()-1),t.setDate(t.getDate()-1)),{start:e,end:t}}},{name:"NEXTDAY",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[1]?(e=new Date(a[1]),new Date(a[1])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1);var n=a[0];return n?(--n,e.setDate(e.getDate()),t.setDate(t.getDate()+n)):(e.setDate(e.getDate()+1),t.setDate(t.getDate()+1)),{start:e,end:t}}},{name:"THISDAY",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);return t=a[0]?(e=new Date(a[0]),new Date(a[0])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1),{start:e,end:t}}},{name:"DAYTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setHours(0,0,0,0),i.setSeconds(i.getSeconds()+1,0),{start:n,end:i}}},{name:"LASTWEEK",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[1]?(e=new Date(a[1]),new Date(a[1])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1);var n=a[0],i=e.getDay();return n?(e.setDate(e.getDate()-(i+7*(n-1))),t.setDate(t.getDate()+(6-i))):(e.setDate(e.getDate()-(i+7)),t.setDate(t.getDate()-(i+1))),{start:e,end:t}}},{name:"NEXTWEEK",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[1]?(e=new Date(a[1]),new Date(a[1])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1);var n=a[0],i=e.getDay();return n?(e.setDate(e.getDate()-i),t.setDate(t.getDate()+(6-i+7*(n-1)))):(e.setDate(e.getDate()+(7-i)),t.setDate(t.getDate()+(6-i+7))),{start:e,end:t}}},{name:"THISWEEK",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[0]?(e=new Date(a[0]),new Date(a[0])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1);var n=e.getDay();return e.setDate(e.getDate()-n),t.setDate(t.getDate()+(6-n)),{start:e,end:t}}},{name:"WEEKTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[0]?(e=new Date(a[0]),new Date(a[0])):(e=new Date,new Date),e.setHours(0,0,0,0),t.setHours(0,0,0,0),t.setDate(t.getDate()+1);var n=e.getDay();return e.setDate(e.getDate()-n),{start:e,end:t}}},{name:"LASTMONTH",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[1]?(e=new Date(a[1]),new Date(a[1])):(e=new Date,new Date),e.setHours(0,0,0,0),e.setDate(1),t.setHours(0,0,0,0),t.setDate(1);var n=a[0];return n?(--n,e.setMonth(e.getMonth()-n)):(e.setMonth(e.getMonth()-1),t.setMonth(t.getMonth()-1)),t.setMonth(t.getMonth()+1),{start:e,end:t}}},{name:"NEXTMONTH",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);t=a[1]?(e=new Date(a[1]),new Date(a[1])):(e=new Date,new Date),e.setHours(0,0,0,0),e.setDate(1),t.setHours(0,0,0,0),t.setDate(1);var n=a[0];return n?(--n,e.setMonth(e.getMonth()),t.setMonth(t.getMonth()+n)):(e.setMonth(e.getMonth()+1),t.setMonth(t.getMonth()+1)),t.setMonth(t.getMonth()+1),{start:e,end:t}}},{name:"THISMONTH",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);return t=a[0]?(e=new Date(a[0]),new Date(a[0])):(e=new Date,new Date),e.setHours(0,0,0,0),e.setDate(1),t.setHours(0,0,0,0),t.setDate(1),t.setMonth(t.getMonth()+1),{start:e,end:t}}},{name:"MONTHTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments);return t=a[0]?(e=new Date(a[0]),new Date(a[0])):(e=new Date,new Date),e.setHours(0,0,0,0),e.setDate(1),t.setHours(0,0,0,0),t.setDate(t.getDate()+1),{start:e,end:t}}},{name:"LASTHOUR",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;a[1]&&(e=Uh()(Date,R()(null===(t=a[1])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMinutes(0,0,0),i.setMinutes(0,0,0),i.setHours(i.getHours()+1);var r=a[0];return r?(--r,n.setHours(n.getHours()-r)):(n.setHours(n.getHours()-1),i.setHours(i.getHours()-1)),{start:n,end:i}}},{name:"NEXTHOUR",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;a[1]&&(e=Uh()(Date,R()(null===(t=a[1])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMinutes(0,0,0),i.setMinutes(0,0,0),i=new Date(i.setHours(i.getHours()+1));var r=a[0];return r?(--r,i.setHours(i.getHours()+r)):(n.setHours(n.getHours()+1),i.setHours(i.getHours()+1)),{start:n,end:i}}},{name:"THISHOUR",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMinutes(0,0,0),i.setMinutes(0,0,0),i.setHours(i.getHours()+1),{start:n,end:i}}},{name:"HOURTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMinutes(0,0,0),i.setSeconds(i.getSeconds()+1,0),{start:n,end:i}}},{name:"LASTMINUTE",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;a[1]&&(e=Uh()(Date,R()(null===(t=a[1])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setSeconds(0,0),i.setSeconds(0,0),i.setMinutes(i.getMinutes()+1);var r=a[0];return r?(--r,n.setMinutes(n.getMinutes()-r)):(n.setMinutes(n.getMinutes()-1),i.setMinutes(i.getMinutes()-1)),{start:n,end:i}}},{name:"NEXTMINUTE",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;a[1]&&(e=Uh()(Date,R()(null===(t=a[1])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e));var r=a[0];return n.setSeconds(0,0),i.setSeconds(0,0),i.setMinutes(i.getMinutes()+1),r?(--r,i.setMinutes(i.getMinutes()+r)):(n.setMinutes(n.getMinutes()+1),i.setMinutes(i.getMinutes()+1)),{start:n,end:i}}},{name:"THISMINUTE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setSeconds(0,0),i.setSeconds(0,0),i.setMinutes(i.getMinutes()+1),{start:n,end:i}}},{name:"MINUTETODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setSeconds(0,0),i.setSeconds(i.getSeconds()+1,0),{start:n,end:i}}},{name:"LASTSECOND",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;a[1]&&(e=Uh()(Date,R()(null===(t=a[1])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMilliseconds(0),i.setMilliseconds(0),i.setSeconds(i.getSeconds()+1);var r=a[0];return r?(--r,n.setSeconds(n.getSeconds()-r)):(n.setSeconds(n.getSeconds()-1),i.setSeconds(i.getSeconds()-1)),{start:n,end:i}}},{name:"NEXTSECOND",maxArgs:2,minArgs:1,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;a[1]&&(e=Uh()(Date,R()(null===(t=a[1])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMilliseconds(0),i.setMilliseconds(0),i.setSeconds(i.getSeconds()+1);var r=a[0];return r?(--r,i.setSeconds(i.getSeconds()+r)):(n.setSeconds(n.getSeconds()+1),i.setSeconds(i.getSeconds()+1)),{start:n,end:i}}},{name:"THISSECOND",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMilliseconds(0),i.setMilliseconds(0),i.setSeconds(i.getSeconds()+1),{start:n,end:i}}},{name:"SECONDTODATE",maxArgs:1,minArgs:0,evaluate:function(){var e,t,a=Array.prototype.slice.call(arguments),n=new Date,i=new Date;return a[0]&&(e=Uh()(Date,R()(null===(t=a[0])||void 0===t?void 0:t.split("/")))).setMonth(e.getMonth()-1),e&&(n=new Date(e),i=new Date(e)),n.setMilliseconds(0),i.setSeconds(i.getSeconds()+1,0),{start:n,end:i}}}].reduce(function(e,t){var a=t.name,n=t.evaluate;return F()({},e,V()({},a,n))},{});function ay(e,t){return{start:new Date(e,0,1),end:new Date(t+1,0,1)}}function ny(e,t,a,n){var i=3*n+3,r=12==i?1:1+i,o=12==i?a+1:a;return{start:new Date(e,3*t+1-1,1),end:new Date(o,r-1,1)}}function iy(e,t,a){return{start:new Date(e,a),end:new Date(new Date(t+1,a)-1)}}function ry(e){var t=function(e){var t=e.useAnchorDate?e.anchorDate:void 0,a=e.useOffset?e.offsetNumber:0,n=oh()(e,{anchorDate:{$set:Pl(t).add(a,"".concat(e.dateUnit,"s"))}}),i=n.dateRelativeType===H.DateRelativeType.LastN?n.lastDateNumber:n.dateRelativeType===H.DateRelativeType.NextN?n.nextDateNumber:null;if(!Number.isInteger(a)||!n.anchorDate.isValid()||null!==i&&(!Number.isInteger(i)||i<1))return null;var r="",o=n.fiscalInfo&&n.dateUnit===H.DateUnit.Year,s=-1<[H.DateUnit.Year,H.DateUnit.Quarter,H.DateUnit.Month,H.DateUnit.Week,H.DateUnit.Day].indexOf(n.dateUnit)&&!(n.dateUnit===H.DateUnit.Day&&n.dateRelativeType===H.DateRelativeType.ToDate)?"yyyy/MM/dd":"yyyy/MM/dd/HH/mm/ss";switch(n.dateRelativeType){case H.DateRelativeType.Last:case H.DateRelativeType.LastN:case H.DateRelativeType.Next:case H.DateRelativeType.NextN:var l;l=n.dateRelativeType===H.DateRelativeType.Last||n.dateRelativeType===H.DateRelativeType.Next?0:n.dateRelativeType===H.DateRelativeType.LastN?n.lastDateNumber:n.nextDateNumber,r+=n.dateRelativeType.substring(0,4),o&&(r+="fiscal"),r+=n.dateUnit,r+="(",o&&(r+=n.fiscalInfo.startMonth,r+=","),r+=l,r+=",",r+='"',r+=Il(n.anchorDate.toDate(),s),r+='"',r+=")";break;case H.DateRelativeType.This:r+=n.dateRelativeType,o&&(r+="fiscal"),r+=n.dateUnit,r+="(",o&&(r+=n.fiscalInfo.startMonth,n.useAnchorDate&&(r+=",")),r+='"',r+=Il(n.anchorDate.toDate(),s),r+='"',r+=")";break;case H.DateRelativeType.ToDate:o&&(r+="fiscal"),r+=n.dateUnit,r+=n.dateRelativeType,r+="(",o&&(r+=n.fiscalInfo.startMonth,n.useAnchorDate&&(r+=",")),r+='"',r+=Il(n.anchorDate.toDate(),s),r+='"',r+=")";break;default:throw new Error("Unexpected DateRelativeType: ".concat(n.dateRelativeType))}return r}(e);if(null==t)return{min:null,max:null,maxIncluded:!1,minIncluded:!0};var a=t.match(/^(\w+)\((.*)\)/);if(!a)throw new Error("Invalid expression: ".concat(t));var n=ty[a[1].toUpperCase()];if(!n)throw new Error("Can't find corresponding transform for: ".concat(a[1]));var i=a[2].split(",").map(function(e){return isNaN(+e)?e.slice(1,-1):+e}),r=n.apply(void 0,R()(i)),o=r.start,s=r.end;return{min:_l(_e()(o)),max:_l(_e()(s)),maxIncluded:!1,minIncluded:!0}}function oy(e){switch(e){case H.SubColumnTypes.Year:return Ft("patterns.datetime.parts.year");case H.SubColumnTypes.Quarter:return Ft("patterns.datetime.parts.quarter");case H.SubColumnTypes.Month:return Ft("patterns.datetime.parts.month");case H.SubColumnTypes.Week:return Ft("patterns.datetime.parts.week");case H.SubColumnTypes.Day:return Ft("patterns.datetime.parts.day");case H.SubColumnTypes.Hour:return Ft("patterns.datetime.parts.hour");case H.SubColumnTypes.Minute:return Ft("patterns.datetime.parts.minute");case H.SubColumnTypes.Second:return Ft("patterns.datetime.parts.second");case H.SubColumnTypes.Millisecond:return Ft("patterns.datetime.parts.millisecond")}}var sy=function(){function n(e,t,a){I()(this,n),this._columns={},this._option={},this._calculatedExpression=[],this.localCustomAttributes={},this._datasetSchema=e,this._languageResource=a||{},this._datasetProfile=t,(this._originDatasetSchema=e)&&(t&&t.customAttributes&&this.buildCustomAttributes(),e.calculatedExpression&&this.buildCalculatedExpressions(e.calculatedExpression))}return D()(n,[{key:"getEntityIdByName",value:function(t){var e=this._datasetSchema.entities.find(function(e){return e.name===t});return null==e?void 0:e.id}},{key:"makeAttributeId",value:function(e,t){return"".concat(e,"").concat(t)}},{key:"buildCustomAttribute",value:function(e){var t,a,n=e.entity,i=this.getEntityIdByName(n),r=this._datasetSchema.columns,o=e.name,s=this.makeAttributeId(n,o),l=!!r[s]||this.localCustomAttributes[s.toUpperCase()];return l&&(s=this.makeAttributeId(n,"".concat(o,"(Disabled)")),t=Ft("dataBindingPanel.invalidColumn.conflict")),a=e.type===H.CustomAttributeType.Measure||e.dataType===H.DatasetFieldDataType.Number?H.ColumnCategory.Measure:H.ColumnCategory.Dimension,{attributeId:s,attributeName:e.name,category:a,dataType:e.dataType,display:o,entityId:i,entityName:e.entity,format:qh(e.dataType),name:s,type:e.type===H.CustomAttributeType.Measure?H.DatasetExtendColumnType.CustomMeasure:H.DatasetExtendColumnType.CalculatedColumn,expression:e,disabled:l,isCalculatedExpression:!1,disabledTitle:t}}},{key:"isEntityAvailable",value:function(t){return!!this._datasetSchema.entities.find(function(e){return e.name===t})}},{key:"getEntityById",value:function(t){return this._datasetSchema.entities.find(function(e){return e.id===t})}},{key:"buildCustomAttributes",value:function(){var a=this,n=Object.assign({},this._datasetSchema.columns);this._datasetProfile.customAttributes.forEach(function(e){if(a.isEntityAvailable(e.entity)){var t=a.buildCustomAttribute(e);n[t.attributeId]=t,a.localCustomAttributes[t.attributeId.toUpperCase()]=t}}),this._datasetSchema=Object.assign(Object.assign({},this._datasetSchema),{columns:n})}},{key:"buildCalculatedExpressions",value:function(e){var i=this,r=Object.assign({},this._datasetSchema.columns);e.forEach(function(e){var t=i.getEntityById(e.entityID);if(t){var a=Object.assign(Object.assign({},e),{entity:t.name,isCalculatedExpression:!0}),n=i.buildCustomAttribute(a);n.isCalculatedExpression=!0,(r[n.attributeId]=n).disabled||i._calculatedExpression.push(a)}}),this._datasetSchema=Object.assign(Object.assign({},this._datasetSchema),{columns:r})}},{key:"isReady",value:function(){return null!=this._datasetSchema&&this._datasetSchema.status!==H.ServerDataStatus.LoadFailed&&this._datasetSchema.status!==H.ServerDataStatus.NoAccess&&this._datasetSchema.status!==H.ServerDataStatus.NotLoad}},{key:"isDownloadFailed",value:function(){return this._datasetSchema&&this._datasetSchema.status===H.ServerDataStatus.LoadFailed&&this._datasetSchema.status===H.ServerDataStatus.NoAccess}},{key:"getDatasetId",value:function(){return this._datasetSchema&&this._datasetSchema.id}},{key:"getDatasetType",value:function(){return this._datasetSchema&&this._datasetSchema.datasetType}},{key:"getDatasetSchema",value:function(){return this._originDatasetSchema}},{key:"getDatasetProfile",value:function(){return this._datasetProfile}},{key:"getLanguageResource",value:function(){return this._languageResource}},{key:"getSchemaColumns",value:function(e){return null==e?ae.values(this._datasetSchema.columns):ae.compose(ae.filter(ae.propEq("entityId",e)),ae.values)(this._datasetSchema.columns)}},{key:"getColumns",value:function(e){var t=this;if(!this.isReady())return[];var a=[];return this.getSchemaColumns(e).forEach(function(e){return a.push(t.getColumn(e.name))}),a}},{key:"getParameters",value:function(e){var t;return this.isReady()?null==e?null!==(t=this._datasetSchema.parameters)&&void 0!==t?t:[]:ae.filter(ae.propEq("entityId",e))(this._datasetSchema.parameters):[]}},{key:"getColumnDisplay",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t,n=this.getDatasetProfile(),i=e.name,r=ae.path(["nameMappings","".concat(i)],n);if(r)return r;if(e.type!==H.DatasetExtendColumnType.SubDate)return e.display;var o=oy(e.subColumnType),s=this.getColumn(e.parentColumnName);return a?o:"".concat(s.display,"(").concat(o,")")}},{key:"getDisplayTimezone",value:function(e){var t=this.getDatasetProfile(),a=ae.path(["displayTimezone","".concat(e)],t);return null!=a&&a}},{key:"getColumn",value:function(e){var t,a,n,i,r=this._columns[e];if(r)return r;if(t=this.isReady()?this._datasetSchema&&this._datasetSchema.columns&&this._datasetSchema.columns[e]:{name:e,display:e.replace(zo,"")}){r=Object.assign({},t);var o=this.getColumnDisplay(r);o&&(r.display=o),r.type===H.DatasetExtendColumnType.SubDate&&(r.miniDisplay=this.getColumnDisplay(r,!0));var s=(a=r,n=this._datasetProfile,i=a.format,n?ae.pathOr(i,["formats",a.name],n):i);s&&(r.format=s),r.formatter=zp(r),r.formatValue=pu(r.formatter,this._option),r.displayTimezone=this.getDisplayTimezone(r.type===H.DatasetExtendColumnType.SubDate?r.parentColumnName:r.name)}else r={entityId:this._datasetSchema.id,name:e,display:null==e?void 0:e.replace(zo,""),invalid:!0};return this._columns[e]=r}},{key:"getAllMeasures",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:{withoutCustomMeasure:!1,withoutDisabledAttribute:!1},n=a.withoutCustomMeasure,i=a.withoutDisabledAttribute,r=1<arguments.length?t:void 0,o=this.getColumns(r),s=ae.compose(ae.filter(function(e){return!i||!e.disabled}),ae.filter(function(e){return!e.invalid}),ae.filter(Jr.isMeasure))(o);return n?ae.filter(function(e){return!Jr.isCustomMeasure(e)},s):s}},{key:"getAllDimensions",value:function(e,t){var a=this,n=0<arguments.length&&void 0!==e?e:{},i=n.withoutHierarchy,r=void 0!==i&&i,o=n.withoutDisabledAttribute,s=void 0!==o&&o,l=1<arguments.length?t:void 0,u=this.getColumns(l),c=ae.filter(Jr.isDimension,u);if(!r&&this._datasetProfile){var d=ae.map(function(e){return a.getHierarchyDimension(e.hierarchyId)},this._datasetProfile.hierarchies||[]);c=ae.concat(c,d)}var p=ae.filter(function(e){return!e.invalid},c);return s&&(p=c.filter(function(e){return!e.disabled})),p}},{key:"getAllEntities",value:function(e){var n=this,t=0<arguments.length&&void 0!==e?e:{};if(!this.isReady())return[];var a=t.withoutCustomMeasure,i=void 0===a||a,r=t.withoutHierarchy,o=void 0===r||r,s=t.withoutDisabledAttribute,l=void 0!==s&&s,u=this.getDatasetFieldItems({withoutHierarchy:o,withoutCustomMeasure:i,withoutDisabledAttribute:l}),c=this.getParameters();return ae.compose(ae.values,ae.mapObjIndexed(function(e,t){return{id:t,name:(a=t,ae.compose(ae.prop("name"),ae.find(ae.propEq("id",a)))(n.rawEntities)),attributes:e,parameters:ae.filter(ae.propEq("entityId",t))(c)};var a}),ae.groupBy(ae.prop("entityId")))(u)}},{key:"getDatasetFieldItems",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:{},n=1<arguments.length?t:void 0;if(!this.isReady())return[];var i=a.withoutHierarchy,r=void 0===i||i,o=a.withoutCustomMeasure,s=void 0===o||o,l=a.withoutDisabledAttribute,u=void 0!==l&&l;return this.getAllMeasures({withoutCustomMeasure:s,withoutDisabledAttribute:u},n).concat(this.getAllDimensions({withoutHierarchy:r,withoutDisabledAttribute:u}))}},{key:"getHierarchyDimension",value:function(e){var a=this,t={name:e,display:e,invalid:!0};if(null==this._datasetProfile)return t;var n=ae.find(ae.propEq("hierarchyId",e),this._datasetProfile.hierarchies);if(null==n)return t;var i=ae.map(function(e){var t=a.getColumn(e.name);return t=ae.assoc("defaultDisplay",t.display,t),e.display&&(t=ae.assoc("display",e.display,t)),t},n.dims);return{entityId:this.getDatasetId(),name:e,display:n.display,category:H.ColumnCategory.Dimension,type:H.DatasetExtendColumnType.Hierarchy,subDims:i}}},{key:"getDateColumns",value:function(e){return this.getColumns(e).filter(Jr.isDate)}},{key:"hasDateColumns",value:function(e){return 0<this.getDateColumns(e).length}},{key:"getCustomAttributes",value:function(){var a=this,e=[];this._datasetProfile&&this._datasetProfile.customAttributes&&(e=this._datasetProfile.customAttributes.reduce(function(e,t){return void 0!==a.getEntityIdByName(t.entity)&&e.push({tableName:t.entity,columnId:t.name,type:t.type,definition:t.value}),e},[]));var t=this._calculatedExpression.map(function(e){return{tableName:e.entity,columnId:e.name,type:e.type,definition:e.value,_backendExpression:e}});return[].concat(R()(e),R()(t))}},{key:"isCustomMeasure",value:function(e){var t=this.getColumn(e);return!(!t||!Jr.isCustomMeasure(t))}},{key:"isValidColumn",value:function(e){return!!this.getColumn(e.attributeId)}},{key:"isSupportCustomAttribute",value:function(){return Jr.isActualDataset(this._datasetSchema)}},{key:"rawEntities",get:function(){var e,t;return null!==(t=null===(e=this._datasetSchema)||void 0===e?void 0:e.entities)&&void 0!==t?t:[]}},{key:"relationMapping",get:function(){var e,t;return null!==(t=null===(e=this._datasetSchema)||void 0===e?void 0:e.relationMapping)&&void 0!==t?t:{}}}]),n}(),ly=a(29),uy=a.n(ly),cy="GET",dy="PUT",py="POST",hy="DELETE",yy="REQUEST",gy="SUCCESS",my="FAILURE",fy="CANCEL";function vy(a){return[yy,gy,my,fy].reduce(function(e,t){return e[t]="".concat(a,"_").concat(t),e},{})}var by,Cy;vy("COMMON"),by="DASHBOARD",Cy={},[cy,dy,py,hy].forEach(function(e){Cy[e]=vy("".concat(by,"_").concat(e))}),vy("DATASETINFOLIST"),vy("DATASETDATA"),vy("DATASETAGGREGATEDDATA"),vy("DOCTHEME"),vy("DOCTHEMELIST"),vy("FONTLIST"),vy("IMAGELIST"),vy("TAGLIST"),vy("REPORTDOCLIST"),vy("DASHBOARDDOCLIST"),vy("WEB_CONTENT_TEMPLATE_LIST"),vy("ENSUREDOCUMENTACCESS"),vy("USER"),vy("USER_PERMISSION"),vy("CUSTOM_VISUAL_LIST"),vy("TAGWITHDASHBOARDDOCLIST"),vy("DOCUMENT_META"),vy("LANGUAGE_RESOURCE_LIST"),vy("LANGUAGE_RESOURCE");var Ty,Sy,Dy=[{id:H.BuildInBorderEnums.None,name:"inspector.properties.common.border.type.none"},{id:H.BuildInBorderEnums.Default,name:"inspector.properties.common.border.type.default",border:{top:{width:10,height:10,children:[{type:"path",d:"M0,0 h10"}]},right:{width:10,height:10,children:[{type:"path",d:"M10,0 v10"}]},bottom:{width:10,height:10,children:[{type:"path",d:"M0,10 h10"}]},left:{width:10,height:10,children:[{type:"path",d:"M0,0 v10"}]}}},{id:"buildin-round-corner",name:"inspector.properties.common.border.type.roundCorner",border:{top:{width:10,height:10,children:[{type:"path",d:"M0,0 h10"}]},right:{width:10,height:10,children:[{type:"path",d:"M10,0 v10"}]},bottom:{width:10,height:10,children:[{type:"path",d:"M0,10 h10"}]},left:{width:10,height:10,children:[{type:"path",d:"M0,0 v10"}]}},corner:{topLeft:{width:10,height:10,children:[{type:"path",d:"M10,0 A 10 10 0 0 0 0 10"}]},topRight:{width:10,height:10,children:[{type:"path",d:"M10,10 A 10 10 0 0 0 0 0"}]},bottomLeft:{width:10,height:10,children:[{type:"path",d:"M0,0 A 10 10 0 0 0 10 10"}]},bottomRight:{width:10,height:10,children:[{type:"path",d:"M0,10 A 10 10 0 0 0 10 0"}]}}},{id:"thick-corner",name:"inspector.properties.common.border.type.thickCorner",border:{top:{width:10,height:10,children:[{type:"path",d:"M0,0 h10"}]},right:{width:10,height:10,children:[{type:"path",d:"M10,0 v10"}]},bottom:{width:10,height:10,children:[{type:"path",d:"M0,10 h10"}]},left:{width:10,height:10,children:[{type:"path",d:"M0,0 v10"}]}},corner:{topLeft:{width:20,height:20,children:[{type:"path",d:"M0,0 h20 M0,0 v20 z"},{type:"path",d:"M0,1 h20 M1,0 v20 z"}]},topRight:{width:20,height:20,children:[{type:"path",d:"M20,0 h-20 M20,0 v20 z"},{type:"path",d:"M20,1 h-20 M19,0 v20 z"}]},bottomLeft:{width:20,height:20,children:[{type:"path",d:"M0,20 h20 M0,20 v-20 z"},{type:"path",d:"M0,19 h20 M1,20 v-20 z"}]},bottomRight:{width:20,height:20,children:[{type:"path",d:"M20,20 h-20 M20,20 v-20 z"},{type:"path",d:"M20,19 h-20 M19,20 v-20 z"}]}}},{id:"buildin-double-border",name:"inspector.properties.common.border.type.doubleBorder",border:{top:{width:10,height:10,children:[{type:"path",d:"M0,0 h10"},{type:"path",d:"M0,4 h10"}]},right:{width:10,height:10,children:[{type:"path",d:"M10,0 v10"},{type:"path",d:"M6,0 v10"}]},bottom:{width:10,height:10,children:[{type:"path",d:"M0,10 h10"},{type:"path",d:"M0,6 h10"}]},left:{width:10,height:10,children:[{type:"path",d:"M0,0 v10"},{type:"path",d:"M4,0 v10"}]}}},{id:"buildin-stylish-border-1",name:"inspector.properties.common.border.type.stylishBorder_1",border:{top:{width:10,height:10,children:[{type:"path",d:"M0,5 h10"}]},right:{width:10,height:10,children:[{type:"path",d:"M5,0 v10"}]},bottom:{width:10,height:10,children:[{type:"path",d:"M0,5 h10"}]},left:{width:10,height:10,children:[{type:"path",d:"M5,0 v10"}]}},corner:{topLeft:{width:10,height:10,children:[{type:"path",d:"M3,3 l4,0 m0,0 v4 m0,0 h-4, m0,0 v-4 z"}]},topRight:{width:10,height:10,children:[{type:"path",d:"M3,3 l4,0 m0,0 v4 m0,0 h-4, m0,0 v-4 z"}]},bottomLeft:{width:10,height:10,children:[{type:"path",d:"M3,3 l4,0 m0,0 v4 m0,0 h-4, m0,0 v-4 z"}]},bottomRight:{width:10,height:10,children:[{type:"path",d:"M3,3 l4,0 m0,0 v4 m0,0 h-4, m0,0 v-4 z"}]}}},{id:"buildin-stylish-border-2",name:"inspector.properties.common.border.type.stylishBorder_2",border:{top:{width:10,height:10,children:[{type:"path",d:"M0,8 h10"},{type:"path",d:"M0,0 h10"}]},right:{width:10,height:10,children:[{type:"path",d:"M2,0 v10"},{type:"path",d:"M10,0 v10"}]},bottom:{width:10,height:10,children:[{type:"path",d:"M0,10 h10"},{type:"path",d:"M0,2 h10"}]},left:{width:10,height:10,children:[{type:"path",d:"M0,0 v10"},{type:"path",d:"M8,0 v10"}]}},corner:{topLeft:{width:8,height:25,children:[{type:"path",d:"M0,0 h8 m0,8 l-8,0 m0,0 v8 m0,0 l8,3 m-8,0 l8,3 m0,0 v3 z"}]},topRight:{width:25,height:8,children:[{type:"path",d:"M0,8 h3 m0,0 l3,-8 m0,8 l3,-8 m0,0 h8 m0,0 v8 m8,0 v-8 z"}]},bottomLeft:{width:25,height:8,children:[{type:"path",d:"M0,0 v8 m8,-8 v8 m0,0 h8 m0,0 l3,-8 m0,8 l3,-8 m0,0 h3 z"}]},bottomRight:{width:8,height:25,children:[{type:"path",d:"M0,0 v3 m0,0 l8,3 m-8,0 l8,3 m0,0 v8 m0,0 h-8 m0,8 h8 z"}]}}}];(Sy=Ty=Ty||{})[Sy.Unchecked=0]="Unchecked",Sy[Sy.Checked=1]="Checked",Sy[Sy.Indeterminate=2]="Indeterminate";function ky(e,t,a){var n=null==a||a.expanded,i=t.children&&0<t.children.length,r=i&&!!n&&t.expanded,o={level:null==a?0:a.level+1,hasChild:i,expanded:r,checked:t.checked,display:t.display,value:t.value,formatValueFn:t.formatValueFn,visibleByExpanded:n,visible:t.visible,key:t.key,nodeInstance:t,parent:a&&a.key||null};return e||(o.checkedForRender=t.checked),o}function wy(e,t){for(var a=null==t?-1:t.level,n=e[e.length-1],i=null;n&&n.level>a;){null==i?i=n.checkedForRender:2!==i&&i!==n.checkedForRender&&(i=2),e.pop();var r=n;(n=e[e.length-1])&&n.level<r.level&&(n.checkedForRender=i,i=null)}n&&null!=i&&(n.checkedForRender=i),null!=t&&e.push(t)}function xy(e,t){var a=t.key;if(0<t.level){var n=a.substring(0,a.lastIndexOf("_"));return e[e._dict[n]]}return null}function Ay(e,t){for(var a=-1,n=e[t].level,i=t+1;i<e.length&&e[i].level>n;i++)a=i;return a}function Iy(t,e,a,n){var i=3<arguments.length&&void 0!==n?n:[];if(null!=e&&e.hasChild){var r=a,o=a;(function(e,t){for(var a=[],n=t.index+1;n<e.length;n++){var i=e[n];if(i.level===t.level+1)a.push(i);else if(i.level<=t.level)break}return a})(t,e).forEach(function(e){e.visible&&(Iy(t,e,a,i),e.nodeInstance.checkedForRender!==o&&(o=2)),e.nodeInstance.checked!==r&&(r=2)}),e.nodeInstance.checked=r,e.nodeInstance.checkedForRender=o}else e.nodeInstance.checked=a,e.nodeInstance.checkedForRender=a;return(e.checked!==e.nodeInstance.checked||void 0!==e.nodeInstance.checkedForRender&&e.checkedForRender!==e.nodeInstance.checkedForRender)&&i.push(e),i}function Py(e,t){var a=xy(e,t);if(null==a)return null;var n=t.nodeInstance,i=n.checked,r=n.checkedForRender;return function(e,t){for(var a=[],n=t.index-1;0<=n;n--){var i=e[n];if(i.level===t.level)a.push(i);else if(i.level<t.level)break}for(var r=t.index+1;r<e.length;r++){var o=e[r];if(o.level===t.level)a.push(o);else if(o.level<t.level)break}return a}(e,t).forEach(function(e){e.visible&&e.checkedForRender!==r&&(r=2),e.checked!==i&&(i=2)}),a.nodeInstance.checked=i,a.nodeInstance.checkedForRender=r,a}function _y(e,t){for(var a=[],n=Py(e,t);null!=n;)(n.checked!==n.nodeInstance.checked||void 0!==n.nodeInstance.checkedForRender&&n.checkedForRender!==n.nodeInstance.checkedForRender)&&a.push(n),n=Py(e,n);return a}function My(e,t,a,n){if(!(3<arguments.length&&void 0!==n&&n))return ae.concat(Iy(e,t,a),_y(e,t));var i=function(e,t){for(var a=[],n=[t.key],i=xy(e,t);i;)n.push(i.key),i=xy(e,i);return e.forEach(function(e){n.includes(e.key)||0===e.checked&&0===e.checkedForRender||(e.nodeInstance.checked=0,e.nodeInstance.checkedForRender=0,a.push(e))}),a}(e,t),r=i.map(function(e){return[e.index,1,Object.assign(Object.assign({},e),{checked:e.nodeInstance.checked,checkedForRender:e.nodeInstance.checkedForRender})]}),o=oh()(e,{$splice:r});return ae.concat(i,Iy(o,t,1),_y(o,t))}function Ly(e,t){return e===t}function Ry(e,t){return ae.zipWith(Ly,e,t).every(ae.identity)}function Vy(e,t){var a=e.toLowerCase(),n=t.toLowerCase();if(a.indexOf("*")<0&&a.indexOf("?")<0)return 0<=n.indexOf(a);var i=function(e){if(!e||e.indexOf("*")<0&&e.indexOf("?")<0)return e;for(var t=["$","^","[","]","(",")","{","}","","+",".","\\"],a="^",n=0;n<e.length;n++){var i=e.charAt(n);if(0<=t.indexOf(i))a+="\\".concat(i);else switch(i){case"*":a+=".*";break;case"?":a+=".{1}";break;default:a+=i}}return a+="$"}(a);return!!n.match(i)}function Ny(e){return e.display?e.display:e.display=e.formatValueFn(e.value)}function Ey(e){return e&&Array.isArray(e.children)&&0<e.children.length}function Fy(e,t){return e.children.some(function(e){return!(!e.inAffectedTree||!Vy(t,Ny(e)))||(Ey(e)?Fy(e,t):e.inAffectedTree&&Vy(t,Ny(e)))})}function Oy(e){return e.reduce(function(e,t,a){return e[xl(t.value)]=a,e},{})}function Hy(e,s,l){return e.map(function(e){function t(e){return""===s||Vy(s,e)}var a=e;if(e.inAffectedTree)if(Ey(e)){var n=t(Ny(a));if(n){a.visible!==n&&(a.visible=n);var i=function a(e){return e.map(function(e){var t=e;return t.inAffectedTree&&(t.visible||(t.visible=!0),null!==t.children&&(t.children=a(t.children))),t})}(a.children);Ry(a.children,i)||(a.children=i)}else{var r=Fy(a,s);a.visible!==r&&(a.visible=r),a.expanded!==r&&(a.expanded=r);var o=Hy(a.children,s,l);Ry(a.children,o)||(a.children=o)}}else e.visible!==t(Ny(e))&&(a.visible=!e.visible);return l&&(l("visible",a.key,a.visible),l("expanded",a.key,a.expanded)),a})}function By(e,t,a,n){function i(e){return e.reduce(function(e,t,a){return e[xl(p?t.id:t.value)]=a,e},{})}var r=1<arguments.length&&void 0!==t?t:[],o=2<arguments.length&&void 0!==a?a:[],p=3<arguments.length&&void 0!==n&&n,h=p?i(r):void 0;return function s(e,t,a,n){var l=1<arguments.length&&void 0!==t?t:[],u=2<arguments.length?a:void 0,c=3<arguments.length?n:void 0,d=p?h:i(l);return e.map(function(e,t){var a=ae.head(c),n=Object.assign({},e),i=xl(p?e.id:e.value),r=l[d[i]],o=u.key?"".concat(u.key,"_"):"";return n.key="".concat(o).concat(t),n.nodeKey=i,n.display=n.display||a.formatValue(n.value),n.formatValueFn=a.formatValue,n.inAffectedTree=!!r,n.visible=!!r,n.expanded=!1,Ey(e)?n.children=s(n.children,p?l:r&&r.children,n,p?c:ae.drop(1,c)):n.children=null,n})}(e,r,{},o)}function Uy(e,t,r,o){function s(e,t,a){var n=a;if(0===t&&(n+="["),n+="'".concat(r[o?0:t].formatValue(e.value),"'"),e.children&&e.children.length){n+=Ft("slicers.AND");for(var i=0;i<e.children.length&&(s(e.children[i],t+1,n),!(10<l.length));i++);}else n+="]",l.push(n)}var a,n=e,l=[];if(0<t.length)if(1<r.length||o){for(var i=0;i<t.length;i++,l.length)s(t[i],0,"");n=10<l.length?"".concat(ae.compose(ae.join(","),ae.slice(0,10))(l),"..."):ae.join(",",l)}else if(1===r.length){n="";for(var u=0;u<t.length;u++){if(n+="".concat(r[0].formatValue(null!==(a=t[u].display)&&void 0!==a?a:t[u].value)),9===u){n+="...";break}u<10&&u<t.length-1&&(n+=",")}}return n}function zy(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:0;return e.bottom-t>a.height+i}function Ky(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:0;return t-e.top>a.height+i}function jy(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:0;return e.right-t>a.width+i}function Wy(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:0;return t-e.left>a.width+i}function Gy(l){return function(e,t,a){var n,i=l.type,r=l.preferAlign,o=l.forcePopup,s=void 0!==o&&o;switch(i){case"bottom":n=function(e,t,a,n,i){var r,o,s=3<arguments.length&&void 0!==n?n:"start";if(4<arguments.length&&void 0!==i&&i||zy(e,t.bottom,a,a.gap)){var l=t.bottom+a.gap,u=function(){if(jy(e,t.left,a))return{top:l,left:t.left}},c=function(){if(Wy(e,t.right,a))return{top:l,left:t.right-a.width}};return"start"===s?null!==(r=u())&&void 0!==r?r:c():null!==(o=c())&&void 0!==o?o:u()}}(e,t,a,r,s);break;case"top":n=function(e,t,a,n,i){var r,o,s=3<arguments.length&&void 0!==n?n:"start";if(4<arguments.length&&void 0!==i&&i||Ky(e,t.top,a,a.gap)){var l=t.top-a.height-a.gap,u=function(){if(jy(e,t.left,a))return{top:l,left:t.left}},c=function(){if(Wy(e,t.right,a))return{top:l,left:t.right-a.width}};return"start"===s?null!==(r=u())&&void 0!==r?r:c():null!==(o=c())&&void 0!==o?o:u()}}(e,t,a,r,s);break;case"right":n=function(e,t,a,n,i){var r,o,s=3<arguments.length&&void 0!==n?n:"start";if(4<arguments.length&&void 0!==i&&i||jy(e,t.right,a,a.gap)){var l=t.right+a.gap,u=function(){if(zy(e,t.top,a))return{top:t.top,left:l}},c=function(){if(Ky(e,t.bottom,a))return{top:t.bottom-a.height,left:l}};return"start"===s?null!==(r=u())&&void 0!==r?r:c():null!==(o=c())&&void 0!==o?o:u()}}(e,t,a,r,s);break;case"left":n=function(e,t,a,n,i){var r,o,s=3<arguments.length&&void 0!==n?n:"start";if(4<arguments.length&&void 0!==i&&i||Wy(e,t.left,a,a.gap)){var l=t.left-a.width-a.gap,u=function(){if(zy(e,t.top,a))return{top:t.top,left:l}},c=function(){if(Ky(e,t.bottom,a))return{top:t.bottom-a.height,left:l}};return"start"===s?null!==(r=u())&&void 0!==r?r:c():null!==(o=c())&&void 0!==o?o:u()}}(e,t,a,r,s)}if(null!=n)return Object.assign({type:i},n)}}function Yy(e,t,a){var n=t.popInside?a:1,i=t.gapInside?a:1;return{width:n*((null==e?void 0:e.width)||0),height:n*((null==e?void 0:e.height)||0),gap:i*((null==e?void 0:e.gap)||0)}}function qy(e,t,a,n,i){for(var r=4<arguments.length&&void 0!==i?i:1,o=t.getBoundingClientRect(),s=0,l=a.length;s<l;s++){var u=a[s],c=Yy(u.size,n,r),d=Gy(u)(o,e,c);if(null!=d)return d}var p=Yy(n.defaultPopoverSize,n,r),h=e.top;h+p.height+p.gap>o.bottom?(h=o.bottom-p.height-p.gap)<0&&(h=0):h-=n.defaultPopoverSize.top||0;var y=e.right-p.width-p.gap;return y<o.left&&(y=o.left),{type:"default",top:h,left:y}}function Jy(e,t){var a={left:0,top:0},n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return i.left<n.left?a.left=n.left-i.left:i.right>n.right&&(a.left=n.right-i.right),i.top<n.top&&(a.top=i.height+20),a}function Xy(e){var t="";if(e.type!==Ii){var a="".concat(3*e.size,"px ").concat(e.size,"px"),n=e.color;switch(e.type){case Pi:t="inset 0 0 ".concat(a," ").concat(n,", 0 0 ").concat(a," ").concat(n);break;case _i:t="inset 0 0 ".concat(a," ").concat(n);break;case Mi:t="0 0 ".concat(a," ").concat(n)}}return t}function Qy(e,t){return e||t}function Zy(e,t){var a=e.options,n=e.node,i=e.docTheme,r=1<arguments.length&&void 0!==t?t:{height:1},o=a;a.slicerStyle&&(o=ae.mergeDeepLeft(o,ns.find(function(e){return e.id===o.slicerStyle}).relativeDateStyles));var s=o.firstImage,l=o.lastImage,u=o.widthAdaptive,c=o.orientation,d=o.textAlign,p=o.textVerticalAlign,h=o.optionPadding,y=o.slicerItemsVerticalAlignment,g=o.optionMargin,m=o.optionWidth,f=o.optionHeight,v=o.contentRadius,b=o.collapseBorder,C=o.optionBackgroundColor,T=o.isWrap,S=o.gradient,D=o.backgroundPadding,k=o.scale,w=void 0===k?1:k,x=o.regular,A=o.hover,I=o.selected;if(!a.optionPadding&&a.contentTextStyle){var P=a.contentTextStyle;if(x&&x.font){var _=ae.mergeDeepWith(Qy,x.font,P);x=ae.assoc("font",_,x)}if(I&&I.font){var M=ae.mergeDeepWith(Qy,I.font,P);I=ae.assoc("font",M,I)}if(A&&A.font){var L=ae.mergeDeepWith(Qy,A.font,P);A=ae.assoc("font",L,A)}}var R=n.style;if(R.setProperty("--option-margin","".concat(g,"px")),R.setProperty("--option-height","".concat(f*r.height,"px")),R.setProperty("--option-background-color",C),R.setProperty("--option-padding","".concat(h.top,"px ").concat(h.right,"px ").concat(h.bottom,"px ").concat(h.left,"px")),R.setProperty("--option-padding-left","".concat(h.left,"px")),R.setProperty("--option-padding-right","".concat(h.right,"px")),o.orientation===Qn?y===ka?(n.classList.add("vertical-alignment-middle"),n.classList.remove("vertical-alignment-bottom")):y===wa?(n.classList.add("vertical-alignment-bottom"),n.classList.remove("vertical-alignment-middle")):n.classList.remove("vertical-alignment-middle","vertical-alignment-bottom"):n.classList.remove("vertical-alignment-middle","vertical-alignment-bottom"),d===Da?(n.classList.add("text-align-left"),n.classList.remove("text-align-center","text-align-right")):d===ka?(n.classList.add("text-align-center"),n.classList.remove("text-align-left","text-align-right")):d===wa&&(n.classList.add("text-align-right"),n.classList.remove("text-align-left","text-align-center")),p===Da?R.setProperty("--option-vertical-align","flex-start"):p===ka?R.setProperty("--option-vertical-align","center"):p===wa&&R.setProperty("--option-vertical-align","flex-end"),u?R.removeProperty("--option-width"):(c===Xn&&R.setProperty("--option-width","".concat(m,"px")),c===Qn&&R.removeProperty("--option-width")),D?(R.setProperty("--content-padding","".concat(D.top,"px ").concat(D.right,"px ").concat(D.bottom,"px ").concat(D.left,"px")),R.setProperty("--content-topleft-padding","".concat(D.left,"px")),R.setProperty("--content-topright-padding","".concat(D.top,"px")),R.setProperty("--content-bottomleft-padding","".concat(D.right,"px")),R.setProperty("--content-bottomright-padding","".concat(D.bottom,"px"))):(R.setProperty("--content-topleft-padding","0px"),R.setProperty("--content-topright-padding","0px"),R.setProperty("--content-bottomleft-padding","0px"),R.setProperty("--content-bottomright-padding","0px")),S?R.setProperty("--content-background-image",S):R.removeProperty("--content-background-image"),v&&!T?(R.setProperty("--content-topleft-radius","".concat(v.left*r.height,"px")),R.setProperty("--content-topright-radius","".concat(v.top*r.height,"px")),R.setProperty("--content-bottomleft-radius","".concat(v.right*r.height,"px")),R.setProperty("--content-bottomright-radius","".concat(v.bottom*r.height,"px"))):(R.setProperty("--content-topleft-radius","0px"),R.setProperty("--content-topright-radius","0px"),R.setProperty("--content-bottomleft-radius","0px"),R.setProperty("--content-bottomright-radius","0px")),b&&0===g?n.classList.add("collapseBorder"):n.classList.remove("collapseBorder"),s){n.classList.add("option-first-image");var V='url("'.concat(d$.accessService.attachBaseUrlAndToken(s),'")');R.setProperty("--option-first-image",V)}else n.classList.remove("option-first-image"),R.removeProperty("--option-first-image");if(l?(n.classList.add("option-last-image"),R.setProperty("--option-last-image","url(".concat(l.toString(),")"))):(n.classList.remove("option-last-image"),R.removeProperty("--option-last-image")),x){if(R.setProperty("--regular-font-family",x.font.fontFamily),R.setProperty("--regular-font-color",x.font.color),R.setProperty("--regular-font-weight",Uu(x.font.fontWeight)),R.setProperty("--regular-font-size",Jc(x.font.fontSize,w)),R.setProperty("--regular-font-style",x.font.fontStyle),x.image||x.gradient?(n.classList.add("regular-show-image"),x.gradient?R.setProperty("--regular-background-image",x.gradient):R.setProperty("--regular-background-image","url(".concat(x.image.toString(),")"))):(n.classList.remove("regular-show-image"),R.removeProperty("--regular-background-image")),x.showBorder?(n.classList.add("regular-show-border"),R.setProperty("--regular-border-color",x.borderColor),R.setProperty("--regular-border-width","".concat(x.thickness,"px"))):(n.classList.remove("regular-show-border"),R.removeProperty("--regular-border-color"),R.setProperty("--regular-border-width","0px"),R.removeProperty("--regular-border-image")),x.shadow&&x.shadow.type!==Ii){var N=Xy(x.shadow);R.setProperty("--regular-shadow",N),n.classList.add("regular-show-shadow")}else R.removeProperty("--regular-shadow"),n.classList.remove("regular-show-shadow");if(x.showMarkingLine){var E=x.markingLine,F=E.length,O=E.thickness,H=E.position,B=E.color,U=E.offset;n.classList.remove("regular-top","regular-right","regular-bottom","regular-left"),n.classList.add("regular-show-markingLine","regular-".concat(H)),R.setProperty("--regular-markingLine-length","".concat(F,"%")),R.setProperty("--regular-markingLine-thickness","".concat(O,"px")),R.setProperty("--regular-markingLine-color","".concat(B)),R.setProperty("--regular-markingLine-offset","".concat(-U,"px"))}else n.classList.remove("regular-show-markingLine","regular-top","regular-right","regular-bottom","regular-left"),R.removeProperty("--regular-markingLine-width"),R.removeProperty("--regular-markingLine-height");R.setProperty("--regular-background-color",x.backgroundColor),R.setProperty("--regular-topleft-radius","".concat(x.borderRadius.left*r.height,"px")),R.setProperty("--regular-topright-radius","".concat(x.borderRadius.top*r.height,"px")),R.setProperty("--regular-bottomleft-radius","".concat(x.borderRadius.right*r.height,"px")),R.setProperty("--regular-bottomright-radius","".concat(x.borderRadius.bottom*r.height,"px"))}if(A){if(R.setProperty("--hover-font-family",A.font.fontFamily),R.setProperty("--hover-font-color",A.font.color),R.setProperty("--hover-font-weight",Uu(A.font.fontWeight)),R.setProperty("--hover-font-size",Jc(A.font.fontSize,w)),R.setProperty("--hover-font-style",A.font.fontStyle),A.showBorder?(n.classList.add("hover-show-border"),R.setProperty("--hover-border-color",A.borderColor),R.setProperty("--hover-border-width","".concat(A.thickness,"px")),R.setProperty("--hover-border-image",A.image)):(n.classList.remove("hover-show-border"),R.removeProperty("--hover-border-color"),R.removeProperty("--hover-border-width"),R.removeProperty("--hover-border-image")),A.image||A.gradient?(n.classList.add("hover-show-image"),A.gradient?R.setProperty("--hover-background-image",A.gradient):R.setProperty("--hover-background-image","url(".concat(A.image.toString(),")"))):(n.classList.remove("hover-show-image"),R.removeProperty("--hover-background-image")),A.showMarkingLine){var z=A.markingLine,K=z.length,j=z.thickness,W=z.position,G=z.color,Y=z.offset;n.classList.remove("hover-top","hover-right","hover-bottom","hover-left"),n.classList.add("hover-show-markingLine","hover-".concat(W)),R.setProperty("--hover-markingLine-length","".concat(K,"%")),R.setProperty("--hover-markingLine-thickness","".concat(j,"px")),R.setProperty("--hover-markingLine-color","".concat(G)),R.setProperty("--hover-markingLine-offset","".concat(-Y,"px"))}else n.classList.remove("hover-show-markingLine","hover-top","hover-right","hover-bottom","hover-left"),R.removeProperty("--hover-markingLine-width"),R.removeProperty("--hover-markingLine-height");if(A.shadow&&A.shadow.type!==Ii){var q=Xy(A.shadow);R.setProperty("--hover-shadow",q),n.classList.add("hover-show-shadow")}else R.removeProperty("--hover-shadow"),n.classList.remove("hover-show-shadow");R.setProperty("--hover-background-color",A.backgroundColor),R.setProperty("--hover-topleft-radius","".concat(A.borderRadius.left*r.height,"px")),R.setProperty("--hover-topright-radius","".concat(A.borderRadius.top*r.height,"px")),R.setProperty("--hover-bottomleft-radius","".concat(A.borderRadius.right*r.height,"px")),R.setProperty("--hover-bottomright-radius","".concat(A.borderRadius.bottom*r.height,"px"))}if(I){if(R.setProperty("--selected-font-family",I.font.fontFamily),R.setProperty("--selected-font-color",Vc(I.font.color,i)),R.setProperty("--selected-font-weight",Uu(I.font.fontWeight)),R.setProperty("--selected-font-size",Jc(I.font.fontSize,w)),R.setProperty("--selected-font-style",I.font.fontStyle),I.showBorder?(n.classList.add("selected-show-border"),R.setProperty("--selected-border-color",Vc(I.borderColor||I.font.color,i)),R.setProperty("--selected-border-width","".concat(I.thickness,"px")),R.setProperty("--selected-border-image",I.image)):(n.classList.remove("selected-show-border"),R.removeProperty("--selected-border-color"),R.removeProperty("--selected-border-width"),R.removeProperty("--selected-border-image")),I.image||I.gradient?(n.classList.add("selected-show-image"),I.gradient?R.setProperty("--selected-background-image",I.gradient):R.setProperty("--selected-background-image","url(".concat(I.image.toString(),")"))):(n.classList.remove("selected-show-image"),R.removeProperty("--selected-background-image")),I.showMarkingLine){var J=I.markingLine,X=J.length,Q=J.thickness,Z=J.position,$=J.color,ee=J.offset;n.classList.remove("selected-top","selected-right","selected-bottom","selected-left"),n.classList.add("selected-show-markingLine","selected-".concat(Z)),R.setProperty("--selected-markingLine-length","".concat(X,"%")),R.setProperty("--selected-markingLine-thickness","".concat(Q,"px")),R.setProperty("--selected-markingLine-color","".concat($)),R.setProperty("--selected-markingLine-offset","".concat(-ee,"px"))}else n.classList.remove("selected-show-markingLine","selected-top","selected-right","selected-bottom","selected-left"),R.removeProperty("--selected-markingLine-width"),R.removeProperty("--selected-markingLine-height");if(I.shadow&&I.shadow.type!==Ii){var te=Xy(I.shadow);R.setProperty("--selected-shadow",te),n.classList.add("selected-show-shadow")}else R.removeProperty("--selected-shadow"),n.classList.remove("selected-show-shadow");R.setProperty("--selected-background-color",I.backgroundColor),R.setProperty("--selected-topleft-radius","".concat(I.borderRadius.left*r.height,"px")),R.setProperty("--selected-topright-radius","".concat(I.borderRadius.top*r.height,"px")),R.setProperty("--selected-bottomleft-radius","".concat(I.borderRadius.right*r.height,"px")),R.setProperty("--selected-bottomright-radius","".concat(I.borderRadius.bottom*r.height,"px"))}}function $y(e,t){var a,n=1<arguments.length&&void 0!==t&&t,i=e.docTheme,r=e.id,o=e.displayMode,s=e.dashboardImageList,l=e.backgroundColor,u=e.repeat,c=e.vAlign,d=e.hAlign,p={backgroundColor:Vc(l,i),backgroundSize:o,backgroundRepeat:u,backgroundPosition:"".concat(c," ").concat(d)};if(r)if(n){var h=function(t,e){var a,n=1<arguments.length&&void 0!==e?e:[];if(t){var i=ae.find(function(e){return e.id===t},n);if(null!=i)return i.src;if(al(t))return t;var r=d$.globalConfigManager.get("dashboardId"),o=Hs.serverImageList(null===(a=d$.reduxProxy)||void 0===a?void 0:a.getState()),s=ae.find(function(e){return e.id===t},o);return null!=s&&s.src||"/api/dashboardResources/image/".concat(t,"?dashboardId=").concat(r)}}(r,s);if(null!=h){var y=(a=h,d$.accessService.attachBaseUrlAndToken(a));p.backgroundImage="url(".concat(y,")")}}else p.backgroundImage=r;return p}var eg,tg,ag,ng,ig,rg,og,sg,lg,ug,cg,dg,pg,hg,yg,gg,mg,fg,vg,bg=ae.curry(function(e,t){var a,n,i,r=t.containerId;return null==r||((a=r,n=d$.reduxProxy.getState(),!!(i=n&&a&&Hs.scenarioById(a,n))&&d$.definitionManager.getDefinition(i).getPropertyValue("filterScope",i)===Rr)||r===e.containerId&&t.tabId===e.tabId)});tg=eg=eg||{},(ag=tg.DataRoleOptionType||(tg.DataRoleOptionType={})).Enum="enum",ag.Format="format",ag.DisplayUnit="displayUnit",ag.ScaleType="_scaleType",ag.AffectValue="_affectValue",(ng=tg.DataRoleTemplateOptionType||(tg.DataRoleTemplateOptionType={})).Enum="enum",ng.HBarSetting="_HBarSetting",ng.ParetoSetting="_paretoSetting",ng.BulletSetting="_bulletSetting",ng.SlicerSetting="_slicerSetting",(ig=tg.DataRoleItemOptionType||(tg.DataRoleItemOptionType={})).Enum="enum",ig.Format="format",ig.DisplayUnit="displayUnit",ig.RenderSetting="renderSetting",ig.Alignment="_alignment",(og=rg=rg||{}).All="all",og.First="first",og.Last="last",lg=sg=sg||{},(ug=lg.PublicPropertyType||(lg.PublicPropertyType={})).Text="Text",ug.Integer="Integer",ug.Float="Float",ug.Boolean="Boolean",ug.LongText="LongText",ug.Enum="Enum",ug.Color="Color",ug.Percentage="Percentage",ug.Format="Format",ug.DisplayUnit="DisplayUnit",ug.Angle="Angle",ug.Slider="Slider",ug.Palette="Palette",ug.TextStyle="TextStyle",ug.Position="Position",ug.Image="Image",ug.Hidden="Hidden",ug.ColorAssignment="ColorAssignment",ug.Collection="Collection",ug.ClickAction="ClickAction",(cg=lg.PrivatePropertyType||(lg.PrivatePropertyType={})).Border="_Border",cg.Shadow="_Shadow",cg.ShadowInterger="_ShadowInterger",cg.DocTheme="_DocTheme",cg.ColorRange="_ColorRange",cg.AutoScroll="_AutoScroll",cg.GrandTotal="_GrandTotal",cg.MapSelector="_MapSelector",cg.KPIConditionalPreviewEditor="_KPIConditionalPreviewEditor",cg.Parameter="_Parameter",cg.Filter="_Filter",cg.ReferenceLine="_ReferenceLine",cg.TrendLine="_TrendLine",cg.ConditionalFormat="_ConditionalFormat",cg.FilterScope="_FilterScope",cg.AutoTitle="_AutoTitle",cg.DataTableStyleTemplate="_DataTableStyleTemplate",cg.KPIMatrixStyleTemplate="_KPIMatrixStyleTemplate",cg.PivotTableStyleTemplate="_PivotTableStyleTemplate",cg.HiddenActions="_HiddenActions",cg.FloorPlanSelector="_FloorPlanSelector",cg.ScaleString="_ScaleString",cg.SeriesTotal="_SeriesTotal",cg.ContentSetting="_ContentSetting",cg.BorderSize="_BorderSize",cg.Gradient="_Gradient",cg.SlicerStyle="_SlicerStyle",cg.ScenarioName="_ScenarioName",cg.DateRangePicker="_DateRangePicker",cg.QuickRangeCollection="_QuickRangeCollection",cg.CustomFormat="_CustomFormat",cg.DateMode="_DateMode",cg.LanguageResource="_LanguageResource",cg.CustomDataSource="_CustomDataSource",cg.SlicerDefaultValue="_SlicerDefaultValue",cg.BatchTabContainerStyle="_BatchTabContainerStyle",(dg=lg.CategoryType||(lg.CategoryType={})).Title="title",dg.Appearance="appearance",dg.Custom="custom",dg.Interaction="interaction",dg.Layout="layout",dg.NoDataAppearance="NoDataAppearance",dg.Data="data",hg=pg=pg||{},(yg=hg.ActionType||(hg.ActionType={})).Filter="filter",yg.Sort="sort",yg.Rank="rank",yg.ModelParameters="modelParameters",yg.ConvertVisual="convertVisual",yg.Edit="edit",yg.Focus="focus",yg.ShowData="showData",yg.Export="export",yg.Annotation="annotation",yg.Extension="extension",yg.Event="event",yg.SwapRowsAndCols="_swapRowsAndCols",yg.SlicerSearch="_slicerSearch",yg.SlicerSort="_slicerSort",yg.SlicerSelectParameter="_slicerSelectParameter",yg.EditWebContent="_editWebContent",yg.CleanCustomDataForTable="_cleanCustomDataForTable",yg.Drill="drill",yg.RelativeDate="_relativeDate",yg.ShareScenario="shareScenario",yg.OpenFullDashboard="openFullDashboard",yg.ClearSelection="clearSelection",yg.AnalysisPath="analysisPath",yg.MergeDatasets="mergeDatasets",yg.ContentSetting="contentSetting",(gg=hg.ExtensionType||(hg.ExtensionType={})).Toggle="toggle",gg.Enum="enum",gg.ReferenceLine="_referenceLine",gg.TrendLine="_trendLine",gg.ImagePicker="_imagePicker",gg.MapSelector="_mapSelector",gg.ConditionalFormat="_conditionalFormat",gg.TableConditionalFormat="_tableConditionalFormat",gg.FloorPlanSelector="_floorPlanSelector",fg=mg=mg||{},(vg=fg.InheritProperty||(fg.InheritProperty={})).Palette="dashboard.palette",vg.TextStyle="dashboard.textStyle",vg.TitleTextStyle="dashboard.titleTextStyle",vg.Padding="dashboard._padding",vg.Margin="dashboard._margin",vg.CornerRadius="dashboard._cornerRadius",vg.GraphOpacity="dashboard._graphOpacity",vg.Border="dashboard._border",vg.Shadow="dashboard._shadow",vg.AutoGradient="dashboard._autoGradient",vg.BackgroundColor="dashboard.backgroundColor",vg.ClickAction="dashboard._clickAction",vg.ContextMenuActions="dashboard._contextMenuActions",vg.ScrollbarThumbColor="dashboard._scrollbarThumbBackColor",vg.ScrollbarTrackColor="dashboard._scrollbarTrackBackColor",vg.BorderSize="dashboard._borderSize",vg.BorderColor="dashboard._borderColor",vg.NoDataText="dashboard._noDataText",vg.NoDataTextStyle="dashboard._noDataTextStyle",vg.NoDataTextAlignment="dashboard._noDataTextAlignment",vg.NoDataTextVerticalAlignment="dashboard._noDataTextVerticalAlignment",vg.NoDataImage="dashboard._noDataImage",vg.NoDataImageSize="dashboard._noDataImageSize",vg.NullItemsString="dashboard._nullItemsString",vg.EmmptyItemsString="dashboard._emptyItemsString";function Cg(){I()(this,Cg)}function Tg(e,a){return e.reduce(function(e,t){return a[t]&&e.push(t),e},[])}function Sg(e,t){var a=1<arguments.length&&void 0!==t?t:{};return(0<arguments.length&&void 0!==e?e:[]).map(function(e){return a[e]})}function Dg(e,t,a){return function t(e,a,n){var i=e.children,r=Hb(e,["children"]),o=a+1;if(!Array.isArray(i)||!i.length||i.every(function(e){return!e}))return n.includes(o)?e:r;var s=[];return s=i.map(function(e){return t(e,o,n)}),n.includes(o)||(s=s.reduce(function(e,t){return t.children&&t.children.length?[].concat(R()(e),R()(t.children)):e},[]))&&s.length?Object.assign({children:s},r):r}({children:e},-1,t.map(function(e){return a.indexOf(e)})).children||[]}function kg(e){return Jr.isPivotChart(e)||Jr.isVisual(e)||Jr.isSlicer(e)||Jr.isVisualSlicer(e)}function wg(r){return function(e){if(!bg(r,e))return!1;var t,a=(t=r).parentId||t.originalId||t.id,n=!e.scenarioType,i=Us.isUnassociated(e,a);return n||!i&&!!jb(r,e)}}var xg,Ag,Ig,Pg={inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle},_g={legendWidthHeight:/^([1-9]?\d(\.\d+)?)%$|^\d+(\.\d+)?px$/},Mg={name:"valueSourceType",type:sg.PublicPropertyType.Enum,items:[{value:"dataset",displayNameKey:"inspector.properties.charts.valueSourceType.fromDataset"},{value:"customInput",displayNameKey:"inspector.properties.charts.valueSourceType.fromCustomInput"}],displayNameKey:"inspector.properties.charts.valueSource",defaultValue:"dataset"},Lg={name:"valueCustomInput",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.valueCustomInput",defaultValue:150},Rg={name:"comparisonSourceType",type:sg.PublicPropertyType.Enum,items:[{value:"dataset",displayNameKey:"inspector.properties.charts.valueSourceType.fromDataset"},{value:"customInput",displayNameKey:"inspector.properties.charts.valueSourceType.fromCustomInput"}],displayNameKey:"inspector.properties.charts.comparisonSource",defaultValue:"comparisonSourceType"},Vg="comparisonCustomInput",Ng=(sg.PublicPropertyType.Float,Object.assign(Object.assign({},{displayNameKey:"inspector.categories.valueSetting"}),{properties:[Mg,Lg,Rg]}),{name:"chartPalette",inheritFrom:mg.InheritProperty.Palette,type:sg.PublicPropertyType.Palette,displayNameKey:"inspector.properties.charts.palette",defaultValue:"palette-theme-color-Accent123456"}),Eg={name:"graphOpacity",inheritFrom:mg.InheritProperty.GraphOpacity,type:sg.PublicPropertyType.Percentage,displayNameKey:"inspector.properties.charts.graphOpacity",defaultValue:100},Fg={name:"topWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.topWidth",defaultValue:70,min:0,max:100},Og={name:"bottomWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.bottomWidth",defaultValue:30,min:0,max:100},Hg={name:"neckHeight",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.startAngle",defaultValue:0,min:0,max:100},Bg={name:"axisMode",type:sg.PublicPropertyType.Enum,items:[{value:"Cartesian",displayNameKey:"inspector.properties.charts.axisMode.cartesian"},{value:"Radial",displayNameKey:"inspector.properties.charts.axisMode.radial"},{value:"Polygonal",displayNameKey:"inspector.properties.charts.axisMode.polygonal"}],displayNameKey:"inspector.properties.charts.axisMode.title",defaultValue:"Cartesian"},Ug={name:"innerRadius",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.innerRadias",defaultValue:0,min:0,max:99},zg=Object.assign(Object.assign({},Ug),{defaultValue:70}),Kg=Object.assign(Object.assign({},Ug),{defaultValue:20}),jg=Object.assign(Object.assign({},Ug),{defaultValue:80}),Wg={name:"unreachedColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.unreachedColor",defaultValue:"#e5e5e5"},Gg={name:"isMutativeReachedColor",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.isMutativeReachedColor",defaultValue:!1},Yg={name:"reachedColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.reachedColor",defaultValue:"=Theme.Colors!Accent1"},qg={name:"startAngle",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.startAngle",defaultValue:0,min:0,max:360},Jg={name:"pointerColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.pointerColor",defaultValue:"#999999"},Xg={name:"rangeDotType",structuredPath:"rangeDotsAndColors",type:sg.PublicPropertyType.Enum,items:[{value:"precentage",displayNameKey:"inspector.properties.charts.rangeDotTypeEnums.precentage"},{value:"constant",displayNameKey:"inspector.properties.charts.rangeDotTypeEnums.constant"}],displayNameKey:"inspector.properties.charts.rangeDotType",defaultValue:"precentage"},Qg={name:"rangeDotsAndColors",type:sg.PrivatePropertyType.ColorRange,displayNameKey:"inspector.properties.charts.rangeDotsAndColorslabel"},Zg={name:"contentHAlignment",displayNameKey:"inspector.properties.common.alignment",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.common.hAlign.left"},{value:2,displayNameKey:"inspector.properties.common.hAlign.center"},{value:3,displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:2},$g={name:"startAngle",type:sg.PublicPropertyType.Angle,displayNameKey:"inspector.properties.charts.startAngle",defaultValue:0,min:0,max:360},em={name:"sweep",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.sweep",defaultValue:360,min:0,max:360},tm={name:"sweep",type:sg.PublicPropertyType.Angle,displayNameKey:"inspector.properties.charts.sweep",defaultValue:360,min:0,max:360,step:15,markStep:30},am={name:"lineStyle",type:sg.PublicPropertyType.Enum,items:[{value:"Default",displayNameKey:"inspector.properties.charts.lineStyle.default"},{value:"Spline",displayNameKey:"inspector.properties.charts.lineStyle.spline"},{value:"Step",displayNameKey:"inspector.properties.charts.lineStyle.step"}],displayNameKey:"inspector.properties.charts.lineStyle.title",defaultValue:"Default"},nm={name:"showNull",type:sg.PublicPropertyType.Enum,items:[{value:"Connected",displayNameKey:"inspector.properties.charts.showNull.connect"},{value:"Gaps",displayNameKey:"inspector.properties.charts.showNull.gap"},{value:"Zeros",displayNameKey:"inspector.properties.charts.showNull.zero"}],displayNameKey:"inspector.properties.charts.showNull.title",defaultValue:"Connected"},im={name:"showDots",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showDots",defaultValue:!1},rm={name:"autoGapWidth",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.autoGapWidth",defaultValue:!0},om={name:"categoryGapWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.categoryGapWidth",defaultValue:30,min:0,max:100},sm={name:"seriesGapWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.seriesGapWidth",defaultValue:0},lm={name:"cornerRadius",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.cornerRadius",defaultValue:0,min:0},um={name:"autoGradient",inheritFrom:mg.InheritProperty.AutoGradient,type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.autoGradient",defaultValue:!1},cm={name:"graphColorPreference",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.graphColorPreference",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.Auto},dm={name:"autoGradient",inheritFrom:mg.InheritProperty.AutoGradient,type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.autoGradient",defaultValue:!0},pm={displayNameKey:"inspector.categories.chartStyle"},hm=Object.assign(Object.assign({},pm),{properties:[Ng,Eg,rm,om,sm,lm,dm]}),ym=Object.assign(Object.assign({},pm),{properties:[Ng,Eg,rm,om,lm,dm]}),gm=Object.assign(Object.assign({},pm),{properties:[Ng,Eg,am,nm,im]}),mm=Object.assign(Object.assign({},pm),{properties:[Ng,Eg,am,nm,im,dm]}),fm=(Object.assign(Object.assign({},pm),{properties:[Ng,Eg,am,im,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,qg,em,lm,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,zg,qg,em,lm,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,Kg,qg,em,lm,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,Ug,qg,em,lm,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,Ug,qg,em,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,Kg,qg,em,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,im]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,im,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,Bg,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,dm]}),Object.assign(Object.assign({},pm),{properties:[Ng,Eg,Fg,Og,Hg,dm]}),Object.assign(Object.assign({},pm),{properties:[jg,Jg,Xg,Qg,$g,tm,Eg]}),Object.assign(Object.assign({},pm),{properties:[lm,jg,Wg,Gg,Xg,Qg,Yg,qg,em,Eg]}),Object.assign(Object.assign({},pm),{properties:[Xg,Qg,Zg]}),Object.assign(Object.assign({},pm),{properties:[cm]}),Object.assign(Object.assign({},pm),{properties:[um]}),Object.assign(Object.assign({},pm),{properties:Array.from(new Set(hm.properties.concat(gm.properties).concat(mm.properties).concat(ym.properties)))}),{name:"showSubTitle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showSubTitle",defaultValue:!0}),vm={name:"customSubTitle",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.customSubTitle",defaultValue:"0"},bm=Object.assign(Object.assign({},Pg),{name:"subTitleTextStyle",displayNameKey:"inspector.properties.charts.subTitleFontSetting",_enableAuto:!0}),Cm=(Object.assign(Object.assign({},Pg),{name:"gaugeDataLabelTextStyle",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle",_enableAuto:!0}),sg.PublicPropertyType.Text,Object.assign(Object.assign({},Pg),{name:"valueCustomUnitTextStyle",displayNameKey:"inspector.properties.charts.valueCustomUnitTextStyle",_enableAuto:!0}),Object.assign(Object.assign({},Pg),{name:"dataLabelTextStyle",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle"})),Tm={name:"valueAxisDisplayUnit",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.charts.displayUnit.none"},{value:3,displayNameKey:"inspector.properties.charts.displayUnit.e3"},{value:6,displayNameKey:"inspector.properties.charts.displayUnit.e6"},{value:9,displayNameKey:"inspector.properties.charts.displayUnit.e9"},{value:10,displayNameKey:"inspector.properties.charts.displayUnit.e12"}],defaultValue:1,displayNameKey:"inspector.properties.charts.axis.displayUnit"},Sm={name:"showDeltaLabel",displayNameKey:"inspector.properties.charts.showDeltaLabel",type:sg.PublicPropertyType.Boolean,defaultValue:!0},Dm={name:"showDeltaSymbol",displayNameKey:"inspector.properties.charts.showDeltaSymbol",type:sg.PublicPropertyType.Boolean,defaultValue:!0},km={name:"showDeltaPercentage",displayNameKey:"inspector.properties.charts.showDeltaPercentage",type:sg.PublicPropertyType.Boolean,defaultValue:!0},wm="calculationMode",xm=(sg.PublicPropertyType.Enum,H.CalculationMode.Ratio,Object.assign(Object.assign({},Pg),{name:"deltaLabelTextStyle",displayNameKey:"inspector.properties.charts.deltaLabelTextStyle",_enableAuto:!0,_blackList:["color"]})),Am=(sg.PrivatePropertyType.KPIConditionalPreviewEditor,{name:"automaticCarousel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.automaticCarousel",defaultValue:!1}),Im={name:"carouselInterval",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.carouselInterval",defaultValue:3},Pm=(sg.PublicPropertyType.Image,sg.PublicPropertyType.Enum,sg.PublicPropertyType.Enum,{name:"orientation",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.orientation",items:[{value:"Horizontal",displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:"Vertical",displayNameKey:"inspector.properties.common.orientation.vertical"}],defaultValue:"Horizontal"}),_m={name:"isWrap",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.wrapItems",defaultValue:!1},Mm={name:"slicerItemsAlignment",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.alignment",items:[{value:1,displayNameKey:"inspector.properties.common.hAlign.left"},{value:2,displayNameKey:"inspector.properties.common.hAlign.center"},{value:3,displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:1},Lm={name:"widthAdaptive",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.widthAdaptive",defaultValue:!0},Rm=(sg.CategoryType.Interaction,{name:"tooltip",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showTooltip",defaultValue:!0}),Vm={name:"dataLabel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showDataLabel",defaultValue:!1},Nm={name:"dataLabelPosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.titlePosition.title",items:[{value:1,displayNameKey:"inspector.properties.charts.dataLabel.position.around"},{value:2,displayNameKey:"inspector.properties.charts.dataLabel.position.onSlice"}],defaultValue:1},Em={name:"dataLabelValue",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.value",defaultValue:!0},Fm=Object.assign(Object.assign({},Em),{defaultValue:!1}),Om={name:"dataLabelDisplayUnit",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.displayUnit",defaultValue:0},Hm={name:"dataLabelPercentage",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.percentageDisplay",defaultValue:!0},Bm=Object.assign(Object.assign({},Hm),{defaultValue:!1}),Um={name:"connectingLineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.connectingLineColor",resetType:H.ColorResetType.Auto},zm={name:"dataLabelSeries",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.series",defaultValue:!1},Km={name:"dataLabelCategory",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.category",defaultValue:!1},jm={name:"dataLabelDisplayMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",items:[{value:1,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.all"}],defaultValue:1},Wm={displayNameKey:"inspector.categories.dataLabel"},Gm=(Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Nm,Em,Om,zm,Km,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Em,Om,zm,Km,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Nm,Em,Om,Bm,zm,Km,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Em,Om,zm,Km,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Em,Om,Bm,zm,Km,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Fm,Om,Hm,zm,jm,Cm,Um]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Nm,Em,Om,Bm,zm,jm,Cm,Um]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Nm,Em,Om,Bm,zm,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Em,Om,zm,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm,Vm,Em,Om,zm,jm,Cm]}),Object.assign(Object.assign({},Wm),{properties:[Rm]}),{name:"legend",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showLegend",defaultValue:!0}),Ym=(sg.PublicPropertyType.Boolean,{name:"showLegendName",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.title",defaultValue:!1}),qm={name:"showSizeBubble",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showSizeLegend",defaultValue:!1},Jm=Object.assign(Object.assign({},Pg),{name:"legendTextStyle",displayNameKey:"inspector.properties.common.legendTextStyle"}),Xm={name:"legendPosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.position",items:[{value:"Top",displayNameKey:"inspector.properties.common.surroundingPosition.top"},{value:"Right",displayNameKey:"inspector.properties.common.surroundingPosition.right"},{value:"Bottom",displayNameKey:"inspector.properties.common.surroundingPosition.bottom"},{value:"Left",displayNameKey:"inspector.properties.common.surroundingPosition.left"}],defaultValue:"Right"},Qm={name:"legendAutoSize",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.legendAutoSize",defaultValue:!0},Zm={name:"legendWidth",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.legendWidth",defaultValue:"30%",regex:_g.legendWidthHeight},$m={name:"legendHeight",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.legendHeight",defaultValue:"30%",regex:_g.legendWidthHeight},ef={name:"legendHAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.legendHAlign",items:[{value:"auto",displayNameKey:"inspector.properties.common.auto"},{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:"auto"},tf={name:"legendVAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.legendVAlign",items:[{value:"auto",displayNameKey:"inspector.properties.common.auto"},{value:"center",displayNameKey:"inspector.properties.common.vAlign.middle"},{value:"top",displayNameKey:"inspector.properties.common.vAlign.top"},{value:"bottom",displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:"auto"},af={name:"legendWrap",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.legendWrap",defaultValue:!1},nf={name:"categoryAxis",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:!0},rf={name:"categoryAxisLine",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxisLine",defaultValue:!0},of={name:"categoryTickLabel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showTickLabel",defaultValue:!0},sf={name:"categoryTickMark",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showTickMark",defaultValue:!0},lf={name:"columnTitle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showTitle",defaultValue:!1},uf={name:"categoryLabelAngle",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.axis.lableDirection",items:[{value:1,displayNameKey:"inspector.properties.common.orientation.auto"},{value:2,displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:3,displayNameKey:"inspector.properties.common.orientation.vertical"},{value:4,displayNameKey:"inspector.properties.common.orientation.diagonal"}],defaultValue:1},cf={name:"categoryOrigin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.categoryOrigin",defaultValue:0},df=Object.assign(Object.assign({},Pg),{name:"axisTextStyle",displayNameKey:"inspector.properties.charts.axis.axisTextStyle"}),pf={name:"xValueAxis",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:!0},hf={name:"xValueAxisGridline",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showGridLine",defaultValue:!1},yf={name:"xValueAxisGridlineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.axis.gridLineColor",defaultValue:"#cccccc"},gf={name:"xValueAxisMaxValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.maxValue"},mf={name:"xValueAxisMinValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.minValue"},ff={name:"xValueAxisInterval",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.axis.interval"},vf={name:"xValueAxisAxisLine",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showAxisLine"},bf={name:"xValueAxisTickLabel",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showTickLabel"},Cf={name:"xValueAxisTickMark",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showTickMark"},Tf={name:"xValueAxisFormat",type:sg.PublicPropertyType.Enum,items:[{value:"General",displayNameKey:"inspector.properties.charts.axis.formats.general"},{value:"0.00",displayNameKey:"inspector.properties.charts.axis.formats.number"},{value:"$#,##0.00",displayNameKey:"inspector.properties.charts.axis.formats.currency"},{value:"0%",displayNameKey:"inspector.properties.charts.axis.formats.percentage"},{value:"Custom",displayNameKey:"inspector.properties.charts.axis.formats.custom"}],defaultValue:"General",displayNameKey:"inspector.properties.common.format"},Sf={name:"xValueAxisDisplayUnit",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.charts.displayUnit.none"},{value:3,displayNameKey:"inspector.properties.charts.displayUnit.e3"},{value:6,displayNameKey:"inspector.properties.charts.displayUnit.e6"},{value:9,displayNameKey:"inspector.properties.charts.displayUnit.e9"},{value:10,displayNameKey:"inspector.properties.charts.displayUnit.e12"}],defaultValue:1,displayNameKey:"inspector.properties.charts.axis.displayUnit"},Df={name:"xValueAxisUnitLabel",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showUnitsLabel"},kf="xValueAxisUnitLabelPosition",wf=(sg.PublicPropertyType.Enum,H.UnitLabelPosition.OnScale,{name:"xValueAxisOrigin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.categoryOrigin",defaultValue:0}),xf={name:"valueAxis",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:!0},Af={name:"valueAxis2",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:!0},If={name:"valueAxisGridline",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showGridLine",defaultValue:!1},Pf={name:"valueAxisGridlineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.axis.gridLineColor",defaultValue:"#cccccc",resetType:H.ColorResetType.None},_f={name:"valueAxisMaxValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.maxValue",_allowNullValue:!0},Mf={name:"valueAxisMinValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.minValue",_allowNullValue:!0},Lf={name:"valueAxisInterval",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.axis.interval",_allowNullValue:!0},Rf={name:"valueAxisAxisLine",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showAxisLine"},Vf={name:"valueAxisTickLabel",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showTickLabel"},Nf={name:"valueAxisTickMark",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showTickMark"},Ef={name:"rowTitle",type:sg.PublicPropertyType.Boolean,defaultValue:!1,displayNameKey:"inspector.properties.common.showTitle"},Ff={name:"valueAxisUnitLabel",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.charts.axis.showUnitsLabel"},Of="valueAxisUnitLabelPosition",Hf=(sg.PublicPropertyType.Enum,H.UnitLabelPosition.OnScale,{name:"valueAxisFormat",type:sg.PublicPropertyType.Format,defaultValue:"General",displayNameKey:"inspector.properties.common.format"}),Bf={name:"gaugeAxisType",type:sg.PublicPropertyType.Enum,items:[{value:"precentage",displayNameKey:"inspector.properties.charts.gaugeAxisTypeEnums.precentage"},{value:"constant",displayNameKey:"inspector.properties.charts.gaugeAxisTypeEnums.constant"}],defaultValue:"constant",displayNameKey:"inspector.properties.charts.gaugeAxisType"},Uf={name:"valueLabelAngle",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.common.orientation.auto"},{value:2,displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:3,displayNameKey:"inspector.properties.common.orientation.vertical"},{value:4,displayNameKey:"inspector.properties.common.orientation.diagonal"}],defaultValue:1,displayNameKey:"inspector.properties.charts.axis.lableDirection"},zf=(sg.PublicPropertyType.Enum,{name:"valueAxisOrigin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.categoryOrigin",defaultValue:0}),Kf={displayNameKey:"inspector.categories.axis_value1",properties:[xf,If,Pf,_f,Mf,Lf,Rf,Vf,Nf,Ef,Ff,Hf,Tm,Uf]},jf=([Af].concat(R()(Kf.properties.slice(1,Kf.properties.length).map(function(e){return Object.assign(Object.assign({},e),{name:"".concat(e.name,"2")})}))),{name:"titlePosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.titlePosition.title",items:[{value:"Top",displayNameKey:"inspector.properties.slicers.titlePosition.outside"},{value:"Left",displayNameKey:"inspector.properties.slicers.titlePosition.inline"}],defaultValue:"Top"}),Wf=(sg.CategoryType.Title,sg.CategoryType.Title,sg.PublicPropertyType.Enum,sg.PublicPropertyType.Color,H.ColorResetType.NoFill,sg.PublicPropertyType.Color,H.ColorResetType.None,sg.PrivatePropertyType.GrandTotal,{name:"backColor",structuredPath:"colHeader",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.backgroundColor",defaultValue:"=Theme.Colors(0,4,0.8)",resetType:H.ColorResetType.NoFill}),Gf=(Object.assign(Object.assign({},Pg),{name:"foreColor",structuredPath:"colHeader",displayNameKey:"inspector.properties.common.foregroundColor"}),sg.PublicPropertyType.Color,H.ColorResetType.NoFill,sg.PublicPropertyType.Color,H.ColorResetType.NoFill,Object.assign(Object.assign({},Pg),{name:"headerTextStyle",displayNameKey:"inspector.properties.common.headerTextStyle"}),Object.assign(Object.assign({},Pg),{name:"appearance.titleTextStyle",displayNameKey:"inspector.properties.common.font.title"}),{name:"visible",structuredPath:"header",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showTitle",defaultValue:!0}),Yf={name:"text",structuredPath:"header",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.common.title"},qf={name:"hAlign",structuredPath:"header",type:sg.PublicPropertyType.Enum,items:[{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:"left",displayNameKey:"inspector.properties.common.alignment"},Jf={name:"showSplitLine",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.containers.showSplitLine",defaultValue:!0},Xf=Object.assign(Object.assign({},Pg),{name:"contentTextStyle",displayNameKey:"inspector.properties.common.contentTextStyle"}),Qf=(sg.PublicPropertyType.Integer,sg.PublicPropertyType.Boolean,sg.PublicPropertyType.Enum,sg.PublicPropertyType.Enum,sg.PrivatePropertyType.MapSelector,sg.PublicPropertyType.Color,{name:"paletteId",structuredPath:"mapTile",inheritFrom:mg.InheritProperty.Palette,type:sg.PublicPropertyType.Palette,displayNameKey:"inspector.properties.charts.palette",defaultValue:""}),Zf={name:"usePalette",structuredPath:"mapTile",type:sg.PublicPropertyType.Enum,items:[{value:!0,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.palette"},{value:!1,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.gradient"}],displayNameKey:"inspector.properties.charts.colorPerfrence",defaultValue:!1},$f={name:"gradientColor",structuredPath:"mapTile",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.gradientColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.None},ev="gradientColorGroupNumber",tv=(sg.PublicPropertyType.Integer,{name:"useLevelColor",structuredPath:"mapTile",type:sg.PublicPropertyType.Enum,items:[{value:!1,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.gradual"},{value:!0,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.grouped"}],displayNameKey:"inspector.properties.charts.gradientPerfrence",defaultValue:!1}),av={name:"dataLabel",structuredPath:"mapTile",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showDataLabel",defaultValue:!1},nv="dataLabelDisplayUnit",iv=(sg.PublicPropertyType.Enum,{name:"dataLabelLocation",structuredPath:"mapTile",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.location",defaultValue:!1}),rv={name:"dataLabelColor",structuredPath:"mapTile",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.color",defaultValue:!0},ov={name:"dataLabelDisplayMode",structuredPath:"mapTile",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.charts.datalabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.datalabelKey.displayMode.all"}],displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",defaultValue:1},sv=Object.assign(Object.assign({},Pg),{name:"dataLabelTextStyle",structuredPath:"mapTile",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle"}),lv=(mg.InheritProperty.GraphOpacity,sg.PublicPropertyType.Percentage,{name:"paletteId",structuredPath:"scatter",inheritFrom:mg.InheritProperty.Palette,type:sg.PublicPropertyType.Palette,displayNameKey:"inspector.properties.charts.palette",defaultValue:""}),uv={name:"usePalette",structuredPath:"scatter",type:sg.PublicPropertyType.Enum,items:[{value:!0,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.palette"},{value:!1,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.gradient"}],displayNameKey:"inspector.properties.charts.colorPerfrence",defaultValue:!1},cv={name:"gradientColor",structuredPath:"scatter",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.gradientColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.None},dv={name:"useLevelColor",structuredPath:"scatter",type:sg.PublicPropertyType.Enum,items:[{value:!1,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.gradual"},{value:!0,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.grouped"}],displayNameKey:"inspector.properties.charts.gradientPerfrence",defaultValue:!1},pv="gradientColorGroupNumber",hv=(sg.PublicPropertyType.Integer,{name:"dataLabel",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showDataLabel",defaultValue:!1}),yv={name:"dataLabelLocation",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.location",defaultValue:!1},gv="dataLabelDisplayUnit",mv=(sg.PublicPropertyType.Enum,{name:"dataLabelSize",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.size",defaultValue:!0}),fv={name:"dataLabelColor",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.color",defaultValue:!0},vv={name:"dataLabelShape",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.shape",defaultValue:!0},bv={name:"dataLabelDisplayMode",structuredPath:"scatter",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.charts.datalabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.datalabelKey.displayMode.all"}],displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",defaultValue:1},Cv=Object.assign(Object.assign({},Pg),{name:"dataLabelTextStyle",structuredPath:"scatter",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle"}),Tv=(mg.InheritProperty.GraphOpacity,sg.PublicPropertyType.Percentage,sg.PublicPropertyType.Enum,sg.PublicPropertyType.Color,H.ColorResetType.NoFill,Object.assign(Object.assign({},Pg),{name:"textStyle",structuredPath:"tabStrip",displayNameKey:"inspector.properties.common.tabStripTextStyle"}),{name:"mobileAutoLayoutPolicy",type:sg.PublicPropertyType.Enum,items:[{value:"Flow",displayNameKey:"inspector.properties.containers.flow"},{value:"Scale",displayNameKey:"inspector.properties.containers.scale"}],defaultValue:"Flow",displayNameKey:"inspector.properties.containers.mobileAutoLayoutPolicy"}),Sv={name:"contentVerticalMiddle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.richText.contentVerticalMiddle",defaultValue:!1},Dv={type:sg.CategoryType.Appearance},kv=(Object.assign(Object.assign({},Dv),{properties:[Tv]}),Object.assign(Object.assign({},Dv),{properties:[Xf,Sv]}),Object.assign(Object.assign({},Dv),{properties:[Xf]}),sg.PublicPropertyType.Hidden,function(e){return"options.title.".concat(e)}),wv=function(e){return"options.property.".concat(e)},xv=function(e){return"scatter.".concat(e)},Av=function(e){return"mapTile.".concat(e)},Iv=function(e){return"header.".concat(e)},Pv=function(e){return"tabStrip.".concat(e)},_v=function(e){return"rangeDotsAndColors.".concat(e)},Mv=function(e){return"options.cardTemplate.".concat(e)},Lv={name:wv(Am.name),showChildrenCondition:[!0],children:[{name:wv(Im.name)}]},Rv={name:wv(Vm.name),showChildrenCondition:!0,children:[{name:wv(Nm.name)},{name:wv("dataLabelYPlacement")},{name:wv("dataLabelXPlacement")},{name:wv("dataLabelAngle")},{name:wv("dataLabelConnectingLineMode"),showChildrenCondition:[H.DataLabelConnectingLineMode.Always,H.DataLabelConnectingLineMode.Auto],children:[{name:wv("dataLabelConnectingLineWidth")},{name:wv(Um.name)}]},{name:wv("dataLabelXOffset")},{name:wv("dataLabelYOffset")},{name:wv(Em.name),showChildrenCondition:!0,children:[{name:wv(Om.name)}]},{name:wv(zm.name)},{name:wv(Km.name)},{name:wv(jm.name)},{name:wv(Cm.name)},{name:wv(Hm.name)},{name:wv("dataLabelShape"),showChildrenCondition:!0,children:[{name:wv("dataLabelShapeImageId"),showChildrenCondition:function(e){return!!e},children:[{name:wv("dataLabelShapeXCenter")},{name:wv("dataLabelShapeYCenter")},{name:wv("dataLabelShapeXScale")},{name:wv("dataLabelShapeYScale")}]}]}]},Vv={name:wv("dataLabel2"),showChildrenCondition:!0,children:[{name:wv("dataLabelPosition2")},{name:wv("dataLabelYPlacement2")},{name:wv("dataLabelXPlacement2")},{name:wv("dataLabelAngle2")},{name:wv("dataLabelConnectingLineMode2"),showChildrenCondition:[H.DataLabelConnectingLineMode.Always,H.DataLabelConnectingLineMode.Auto],children:[{name:wv("dataLabelConnectingLineWidth2")},{name:wv("connectingLineColor2")}]},{name:wv("dataLabelXOffset2")},{name:wv("dataLabelYOffset2")},{name:wv("dataLabelValue2"),showChildrenCondition:!0,children:[{name:wv("dataLabelDisplayUnit2")}]},{name:wv("dataLabelSeries2")},{name:wv("dataLabelCategory2")},{name:wv("dataLabelDisplayMode2")},{name:wv("dataLabelTextStyle2")},{name:wv("dataLabelShape2"),showChildrenCondition:!0,children:[{name:wv("dataLabelShapeImageId2"),showChildrenCondition:function(e){return!!e},children:[{name:wv("dataLabelShapeXCenter2")},{name:wv("dataLabelShapeYCenter2")},{name:wv("dataLabelShapeXScale2")},{name:wv("dataLabelShapeYScale2")}]}]}]},Nv={name:wv(Gm.name),showChildrenCondition:!0,children:[{name:wv(Ym.name)},{name:wv(qm.name)},{name:wv(Jm.name)},{name:wv(Xm.name),showChildrenCondition:[Pa,Aa],children:[{name:wv(Qm.name),showChildrenCondition:[!1],children:[{name:wv(Zm.name)}]}]},{name:wv(Xm.name),showChildrenCondition:[xa,Ia],children:[{name:wv(Qm.name),showChildrenCondition:[!1],children:[{name:wv($m.name)}]}]},{name:wv(ef.name)},{name:wv(tf.name)},{name:wv(af.name)},{name:wv(af.name)},{name:wv("useLevelColor"),showChildrenCondition:[!0],children:[{name:wv("gradientColorGroupNumber")}]}]},Ev={name:wv(nf.name),showChildrenCondition:!0,children:[{name:wv(rf.name)},{name:wv(of.name)},{name:wv(sf.name)},{name:wv(lf.name)},{name:wv(uf.name)},{name:wv("categoryLabelOverflow")},{name:wv(cf.name)},{name:wv(df.name)}]},Fv={name:wv(xf.name),showChildrenCondition:!0,children:[{name:wv(_f.name)},{name:wv(Mf.name)},{name:wv(Lf.name)},{name:wv(Rf.name)},{name:wv(Vf.name)},{name:wv(Nf.name)},{name:wv(Hf.name)},{name:wv(Tm.name)},{name:wv(Of)},{name:wv(Uf.name)},{name:wv(zf.name)},{name:wv(If.name),showChildrenCondition:!0,children:[{name:wv(Pf.name)}]},{name:wv(Ef.name),showChildrenCondition:!0,children:[{name:wv(Ff.name)}]},{name:wv("valueAxisTextStyle")},{name:wv("valueAxis1TextStyle")},{name:wv("valueLabelOverflow")}]},Ov={name:wv(Af.name),showChildrenCondition:!0,children:[{name:wv("".concat(_f.name,"2"))},{name:wv("".concat(Mf.name,"2"))},{name:wv("".concat(Lf.name,"2"))},{name:wv("".concat(Rf.name,"2"))},{name:wv("".concat(Vf.name,"2"))},{name:wv("".concat(Nf.name,"2"))},{name:wv("".concat(Hf.name,"2"))},{name:wv("".concat(Tm.name,"2"))},{name:wv("".concat(Of,"2"))},{name:wv("".concat(Uf.name,"2"))},{name:wv("".concat(If.name,"2")),showChildrenCondition:!0,children:[{name:wv("".concat(Pf.name,"2"))}]},{name:wv("".concat(Ef.name,"2")),showChildrenCondition:!0,children:[{name:wv("".concat(Ff.name,"2"))}]},{name:wv("valueAxis2TextStyle")}]},Hv={name:wv(pf.name),showChildrenCondition:!0,children:[{name:wv(gf.name)},{name:wv(mf.name)},{name:wv(ff.name)},{name:wv(vf.name)},{name:wv(bf.name)},{name:wv(Cf.name)},{name:wv(Tf.name)},{name:wv(Sf.name)},{name:wv(kf)},{name:wv(uf.name)},{name:wv(wf.name)},{name:wv(hf.name),showChildrenCondition:!0,children:[{name:wv(yf.name)}]},{name:wv(lf.name),showChildrenCondition:!0,children:[{name:wv(Df.name)}]},{name:wv("axisTextStyle")},{name:wv("categoryLabelOverflow")}]},Bv={name:wv(rm.name),showChildrenCondition:!1,children:[{name:wv(om.name)},{name:wv(sm.name)}]},Uv={name:wv(Av(Zf.name)),showChildrenCondition:!1,children:[{name:wv(Av($f.name))},{name:wv(Av(tv.name)),showChildrenCondition:!0,children:[{name:wv(Av(ev))}]}]},zv={name:wv(Av(Zf.name)),showChildrenCondition:!0,children:[{name:wv(Av("maintainColorAssignments")),showChildrenCondition:!0,children:[{name:"mapTile.maintainColorAssignments"}]}]},Kv={name:wv(Av(Zf.name)),showChildrenCondition:!0,children:[{name:wv(Av("maintainColorAssignments")),showChildrenCondition:!1,children:[{name:wv(Av(Qf.name))}]}]},jv={name:wv(Av(av.name)),showChildrenCondition:!0,children:[{name:wv(Av(nv))},{name:wv(Av(iv.name))},{name:wv(Av(rv.name))},{name:wv(Av(ov.name))},{name:wv(Av(sv.name))}]},Wv={name:wv(xv(uv.name)),showChildrenCondition:!1,children:[{name:wv(xv(cv.name))},{name:wv(xv(dv.name)),showChildrenCondition:!0,children:[{name:wv(xv(pv))}]}]},Gv={name:wv(xv(uv.name)),showChildrenCondition:!0,children:[{name:wv(xv("maintainColorAssignments")),showChildrenCondition:!0,children:[{name:"scatter.maintainColorAssignments"}]}]},Yv={name:wv(xv(uv.name)),showChildrenCondition:!0,children:[{name:wv(xv("maintainColorAssignments")),showChildrenCondition:!1,children:[{name:wv(xv(lv.name))}]}]},qv={name:wv(xv(hv.name)),showChildrenCondition:!0,children:[{name:wv(xv(gv))},{name:wv(xv(yv.name))},{name:wv(xv(mv.name))},{name:wv(xv(fv.name))},{name:wv(xv(vv.name))},{name:wv(xv(bv.name))},{name:wv(xv(Cv.name))}]},Jv={name:wv(fm.name),showChildrenCondition:!0,children:[{name:wv(vm.name)},{name:wv(bm.name)}]},Xv={name:wv(Sm.name),showChildrenCondition:!0,children:[{name:wv(Dm.name)},{name:wv(km.name)},{name:wv(wm)},{name:wv(xm.name)}]},Qv={name:wv(Bf.name),showChildrenCondition:ji,children:[{name:wv(Hf.name)}]},Zv={name:wv(Mg.name),showChildrenCondition:Ui.CustomInput,children:[{name:wv(Lg.name)}]},$v={name:wv(Rg.name),showChildrenCondition:Ui.CustomInput,children:[{name:wv(Vg)}]},eb={name:wv(Gg.name),showChildrenCondition:!0,children:[{name:wv(_v(Xg.name))},{name:wv(Qg.name)}]},tb={name:wv(Gg.name),showChildrenCondition:!1,children:[{name:wv(Yg.name)}]},ab={name:wv("showNullItems"),showChildrenCondition:!0,children:[{name:wv("nullItemsString")}]},nb={name:wv("showEmptyStringItems"),showChildrenCondition:!0,children:[{name:wv("emptyItemsString")}]},ib={name:wv("allowSearch"),showChildrenCondition:!0,children:[{name:wv("searchPlaceholder")}]},rb={name:wv(Pm.name),showChildrenCondition:Xn,children:[{name:wv(_m.name),showChildrenCondition:!1,children:[{name:wv(Mm.name)},{name:wv("contentRadius")}]},{name:wv(Lm.name),showChildrenCondition:!1,children:[{name:wv("optionWidth")}]}]},ob={name:wv(Pm.name),showChildrenCondition:Qn,children:[{name:wv("contentRadius")},{name:wv("slicerItemsVerticalAlignment")}]},sb={name:wv("titlePosition"),showChildrenCondition:"Top",children:[{name:kv("alignment")}]},lb={name:wv(Iv(Gf.name)),showChildrenCondition:!0,children:[{name:wv(Iv(Yf.name))},{name:wv(Iv(qf.name))},{name:wv(Jf.name)},{name:wv(Iv("textStyle"))}]},ub={name:wv(Pv("autoSwitch")),showChildrenCondition:!0,children:[{name:wv(Pv("switchInterval"))}]},cb={name:wv(Pv("visible")),showChildrenCondition:!0,children:[{name:wv(Pv("position"))},{name:wv(Pv("alignment"))},{name:wv(Pv("width.mode")),showChildrenCondition:Vr.Fixed,children:[{name:wv(Pv("width.value"))}]},{name:wv(Pv("width.mode")),showChildrenCondition:[Vr.Distribute,Vr.Fixed],children:[{name:wv(Pv("textAlignment"))}]},{name:wv(Pv("textStyle"))},{name:wv(Pv("backgroundColor"))},{name:wv(Pv("border.color"))},{name:wv("showSplitLine")},{name:wv(Pv("gap"))},{name:wv(Pv("tabStripStyle"))},{name:wv(Pv("heightMode")),showChildrenCondition:Nr.Fixed,children:[{name:wv(Pv("height"))}]},{name:wv(Pv("showMenuIcon"))}].concat(R()(["backgroundColor","borderRadius","gradient","image","shadow","thickness","textStyle.color","border.color"].map(function(e){return{name:wv(Pv("hover.".concat(e)))}})),R()(["backColor","borderRadius","gradient","image","shadow","thickness","textStyle.color","border.color"].map(function(e){return{name:wv(Pv("inactiveTab.".concat(e)))}})),R()(["backColor","borderRadius","gradient","image","shadow","thickness","textStyle.color","border.color","indicator.color"].map(function(e){return{name:wv(Pv("activeTab.".concat(e)))}})),R()(["contentRadius","backgroundPadding","optionBackgroundColor","gradient"].map(function(e){return{name:wv(Pv(e))}})))},db={name:wv("usePalette"),showChildrenCondition:!1,children:[{name:wv("gradientColor")}]},pb={name:wv("usePalette"),showChildrenCondition:!0,children:[{name:wv("maintainColorAssignments"),showChildrenCondition:!0,children:[{name:"maintainColorAssignments"}]}]},hb={name:wv("usePalette"),showChildrenCondition:!0,children:[{name:wv("maintainColorAssignments"),showChildrenCondition:!1,children:[{name:wv("paletteId")}]}]},yb={name:wv("colHeaderVisible"),showChildrenCondition:!0,children:[{name:wv("corner.backColor")},{name:wv("corner.textStyle")},{name:wv("corner.border.color")},{name:wv("colHeader.backColor")},{name:wv("colHeader.textStyle")},{name:wv("colHeader.border.color")},{name:wv("colHeader.enableWordWrap")},{name:wv("enableUiFilter")}]},gb={name:wv("useAlternateRowStyle"),showChildrenCondition:!0,children:[{name:wv("firstDataStripe.backColor")},{name:wv("firstDataStripe.textStyle")},{name:wv("firstDataStripe.border.color")},{name:wv("firstDataStripe.enableWordWrap")},{name:wv("secondDataStripe.backColor")},{name:wv("secondDataStripe.textStyle")},{name:wv("secondDataStripe.border.color")},{name:wv("secondDataStripe.enableWordWrap")}]},mb={name:wv("subTotals.display"),showChildrenCondition:["bottom","top"],children:[{name:wv("subTotals.backColor")},{name:wv("subTotals.textStyle")},{name:wv("subTotals.border.color")},{name:wv("subTotals.enableWordWrap")}]},fb={name:wv("grandTotals.display"),showChildrenCondition:[za,Ka,ja],children:[{name:wv("grandTotals.backColor")},{name:wv("grandTotals.textStyle")},{name:wv("grandTotals.border.color")},{name:wv("grandTotals.enableWordWrap")}]},vb={name:wv(Vm.name),showChildrenCondition:!0,children:[{name:wv(Nm.name)},{name:wv(jm.name)},{name:wv(Cm.name)},{name:wv("dataLabelArea")},{name:wv("dataLabelColor"),showChildrenCondition:!0,children:[{name:wv(Om.name)}]}]},bb={name:wv("rowHeader.showRowNumber"),showChildrenCondition:!0,children:[{name:wv("rowHeader.rowNumberPosition")},{name:wv("rowHeader.rowNumberCountRule")},{name:wv("rowHeader.rowNumberAdjoin")}]},Cb={name:wv("whole.showRowNumber"),showChildrenCondition:!0,children:[{name:wv("whole.rowNumberPosition")},{name:wv("whole.rowNumberCountRule")},{name:wv("whole.rowNumberAdjoin")}]},Tb={name:wv("showTopN"),showChildrenCondition:!0,children:[{name:wv("topN")}]},Sb={name:wv("scrollbarMode"),showChildrenCondition:[mr,vr,br],children:[{name:wv("scrollbarThumbBackColor")},{name:wv("scrollbarTrackBackColor")}]},Db={name:wv("showCategoryTrackingArea"),showChildrenCondition:!0,children:[{name:wv("categoryTrackingAreaColor")}]},kb={name:wv("showCategoryTrackingLine"),showChildrenCondition:!0,children:[{name:wv("categoryTrackingLineColor")},{name:wv("categoryTrackingLineType")},{name:wv("categoryTrackingLineWidth")}]},wb={name:wv("showPointTrackingCrossX"),showChildrenCondition:!0,children:[{name:wv("pointTrackingCrossXColor")},{name:wv("pointTrackingCrossXType")},{name:wv("pointTrackingCrossXWidth")}]},xb={name:wv("showPointTrackingCrossY"),showChildrenCondition:!0,children:[{name:wv("pointTrackingCrossYColor")},{name:wv("pointTrackingCrossYType")},{name:wv("pointTrackingCrossYWidth")}]},Ab={name:wv("maintainColorAssignments"),showChildrenCondition:!1,children:[{name:wv("paletteId")}]},Ib={name:wv("showSeriesTotal"),showChildrenCondition:!0,children:[{name:wv("seriesTotalDisplay")},{name:wv("seriesTotalColor")},{name:wv("seriesTotalWidth")},{name:wv("showSeriesTotalLabel"),showChildrenCondition:!0,children:[{name:wv("seriesTotalWithCategory")},{name:wv("seriesTotalLabelTextStyle")},{name:wv("seriesTotalLabelDisplayUnit")},{name:wv("seriesTotalLabelPosition")},{name:wv("seriesTotalLabelOffset")},{name:wv("seriesTotalLabelAngle")},{name:wv("seriesTotalLabelDisplayMode")}]}]},Pb={name:wv("showSeriesTotal"),showChildrenCondition:!0,children:[{name:wv("seriesTotalWithCategory")},{name:wv("seriesTotalLabelTextStyle")},{name:wv("seriesTotalLabelDisplayUnit")},{name:wv("seriesTotalLabelPosition")},{name:wv("seriesTotalLabelOffset")},{name:wv("seriesTotalLabelAngle")},{name:wv("seriesTotalLabelDisplayMode")}]},_b={name:wv("showDots"),showChildrenCondition:!0,children:[{name:wv("symbolShape")},{name:wv("symbolSize")},{name:wv("symbolFill")},{name:wv("symbolStroke")}]},Mb={name:Mv("enablePagination"),showChildrenCondition:!0,children:[{name:Mv("itemCountPerPage")}]},Lb={name:Mv("layoutMode"),showChildrenCondition:[H.CardLayoutMode.FixedSize],children:[{name:Mv("cardItemSize.width")},{name:Mv("cardItemSize.height")}]},Rb=[{name:wv("rangeMode"),showChildrenCondition:[H.RangeMode.StartEnd],children:[{name:wv("startPlaceholder")},{name:wv("endPlaceholder")},{name:wv("showQuickRanges")},{name:wv("quickRanges")}]},{name:wv("rangeMode"),showChildrenCondition:[H.RangeMode.Basic],children:[{name:wv("datePlaceholder")}]}],Vb=(xg={},V()(xg,H.ChartType.Column,[Bv,Tb,Ib]),V()(xg,H.ChartType.RangeColumn,[Bv]),V()(xg,H.ChartType.RangeBar,[Bv]),V()(xg,H.ChartType.RangeArea,[_b]),V()(xg,H.ChartType.StackColumn,[Bv,Tb,Pb]),V()(xg,H.ChartType.PercentStackColumn,[Bv,Tb]),V()(xg,H.ChartType.Bar,[Bv,Tb,Ib]),V()(xg,H.ChartType.StackBar,[Bv,Tb,Pb]),V()(xg,H.ChartType.PercentStackBar,[Bv,Tb]),V()(xg,H.ChartType.Line,[Tb,_b]),V()(xg,H.ChartType.Area,[Tb,_b]),V()(xg,H.ChartType.StackArea,[Tb,_b]),V()(xg,H.ChartType.PercentStackArea,[Tb,_b]),V()(xg,H.ChartType.Pie,[Tb]),V()(xg,H.ChartType.Donut,[Tb]),V()(xg,H.ChartType.Rose,[Tb]),V()(xg,H.ChartType.RadialStackedBar,[Tb]),V()(xg,H.ChartType.StackBarInPolar,[Bv,Tb,Pb]),V()(xg,H.ChartType.Sunburst,[Tb]),V()(xg,H.ChartType.BarInPolar,[Bv,Tb,Ib]),V()(xg,H.ChartType.Radar,[Tb,_b]),V()(xg,H.ChartType.FilledRadar,[Tb,_b]),V()(xg,H.ChartType.DisaggregateScatter,[Hv]),V()(xg,H.ChartType.Bubble,[Hv,Tb]),V()(xg,H.ChartType.TreeMap,[Tb,Tb]),V()(xg,H.ChartType.Composite,[Ov,Bv,Tb,Vv,_b]),V()(xg,H.ChartType.Funnel,[Tb,Tb]),V()(xg,H.ChartType.Gauge,[Jv,Xv,Qv,Zv,$v]),V()(xg,H.ChartType.Indicator,[Jv,Xv,Zv,$v,eb,tb]),V()(xg,H.ChartType.KPI,[Jv,Xv,Zv,$v]),V()(xg,H.ChartType.PivotTable,[yb,gb,mb,fb,bb,Sb]),V()(xg,H.ChartType.DataTable,[yb,gb,Cb,Sb]),V()(xg,H.ChartType.KpiMatrix,[yb,gb,bb,Sb]),V()(xg,H.ChartType.Map,[Uv,jv,Wv,qv,zv,Kv,Gv,Yv]),V()(xg,H.ChartType.FloorPlan,[db,pb,hb,vb]),V()(xg,H.ChartType.Card,[Mb,Lb]),V()(xg,H.SlicerType.ComboBoxSlicer,[ab,nb,ib]),V()(xg,H.SlicerType.DataRangeSlicer,[]),V()(xg,H.SlicerType.DateRangeSlicer,[].concat(Rb)),V()(xg,H.SlicerType.LabelSlicer,[rb,sb,ob,ab,nb,ib].concat(R()((Ag={name:wv("showBorder"),showChildrenCondition:!0,children:[{name:wv("thickness")},{name:wv("borderColor")},{name:wv("borderGradient")}]},Ig=ae.flatten(["regular","hover","selected"].map(function(e){return[{name:wv("".concat(e,".showBorder")),showChildrenCondition:!0,children:[{name:wv("".concat(e,".thickness"))},{name:wv("".concat(e,".borderColor"))}]},{name:wv("".concat(e,".showMarkingLine")),showChildrenCondition:!0,children:[{name:wv("".concat(e,".markingLine.length"))},{name:wv("".concat(e,".markingLine.thickness"))},{name:wv("".concat(e,".markingLine.position"))},{name:wv("".concat(e,".markingLine.offset"))},{name:wv("".concat(e,".markingLine.color"))}]}]})),[Ag].concat(R()(Ig)))))),V()(xg,H.SlicerType.RelativeDateSlicer,[rb]),V()(xg,H.SlicerType.TreeSlicer,[ab,nb,ib]),V()(xg,H.ChartType.WebContent,[]),V()(xg,H.ScenarioType.Visual,[]),V()(xg,H.ScenarioType.Container,[lb]),V()(xg,H.ScenarioType.TabContainer,[lb,ub,cb]),V()(xg,H.ScenarioType.RichEditor,[]),V()(xg,H.ScenarioType.Picture,[]),xg),Nb=(ae.mapObjIndexed(function(e,t){var a=e.concat([Lv]);return Object.values(H.ChartType).includes(t)&&(a=a.concat([Nv])),[H.ChartType.Gauge,H.ChartType.Indicator,H.ChartType.KPI,H.ChartType.FloorPlan].includes(t)||(a=a.concat(Rv,Ev,Fv,Ab,Db,kb,wb,xb)),a},Vb),wv("imageSetting.id"),wv("dataLabelShapeImageId"),function(e){k()(r,e);var i=w()(r);function r(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:H.BasicFilterOperator.In,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return I()(this,r),(t=i.call(this)).values=[],t.targetProfile=e,t.operator=a,t.values=n,t}return D()(r,[{key:"isTarget",value:function(e){return this.targetProfile.name===e.target.column&&e.filterType===H.VisualFilterType.Basic}},{key:"setOperator",value:function(e){this.operator=e}},{key:"getOperator",value:function(){return this.operator}},{key:"getValues",value:function(){return this.values}},{key:"setValues",value:function(e){this.values=e}},{key:"toJSON",value:function(){var e=new Set(this.values);return{target:{column:this.targetProfile.name},operator:this.operator,filterType:H.VisualFilterType.Basic,values:Array.from(e)}}},{key:"fromJSON",value:function(e){e&&this.isTarget(e)&&(this.operator=e.operator,this.values=e.values)}},{key:"contains",value:function(e){return this.values.includes(e)}},{key:"remove",value:function(t){this.values=this.values.filter(function(e){return e!==t})}},{key:"add",value:function(e){this.values.push(e)}},{key:"isEmpty",value:function(){return 0===this.values.length}}],[{key:"convertToCommonFilter",value:function(e){return 0===e.values.length?null:{columnNames:[e.target.column],exclude:e.operator===H.BasicFilterOperator.NotIn,range:{items:e.values.map(function(e){return{value:e}})},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT}}}]),r}(Cg)),Eb=function(e){k()(r,e);var i=w()(r);function r(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:H.BasicFilterOperator.In,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return I()(this,r),(t=i.call(this)).targetProfiles=e,t.operator=a,t.values=n,t}return D()(r,[{key:"isTarget",value:function(e){if(this.targetProfiles.length!==e.target.length||e.filterType!==H.VisualFilterType.Tuple)return!1;for(var t=0,a=this.targetProfiles.length;t<a;t++)if(this.targetProfiles[t].name!==e.target[t].column)return!1;return!0}},{key:"setOperator",value:function(e){this.operator=e}},{key:"getOperator",value:function(){return this.operator}},{key:"getValues",value:function(){return this.values}},{key:"setValues",value:function(e){return this.values=e}},{key:"toJSON",value:function(){return{target:this.targetProfiles.map(function(e){return{column:e.name}}),operator:this.operator,filterType:H.VisualFilterType.Tuple,values:this.values}}},{key:"fromJSON",value:function(e){e&&this.isTarget(e)&&(this.operator=e.operator,this.values=e.values)}},{key:"contains",value:function(t){return!!this.values.find(function(e){return r.isTupleEqual(t,e)})}},{key:"remove",value:function(t){this.values=this.values.filter(function(e){return!r.isTupleEqual(t,e)})}},{key:"add",value:function(e){this.values.push(e)}},{key:"createTuple",value:function(e,t){var a;a=t?Math.min(t,this.targetProfiles.length):this.targetProfiles.length;for(var n=[],i=0;i<a;i++){var r=this.targetProfiles[i];n.push({value:e[r.display]})}return n}},{key:"isEmpty",value:function(){return 0===this.values.length}}],[{key:"convertToCommonFilter",value:function(e){if(0===e.values.length)return null;var n,i,c=e.target.map(function(e){return e.column}),d=e.values;return{columnNames:c,exclude:e.operator===H.BasicFilterOperator.NotIn,range:{items:(n={},i=[],d.forEach(function(e){var t=e[0];if(t){var a=t.value;n[a]||(i.push(function r(o,s){if(!(o>=c.length)){var l={},u=[];return d.forEach(function(e){var t=e[o],a=e[o+1];if(t&&a&&t.value===s&&!(o+1>=c.length)){var n=a.value;if(!l[n]){var i=r(o+1,n);i&&u.push(i),l[n]=!0}}}),u.length?{value:s,children:u}:{value:s}}}(0,a)),n[a]=!0)}}),i)},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT}}},{key:"isTupleEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var a=0,n=e.length;a<n;a++)if(e[a].value!==t[a].value)return!1;return!0}}]),r}(Cg),Fb=function(e){k()(r,e);var i=w()(r);function r(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:H.AdvancedFilterLogicalOperator.And,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return I()(this,r),(t=i.call(this)).targetProfile=e,t.logicalOperator=a,t.conditions=n,t}return D()(r,[{key:"isTarget",value:function(e){return this.targetProfile.name===e.target.column&&e.filterType===H.VisualFilterType.Advanced}},{key:"setLogicalOperator",value:function(e){e!==H.AdvancedFilterLogicalOperator.Or?this.logicalOperator=e:nu.warn("Logical or is not supported currently.")}},{key:"getLogicalOperator",value:function(){return this.logicalOperator}},{key:"setConditions",value:function(e){return this.conditions=e}},{key:"getConditions",value:function(){return this.conditions}},{key:"toJSON",value:function(){return{target:{column:this.targetProfile.name},logicalOperator:this.logicalOperator,filterType:H.VisualFilterType.Advanced,conditions:this.conditions}}},{key:"fromJSON",value:function(e){e&&this.isTarget(e)&&(this.logicalOperator=e.logicalOperator,this.conditions=e.conditions)}},{key:"remove",value:function(t){this.conditions=this.conditions.filter(function(e){return e.operator===t.operator&&e.value===t.value})}},{key:"add",value:function(e){this.conditions.push(e)}},{key:"isEmpty",value:function(){return 0===this.conditions.length}}],[{key:"convertToCommonFilter",value:function(e){var t,a,n,i;if(0===e.conditions.length||e.conditions.every(function(e){return void 0===e.value||null===e.value}))return null;var r={},o={columnNames:[e.target.column],rule:H.FilterRule.VALUE_RANGE,type:H.FilterType.RANGE,range:r};return e.conditions.forEach(function(e){switch(e.operator){case H.AdvancedFilterOperator.GreaterThan:r.min=e.value,r.minIncluded=!1;break;case H.AdvancedFilterOperator.GreaterThanOrEqual:r.min=e.value,r.minIncluded=!0;break;case H.AdvancedFilterOperator.LessThan:r.max=e.value,r.maxIncluded=!1;break;case H.AdvancedFilterOperator.LessThanOrEqual:r.max=e.value,r.maxIncluded=!0}}),r.min=null!==(t=r.min)&&void 0!==t?t:null,r.max=null!==(a=r.max)&&void 0!==a?a:null,r.maxIncluded=null!==(n=r.maxIncluded)&&void 0!==n&&n,r.minIncluded=null!==(i=r.minIncluded)&&void 0!==i&&i,o}}]),r}(Cg),Ob=function(e){k()(i,e);var n=w()(i);function i(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return I()(this,i),(t=n.call(this)).targetProfiles=e,t.values=a,t}return D()(i,[{key:"isTarget",value:function(e){if(this.targetProfiles.length!==e.target.length||e.filterType!==H.VisualFilterType.Tree)return!1;for(var t=0,a=this.targetProfiles.length;t<a;t++)if(this.targetProfiles[t].name!==e.target[t].column)return!1;return!0}},{key:"getValues",value:function(){return this.values}},{key:"setValues",value:function(e){return this.values=e||[]}},{key:"setExclude",value:function(e){this.exclude=e}},{key:"getExclude",value:function(){return this.exclude}},{key:"toJSON",value:function(){return{target:this.targetProfiles.map(function(e){return{column:e.name}}),filterType:H.VisualFilterType.Tree,values:this.values,exclude:this.exclude}}},{key:"fromJSON",value:function(e){e&&this.isTarget(e)&&(this.values=e.values||[],this.exclude=!!e.exclude)}},{key:"isEmpty",value:function(){return 0===this.values.length}},{key:"contains",value:function(t){return 0<this.values.filter(function(e){return e.value===t}).length}},{key:"add",value:function(e){this.values.push({value:e})}},{key:"remove",value:function(t){this.values=this.values.filter(function(e){return e.value!==t})}},{key:"toMatrix",value:function(){var i=[];return function a(e,t){var n=1<arguments.length&&void 0!==t?t:[];e.forEach(function(e){var t=[].concat(R()(n),[e.value]);e.children&&e.children.length?a(e.children,t):i.push(t)})}(this.values),i}},{key:"fromMatrix",value:function(e){var l=[];e.forEach(function(e){!function(a){for(var n,i=0,r=l,e=function(){var t=a[i],e=r.find(function(e){return e.value===t});if(!e)return"break";r=e.children||[],n=e,i++};i<a.length;){if("break"===e())break}if(i<a.length){var t={value:a[i],children:[]},o=t;for(i++;i<a.length;){var s={value:a[i],children:[]};o.children.push(s),o=s,i++}n?n.children.push(t):l.push(t)}}(e)}),this.values=l}}],[{key:"convertToCommonFilter",value:function(e){var t;if(null===(t=null==e?void 0:e.values)||void 0===t||!t.length)return null;var a=e.target.map(function(e){return e.column}),n="string"==typeof e.values?e.values:R()(e.values);return e.exclude&&e._unCheckedValues&&(n="string"==typeof e._unCheckedValues?e._unCheckedValues:R()(e._unCheckedValues)),{columnNames:a,exclude:e.exclude,range:{items:n},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT}}}]),i}(Cg),Hb=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},Bb=ae.compose(ae.fromPairs,ae.map(function(e){return[e.source.name,e.target.name]})),Ub=ae.compose(Bb,ae.defaultTo([]),Us.interactionMappingByScenario),zb=ae.prop("scenarioType"),Kb=ae.curry(function(e,t){var a,n;if(!zb(t))return t;var i=Us.datasetId(e),r=null!==(n=Ub(t,Object.assign(Object.assign({},e),{id:null!==(a=e.originalId)&&void 0!==a?a:e.id})))&&void 0!==n?n:{},o=function(e,t){if(!Jr.isMergedChart(t))return{};var s=Ub(e,Object.assign(Object.assign({},t),{id:t.parentId,parentId:void 0})),l=Us.datasetId(t),u=t.pivot.datasetsInfo;return Object.keys(null!=s?s:{}).reduce(function(e,t){var a=u.datasetIds[0];if(!a)return e;var n=/(.+)(\u001d\(\w+\))/.exec(s[t]),i=n?n[1]:s[t],r=u.links.find(function(e){return e[a]===i});if(!r)return e;var o=r[l];return e[t]=n?"".concat(o).concat(n[2]):o,e},{})}(t,e);if(r=Object.assign(Object.assign({},r),o),ae.isEmpty(r))return t;var s=Us.slicerSetting(t);if(!s)return t;var l=s.columnNames,u=Tg(l,r);if(u.length){var c=Sg(u,r),d=ae.assoc("columnNames",c),p=ae.compose(function(e){return ae.compose(ae.assocPath(["pivot","datasetId"],i),ae.assoc("slicerSetting",e))(t)},d);if(u.length===l.length)return p(s);var h=Dg(s.range.items,u,l);return ae.compose(p,ae.assocPath(["range","items"],h))(s)}}),jb=ae.eqBy(Us.datasetId);function Wb(e,t){var a,n=1<arguments.length&&void 0!==t&&t,i=d$.cacheManager.get(H.CacheType.ActiveFilter,e.id);!n&&i||(i=(null===(a=e.options)||void 0===a?void 0:a.sliceFilters)||[]);var r=ae.head(i);if(void 0===r&&Jr.isDateRangeSlicer(e)&&(r=e.options.property.defaultValue),!r||ae.isEmpty(r))return null;r.filterType===H.VisualFilterType.Dynamic&&(r=d$.dashboardManager.getDynamicManager().queryDynamicSlicer(e));try{switch(r.filterType){case H.VisualFilterType.Basic:return Nb.convertToCommonFilter(r);case H.VisualFilterType.Advanced:return Fb.convertToCommonFilter(r);case H.VisualFilterType.Tuple:return Eb.convertToCommonFilter(r);case H.VisualFilterType.Tree:return Ob.convertToCommonFilter(r)}}catch(e){return null}return null}function Gb(e,h){var t=function(e){return Jr.isSlicer(e)||Jr.isVisualSlicer(e)};(Jr.isPivotChart(h)||Jr.isVisual(h)||Jr.isPicture(h))&&Us.enableCrossFilter(h)&&(t=kg);var a,n=ae.compose(ae.filter(wg(h)),ae.filter(function(e){return e}),ae.map(Kb(h)),ae.filter(function(e){return e.slicerSetting}),ae.map(function(e){var t,a,n=e;if(e.crossFilterSetting)n=Object.assign(Object.assign({},n),{slicerSetting:Object.assign(Object.assign({},e.crossFilterSetting),{isCrossFilter:!0})});else if(Jr.isVisualSlicer(e)||Jr.isSlicer(e)){var i=ae.head((null===(t=e.options)||void 0===t?void 0:t.sliceFilters)||[]),r=(null==i?void 0:i.filterType)===H.VisualFilterType.Tree&&Vl(null==i?void 0:i.values),o=Wb(e);if(o&&o.rule===H.FilterRule.VALUE_RANGE){var s=Us.datasetId(e),l=d$.datasetManager.getDatasetSchemaHelperSync(s),u=o.columnNames[0];if(!l){s=Us.datasetId(h),l=d$.datasetManager.getDatasetSchemaHelperSync(s);var c=ae.path([h.id,"mapping"],Us.interactionSetting(e));if(c&&c.length){var d=c.find(function(e){var t;return(null===(t=e.source)||void 0===t?void 0:t.name)===u});null!=d&&(u=null===(a=d.target)||void 0===a?void 0:a.name)}}var p=null==l?void 0:l.getColumn(u);!p||p.dataType!==H.DatasetFieldDataType.Datetime&&p.dataType!==H.DatasetFieldDataType.Date||(o=Object.assign(Object.assign({},o),{rule:H.FilterRule.DATE_RANGE}))}n=Object.assign(Object.assign({},n),{slicerSetting:o?Object.assign(Object.assign({},o),{isTreeSlicerWithParameter:r}):null})}return n}),ae.filter(t),ae.filter((a=h,function(e){return e.id!==a.id&&e.id!==a.originalId})),Hs.scenariosByPageId(h.pageId))(e);return R()(n)}ae.filter(Us.datasetId);function Yb(e,t){if(!Jr.isHierarchy(e)||e.invalid)return Object.assign(Object.assign({},e),{parentIdx:t});var a=e.subDims,n=e.expandIndex,i=e.options;return a.slice(0,n+1).map(function(e){return Object.assign(Object.assign({},e),{parentIdx:t,options:i})})}function qb(e){return!e.invalid&&!e.isUnavailable&&!e.notMatchSchema}function Jb(e){return Jr.isCustomMeasureValue(e)||e.method&&e.method!==H.AggregationMethod.None}function Xb(e){return!Jr.isHierarchy(e)&&!Jb(e)}function Qb(e,t){return 0<=function e(a,n,t){var i=2<arguments.length&&void 0!==t?t:0;return a.length<n.length?-1:n.every(function(e,t){return n[t]===a[t]})?i:e(a.slice(1),n,i+1)}(e,t)}function Zb(e){return Qb(e,sC)}function $b(e){var t=e.withoutHierarchy,a=e.withRawItem;if(t&&a)throw Error("Cannot get raw item and extract hierarchy at the same time!")}function eC(e,t){return ml(zn)(ae.prop("value",e),ae.prop("value",t))}function tC(e,t){return ml(Kn)(ae.prop("value",e),ae.prop("value",t))}function aC(){var e="en";try{e=0<Intl.Collator.supportedLocalesOf(Wt).length?Wt:"en"}catch(e){}return e}function nC(e,t){return bl(zn,aC())(ae.prop("value",e),ae.prop("value",t))}function iC(e,t){return bl(Kn,aC())(ae.prop("value",e),ae.prop("value",t))}var rC=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},oC=ae.invertObj(H.SubColumnTypes),sC=["collection","groups"],lC=function(e){k()(l,e);var s=w()(l);function l(e,t,a,n,i,r){var o;return I()(this,l),(o=s.call(this,t,a,r))._isValidValue=function(e){return!!o.isReady()&&([H.AggregationMethod.Count,H.AggregationMethod.DistinctCount,H.AggregationMethod.None,H.AggregationMethod.First,H.AggregationMethod.List].includes(e.method)||Jr.isNumber(e))},o._getPivotSettingHierarchy=function(n){var e,t=null;if(n.dims){var a=o.getColumn(n.name),i=n.dims.map(function(e){return o.getColumn(e.name)});t=a&&Jr.isDate(a)?{name:a.name,display:a.display,dataType:a.dataType,category:H.ColumnCategory.Dimension,type:H.DatasetExtendColumnType.DateHierarchy,subDims:i}:{name:n.name,display:null===(e=n.name)||void 0===e?void 0:e.replace(zo,""),invalid:!0}}else t=o.getHierarchyDimension(n.name);return t.invalid||(t.subDims=ae.map(function(e){var t=ae.assoc("defaultDisplay",e.display,e),a=n.dimsDisplay&&n.dimsDisplay[t.name];return a&&(t=ae.assoc("display",cl({languageResource:o._languageResource,formatString:a}),t),t=ae.assoc("userDisplayExpression",a,t)),t=ae.assoc("options",n.options,t)},t.subDims)),t},o.pivotSetting=e||{},o._hiddenDataRoles=n||[],o._weakDataRoles=i||[],o}return D()(l,[{key:"getPivotSettingReduxState",value:function(){return this.pivotSetting}},{key:"getHiddenDataRoles",value:function(){return this._hiddenDataRoles}},{key:"getWeakDataRoles",value:function(){return this._weakDataRoles}},{key:"getRole",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.pivotSetting,n=ae.lensPath(e);return ae.view(n,a)}},{key:"getRoleName",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.pivotSetting,n=ae.lensPath(e.concat(["name"])),i=ae.view(n,a);return null==i?ae.last(e):i}},{key:"getRoleValues",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.pivotSetting,n=ae.lensPath(e.concat(["values"]));return ae.view(n,a)}},{key:"getRoleOptions",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.pivotSetting,n=ae.lensPath(e.concat(["options"]));return ae.view(n,a)}},{key:"_getPivotItemFormat",value:function(t,e){var a=this.getRoleOptions(e),n=a&&a.valueFormat,i=this.getRoleValues(e)||[],r=ae.path([i.findIndex(function(e){return e.name===t.name&&e.idx===t.idx&&e.method===t.method&&e.valueType===t.valueType}),"options","itemsFormat"],i||[]);return r&&r!==n&&"General"!==r?r:n}},{key:"getRoleScale",value:function(e){var t=this.getRoleOptions(e);return t&&(t.xAxisScale||t.yAxisScale||t.valueScale||t.categoryScale)}},{key:"_getItemFormat",value:function(e,t,a){function n(e){return e&&"General"!==e}var i=this._getPivotItemFormat(e,a);return n(i)?i:n(e.format)?e.format:t.format}},{key:"_getItemDisplayUnit",value:function(t,e){function a(e){return null!=e&&e!==H.DisplayUnit.Auto}var n=this.getRoleOptions(e),i=n&&n.displayUnit,r=this.getRoleValues(e)||[],o=ae.path([r.findIndex(function(e){return e.name===t.name&&e.idx===t.idx&&e.method===t.method&&e.valueType===t.valueType}),"options","itemsDisplayUnit"],r||[]);return a(o)?o:a(i)?i:t.displayUnit||H.DisplayUnit.Auto}},{key:"_validateValueItem",value:function(t,e){var a=this;if(t.invalid)return!1;if(!this._isValidValue(t))return!1;if(Jr.isValueOrCustomMeasure(t)){if("number"!=typeof t.idx)return!1}else{var n=t.along;if(null!=n&&n.advance){n.advance=ae.evolve({partitioning:ae.map(function(e){return a.getColumn(e)}),addressing:ae.map(function(e){return a.getColumn(e)})},n.advance);var i=n.advance,r=i.partitioning,o=void 0===r?[]:r,s=i.addressing,l=void 0===s?[]:s,u=o.concat(l),c=u.some(function(e){return e.invalid}),d=this.getUsedDimensionItems(!1,{withoutValidation:!0}),p=u.some(function(t){return!d.find(function(e){return e.name===t.name})});return!(c||p)}if(t.type===H.DatasetExtendColumnType.Date){var h,y=null==n?void 0:n.subType;if(null!=n&&n.dateName)h=this.getColumn(t.along.dateName);else{var g=this.getUsedDimensionItems(!1,{withoutValidation:!0}).reduce(function(e,t){return t.type===H.DatasetExtendColumnType.SubDate&&(!e||t.subColumnType>e.subColumnType)?t:e},null);if(!g)return!1;if(!(y=y||function(e){if(e.subColumnType&&e.subColumnType<=H.SubColumnTypes.Day)return oC[e.subColumnType]}(g)))return!1;h=this.getColumn(g.parentColumnName)}if(!Jr.isDate(h))return!1;var m,f=$s(h.name,y);if(Jr.isCustomAttribute(h))m=Zh(h)[f];else m=this.getAllDimensions().find(function(e){return e.name===f});return t._dateColumns={offset:t.along.offset,subType:y,date:h,subDate:m},t.getUsedColumns=function(){var e=[f];return"Year"!==y&&e.push($s(h.name,"Year")),"Day"===y&&e.push($s(h.name,"Month")),e},!0}}if(this.isHiddenDataRole(this.getRoleName(e))){this.getUsedValueItems(null,{withoutHiddenDataRoles:!0}).map(function(e){return e.entityId});var v=this.getUsedDimensionItems(null,{withoutHiddenDataRoles:!0}).filter(function(e){return e.attributeId!==t.attributeId}).map(function(e){return e.entityId});return fd(this.getDatasetSchema(),t.entityId,0,v)}return!0}},{key:"_validateDimItem",value:function(t,e){var a,n=this;if((a=this.pivotSetting).collection&&Array.isArray(a.collection.groups))if(Zb(e)){var i=this.getTemplatePivotSetting(e[e.length-3]);n=this.clone(i)}else n=this.clone(this.getCommonPivotSetting());var r=n.getUsedValueItems(null,{withoutHiddenDataRoles:!0}).map(function(e){return e.entityId}),o=n.getUsedDimensionItems(null,{withoutHiddenDataRoles:!0,withoutValidation:!0}).filter(function(e){return e.attributeId!==(null==t?void 0:t.attributeId)}).map(function(e){return e.entityId});return md(n.getDatasetSchema(),null==t?void 0:t.entityId,r,o)}},{key:"isValidEntityUnderRelation",value:function(e,t){var a=this.getUsedValueItems(null,{withoutHiddenDataRoles:!0}).map(function(e){return e.entityId}),n=this.getUsedDimensionItems(null,{withoutHiddenDataRoles:!0}).map(function(e){return e.entityId});return e(this.getDatasetSchema(),t,a,n)}},{key:"isValidEntityAsDimension",value:function(e){return this.isValidEntityUnderRelation(md,e)}},{key:"isValidDimension",value:function(e){var t;return this.isValidEntityAsDimension(null===(t=this.getColumn(e))||void 0===t?void 0:t.entityId)}},{key:"isValidValue",value:function(e){var t;return this.isValidEntityUnderRelation(fd,null===(t=this.getColumn(e))||void 0===t?void 0:t.entityId)}},{key:"_traversePivotSetting",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length?a:void 0;return this.__traversePivotSetting(e,i||this.pivotSetting,n)}},{key:"_getPivotSettingItemBase",value:function(e,t){var a=this.getColumn(e.name);Jr.isHierarchy(e.type)&&(a=this._getPivotSettingHierarchy(e),e.subDims=a.subDims);var n=ae.clone(Object.assign(Object.assign({},a),e));n.format=this._getItemFormat(e,a,t),n.displayUnit=this._getItemDisplayUnit(e,t);var i=this.getRoleScale(t);return i&&(n.scale=i),n.format&&(n.formatter=zp(n),n.formatValue=pu(n.formatter,this._option)),n.categoryName=this.getRoleName(t),n.defaultDisplay=n.defaultDisplay||n.display,n.originalItem=e,n}},{key:"getPivotSettingItem",value:function(e,t,a){var n=this,i=2<arguments.length&&void 0!==a&&a,r=this._getPivotSettingItemBase(e,t);if(r.userDisplay?(r.display=cl({languageResource:this._languageResource,formatString:r.userDisplay}),r.userDisplayExpression=r.userDisplay):Jb(r)&&(r.display=sl(r)),r.invalid)return r;if(i||(Jb(r)&&(r.invalid=!this._validateValueItem(r,t)),Xb(r)&&(r.invalid=!this._validateDimItem(r,t))),Jr.isHierarchy(r.type)){var o=r.subDims.filter(function(e){return!r.exclude.includes(e.name)}).map(function(e){return n._getPivotSettingItemBase(e,t)});i||(r.invalid=!this._validateDimItem(o[0],t));var s=0;if(r.expandTo){var l=o.findIndex(function(e){return e.name===r.expandTo});s=-1===l?o.length-1:l}return Object.assign(Object.assign({},r),{subDims:o,expandIndex:s})}return r}},{key:"getPivotSetting",value:function(e,t,a){var o=this,n=0<arguments.length&&void 0!==e?e:{},s=1<arguments.length&&void 0!==t?t:function(e){return e},i=2<arguments.length?a:void 0;$b(n);var r=n.withoutHierarchy,l=void 0!==r&&r,u=n.withoutInvalid,c=void 0!==u&&u,d=n.withRawItem,p=void 0!==d&&d,h=n.withoutHiddenDataRoles,y=void 0!==h&&h,g=rC(n,["withoutHierarchy","withoutInvalid","withRawItem","withoutHiddenDataRoles"]);return this._traversePivotSetting(function(e,t,a,n){var i=o.getRoleName(a);if(y&&o.isHiddenDataRole(i))return e;var r=o.getPivotSettingItem(t,a);return r=[r],c&&(r=r.filter(qb)),l&&(r=r.reduce(function(e,t){return e.concat(Yb(t,n))},[])),c&&(r=r.filter(qb)),e.concat(r.map(function(e){return p?e.originalItem:e}).map(s))},g,i)}},{key:"getTemplatePivotSetting",value:function(e){var r=0<arguments.length&&void 0!==e?e:0;return this._traversePivotSetting(function(e,t,a){var n=e.concat(t);if(!Zb(a))return n;var i=[].concat(sC,[r]);return Qb(a,i)?e.concat(t):e})}},{key:"getCommonPivotSetting",value:function(){return this._traversePivotSetting(function(e,t,a){return Zb(a)&&Xb(t)?e:e.concat(t)})}},{key:"getFlattenedPivotSettingItems",value:function(e,t,a){var s=this,l=0<arguments.length&&void 0!==e&&e,n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length?a:void 0;$b(n);var r=n.withoutInvalid,u=void 0===r||r,o=n.withoutHierarchy,c=void 0===o||o,d=n.withoutWeakDataRoles,p=void 0!==d&&d,h=n.withoutAggValue,y=void 0!==h&&h,g=n.withoutCustomMeasure,m=void 0!==g&&g,f=n.withoutDimension,v=void 0!==f&&f,b=n.withoutValidation,C=void 0!==b&&b,T=n.withoutHiddenDataRoles,S=void 0!==T&&T,D=n.withRawItem,k=void 0!==D&&D,w=rC(n,["withoutInvalid","withoutHierarchy","withoutWeakDataRoles","withoutAggValue","withoutCustomMeasure","withoutDimension","withoutValidation","withoutHiddenDataRoles","withRawItem"]),x=[];return this._traversePivotSetting(function(e,t,a){var n,i,r=s.getRoleName(a);if(S&&s.isHiddenDataRole(r))return e;if(p&&s._weakDataRoles.includes(r))return e;if(!l||(i=r,Array.isArray(l)&&l.includes(i))||(n=r,"function"==typeof l&&l(n))){if(y&&Jb(t))return e;if(m&&Jr.isCustomMeasureValue(t))return e;if(v&&!Jb(t))return e;var o=s.getPivotSettingItem(t,a,C);o=[o],u&&(o=o.filter(qb)),c&&(o=o.reduce(function(e,t){return e.concat(Yb(t))},[])),u&&(o=o.filter(qb)),v&&(o=o.filter(Jb)),y&&(o=o.filter(function(e){return!Jb(e)})),m&&(o=o.filter(function(e){return!Jr.isCustomMeasureValue(e)})),x=x.concat(o.map(function(e){return k?e.originalItem:e}))}return e},w,i),x}},{key:"getUsedValueItems",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length?a:void 0;return this.getFlattenedPivotSettingItems(e,Object.assign(Object.assign({},n),{withoutDimension:!0}),i)}},{key:"getUsedDimensionItems",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length?a:void 0;return this.getFlattenedPivotSettingItems(e,Object.assign(Object.assign({},n),{withoutAggValue:!0,withoutCustomMeasure:!0}),i)}},{key:"getHiddenDataRolesItems",value:function(){return this.getFlattenedPivotSettingItems(this._hiddenDataRoles)}},{key:"hasSetting",value:function(){return 0<this.getFlattenedPivotSettingItems().length}},{key:"hasValueSetting",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};return 0<this.getUsedValueItems(!1,t).length}},{key:"hasDimensionSetting",value:function(){return 0<this.getUsedDimensionItems().length}},{key:"getUsedDimensionItemsNameMapping",value:function(){return this.getFlattenedPivotSettingItems.apply(this,arguments).filter(function(e){return!Jb(e)}).reduce(function(e,t){return e[t.name]=t,e},{})}},{key:"getAllUsedColumnsDisplayMapping",value:function(){return this.getFlattenedPivotSettingItems().reduce(function(e,t){return e[t.display]=t,e},{})}},{key:"getPivotSettingProfile",value:function(){return this.getPivotSetting({withoutHierarchy:!0,withoutInvalid:!0},function(e){return{display:e.display,name:e.name,category:e.category,valueType:e.valueType,originalItem:e.originalItem,method:e.method,dataType:e.dataType,format:e.format,type:e.type,subColumnType:e.subColumnType,isFiscal:e.isFiscal,parentIdx:e.parentIdx,displayUnit:e.displayUnit,options:e.options}})}},{key:"getTinyProfile",value:function(){return this.getPivotSetting({withoutHierarchy:!0,withoutInvalid:!0},function(e){return{display:e.display,name:e.name,method:e.method,dataType:e.dataType,format:e.format,id:tl(e),options:e.options,displayTimezone:e.displayTimezone}})}},{key:"formatValue",value:function(t,e){var a=this.getUsedValueItems().find(function(e){return e.name===t});return a?a.formatValue(e):e}},{key:"getValueFormat",value:function(t){var e=this.getUsedValueItems().find(function(e){return e.name===t});return(null==e?void 0:e.format)||Oa}},{key:"isHiddenDataRole",value:function(e){return this._hiddenDataRoles.includes(e)}},{key:"__traversePivotSetting",value:function(r,e,t){var a=2<arguments.length&&void 0!==t?t:{},n=a.valuesOnly,o=void 0!==n&&n,i=a.disableExclusive,s=void 0!==i&&i;return ae.mapObjIndexed(function(e,t){return n=[t],i=[],(a=e).values&&(i=a.values,!s&&a.options&&a.options.exclusive&&(i=i.filter(function(e){return!e.inactive}).slice(0,1)),i=i.reduce(function(e,t,a){return r(e,t,n,a)},[])),o?i:Object.assign(Object.assign({},a),{values:i});var a,n,i},e)}},{key:"getDisplayByFieldId",value:function(t){var e=this.getFlattenedPivotSettingItems().find(function(e){return Bo.a.isEqual(tl(e),t)});return e?e.display:t.columnName}},{key:"clone",value:function(){throw Error("Not Implemented!")}},{key:"setOption",value:function(e){this._option=e}},{key:"getPivotSettingItemByDisplay",value:function(t){var e=this.getFlattenedPivotSettingItems();return ae.find(function(e){return e.display===t},e)}},{key:"getPivotSettingItemByName",value:function(t){var e=this.getFlattenedPivotSettingItems();return ae.find(function(e){return e.name===t},e)}}]),l}(sy),uC=function(e){k()(y,e);var t=w()(y);function y(){return I()(this,y),t.apply(this,arguments)}return D()(y,[{key:"getNewIdx",value:function(a,n){var e,t=(e={},V()(e,H.AggregationValueType.Value,function(e,t){return e.name===t.name&&e.method===t.method}),V()(e,H.AggregationValueType.Calculation,function(e,t){return e.type===t.type&&e.along.method===t.along.method&&e.name===t.name&&e.method===t.method}),V()(e,H.AggregationValueType.CustomMeasure,function(e,t){return e.name===t.name}),e),i=t[n.valueType],r=a.valueType?t[a.valueType]:i,o=this.getUsedValueItems().filter(function(e){return e.valueType===n.valueType}).filter(function(e){return i(n,e)}).filter(function(e){return t=e,!(n.valueType===a.valueType&&r(t,a)&&t.idx===a.idx);var t});o.sort(function(e,t){return e.idx-t.idx});var s=o.findIndex(function(e,t){return e.idx!==t});return-1===s?o.length:s}},{key:"__traversePivotSetting",value:function(e,t,a){return y.traversePivotSetting(e,t,2<arguments.length&&void 0!==a?a:{})}},{key:"clone",value:function(e,t,a,n,i,r){return new y(null!=e?e:this.getPivotSettingReduxState(),null!=t?t:this.getDatasetSchema(),null!=a?a:this.getDatasetProfile(),null!=n?n:this.getHiddenDataRoles(),null!=i?i:this.getWeakDataRoles(),null!=r?r:this.getLanguageResource())}}],[{key:"create",value:function(e,t,a,n,i){return new y(e,t,a,n,null,i)}},{key:"traversePivotSetting",value:function(l,e,t){var u=2<arguments.length&&void 0!==t?t:{},a=u.valuesOnly,c=void 0!==a&&a,n=u.withoutCollection,d=void 0!==n&&n,i=u.templateName,p=void 0===i?"":i,r=u.disableExclusive,h=void 0!==r&&r,o=u.path,s=void 0===o?[]:o;return ae.mapObjIndexed(function(e,t){return function a(e,n,t){var i=2<arguments.length&&void 0!==t?t:"";if(e.groups){if(d)return Object.assign(Object.assign({},e),{groups:[]});var r=e.groups.map(function(e,t){return a(e,n.concat(["groups",t]))});return Object.assign(Object.assign({},e),{groups:r})}if(e.roles){var o=y.traversePivotSetting(l,e.roles,Object.assign(Object.assign({},u),{path:n.concat("roles")}));return Object.assign(Object.assign({},e),{roles:o})}var s=[];return i===p&&e.values&&(s=e.values,!h&&e.options&&e.options.exclusive&&(s=s.filter(function(e){return!e.inactive}).slice(0,1)),s=s.reduce(function(e,t,a){return l(e,t,n,a)},[])),c?s:Object.assign(Object.assign({},e),{values:s})}(e,s.concat(t))},e)}}]),y}(lC),cC=function(e){k()(l,e);var s=w()(l);function l(e,t,a,n,i){var r;I()(this,l);var o=e||{pivotSetting:{}};return(r=s.call(this,o.pivotSetting,t,a,n,null,i)).dataViewType=o.dataViewType,r.groupingRoles=o.groupingRoles,r.valueRoles=o.valueRoles,r.groupingOrValueRoles=o.groupingOrValueRoles,r.attributeRoles=o.attributeRoles,r.attributeOrValueRoles=o.attributeOrValueRoles,r.valuesRoles=o.valuesRoles,r.rowsRoles=o.rowsRoles,r.columnsRoles=o.columnsRoles,r.rowGrandTotal=o.rowGrandTotal,r.columnGrandTotal=o.columnGrandTotal,r.trellisRows=o.trellisRows,r.trellisColumns=o.trellisColumns,r.series=o.series,r._pivotSettingDesc=o,r.options=o.options||{},r}return D()(l,[{key:"getPivotSettingDesc",value:function(){return this._pivotSettingDesc}},{key:"getDataViewType",value:function(){return this.dataViewType}},{key:"getGroupingOrValueFields",value:function(){return this.groupingOrValueRoles}},{key:"getValueFields",value:function(){return this.valueRoles}},{key:"getGroupingFields",value:function(){return this.groupingRoles}},{key:"getAttributeFields",value:function(){return this.attributeRoles}},{key:"getAttributeOrValueFields",value:function(){return this.attributeOrValueRoles}},{key:"getMatrixRoles",value:function(){return{valuesRoles:this.valuesRoles,rowsRoles:this.rowsRoles,columnsRoles:this.columnsRoles,rowGrandTotal:this.rowGrandTotal,columnGrandTotal:this.columnGrandTotal}}},{key:"getTrellisRowRole",value:function(){return this.trellisRows}},{key:"getTrellisColumnRole",value:function(){return this.trellisColumns}},{key:"getSeriesRole",value:function(){return this.series}},{key:"getOptions",value:function(){return this.options}},{key:"clone",value:function(e,t,a,n,i){return new l(null!=e?e:this.getPivotSettingDesc(),null!=t?t:this.getDatasetSchema(),null!=a?a:this.getDatasetProfile(),null!=n?n:this.getHiddenDataRoles(),null!=i?i:this.getLanguageResource())}}],[{key:"create",value:function(e,t,a,n,i){return new l(e,t,a,n,i)}}]),l}(lC);function dC(e,n){return e.map(function(e){var t=e&&e.dataType,a=e&&"subDate"===e.type;switch(t){case"number":case"date":case"datetime":return n===zn?eC:n===Kn?tC:a?eC:void 0;case"string":default:return n===zn?nC:n===Kn?iC:void 0}})}function pC(e,n,i){return e.reduce(function(e,t){if(!n&&null==t.value)return e;if(!i&&""===t.value)return e;var a=t;return Array.isArray(t.children)&&(a=ae.assoc("children",pC(t.children,n,i),a)),[].concat(R()(e),[a])},[])}function hC(e,t,a,n){var i=e||{target:{column:t.name},filterType:H.VisualFilterType.Advanced,logicalOperator:H.AdvancedFilterLogicalOperator.And,conditions:[{value:null,operator:H.AdvancedFilterOperator.GreaterThanOrEqual},{value:null,operator:H.AdvancedFilterOperator.LessThanOrEqual}]};switch(a){case"min":i=oh()(i,{conditions:{0:{value:{$set:n}}}});break;case"minIncluded":i=oh()(i,{conditions:{0:{operator:{$set:n?H.AdvancedFilterOperator.GreaterThanOrEqual:H.AdvancedFilterOperator.GreaterThan}}}});break;case"max":i=oh()(i,{conditions:{1:{value:{$set:n}}}});break;case"maxIncluded":i=oh()(i,{conditions:{1:{operator:{$set:n?H.AdvancedFilterOperator.LessThanOrEqual:H.AdvancedFilterOperator.LessThan}}}})}return i}function yC(e,t){return[{target:{column:null==e?void 0:e.name},filterType:H.VisualFilterType.Dynamic,payload:t}]}function gC(e,t,a,n){var i=2<arguments.length&&void 0!==a?a:H.DateMode.DateTime,r=3<arguments.length&&void 0!==n?n:H.RangeMode.StartEnd,o=eu({rule:H.FilterRule.DATE_RANGE,range:t});if(r===H.RangeMode.Basic){var s=o.min;null==s?o.max=null:(o.min=_l(s.startOf(i)),o.max=_l(s.endOf(i).add(1,"s")))}else o.min=t.min,o.max=t.max;return{target:e,filterType:H.VisualFilterType.Advanced,logicalOperator:H.AdvancedFilterLogicalOperator.And,conditions:[{value:o.min,operator:H.AdvancedFilterOperator.GreaterThanOrEqual},{value:o.max,operator:H.AdvancedFilterOperator.LessThan}]}}function mC(e,t){var a=eu({rule:H.FilterRule.RELATIVE_DATE,range:t}),n=ry(a);if(n)return gC(e,n)}function fC(e){var t,a=e.options,n=a.sliceFilters,i=a.property,r=null!==(t=null==n?void 0:n[0])&&void 0!==t?t:i.defaultValue;if(!r)return null;var o=r.payload,s=o.type,l=o.range;switch(s){case H.DateRangeType.Static:return gC(r.target,l,i.dateMode,i.rangeMode);case H.DateRangeType.Relative:return mC(r.target,l);case H.DateRangeType.Quick:var u=i.quickRanges[l];return u?mC(r.target,u):null}}var vC,bC,CC,TC,SC,DC,kC,wC,xC,AC,IC,PC,_C,MC,LC,RC,VC,NC,EC,FC,OC,HC,BC,UC,zC,KC,jC,WC,GC,YC,qC,JC,XC,QC,ZC,$C,eT,tT,aT,nT,iT,rT,oT,sT,lT,uT,cT,dT,pT,hT,yT,gT,mT,fT,vT,bT,CT,TT,ST,DT,kT,wT,xT,AT,IT,PT,_T,MT,LT,RT,VT,NT,ET,FT,OT,HT,BT,UT,zT,KT,jT,WT,GT,YT,qT,JT,XT,QT,ZT,$T,eS,tS,aS,nS,iS,rS,oS,sS,lS,uS,cS,dS,pS,hS,yS,gS,mS,fS,vS,bS,CS,TS,SS,DS,kS,wS,xS,AS,IS,PS,_S,MS,LS,RS,VS,NS,ES,FS,OS,HS,BS,US,zS,KS,jS,WS,GS,YS,qS,JS,XS,QS,ZS,$S,eD,tD,aD,nD,iD,rD,oD,sD,lD,uD,cD,dD,pD,hD,yD,gD,mD,fD,vD,bD,CD,TD,SD,DD,kD,wD,xD,AD,ID,PD,_D,MD,LD,RD,VD,ND,ED,FD,OD,HD,BD,UD,zD,KD,jD,WD,GD,YD,qD,JD,XD,QD,ZD,$D,ek,tk,ak,nk,ik,rk,ok,sk,lk,uk,ck,dk,pk,hk,yk,gk,mk,fk,vk,bk,Ck,Tk,Sk,Dk,kk,wk,xk,Ak,Ik,Pk,_k,Mk,Lk,Rk,Vk,Nk,Ek,Fk,Ok,Hk,Bk,Uk,zk,Kk=function(e,t){switch(e.slicerType){case H.SlicerType.LabelSlicer:return{columns:{options:{},values:[{name:t}]}};case H.SlicerType.TreeSlicer:case H.SlicerType.ComboBoxSlicer:return{collection:{options:{},groups:[{name:"multi-dimensions",options:{display:""},roles:{columns:{options:{},values:[{name:t}]}}}]}};default:return{}}};(bC=vC=vC||{})[bC.Unknown=0]="Unknown",bC[bC.Dashboard=1]="Dashboard",bC[bC.Dataset=2]="Dataset",bC[bC.DataSource=3]="DataSource",bC[bC.Image=4]="Image",bC[bC.Theme=5]="Theme",bC[bC.MapHierarchy=6]="MapHierarchy",bC[bC.GeoJson=7]="GeoJson",bC[bC.Report=8]="Report",bC[bC.Visual=9]="Visual",bC[bC.FloorPlan=10]="FloorPlan",bC[bC.AnalysisModel=11]="AnalysisModel",bC[bC.Font=12]="Font",bC[bC.LanguageResource=13]="LanguageResource",(TC=CC=CC||{}).PivotChart="pivotChart",TC.RichEditor="richEditor",TC.Picture="picture",TC.Container="container",TC.TabContainer="tabContainer",TC.Group="group",TC.Visual="visual",TC.Slicer="slicer",TC.SpreadChart="spreadChart",TC.MergedChart="mergedChart",TC.EmbeddedDashboard="embeddedDashboard",TC.EmbeddedReport="embeddedReport",(DC=SC=SC||{}).TreeSlicer="treeSlicer",DC.DateRangeSlicer="dateRangeSlicer",DC.ComboBoxSlicer="comboBoxSlicer",DC.LabelSlicer="labelSlicer",DC.RelativeDateSlicer="relativeDateSlicer",DC.DataRangeSlicer="dataRangeSlicer",(wC=kC=kC||{}).Label="Label",wC.List="List",wC.ButtonGroup="Button Group",wC.Gradient1="Gradient1",wC.Gradient2="Gradient2",wC.Gradient3="Gradient3",wC.Cool1="Cool1",wC.Cool2="Cool2",wC.Cool3="Cool3",wC.UnderLine="Under Line",(AC=xC=xC||{})[AC.EXACT=10]="EXACT",AC[AC.RANGE=20]="RANGE",AC[AC.GREATER=21]="GREATER",AC[AC.LESS=22]="LESS",AC[AC.STARTWITH=30]="STARTWITH",AC[AC.ENDWITH=31]="ENDWITH",AC[AC.CONTAIN=32]="CONTAIN",AC[AC.MATCHWORD=33]="MATCHWORD",(PC=IC=IC||{}).GENERAL="general",PC.VALUE_RANGE="value_range",PC.WILDCARD="wildcard",PC.DATE_RANGE="date_range",PC.RELATIVE_DATE="relative_date",PC.SLICER_RELATIVE_DATE="slicer_relative_date",(MC=_C=_C||{}).Column="column",MC.StackColumn="stackedColumn",MC.PercentStackColumn="percentStackedColumn",MC.RangeColumn="rangeColumn",MC.Bar="bar",MC.StackBar="stackedBar",MC.PercentStackBar="percentStackedBar",MC.RangeBar="rangeBar",MC.Line="line",MC.Area="area",MC.StackArea="stackedArea",MC.PercentStackArea="percentStackedArea",MC.RangeArea="rangeArea",MC.Pie="pie",MC.Donut="donut",MC.Rose="rose",MC.RadialStackedBar="radialStackedBar",MC.StackBarInPolar="stackedBarInPolar",MC.Sunburst="sunburst",MC.BarInPolar="barInPolar",MC.Radar="radar",MC.FilledRadar="filledRadar",MC.DisaggregateScatter="scatter",MC.Bubble="bubble",MC.TreeMap="treeMap",MC.Composite="combined",MC.Funnel="funnel",MC.Gauge="gauge",MC.Indicator="indicator",MC.KPI="KPI",MC.PivotTable="pivotTable",MC.DataTable="dataTable",MC.KpiMatrix="kpiMatrix",MC.Map="map",MC.WebContent="webContent",MC.FloorPlan="floorPlan",MC.Card="card",(RC=LC=LC||{}).EN_US="en-US",RC.EN_GB="en-GB",RC.ZH_CN="zh-CN",RC.ZH_TW="zh-TW",RC.PL_PL="pl-PL",RC.ES_ES="es-ES",(NC=VC=VC||{}).Chart="chart",NC.Table="table",NC.Map="map",NC.Visual="visual",NC.Container="container",NC.Component="component",NC.EmbeddedComponents="embeddedComponents",NC.Slicer="slicer",NC.SpreadChart="spreadChart",NC.MergedChart="mergedChart",NC.Hidden="hidden",(FC=EC=EC||{}).Sum="sum",FC.Average="avg",FC.Max="max",FC.Min="min",FC.Count="cnt",FC.DistinctCount="dst",FC.None="none",FC.First="fst",FC.List="list",(HC=OC=OC||{})[HC.Value=1]="Value",HC[HC.Calculation=2]="Calculation",HC[HC.CustomMeasure=3]="CustomMeasure",(UC=BC=BC||{}).Running="running",UC.Moving="moving",UC.Date="date",UC.Group="group",(KC=zC=zC||{}).Value="value",KC.Grouping="grouping",KC.GroupingOrValue="groupingOrValue",KC.DataRoleCollection="collection",KC.DataRoleGroup="dataRoleGroup",KC.Attribute="attribute",KC.AttributeOrValue="attributeOrValue",(WC=jC=jC||{}).Value="value",WC.Calculation="calculation",WC.Grouping="grouping",WC.Hierarchy="hierarchy",(YC=GC=GC||{}).Measure="measure",YC.Dimension="dimension",(JC=qC=qC||{}).IntegerEditor="int",JC.FloatEditor="float",JC.BoolEditor="bool",JC.TextAreaEditor="textarea",JC.TextEditor="text",JC.EnumEditor="enum",JC.ColorEditor="color",JC.PercentageEditor="percentage",JC.FormatEditor="format",JC.DisplayUnitEditor="displayUnit",JC.AngleEditor="angle",JC.PaletteEditor="palette",JC.TextStyleEditor="textStyle",JC.ColorRangeEditor="colorRange",JC.AutoScrollEditor="autoScroll",JC.GrandTotalEditor="grandTotal",JC.MapSelectorEditor="mapSelector",JC.BorderEditor="border",JC.BorderSizeEditor="borderSize",JC.ShadowEditor="shadow",JC.ImageEditor="image",JC.PositionEditor="position",JC.DocThemeEditor="docTheme",JC.JumpToEditor="jumpTo",JC.TimeSpanEditor="timeSpan",JC.BatchSetStyleEditor="batchSetStyle",JC.AutoTitleEditor="autoTitle",JC.ParametersEditor="parameters",JC.DashboardFiltersEditor="dashboardFilters",JC.KPIConditionalPreviewEditor="kpiConditionalPreview",JC.RatioStringEditor="ratioString",JC.PageSizeEditor="pageSizeEditor",JC.PageSizeFixedEditor="pageSizeFixedEditor",JC.FilterScopeEditor="filterScopeEditor",JC.DatasetAutoRefreshEditor="datasetAutoRefreshEditor",JC.DatasetAutoRefreshIntervalEditor="DatasetAutoRefreshIntervalEditor",JC.SliderEditor="sliderEditor",JC.DataTableStyleTemplatesEditor="dataTableStyleTemplatesEditor",JC.KPIMatrixTableStyleTemplatesEditor="kpiMatrixStyleTemplatesEditor",JC.PivotTableStyleTemplatesEditor="pivotTableStyleTemplatesEditor",JC.HiddenActionsEditor="hiddenActions",JC.FloorPlanSelectorEditor="floorPlanSelector",JC.ScenarioNameEditor="scenarioNameEditor",JC.DataColorRelationshipEditor="dataColorRelationshipEditor",JC.ScaleStringEditor="scaleStringEditor",JC.CollectionEditor="collection",JC.ClickActionEditor="clickAction",JC.ContextMenuActionsEditor="contextMenuActions",JC.GradientEditor="gradientEditor",JC.SlicerTypeEditor="slicerTypeEditor",JC.DateRangePickerEditor="dateRangePicker",JC.CustomFormatEditor="customFormat",JC.QuickRangeCollectionEditor="quickRangeCollection",JC.DateModeEditor="dateMode",JC.LanguageResourceListEditor="languageResourceListEditor",JC.LanguageResourceEditor="languageResourceEditor",JC.LanguageResourceTextAreaEditor="LanguageResourceTextAreaEditor",JC.CustomDataSourceEditor="customDataSourceEditor",JC.SlicerDefaultValueEditor="slicerDefaultValueEditor",(QC=XC=XC||{}).HasDataset="hasDataset",QC.HasDimension="hasDimension",QC.HasValue="hasValue",QC.Focus="focus",QC.HasValidColumn="hasValidColumn",QC.IsParameterValue="isParameterValue",QC.ShowPivotTable="showPivotTable",QC.CanEdit="canEdit",QC.Mobile="mobile",QC.Viewer="viewer",QC.Editing="editing",QC.HasParameters="hasParameters",QC.HasRuntimeFilter="hasRuntimeFilter",QC.InSingleScenarioMode="inSingleScenarioMode",QC.HasCrossFilterSetting="hasCrossFilterSetting",QC.IsInCardItem="isInCardItem",QC.IsCardInDesigner="isCardInDesigner",QC.HasCustomDataSource="hasCustomDataSource",($C=ZC=ZC||{}).Single="single",$C.Plain="plain",$C.Matrix="matrix",(tT=eT=eT||{}).NoRepeat="no-repeat",tT.Repeat="repeat",tT.RepeatX="repeat-x",tT.RepeatY="repeat-y",tT.Space="space",tT.Round="round",(nT=aT=aT||{}).Original="auto",nT.Contain="contain",nT.Cover="cover",nT.Stretched="100% 100%",(rT=iT=iT||{}).Center="center",rT.Left="left",rT.Right="right",(sT=oT=oT||{}).Center="center",sT.Top="top",sT.Bottom="bottom",(uT=lT=lT||{}).NotLoad="notLoad",uT.Loading="loading",uT.LoadFailed="loadFailed",uT.LoadSuccess="loadSuccess",uT.NoAccess="noAccess",(dT=cT=cT||{}).None="none",dT.Auto="auto",dT.Inherit="inherit",dT.NoFill="noFill",(hT=pT=pT||{}).Default="Default",hT.Modified="Modified",hT.Inherited="Inherited",hT.Unset="Unset",(gT=yT=yT||{}).StaticValue="StaticValue",gT.DashboardParameter="DashboardParameter",(fT=mT=mT||{})[fT.Number=0]="Number",fT[fT.Text=1]="Text",fT[fT.Date=2]="Date",fT[fT.DateTime=3]="DateTime",fT[fT.Boolean=4]="Boolean",(bT=vT=vT||{}).Filter="filter",bT.ClearRuntimeFilter="clearRuntimeFilter",bT.ModelParameters="modelParameters",bT.Sort="sort",bT.Rank="rank",bT.ConvertVisual="_convertVisual",bT.Edit="edit",bT.Focus="focus",bT.ShowData="showData",bT.Export="export",bT.Remove="remove",bT.ClearCustomData="clearCustomData",bT.Annotation="annotation",bT.Extension="extension",bT.Event="event",bT.CleanSliceFilter="cleanSliceFilter",bT.SwapRowsAndCols="_swapRowsAndCols",bT.SlicerSearch="_slicerSearch",bT.SlicerSort="_slicerSort",bT.SlicerSelectParameter="_slicerSelectParameter",bT.EditWebContent="_editWebContent",bT.MobileRemove="_mobileRemove",bT.ShareScenario="shareScenario",bT.OpenFullDashboard="openFullDashboard",bT.ContentSetting="contentSetting",bT.ClearSelection="clearSelection",bT.AnalysisPath="analysisPath",bT.MergeDatasets="mergeDatasets",(TT=CT=CT||{}).ThemeColors="themeColors",TT.StandardColors="standardColors",TT.CustomColors="customColors",(DT=ST=ST||{}).Date="date",DT.Year="year",DT.YearQuarter="quarter",DT.YearMonth="month",DT.DateTime="second",(wT=kT=kT||{}).Basic="basic",wT.StartEnd="start-end",(AT=xT=xT||{}).Last="last",AT.This="this",AT.Next="next",AT.LastN="lastN",AT.NextN="nextN",AT.ToDate="toDate",(PT=IT=IT||{}).Year="year",PT.Quarter="quarter",PT.Month="month",PT.Week="week",PT.Day="day",PT.Hour="hour",PT.Minute="minute",PT.Second="second",(MT=_T=_T||{}).Static="range",MT.Relative="dynamicRange",MT.Quick="quickRange",(RT=LT=LT||{}).Ready="ready",RT.Initialized="initialized",RT.VisibilityStateChange="visibilityStateChange",RT.SetProperty="setProperty",RT.VisualEvent="visualEvent",RT.SelectionChange="selectionChange",RT.ShowTooltip="showTooltip",RT.HideTooltip="hideTooltip",RT.MoveTooltip="moveTooltip",RT.Click="click",RT.Dev="dev",RT.ShowLoading="showLoading",RT.HideLoading="hideLoading",RT.PreUpdateFeedback="preUpdateFeedback",RT.SetFilter="setFilter",RT.ShowContextMenu="showContextMenu",RT.HideContextMenu="hideContextMenu",RT.ReadyLoadFonts="readyLoadFonts",RT.Init="init",RT.Update="update",RT.CleanSelection="cleanSelection",RT.DispatchActionEvent="dispatchActionEvent",RT.ExecuteCommand="executeCommandEvent",RT.PreUpdate="preUpdate",RT.LoadFonts="loadFonts",RT.FontLoaded="fontLoaded",(NT=VT=VT||{}).Refresh="refresh",NT.UpdateDefinition="updateDefinition",NT.LoadDefinitionError="loadDefinitionError",(FT=ET=ET||{}).RenderStart="renderStart",FT.RenderError="renderError",FT.RenderFinish="renderFinish",FT.LoadStart="loadStart",FT.LoadComplete="loadComplete",(HT=OT=OT||{}).DataViewChange="dataViewChange",HT.PropertyChange="propertyChange",HT.EnvironmentChange="environmentChange",HT.ScaleChange="scaleChange",HT.FilterChange="filterChange",HT.FullyChange="fullyChange",HT.ViewportChange="viewportChange",(UT=BT=BT||{}).LoadingStateChange="LoadingStateChange",UT.RefreshData="RefreshData",UT.RefreshSlicerFilter="RefreshSlicerFilter",UT.RefreshVariable="RefreshVariable",UT.DispatchActionEvent="DispatchActionEvent",UT.Error="Error",UT.Rendered="Rendered",UT.BeforeAggregation="BeforeAggregation",UT.AggregationReady="AggregationReady",UT.SelectionChange="selectionChange",UT.slicerChange="selectionChange",UT.Repaint="Repaint",(KT=zT=zT||{}).InnerClick="InnerClick",KT.OuterClick="OuterClick",KT.AssociateChange="AssociateChange",KT.Error="Error",KT.Rendered="Rendered",KT.AggregationReady="AggregationReady",KT.TogglePage="TogglePage",KT.Refresh="Refresh",(WT=jT=jT||{}).Online="online",WT.Offline="offline",WT.DirectGeo="direct",(YT=GT=GT||{}).XAxis="X",YT.YAxis="Y",(JT=qT=qT||{}).Drill="drill",JT.RelativeDate="relativeDate",(QT=XT=XT||{}).Default="all",QT.List="list",QT.Path="path",($T=ZT=ZT||{}).Png="png",$T.Svg="svg",$T.Ppt="ppt",$T.Excel="excel",$T.AllPageExcel="allPageExcel",(tS=eS=eS||{}).Value="value",tS.Calculation="calculation",tS.Grouping="grouping",tS.Hierarchy="hierarchy",tS.DrillItem="drillItem",tS.Measure="measure",tS.Dimension="dimension",tS.CustomMeasure="CustomMeasure",tS.CalculatedColumn="CalculatedColumn",tS.DatasetColumn="DATASET_SCHEMA_ATTRIBUTE",tS.DatasetPanel="datasetPanel",(nS=aS=aS||{}).ADD_PIVOT_TABLE="ADD_PIVOT_TABLE",nS.ADD_SCENARIO="ADD_SCENARIO",nS.ADD_MOBILE_SCENARIO="ADD_MOBILE_SCENARIO",nS.MOVE_SCENARIO="MOVE_SCENARIO",nS.RECT_SELECTION="RECT_SELECTION",nS.RESIZE_SCENARIO="RESIZE_SCENARIO",nS.REORDER_PAGE="REORDER_PAGE",nS.REORDER_CONTAINER_TAB="REORDER_CONTAINER_TAB",nS.DATASET_SCHEMA_ENTITY="DATASET_SCHEMA_ENTITY",nS.DATASET_SCHEMA_ATTRIBUTE="DATASET_SCHEMA_ATTRIBUTE",nS.PIVOT_SETTING_COLUMN="PIVOT_SETTING_COLUMN",nS.HIERARCHY_ITEM="HIERARCHY_ITEM",nS.REORDER_RELATIVE_DATE_ITEM="REORDER_RELATIVE_DATE_ITEM",nS.PIVOT_SETTING_COLUMNS_ITEM="PIVOT_SETTING_COLUMNS_ITEM",nS.DRILL_DOWN_ITEM="DRILL_DOWN_ITEM",nS.REUSE_SCENARIO="REUSE_SCENARIO",(rS=iS=iS||{}).Designer="DESIGNER",rS.Preview="PREVIEW",rS.Viewer="VIEWER",(sS=oS=oS||{}).BatchSetStyle="$scenarioStyle",sS.SetDatasetAutoRefresh="$setDatasetAutoRefresh",sS.SetDatasetAutoRefreshInterval="$setDatasetAutoRefreshInterval",sS.TableStyleTemplate="$templateStyle",sS.BatchTabContainer="$tabContainerStyle",sS.BatchLabelSlicerStyle="$labelSlicerStyle",(uS=lS=lS||{}).Pre="pre",uS.Post="post",(dS=cS=cS||{})[dS.Equal=0]="Equal",dS[dS.NotEqual=1]="NotEqual",dS[dS.Greater=2]="Greater",dS[dS.EqualOrGreater=3]="EqualOrGreater",dS[dS.Less=4]="Less",dS[dS.EqualOrLess=5]="EqualOrLess",dS[dS.Between=6]="Between",dS[dS.NotBetween=7]="NotBetween",dS[dS.AboveAverage=12]="AboveAverage",dS[dS.BelowAverage=13]="BelowAverage",dS[dS.AboveMax=14]="AboveMax",dS[dS.BelowMin=15]="BelowMin",(hS=pS=pS||{})[hS.Equal=0]="Equal",hS[hS.NotEqual=1]="NotEqual",hS[hS.Greater=2]="Greater",hS[hS.EqualOrGreater=3]="EqualOrGreater",hS[hS.Less=4]="Less",hS[hS.EqualOrLess=5]="EqualOrLess",hS[hS.Between=6]="Between",hS[hS.NotBetween=7]="NotBetween",hS[hS.StartWith=8]="StartWith",hS[hS.EndWith=9]="EndWith",hS[hS.Contain=10]="Contain",hS[hS.MatchWord=11]="MatchWord",hS[hS.AboveAverage=12]="AboveAverage",hS[hS.BelowAverage=13]="BelowAverage",hS[hS.AboveMax=14]="AboveMax",hS[hS.BelowMin=15]="BelowMin",hS[hS.DoesNotContain=16]="DoesNotContain",hS[hS.Today=17]="Today",hS[hS.Yesterday=18]="Yesterday",hS[hS.Tomorrow=19]="Tomorrow",hS[hS.Last7Days=20]="Last7Days",hS[hS.ThisMonth=21]="ThisMonth",hS[hS.LastMonth=22]="LastMonth",hS[hS.NextMonth=23]="NextMonth",hS[hS.ThisWeek=24]="ThisWeek",hS[hS.LastWeek=25]="LastWeek",hS[hS.NextWeek=26]="NextWeek",hS[hS.StrEqual=27]="StrEqual",hS[hS.StrNotEqual=28]="StrNotEqual",(gS=yS=yS||{}).OnTitle="onTitle",gS.OnScale="onScale",(fS=mS=mS||{}).Delta="Delta",fS.Ratio="Ratio",(bS=vS=vS||{}).Viewer="viewer",bS.Tables="tables",bS.Source="source",(TS=CS=CS||{})[TS.None=0]="None",TS[TS.Viewer=1]="Viewer",TS[TS.Tables=2]="Tables",TS[TS.Source=4]="Source",TS[TS.All=7]="All",(DS=SS=SS||{}).Top="top",DS.Bottom="bottom",DS.Left="left",DS.Right="right",(wS=kS=kS||{}).Normal="normal",wS.Navigator="navigator",(AS=xS=xS||{}).None="",AS.Inspector="inspector",AS.DataBinding="dataBinding",AS.MobileScenarioList="mobileScenarioList",(PS=IS=IS||{}).Ratio0_5="0.5x",PS.Ratio0_8="0.8x",PS.Ratio1_0="1.0x",PS.Ratio1_2="1.2x",PS.Ratio1_5="1.5x",PS.Ratio2_0="2.0x",PS.Ratio2_5="2.5x",PS.Ratio3_0="3.0x",PS.Ratio4_0="4.0x",PS.Ratio5_0="5.0x",PS.Ratio6_0="6.0x",PS.Ratio7_0="7.0x",PS.Ratio8_0="8.0x",PS.RatioAuto="-1x",(MS=_S=_S||{}).Inspector="inspector",MS.DataBiding="data-binding",MS.AppBar="app-bar",MS.ActionBar="action-bar",MS.MenuBar="menu-bar",MS.DraggableDialog="draggable-dialog",MS.ModalDialog="modal-dialog",MS.BottomBar="bottom-bar",(RS=LS=LS||{}).Boolean="Boolean",RS.Integer="Integer",RS.Float="Float",RS.String="String",RS.DateTime="DateTime",RS.MultiDimension="MultiDimension",(NS=VS=VS||{}).Boolean="Boolean",NS.Integer="Integer",NS.Float="Float",NS.String="String",NS.DateTime="DateTime",NS.Date="Date",NS.MultiDimension="MultiDimension",(FS=ES=ES||{}).Dynamic="dynamic",FS.Static="static",(HS=OS=OS||{}).DatasetReference="datasetReference",HS.Custom="custom",(US=BS=BS||{}).max="max",US.min="min",(KS=zS=zS||{}).Report="report",KS.Dashboard="dashboard",KS.OuterURL="outerURL",KS.InnerURL="innerURL",(WS=jS=jS||{}).NewWindow="newWindow",WS.Dialog="dialog",WS.Embedded="embedded",WS.Redirect="redirect",WS.None="none",(YS=GS=GS||{}).HostPage="hostPage",YS.Dashboard="dashboard",(JS=qS=qS||{}).NotSet="notset",JS.Constant="constant",JS.DatasetColumn="datasetColumn",JS.Selection="datasetColumn",JS.FilteredValue="filteredValue",JS.Slicer="slicer",JS.DashboardParameter="parameter",(QS=XS=XS||{}).All="all",QS.MinValue="minValue",QS.MaxValue="maxValue",($S=ZS=ZS||{}).Range="range",$S.MinValue="minValue",$S.MaxValue="maxValue",(tD=eD=eD||{}).User="user",tD.Document="document",tD.UrlParameters="urlparameters",tD.Parameters="parameters",tD.Slicer="slicer",tD.Slicers="slicers",tD.FilteredValue="filteredvalue",tD.Selection="selection",tD.Datasets="datasets",tD.Language="languageresources",(nD=aD=aD||{}).Common="common",nD.Json="$JSON$",nD.Collection="$COLLECTION$",nD.FormatFn="$FORMAT$",(rD=iD=iD||{}).COT="dataset",rD.AnalysisModel="smdsc",rD.StreamingDataset="sdst",rD.PushDataset="pdst",(sD=oD=oD||{}).DirectQuery="DirectQuery",sD.CacheMode="CacheMode",(uD=lD=lD||{}).Date="date",uD.Datetime="datetime",uD.Number="number",uD.String="string",uD.Boolean="boolean",(dD=cD=cD||{}).None="none",dD.Currency="currency",dD.ImageURL="imageUrl",dD.ImageBinary="imageBinary",dD.GeoRegion="geoRegion",dD.GeoLatitude="geoLatitude",dD.GeoLongitude="geoLongitude",(hD=pD=pD||{}).TABLE="table",hD.ROW="row",hD.COLUMN="column",hD.CELL="cell",hD.ADVANCE="advance",hD.DIMENSION="dimension",hD.DATAROLE="dataRole",(gD=yD=yD||{})[gD.None=0]="None",gD[gD.Ascending=1]="Ascending",gD[gD.Descending=2]="Descending",gD[gD.Manual=3]="Manual",(fD=mD=mD||{})[fD.DataSource=1]="DataSource",fD[fD.Auto=2]="Auto",fD[fD.Manual=3]="Manual",fD[fD.Value=4]="Value",fD[fD.Group=5]="Group",fD[fD.Column=6]="Column",(bD=vD=vD||{})[bD.Auto=0]="Auto",bD[bD.None=1]="None",bD[bD.Hundreds=2]="Hundreds",bD[bD.Thousands=3]="Thousands",bD[bD.TenThousand=4]="TenThousand",bD[bD.HundredThousand=5]="HundredThousand",bD[bD.Millions=6]="Millions",bD[bD.TenMillion=7]="TenMillion",bD[bD.HundredMillion=8]="HundredMillion",bD[bD.Billions=9]="Billions",bD[bD.Trillions=10]="Trillions",(TD=CD=CD||{}).Auto="auto",TD.None="none",TD.Hundreds="hundreds",TD.Thousands="thousands",TD.TenThousand="tenThousands",TD.HundredThousand="hundredThousand",TD.Millions="millions",TD.TenMillion="tenMillion",TD.HundredMillion="hundredMillion",TD.Billions="billions",TD.Trillions="trillions",(DD=SD=SD||{})[DD.None=0]="None",DD[DD.Year=1]="Year",DD[DD.Quarter=2]="Quarter",DD[DD.Month=4]="Month",DD[DD.Week=8]="Week",DD[DD.Day=16]="Day",DD[DD.Hour=32]="Hour",DD[DD.Minute=64]="Minute",DD[DD.Second=128]="Second",DD[DD.Millisecond=256]="Millisecond",DD[DD.DatetimePart=511]="DatetimePart",(wD=kD=kD||{}).None="none",wD.EmptyCell="emptyCell",wD.EmptyDimension="emptyDimension",wD.EmptyRowColumn="emptyRowColumn",(AD=xD=xD||{}).IFrame="iframe",AD.Div="div",(PD=ID=ID||{}).Inner="INNER",PD.Full="FULL",(MD=_D=_D||{}).Normal="normal",MD.Spread="spread",MD.Merged="merged",MD.CustomInput="customInput",(RD=LD=LD||{}).ActivePage="activePage",RD.VirtualPage="virtualPage",RD.ExportPage="exportPage",(ND=VD=VD||{}).FadeIn="fadeIn",ND.Slide="slide",(FD=ED=ED||{}).DimensionItem="dimension",FD.MeasureName="measure",(HD=OD=OD||{}).AggregatedData="expression-aggregatedData",HD.DashboardVariable="expression-dashboardVariable",(UD=BD=BD||{}).Off="off",UD.SingleSource="singleSource",UD.MultiSource="multiSource",(KD=zD=zD||{}).Scenario="scenario",KD.PageBlank="pageBlank",KD.ScenarioBlank="scenarioBlank",KD.AllArea="allArea",(WD=jD=jD||{}).Values="values",WD.Category="category",WD.Series="series",WD.Details="details",(YD=GD=GD||{}).Far="Far",YD.Center="Center",YD.Near="Near",(JD=qD=qD||{}).Horizontal="Horizontal",JD.ParallelToY="ParallelToY",JD.PerpendicularToY="PerpendicularToY",(QD=XD=XD||{}).None="None",QD.Always="Always",QD.Auto="Auto",($D=ZD=ZD||{}).None="none",$D.Polling="polling",$D.RealTime="realTime",(tk=ek=ek||{}).None="none",tk.DataPoint="dataPoint",tk.Category="category",(nk=ak=ak||{}).Basic="basic",nk.Advanced="advanced",nk.Tuple="tuple",nk.Tree="tree",nk.Dynamic="dynamic",(rk=ik=ik||{}).In="In",rk.NotIn="NotIn",(sk=ok=ok||{}).LessThan="LessThan",sk.LessThanOrEqual="LessThanOrEqual",sk.GreaterThan="GreaterThan",sk.GreaterThanOrEqual="GreaterThanOrEqual",(uk=lk=lk||{}).And="And",uk.Or="Or",(dk=ck=ck||{}).Visual="visual",dk.Slicer="slicer",(hk=pk=pk||{}).Today="today",hk.Yesterday="yesterday",hk.ThisWeek="thisWeek",hk.Last7Days="last7Days",hk.ThisMonth="thisMonth",hk.Last30Days="last30Days",hk.ThisYear="thisYear",hk.Last365Days="last365Days",(gk=yk=yk||{}).Text="text",gk.ImageURL="imageUrl",gk.ImageBinary="imageBinary",(fk=mk=mk||{}).OriginalValue="originalValue",fk.Part="part",fk.AdjustValue="adjustValue",(bk=vk=vk||{}).Backward="backward",bk.Forward="forward",(Tk=Ck=Ck||{}).Year="year",Tk.Quarter="quarter",Tk.Month="month",Tk.Week="week",Tk.Day="day",Tk.Hour="hour",Tk.Minute="minute",Tk.Second="second",(Dk=Sk=Sk||{})[Dk.SingleValue=0]="SingleValue",Dk[Dk.ArrayValue=1]="ArrayValue",Dk[Dk.RangeValue=2]="RangeValue",Dk[Dk.HierarchyValue=3]="HierarchyValue",(wk=kk=kk||{}).Report="reports/view",wk.Dashboard="dashboards/view",(Ak=xk=xk||{}).SwitchTab="SwitchTab",Ak.SelectTab="SelectTab",Ak.SwitchPage="SwitchPage",Ak.Keep="Keep",Ak.Exclude="Exclude",Ak.Drill="Drill",Ak.Jump="Jump",Ak.DrillDown="DrillDown",Ak.DrillUp="DrillUp",Ak.DrillReset="ResetDrill",(Pk=Ik=Ik||{}).Inside="Inside",Pk.Outside="Outside",(Mk=_k=_k||{}).MIXED_IMAGE_LOAD_COMPLETED="mixed-image-load-completed",Mk.SINGLE_IMAGE_LOAD_COMPLETED="single-image-load-completed",Mk.SINGLE_SCENARIO_RENDER_COMPLETED="single-scenario-render-completed",Mk.SINGLE_PAGE_RENDER_COMPLETED="single-page-render-completed",Mk.SCENARIO_VIEWER_BASE_RENDERED="scenario-viewer-base-rendered",Mk.SCENARIOS_COUNT_COMPLETED="scenarios-count-completed",(Rk=Lk=Lk||{}).Default="default",Rk.Custom="custom",Rk.Auto="auto",Rk.FitToScreen="fitToScreen",Rk.FitToHeight="fitToHeight",Rk.FitToWidth="fitToWidth",Rk.FitToPage="fitToPage",(Nk=Vk=Vk||{}).Default="default",Nk.SinglePage="singlepage",Nk.Pageless="pageless",Nk.Continuous="continuous",(Ek=Ek||{}).DpUrlChanged="DpUrlChanged",(Ok=Fk=Fk||{}).Display="display",Ok.Size="size",Ok.Dp="dp",Ok.Toolbar="toolbar",(Bk=Hk=Hk||{}).Default="Default",Bk.Left="Left",Bk.Center="Center",Bk.Right="Right",(zk=Uk=Uk||{}).And="and",zk.Or="or";var jk,Wk,Gk,Yk;(Wk=jk=jk||{}).ShowTooltip="showTooltip",Wk.None="none",Wk.Keep="keep",Wk.Exclude="exclude",Wk.DrillTo="drillTo",Wk.JumpTo="jumpTo",Wk.AddMonitor="addMonitor",(Yk=Gk=Gk||{}).Charts="charts",Yk.Visual="visual",Yk.Component="component",Yk.Slicers="slicers",Yk.Gallery="gallery",Yk.Wizard="wizard";var qk,Jk,Xk,Qk,Zk,$k,ew,tw,aw,nw,iw,rw,ow,sw,lw,uw,cw,dw,pw,hw,yw,gw,mw,fw,vw,bw,Cw,Tw,Sw,Dw,kw,ww,xw,Aw,Iw,Pw,_w,Mw,Lw,Rw,Vw,Nw,Ew,Fw,Ow,Hw,Bw,Uw,zw,Kw,jw,Ww,Gw,Yw,qw,Jw,Xw,Qw,Zw,$w,ex,tx,ax,nx,ix,rx,ox,sx,lx="null".concat("");(Jk=qk=qk||{}).Symbol="Symbol",Jk.Label="Label",(Qk=Xk=Xk||{}).Content="Content",Qk.TextStyle="TextStyle",Qk.TextPosition="TextPosition",Qk.Shape="Shape",($k=Zk=Zk||{}).addToRoot="addToRoot",$k.ignore="ignore",(tw=ew=ew||{}).separator="separator",tw.length="length",(nw=aw=aw||{}).staticValue="staticValue",nw.userContext="userContext",nw.organizationContext="organizationContext",nw.dataSet="dataSet",(rw=iw=iw||{}).Default="default",rw.Show="show",rw.Auto="auto",rw.Hide="hide",(sw=ow=ow||{}).Standard="standard",sw.Lite="lite",(uw=lw=lw||{}).parameters="parameters",uw.fonts="fonts",(dw=cw=cw||{})[dw.Measure=1]="Measure",dw[dw.Dimension=2]="Dimension",(hw=pw=pw||{}).SubDate="subDate",hw.Hierarchy="hierarchy",hw.DateHierarchy="dateHierarchy",hw.CustomMeasure="CustomMeasure",hw.CalculatedColumn="CalculatedColumn",hw.FiscalDate="fiscalDate",hw.Running="running",hw.Moving="moving",hw.Date="date",hw.Group="group",(gw=yw=yw||{}).Measure="measure",gw.Dimension="dimension",gw.String="string",gw.GeoRegion="geoRegion",gw.ImageURL="imageUrl",gw.ImageBinary="imageBinary",gw.Number="number",gw.GeoLatitude="geoLatitude",gw.GeoLongitude="geoLongitude",gw.Currency="currency",gw.Boolean="boolean",gw.Date="date",gw.DateTime="datetime",gw.SubDate="subDate",gw.Hierarchy="hierarchy",(fw=mw=mw||{}).major="major",fw.minor="minor",(bw=vw=vw||{}).Hide="Hide",bw.Ellipsis="Ellipsis",bw.Wrap="Wrap",(Tw=Cw=Cw||{}).Measure="measure",Tw.CalculatedColumn="calculatedColumn",(Dw=Sw=Sw||{}).Width="width",Dw.Height="height",Dw.Left="left",Dw.Top="top",(ww=kw=kw||{}).Refresh="refresh",ww.CrossFilter="crossFilter",ww.FitTo="pageSize",ww.SlideShow="slideShow",ww.Export="export",ww.FilterView="filterView",ww.StretchContent="stretchContent",(Aw=xw=xw||{}).Default="default",Aw.All="all",Aw.Active="active",(Pw=Iw=Iw||{}).All="all",Pw.Partial="partial",Pw.Trigger="trigger",(Mw=_w=_w||{})[Mw.None=0]="None",Mw[Mw.Year=1]="Year",Mw[Mw.Quarter=2]="Quarter",Mw[Mw.Month=4]="Month",Mw[Mw.Week=8]="Week",Mw[Mw.Day=16]="Day",Mw[Mw.Hour=32]="Hour",Mw[Mw.Minute=64]="Minute",Mw[Mw.Second=128]="Second",Mw[Mw.Millisecond=256]="Millisecond",Mw[Mw.DatetimePart=511]="DatetimePart",(Rw=Lw=Lw||{}).ActiveFilter="activeSliceFilter",Rw.DatasetSchema="datasetSchema",(Nw=Vw=Vw||{}).Close="close",Nw.Save="save",Nw.Loaded="loaded",Nw.Rendered="rendered",Nw.DashboardReady="ready.dashboard",Nw.ScenarioFocusChange="focuschange.scenario",Nw.Error="error",(Fw=Ew=Ew||{}).None="buildin-none",Fw.Default="buildin-default",(Hw=Ow=Ow||{}).N_Mode="N-Mode",Hw.Z_Mode="Z-Mode",(Uw=Bw=Bw||{}).Auto="auto",Uw.Distributed="distributed",Uw.FixedSize="fixedSize",(Kw=zw=zw||{}).Single="Single",Kw.Multiple="Multiple",(Ww=jw=jw||{}).CardItem="cardItem",Ww.SubScenario="subScenario",(Yw=Gw=Gw||{}).All="all",Yw.DateTime="dateTime",(Jw=qw=qw||{}).Dashboard="dashboard",Jw.Scenario="scenario",Jw.Theme="theme",(Qw=Xw=Xw||{}).Show="show",Qw.Hide="hide",Qw.ShowOnHover="hover",($w=Zw=Zw||{}).error="error",$w.info="info",(tx=ex=ex||{}).Column="column",tx.ValueRange="valueRange",tx.Collection="collection",(nx=ax=ax||{}).Series="series",nx.ValueRange="valueRange",(rx=ix=ix||{}).Internal="dashboardsInternal",rx.Dashboard="dashboards",rx.DashboardThird="dashboardsThird",(sx=ox=ox||{}).Classic="columns",sx.Hierarchy="hierarchy",sx.ParentChild="parent-child";function ux(e){var t;return null==e?null:null===(t=d$.definitionManager.getDefinition(e).getDataBindingMeta())||void 0===t?void 0:t.hiddenDataRoles}var cx=ae.curry(function(e,t){var a;if(!t)return null;if(Jr.isCustomDataSource(t)){var n=Us.customDataSource(t),i=d$.cacheManager.get(Lw.DatasetSchema,n.id),r=Kk(t,null===(a=n.content.profile.columns[0])||void 0===a?void 0:a.columnName);return new uC(r,i,{})}var o=Us.datasetId(t),s=Us.pivotSetting(t),l=Hs.profilesOnlyContent(e)[o],u=d$.getDatasetSchema(o),c=d$.definitionManager.getDefinition(t).getDataBindingMeta(),d=Hs.languageResource(e);return new uC(s,u,l,null==c?void 0:c.hiddenDataRoles,null==c?void 0:c.weakDataRoles,d)}),dx=ae.curry(function(e,t){var a=Hs.scenarioById(t,e);return cx(e,a)}),px=(ae.curry(function(e,t){var a=Hs.scenarioByName(t,e);return cx(e,a)}),function(){function r(){var i=this;I()(this,r),this.usedDatasetCache=[],this.setUsedDatasetCache=function(e){for(var t=R()(e),a=i.usedDatasetCache.length;0<=a;a--){var n=i.usedDatasetCache[a];-1!==e.indexOf(n)&&r.insertDatasetId(n,t)}i.usedDatasetCache=t}}return D()(r,[{key:"insertUsedDatasetCache",value:function(e){e&&r.insertDatasetId(e,this.usedDatasetCache)}},{key:"reorderDatasetList",value:function(e,t){this.setUsedDatasetCache(t);var a=this.usedDatasetCache,n=e.reduce(function(e,t){return e[t.id]=t,e},{}),i=a.reduce(function(e,t){var a=n[t];return a&&!a.disabled&&(e.push(a),n[t]=null),e},[]),r=[],o=[];return Object.keys(n).forEach(function(e){var t=n[e];t&&(t.disabled?r.push(t):o.push(t))}),0<i.length&&0<o.length?[].concat(R()(i),[{divider:!0}],o,r):[].concat(R()(i),o,r)}},{key:"getDefaultDatasetId",value:function(){return this.usedDatasetCache[0]}}],[{key:"insertDatasetId",value:function(e,t){var a=t.indexOf(e);-1===a||t.splice(a,1),t.unshift(e)}}]),r}()),hx=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},yx=function(){function t(e){I()(this,t),this.datasetOrderManager=null,this.datasetSchemaResource=null,this.datasetLookupsResource=null,this._usedDatasetIdList=[],this.datasetOrderManager=new px,this.reduxProxy=e}return D()(t,[{key:"setUsedDatasetIdList",value:function(e){this._usedDatasetIdList=e}},{key:"getUsedDatasetIdList",value:function(){return this._usedDatasetIdList}},{key:"setDatasetProfiles",value:function(e){this._datasetProfiles=e}},{key:"getDatasetProfiles",value:function(){return this._datasetProfiles}},{key:"getDisplayFromProfile",value:function(e,t){var a=this.reduxProxy.getState();if(a){var n=Hs.profilesOnlyContent(a)[e];return n?n.nameMappings[t]:void 0}}},{key:"getDisplayFromDataset",value:function(e,t){var a=this.getDatasetSchemaHelperSync(e);if(a){var n=a.getColumn(t);if(n)return n.display}}},{key:"setDatasetSchemaResource",value:function(e){this.datasetSchemaResource=e}},{key:"setDatasetLookupsResource",value:function(e){this.datasetLookupsResource=e}},{key:"getDatasetColumnDisplay",value:function(e,t){var a=this.getDisplayFromProfile(e,t.name)||this.getDisplayFromDataset(e,t.name)||t.name;return sl(Object.assign(Object.assign({},t),{display:a}))}},{key:"insertUsedDatasetCache",value:function(e){this.datasetOrderManager.insertUsedDatasetCache(e)}},{key:"reorderDatasetList",value:function(e,t){return this.datasetOrderManager.reorderDatasetList(e,t)}},{key:"setUsedDatasetCache",value:function(e){return this.datasetOrderManager.setUsedDatasetCache(e)}},{key:"setDefaultDatasetId",value:function(e){this.defaultDatasetId=e}},{key:"getDefaultDatasetId",value:function(){return this.defaultDatasetId||this.datasetOrderManager.getDefaultDatasetId()}},{key:"getDatasetColumnInfo",value:function(e,t){var a=this.getDatasetSchemaHelperSync(e);if(a)return a.getColumn(t)}},{key:"getDatasetColumnLookups",value:function(e,t){var a={id:e,columns:[{attributeId:t}]};try{var n=this.datasetLookupsResource.get(a);if(n)return n[0].entries}catch(e){return}}},{key:"getDatasetSchemaHelperSync",value:function(e){var t=this.reduxProxy.getState(),a=Hs.profilesOnlyContent(t)[e],n=this.datasetSchemaResource.get(e);return n?new sy(n,a):null}},{key:"getDatasetSchemaHelperAsync",value:function(i){return hx(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.reduxProxy.getState(),a=Hs.profilesOnlyContent(t)[i],e.next=4,this.datasetSchemaResource.fetch(i);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",new sy(n,a));case 8:case"end":return e.stop()}},e,this)}))}},{key:"getDefer",value:function(){var a={},e=new Promise(function(e,t){a.resolve=e,a.reject=t});return a.promise=e,a}},{key:"getDatasetsAsync",value:function(){var e=this,t=this.reduxProxy.getState(),s=new Array,a=null;try{a=Object.values(Hs.scenarios(t))}catch(e){return[]}var n=Hs.datasetInfoList(t),l=new Map;a&&a.forEach(function(a){var e=Hp(a,n);null!=e&&e.forEach(function(e){var t=l.get(e)||[];t.push(a.options.scenarioName),l.set(e,t)})});var i=this.getDefer(),r=Array.from(l.keys()).map(function(r){return new Promise(function(n,i){e.getDatasetSchemaHelperAsync(r).then(function(e){e||i();var t=e.getDatasetFieldItems({withoutCustomMeasure:!1}),o=new Map;t.forEach(function(e){var t=e.entityName,a=e.name,n=e.dataType,i=e.display,r=o.get(t)||[];r.push({name:a,display:i,dataType:n}),o.set(t,r)});var a=new Array;o.forEach(function(e,t){a.push({name:t,columns:e})}),s.push({id:r,entities:a,bindingScenarios:l.get(r)}),n(void 0)})})});return Promise.all(r).then(function(){i.resolve(s)}).catch(function(){i.reject()}),i.promise}}]),t}(),gx=function(){function e(){I()(this,e)}return D()(e,[{key:"defer",value:function(){var a={},e=new ed.Promise(function(e,t){a.resolve=e,a.reject=t});return a.promise=e,a}}]),e}(),mx=function(){function e(){I()(this,e),this.commands={},this.promiseFactory=new gx}return D()(e,[{key:"register",value:function(e,t){var a=e.getName();t&&e.injectDependency(t),this.commands[a]=e}},{key:"unregister",value:function(e){delete this.commands[e]}},{key:"_execute",value:function(e,t){var a=this.commands[e.name];if(nu.assert(null!=e.name),nu.assert(null!=e.payload),a)try{a.execute(e.payload,t)}catch(e){null!=t&&t.reject()}else nu.error("Can not find specific command, make sure it has been registered or a wrong spelling name."),null!=t&&t.reject("UNFOUND_SPECIFIED_COMMAND")}},{key:"executeAsync",value:function(e){var a=this;if(Array.isArray(e))return e.map(function(e){var t=a.promiseFactory.defer();return a._execute(e,t),t.promise});var t=this.promiseFactory.defer();return this._execute(e,t),t.promise}},{key:"execute",value:function(e){var t=this;e.forEach(function(e){return t._execute(e)})}},{key:"destroy",value:function(){this.commands={}}}]),e}(),fx=a(30),vx=function(){function e(){I()(this,e),this.type=null,this.cacheStore=null,this.suspended=0,this.queueingTasks=[],this.delay=0}return D()(e,[{key:"fetch",value:function(e,t){var a=this,n=1<arguments.length&&void 0!==t&&t?null:this.get(e),i=this.beforeSendRequest(e);return n?0<this.delay?ed.Promise.delay(this.delay).then(function(){return ed.Promise.resolve(a.afterReceiveResponse(i,n))}):ed.Promise.resolve(this.afterReceiveResponse(i,n)):this._scheduleTask(i)}},{key:"get",value:function(e){var t;return null===(t=this.cacheStore)||void 0===t?void 0:t.find(e)}},{key:"clear",value:function(){var e;null!==(e=this.cacheStore)&&void 0!==e&&e.clear()}},{key:"isSuspended",value:function(){return 0<this.suspended}},{key:"suspend",value:function(){this.suspended++}},{key:"resume",value:function(){this.isSuspended()&&(this.suspended--,this.isSuspended()||this._batchDoTasks())}},{key:"_doFetch",value:function(){throw new Error("Not Implement")}},{key:"shouldMergeRequest",value:function(){return!1}},{key:"mergeRequest",value:function(e,t){return t}},{key:"resetRequestContext",value:function(){}},{key:"_batchDoTasks",value:function(){var n=this;if(this.queueingTasks.length){this.resetRequestContext();var a=[];this.queueingTasks.forEach(function(t){var e=a.find(function(e){return n.shouldMergeRequest(t.params,e.mergedParams,{queueingTasks:n.queueingTasks})});e?(e.subTasks.push(t),e.mergedParams=n.mergeRequest(e.mergedParams,t.params)):a.push({mergedParams:t.params,subTasks:[t]})}),this.queueingTasks=[],a.forEach(function(e){n._doFetch(e.mergedParams).then(function(a){n.setCache(a,e.mergedParams),e.subTasks.forEach(function(t){try{var e=n.afterReceiveResponse(t.params,a);t.q.resolve(e)}catch(e){t.q.reject(e)}})},function(t){e.subTasks.forEach(function(e){e.q.reject(t)})})})}}},{key:"_putTaskInQueueing",value:function(a){var n=this;return new ed.Promise(function(e,t){n.queueingTasks.push({params:a,q:{resolve:e,reject:t}})})}},{key:"_scheduleTask",value:function(t){var a=this;return this.isSuspended()?this._putTaskInQueueing(t):this._doFetch(t).then(function(e){return a.setCache(e,t),a.afterReceiveResponse(t,e)})}},{key:"beforeSendRequest",value:function(e){return e}},{key:"afterReceiveResponse",value:function(e,t){return t}},{key:"setCache",value:function(e,t){var a;null!==(a=this.cacheStore)&&void 0!==a&&a.push(t,e)}},{key:"onError",value:function(e){this.api.onError(e)}},{key:"destroy",value:function(){var e;this.clear(),this.suspended=0,this.queueingTasks=[],null!==(e=this.api)&&void 0!==e&&e.destroy()}}]),e}(),bx={page:{title:!0}},Cx={},Tx=["drillThrough","rangeDots","rangeColors","referenceLine","conditionalFormat","mapInfo","trendLines","padding","margin","interactionSetting","contentSetting"];function Sx(e){return-1<Tx.indexOf(e)}var Dx=["docTheme","parameters","pivotFilters","customPaletteList","padding","margin","customTableStyleTemplates","contextMenuActions"];function kx(e){return-1<Dx.indexOf(e)}function wx(n,e){var i=1<arguments.length&&void 0!==e&&e,r={};return Object.keys(n).forEach(function(e){var t=(i?Sx:kx)(e),a=n[e];"object"!==E()(a)||t?r[e]=!0:r[e]=wx(a,i)}),r}function xx(e){return e?wx(e):ae.clone(bx)}ae.invertObj({ESC:"escape",CTRL_A:"ctrl+a",CTRL_Z:"ctrl+z",CTRL_Y:"ctrl+y",DELETE:"delete",CTRL_C:"ctrl+c",CTRL_V:"ctrl+v",CTRL_X:"ctrl+x",CTRL_E:"ctrl+e",CTRL_O:"ctrl+o",CTRL_S:"ctrl+s",CTRL_G:"ctrl+g",CTRL_PLUS:"ctrl+equals",CTRL_MINUS:"ctrl+minus",CTRL_ZERO:"ctrl+0",CTRL_ADD:"ctrl+add",CTRL_SUBSTRACT:"ctrl+subtract",CTRL_ALT_S:"ctrl+alt+s",PAGE_UP:"page_up",PAGE_DOWN:"page_down",UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",ENTER:"enter",F11:"f11",CTRL_SHIFT_CLOSE_BRACKET:"ctrl+shift+close_bracket",CTRL_SHIFT_OPEN_BRACKET:"ctrl+shift+open_bracket",CTRL_SHIFT_G:"ctrl+shift+g"}),ae.curry(function(e,t){return{key:e,action:t}});a(67);var Ax=ae.curry(function(e,t){if(null==t)return t;var a=E()(t);if(Array.isArray(t))return ae.map(Ax(e),t);if("object"!==a)return"string"===a&&e[t]?e[t]:t;var n=ae.map(Ax(e),t);return Qs(e,n)});function Ix(e,t,a){var n=t.valuePath,i=ae.split(".",n),r=ae.assocPath(i,a,e);return ae.equals(r,e)?e:r}function Px(e){var t=ae.split(".",e),a=t.pop();return ae.assocPath(t,{$unset:[a]},{})}ae.curry(function(e,t,a){var n=a.payload,i=n.descriptor,r=n.value,o=n.isReset,s=e?Js(e)(i.valuePath):null;if(o){if(null!=s)return oh()(t,{options:{$set:Ix(t.options,i,s)},optionsDirtyState:{$set:Ix(t.optionsDirtyState,i,!1)}});var l=qs(i.valuePath);return ae.hasPath(["options"].concat(R()(l)),t)?oh()(t,{options:Px(i.valuePath),optionsDirtyState:Px(i.valuePath)}):t}var u=Js(t.options)(i.valuePath),c=!0;return"object"!==E()(u)||Array.isArray(u)||Sx(i.valuePath.split(".").pop())||(c=wx(r)),oh()(t,{options:{$set:Ix(t.options,i,r)},optionsDirtyState:{$set:Ix(t.optionsDirtyState,i,c)}})}),a(31);function _x(e,t){return ae.compose(ae.assocPath(["layout","top"],e),ae.assocPath(["layout","left"],t))}function Mx(e,t,a){var n={dashboard:e,pages:t,scenarios:a},i=d$.globalConfigManager.get("scenario");if(!i)return n;var r=Object.values(a).find(function(e){var t;return(null===(t=e.options)||void 0===t?void 0:t.scenarioName)===i});if(!r)return n;var o,s,l,u=d$.reduxProxy.getState();return Hs.view(u)!==H.AppViewMode.Viewer?n:{dashboard:(o=e,s=r.pageId,l=o,l=ae.assocPath(["options","dashboard","ratio"],"auto",l),l=ae.assocPath(["options","dashboard","tabStrip","style"],"",l),l=ae.assocPath(["options","page","backgroundImage"],"",l),l=ae.assocPath(["options","page","backgroundColor"],"",l),l=ae.assocPath(["options","page","isSizeFixed"],!1,l),l=ae.assoc("pageIdList",ae.filter(function(e){return e===s},l.pageIdList),l),d$.globalConfigManager.get("pageDisplayMode")||(l=ae.assoc(["options","page","displayMode"],H.PageDisplayMode.FitToScreen,l)),l),pages:ae.pick([r.pageId],t),scenarios:function(e,t){var a=e,n={};if(a=ae.compose(_x(0,0),Ox,ae.assocPath(["options","appearance","backgroundColor"],""),ae.assocPath(["options","appearance","backgroundImage"],""),ae.assocPath(["options","appearance","border"],{type:H.BuildInBorderEnums.None}),ae.dissocPath(["groupId"]),ae.dissocPath(["containerId"]),ae.dissocPath(["tabId"]))(a),Jr.isContainer(e)){var i=e;n=ae.compose(ae.map(Ox),ae.pickBy(Jr.isInSpecifiedContainerFn(i)))(t)}else a=ae.compose(ae.assocPath(["options","appearance","margin"],{top:0,right:0,bottom:0,left:0}))(a);if(Jr.isGroup(e)){var r=e,o=Us.position(r),s=o.left,l=o.top,u=Hs.scenariosInGroup(r.id,{scenarios:t}).map(ae.compose(function(e){var t=Us.position(e);return _x(t.top-l,t.left-s)(e)},Ox));n=il(u)}return Object.assign(Object.assign({},n),V()({},e.id,a))}(r,a)}}function Lx(e){var t=ae.lensPath(["sortBy","measure"]);return ae.view(t,e)?ae.over(t,Qs(Bx),e):e}function Rx(e){var t=Qs(jx,e);return t.type===H.JumpToType.Report&&(t=Qs({documentId:"reportDocId",parameters:"reportParameters"},t)),t.type===H.JumpToType.Dashboard&&(t=Qs({documentId:"dashboardDocId",parameters:"dashboardParameters"},t)),t}function Vx(e){var t={id:e.id,pageId:e.pageId,scenarioType:e.content.scenarioType,usedInMobile:e.content.usedInMobile,zIndex:e.content.layout.zIndex,layout:ae.omit(["zIndex"],e.content.layout),mobileLayout:e.content.mobileLayout,state:{}};e.content.fixedColumnsWidthInfo&&(t.fixedColumnsWidthInfo=e.content.fixedColumnsWidthInfo),e.content.containerId&&(t.containerId=e.content.containerId,t.tabId=e.content.tabId),e.content.groupId&&(t.groupId=e.content.groupId),e.content.annotation&&(t.annotation=e.content.annotation);var a=Zs(Wx,e.options);a.scenarioName=e.name;var n=e.options.drillThrough;if(n){var i=n.map(Rx);a.drillThrough=i}var r={options:a},o={};switch(e.content.scenarioType){case H.ScenarioType.PivotChart:case H.ScenarioType.Visual:case H.ScenarioType.Slicer:var s=e.content,l=s.chartType,u=s.dataBinding,c=s.drillDown,d=s.visualId,p=s.version,h=s.slicerType,y=s.cardTemplate;o={pivot:Gx(u),state:{}},Jr.isSpreadChart(e.content)&&(o.dataSourceType=e.content.dataSourceType,o.pivotTables=e.content.pivotTables.map(function(e){return{id:e.id,name:e.content.name,pivot:Gx(e.content.dataBinding)}}),o.pivot=Object.assign(Object.assign({},o.pivot),{dataTable:e.content.dataBinding.dataTable,rowCount:e.content.dataBinding.rowCount,columnCount:e.content.dataBinding.columnCount,dataRanges:e.content.dataBinding.dataRanges,aggregationOptions:e.content.aggregationOptions})),Jr.isMergedChart(e.content)&&(o.dataSourceType=e.content.dataSourceType,o.pivot=Object.assign(Object.assign({},o.pivot),{datasetsInfo:e.content.dataBinding.datasetsInfo})),l&&(o.chartType=l),d&&(o.visualId=d,o.version=p),c&&(o.drillDown=Object.assign(Object.assign({},c),{_rootItems:c.items,_rootType:c.type})),h&&(o.slicerType=h),y&&(o.cardTemplate={pageOptions:y.pageOptions,scenarios:il(y.scenarios.map(Vx))});break;case H.ScenarioType.Container:case H.ScenarioType.TabContainer:var g=e.content.tabSettingContent,m=g.activeTab,f=g.tabs;o={tabSettingContent:Object.assign({activeTab:m,tabs:f.map(function(e){return e.id})},ae.map(function(e){return{text:e.text}},il(f)))};break;case H.ScenarioType.RichEditor:o={editorContent:e.content.editorContent};break;case H.ScenarioType.Picture:var v=e.content,b=v.imageId,C=v.dataBinding;o={pivot:Gx(C),options:{property:{imageSetting:{id:b}}}};break;case H.ScenarioType.EmbeddedDashboard:case H.ScenarioType.EmbeddedReport:o={}}if((t=[t,r,o].reduce(ae.mergeDeepRight,{})).scenarioType===H.ScenarioType.PivotChart){var T=d$.definitionManager.getDefinition(t);t.options=T.syncOptions(t)}if(t.scenarioType===H.ScenarioType.RichEditor){var S=d$.definitionManager.getDefinition(t);t.options=S.syncOptions(t)}return t}function Nx(e){return{content:{hierarchies:e.hierarchies,nameMappings:e.nameMappings,modelParameters:e.modelParameters,formats:e.formats,displayTimezone:e.displayTimezone,customAttributes:e.customAttributes},reloadData:e.reloadData,colorAssignments:e.colorAssignments,datasetType:e.datasetType||H.DatasetType.COT}}function Ex(e){var t=e.dataType,a=uu(t),n=e;if(e.defaultValue&&e.defaultValue.values&&e.defaultValue.values.length){var i=ae.map(a,ae.pathOr([],["defaultValue","values"],e));n=ae.assocPath(["defaultValue","values"],i,n)}if(e.validValues&&e.validValues.values&&e.validValues.values.length){var r=ae.map(function(e){return Object.assign(Object.assign({},e),{value:a(e.value)})},ae.pathOr([],["validValues","values"],e));n=ae.assocPath(["validValues","values"],r,n)}return n}function Fx(e){var t=ae.objOf("page",e.options);return{id:e.id,options:ae.mergeDeepLeft(t,ps),optionsDirtyState:xx(t)}}var Ox=ae.assocPath(["options","title","showTitle"],!1),Hx={display:"userDisplay"},Bx={columnName:"name",aggregationMethod:"method"},Ux={filters:"pivotFilters",ranks:"pivotRanks",sortInfo:"pivotSortInfo"},zx={options:"option",type:"name",advanced:"advance"},Kx={nullIfNoEnoughData:"asNull",includeCurrentValue:"include"},jx={url:"href"},Wx=[{path:[],keysMap:{properties:"property"}}],Gx=ae.compose(Qs(Ux),ae.evolve({pivotSetting:function(e){return uC.traversePivotSetting(function(e,t){var a=Qs(Hx,t);if(a=Qs(Bx,a),Jr.isCalculation(t)){var n=a.along;if(n=Qs(zx,n),(a=ae.assoc("along",n,a)).along.option){var i=a.along.option;i=Qs(Kx,i),a=ae.assocPath(["along","option"],i,a)}}if(Jr.isDateHierarchy(a)){var r={},o=ae.map(function(e){return e.display&&(r[e.name]=e.display),ae.dissoc("display",e)},a.dims);a=ae.assoc("dimsDisplay",r,a),a=ae.assoc("dims",o,a)}return e.concat(a)},e,{disableExclusive:!0})},ranks:ae.map(function(e){var t=e,a=t.along;return a&&(a=Qs(zx,a),t=ae.assoc("along",a,e)),t=Lx(t)}),sortInfo:ae.map(Lx),uiSortInfo:ae.map(Lx)})),Yx=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function qx(e){if(null!=e.columnId)return e;var t=e,a=ph(t);return null==t.subColumnType||t.subColumnType===H.SubColumnType.None?hh(t.attributeId,t.entityName,t.attributeName,H.SubColumnType.None,Jr.isCustomAttribute(t),a):hh(t.attributeId,t.entityName,t.parentAttributeName,t.subColumnType,Jr.isCustomAttribute(t),a)}function Jx(e,t,a){var n=[Wp.Rank,Wp.Percentage].includes(e)?"":a.getSeriesRole(),i=a.getTrellisRowRole(),r=a.getTrellisColumnRole(),o=[],s=[];switch(t.name){case H.AlongType.TABLE:o=[n];break;case H.AlongType.ROW:o=[n,i];break;case H.AlongType.COLUMN:o=[n,r];break;case H.AlongType.CELL:o=[n,i,r];break;case H.AlongType.ADVANCE:s=t.advance.partitioning.map(function(e){return e.name});break;case H.AlongType.DIMENSION:s=[t.dimension];break;case H.AlongType.DATAROLE:o=t.advance.partitioningRoles.map(function(e){return e.name})}var l=[];return o.length&&(l=a.getUsedDimensionItems(o)),s.length&&(l=a.getUsedDimensionItems().filter(function(e){return s.includes(e.name)})),ae.uniqBy(function(e){return e.name},l).map(qx)}function Xx(e){return gh(qx(e),e.method)}function Qx(e){if(e){var t=HA.sortType[e.type],a=HA.order[e.order];switch(t){case th.Auto:return Ah(a);case th.Value:return Ih(Xx(e.sortBy.measure),a);case th.Manual:return Ph(e.manual);case th.Column:return Ih(gh(qx(e.column),H.AggregationMethod.First),a);default:throw Error("Unexpected sort type: ".concat(t))}}}function Zx(e,t){var a,n,i,r=e.along,o=function(e){switch(e.type){case H.DatasetExtendColumnType.Running:case H.DatasetExtendColumnType.Moving:return Wp.Accumulation;case H.DatasetExtendColumnType.Date:return Wp.DateTimeOffset;case H.DatasetExtendColumnType.Group:switch(e.along.method){case Ji:return Wp.Percentage;case Xi:return Wp.Rank}}}(e),s=Xx(e),l=Jx(o,r,t);switch(o){case Wp.Accumulation:return Mh(s,Ch(Yp.Partition,l),Object.assign({afterCalcFilter:!0},Nh(r.method,null===(a=r.option)||void 0===a?void 0:a.include,null===(n=r.option)||void 0===n?void 0:n.previous,null===(i=r.option)||void 0===i?void 0:i.next)));case Wp.Rank:return Lh(s,Ch(Yp.Partition,l),Object.assign({afterCalcFilter:!0},Eh(r.option.usePercentage,HA.order[r.option.sortOrder],HA.duplicateAS[r.option.treatDuplicateAs])));case Wp.Percentage:return Rh(s,Ch(Yp.Partition,l),{afterCalcFilter:!0});case Wp.DateTimeOffset:return Vh(s,{afterCalcFilter:!0,offset:e.along.offset,subdate:qx(e._dateColumns.subDate),method:HA.dateTimeMethod[e.along.method]});default:throw Error("Unexpected Calculation Type: ".concat(o))}}function $x(e,t){var a,n,i=e.sortBy,r=e.along,o=HA.calcFilterType[e.type],s=Xx(i.measure),l=HA.divideType[r.name],u=Jx(o,r,t);switch(o){case Wp.Rank:return{type:Wp.Rank,value:s,divideBy:Ch(l,u),filterBy:(a=e.rank,n=a.range,Dh(Jp.Range,Oh(n.min,n.max,!0,!0),!1)),options:Eh(e.rank.usePercentage,HA.rankOrder2Order[e.rank.rankOrder],HA.duplicateAS[e.rank.treatDuplicateAs])};case Wp.Identity:return{type:Wp.Identity,value:s,divideBy:Ch(l,u),filterBy:function(e){var t=e.range,a=e.conditionRule,n=Jp.Range,i=Oh(t.min,t.max,t.minIncluded,t.maxIncluded),r=!1;switch(a){case Za:i=Oh(t.min,t.min,!0,!0);break;case $a:i=Oh(t.min,t.min,!0,!0),r=!0;break;case en:n=Jp.Greater,i.minIncluded=!1;break;case tn:n=Jp.Greater,i.minIncluded=!0;break;case an:n=Jp.Less,i.maxIncluded=!1;break;case nn:n=Jp.Less,i.maxIncluded=!0;break;case rn:break;case on:r=!0;break;default:throw Error("Unexpected Calculation Type: ".concat(a))}return Dh(n,i,r)}(e.filter)};default:throw Error("Unexpected Calculation Type: ".concat(o))}}function eA(e,t,a){var n,i,r=t.pivotRanks,o=t.globalFilters,s=t.pivotFilters,l=t.pivotSortInfo,u=t.options,c=Object(Ho.flatMap)((null!==(n=a.getGroupingFields())&&void 0!==n?n:[]).concat(null!==(i=a.getGroupingOrValueFields())&&void 0!==i?i:[]),function(e){return a.getUsedDimensionItems([e])}),d=a.getUsedValueItems(),p=Object(Ho.uniqBy)(c,function(e){return e.name}).map(function(e){return a=l[(t=e).name],n=qx(t),a||!Jr.isDate(t)&&!Jr.isSubDate(t)?fh(n,Qx(a)):fh(n,Ah(Qp.Asc));var t,a,n}),h=Object(Ho.uniqWith)(d.filter(Jr.isValueOrCustomMeasure).map(Xx),mh),y=d.filter(Jr.isCalculation).map(function(e){return Zx(e,a)}),g=r.map(function(e){return $x(e,a)}),m=UA(o,s);return Th(e,p,h,y,m,g,u)}function tA(e,t){var a,n=e.columns,i=e.range,r=e.rule,o=e.isCrossFilter,s=e.isTreeSlicerWithParameter,l=t.getDatasetId();if(Vl(null==i?void 0:i.items)||o||s||r!==H.FilterRule.GENERAL)return e;var u=(a=i.items,Ol(a,n,l,Ml));return ae.assocPath(["range","items"],u,e)}function aA(e){function a(e){var t=e;return null!=t.pattern&&(t=Object.assign(Object.assign({},t),{pattern:Kl(t.pattern,!0)})),null!=t.min&&(t=Object.assign(Object.assign({},t),{min:Kl(t.min,!0)})),null!=t.max&&(t=Object.assign(Object.assign({},t),{max:Kl(t.max,!0)})),null!=t.lastDateNumber&&(t=Object.assign(Object.assign({},t),{lastDateNumber:Kl(t.lastDateNumber,!0)})),null!=t.nextDateNumber&&(t=Object.assign(Object.assign({},t),{nextDateNumber:Kl(t.nextDateNumber,!0)})),null!=t.anchorDate&&(t=Object.assign(Object.assign({},t),{anchorDate:Kl(t.anchorDate,!0)})),t}function t(e){var t=a(e);return{columns:s,type:function(e){switch(i){case H.FilterRule.DATE_RANGE:if(r===H.FilterType.RANGE){if(null==e.min||!Pl(e.min).isValid())return H.FilterType.LESS;if(null==e.max||!Pl(e.max).isValid())return H.FilterType.GREATER}break;case H.FilterRule.VALUE_RANGE:if(r===H.FilterType.RANGE){if(isNaN(parseFloat(e.min)))return H.FilterType.LESS;if(isNaN(parseFloat(e.max)))return H.FilterType.GREATER}}return r}(t),range:t,exclude:o}}var n,i=e.rule,r=e.type,o=e.exclude,s=e.columns,l=eu(e);switch(e.isSingleSelectionMode&&(l=cu(l)),i){case H.FilterRule.GENERAL:return t({items:l.items});case H.FilterRule.VALUE_RANGE:var u=l;return r===H.FilterType.EXACT&&(u={items:[]}).items.push({value:l.min}),t(u);case H.FilterRule.DATE_RANGE:return t((n=a(l),Object.assign(Object.assign({},n),{min:null==n.min?null:_l(n.min),max:null==n.max?null:_l(n.max)})));case H.FilterRule.WILDCARD:return t(l);case H.FilterRule.RELATIVE_DATE:return t(ry(l));case H.FilterRule.SLICER_RELATIVE_DATE:var c=l.selectedIndex;if(-1!==c&&0<l.items.length)return t(ry(l.items[c]));throw new Error("Unexpected filterRule: ".concat(i,"!"));default:throw new Error("Unexpected filterRule: ".concat(i,"!"))}}function nA(e){return{columnNames:[e._dateColumns.date.name],type:H.FilterType.RANGE,range:e.filter,rule:H.FilterRule.RELATIVE_DATE,exclude:!1}}function iA(t){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;return n?ae.compose(Hh(aA),Hh(function(e){return tA(e,n)}),Hh(function(e){return t=e,a=n,Object.assign({columns:t.columnNames.map(function(e){return a.getColumn(e)})},t);var t,a}),Hh(function(e){return Vd(n,e,t)&&e}))(e):[]}}function rA(){var e,t=null!==(e=Hs.pivotFilters(d$.reduxProxy.getState()))&&void 0!==e?e:[];return ae.filter(function(e){return!zA(e).some(function(e){return zl(iu(e),H.ParameterValueType.Dynamic)})},t)}function oA(e,t,a){var n,i,r,o,s,l,u=rA(),c=(n=t,i=Jr.isSlicer(e),o=d$.embeddedDashboardManager.getPassedFilterInfos(),s=d$.dashboardManager.getGlobalFilters(),l=!i&&(null===(r=o.find(function(e){return e.datasetId===n.getDatasetId()}))||void 0===r?void 0:r.filters)||[],s.concat(l)),d=u.concat(c);return iA(a)(d,t)}function sA(e,t,a){var n,i=null!==(n=Us.pivotFilters(e))&&void 0!==n?n:[],r=null==t?void 0:t.getUsedValueItems();return r&&(i=i.concat(r.filter(function(e){return e.type===H.DatasetExtendColumnType.Date}).filter(function(e){return!ae.isEmpty(e.filter)}).map(nA))),iA(a)(i,t)}function lA(e){return ae.propEq("type",H.SortType.Manual,e)||Ed(Md)(e)}function uA(t,e){var a,n,i=_d(e),r=ae.compose(ae.filter(function(e){return i(Object.assign(Object.assign({},t[e]),{name:e}))}),ae.keys)(t);return ae.compose(ae.pick(r),ae.filter(lA),ae.map((n=e,function(e){var t,a=e;return null!==(t=e.sortBy)&&void 0!==t&&t.measure&&(a=ae.assocPath(["sortBy","measure"],Object.assign(Object.assign({},e.sortBy.measure),n.getColumn(e.sortBy.measure.name)),a)),e.columnName&&(a=ae.assocPath(["column"],n.getColumn(e.columnName),a)),WA(a)})),(a=e,function(e){var t=a.getDatasetId();return Bl(e,t,Ml)}))(t)}function cA(e){return!ae.has("rank",e)||Ed(Rd)(e)}function dA(e,t){var a,n;return(null!==(a=Us.pivotRanks(e))&&void 0!==a?a:[]).filter(Ld(t)).map((n=t,function(e){var t,a=null===(t=null==e?void 0:e.sortBy)||void 0===t?void 0:t.measure;return a?ae.assocPath(["sortBy","measure"],Object.assign(Object.assign({},a),n.getColumn(a.name)),qA(e)):qA(e)})).filter(cA)}function pA(e,t){var a,n,i,r,o,s=ks.parameters(Hs.dashboard(d$.reduxProxy.getStore().getState())),m=t.getAllEntities(),l=(null===(n=null===(a=Us.pivotModelParameters(e))||void 0===a?void 0:a.filter)||void 0===n?void 0:n.call(a,function(e){return wd(e,s,m)}))||[],u=(null===(o=null===(r=null===(i=t.getDatasetProfile())||void 0===i?void 0:i.modelParameters)||void 0===r?void 0:r.filter)||void 0===o?void 0:o.call(r,function(e){return wd(e,s,m)}))||[];return l.concat(u.filter(function(t){return!l.find(function(e){return e.name===t.name})})).map(function(t){var e,a,n,i,r,o,s,l,u,c=m.find(function(e){return e.name===kd(t.name)[0]}),d=null!==(i=null===(n=null===(a=null===(e=null==c?void 0:c.parameters)||void 0===e?void 0:e.find)||void 0===a?void 0:a.call(e,function(e){return e.name===kd(t.name)[1]&&e.entityId===(null==c?void 0:c.id)}))||void 0===n?void 0:n.dataType)&&void 0!==i?i:"",p=!t.multiValue;if(t.valueType===H.modelParameterType.DashboardParameter){var h=null===(r=t.value)||void 0===r?void 0:r.name,y=su(h,p);u=Array.isArray(y)?y.join(","):y}else{var g=null!==(o=t.value)&&void 0!==o?o:"";u=!p&&null!==(l=null===(s=null==g?void 0:g.join)||void 0===s?void 0:s.call(g,","))&&void 0!==l?l:g}if(void 0!==u)return{entityId:null==c?void 0:c.id,parameterName:kd(t.name)[1],literalValue:u,valueType:d}}).filter(function(e){return e})}function hA(e,t){var a,n,i,r,o,s,l,u,c,d;return{globalFilters:oA(e,t),pivotFilters:sA(e,t),pivotSortInfo:(r=e,o=t,u=null!==(s=Us.pivotSortInfo(r))&&void 0!==s?s:{},c=uA(u,o),d=null!==(l=Us.uiSortInfo(r))&&void 0!==l?l:{},Object.values(d).every(function(e){return e.type===H.SortType.Auto})&&(c=ae.mergeDeepLeft(uA(d,o),c)),c),pivotRanks:dA(e,t),pivotModelParameters:pA(e,t),options:{includeAllDimensions:null!==(i=null===(n=null===(a=null==e?void 0:e.pivot)||void 0===a?void 0:a.aggregationOptions)||void 0===n?void 0:n.includeAllDimensions)&&void 0!==i&&i}}}var yA,gA,mA,fA,vA,bA,CA,TA,SA,DA,kA=function(e){var t,a=e.id,n=e.datasetProfiles,i=e.pages,r=e.scenarios,o=e.content,s=e.options,l=e.title,u=e.parameters,c=e.tagIds,d=["docThemeId","ratio","stretch","fontSizeAdaptation","tabStrip","crossFilterMode","titleTextStyle","contentTextStyle","customPaletteList","snapToGrid","showAuxiliaryLine","enableOverlap","promptUsingMobileView","customTableStyleTemplates","pageSwitchAnimation","toolbar","defaultViewer","languageResourceId"],p=s.scenario,h=Yx(s,["scenario"]),y=ae.pick(d,h),g=ae.omit(d,h),m={};ae.isEmpty(y)||(m.dashboard=y),ae.isEmpty(g)||(m.page=g),p&&!ae.isEmpty(p)&&(m.scenario=p);var f=function(e){if(e){var t=wx(e);return ae.mergeDeepRight(t,Cx)}return ae.clone(Cx)}(m);(m=ae.mergeDeepLeft(m,cs)).dashboard.parameters=ae.map(Ex,u||[]),m.dashboard.pivotFilters=o.filters||[],o.docTheme&&(o.docTheme.textStyle||(o.docTheme.textStyle=os.textStyle),o.docTheme.colors.scrollbarThumb||(o.docTheme.colors.scrollbarThumb=os.colors.scrollbarThumb),o.docTheme.colors.scrollbarTrack||(o.docTheme.colors.scrollbarTrack=os.colors.scrollbarTrack));var v={},b=[],C=-1,T=[];if(o.languageResource&&o.languageResource.values){var S=Wt;T=o.languageResource.values,v=(null===(t=o.languageResource.values.find(function(e){return e.name===S}))||void 0===t?void 0:t.values)||{},C=o.languageResource.languageVersion,b=Object.keys(T[0].values)}var D={dashboard:Object.assign(Object.assign({},ds),{id:a,name:l,selectedTags:c,pageIdList:i.map(function(e){return e.id}),imageList:o.imageList,options:m,optionsDirtyState:f}),pages:il(i.map(Fx)),scenarios:il(r.map(Vx)),profiles:ae.mapObjIndexed(Nx,n),docTheme:o.docTheme,languageResource:v,languageVersion:C,languageKeys:b,i18nResource:T};D=Object.assign(Object.assign({},D),Mx(D.dashboard,D.pages,D.scenarios));var k=Hs.datasetInfoList(d$.reduxProxy.getState());return d$.datasetManager.setUsedDatasetIdList(Bp(D,k)),d$.datasetManager.setDatasetProfiles(D.profiles),D},wA=function(){function o(e){var t=e.compareFn,a=void 0===t?ae.equals:t,n=e.max,i=void 0===n?50:n,r=e.shouldClearCache;I()(this,o),this.max=i,this._cache=[],this.compareFn=a,r&&(this.shouldClearCache=r)}return D()(o,[{key:"push",value:function(e,t){this.find(e)||(this._cache.length>=this.max&&this._cache.unshift(),this._cache.push({key:e,data:t}))}},{key:"find",value:function(t){var a=this,e=this._cache.find(function(e){return a.compareFn(t,e.key)});if(e)return e.data}},{key:"clear",value:function(t){var a=this;this._cache=t?this._cache.filter(function(e){return!a.shouldClearCache(t,e.key)}):[]}},{key:"shouldClearCache",value:function(e,t){return e===t}}]),o}(),xA=function(){function e(){I()(this,e),this._cache={}}return D()(e,[{key:"push",value:function(e,t){this.find(e)||(this._cache[e]=t)}},{key:"find",value:function(e){var t=this._cache[e];if(t)return t}},{key:"clear",value:function(e){e?this._cache[e]&&delete this._cache[e]:this._cache={}}}]),e}(),AA=function(){function e(){I()(this,e),this._cache=null}return D()(e,[{key:"push",value:function(e,t){this.find()||(this._cache=t)}},{key:"find",value:function(){if(this._cache)return this._cache}},{key:"clear",value:function(){this._cache=null}}]),e}(),IA=function(){function e(){I()(this,e)}return D()(e,[{key:"push",value:function(){return null}},{key:"find",value:function(){return null}},{key:"clear",value:function(){return null}}]),e}(),PA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query  {\n            document(id: "'.concat(e.data,'") {\n              draftId\n            }\n          }')}},convertResponse:function(e,t){return t.data.document.draftId}}),e.publishApi=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'mutation {\n            publish(draftId: "'.concat(e.data,'")\n          }')}},convertResponse:function(e,t){return t.data.publish}}),e.approveApi=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'mutation {\n            doApprove(publishRequestId: "'.concat(e.data.id,'", commit: "').concat(e.data.commit,'") {\n              success, documentId\n            }\n          }')}},convertResponse:function(e,t){return{dashboardId:t.data.doApprove.documentId}}}),e.tagApi=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.id=e.data.id,e.data={query:'mutation {\n            changeCategories(\n                documentIds: ["'.concat(e.data.id,'"],\n                operationType: "AddNew",\n                tagIds: ').concat(JSON.stringify(e.data.tagIds),"\n            )}")}},convertResponse:function(e){return{dashboardId:e.id}}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({body:e})}},{key:"publish",value:function(e){return this.publishApi.fetch({body:e})}},{key:"approve",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:"";return this.approveApi.fetch({body:{id:e,commit:a}})}},{key:"tag",value:function(e,t){return this.tagApi.fetch({body:{id:e,tagIds:t}})}}]),a}(vx),_A=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},MA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({preFetch:!0,url:"/api/dashboards/{{id}}",checkIsKeyHit:function(e,t){return e.pathParams.id===t.pathParams.id},convertResponse:function(e,t){return kA(t)}}),e.cacheStore=new IA,e.putAPI=new Gd({url:"/api/dashboards/{{id}}",method:"put",convertResponse:function(e){return{dashboardId:e.pathParams.id}}}),e.postAPI=new Gd({url:"/api/dashboards/{{id}}",method:"post"}),e.draftResource=new PA,e}return D()(a,[{key:"isDraft",value:function(e){return e.startsWith("draft-")}},{key:"_doFetch",value:function(e){return this.api.fetch({pathParams:{id:e}})}},{key:"post",value:function(e){var t=this,a=e.shouldPublish,n=_A(e,["shouldPublish"]),i=this.postAPI.fetch({pathParams:{id:""},body:n});return a?i.then(function(e){return t.isDraft(e.dashboardId)?t.draftResource.publish(e.dashboardId).then(function(e){return t.draftResource.approve(e,Ft("dialogs.saveDashboard.publishCommit"))}).then(function(e){return t.draftResource.tag(e.dashboardId,n.tagIds)}):i}):i}},{key:"put",value:function(t,e){var a=this,n=e.shouldPublish,i=_A(e,["shouldPublish"]),r=this.putAPI.fetch({pathParams:{id:t},body:i});return n?this.isDraft(t)?r.then(function(e){return a.draftResource.publish(t)}).then(function(e){return a.draftResource.approve(e,Ft("dialogs.saveDashboard.publishCommit"))}):r.then(function(e){return a.draftResource.fetch(t)}).then(function(e){return a.draftResource.publish(e)}).then(function(e){return a.draftResource.approve(e,Ft("dialogs.saveDashboard.publishCommit"))}):r}}]),a}(vx),LA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/pivot/datasets",method:"get",checkIsKeyHit:function(e,t){return e.params.dashboardId===t.params.dashboardId},convertResponse:a.convertResponse}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(e){var t=e.dashboardId;return t?this.api.fetch({params:{dashboardId:t}}):this.api.fetch()}}],[{key:"convertResponse",value:function(e,t){return ae.compose(ae.sortWith([ae.ascend(ae.prop("name")),ae.ascend(ae.prop("lastErrorCode"))]),ae.map(function(e){var t=e.datasetType,a=e.datasetType;return t===H.DatasetType.StreamingDataset?t=H.DatasetType.AnalysisModel:t===H.DatasetType.AnalysisModel&&(a=0===e.modelType?H.AnalysisModelType.DirectQuery:H.AnalysisModelType.CacheMode),{id:e.id,name:e.name,datasetType:t,isReady:e.available,lastUpdatedAt:e.lastUpdatedAt,subType:a,lastErrorCode:e.lastErrorCode}}))(t)}}]),a}(vx),RA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).allPendingIds={},e.type="datasetSchema",e.api=new Gd({name:e.type,method:"post",url:"/api/pivot/datasets/schema",beforeRequest:function(e){e.params=Object.assign(Object.assign({},e.params),{dashboardId:d$.globalConfigManager.get("dashboardId")})},convertResponse:function(e,n){var t,a=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.ids;return null!=a&&a.length?a.reduce(function(e,t){var a=n[t];return e[t]=ey(t,a.datasetType,a),e},{}):n}}),e.cacheStore=new xA,e}return D()(a,[{key:"makeDelay",value:function(){var a={q:null,resolve:null,reject:null};return a.q=new ed.Promise(function(e,t){a.resolve=e,a.reject=t}),a}},{key:"isPendingDataset",value:function(e){return!!this.allPendingIds[e]}},{key:"addToPendingDataset",value:function(e,t){var a=this.allPendingIds[e]||[];a.push(t),this.allPendingIds[e]=a}},{key:"startPendingDataset",value:function(e){this.allPendingIds[e]=[]}},{key:"popPendingDataset",value:function(e){var t=this.allPendingIds[e]||[];return this.allPendingIds[e]=null,t}},{key:"fetch",value:function(n,e){var i=this;if(this.isPendingDataset(n)){var t=this.makeDelay();return this.addToPendingDataset(n,t),t.q}this.startPendingDataset(n);var r=this.makeDelay();return C()(b()(a.prototype),"fetch",this).call(this,n,e).then(function(){r.resolve.apply(r,arguments)},function(e){var t=i.popPendingDataset(n),a=e.spwan();t.forEach(function(e){return e.reject(a)}),r.reject(e)}),r.q}},{key:"_doFetch",value:function(e){return this.api.fetch({body:{ids:e}})}},{key:"beforeSendRequest",value:function(e){return[e]}},{key:"shouldMergeRequest",value:function(){return!0}},{key:"mergeRequest",value:function(e,t){var a=new Set(e.concat(t));return Array.from(a)}},{key:"setCache",value:function(e,t){for(var a=t,n=0;n<a.length;n++){var i=a[n],r=e[i];zd.a.validate(r)&&this.cacheStore.push(i,e[i])}}},{key:"afterReceiveResponse",value:function(e,t){var a,n=e[0],i=this.get(n)||t[n],r=this.popPendingDataset(n);if(zd.a.validate(i))return r.forEach(function(e){return e.resolve(i)}),i;var o=new zd.a({type:this.type,errorCode:null==i?void 0:i.errorCode,msg:null!==(a=null==i?void 0:i.errorMessage)&&void 0!==a?a:"",errors:null==i?void 0:i.errors,context:null==i?void 0:i.context,config:n}),s=o.spwan();throw r.forEach(function(e){return e.reject(s)}),o}},{key:"clear",value:function(e){this.cacheStore.clear(e)}}]),a}(vx),VA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            document(id: "'.concat(e.data,'") {\n              id\n              name: title\n              ...on Theme{\n                isDefault\n                colors: info{\n                  Accent1: accent1\n                  Accent2: accent2\n                  Accent3: accent3\n                  Accent4: accent4\n                  Accent5: accent5\n                  Accent6: accent6\n                  Light1: light1\n                  Light2: light2\n                  Dark1: dark1\n                  Dark2: dark2\n                  Hyperlink: hyperlink\n                  HyperlinkFollowed: hyperlinkFollowed\n                  scrollbarThumb\n                  scrollbarTrack\n                }\n                textStyle: info{\n                  majorFontSize,\n                  minorFontSize,\n                  majorFontStyle,\n                  minorFontStyle,\n                  minorFontFamily,\n                  majorFontFamily,\n                  majorFontWeight,\n                  minorFontWeight,\n                }\n              }\n            }\n          }')}},convertResponse:a.convertResponse,checkIsKeyHit:function(e,t){return e.body.id===t.body.id}}),e.cacheStore=new xA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({body:e})}}],[{key:"convertResponse",value:function(e,t){var a;return null!==(a=t.data.document)&&void 0!==a&&a.colors?Object.assign(Object.assign({},t.data.document),{colors:Object.assign(Object.assign({},t.data.document.colors),{scrollbarThumb:t.data.document.colors.scrollbarThumb||os.colors.scrollbarThumb,scrollbarTrack:t.data.document.colors.scrollbarTrack||os.colors.scrollbarTrack})}):t.data.document}}]),a}(vx),NA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {documenttypes(key:"theme") {\n              documents(orderby: "name") {\n                title\n                id\n                ...on Theme{\n                  isDefault,\n                  info{\n                    accent1\n                    accent2\n                    accent3\n                    accent4\n                    accent5\n                    accent6\n                    light1\n                    light2\n                    dark1\n                    dark2\n                    hyperlink\n                    hyperlinkFollowed\n                    majorFontSize\n                    minorFontSize\n                    majorFontStyle\n                    minorFontStyle\n                    minorFontFamily\n                    majorFontFamily\n                    majorFontWeight\n                    minorFontWeight\n                    scrollbarThumb\n                    scrollbarTrack\n                  }\n                }\n              }\n            }\n          }'}},checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),EA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            document(id: "'.concat(e.data.id,'") {\n              ... on ').concat(e.data.docType," {\n                parameters {\n                  name\n                  prompt\n                  hidden\n                  dataType\n                  multiValue\n                  dateOnly\n                }\n              }\n            }\n          }")}},convertResponse:a.convertResponse,checkIsKeyHit:function(e,t){return e.body.id===t.body.id}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(e){var t=e.id,a=e.docType;return this.api.fetch({body:{id:t,docType:a}})}}],[{key:"convertResponse",value:function(e,t){return ae.pathOr([],["data","document","parameters"],t)}}]),a}(vx),FA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/dashboardResources/ensureDocumentAccess",method:"post",checkIsKeyHit:!0}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({body:e})}}]),a}(vx),OA=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query { \n            resources(name: "Images") {\n              documents {\n                id, \n                title\n              }\n            }\n          }'}},checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),HA={order:(yA={},V()(yA,zn,Qp.Asc),V()(yA,Kn,Qp.Desc),yA),sortType:(gA={},V()(gA,ri,th.Auto),V()(gA,oi,th.Manual),V()(gA,si,th.Value),V()(gA,ui,th.Column),gA),filterType2FilterByType:(mA={},V()(mA,H.FilterType.CONTAIN,Jp.Contain),V()(mA,H.FilterType.ENDWITH,Jp.EndWith),V()(mA,H.FilterType.EXACT,Jp.Exact),V()(mA,H.FilterType.GREATER,Jp.Greater),V()(mA,H.FilterType.LESS,Jp.Less),V()(mA,H.FilterType.MATCHWORD,Jp.MatchWord),V()(mA,H.FilterType.RANGE,Jp.Range),V()(mA,H.FilterType.STARTWITH,Jp.StartWith),mA),calcFilterType:(fA={},V()(fA,Qa,Wp.Rank),V()(fA,Xa,Wp.Identity),fA),divideType:(vA={},V()(vA,H.AlongType.DIMENSION,Yp.Group),V()(vA,H.AlongType.ADVANCE,Yp.Partition),V()(vA,H.AlongType.CELL,Yp.Partition),V()(vA,H.AlongType.COLUMN,Yp.Partition),V()(vA,H.AlongType.DATAROLE,Yp.Partition),V()(vA,H.AlongType.ROW,Yp.Partition),V()(vA,H.AlongType.TABLE,Yp.Partition),vA),duplicateAS:(bA={},V()(bA,ti,nh.Competition),V()(bA,ai,nh.ModifiedCompetition),V()(bA,ni,nh.Dense),V()(bA,ii,nh.Unique),bA),rankOrder2Order:(CA={},V()(CA,In.Top,Qp.Desc),V()(CA,In.Middle,Qp.Desc),V()(CA,In.Bottom,Qp.Asc),CA),dateTimeMethod:(TA={},V()(TA,Wi,$p.Value),V()(TA,Gi,$p.Ratio),V()(TA,Yi,$p.Difference),V()(TA,qi,$p.PercentDifference),TA)},BA=Hh(function(e){var t=e.range,a=e.columns,n=e.exclude,i=HA.filterType2FilterByType[e.type];return kh(a.map(qx),Dh(i,t,n))}),UA=function(e,t){var a=(null!=e?e:[]).concat(t);return dh(H.LogicalType.And,BA(a))},zA=function t(e){function a(e){if(e){var t=Fl(e);t.isParameterValue&&n.push(t.value)}}var n=[];if(e.items)e.items.forEach(function(e){return n.push.apply(n,R()(t(e)))});else{var i=e.range;switch(e.rule){case H.FilterRule.GENERAL:a(i.items);break;case H.FilterRule.VALUE_RANGE:case H.FilterRule.DATE_RANGE:a(i.min),a(i.max);break;case H.FilterRule.WILDCARD:a(i.pattern);break;case H.FilterRule.RELATIVE_DATE:a(i.lastDateNumber),a(i.nextDateNumber),a(i.anchorDate),a(i.offsetNumber);break;default:throw new Error("Unexpected filterRule: ".concat(e.rule,"!"))}}return n},KA=Object.keys(Md),jA=Yl(KA),WA=ql(KA,!0),GA=Object.keys(Rd),YA=Yl(GA),qA=ql(GA,!0),JA=function(){function e(){I()(this,e),this.init.apply(this,arguments)}return D()(e,[{key:"fixData",value:function(e,t){return t}},{key:"init",value:function(e,t,a){var n,i,r,o;this.model=e,this.data=this.fixData(e,t),this.profile={rowCount:null!==(i=null===(n=this.data[0])||void 0===n?void 0:n.length)&&void 0!==i?i:0,colCount:null!==(o=null===(r=this.data)||void 0===r?void 0:r.length)&&void 0!==o?o:0},this._datasetId=a,this.parseData()}},{key:"getDataProfile",value:function(){return this.profile}},{key:"getColDataByIndex",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;if(t<0||t>=this.profile.colCount)throw Error("Index Over Range");return this.data[t]}},{key:"parseData",value:function(){throw Error("Not Implemented")}},{key:"dataModel",get:function(){return this.model}},{key:"datasetId",get:function(){return this._datasetId}},{key:"rawData",get:function(){return this.data}}]),e}();(DA=SA=SA||{})[DA.Entry=0]="Entry",DA[DA.SortOrder=1]="SortOrder",DA[DA.Value=2]="Value";function XA(e){return $s(e.attributeId)}function QA(e,n){var i=new Map;return e.forEach(function(e,t){var a;i.has(e)||i.set(e,null!==(a=null==n?void 0:n[t])&&void 0!==a?a:t)}),i}function ZA(l){var u=0,c=[],d=[];return l.nodes.forEach(function(e){e.dfn<0&&function n(i){i.dfn=u,i.low=u,u+=1,c.push(i);var r,e=l.getAdjcents(i.key),t=rI()(e);try{var a=function(){var e=r.value,t=i,a=l.nodes.get(e);a.dfn<0?(n(a),t.low=Math.min(t.low,a.low)):c.find(function(e){return e.key===a.key})&&(t.low=Math.min(a.dfn,t.low))};for(t.s();!(r=t.n()).done;)a()}catch(e){t.e(e)}finally{t.f()}if(i.low===i.dfn){var o=[],s=null;if(0<c.length)for(;s=c.pop(),o.push(s),i.key!==s.key;);0<o.length&&d.push(o)}}(e)}),d}function $A(e,t,a){var n,i=!(2<arguments.length&&void 0!==a)||a,r=Array.from(e.nodes.values()),o=Bo.a.partition(r,function(e){return t.has(e.key)}),s=N()(o,2),l=s[0],u=s[1],c=i?l:u,d=rI()(c);try{for(d.s();!(n=d.n()).done;){var p=n.value;e.removeVertex(p)}}catch(e){d.e(e)}finally{d.f()}}function eI(a,n,i){var e=Object.values(a),r=new sI,o={};return e.forEach(function(e){r.addVertex(e.id)}),e.forEach(function(t){var e,a;null!==(a=null===(e=t.dependencies)||void 0===e?void 0:e.dependencies)&&void 0!==a&&a.forEach(function(e){e!==t.id&&r.nodes.get(e)&&r.addEdge(e,t.id)})}),function(){if(0!==i.size){var e=function(e,t){var a,n=new Set,i=[],r=rI()(t);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=e.nodes.get(o);s&&i.push(s)}}catch(e){r.e(e)}finally{r.f()}for(;0<i.length;){var l=i.shift();n.add(l.key);var u,c=e.getAdjcents(l.key),d=rI()(c);try{for(d.s();!(u=d.n()).done;){var p=u.value;n.has(p)||i.push(e.nodes.get(p))}}catch(e){d.e(e)}finally{d.f()}}return n}(r,i);0<e.size&&$A(r,e,!1)}}(),e.forEach(function(t){t.dependencies.crossFilter.forEach(function(e){r.nodes.get(e)&&e!==t.id&&(a[e].isSlicer||n===Iw.Trigger&&i.has(e))&&(t.isSlicer?o[t.id]={id:t.id,aggregateRequestType:xw.Active}:r.addEdge(e,t.id))})}),n===Iw.Trigger&&$A(r,i),{directedGraph:r,lastStageList:Object.values(o)}}function tI(e){return function(e){if(0===e.nodes.size)return[];for(var t=[];0<e.nodes.size;){for(var a=[],n=0,i=Array.from(e.nodes.values());n<i.length;n++){var r=i[n];0===r.indegree&&a.push(r)}for(var o=0,s=a;o<s.length;o++){var l=s[o];e.removeVertex(l)}t.push(a)}return t}(function(e){var t=ZA(e);if(t.every(function(e){return 1===e.length}))return e;var a,n=new sI,i=new Map,r=rI()(t);try{for(r.s();!(a=r.n()).done;){var o,s=a.value,l=n.addVertex(Bd.a.v1()),u=rI()(s);try{for(u.s();!(o=u.n()).done;){var c=o.value;i.set(c.key,l)}}catch(e){u.e(e)}finally{u.f()}l.components=s}}catch(e){r.e(e)}finally{r.f()}var d,p=rI()(e.nodes.values());try{for(p.s();!(d=p.n()).done;){var h,y=d.value,g=e.getAdjcents(y.key),m=rI()(g);try{for(m.s();!(h=m.n()).done;){var f=h.value,v=i.get(y.key),b=i.get(f);v.key!==b.key&&n.addEdge(v.key,b.key)}}catch(e){m.e(e)}finally{m.f()}}}catch(e){p.e(e)}finally{p.f()}return n}(e)).map(function(e){return Bo.a.flatMap(e,function(e){return e.components?e.components.map(function(e){return{id:e.key,aggregateRequestType:H.AggregateRequestType.All}}):{id:e.key,aggregateRequestType:H.AggregateRequestType.All}})})}var aI=function(e){k()(r,e);var i=w()(r);function r(){var u;I()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];(u=i.call.apply(i,[this].concat(t))).updateDataByCustomData=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],s=1<arguments.length?arguments[1]:void 0,l=u.dataColumnInfos.filter(function(e){return e.type===SA.Entry}).map(function(e){return e.columnName}).sort();return e.filter(function(e){if(l.length!==e.dimensions.length)return!1;var t=e.dimensions.map(function(e){return e.columnName}).sort();return ae.equals(l,t)}).reduce(function(e,n){var i=e,r=u.getAllDataColumnIndexByFieldIdentifier(s,n.fieldIdentifier),t=u.calcCustomDataRowIndex(s,l,i,n);if(-1===t)for(var a=function(a){if(a>=u.dataColumnInfos.length)return"break";var t=u.dataColumnInfos[a];switch(t.type){case SA.Entry:var e=n.dimensions.find(function(e){return e.columnName===t.columnName});e&&(i=oh()(i,V()({},a,{$push:[e.entry]})));break;case SA.Value:r.forEach(function(e){var t;a===e&&(t=n.value),i=oh()(i,V()({},a,{$push:[t]}))});break;case SA.SortOrder:}},o=0;o<e.length;o++){if("break"===a(o))break}else r.length&&r.forEach(function(e){i=oh()(i,V()({},e,V()({},t,{$set:n.value})))});return i},u.originalData)};var n=t[1];return u.originalData=n,u}return D()(r,[{key:"getCalcValueEx",value:function(t,a){var e=this.calcValueCacheStore.find(function(e){return e.calcValue===t&&e.calcValueIndex===a});return null==e&&(e={calcValue:t,calcValueIndex:a},this.calcValueCacheStore.push(e)),e}},{key:"fixData",value:function(e,t){var a,n,i,r;if(t.length)return t;var o=2*e.dimensions.length+(null!==(n=null===(a=e.values)||void 0===a?void 0:a.length)&&void 0!==n?n:0)+(null!==(r=null===(i=e.calcValues)||void 0===i?void 0:i.length)&&void 0!==r?r:0);return ae.repeat([],o)}},{key:"parseData",value:function(){var n=this;this.calcValueCacheStore=[],this.dataMapping=new Map,this.orderMapping=new Map,this.dataColumnIndexMapping=new Map,this.dataColumnInfos=[];var e=this.model,t=e.dimensions,a=void 0===t?[]:t,i=e.values,r=void 0===i?[]:i,o=e.calcValues,s=void 0===o?[]:o,l=0;a.forEach(function(e,t){n.dataMapping.set(e.column,n.getColDataByIndex(l+2*t)),n.dataColumnInfos.push({column:e.column,columnName:XA(e.column),type:SA.Entry}),n.orderMapping.set(e.column,n.getColDataByIndex(l+2*t+1)),n.dataColumnInfos.push({column:e.column,columnName:XA(e.column),type:SA.SortOrder}),n.dataColumnIndexMapping.set(e.column,l+2*t)}),l+=2*a.length,r.forEach(function(e,t){n.dataMapping.set(e,n.getColDataByIndex(l+t)),n.dataColumnInfos.push({value:e,columnName:XA(e.column),type:SA.Value}),n.dataColumnIndexMapping.set(e,l+t)}),l+=r.length,s.forEach(function(e,t){n.dataMapping.set(e,n.getColDataByIndex(l+t)),n.dataColumnInfos.push({calcValue:e,columnName:XA(e.value.column),type:SA.Value});var a=n.getCalcValueEx(e,t);n.dataColumnIndexMapping.set(a,l+t)}),this.dataColumnInfos.length>this.data.length&&nu.error("Some columns in model missed in response data")}},{key:"getDataWithin",value:function(e){var t=this;if(null!=e){var a=this.dataMapping.get(e);return a||(Array.isArray(e)?e.map(function(e){return t.getDataWithin(e)}):e)}}},{key:"getColumnByItem",value:function(e){var t,a=qx(e),n=null===(t=this.model.dimensions)||void 0===t?void 0:t.find(function(e){return yh(e.column,a)});return null==n?void 0:n.column}},{key:"getValueByItem",value:function(e){var t,a=Xx(e);return null===(t=this.model.values)||void 0===t?void 0:t.find(function(e){return mh(e,a)})}},{key:"getCalcValueByItem",value:function(e,t){var a,n=Zx(e,t);return null===(a=this.model.calcValues)||void 0===a?void 0:a.find(function(e){return bh(e,n)})}},{key:"getCalcValueByIdx",value:function(e){var t;return null===(t=this.model.calcValues)||void 0===t?void 0:t[e]}},{key:"getValueByIdx",value:function(e){var t;return null===(t=this.model.values)||void 0===t?void 0:t[e]}},{key:"getRawOrderData",value:function(e){return this.orderMapping.get(e)}},{key:"getOrderList",value:function(e){var t=this.dataMapping.get(e),a=this.orderMapping.get(e);return t&&a?function(t,e){var a=1<arguments.length&&void 0!==e?e:[];return R()(QA(t).values()).sort(function(e,t){return a[e]-a[t]}).map(function(e){return t[e]})}(t,a):[]}},{key:"getOrderMapping",value:function(e){var t=this.dataMapping.get(e),a=this.orderMapping.get(e);return t&&a?Object.fromEntries(QA(t,a)):{}}},{key:"setCustomData",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length?t:void 0;if(null!=a&&a.length){var i=this.updateDataByCustomData(a,n);this.init(this.model,i)}else this.init(this.model,this.originalData)}},{key:"getDataColumnIndex",value:function(e){var t;return null!==(t=this.dataColumnIndexMapping.get(e))&&void 0!==t?t:-1}},{key:"getDataColumnIndexByColumnName",value:function(e,t){var a=e.getUsedDimensionItems().find(function(e){return e.name===t}),n=this.getColumnByItem(a);return this.getDataColumnIndex(n)}},{key:"getAllDataColumnIndexByFieldIdentifier",value:function(e,a){var n=this,t=e.getUsedValueItems(),i=t.filter(Jr.isValueOrCustomMeasure).find(function(e){return ae.equals(tl(e),a)});if(i){var r=this.getValueByItem(i),o=this.getDataColumnIndex(r);return-1===o?[]:[o]}return t.filter(Jr.isCalculation).map(function(e,t){return ae.equals(tl(e),a)?t:-1}).filter(function(e){return-1!==e}).map(function(e){var t=n.getCalcValueByIdx(e),a=n.getCalcValueEx(t,e);return n.getDataColumnIndex(a)})}},{key:"calcCustomDataRowIndex",value:function(a,e,t,n){var i=this,r=1<arguments.length&&void 0!==e?e:[],o=2<arguments.length&&void 0!==t?t:[],s=3<arguments.length?n:void 0;if(0===r.length)return 0;for(var l=r.map(function(t){var e=s.dimensions.find(function(e){return e.columnName===t});return{columnIndex:i.getDataColumnIndexByColumnName(a,t),entry:e.entry}}),u=0;u<o[0].length;u++){for(var c=!0,d=0;d<l.length;d++){var p=l[d],h=p.entry;if(o[p.columnIndex][u]!==h){c=!1;break}}if(c)return u}return-1}}],[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Uh()(r,t)}}]),r}(JA),nI=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"fixData",value:function(e,t){if(t.length)return t;var a=e.dimensions.length;return ae.repeat([],a)}},{key:"parseData",value:function(){var a=this;this.dataMapping=new Map;var e=this.model,t=e.dimensions,n=void 0===t?[]:t,i=e.countOnly;void 0!==i&&i||n.forEach(function(e,t){a.dataMapping.set(e.column,a.getColDataByIndex(t))})}},{key:"getDataWithin",value:function(e){var t=this;if(null!=e){var a=this.dataMapping.get(e);return a||(Array.isArray(e)?e.map(function(e){return t.getDataWithin(e)}):e)}}},{key:"isCountOnly",value:function(){return this.model.countOnly}},{key:"getRowCount",value:function(){return this.data[0][0]}},{key:"getColumnByItem",value:function(e){var t,a=qx(e),n=null===(t=this.model.dimensions)||void 0===t?void 0:t.find(function(e){return yh(e.column,a)});return null==n?void 0:n.column}}],[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Uh()(n,t)}}]),n}(JA),iI=a(19),rI=a.n(iI),oI=function(){function a(e,t){I()(this,a),this._components=null,this._key=e,this._value=t,this._indegree=0,this._dfn=-1,this._low=-1}return D()(a,[{key:"key",get:function(){return this._key}},{key:"value",get:function(){return this._value}},{key:"indegree",get:function(){return this._indegree},set:function(e){this._indegree=e}},{key:"dfn",get:function(){return this._dfn},set:function(e){this._dfn=e}},{key:"low",get:function(){return this._low},set:function(e){this._low=e}},{key:"components",get:function(){return this._components},set:function(e){this._components=e}}]),a}(),sI=function(){function e(){I()(this,e),this._nodes=new Map,this._adjcents=new Map}return D()(e,[{key:"getAdjcents",value:function(e){return this._adjcents.get(e)}},{key:"addVertex",value:function(e,t){var a=t?t(e):e;if(this._nodes.get(a))return this._nodes.get(a);var n=new oI(a,e);return this._nodes.set(a,n),this._adjcents.set(a,new Set),n}},{key:"addEdge",value:function(e,t,a){var n=this.addVertex(e,a),i=this.addVertex(t,a);return this.isAdjacent(n,i)||(i.indegree+=1,this._adjcents.get(n.key).add(i.key)),[n,i]}},{key:"isAdjacent",value:function(e,t){return this._adjcents.get(e.key).has(t.key)}},{key:"removeVertex",value:function(e){if(!this._nodes.get(e.key))return null;var t,a=rI()(this._adjcents.get(e.key));try{for(a.s();!(t=a.n()).done;){var n=t.value;--this._nodes.get(n).indegree}}catch(e){a.e(e)}finally{a.f()}var i,r=rI()(this._adjcents.values());try{for(r.s();!(i=r.n()).done;){var o=i.value;o.has(e.key)&&o.delete(e.key)}}catch(e){r.e(e)}finally{r.f()}return this._adjcents.delete(e.key),this._nodes.delete(e.key)}},{key:"removeEdge",value:function(e,t){var a=this._nodes.get(null==e?void 0:e.key),n=this._nodes.get(null==t?void 0:t.key);return a&&n&&(--n.indegree,this._adjcents.get(a.key).delete(n.key)),[a,n]}},{key:"nodes",get:function(){return this._nodes}}]),e}();ed.Promise.config({cancellation:!0});var lI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).type="pivot",e.api=new Gd({name:"pivot",url:"/api/pivot",method:"post",beforeRequest:function(e){var t;e.params=Object.assign(Object.assign({},e.params),{dashboardId:null!==(t=d$.globalConfigManager.get("dashboardId"))&&void 0!==t?t:""})},checkIsKeyHit:!1,mergePending:!1}),e._maxRequestInMerged=5,e._maxConcurrentRequests=4,e.cacheStore=new wA({compareFn:ae.equals,shouldClearCache:function(e,t){return e===t.datasetId}}),e}return D()(a,[{key:"_doFetch",value:function(e){var t,a=e.datasetId,n=e.aggregationModels,i=e.sessionId;n&&(t=n.map(function(e){return Object.assign(Object.assign({},e),{pivots:e.pivots.map(function(e){return ae.omit(["_extendFields"],e)}),tables:e.tables.map(function(e){return ae.omit(["_extendFields"],e)})})}));var r={datasetId:a};return i&&(r=Object.assign(Object.assign({},r),{sessionId:i})),this.api.fetch({body:JSON.stringify(t),params:r})}},{key:"get",value:function(e){var a=this,n=e.datasetId,t=e.aggregationModel;if(null!=n&&null!=t){var i=cI(n,t),r=ae.mapObjIndexed(function(e){var t=a.cacheStore.find(e);if(null!=t){if(null!=e.pivot)return aI.create(e.pivot,uI(e.pivot,t),n);if(null!=e.table)return nI.create(e.table,t.data,n)}return null},i);return ae.compose(ae.any(ae.isNil),ae.values)(r)?null:r}}},{key:"setCache",value:function(i,e){var r=this,t=e.datasetId,a=e.aggregationModels,n={};if(null!=a&&a.length)for(var o=0;o<a.length;o++){var s=cI(t,a[o]);n=Object.assign(Object.assign({},n),s)}try{ae.forEachObjIndexed(function(e,t){if(null!=e.pivot){var a=i.aggregationResults[t];zd.a.validate(a)&&r.cacheStore.push(e,{data:a,model:e.pivot})}else if(null!=e.table){var n=i.tableData[t];zd.a.validate(n)&&r.cacheStore.push(e,{data:n,model:e.table})}},n)}catch(e){nu.error(e)}}},{key:"beforeSendRequest",value:function(e){return{aggregationModels:[e.aggregationModel],datasetId:e.datasetId,sessionId:e.sessionId}}},{key:"afterReceiveResponse",value:function(e,a){var t,n={aggregationModel:e.aggregationModels[0],datasetId:e.datasetId},i=this.get(n);if(null!=i)return i;var r=n.aggregationModel,o=r.pivots,s=r.tables,l=[];if(o.forEach(function(e){var t=null==a?void 0:a.aggregationResults[e.id];t&&!zd.a.validate(t)&&l.push(t)}),s.forEach(function(e){var t=null==a?void 0:a.tableData[e.id];t&&!zd.a.validate(t)&&l.push(t)}),l.length){var u=l[0];throw new zd.a({type:this.type,errorCode:null==u?void 0:u.errorCode,msg:null!==(t=null==u?void 0:u.errorMessage)&&void 0!==t?t:"",errors:null==u?void 0:u.errors,context:null==u?void 0:u.context,config:n})}}},{key:"clear",value:function(e){this.cacheStore.clear(e)}},{key:"_groupRequestByDatasetId",value:function(e){var a={};return e.forEach(function(e){var t=e.params.datasetId;null!=a[t]?a[t].count++:a[t]={groupCount:1,count:1}}),a}},{key:"_getMaxCountKey",value:function(t){var e=Object.keys(t);if(e.length){var a=e[0],n=t[a].count;return e.forEach(function(e){t[e].count>n&&(n=t[a=e].count)}),a}}},{key:"_getMaxRequestInMergeGroupByDataset",value:function(e){if(!this._maxRequestInMergeGroupByDataset){for(var t=this._groupRequestByDatasetId(e),a=Object.keys(t).length,n=Object.assign({},t),i=this._maxConcurrentRequests-a;0<i;){var r=this._getMaxCountKey(n);if(r){var o=n[r],s=o.groupCount,l=o.count;n[r]={groupCount:s+1,count:l*s/(s+1)}}--i}this._maxRequestInMergeGroupByDataset=Object.keys(n).reduce(function(e,t){return e[t]=Object.assign(Object.assign({},n[t]),{count:Math.ceil(n[t].count)}),e},{})}return this._maxRequestInMergeGroupByDataset}},{key:"resetRequestContext",value:function(){this._maxRequestInMergeGroupByDataset=null}},{key:"shouldMergeRequest",value:function(e,t,a){var n,i=a.queueingTasks;if(i.length<=this._maxConcurrentRequests)return!1;var r=this._getMaxRequestInMergeGroupByDataset(i),o=e.datasetId,s=r[o].count>this._maxRequestInMerged?this._maxRequestInMerged:r[o].count;return o===t.datasetId&&(null===(n=t.aggregationModels)||void 0===n?void 0:n.length)<s}},{key:"mergeRequest",value:function(e,t){return{aggregationModels:e.aggregationModels.concat(t.aggregationModels),datasetId:e.datasetId}}}]),a}(vx),uI=function(e,t){var a,n,i,r=t.model,o=t.data;if((null===(a=e.values)||void 0===a?void 0:a.length)===(null===(n=r.values)||void 0===n?void 0:n.length))return o;var s=e.values.map(function(t){return r.values.findIndex(function(e){return mh(e,t)})}),l=2*r.dimensions.length;return o.slice(0,l).concat(s.map(function(e){return o[e+l]})).concat(null!==(i=r.calcValues)&&void 0!==i&&i.length?o.slice(-r.calcValues.length):[])},cI=function(a,n){function i(e){return ae.omit(["id"],e)}var e={};return e=n.pivots.reduce(function(e,t){return Object.assign(Object.assign({},e),V()({},t.id,{datasetId:a,filters:n.filters,userParameters:n.userParameters,pivot:i(t)}))},e),e=n.tables.reduce(function(e,t){return Object.assign(Object.assign({},e),V()({},t.id,{datasetId:a,filters:n.filters,userParameters:n.userParameters,table:i(t)}))},e)},dI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:"query {\n            tags {\n              id,\n              parentId,\n              name,\n              order,\n              isFavorites\n            }\n          }"}},checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),pI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/dashboards/webcontents/",checkIsKeyHit:!0,convertResponse:a.convertResponse}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}],[{key:"convertResponse",value:function(e,t){return t.map(function(e){return{label:e,value:"api/dashboards/webcontents/".concat(e,"/index.html"),thumbnail:"api/dashboards/webcontents/".concat(encodeURI(e),"/snapshot.jpg")}})}}]),a}(vx);ed.Promise.config({cancellation:!0});var hI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).type="lookups",e.api=new Gd({name:e.type,url:"/api/pivot",method:"post",beforeRequest:function(e){e.params=Object.assign(Object.assign({},e.params),{dashboardId:d$.globalConfigManager.get("dashboardId")||""})},checkIsKeyHit:!1,mergePending:!0}),e.cacheStore=new IA,e}return D()(a,[{key:"getModelForLookups",value:function(e,t,a){var n=a?Ah(Qp.Asc):void 0;return Th(e,[fh(t,n)])}},{key:"_doFetch",value:function(e){var s=this,t=e.id,l=e.columns,a=e.expressions,n=e.isDateOrSubDate,i=l.map(function(e){return s.getModelForLookups(Bd.a.v1(),e,n)}),r=Sh({pivot:i,customAttributes:a,datasetId:t});return this.api.fetch({body:JSON.stringify([r]),params:{datasetId:t}}).then(function(o){return i.map(function(e,t){var a,n,i=o.aggregationResults[e.id];if(i&&!zd.a.validate(i))throw new zd.a({type:s.type,errorCode:null==i?void 0:i.errorCode,msg:null!==(a=null==i?void 0:i.errorMessage)&&void 0!==a?a:"",errors:null==i?void 0:i.errors,context:null==i?void 0:i.context});var r=new Map;return i[0].forEach(function(e,t){var a,n;r.has(e)||r.set(e,null!==(n=null===(a=i[1])||void 0===a?void 0:a[t])&&void 0!==n?n:t)}),{columnId:l[t].attributeId,subColumnType:l[t].subColumnType,entries:null===(n=o.aggregationResults[e.id][0])||void 0===n?void 0:n.sort(function(e,t){return r.get(e)-r.get(t)})}})})}}]),a}(vx),yI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            documenttypes(key: "geoJson") {\n                documents {\n                    id,\n                    title,\n                    isSystemReserved,\n                    ... on GeoJson {\n                    info {\n                            projection\n                        }\n                    }\n                }\n            }\n          }'}},convertResponse:function(e,t){return t.data.documenttypes.reduce(function(e,t){return e.concat(t.documents)},[])},checkIsKeyHit:!0}),e.cacheStore=new AA({}),e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),gI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).listApi=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query\n            {\n              documenttypes(key: "hierarchy") {\n                documents {\n                  id,\n                  title,\n                }\n              }\n            }'}},convertResponse:function(e,t){return t.data.documenttypes.reduce(function(e,t){return e.concat(t.documents)},[])},checkIsKeyHit:!0}),e.api=new Gd({url:"/api/documents/{{id}}",method:"get",checkIsKeyHit:function(e,t){var a,n;return(null===(a=e.pathParams)||void 0===a?void 0:a.id)===(null===(n=t.pathParams)||void 0===n?void 0:n.id)},mergePending:!0,convertResponse:function(e,t){return t.id=e.pathParams.id,t}}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){var a=this;return this.listApi.fetch().then(function(e){var t=e.map(function(e){return a.api.fetch({pathParams:{id:e.id}})});return ed.Promise.all(t)})}}]),a}(vx),mI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"api/dashboardResources/geoJson/{{id}}",method:"get",checkIsKeyHit:function(e,t){return e.pathParams.id===t.pathParams.id},mergePending:!0}),e.cacheStore=new xA,e}return D()(a,[{key:"_doFetch",value:function(e){var t=d$.globalConfigManager.get("dashboardId");return t?this.api.fetch({pathParams:{id:e},params:{dashboardId:t}}):this.api.fetch({pathParams:{id:e}})}}]),a}(vx),fI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:"query {\n            me {\n              email,\n              home,\n              id,\n              language,\n              name,\n              roles,\n              securityProvider,\n              showWelcomeOnStartup,\n              tenantId,\n              tenantName,\n              theme,\n              themeName,\n              fullName,\n            }\n          }"}},convertResponse:a.convertResponse,checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}],[{key:"convertResponse",value:function(e,t){return t.data.me}}]),a}(vx),vI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            document(id: "'.concat(e.data,'") {\n              effective_ops\n            }\n          }')}},convertResponse:a.convertResponse,checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({body:e})}}],[{key:"convertResponse",value:function(e,t){return t.data.document.effective_ops}}]),a}(vx),bI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).type="visualDefinition",e.api=new Gd({name:e.type,url:"/api/resources/visual/{{id}}",method:"get",beforeRequest:function(e){var t=d$.globalConfigManager.get("dashboardId");e.params={dashboardId:t}},convertResponse:function(e,t){return Object.assign(Object.assign({},t.content),{id:t.id,configuration:t.configuration?JSON.parse(t.configuration):{}})},mergePending:!0,checkIsKeyHit:function(e,t){return Bo.a.isEqual(e,t)}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({pathParams:{id:e}})}}]),a}(vx),CI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).type="visualDefinition",e.api=new Gd({name:e.type,url:"/api/resources/visuals",method:"get",convertResponse:function(e,t){return t.reduce(function(e,t){var a=t.documentId,n=t.title,i=t.info;return e.push(Object.assign(Object.assign({id:a},i),{displayName:n})),e},[])}}),e.cacheStore=new xA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),TI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            documenttypes(key: "floorPlan") {\n                documents {\n                    id,\n                    title,\n                    isSystemReserved\n                }\n            }\n          }'}},convertResponse:function(e,t){return t.data.documenttypes.reduce(function(e,t){return e.concat(t.documents)},[])},checkIsKeyHit:!0}),e.cacheStore=new AA({}),e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),SI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/dashboardResources/floorPlan/{{id}}",method:"get",checkIsKeyHit:function(e,t){return e.pathParams.id===t.pathParams.id},mergePending:!0}),e.cacheStore=new xA,e}return D()(a,[{key:"_doFetch",value:function(e){var t=d$.globalConfigManager.get("dashboardId");return t?this.api.fetch({pathParams:{id:e},params:{dashboardId:t}}):this.api.fetch({pathParams:{id:e}})}}]),a}(vx),DI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            documenttypes(key: "font/ttf,font/otf,font/woff,font/woff2,font/svg,font/eot,font/webfont") {\n              documents {\n                id,\n                title,\n              }\n            }\n          }'}},convertResponse:function(e,t){return t.data.documenttypes.reduce(function(e,t){return e.concat(t.documents)},[]).sort(function(e,t){return e.title.localeCompare(t.title)})},checkIsKeyHit:!0,mergePending:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),kI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/resources/fonts/{{id}}",method:"get",checkIsKeyHit:!0,parseResponse:function(e){return"application/octet-stream"===e.headers.get("content-type")?e.blob():e.json()}}),e.cacheStore=new xA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({pathParams:{id:e}})}}]),a}(vx),wI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/token/longlivedaccesstoken",method:"get",headers:{"Public-Key":"S26hbGLZZnXpaLPV"},convertResponse:function(e,t){return t},checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),xI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            documenttypes(key: "dbd") {\n              documents(orderby: "name") {\n                id,\n                title\n              }\n            }\n          }'}}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),AI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            documenttypes(key: "rdl") {\n              documents(orderby: "name") {\n                id,\n                title\n              }\n            }\n          }'}}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),II=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/dashboards/config",method:"get",checkIsKeyHit:!0}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),PI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/dashboards/contextInfo",method:"get",checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),_I=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            tags {\n              id,\n              parentId,\n              name,\n              order,\n              iconCssClass,\n              color,\n              isFavorites,\n              isPersonal,\n              documents (filterbytype: "dbd"){\n                id,\n                title\n              }\n            }\n          }'}}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),MI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){var t=e.data,a="document";t.startsWith("draft-")&&(a="documentdraft"),e.data={query:"query {\n              ".concat(a,'(id: "').concat(t,'") {\n                isApproval,\n              }\n            }')}},convertResponse:function(e,t){var a,n,i,r;return{draftIsBeingReviewed:(null===(n=null===(a=t.data)||void 0===a?void 0:a.document)||void 0===n?void 0:n.isApproval)||(null===(r=null===(i=t.data)||void 0===i?void 0:i.documentdraft)||void 0===r?void 0:r.isApproval)||!1}}}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({body:e})}}]),a}(vx),LI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/auditlog/addrequestlog",method:"post"}),e.previewApi=new Gd({url:"/api/dashboards/addPreviewLog/{{id}}",method:"post"}),e.cacheStore=new IA,e}return D()(a,[{key:"recordPreview",value:function(e){this.previewApi.fetch({pathParams:{id:e}}).then(function(){return null},function(){return null})}},{key:"recordDesign",value:function(e){e.startsWith("draft-")||this.api.fetch({body:{documentId:e,actionType:"Design",description:"Open Dashboard Designer."}}).then(function(){return null},function(){return null})}}]),a}(vx),RI=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},VI={Dashboard:MA,DatasetInfoList:LA,DatasetSchema:RA,DocTheme:VA,DocThemeList:NA,DocParameters:EA,EnsureDocumentAccess:FA,ImageList:OA,TagList:dI,WebContentTemplate:pI,GeoJsonList:yI,MapHierarchyList:gI,GeoDocument:mI,User:fI,UserPermission:vI,VisualDefinition:bI,VisualDefinitionList:CI,FloorPlanList:TI,FontList:DI,WebFont:kI,FloorPlanDocument:SI,DatasetLookups:hI,PivotData:lI,Token:wI,DashboardDocList:xI,ReportDocList:AI,DashboardConfig:II,ContextInfo:PI,TagWithDashboardDocList:_I,DocumentMeta:MI,StaticData:function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this))._data=e,a._defaultResource=t,a}return D()(i,[{key:"fetch",value:function(){var a;return RI(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this._data)return e.next=3,null===(a=this._defaultResource)||void 0===a?void 0:a.fetch();e.next=5;break;case 3:t=e.sent,this._data=t;case 5:return e.abrupt("return",this._data);case 6:case"end":return e.stop()}},e,this)}))}}]),i}(vx),DataMonitorChannels:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/notification/channels",method:"get",checkIsKeyHit:!0}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),DataMonitorContacts:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/notification/contacts/{{channel}}",method:"get",checkIsKeyHit:!0}),e.cacheStore=new xA,e}return D()(a,[{key:"_doFetch",value:function(e){return this.api.fetch({pathParams:{channel:e}})}},{key:"setCache",value:function(e,t){e.success&&C()(b()(a.prototype),"setCache",this).call(this,e,t)}}]),a}(vx),DataMonitorEmailSetting:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/admin/api/settings/smtp/domain",method:"get",checkIsKeyHit:!0}),e.cacheStore=new IA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),DataMonitorTimeZones:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/serverSupports?p=".concat((new Date).valueOf()),method:"get",checkIsKeyHit:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),DataMonitoring:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).postAPI=new Gd({url:"/api/data/monitorings",method:"post",parseResponse:function(e){return e.json().then(function(e){return e.context=e.errorDataDict,e})}}),e.cacheStore=new IA,e}return D()(a,[{key:"post",value:function(e){return this.postAPI.fetch({body:e})}}]),a}(vx),LanguageList:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/api/graphql",method:"post",beforeRequest:function(e){e.data={query:'query {\n            documenttypes(key:"lr"){\n                documents{\n                ...on LanguageResource {\n                  id\n                  title\n              }\n            }\n          }\n        }'}},convertResponse:function(e,t){return t.data.documenttypes.reduce(function(e,t){return e.concat(t.documents)},[]).sort(function(e,t){return e.title.localeCompare(t.title)})},checkIsKeyHit:!0,mergePending:!0}),e.cacheStore=new AA,e}return D()(a,[{key:"_doFetch",value:function(){return this.api.fetch()}}]),a}(vx),LanguageResource:function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).api=new Gd({url:"/languageResources/{{realPath}}",convertResponse:function(e,t){var n=Wt,i={},a=t.lastVersion,r=t.languageResource.languagesList.map(function(e){var t=e.name,a=e.values.reduce(function(e,t){return e[t.key]=t.value,e},{});return t===n&&(i=a),{name:t,values:a}});return{languageResource:i,i18nResource:r,languageVersion:a}}}),e.cacheStore=new wA({}),e}return D()(a,[{key:"_doFetch",value:function(e){var t=e.id,a=e.lng,n=e.lngKeys,i=void 0===n?[]:n,r=e.isViewer,o=void 0!==r&&r,s=e.revisionNo;return this.api.fetch({pathParams:{realPath:o?"".concat(t,"?cachedVersion=").concat(s,"&lng=").concat(a,"&resourceKeys=").concat(i.join(",")):t}})}}]),a}(vx),AuditLog:LI};ed.Promise.config({cancellation:!0});function NI(e,i){return e.length===i.length&&e.every(function(e,t){return a=e,n=i[t],a===n;var a,n})}var EI=function(){function t(e){I()(this,t),this.matchTo=function(e){return!1},this.reduxProxy=e}return D()(t,[{key:"getScenario",value:function(e){return Hs.scenarioById(e,this.state)}},{key:"match",value:function(e){if(!e)return!1;if(!this.state)return!1;var t=this.getScenario(e);return this.matchTo(t)}},{key:"get",value:function(){throw Error("Not Implement!")}},{key:"fetch",value:function(){return ed.Promise.resolve(this.get.apply(this,arguments))}},{key:"suspend",value:function(){}},{key:"resume",value:function(){}},{key:"state",get:function(){return this.reduxProxy.getState()}}]),t}();function FI(a,n){var e=Ho.range(n.rowCount);return function(t){return e.map(function(e){return a.getCellValue(n.row+e,n.col+t)}).filter(function(e){return e}).join(" ")||Ft("common.nullDisplay")}}function OI(e){return"column ".concat(e)}function HI(e){return e.toLowerCase().startsWith("row")}function BI(e){return["string","number"].includes(E()(e))?"".concat(e):null}function UI(e){return null==e||isNaN(e)?null:+e}function zI(n){return function(e){var t,a=d$.getDatasetSchema(n);switch(null===(t=null==a?void 0:a.columns[e])||void 0===t?void 0:t.dataType){case"number":return UI;case"boolean":return function(e){return e};default:return BI}}}function KI(e){return e===H.EmptyDataInSpreadSource.EmptyCell}function jI(e){return e===H.EmptyDataInSpreadSource.EmptyDimension}function WI(e){return e===H.EmptyDataInSpreadSource.EmptyRowColumn}function GI(e,t,a,n){var i,r,o,s,l,u=n.removeData,y=n.orderMapping,c=a.values,g=(r=t,s=(o=a).rows,l=o.columns,function(e,t,a,n){return e?s?r.getCellValue(a+s.row,s.col+t):a+1:l?r.getCellValue(l.row+t,n+l.col):n+1}),m=e.dimensions.map(function(e){return e.column}),f=null!==(i=e.values)&&void 0!==i?i:[],d=WI(u),v=jI(u),b=KI(u),p=Ho.range(c.rowCount),C=Ho.range(c.colCount),T={},S={},D=C.reduce(function(e,t){return e[t]={isColEmpty:!0,isColDimEmpty:!0},e},{}),k=zI(e.id);p.forEach(function(p){T[p]=[];var h=!0,r=!0;C.forEach(function(d){var e;S[d]=null!==(e=S[d])&&void 0!==e?e:[];var a=!1,n=m.reduce(function(e,t,a){var n,i,r=t.columnId.split(" "),o=N()(r,2),s=o[0],l=o[1],u=HI(s),c=g(u,+l,p,d);return e.push(k(t.columnId)(c),null!==(i=null===(n=y[t.columnId])||void 0===n?void 0:n[c])&&void 0!==i?i:Number.MAX_SAFE_INTEGER),null!=c&&(u?h=!1:D[d].isColEmpty=!1),e},[]),i=t.getCellValue(p+c.row,d+c.col);f.forEach(function(e){var t=e.aggregationType===H.AggregationMethod.First?BI:UI;n.push(t(i)),null==i?a=!0:(r=h=!1,D[d].isColDimEmpty=!1,D[d].isColEmpty=!1)}),b&&a||(T[p].push(n),S[d].push(n))}),d&&h&&(T[p]=[]),v&&r&&(T[p]=[])}),Object.keys(D).forEach(function(e){var t=D[e],a=t.isColEmpty,n=t.isColDimEmpty;d&&a&&(S[e]=[]),v&&n&&(S[e]=[])});var h=new Set,w=[];return p.forEach(function(e){return T[e].forEach(function(e){return h.add(e)})}),C.forEach(function(e){return S[e].forEach(function(e){h.has(e)&&e.forEach(function(e,t){var a;w[t]=null!==(a=w[t])&&void 0!==a?a:[],w[t].push(e)})})}),w}function YI(s,l,e,t){function n(n,e){var i=1<arguments.length&&void 0!==e?e:function(e){return e},t=n.columnId.split(" "),a=N()(t,2),r=a[0],o=a[1],s=HI(r);return p.map(function(e){var t;if(s){if(!h)return e+1;t=l.getCellValue(e+h.row,+o+h.col)}else{if(!y)return e+1;var a=v(n.columnId);t=l.getCellValue(e+g.row,a+g.col)}return i(t)})}var a,i=t.removeData,u=t.orderMapping,r=WI(i),c=jI(i),d=KI(i),p=Ho.range(e.values.rowCount),o=Ho.range(e.values.colCount),h=e.rows,y=e.columns,g=e.values,m=FI(l,y),f=Object(ae.compose)(OI,m),v=QI(function(t){return o.find(function(e){return t===f(e)})}),b=zI(s.id),C=s.dimensions.map(function(e){var t=e.column;return n(t,b(t.columnId))}),T=(null!==(a=s.values)&&void 0!==a?a:[]).map(function(e){var t=e.column,a=e.aggregationType;return n(t,a===H.AggregationMethod.First?BI:UI)}),S=[];return C.forEach(function(e,t){var a,n,i=2*t;S[i]=null!==(a=S[i])&&void 0!==a?a:[],S[1+i]=null!==(n=S[1+i])&&void 0!==n?n:[]}),T.forEach(function(e,t){var a,n=2*C.length+t;S[n]=null!==(a=S[n])&&void 0!==a?a:[]}),p.forEach(function(o){var e=T.every(function(e){return null==e[o]}),t=C.every(function(e){return null==e[o]});d&&e&&1===T.length||c&&e||r&&e&&t||(C.forEach(function(e,t){var a,n,i=2*t;S[i].push(e[o]);var r=s.dimensions[t].column.columnId;S[1+i].push(null!==(n=null===(a=u[r])||void 0===a?void 0:a[e[o]])&&void 0!==n?n:Number.MAX_SAFE_INTEGER)}),T.forEach(function(e,t){var a=2*C.length+t;S[a].push(e[o])}))}),S}function qI(e,l,t,a){var n,i=a.removeData,r=WI(i),u=t.rows,c=t.columns,d=t.values,p=Ho.range(d.rowCount),o=Ho.range(d.colCount),s=FI(l,c),h=Object(ae.compose)(OI,s),y=QI(function(t){return o.find(function(e){return t===h(e)})}),g=zI(e.id),m=e.dimensions.map(function(e){var t=e.column;return function(n,e){var i=1<arguments.length&&void 0!==e?e:function(e){return e},t=n.columnId.split(" "),a=N()(t,2),r=a[0],o=a[1],s=HI(r);return p.map(function(e){var t;if(s){if(!u)return e+1;t=l.getCellValue(e+u.row,+o+u.col)}else{if(!c)return e+1;var a=y(n.columnId);t=l.getCellValue(e+d.row,a+d.col)}return i(t)})}(t,g(t.columnId))}),f=[];p.forEach(function(n){var e=m.every(function(e){return null==e[n]});r&&e||m.forEach(function(e,t){var a;f[t]=null!==(a=f[t])&&void 0!==a?a:[],f[t].push(e[n])})});var v=e.options,b=v.capacity,C=v.index,T=b*C,S=e.dimensions.findIndex(function(e){return e.orderBy}),D=new Map;if(-1!==S){var k=e.dimensions[S].orderBy.order,w=e.dimensions[S].column.columnId,x=(null===(n=d$.getDatasetSchema(e.id).columns[w])||void 0===n?void 0:n.dataType)||"string",A=H.SortOrder.Ascending;k===Qp.Desc&&(A=H.SortOrder.Descending),p.sort(function(e,t){return Al({dataType:x,sortOrder:A})(f[S][e],f[S][t])}).forEach(function(e,t){return D.set(t,e)})}return f.map(function(a){return D.size?a.map(function(e,t){return a[D.get(t)]}):a}).map(function(e){return e.slice(T,Math.min(d.rowCount,b+T))})}function JI(e){var t=e.getTimezoneOffset();return-485===t&&(t=-485-43/60),-321===t&&(t=-321-10/60),-507===t&&(t=-507-52/60),t}function XI(e){if("/OADate("===e.substr(0,8))return function(e){var t=e-25569,a=new Date(864e5*t),n=0<=t?1:-1,i=JI(a),r=(864e5*e*1440+n-3181192704e6+864e5*i)/1440,o=new Date(r),s=0<=i?1:-1,l=new Date(r+36e5*s),u=JI(l);if(i!==u){var c=new Date(r+60*(u-i)*1e3);if(u<i){if(-1==s||u===JI(o))return c=999===c.getMilliseconds()?new Date(c.valueOf()+1):c}else if(i<u&&(1==s||u===JI(o)))return c=999===c.getMilliseconds()?new Date(c.valueOf()+1):c}return o=999===o.getMilliseconds()?new Date(o.valueOf()+1):o}(parseFloat(e.substr(8,e.length-10)))}var QI=function(n,i){var r;void 0===i&&(i=NI);var o,s=[],l=!1;return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return l&&r===this&&i(t,s)||(o=n.apply(this,t),l=!0,r=this,s=t),o}},ZI=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).matchTo=Jr.isSpreadChart,e}return D()(a,[{key:"transformOADate",value:function(e){var t="string"==typeof e&&XI(e);return t?_l(_e()(t)):e}}]),a}(EI),$I=Dl.a.Spread.CalcEngine,eP=Dl.a.Spread.Sheets.CalcEngine,tP=function(){function i(){I()(this,i),this.dataTable={}}return D()(i,[{key:"getValue",value:function(e,t){var a=i.getValuePath(e,t);return Ho.get(this.dataTable,a)}},{key:"setValue",value:function(e,t,a){var n=i.getValuePath(e,t);Ho.setWith(this.dataTable,n,a,Object)}}]),i}();tP.getValuePath=function(e,t){return"".concat(e,".").concat(t,".value")};function aP(e){return e.toLowerCase().startsWith("row")}var nP=function(e){k()(r,e);var t=w()(r);function r(){return I()(this,r),t.apply(this,arguments)}return D()(r,[{key:"getParserContext",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=(e=C()(b()(r.prototype),"getParserContext",this)).call.apply(e,[this].concat(a));return i.addResolver(new eP.SheetReferenceResolver({})),i.addResolver(new eP.StructureReferenceResolver({})),i}}]),r}($I.CalcSource),iP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"recalculateCell",value:function(e,t){var a=this._getWorkingExpressionWithRowColumn(e,t)||this._getExpressionWithRowColumn(e,t);if(a){var n=$I._createCellIdentity(e,t),i=this._service._evaluateParsedFormula(this._source,a,n,!1,!1,null,!1);this._viewModel.setValue(e,t,i)}}}]),a}($I.CalcSourceModel),rP=function(){function n(e,t,a){var i=this;I()(this,n),this.parseCellFormula=function(e,t){var a=i.dataTable[e][t];if(null!=a&&a.formula){var n=i.service.parse(i.source,a.formula,e,t,!1,!0,!0);i.calcModel.setFormula(e,t,a.formula,n,!0,!0)}},this.getCellValue=function(e,t){null==t&&null!=e.row&&null!=e.col&&(t=e.col,e=e.row);var a=i.viewModel.getValue(e,t);return void 0===a&&(a=i.getInitValue(e,t)),null!=a?a:null},this.getCustomFunction=function(e){return i.customFunctions&&i.customFunctions[e.toUpperCase()]||null},this.getReference=function(e){var t=e.row,a=e.col;return-1===t&&(e.row=0,e.rowCount=i.rowCount),-1===a&&(e.col=0,e.colCount=i.columnCount),i.source._getReference(e)},this.dataTable=e,this.rowCount=t,this.columnCount=a,this.init()}return D()(n,[{key:"init",value:function(){this.service=new $I.CalcService,this.source=new nP(this.service),this.calcModel=new iP(this.service,this.source),this.source.setCalcSourceModel(this.calcModel),this.source.getValue=this.getCellValue,this.source._getReference=this.source.getReference,this.source.getReference=this.getReference,this.viewModel=new tP,this.calcModel._viewModel=this.viewModel}},{key:"getInitValue",value:function(e,t){return this.viewModel.getValue.call(this,e,t)}},{key:"traverseAll",value:function(a){var n=this.dataTable;Object.keys(n).forEach(function(t){var e=n[t];e&&Object.keys(e).forEach(function(e){a(+t,+e)})})}},{key:"addCustomFunction",value:function(e){this.customFunctions=this.customFunctions||{},this.customFunctions[e.name.toUpperCase()]=e,this.source.getCustomFunction=this.getCustomFunction,this.traverseAll(this.parseCellFormula)}}],[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Uh()(n,t)}}]),n}(),oP=Dl.a.Spread.CalcEngine.Convert,sP=function(e){k()(a,e);var t=w()(a);function a(e){var u;return I()(this,a),(u=t.call(this))._description={description:Ft("spreadChart.getPivotDataDescription"),parameters:[{name:"measure name"},{name:"sheet name"},{name:"[dimension name"},{name:"entry name of dimension]",repeatable:!0}]},u.description=function(){return u._description},u.acceptsReference=function(){return!0},u.getDataProvider=function(e){return u._dataManager.findDataProviderByName(e)},u.parseCalcReference=function(e){return oP._isReference(e)?e._source.getValue(e._identities[0]):e},u.evaluate=function(){for(var e=$I.Errors,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=a[0],r=a[1],o=[];1<a.length&&a.length%2==0&&a.slice(2).forEach(function(e,t){var a=u.parseCalcReference(e);t%2==0?o.push({name:a}):o[o.length-1].entry=a});var s=u.getDataProvider(r);if(!s)return e.Value;var l=s.getPivotValue({measure:i,dimensions:o});return isNaN(l)||!isFinite(l)?e.Value:l},u.name="GETPIVOTDATA",u.minArgs=1,u.maxArgs=255,u._dataManager=e,u}return a}($I.Functions.Function),lP=function(){function c(e){var t,a;I()(this,c),this.id=null!==(t=null==e?void 0:e.id)&&void 0!==t?t:Bd.a.v1(),this.columns=Object.assign({},null!==(a=null==e?void 0:e.columns)&&void 0!==a?a:{})}return D()(c,[{key:"updateDatasetId",value:function(e){this.id=e}},{key:"addColumn",value:function(e){this.columns[e.columnName]=e}},{key:"getDatasetSchema",value:function(){var r=this,e=ey(this.id,H.DatasetType.COT,{entities:[{id:this.id,name:Ft("spreadChart.customDataset"),attributes:Object.values(this.columns)}],relations:[],lastUpdatedAt:_l(_e()())});return Object.assign(Object.assign({},e),{columns:ae.map(function(e){var t,a,n,i;return Object.assign(Object.assign({},e),{display:null!==(a=null===(t=r.columns[e.name])||void 0===t?void 0:t.display)&&void 0!==a?a:e.display,format:null!==(i=null===(n=r.columns[e.name])||void 0===n?void 0:n.format)&&void 0!==i?i:e.format})},e.columns),status:Ho.isEmpty(this.columns)?H.ServerDataStatus.NotLoad:H.ServerDataStatus.LoadSuccess,isCustomDataset:!0})}}],[{key:"makeColumnSchema",value:function(e){switch(E()(e)){case"object":case"number":return{format:"General",dataType:"Number",category:H.ColumnCategory.Measure};case"string":var t={format:"@",dataType:"String",category:H.ColumnCategory.Dimension};return"/OADate("===e.substr(0,8)&&(t.format=kl(e.includes("."))),t;case"boolean":return{format:"@",dataType:"Boolean",category:H.ColumnCategory.Dimension};default:return{format:"@",dataType:"String",category:H.ColumnCategory.Dimension}}}},{key:"generateColumn",value:function(e,t,a){var n=c.makeColumnSchema(a);return Object.assign(Object.assign({},n),{columnName:e,columnId:e,display:null!=t?t:e})}},{key:"makeColumnSchemaByType",value:function(e){switch(e){case H.ParameterDataTypeFull.Integer:case H.ParameterDataTypeFull.Float:return{format:"General",dataType:"Number",category:H.ColumnCategory.Measure};case H.ParameterDataTypeFull.String:return{format:"@",dataType:"String",category:H.ColumnCategory.Dimension};case H.ParameterDataTypeFull.Date:return{format:"@",dataType:"Date",category:H.ColumnCategory.Dimension};case H.ParameterDataTypeFull.DateTime:return{format:"@",dataType:"DateTime",category:H.ColumnCategory.Dimension};case H.ParameterDataTypeFull.Boolean:return{format:"@",dataType:"Boolean",category:H.ColumnCategory.Dimension};default:return{format:"@",dataType:"String",category:H.ColumnCategory.Dimension}}}},{key:"generateColumnByType",value:function(e,t,a){var n=c.makeColumnSchemaByType(a);return Object.assign(Object.assign({},n),{columnName:e,columnId:e,display:null!=t?t:e})}},{key:"generateByCustomData",value:function(e){var t=new c({id:e.id,columns:{}});if(e&&e.content){var a=e.content.profile;if(!a.columns)return t.getDatasetSchema();var n,i=rI()(a.columns);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r.display,s=r.columnName,l=r.dataType,u=c.generateColumnByType(s,o,l);t.addColumn(u)}}catch(e){i.e(e)}finally{i.f()}}return t.getDatasetSchema()}}]),c}(),uP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"generateDefaultSchema",value:function(e,t){var a=new lP;a.updateDatasetId(e);var n=t.pivot.dataRanges;if(n.rows&&Ho.range(n.rows.colCount).forEach(function(e){var t=lP.generateColumn("row ".concat(e),Ft("spreadChart.rowsPattern",{index:e}));a.addColumn(t)}),n.columns&&Ho.range(n.columns.rowCount).forEach(function(e){var t=lP.generateColumn("column ".concat(e),Ft("spreadChart.columnsPattern",{index:e}));a.addColumn(t)}),n.values){var i=lP.generateColumn("Values",Ft("spreadChart.values"),0);a.addColumn(i)}return a.getDatasetSchema()}},{key:"generateColumnFieldSchema",value:function(e,t){var a=new lP;a.updateDatasetId(e);var n=d$.dataProviderManagerCache.get(e),i=t.pivot,r=i.dataRanges,o=i.dataTable,s=i.rowCount,l=i.columnCount,u=r.columns,c=r.values;if(u&&n){var d=n.getCurrentDataTable(o),p=rP.create(d,s,l);p.addCustomFunction(new sP(n));var h=FI(p,u);Ho.range(u.colCount).forEach(function(n){var e=h(n),i=null;Ho.range(c.rowCount).some(function(e){var t=p.getCellValue(c.row+e,c.col+n),a=["number","string","boolean"].includes(E()(t));return a&&(i=t),a});var t=lP.generateColumn(OI(e),e,i);t.sourceIndex=n,a.addColumn(t)})}return r.rows&&Ho.range(r.rows.colCount).forEach(function(e){var t=lP.generateColumn("row ".concat(e),Ft("spreadChart.rowsPattern",{index:e}));a.addColumn(t)}),a.getDatasetSchema()}},{key:"get",value:function(e){var t=this.getScenario(e);return t.options.property.columnAsField?this.generateColumnFieldSchema(e,t):this.generateDefaultSchema(e,t)}}]),a}(ZI),cP=function(e){k()(a,e);var t=w()(a);function a(){var v;return I()(this,a),(v=t.apply(this,arguments)).generateDefaultLookups=function(e,t,a){var n=e.pivot,i=n.dataTable,r=n.dataRanges,o=n.rowCount,s=n.columnCount,l=t.getCurrentDataTable(i),u=rP.create(l,o,s);u.addCustomFunction(new sP(t));var c=Ho.range(r.values.rowCount),d=Ho.range(r.values.colCount),p=r.rows,h=r.columns;return a.map(function(e){var t=e.attributeId.split(" "),a=N()(t,2),n=a[0],i=a[1],r=aP(n),o=(r?c:d).map(function(e){var t;if(r){if(!p)return e+1;t=u.getCellValue(e+p.row,p.col+ +i)}else{if(!h)return e+1;t=u.getCellValue(h.row+ +i,e+h.col)}return v.transformOADate(t)});return Object.assign(Object.assign({},e),{entries:Ho.uniq(o)})})},v.generateColumnFieldLookups=function(e,t,a){var n=e.pivot,i=n.dataTable,r=n.dataRanges,o=n.rowCount,s=n.columnCount,l=t.getCurrentDataTable(i),u=rP.create(l,o,s);u.addCustomFunction(new sP(t));var c=Ho.range(r.values.rowCount),d=Ho.range(r.values.colCount),p=r.rows,h=r.columns,y=r.values,g=FI(u,h),m=Object(ae.compose)(OI,g),f=QI(function(t){return d.find(function(e){return t===m(e)})});return a.map(function(n){var e=n.attributeId.split(" "),t=N()(e,2),a=t[0],i=t[1],r=aP(a),o=c.map(function(e){var t;if(r){if(!p)return e+1;t=u.getCellValue(e+p.row,+i+p.col)}else{if(!h)return e+1;var a=f(n.attributeId);t=u.getCellValue(e+y.row,a+y.col)}return v.transformOADate(t)});return Object.assign(Object.assign({},n),{entries:Ho.uniq(o)})})},v}return D()(a,[{key:"match",value:function(e){return!(null==e||!e.id)&&C()(b()(a.prototype),"match",this).call(this,e.id)}},{key:"get",value:function(e){var t=e.id,a=e.columns,n=d$.dataProviderManagerCache.get(t);if(!n)return[];var i=this.getScenario(t);return i.options.property.columnAsField?this.generateColumnFieldLookups(i,n,a):this.generateDefaultLookups(i,n,a)}}]),a}(ZI),dP=function(e){k()(a,e);var t=w()(a);function a(){var r;return I()(this,a),(r=t.apply(this,arguments)).generateDefaultPivotData=function(e,t,a){var n=e.dataRanges,i=r.getCalcProxy(t,e);return GI(a,i,n,r.getOptions(e))},r.generateColumnFieldPivotData=function(e,t,a){var n=e.dataRanges,i=r.getCalcProxy(t,e);return YI(a,i,n,r.getOptions(e))},r.generateColumnFieldRawData=function(e,t,a){var n=e.dataRanges,i=r.getCalcProxy(t,e);return qI(a,i,n,r.getOptions(e))},r}return D()(a,[{key:"match",value:function(e){return!(null==e||!e.datasetId)&&C()(b()(a.prototype),"match",this).call(this,e.datasetId)}},{key:"fetchPivotData",value:function(e,t){return this.pivotDataRes.fetch({aggregationModel:e,datasetId:t})}},{key:"parseTable",value:function(e){var t=this;return ae.map(function(e){return e&&ae.map(function(e){return null!=e&&e.value?Object.assign(Object.assign({},e),{value:t.transformOADate(e.value)}):e},e)},e)}},{key:"getCalcProxy",value:function(e,t){var a=t.dataTable,n=t.rowCount,i=t.columnCount,r=e.getCurrentDataTable(a),o=rP.create(this.parseTable(r),n,i);return o.addCustomFunction(new sP(e)),o}},{key:"getOrderMapping",value:function(e){var i=0<arguments.length&&void 0!==e?e:{},r={};return Object.keys(i).forEach(function(e){var t,a,n={};null!==(a=null===(t=i[e])||void 0===t?void 0:t.manual)&&void 0!==a&&a.forEach(function(e,t){n[e]=t}),r[e]=n}),r}},{key:"getOptions",value:function(e){var t=e.pivotSortInfo,a=e.aggregationOptions;return{removeData:(null!=a?a:{}).removeData,orderMapping:this.getOrderMapping(t)}}},{key:"getPivotData",value:function(n,i,e){var r=this;return e.reduce(function(e,t){var a;return a=i.options.property.columnAsField?r.generateColumnFieldPivotData(i.pivot,n,t):r.generateDefaultPivotData(i.pivot,n,t),e[t.id]=new aI(t,a),e},{})}},{key:"getRawData",value:function(n,i,e){var r=this;return e.reduce(function(e,t){var a;if(t.countOnly)a=(a=r.generateDefaultPivotData(i.pivot,n,t)).map(function(e){return[e.length]});else{if(!i.options.property.columnAsField)throw{title:Ft("spreadChart.invalidOperation"),content:Ft("spreadChart.dataTableNeedColumnField")};a=r.generateColumnFieldRawData(i.pivot,n,t)}return e[t.id]=new nI(t,a),e},{})}},{key:"fetch",value:function(e){var t=e.aggregationModel,a=e.datasetId;try{var n=this.getScenario(a),i=d$.dataProviderManagerCache.get(a);return i?Promise.resolve(Object.assign(Object.assign({},this.getPivotData(i,n,t.pivots)),this.getRawData(i,n,t.tables))):Promise.reject("Can't find a data manager!")}catch(e){throw nu.error(e),e}}},{key:"pivotDataRes",get:function(){return d$.httpResourceManager.get("PivotAggregatedData")}}]),a}(ZI),pP=a(33),hP=a.n(pP),yP=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).matchTo=Jr.isMergedChart,e}return D()(a,[{key:"getDatasetsInfo",value:function(e){var a=this.getScenario(e).pivot.datasetsInfo,o=a.datasetIds[0],t=a.datasetIds.slice(1),n=a.datasetIds.reduce(function(e,i){var t,r=null!==(t=e[i])&&void 0!==t?t:{};return a.links.forEach(function(e){var t,a,n=null===(a=((null===(t=d$.getDatasetSchema(i))||void 0===t?void 0:t.columns)||{})[e[i]])||void 0===a?void 0:a.attributeName;r[e[o]]=n}),e[i]=r,e},{});return{customId:e,allIds:a.datasetIds,parentId:o,subIdList:t,mappings:n,raw:a,joinType:a.joinType}}},{key:"getColumnIdMapping",value:function(n,e){var t,i=d$.getDatasetSchema(e.customId).origin._nameMapping,a=null!==(t=e.mappings[n])&&void 0!==t?t:{};return Object.keys(i).reduce(function(e,t){var a=i[t];return a.datasetId===n&&(e[t]=a.columnId),e},a)}}],[{key:"transformColumn",value:function(e,t,a){var n=e[t.attributeId];if(n)return hh(t.attributeId,a,n,t.subColumnType,t.isCustomAttribute,ph(t))}}]),a}(EI),gP=function(e,o,s,l){return new(s=s||ed.Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};ed.Promise.config({cancellation:!0});var mP={interaction:{dimensionOnly:!0}},fP=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).cache=new WeakMap,e}return D()(a,[{key:"generateMergedSchema",value:function(e,t,n){function o(e,t,a,n){var i=2<arguments.length&&void 0!==a?a:e,r=3<arguments.length&&void 0!==n?n:1;return c.has(e.columnName)||(c.add(e.columnName),u[e.columnId])?o(Object.assign(Object.assign({},e),{columnId:"".concat(i.columnId," (").concat(r,")"),columnName:"".concat(i.columnName," (").concat(r,")")}),t,i,r+1):(u[e.columnId]={datasetId:t,columnId:i.columnName,tableName:i.entityName},e)}var a=hP()(n),i=a[0],r=a.slice(1),s=[],l=[],u={},c=new Set,d={};Object.values(t).forEach(function(e){Object.keys(e).forEach(function(e){var t;d[e]=(null!==(t=d[e])&&void 0!==t?t:0)+1})}),i.origin.forEach(function(e){if(Jr.isMeasure(e)){var t=o(e,i.id);s.push(t)}else if(d[e.columnId]===n.length){var a=o(e,i.id);l.push(a)}}),r.forEach(function(a){a.origin.forEach(function(e){if(Jr.isMeasure(e)){var t=o(e,a.id);s.push(t)}})});var p=s.concat(l),h=ey(e,H.DatasetType.COT,{entities:[{id:e,name:Ft("mergedChart.mergedDataset"),attributes:p}],nameMapping:u,relations:[],columns:p,lastUpdatedAt:_l(_e()())});return h.options=mP,h}},{key:"fetchAllSchemasAsync",value:function(a){return gP(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed.Promise.all(a.map(function(e){return t.datasetSchemaRes.fetch(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}},{key:"fetchAsync",value:function(i){return gP(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getDatasetsInfo(i),e.prev=1,t.subIdList.length){e.next=10;break}if(t.parentId){e.next=5;break}return e.abrupt("return",ed.Promise.reject({done:!0}));case 5:return e.next=7,this.datasetSchemaRes.fetch(t.parentId);case 7:a=e.sent,e.next=14;break;case 10:return e.next=12,this.fetchAllSchemasAsync(t.allIds);case 12:n=e.sent,a=this.generateMergedSchema(i,t.mappings,n);case 14:return this.cache.set(t.raw,a),e.abrupt("return",ed.Promise.resolve(a));case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",ed.Promise.reject(e.t0));case 21:case"end":return e.stop()}},e,this,[[1,18]])}))}},{key:"fetch",value:function(e){return ed.Promise.resolve(this.fetchAsync(e))}},{key:"get",value:function(e){var t=this.getDatasetsInfo(e);if(t.allIds.length){var a=this.cache.get(t.raw);if(a)return a;var n=t.allIds.map(function(e){return d$.getDatasetSchema(e)});if(n.every(function(e){return e})){if(1===n.length)return n[0];var i=this.generateMergedSchema(e,t.mappings,n);return this.cache.set(t.raw,i),i}}}},{key:"datasetSchemaRes",get:function(){return d$.httpResourceManager.get("DatasetSchema")}}]),a}(yP),vP=function(e,o,s,l){return new(s=s||ed.Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};ed.Promise.config({cancellation:!0});function bP(e,t,a){return gh(Object.assign(Object.assign({},a.column),{columnId:e,tableName:t}),a.aggregationType)}var CP=function(e){k()(p,e);var t=w()(p);function p(){return I()(this,p),t.apply(this,arguments)}return D()(p,[{key:"match",value:function(e){return!(null==e||!e.datasetId)&&C()(b()(p.prototype),"match",this).call(this,e.datasetId)}},{key:"convertArray2Dict",value:function(e,t){var a=e.dataModel.dimensions;if(!a.length)return{};for(var n=e.getDataWithin(a.map(function(e){return e.column})),i=e.getDataProfile().rowCount,r={},o=0;o<i;){var s=!0;if(t)s=e.getDataWithin(t)[o];var l=n.map(function(e){return e[o]});Ho.get(r,l)||Ho.setWith(r,l,s,Object),o++}return r}},{key:"intersectDicts",value:function(e){var a=this,n=0<arguments.length&&void 0!==e?e:[];if(!n.length)return null;if(n.some(function(e){return!e}))return null;if("boolean"==typeof n[0])return!0;var i={};return Object.keys(n[0]).forEach(function(t){var e=a.intersectDicts(n.map(function(e){return e[t]}));e&&(i[t]=e)}),Ho.isEmpty(i)?null:i}},{key:"pickCommonEntries",value:function(e){var t=this,a=e.map(function(e){return t.convertArray2Dict(e)}).filter(function(e){return e});return this.intersectDicts(a)}},{key:"resolveAllValuesInModel",value:function(e,t,s){var a,n,i=[];return(null!==(a=e.values)&&void 0!==a?a:[]).forEach(function(o){t.some(function(r){var e,t=null===(e=r.dataModel.values)||void 0===e?void 0:e.find(function(e){var t=s[o.column.attributeId],a=t.datasetId,n=t.columnId,i=t.tableName;return r.datasetId===a&&mh(bP(n,i,o),e)});return t&&i.push({value:t,dataProvider:r}),!!t})}),(null!==(n=e.calcValues)&&void 0!==n?n:[]).forEach(function(o){t.some(function(r){var e,t=null===(e=r.dataModel.calcValues)||void 0===e?void 0:e.find(function(e){var t,a,n=s[o.value.column.attributeId].datasetId,i=null===(a=null===(t=d$.getDatasetSchema(n))||void 0===t?void 0:t.entities.find(function(e){return e.id===n}))||void 0===a?void 0:a.name;return r.datasetId===n&&Ho.isEqual(p.transformCalcValue(ae.map(function(e){return e.columnId},s),o,i),e)});t&&i.push({value:t,dataProvider:r})})}),i}},{key:"calcInnerJoinedPivotData",value:function(e,a,o,t){for(var s=3<arguments.length&&void 0!==t?t:{},n=o.dataModel,i=o.getDataWithin(n.dimensions.map(function(e){return e.column})),r=o.getDataProfile().rowCount,l=[],u=0,c=function(){var t=i.map(function(e){return e[u]});if(void 0!==Ho.get(e,t)){var r=0;n.dimensions.forEach(function(e,t){var a;l[r]||l.push([],[]);var n=o.getDataWithin(e.column)[u];l[r].push(n);var i=o.getRawOrderData(e.column)[u];s[t]&&(i=null!==(a=s[t][n])&&void 0!==a?a:i),l[r+1].push(i),r+=2}),a.forEach(function(e){l[r]||l.push([]),l[r].push(Ho.get(e,t)),r+=1})}u++};u<r;)c();return l}},{key:"calcFullJoinedPivotData",value:function(r,d,e,t){var p=3<arguments.length&&void 0!==t?t:{},h=0;return e.reduce(function(s,l,e){for(var t=l.dataModel,n=l.getDataWithin(t.dimensions.map(function(e){return e.column})),a=l.getDataProfile().rowCount,u=0,c=h,i=function(){var a=n.map(function(e){return e[u]});if(!(void 0!==Ho.get(r,a))||!e){var o=0;t.dimensions.forEach(function(e,t){var a;s[o]||s.push([],[]);var n=l.getDataWithin(e.column)[u];s[o].push(n);var i=l.getRawOrderData(e.column)[u]+h,r=p[t];r&&(i=null!==(a=r[n])&&void 0!==a?a:i+Object.keys(r).length),s[o+1].push(i),c=Math.max(i,c),o+=2}),d.forEach(function(e){var t;s[o]||s.push([]),s[o].push(null!==(t=Ho.get(e,a))&&void 0!==t?t:null),o+=1})}u++};u<a;)i();return h=c+1,s},[])}},{key:"calcJoinedPivotData",value:function(e,t,a,n){var i,r=this,o=3<arguments.length&&void 0!==n?n:H.MergeDatasetsJoinType.Inner,s=this.resolveAllValuesInModel(e,t,a);if(null===(i=e.dimensions)||void 0===i||!i.length)return s.map(function(e){return e.dataProvider.getDataWithin(e.value)});var l=this.pickCommonEntries(t),u=s.map(function(e){return r.convertArray2Dict(e.dataProvider,e.value)}),c=t.reduceRight(function(e,t){return Object.assign(Object.assign({},e),(n=t).dataModel.dimensions.reduce(function(e,t,a){return t.orderBy&&(e[a]=n.getOrderMapping(t.column)),e},{}));var n},{});switch(o){case H.MergeDatasetsJoinType.Inner:return l?this.calcInnerJoinedPivotData(l,u,t[0],c):Ho.range(30).map(function(){return[]});case H.MergeDatasetsJoinType.Full:return this.calcFullJoinedPivotData(l,u,t,c);default:throw Error("Not support yet!: ".concat(o))}}},{key:"createMergedDataProvider",value:function(t,e,a,n){var i=3<arguments.length&&void 0!==n?n:H.MergeDatasetsJoinType.Inner;if(1===e.length)return new aI(t,e[0].rawData);if(e.some(function(e){return e.dataModel.dimensions.length!==t.dimensions.length}))return new aI(t,Ho.range(30).map(function(){return[]}));var r=this.calcJoinedPivotData(t,e,a,i);return new aI(t,r)}},{key:"mergePivotData",value:function(e,a,n,t){var i=this,r=3<arguments.length&&void 0!==t?t:H.MergeDatasetsJoinType.Inner,o={};return e.pivots.forEach(function(t){o[t.id]=i.createMergedDataProvider(t,a.map(function(e){return e[t.id]}).filter(function(e){return e}),n,r)}),o}},{key:"fetchPivotData",value:function(e,t){return this.pivotDataRes.fetch({aggregationModel:e,datasetId:t})}},{key:"fetchMergedPivotData",value:function(o,s){return vP(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o.subIdList.length){e.next=4;break}return t=o.parentId,e.abrupt("return",this.fetchPivotData(s,t));case 4:return a=d$.getDatasetSchema(o.customId).origin._nameMapping,n=o.allIds.map(function(e){return p.transformAggModel(r.getColumnIdMapping(e,o),s,e)}),e.next=8,ed.Promise.all(n.map(function(e,t){return e&&r.fetchPivotData(e,o.allIds[t])}));case 8:return i=e.sent,e.abrupt("return",this.mergePivotData(s,i.filter(function(e){return e}),a,o.joinType));case 12:throw e.prev=12,e.t0=e.catch(0),nu.error(e.t0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,12]])}))}},{key:"fetch",value:function(e){var t=e.aggregationModel,a=e.datasetId,n=this.getDatasetsInfo(a);return ed.Promise.resolve(this.fetchMergedPivotData(n,t))}},{key:"pivotDataRes",get:function(){return d$.httpResourceManager.get("PivotAggregatedData")}}],[{key:"transformCalcValue",value:function(t,e,a){var n=Object.assign(Object.assign({},e),{value:gh(p.transformColumn(t,e.value.column,a),e.value.aggregationType)});return e.divideBy&&(n.divideBy=Object.assign(Object.assign({},e.divideBy),{columns:e.divideBy.columns.map(function(e){return p.transformColumn(t,e,a)})})),n}},{key:"transformOrder",value:function(e,t,a){if((null==t?void 0:t.type)!==th.Value)return t;var n=e[t.value.column.attributeId];return n?ae.compose(ae.assocPath(["value","column","columnId"],n),ae.assocPath(["value","column","tableName"],a))(t):void 0}},{key:"transformFilter",value:function(t,e,a){var n=e.columns.map(function(e){return p.transformColumn(t,e,a)}).filter(function(e){return e});return n.length!==e.columns.length?null:kh(n,e.filterBy)}},{key:"transformRawModel",value:function(){return null}},{key:"transformPivotModel",value:function(t,e,a){var n,i,r,o=this,s=e.dimensions.filter(function(e){return t[e.column.attributeId]}).map(function(e){return fh(p.transformColumn(t,e.column,a),o.transformOrder(t,e.orderBy,a))});if(s.length!==e.dimensions.length)throw{title:Ft("error.multiSourceChart.measureInGroup.title"),content:Ft("error.multiSourceChart.measureInGroup.content")};var l=(null!==(n=e.values)&&void 0!==n?n:[]).filter(function(e){return t[e.column.attributeId]}).map(function(e){return bP(t[e.column.attributeId],a,e)}),u=(null!==(i=e.calcValues)&&void 0!==i?i:[]).filter(function(e){return t[e.value.column.attributeId]}).map(function(e){return p.transformCalcValue(t,e,a)});if(![].concat(R()(l),R()(u)).length)return null;var c=e.filters&&p.transformFilters(t,e.filters,a),d=(null!==(r=e.calcFilters)&&void 0!==r?r:[]).filter(function(e){return t[e.value.column.attributeId]}).map(function(e){return p.transformCalcValue(t,e,a)});return Th(e.id,s,l,u,c,d,e.options)}},{key:"transformFilters",value:function(t,e,a){var n=this;return dh(e.type,e.items.map(function(e){return e.type?n.transformFilters(t,e,a):p.transformFilter(t,e,a)}).filter(function(e){return e}))}},{key:"transformAggModel",value:function(t,e,a){var n,i,r,o=null===(i=null===(n=d$.getDatasetSchema(a))||void 0===n?void 0:n.entities.find(function(e){return e.id===a}))||void 0===i?void 0:i.name,s=e.pivots.map(function(e){return p.transformPivotModel(t,e,o)}).filter(function(e){return e}),l=e.tables.map(function(e){return p.transformRawModel(e)}).filter(function(e){return e});if(![].concat(R()(s),R()(l)).length)return null;var u=null===(r=e.filters)||void 0===r?void 0:r[a];return Sh({pivot:s,table:l,filters:u,customAttributes:e.customAttributes,datasetId:a})}}]),p}(yP),TP=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},SP=function(e){k()(u,e);var t=w()(u);function u(){return I()(this,u),t.apply(this,arguments)}return D()(u,[{key:"match",value:function(e){return!(null==e||!e.id)&&C()(b()(u.prototype),"match",this).call(this,e.id)}},{key:"mergedEntries",value:function(a,e){var t=1<arguments.length&&void 0!==e?e:H.MergeDatasetsJoinType.Inner;switch(t){case H.MergeDatasetsJoinType.Inner:var n=new Map;return a.forEach(function(e){return e.forEach(function(e){var t=n.has(e)?n.get(e):0;n.set(e,t+1)})}),Array.from(n).filter(function(e){var t=N()(e,2);t[0];return t[1]===a.length}).map(function(e){return N()(e,1)[0]});case H.MergeDatasetsJoinType.Full:var i=new Set;return a.forEach(function(e){return e.forEach(function(e){return i.add(e)})}),Array.from(i);default:throw Error("Not supported join type: ".concat(t))}}},{key:"fetchAllLookups",value:function(s,l,e){var u=2<arguments.length&&void 0!==e?e:H.MergeDatasetsJoinType.Inner;return TP(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,t,a,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1===(i=Object.keys(l)).length)return t=i[0],a=l[t].columns,e.next=6,this.datasetLookupsRes.fetch({id:t,columns:a});e.next=8;break;case 6:return n=e.sent,e.abrupt("return",s.map(function(e,t){return Object.assign(Object.assign({},e),{entries:n[t].entries})}));case 8:return e.next=10,Promise.all(i.map(function(e){return o.datasetLookupsRes.fetch({id:e,columns:l[e].columns})}));case 10:return r=e.sent,e.abrupt("return",s.map(function(n){var e=r.map(function(e,t){var a=l[i[t]].map.get(n);if(null!=a)return e[a].entries}).filter(function(e){return e}),t=o.mergedEntries(e,u);return Object.assign(Object.assign({},n),{entries:t})}));case 12:case"end":return e.stop()}},e,this)}))}},{key:"fetch",value:function(e){var a=this,t=e.id,s=e.columns;try{var l=this.getDatasetsInfo(t);if(!l.subIdList.length){var n=l.parentId;return this.datasetLookupsRes.fetch({id:n,columns:s})}var i=l.allIds.reduce(function(n,i){var e,t,r=a.getColumnIdMapping(i,l),o=null===(t=null===(e=d$.getDatasetSchema(i))||void 0===e?void 0:e.entities.find(function(e){return e.id===i}))||void 0===t?void 0:t.name;return s.forEach(function(e){var t,a=u.transformColumn(r,e,o);a&&(n[i]=null!==(t=n[i])&&void 0!==t?t:{columns:[],map:new Map},n[i].map.set(e,n[i].columns.length),n[i].columns.push(a))}),n},{});return this.fetchAllLookups(s,i,l.joinType)}catch(e){nu.error(e)}}},{key:"datasetLookupsRes",get:function(){return d$.httpResourceManager.get("DatasetColumnLookup")}}]),u}(yP),DP=function(e){return{pivotData:[new dP(e),new CP(e)],datasetSchema:[new uP(e),new fP(e)],datasetLookups:[new cP(e),new SP(e)]}};ed.Promise.config({cancellation:!0});var kP,wP,xP=function(){function t(e){I()(this,t),this.resources=[],this.defaultResource=e}return D()(t,[{key:"getDefaultResource",value:function(){return this.defaultResource}},{key:"addResource",value:function(e){this.resources.push(e)}},{key:"getResource",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!t.length)return this.defaultResource;var n=this.resources.find(function(e){return e.match.apply(e,t)});return null!=n?n:this.defaultResource}},{key:"proxyMethod",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:[],n=this.getResource.apply(this,R()(a));return n[e].apply(n,R()(a))}},{key:"setReduxStore",value:function(a){var e,t;this.resources.forEach(function(e){var t;return null===(t=null==e?void 0:e.setReduxStore)||void 0===t?void 0:t.call(e,a)}),null!==(t=null===(e=this.defaultResource)||void 0===e?void 0:e.setReduxStore)&&void 0!==t&&t.call(e,a)}},{key:"fetch",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("fetch",t)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("get",t)}},{key:"post",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("post",t)}},{key:"put",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("put",t)}},{key:"clear",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("clear",t)}},{key:"suspend",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("suspend",t)}},{key:"resume",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("resume",t)}},{key:"onError",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.proxyMethod("onError",t)}},{key:"destroy",value:function(){var e,t;this.resources.forEach(function(e){var t;return null===(t=null==e?void 0:e.destroy)||void 0===t?void 0:t.call(e)}),null!==(t=null===(e=this.defaultResource)||void 0===e?void 0:e.destroy)&&void 0!==t&&t.call(e),this.resources=[],this.defaultResource=void 0}}]),t}();(wP=kP=kP||{}).None="none",wP.SameWithInjectObject="sameWithInjectObject",wP.WrapInjectObject="wrapInjectObject";function AP(t,e,a){if(null==e)return!0;if(WP(e)){var n=e;if(null==n.items||0===n.items.length)return!0;switch(n.type){case H.LogicalType.And:return n.items.every(function(e){return AP(t,e,a)});case H.LogicalType.Or:default:return n.items.some(function(e){return AP(t,e,a)})}}return ae.all(GP(t,e),a.dimensions)}function IP(e){return e.reduce(function(e,t,a,n){return e.push(n.slice(0,a+1)),e},[[]])}function PP(e,t){return"".concat(e,"-TOTAL-").concat(t)}function _P(e,t){if(t&&e&&e.getDataViewType()===H.DataViewType.Plain){var a=e.getSeriesRole(),n=e.getFlattenedPivotSettingItems([a]);return(i=t.calcFilters,r=n,!i||!i.length||i.every(function(e){return e.divideBy.type!==Yp.Partition&&(e.divideBy.type===Yp.Group?e.divideBy.columns.every(function(t){return-1===r.findIndex(function(e){return yh(t,qx(e))})}):void 0)}))&&n.length}var i,r}var MP,LP,RP=function(){function e(){I()(this,e),this._injectMode=kP.None}return D()(e,[{key:"setInjectMode",value:function(e){this._injectMode=e}},{key:"getInjectMode",value:function(){return this._injectMode}},{key:"destroyObjectForInject",value:function(){}},{key:"destroy",value:function(e){if(e)return this.destroyObjectForInject(),void this.destroySelf();switch(this._injectMode){case kP.None:this.destroyObjectForInject(),this.destroySelf();break;case kP.WrapInjectObject:this.destroyObjectForInject();break;case kP.SameWithInjectObject:}}}]),e}(),VP=["DatasetInfoList","PivotData","GeoJsonList","MapHierarchyList","GeoDocument","DocTheme","WebContentTemplate","User","UserPermission","Dashboard","VisualDefinition","VisualDefinitionList","DocParameters","FloorPlanList","FontList","WebFont","FloorPlanDocument","Token","EnsureDocumentAccess","DocThemeList","ImageList","TagList","DashboardDocList","ReportDocList","DashboardConfig","ContextInfo","TagWithDashboardDocList","DocumentMeta","DataMonitorChannels","DataMonitorContacts","DataMonitorEmailSetting","DataMonitorTimeZones","DataMonitoring","LanguageList","LanguageResource","AuditLog"],NP={datasetInfoList:"DatasetInfoList"},EP=function(e){k()(c,e);var u=w()(c);function c(e,n){var i;I()(this,c),(i=u.call(this)).resources={};var a=null==n?void 0:n.httpResourceManager;VP.forEach(function(e){var t=a?a.get(e).getDefaultResource():new VI[e];i.add(e,new xP(t))});var t,r=DP(e);t=a?a.get("DatasetColumnLookup").getDefaultResource():new VI.DatasetLookups;var o=new xP(t);r.datasetLookups.forEach(function(e){return o.addResource(e)}),i.add("DatasetColumnLookup",o),t=a?a.get("PivotAggregatedData").getDefaultResource():new VI.PivotData;var s=new xP(t);r.pivotData.forEach(function(e){return s.addResource(e)}),i.add("PivotAggregatedData",s),t=a?a.get("DatasetSchema").getDefaultResource():new VI.DatasetSchema;var l=new xP(t);return r.datasetSchema.forEach(function(e){return l.addResource(e)}),i.add("DatasetSchema",l),void 0!==n&&Object.keys(NP).forEach(function(e){var t=n[e];if(void 0!==t){var a=NP[e];i.resources[a]=new VI.StaticData(t,i.get(a))}}),i}return D()(c,[{key:"get",value:function(e){return this.resources[e]}},{key:"add",value:function(e,t){this.resources[e]=t}},{key:"getData",value:function(e,t){var a=this.get(e);return a?a.get(t):null}},{key:"cleanDatasetCache",value:function(e,t){1<arguments.length&&void 0!==t&&t||this.resources.DatasetSchema.clear(e),this.resources.PivotAggregatedData.clear(e),this.resources.DatasetColumnLookup.clear(e)}},{key:"clearCache",value:function(){var a=this;Object.keys(this.resources).forEach(function(e){var t;return null===(t=a.resources[e])||void 0===t?void 0:t.clear()})}},{key:"destroySelf",value:function(){var a=this;VP.forEach(function(e){var t=a.resources[e];null!=t&&t.destroy()})}}]),c}(RP),FP=function(){function e(){I()(this,e),this._mapping={},this._enabled=!1}return D()(e,[{key:"start",value:function(e){e.length&&(this._mapping=e.reduce(function(e,t){return e[t]=!1,e},{}),this._enabled=!0)}},{key:"end",value:function(){this._mapping={},this._enabled=!1}},{key:"done",value:function(e){this._enabled&&(this._mapping[e]=!0)}},{key:"isComplete",value:function(){var t=this;return!!this._enabled&&!Object.keys(this._mapping).filter(function(e){return!t._mapping[e]}).length}}]),e}(),OP=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},HP=function(){function t(){I()(this,t),this._isValid=!1,this.onError=function(e){}}return D()(t,[{key:"validate",value:function(){this._isValid=!1,this.model&&(this._isValid=!0)}},{key:"getFirstColumn",value:function(){var e,t,a;return null===(a=null===(t=null===(e=this.model)||void 0===e?void 0:e.dimensions)||void 0===t?void 0:t[0])||void 0===a?void 0:a.column}},{key:"getAllColumns",value:function(){var e;return null!==(e=this.model)&&void 0!==e&&e.dimensions?this.model.dimensions.map(function(e){return e.column}):[]}},{key:"resolveModel",value:function(){return Sh({customAttributes:this.customAttributes,datasetId:this.datasetId})}},{key:"buildDataView",value:function(e){return e}},{key:"getDefer",value:function(){var a={},e=new Promise(function(e,t){a.resolve=e,a.reject=t});return a.promise=e,a}},{key:"getDataAsync",value:function(e,t){if(!this.isValid)return nu.error(Error("Invalid DataView Provider")),{};var a,n=this.getDefer();try{a=this.getAggregationConfig(e,t)}catch(e){return n.reject(e),n.promise}this._config=a,this.cancel();var i=this._resource.fetch(a).then(function(e){return n.resolve(e),null}).catch(function(e){n.reject(e)});return this.q=i,(this.lastDefer=n).promise}},{key:"getDataViewAsync",value:function(a,n,e){var i,r=2<arguments.length&&void 0!==e?e:{};return OP(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,this.getDataAsync(a,n);case 4:if(t=e.sent,Object.keys(t).length){e.next=7;break}return e.abrupt("return");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),null!==(i=this.onError)&&void 0!==i&&i.call(this,e.t0),e.abrupt("return");case 13:return e.abrupt("return",this.buildDataView(t,r));case 14:case"end":return e.stop()}},e,this,[[1,9]])}))}},{key:"getAggregationConfig",value:function(e,t){var a=this.resolveModel(),n=a.pivots,i=a.tables,r=a.userParameters;return{aggregationModel:Sh({pivot:n,table:i,userParameters:r,filters:this.filters,customAttributes:this.customAttributes,datasetId:e}),datasetId:e,sessionId:t}}},{key:"clone",value:function(){var e=new t;return e.resource=this._resource,e.onError=this.onError,e}},{key:"suspend",value:function(){var e;null!==(e=this._resource)&&void 0!==e&&e.suspend()}},{key:"resume",value:function(){var e;null!==(e=this._resource)&&void 0!==e&&e.resume()}},{key:"cancel",value:function(){var e,t,a,n;null!==(t=null===(e=this.q)||void 0===e?void 0:e.isPending)&&void 0!==t&&t.call(e)&&(null!==(a=this.q)&&void 0!==a&&a.cancel(),null!==(n=this.lastDefer)&&void 0!==n&&n.resolve({}))}},{key:"isValid",set:function(e){this._isValid=e},get:function(){return!!this._resource&&(this.validate(),this._isValid)}},{key:"config",get:function(){return this._config}},{key:"resource",set:function(e){this._resource=e}}]),t}(),BP=function(){function s(e,t,a){I()(this,s),this.dataProvider=e,this.dataViewHelper=t,this.customData=a}return D()(s,[{key:"getDimensions",value:function(){var e,t;return null!==(t=null===(e=this.dataViewHelper)||void 0===e?void 0:e.getUsedDimensionItems.apply(e,arguments))&&void 0!==t?t:[]}},{key:"getValues",value:function(){var e,t;return null!==(t=null===(e=this.dataViewHelper)||void 0===e?void 0:e.getUsedValueItems.apply(e,arguments))&&void 0!==t?t:[]}},{key:"getDataProfile",value:function(){var e;return(e=this.dataProvider).getDataProfile.apply(e,arguments)}},{key:"getDimDataByItem",value:function(){var e,t=(e=this.dataProvider).getColumnByItem.apply(e,arguments);return this.dataProvider.getDataWithin(t)}},{key:"getOrderListByItem",value:function(){var e,t=(e=this.dataProvider).getColumnByItem.apply(e,arguments);return this.dataProvider.getOrderList(t)}},{key:"getOrderMappingByItem",value:function(){var e,t=(e=this.dataProvider).getColumnByItem.apply(e,arguments);return this.dataProvider.getOrderMapping(t)}},{key:"getValueDataByItem",value:function(){var e,t=(e=this.dataProvider).getValueByItem.apply(e,arguments);return this.dataProvider.getDataWithin(t)}},{key:"getCalcDataByIdx",value:function(){var e,t=(e=this.dataProvider).getCalcValueByIdx.apply(e,arguments);return this.dataProvider.getDataWithin(t)}},{key:"getCalcDataByItem",value:function(){var e,t=(e=this.dataProvider).getCalcValueByItem.apply(e,arguments);return this.dataProvider.getDataWithin(t)}},{key:"getDataView",value:function(){throw Error("Not Implement!")}},{key:"getData",value:function(){var t=this,e=this.getDimensions(),a=this.getValues(),n=a.filter(Jr.isValueOrCustomMeasure),i=a.filter(Jr.isCalculation),r=[].concat(R()(e.map(function(e){return e.display})),R()(n.map(function(e){return e.display})),R()(i.map(function(e){return e.display})));if(!r.length)return[];var o=[].concat(R()(e.map(function(e){return t.getDimDataByItem(e)})),R()(n.map(function(e){return t.getValueDataByItem(e)})),R()(i.map(function(e){return t.getCalcDataByItem(e,t.dataViewHelper)})));return s.zipData(r,o)}},{key:"getProfile",value:function(e){var t=0<arguments.length&&void 0!==e&&e,a=this.dataViewHelper;return a?t?a.getTinyProfile():a.getPivotSettingProfile():{}}},{key:"getOptions",value:function(){var e=this.dataViewHelper;return e?e.getOptions():{}}},{key:"getCustomData",value:function(){return this.customData}},{key:"getSortPriority",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length&&void 0!==t?t:{};return a.length?a.map(function(e){var t,a;return null!==(a=null===(t=n[e.name])||void 0===t?void 0:t.priority)&&void 0!==a?a:jn}).reduce(function(e,t){return e+t}):jn}}],[{key:"zipData",value:function(e,n){for(var t=n[0].length,i=[],r=0,a=function(){var a={};e.forEach(function(e,t){a[e]=n[t][r]}),i.push(a),r++};r<t;)a();return i}}]),s}(),UP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getValue",value:function(){var e,t=this.getValues()[0];return null==(e=Jr.isValueOrCustomMeasure(t)?this.getValueDataByItem(t):this.getCalcDataByIdx(0))?void 0:e[0]}},{key:"getSingleValue",value:function(e){var t,a,n=null!==(t=null!=e?e:this.dataProvider.getValueByIdx(0))&&void 0!==t?t:this.dataProvider.getCalcValueByIdx(0),i=null!==(a=this.dataProvider.getDataWithin(n))&&void 0!==a?a:[];return null==i?void 0:i[0]}},{key:"getTinyProfile",value:function(){return this.getProfile(!0)}},{key:"getDataView",value:function(e){var t=e.tinyProfile,a=void 0!==t&&t;return{value:this.getValue(),profile:this.getProfile(a),options:this.getOptions()}}}]),a}(BP),zP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getSort",value:function(i){var r=this;return this.getDimensions().reduce(function(e,t){var a,n;return e[t.display]={order:r.getOrderListByItem(t),priority:null!==(n=null===(a=i[t.name])||void 0===a?void 0:a.priority)&&void 0!==n?n:jn},e},{})}},{key:"getDataView",value:function(e){var t=e.sortsMapping,a=void 0===t?{}:t,n=e.tinyProfile,i=void 0!==n&&n;return{sort:this.getSort(a),data:this.getData(),profile:this.getProfile(i),options:this.getOptions()}}}]),a}(BP),KP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"buildHeaders",value:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:[];if(!a.length)return[];for(var n=this.getDataProfile().rowCount,i=a.map(function(e){return t.getDimDataByItem(e)}),r=new Map,o=0;o<n;)i.map(function(e){return e[o]}).reduce(function(e,t){var a=e.get(t);return a||(a=new Map,e.set(t,a)),a},r),o++;return function a(e,t){var n=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length?t:void 0;return R()(i.keys()).map(function(e){var t;return{label:e,column:null===(t=n[0])||void 0===t?void 0:t.display,next:a(n.slice(1),i.get(e))}})}(a,r)}},{key:"sortHeaders",value:function(e,t){var a=this,n=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length&&void 0!==t?t:[];if(!n.length)return[];var r=this.getOrderMappingByItem(n[0]);return i.sort(function(e,t){return r[e.label]-r[t.label]}).map(function(e){return Object.assign(Object.assign({},e),{next:a.sortHeaders(n.slice(1),e.next)})})}},{key:"buildHierarchicalHeader",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};return{levels:e.map(function(e){return e.display}),headers:this.sortHeaders(e,this.buildHeaders(e)),sortPriority:this.getSortPriority(e,a)}}},{key:"getMatrix",value:function(e){var t=this,a=this.dataViewHelper.getMatrixRoles(),n=a.rowsRoles.flatMap(function(e){return t.getDimensions([e])}),i=a.columnsRoles.flatMap(function(e){return t.getDimensions([e])});return{columns:this.buildHierarchicalHeader(i,e),rows:this.buildHierarchicalHeader(n,e),values:this.getData()}}},{key:"getDataView",value:function(e){var t=e.sortsMapping,a=void 0===t?{}:t,n=e.tinyProfile,i=void 0!==n&&n;return{matrix:this.getMatrix(a),profile:this.getProfile(i),options:this.getOptions(),customData:this.getCustomData()}}}]),a}(BP),jP=function(){function e(){I()(this,e)}return D()(e,null,[{key:"create",value:function(e,t,a){switch(t.getDataViewType()){case H.DataViewType.Single:return new UP(e,t,a);case H.DataViewType.Matrix:return new KP(e,t,a);default:return new zP(e,t,a)}}},{key:"createSingleDataViewBuilder",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Uh()(UP,t)}},{key:"createPlainDataViewBuilder",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Uh()(zP,t)}}]),e}(),WP=function(e){return null!=e.type},GP=function(o,s){return function(e){var t,a,n=o.getColumn(e.columnName);switch(s.filterBy.type){case Jp.Exact:var i=null!==(t=n.parentColumnName)&&void 0!==t?t:n.name,r=null!==(a=n.subColumnType)&&void 0!==a?a:H.SubColumnType.None;return s.columns.find(function(e){var t=e.attributeId,a=e.subColumnType;return t===i&&a===r})?YP(s.filterBy,e.entry):!1;case Jp.MatchWord:case Jp.StartWith:case Jp.EndWith:case Jp.Contain:return qP(s.filterBy,e.entry);case Jp.Greater:case Jp.Range:case Jp.Less:return JP(s.filterBy,e.entry)}return!0}},YP=function(e,t){var a=ae.compose(function(e){return null!=e.find(function(e){return e==t})},ae.map(ae.prop("value")))(e.range.items);return e.exclude?!a:a},qP=function(e,t){var a,n=null,i=e.range.caseSensitive?void 0:"i";switch(e.type){case Jp.MatchWord:n=new RegExp("^".concat(e.range.pattern,"$"),i);break;case Jp.StartWith:n=new RegExp("^".concat(e.range.pattern),i);break;case Jp.EndWith:n=new RegExp("".concat(e.range.pattern,"$"),i);break;case Jp.Contain:n=new RegExp("".concat(e.range.pattern),i)}return a=n.test(t),e.exclude?!a:a},JP=function(e,t){var a=!0;switch(e.type){case Jp.Less:a=e.range.maxIncluded?t<=e.range.max:t<e.range.max;break;case Jp.Greater:a=e.range.minIncluded?t>=e.range.min:t>e.range.min;break;case Jp.Range:a=(e.range.maxIncluded?t<=e.range.max:t<e.range.max)&&(e.range.minIncluded?t>=e.range.min:t>e.range.min)}return e.exclude?!a:a},XP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"isDataViewPivotSettingHelper",value:function(){return!0}},{key:"validate",value:function(){this.isValid=!1,this.model&&(this.isValid=!0),this.helper||(this.isValid=!1)}},{key:"isMatrixWithGrandTotal",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.helper;return!!this.isDataViewPivotSettingHelper()&&(t.getDataViewType()===H.DataViewType.Matrix&&(t.getMatrixRoles().columnGrandTotal||t.getMatrixRoles().rowGrandTotal))}},{key:"resolveModel",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:this.model,n=1<arguments.length&&void 0!==t?t:this.helper,i=[a];if(this.isMatrixWithGrandTotal(n)){var r=this.resolveModelForMatrixTotal(a,n);i.push.apply(i,R()(r))}return this.seriesTotalPivotModel&&_P(n,a)&&i.push(this.seriesTotalPivotModel),Sh({pivot:i,userParameters:this.userParameters,customAttributes:this.customAttributes,datasetId:this.datasetId})}},{key:"resolveModelForMatrixTotal",value:function(a,t){var e,n=t.getPivotSettingDesc(),i=[n.rowsRoles,n.columnsRoles].map(function(e){return e.flatMap(function(e){return t.getUsedDimensionItems([e])}).map(function(e){return qx(e)})}).map(IP),r=N()(i,2),o=r[0],s=r[1],l=o.flatMap(function(t){return s.map(function(e){return t.concat(e)})}).map(function(e){return ae.uniqWith(yh,e)}).filter(function(e){return e.length<a.dimensions.length}),u=ae.uniqWith(function(e,a){return e.length===a.length&&e.every(function(t){return a.find(function(e){return yh(t,e)})})},l),c=(null!==(e=a.values)&&void 0!==e?e:[]).filter(function(e){return e.aggregationType!==H.AggregationMethod.First}).flatMap(function(t){return u.map(function(e){return _h(t,Ch(Yp.Group,e),{afterCalcFilter:!0})})});return c.length?ae.splitEvery(100,c).map(function(e,t){return Object.assign(Object.assign({},a),{id:PP(a.id,t),values:[],calcValues:e})}):[]}},{key:"buildStandardData",value:function(e,t,a){var n=this.filterCustomData();return e.setCustomData(n,t),jP.create(e,t,n).getDataView(a)}},{key:"buildDataView",value:function(e,t,a,n){var i=2<arguments.length&&void 0!==a?a:this.model,r=3<arguments.length&&void 0!==n?n:this.helper,o=e[i.id];if(o){var s,l=this.buildStandardData(o,r,t);if(this.isMatrixWithGrandTotal(r)){var u=0,c=[],d=e[PP(i.id,u)];if(d){for(;d;)c.push(d),u+=1,d=e[PP(i.id,u)];var p=function(d,t,e){var p=2<arguments.length&&void 0!==e?e:[];if(!d)return[];var a=t.getPivotSettingDesc(),n=[a.rowsRoles,a.columnsRoles].map(function(e){return e.flatMap(function(e){return t.getUsedDimensionItems([e])})}),i=N()(n,2),r=i[0],o=i[1],h=t.getUsedValueItems().filter(Jr.isValueOrCustomMeasure).filter(function(e){return e.method!==H.AggregationMethod.First}),s=IP(r),l=IP(o),u=s.flatMap(function(t){return l.map(function(e){return t.concat(e)})}),y=d.dataModel,g=[];return u.forEach(function(e){var t=e.map(function(e){return qx(e)}).map(function(t){return y.dimensions.find(function(e){return yh(t,e.column)})}).map(function(e){return e.column}),n=ae.uniqWith(yh,t);if(n.length!==y.dimensions.length){var a=h.map(Xx).map(function(t){return y.calcValues.find(function(e){var a=e.divideBy.columns;return a.length===n.length&&(!!mh(e.value,t)&&n.every(function(t){return a.find(function(e){return yh(t,e)})}))})}).filter(function(e){return e});if(a.length===h.length){var i=[].concat(R()(e),R()(h)).map(function(e){return e.display}),o=[].concat(R()(t),R()(a)).map(function(e){return d.getDataWithin(e)}).map(function(e){return R()(e)}),s=e.map(function(e){return e.name}),r=e.map(function(e){return e.name}).sort(),l=h.map(function(e){return tl(e)});p.filter(function(e){if(s.length!==e.dimensions.length)return!1;var t=e.dimensions.map(function(e){return e.columnName}).sort();return!!ae.equals(r,t)&&!!ae.find(ae.equals(e.fieldIdentifier),l)}).forEach(function(n){var i=[];s.forEach(function(t,e){var a=n.dimensions.find(function(e){return e.columnName===t});i[e]=a.entry});for(var e=0;e<o[0].length;e++){for(var t=!0,a=0;a<s.length;a++)if(i[a]!==o[a][e]){t=!1;break}if(t)for(var r=0;r<l.length;r++)ae.equals(n.fieldIdentifier,l[r])&&(o[s.length+r][e]=n.value)}});var u={},c=o.map(function(e){return[]});o[0].forEach(function(e,t){var a=o.map(function(e){return e[t]});Ho.get(u,a)||(Ho.setWith(u,a,!0,Object),a.forEach(function(e,t){return c[t].push(e)}))}),BP.zipData(i,c).forEach(function(e){return g.push(e)})}else nu.error("Cannot find subtotal in aggregation results!")}}),g}({dps:c,dataModel:{dimensions:i.dimensions,calcValues:c.flatMap(function(e){return e.dataModel.calcValues})},getDataWithin:function(t){var e;return null===(e=c.find(function(e){return Array.isArray(e.getDataWithin(t))}))||void 0===e?void 0:e.getDataWithin(t)}},r,this.customData);0<l.matrix.values.length&&(l.matrix.values=l.matrix.values.concat(p))}}if(this.seriesTotalPivotModel&&_P(r,i)){var h=e[this.seriesTotalPivotModel.id],y=this.seriesTotalViewHelper,g=this.buildStandardData(h,y,t);l.seriesTotalData=g.data}return t.withWrapper?(s={},V()(s,H.DataViewType.Single,null),V()(s,H.DataViewType.Plain,null),V()(s,H.DataViewType.Matrix,null),V()(s,r.getDataViewType(),l),s):l}}},{key:"filterCustomData",value:function(){var e,t=this;return(null!==(e=this.customData)&&void 0!==e?e:[]).filter(function(e){return AP(t.helper,t.filters,e)&&AP(t.helper,t.model.filters,e)})}}],[{key:"getDataList",value:function(e){var t,a,n;return null!==(n=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:null===(a=null==e?void 0:e.matrix)||void 0===a?void 0:a.values)&&void 0!==n?n:[{"":null==e?void 0:e.single}]}}]),a}(HP),QP=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"resolveModel",value:function(){this.rowCountId="".concat(this.model.id,"-Count"),this.model._extendFields={dims:this.getAllColumns(),customAttributes:this.customAttributes};var e=Object.assign(Object.assign({},this.model),{id:this.rowCountId,countOnly:!0});return Ho.unset(e,"options"),{pivots:[],tables:[this.model,e],userParameters:this.userParameters}}},{key:"validate",value:function(){this.isValid=!1,this.model&&(this.isValid=!0),this.helper||(this.isValid=!1)}},{key:"buildData",value:function(t){for(var e=this.helper.getUsedDimensionItems().map(function(e){return t.getColumnByItem(e)}),a=t.getDataWithin(e),n=t.getDataProfile().rowCount,i=[],r=0,o=function(){var t=[];a.forEach(function(e){return t.push(e[r])}),i.push(t),r++};r<n;)o();return{columns:e,data:i}}},{key:"buildDataView",value:function(e){var t=e[this.model.id],a=e[this.rowCountId];if(t&&a)return Object.assign(Object.assign({},this.buildData(t)),{totalRowCount:a.getRowCount()})}}]),a}(HP);(LP=MP=MP||{}).multiDimensions="columns",LP.display="display",LP.pid="pid",LP.id="id",LP.hierarchy="hierarchy";var ZP=function(e){k()(s,e);var t=w()(s);function s(){return I()(this,s),t.apply(this,arguments)}return D()(s,[{key:"isDataViewPivotSettingHelper",value:function(){return!1}},{key:"getDataInMultiDimensions",value:function(t,e){for(var a=e.map(function(e){return t.getDataWithin(t.getColumnByItem(e))}),n=t.getDataProfile().rowCount,i=new Map,r=0;r<n;)a.map(function(e){return e[r]}).reduce(function(e,t){var a=e.get(t);return a||(a=new Map,e.set(t,a)),a},i),r++;var o=e.map(function(e){return t.getOrderList(t.getColumnByItem(e)).reduce(function(e,t,a){return e.set(t,a),e},new Map)});return{data:s.flatDict2Hie(i,o),profile:this.helper.getTinyProfile()}}},{key:"getDataInParentChild",value:function(e,t,a,n){var i,r=null===(i=this.helper.getOptions())||void 0===i?void 0:i.parameters,o=r.rootId?r.rootId.toString():"-1",s=o;a.dataType===H.DatasetFieldDataType.Number&&o&&(s=Number.parseFloat(o));var l=r.missMatchedOption?r.missMatchedOption:Zk.addToRoot,u={display:void 0,pid:e.getDataWithin(e.getColumnByItem(a)),id:e.getDataWithin(e.getColumnByItem(n))};u.display=t?e.getDataWithin(e.getValueByItem(t)):u.id;for(var c=new Map,d=e.getDataProfile().rowCount,p=0;p<d;p++){var h=u.id[p],y=u.pid[p],g=t?t.formatValue(u.display[p]):n.formatValue(u.display[p]);c.has(h)||c.set(h,{children:[],display:g,pid:y})}var m=[],f=[];c.forEach(function(e,t){e.pid===s?f.push(t):(m.length=0,c.has(e.pid)&&!function e(t,a){return!!m.includes(a)||!f.includes(a)&&(!!c.has(t.pid)&&(m.push(a),e(c.get(t.pid),t.pid)))}(e,t)?c.get(e.pid).children.push(t):l===Zk.addToRoot&&(f.push(t),e.pid=s))});var v=e.getOrderList(e.getColumnByItem(n)).reduce(function(e,t,a){return e.set(t,a),e},new Map);return{data:function i(e){var r=[];return e.sort(function(e,t){return v.get(e)-v.get(t)}).forEach(function(e){var t=c.get(e),a=t.display,n=i(t.children);r.push({value:a,children:n,id:e})}),r}(f),profile:this.helper.getTinyProfile()}}},{key:"getDataInHierarchy",value:function(e,u,c){for(var t,d=c.dataType===H.DatasetFieldDataType.String,a=null===(t=this.helper.getOptions())||void 0===t?void 0:t.parameters,p=a.separator?a.separator:"-",h=a.separateLength?a.separateLength:2,y=a.separateType?a.separateType:ew.separator,n={display:u?e.getDataWithin(e.getValueByItem(u)):void 0,hierarchy:e.getDataWithin(e.getColumnByItem(c))},g=new Map,i=e.getDataProfile().rowCount,r=0;r<i;r++){var o=n.hierarchy[r];g.has(o)||g.set(o,{children:[],display:u?n.display[r]:void 0,isAutoBuild:!1})}for(var m=[],s=function e(t){var a,n=t;if(d&&null!=t){var i=t;if(y===ew.separator){for(var r=i.length-1,o=i.lastIndexOf(p);0<o&&o===r;)r--,o=i.lastIndexOf(p,r);0<o&&(a=i.substr(0,o)),n=i.substr(o+1,r-o)}else if(y===ew.length){for(var s=0;s+h<i.length;)s+=h;0<s&&(a=i.substr(0,s),n=i.substr(s))}}var l=g.get(t);l.display||(l.display=u?"(".concat(u.formatValue(n),")"):"".concat(c.formatValue(n))),a?g.has(a)?g.get(a).children.push(t):(g.set(a,{children:[t],display:void 0,isAutoBuild:!0}),e(a)):m.push(t)},l=0;l<i;l++){s(n.hierarchy[l])}var f=e.getOrderList(e.getColumnByItem(c)).reduce(function(e,t,a){return e.set(t,a),e},new Map);return{data:function i(e){var t=R()(e);return t.sort(function(e,t){return f.get(e)-f.get(t)}),t.map(function(e){var t=g.get(e),a=t.display,n=t.isAutoBuild;return{value:a,children:i(t.children),id:e,isAutoBuild:n}})}(m),profile:this.helper.getTinyProfile()}}},{key:"buildDataView",value:function(e){var t=e[this.model.id];if(t){var a=this.helper.getFlattenedPivotSettingItems([MP.multiDimensions]);if(0<a.length)return this.getDataInMultiDimensions(t,a);var n=this.helper.getFlattenedPivotSettingItems([MP.display]),i=this.helper.getFlattenedPivotSettingItems([MP.pid]),r=this.helper.getFlattenedPivotSettingItems([MP.id]);if(0<i.length&&0<r.length)return this.getDataInParentChild(t,n[0],i[0],r[0]);var o=this.helper.getFlattenedPivotSettingItems([MP.hierarchy]);return 0<o.length?this.getDataInHierarchy(t,n[0],o[0]):void 0}}}]),s}(XP);ZP.flatDict2Hie=function(t,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return R()(t.keys()).sort(function(e,t){return a[n].get(e)-a[n].get(t)}).map(function(e){return{value:e,children:ZP.flatDict2Hie(t.get(e),a,n+1)}})};var $P=function(e){k()(s,e);var t=w()(s);function s(){var e;return I()(this,s),(e=t.apply(this,arguments)).leftRoleName="leftValues",e.rightRoleName="rightValues",e}return D()(s,[{key:"resolveModel",value:function(){var t=this,e=this.helper.getPivotSettingDesc();if(!this.affectSource||!e.pivotSetting[this.affectTarget])return this.leftModelId=this.model.id,this.rightModelId=this.model.id,Sh({pivot:this.model,userParameters:this.userParameters,customAttributes:this.customAttributes,datasetId:this.datasetId});function o(t){return n.some(function(e){return yh(t,e)})}var a=Bd.a.v1(),n=this.helper.getUsedDimensionItems(function(e){return e!==t.affectSource}).map(qx),i=ae.reduce(function(e,t){var a,n=t,i=null!==(a=null==t?void 0:t.divideBy.columns)&&void 0!==a?a:[],r=i.every(o);if((null==t?void 0:t.divideBy.type)===Yp.Group){if(!r)return e}else(null==t?void 0:t.divideBy.type)===Yp.Partition&&(r||(n=ae.assocPath(["divideBy","columns"],i.filter(o),t)));return e.push(n),e},[]),r=ae.evolve({id:function(){return a},dimensions:ae.filter(function(e){return o(e.column)}),calcValues:i,calcFilters:i},this.model);return this.affectTarget===this.leftRoleName?(this.leftModelId=this.model.id,this.rightModelId=a):(this.leftModelId=a,this.rightModelId=this.model.id),Sh({pivot:[this.model,r],customAttributes:this.customAttributes,datasetId:this.datasetId})}},{key:"getHelperExclude",value:function(e){var t=[e,this.affectTarget===e&&this.affectSource].filter(function(e){return e}),a=this.helper.getPivotSettingDesc(),n=Object.assign({},a.pivotSetting);return t.forEach(function(e){var t=n[e];t&&(n[e]=Object.assign(Object.assign({},t),{values:[]}))}),this.helper.clone(Object.assign(Object.assign({},a),{pivotSetting:n}))}},{key:"buildDataView",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:{},n=e[this.leftModelId],i=e[this.rightModelId];if(n&&i){var r=this.buildStandardData(n,this.getHelperExclude(this.rightRoleName),a),o=this.buildStandardData(i,this.getHelperExclude(this.leftRoleName),a);return Object.assign(Object.assign({},C()(b()(s.prototype),"buildDataView",this).call(this,e,a)),{affectValue:this.affectTarget,data:{leftValues:r,rightValues:o}})}}}]),s}(XP),e_=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getMaxValue",value:function(e){return gh(e,H.AggregationMethod.Max)}},{key:"getMinValue",value:function(e){return gh(e,H.AggregationMethod.Min)}},{key:"validate",value:function(){var e,t;this.isValid=!1,this.getFirstColumn()&&(this.isValid=!0),null!==(e=this.model.values)&&void 0!==e&&e.length&&(this.isValid=!1),null!==(t=this.model.calcValues)&&void 0!==t&&t.length&&(this.isValid=!1)}},{key:"resolveModel",value:function(){var e=this.getFirstColumn();return this.maxValue=this.getMaxValue(e),this.minValue=this.getMinValue(e),{pivots:[Th(this.model.id,[],[this.minValue,this.maxValue],[],this.model.filters,this.model.calcFilters)],tables:[],userParameters:this.userParameters}}},{key:"buildDataView",value:function(e){var t=e[this.model.id];if(t){var a=jP.createSingleDataViewBuilder(t,this.helper);return{min:a.getSingleValue(this.minValue),max:a.getSingleValue(this.maxValue),profile:a.getTinyProfile()}}}}]),a}(HP),t_=function(e){k()(l,e);var t=w()(l);function l(){var e;return I()(this,l),(e=t.apply(this,arguments)).models=[],e.userParametersArr=[],e.helpers=[],e}return D()(l,[{key:"validate",value:function(){this.isValid=!1,this.models.length&&(this.isValid=!0),this.helpers.length!==this.models.length&&(this.isValid=!1)}},{key:"resolveModel",value:function(){var a=this,e=this.models.map(function(e,t){return e&&C()(b()(l.prototype),"resolveModel",a).call(a,e,a.helpers[t])}).filter(function(e){return e});return Sh({pivot:e.flatMap(function(e){return e.pivots}),userParameters:this.userParametersArr.flatMap(function(e){return e}),customAttributes:this.customAttributes,datasetId:this.datasetId})}},{key:"buildDataView",value:function(r,o){var s=this;return this.models.map(function(e,t){if(e){var a=r[e.id],n=s.helpers[t];if(a&&n){var i=s.handleViewOptionsByHelper(n,o);return C()(b()(l.prototype),"buildDataView",s).call(s,r,i,e,n)}}})}},{key:"handleViewOptionsByHelper",value:function(e,t){return t.sortsMapping&&Object.keys(t.sortsMapping).length?Object.assign(Object.assign({},t),{sortsMapping:uA(t.sortsMapping,e)}):t}},{key:"filterCustomData",value:function(){var e,a=this;return(null!==(e=this.customData)&&void 0!==e?e:[]).filter(function(e){var t=a.models[0];return AP(a.helper,a.filters,e)&&AP(a.helper,t.filters,e)})}}]),l}(XP),a_=function(e,o,s,l){return new(s=s||ed.Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},n_=function(e){k()(a,e);var t=w()(a);function a(e){var n;return I()(this,a),(n=t.call(this))._reduxStore=null,n.data=null,n._datasetSchemaResource=null,n._aggResource=null,n._isReady=!1,n.affectOthers=!1,n.delayCalculatePlainDataPackages=[],n._silenced=!1,n._selectionInfo=null,n.listenToParameters=function(e){if(!e)return!1;var t=n.getUsedParameters();return 0<e.filter(function(e){return-1<t.indexOf(e)}).length||void 0},n.getUsedParametersInSlicerFilters=function(){return a.getUsedParametersInSlicerFiltersStatic(n.data)},n.getUsedParametersInFilters=function(){return a.getUsedParametersInFiltersStatic(n.data)},n.getUsedParametersInModelParametersSetting=function(){return a.getUsedParametersInModelParametersSettingStatic(n.data,n.getDatasetProfile(n.getDatasetId()))},n.getUsedParametersInRanks=function(){return a.getUsedParametersInRanksStatic(n.data)},n.getUsedParametersInSorts=function(){return a.getUsedParametersInSortsStatic(n.data)},n.updateParametersBySelection=function(){if(n._isReady){var e=Us.scenarioName(n.data);return n._parameterManager.setBindingParameterValueFromSelection(e,n._selectionInfo)}},n.getParametersBindingSelf=function(){var e=Us.scenarioName(n.data),t=n._reduxStore.getState(),a=Hs.parameters(t);return ae.compose(ae.map(ae.prop("name")),ae.filter(ae.pathEq(["binding","value","name"],e)))(a)},n.id=e,n}return D()(a,[{key:"ready",value:function(){this._isReady=!0}},{key:"isReady",value:function(){return this._isReady}},{key:"setReduxStore",value:function(e){this._reduxStore=e,this.sync()}},{key:"setAggResource",value:function(e){this._aggResource=e}},{key:"setDatasetSchemaResource",value:function(e){this._datasetSchemaResource=e}},{key:"setParameterManager",value:function(e){this._parameterManager=e}},{key:"setCacheManager",value:function(e){this._cacheManager=e}},{key:"fetchSchema",value:function(a){return a_(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",ed.Promise.reject("Empty Dataset ID"));case 2:if(Array.isArray(a))return e.abrupt("return",ed.Promise.all(a.map(function(e){return t.fetchSchema(e)})));e.next=4;break;case 4:return e.abrupt("return",this._datasetSchemaResource.fetch(a));case 5:case"end":return e.stop()}},e,this)}))}},{key:"sync",value:function(){if(this._reduxStore){var e=this._reduxStore.getState(),t=Hs.scenarioById(this.id,e);t?(this.data=t,this._scenarioName=this.data.options.scenarioName):this._isReady=!1}}},{key:"setSilence",value:function(e){this._silenced=e}},{key:"setSelectionInfo",value:function(e){this._selectionInfo=e}},{key:"getDatasetId",value:function(){return Us.datasetId(this.data)}},{key:"getDatasetSchema",value:function(e){return d$.getDatasetSchema(e)}},{key:"getContainerId",value:function(){return Us.containerId(this.data)}},{key:"getTabId",value:function(){return Us.tabId(this.data)}},{key:"isSlicer",value:function(){return!1}},{key:"isEmbedded",value:function(){return!1}},{key:"isInSameScope",value:function(e){var t=this.getContainerId();if(!t)return!0;var a=this.state,n=Hs.scenarioById(t,a);return!n||(d$.definitionManager.getDefinition(n).getPropertyValue("filterScope",n)===Rr||e.getContainerId()===t&&e.getTabId()===this.getTabId())}},{key:"isLinkedTo",value:function(e){return!(Us.unAssociatedScenarios(this.data)||[]).includes(e.id)}},{key:"isAffectCrossFilterByScenario",value:function(e){if(!(Hs.crossFilterMode(this.state)!==H.CrossFilterMode.Off)&&!e.isSlicer())return!1;var t=ae.path([this.id,"mapping"],Us.interactionSetting(e.data)),a=e.getDatasetId()===this.getDatasetId();if(!(t&&t.length)&&!a)return!1;var n=Us.enableCrossFilter(e.data)&&Us.enableCrossFilter(this.data),i=e.isSlicer();return!(!n&&!i)&&e.isAffectToScenario(this)}},{key:"isUsingSameDataset",value:function(e){return this.getDatasetId()===e.getDatasetId()}},{key:"isAffectToScenario",value:function(e){return this.id!==e.id&&(!!this.isInSameScope(e)&&this.isLinkedTo(e))}},{key:"getAffectDatasetIds",value:function(e){return this.isAffectCrossFilterByScenario(e)?[this.getDatasetId()].filter(function(e){return e}):[]}},{key:"isAffectedByScenario",value:function(e){return!Us.isUnassociated(e.data,this.id)}},{key:"isAffectOthers",value:function(){return this.affectOthers}},{key:"getDatasetProfile",value:function(e){return Hs.profileByDatasetId(e,this.state)}},{key:"getPivotSettingHelper",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.data,n=Hs.languageResource(this.state),i=this.getDatasetSchema(e),r=Hs.profileByDatasetId(e,this.state),o=ux(a);return uC.create(a.pivot.pivotSetting,i,r,o,n)}},{key:"getDataViewHelper",value:function(e,t){var a=Hs.languageResource(this.state),n=this.getDatasetSchema(e),i=Hs.profileByDatasetId(e,this.state),r=ux(this.data);return cC.create(t,n,i,r,a)}},{key:"getSimplePivotSettings",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.data,n=this.getPivotSettingHelper(e,a).getPivotSetting({withRawItem:!0,withoutInvalid:!0});return d$.definitionManager.getDefinition(a).getSimplePivotSettings(n)}},{key:"getGlobalFilters",value:function(e,t,a){var r,n=1<arguments.length&&void 0!==t?t:this.getDatasetId(),i=2<arguments.length?a:void 0,o=this._reduxStore.getState(),s=(r=i,function(e,t,a){var n=a?Gb(a,e).map(function(e){var t=e.id;return e.scenarioType===H.ScenarioType.Slicer&&e.options.property.selectionMode===Yn?Object.assign(Object.assign({},e.slicerSetting),{isSingleSelectionMode:!0,slicerId:t}):Object.assign(Object.assign({},e.slicerSetting),{slicerId:t})}):[],i=BA(iA(r)(n,t));if(i.length)return dh(H.LogicalType.And,i)}(e,this.getPivotSettingHelper(n,e),o));return ch(s,d$.embeddedDashboardManager.getOuterGlobalFilters())}},{key:"getPivotModel",value:function(e,t){return eA(e.id,hA(e,t),t)}},{key:"getRawModel",value:function(e,t){return function(e,t,a,n){var i,r=t.globalFilters,o=t.pivotFilters,s=n.getUsedDimensionItems(),l=(null!=r?r:[]).concat(o),u=BA(l),c=Object(Ho.uniqBy)(s,function(e){return e.name}).map(function(e){return fh(qx(e))}),d=[],p=[],h=[],y=null!==(i=Us.uiSortInfo(a))&&void 0!==i?i:{},g=Object.keys(y);c.sort(function(e,t){return g.indexOf(e.column.attributeId)-g.indexOf(t.column.attributeId)}),c.forEach(function(e){var t=y[e.column.attributeId];if(t){var a=t.sortOrder,n=Ah(HA.order[a]);n&&(e.orderBy=n),d.push(e)}});var m=t.pivotSortInfo,f=Object.keys(m);c.sort(function(e,t){return f.indexOf(e.column.attributeId)-f.indexOf(t.column.attributeId)}),c.forEach(function(e){if(!y[e.column.attributeId]){var t=m[e.column.attributeId];if(t){var a=Qx(t);a&&(e.orderBy=a),p.push(e)}}}),c.forEach(function(e){e.orderBy||h.push(e)});var v={id:e,dimensions:[].concat(d,p,h),options:{index:a.pageNumber||0,capacity:a.options.property.pageCapacity||200}};return u.length&&(v.filters=dh(H.LogicalType.And,u)),v}(e.id,hA(e,t),e,t)}},{key:"getUserParameters",value:function(e,t){return pA(e,t)}},{key:"getUsedDatasetIds",value:function(){this.sync();var e=this.getDatasetId();return e?[e]:[]}},{key:"updateSliceFilters",value:function(){}},{key:"getExportData",value:function(){return null}},{key:"destroy",value:function(){this._isReady=!1,this.removeAllListeners(),this._reduxStore=null,this.data=null,this._datasetSchemaResource=null,this._aggResource=null,this.delayCalculatePlainDataPackages=null,this._dataCache=null,this._parameterManager=null,this._selectionInfo=null}},{key:"emitRefreshEvent",value:function(e,t,a,n){this.emit(H.ScenarioEvent.RefreshData,e,t,a,n),this.emit(H.ScenarioEvent.AggregationReady,a)}},{key:"emitRefreshSlicerFilterEvent",value:function(e){this.emit(H.ScenarioEvent.RefreshSlicerFilter,e)}},{key:"dispatchEvent",value:function(e){switch(e){case H.VisualEventType.RenderFinish:case H.VisualEventType.RenderError:this.emit(H.ScenarioEvent.Rendered)}}},{key:"dispatchActionEvent",value:function(e,t){this.emit(H.ScenarioEvent.DispatchActionEvent,e,t)}},{key:"getDataCache",value:function(){return this._dataCache}},{key:"setDataCache",value:function(e){this._dataCache=e}},{key:"cleanDataCache",value:function(){this._dataCache=null}},{key:"getFilter",value:function(){if(this.isSlicer())return Wb(this.data);var e=Us.crossFilterSetting(this.data);return e?Object.assign(Object.assign({},e),{isCrossFilter:!0}):null}},{key:"getSelectionInfo",value:function(){return{scenarioName:this._scenarioName,selectionInfo:this._selectionInfo}}},{key:"getUsedParameters",value:function(){var e=[];return e.push.apply(e,R()(this.getUsedParametersInSlicerFilters())),e.push.apply(e,R()(this.getUsedParametersInFilters())),e.push.apply(e,R()(this.getUsedParametersInRanks())),e.push.apply(e,R()(this.getUsedParametersInSorts())),e.push.apply(e,R()(this.getUsedParametersInModelParametersSetting())),e}},{key:"validateVariable",value:function(e,t){var a=e.filter(function(e){return e.variableType===t.variableType});if(0===a.length)return!1;switch(t.variableType){case H.DashboardVariables.Slicer:case H.DashboardVariables.Slicers:return a.filter(function(e){return(e.variableType===H.DashboardVariables.Slicer||e.variableType===H.DashboardVariables.Slicers)&&e.scenarioId}).map(function(e){return e.scenarioId}).includes(t.scenarioId)}return!0}},{key:"shouldRefreshOnVariableUpdate",value:function(e){var t=this.collectVariables();return 0!==t.length&&this.validateVariable(t,e)}},{key:"buildRes",value:function(e){return e}},{key:"collectVariables",value:function(e){return[]}},{key:"refreshVariable",value:function(){}},{key:"tryRefreshVariable",value:function(e){this._isReady&&this.shouldRefreshOnVariableUpdate(e)&&this.refreshVariable(e)}},{key:"tryRepaint",value:function(e){var t,a=e.familyName;this.sync();var i,r,o,n=this.data.options.property,s=this._reduxStore.getState(),l=Hs.dashboard(s),u=Hs.docTheme(s),c=ks.contentTextStyle(l);(r=a,o=!(i="fontFamily"),function t(e){if(!o)for(var a in e)if(Object.hasOwnProperty.call(e,a)){var n=e[a];if(Array.isArray(n)&&n.map(function(e){return t(e)}),"object"===E()(n))t(n);else if(a===i&&n===r){o=!0;break}}}(n),o||(null==c?void 0:c.fontFamily)===a||(null===(t=null==u?void 0:u.textStyle)||void 0===t?void 0:t.minorFontFamily)===a)&&this.emit(H.ScenarioEvent.Repaint)}},{key:"getParameterDependencies",value:function(t,o){var s=this._reduxStore.getState();return Hs.parameters(s).filter(function(e){return t.includes(e.name)}).map(function(e){var t,a,n,i=null===(a=null===(t=null==e?void 0:e.binding)||void 0===t?void 0:t.value)||void 0===a?void 0:a.name;if(!i)return null;var r=null===(n=Hs.scenarioByName(i,s))||void 0===n?void 0:n.id;return r||Us.scenarioName(o)!==i||(r=null==o?void 0:o.id),r}).filter(function(e){return e})}},{key:"getVariableDependencies",value:function(e){return[]}},{key:"getCrossFilters",value:function(e){this.sync();var t,a=new Set,n=rI()(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.sync(),i.id!==this.id)this.isAffectCrossFilterByScenario(i)&&a.add(i.id)}}catch(e){n.e(e)}finally{n.f()}return Array.from(a)}},{key:"getActualDependencies",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this.sync();var a=this.getUsedParameters();return{parameters:this.getParameterDependencies(a,t),variables:this.getVariableDependencies(t),usedParameters:a,usedVariables:[]}}},{key:"getDependenciesList",value:function(e){var t=0<arguments.length&&void 0!==e?e:null,a=this.getActualDependencies(t),n=a.usedParameters,i=a.usedVariables,r=a.parameters,o=a.variables;return{usedParameters:n,usedVariables:i,dependencies:Array.from(new Set(r.concat(o)))}}},{key:"getDependencies",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:null,n=this.getDependenciesList(null==a?void 0:a.data),i=n.dependencies;return{usedParameters:n.usedParameters,usedVariables:n.usedVariables,dependencies:i,crossFilter:this.getCrossFilters(e)}}},{key:"getData",value:function(){return this.data}},{key:"setContext",value:function(e){this.context=Object.assign({},this.context,e)}},{key:"state",get:function(){return this._reduxStore.getState()}}],[{key:"getUsedParametersInSlicerFiltersStatic",value:function(e){var t,a=[],n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.sliceFilters;return n&&n.forEach(function(e){!function(e){if(e){var t=Fl(e);t.isParameterValue&&a.push(t.value)}}(e.values)}),a}},{key:"getUsedParametersInFiltersStatic",value:function(e){var t,a=[],n=null===(t=null==e?void 0:e.pivot)||void 0===t?void 0:t.pivotFilters;return n&&n.forEach(function(e){a.push.apply(a,R()(zA(e)))}),a}},{key:"getUsedParametersInModelParametersSettingStatic",value:function(e,t){var a=Us.pivotModelParameters(e)||[],n=(null==t?void 0:t.modelParameters)||[];return a.concat(n.filter(function(t){return!a.find(function(e){return e.name===t.name})})).filter(function(e){return e.valueType===H.modelParameterType.DashboardParameter}).map(function(e){var t;return null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.name})}}]),a}(f.a.EventEmitter);n_.getUsedParametersInRanksStatic=function(e){var t;return null!==(t=e.pivot)&&void 0!==t&&t.pivotRanks?YA(e.pivot.pivotRanks):[]},n_.getUsedParametersInSortsStatic=function(e){var t;return null!==(t=e.pivot)&&void 0!==t&&t.pivotSortInfo?jA(e.pivot.pivotSortInfo):[]};function i_(e){return Object.assign(Object.assign({},e),{fontWeight:function(e){switch(e){case H.FontWeight.Light:return"100";case H.FontWeight.Bold:return __.FontWeight.Bold;case H.FontWeight.Heavy:return"900";default:return __.FontWeight.Normal}}(null==e?void 0:e.fontWeight),fontStyle:function(e){switch(e){case yr:return __.FontStyle.Normal;case gr:return __.FontStyle.Italic;default:return __.FontStyle.Normal}}(null==e?void 0:e.fontStyle)})}function r_(e,t,a){var n,i=2<arguments.length&&void 0!==a?a:ji,r=e.value,o=e.comparisonValue,s=t.rangeDots,l=t.rangeDotType===zi;n=i===ji?s.map(function(e){return l?e*o/100:e}):s.map(function(e){return l?e/100:e/Math.abs(o)});var u=i===ji?r:r/Math.abs(o),c=ae.sort(function(e,t){return e-t},n);return u<c[0]?c[0]=u:u>ae.last(c)&&(c[c.length-1]=u),c}function o_(u,e){function c(){for(var e=0;e<r.length-1;e++)d.push(0)}function t(e,t){var a=1<arguments.length&&void 0!==t&&t,n=ae.length(e),i=a?function(e,t){return t-e}:function(e,t){return e-t},r=ae.sort(i,e),o=0<=u.comparisonValue&&a||u.comparisonValue<0&&!a;o&&c();for(var s=1;s<n;s++){var l=1===s?r[s]:r[s]-r[s-1];d.push(l)}o||c()}function a(e,t){for(;e.length<t;)e.push(0)}var d=[],n=e.rangeDotsAndColors,i=e.gaugeAxisType,r=n.rangeDots,o=r_(u,n,i),s=o[0],l=ae.last(o),p=[],h=[];return o.forEach(function(e){0<=e?h.push(e):p.push(e)}),a(p,r.length),a(h,r.length),t(p,!0),t(h,!1),{ranges:d,max:l,min:s,realDots:o}}function s_(e){return e&&e.replace(O_,"\\$1")}function l_(e,t){var a=t.profile;return a[e]&&a[e].options&&a[e].options.displayUnit||H.DisplayUnit.Auto}function u_(e,t,a){if(a&&a[e]){var n=a[e].values.reduce(function(e,t){return Jr.isGroupingItem(t)&&!Jr.isNumber(t)||e.push(t.display),e},[]),i=[],r=Array.isArray(t)?t:t[e]&&t[e].data;return r&&r.forEach(function(e){for(var t=0;t<n.length;t++){var a=e[n[t]];"number"==typeof a&&i.push(a)}}),Au(i)}return H.DisplayUnit.None}function c_(e,t,a,n){var i=e,r=t===H.DisplayUnit.Auto?u_(n,a.data,a.profile):t;return t===H.DisplayUnit.Auto&&r!==H.DisplayUnit.None&&"General"===e&&(i="0.0"),[i,r].join(zo)}function d_(e){return Jr.isDate(e)&&Jr.isGroupingItem(e)}function p_(e,t){if((t===Aa||t===Pa)&&[H.ChartType.StackColumn,H.ChartType.PercentStackColumn,H.ChartType.StackArea,H.ChartType.PercentStackArea].includes(e))return __.SortOrder.Reversed}function h_(e){switch(e){case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Rose:case H.ChartType.RadialStackedBar:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.RangeBar:return!0}return!1}function y_(e){switch(e){case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.RangeBar:return!0;default:return!1}}function g_(e,t){var a,n,i=t.plotConfig,r=t.hoverColor,o=e.chartType;switch(void 0!==e.lineStyle&&(i.lineAspect=e.lineStyle,e.lineStyle===Ta&&(i.lineAspect="StepCenter")),i.swapAxes=h_(o),void 0!==e.showDots&&(i.symbols=e.showDots,e.showDots||(n=e.conditionalFormat)&&n.some(function(e){var t;return null!==(null==e||null===(t=e.extendsStyle)||void 0===t?void 0:t.symbolStyle.symbolSize)})&&(i.symbols=!0,i.style.symbolSize=0)),void 0!==e.showNull&&(i.showNulls=e.showNull),o){case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.Rose:case H.ChartType.Sunburst:case H.ChartType.PieinPie:case H.ChartType.BarInPolar:case H.ChartType.StackBarInPolar:case H.ChartType.RadialStackedBar:i.innerRadius=(e.innerRadius||0)/100,i.style=e.style,i.startAngle=e.startAngle,i.sweep=e.sweep,i.axisMode="Radial",i.gradientFillDirection=__.GradientFillDirection.InnerRadius;break;case H.ChartType.Radar:case H.ChartType.FilledRadar:i.axisMode="Polygonal",i.startAngle=0;break;case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:i.axisMode=e.axisMode;break;case H.ChartType.Funnel:break;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:e.reverseColor&&(i.altStyle={fill:e.reverseColor,stroke:e.reverseColor})}r&&(i.trellis.hoverStyle={color:r}),i.trellis.padding=e.trellisPadding,i.trellis.style.stroke=e.trellisBorderColor,i.trellis.textStyle=i_(e.trellisTextStyle),[H.ChartType.Pie,H.ChartType.Donut,H.ChartType.Sunburst].includes(o)&&(i.trellis.includeAxesInCells=!0,i.trellis.plugins=[{arguments:{minRadius:.5},type:"TrellisCellsLayout",name:"TrellisRadial"}]),i.trackers=[],e.showPointTrackingCrossX&&i.trackers.push({type:"CrossX",stroke:e.pointTrackingCrossXColor,strokeWidth:e.pointTrackingCrossXWidth,strokeDasharray:e.pointTrackingCrossXType===Fn.Solid?"1,0":"5,3"}),e.showPointTrackingCrossY&&i.trackers.push({type:"CrossY",stroke:e.pointTrackingCrossYColor,strokeWidth:e.pointTrackingCrossYWidth,strokeDasharray:e.pointTrackingCrossYType===Fn.Solid?"1,0":"5,3"}),i.rules=[],null!==(a=i.plugins)&&void 0!==a&&a.length||(i.plugins=[]),e.chartType!==H.ChartType.RangeBar&&e.chartType!==H.ChartType.RangeColumn||i.plugins.push({type:"ViewLayout",name:"ShowZeroValueDataPointViewLayout"}),e.chartType===H.ChartType.Funnel&&i.plugins.push({type:"PlotLayout",name:"FunnelReverse"})}function m_(e){switch(e){case fa:return"Hide";case va:return"Show";default:return"Smart"}}function f_(e){switch(e){case H.DataLabelPlacement.Far:return"Far";case H.DataLabelPlacement.Near:return"Near";default:return"Center"}}function v_(e,t){switch(t){case H.DataLabelPlacement.Far:return y_(e)?"Near":"Far";case H.DataLabelPlacement.Near:return y_(e)?"Far":"Near";default:return"Center"}}function b_(e){switch(e){case H.DataLabelAngle.ParallelToY:return"ParallelToY";case H.DataLabelAngle.PerpendicularToY:return"PerpendicularToY";default:return"Horizontal"}}function C_(e,t,a){if(null!=t||null!=a)return"".concat(y_(e)?-t:t||0,",").concat(a||0)}function T_(e){var t=e.dataLabelShape,a=e.dataLabelShapeXCenter,n=e.dataLabelShapeYCenter,i=e.dataLabelShapeXScale,r=e.dataLabelShapeYScale,o=e.dataLabelShapeImageId;if(t&&null!=o)return{content:o,shapeScale:[parseFloat(i),parseFloat(r)],labelCenter:[a/100,n/100]}}function S_(e){return m_(e.dataLabelDisplayMode)}var D_=function(e,o,s,l){return new(s=s||ed.Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},k_=function(e){k()(n,e);var a=w()(n);function n(){var t;return I()(this,n),(t=a.apply(this,arguments)).dataViews={},t.renderEvent=new FP,t.loadingCounter=0,t.emptyHelper=uC.create(),t.onRequestError=function(e){t.renderEvent.end(),t.emit(H.ScenarioEvent.Error,e)},t}return D()(n,[{key:"emitEmptyRefreshData",value:function(e){var t=this;ed.Promise.delay(1).then(function(){t.emitRefreshEvent(null,t.emptyHelper,t.id,e)})}},{key:"cancel",value:function(e){null!=e&&e.cancel()}},{key:"cancelAll",value:function(){var t=this;Object.values(this.dataViews).forEach(function(e){return t.cancel(e)})}},{key:"addDataView",value:function(e,t){var a=this.dataViews[e];a&&a.cancel(),t.onError=this.onRequestError,t.resource=this._aggResource,this.dataViews[e]=t}},{key:"preUpdate",value:function(){this.notifyLoadingState(!0)}},{key:"postUpdate",value:function(e){e&&(this.dataViews[e]=null),this.notifyLoadingState(!1)}},{key:"getDataViewByKey",value:function(e){return this.dataViews[e]}},{key:"notifyRefreshData",value:function(e,t,a){var n=null!=t?t:this.getPivotSettingHelper(this.getDatasetId());this.emitRefreshEvent(e,n,this.id,a)}},{key:"fetchDataViewAsync",value:function(n,i,r,e){var o=3<arguments.length&&void 0!==e?e:{};return D_(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getDataViewByKey(n)){e.next=3;break}return e.abrupt("return",null);case 3:return this.preUpdate(),e.next=6,t.getDataViewAsync(i,r,o);case 6:return(a=e.sent)&&this.setDataCache(a),this.postUpdate(n),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}))}},{key:"shouldRefreshData",value:function(e){return!(null==e||!e.length)}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getUsedDatasetIds();this.shouldRefreshData(a)?this.fetchSchema(a).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)}):this.emitEmptyRefreshData(e)}}},{key:"notifyLoadingState",value:function(e){e?(this.loadingCounter++,1!==this.loadingCounter||this._silenced||this.emit(H.ScenarioEvent.LoadingStateChange,!0)):(0<this.loadingCounter&&this.loadingCounter--,0!==this.loadingCounter||this._silenced||this.emit(H.ScenarioEvent.LoadingStateChange,!1))}},{key:"destroy",value:function(){this.cancelAll(),C()(b()(n.prototype),"destroy",this).call(this)}}]),n}(n_),w_=function(e,o,s,l){return new(s=s||ed.Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},x_=function(e){k()(a,e);var t=w()(a);function a(){var n;return I()(this,a),(n=t.apply(this,arguments)).loadingCounter=0,n.dataView=new HP,n.emptyHelper=uC.create({}),n.onRequestError=function(e){n.emit(H.ScenarioEvent.Error,e)},n.getExtraInfo=function(){var e=[],t=[],a=n.dataView.helper;return a&&(e.push.apply(e,R()(a.getUsedDimensionItems().map(function(e){return e.display}))),t.push.apply(t,R()(a.getHiddenDataRolesItems().map(function(e){return e.display})))),{fullFields:e,hiddenFields:t,needSort:!1}},n}return D()(a,[{key:"emitEmptyRefreshData",value:function(e,t){var a=this;ed.Promise.delay(1).then(function(){a.emitRefreshEvent(null,null!=e?e:a.emptyHelper,a.id,t)})}},{key:"notifyRefreshData",value:function(e,t,a){if(!e)return this.emitEmptyRefreshData(t,a);var n=null!=t?t:this.getPivotSettingHelper(this.getDatasetId());this.emitRefreshEvent(e,n,this.id,a)}},{key:"notifyRefreshMockDataAsync",value:function(a,n,i){return w_(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed.Promise.delay(1);case 2:a||this.emitRefreshEvent(null,null!=n?n:this.emptyHelper,this.id,i),t=null!=n?n:this.getPivotSettingHelper(this.getDatasetId()),this.emitRefreshEvent(a,t,this.id,i);case 5:case"end":return e.stop()}},e,this)}))}},{key:"notifyLoadingState",value:function(e){e?(this.loadingCounter++,1!==this.loadingCounter||this._silenced||this.emit(H.ScenarioEvent.LoadingStateChange,!0)):(0<this.loadingCounter&&this.loadingCounter--,0!==this.loadingCounter||this._silenced||this.emit(H.ScenarioEvent.LoadingStateChange,!1))}},{key:"cancel",value:function(){this.dataView.cancel()}},{key:"preUpdate",value:function(){this.dataView.onError=this.onRequestError,this.notifyLoadingState(!0)}},{key:"postUpdate",value:function(){this.notifyLoadingState(!1)}},{key:"setAggResource",value:function(e){C()(b()(a.prototype),"setAggResource",this).call(this,e),this.dataView.resource=e}},{key:"getSimplePivotSetting",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:this.data;return this.getSimplePivotSettings(e,a)[0]}},{key:"fetchAggregatedData",value:function(a,e){var n=1<arguments.length&&void 0!==e?e:{};return w_(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.getSimplePivotSetting(a)){e.next=7;break}return this.emitEmptyRefreshData(),this.cleanDataCache(),e.abrupt("return");case 7:return this.sync(),this.preUpdate(),e.next=11,this.dataView.getDataViewAsync(a,n.sessionId);case 11:(t=e.sent)&&this.setDataCache(t),this.postUpdate(),this.notifyRefreshData(t);case 15:case"end":return e.stop()}},e,this)}))}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();a?(this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})):this.emitEmptyRefreshData()}}},{key:"getExportData",value:function(){var a=this,e=this.getDataCache();return Array.isArray(e)||(e=[e]),e.reduce(function(e,t){return t&&e.push(Object.assign({data:XP.getDataList(t),title:t.options.display,profile:t.profile,sort:t.sort},a.getExtraInfo())),e},[])}},{key:"destroy",value:function(){this.cancel(),C()(b()(a.prototype),"destroy",this).call(this)}}]),a}(n_),A_=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},I_=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).colorAssignmentConfigMapping={},e.dataView=new t_,e}return D()(a,[{key:"fetchAggregatedData",value:function(o,e){var s=1<arguments.length&&void 0!==e?e:{};return A_(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.sync(),t=this.getSimplePivotSettings(o),a=this.getPivotSettingHelper(this.getDatasetId(),this.data),t.length&&a.isReady()){e.next=9;break}return this.notifyRefreshData(),this.cleanDataCache(),e.abrupt("return");case 9:return this.dataView.helpers=[],this.dataView.models=[],this.dataView.userParametersArr=[],this.dataView.filters=this.getGlobalFilters(this.data),this.dataView.customData=Us.customData(this.data),this.dataView.customAttributes=a.getCustomAttributes(),this.dataView.datasetId=o,t.forEach(function(e,t){if(e){var a=r.getDataViewHelper(r.getDatasetId(),e);a.hasSetting()?(r.dataView.helpers.push(a),r.dataView.models.push(r.getPivotModel(Object.assign(Object.assign({},r.data),{id:"".concat(r.data.id,"-").concat(t),originalId:r.data.id}),a)),r.dataView.userParametersArr.push(r.getUserParameters(Object.assign(Object.assign({},r.data),{id:"".concat(r.data.id,"-").concat(t),originalId:r.data.id}),a))):(r.dataView.helpers.push(null),r.dataView.models.push(null))}else r.dataView.helpers.push(null),r.dataView.models.push(null)}),this.preUpdate(),e.next=20,this.dataView.getDataViewAsync(o,s.sessionId,this.getDataViewOptions());case 20:(n=e.sent)&&(i=n,this.getDataViewOptions().withWrapper&&(i=n.filter(function(e){return e}).map(function(e){return Object.values(e)}).flat().filter(function(e){return e})),this.setDataCache(i)),this.postUpdate(),n&&this.notifyRefreshData(this.mergeResults(n),null,s);case 24:case"end":return e.stop()}},e,this)}))}},{key:"getDataViewOptions",value:function(){return{tinyProfile:!0,withWrapper:!0}}},{key:"mergeResults",value:function(e){return e}},{key:"setColorAssignmentConfigMapping",value:function(e){this.colorAssignmentConfigMapping=e}},{key:"getColorAssignmentColumnInfo",value:function(e){var t=this.colorAssignmentConfigMapping,a=this.getPivotSettingHelper(this.getDatasetId(),this.data);if(!t||!a)return null;var n,i=a.getFlattenedPivotSettingItems(),r=t[e];return r&&(n={type:r.type,columns:r.columns.map(function(e){return e.id}),columnsInfo:r.columns.map(function(t){var e=i.find(function(e){return ae.equals(tl(e),t.id)});return{columnIdentifier:t.id,display:null==e?void 0:e.display}})}),n}},{key:"getColorAssignmentDataPointsInfo",value:function(e){var t,a=this.colorAssignmentConfigMapping[e];return a&&(t=a.type===H.ColorRelationType.MeasureName?{dataPoints:a.columns.map(function(e){return e.id})}:{dataPoints:a.values,format:1===a.columns.length?a.columns[0].format:void 0}),t}},{key:"isAffectOthers",value:function(){this.sync();var e=this.data.options.sliceFilters;return e&&0<e.length}},{key:"isSlicer",value:function(){return!!this.data.options.sliceFilters}}]),a}(x_),P_=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e)).data=t,a}return D()(i,[{key:"refreshData",value:function(e){this.sync(null==e?void 0:e.data),C()(b()(i.prototype),"refreshData",this).call(this,e)}},{key:"sync",value:function(e){e&&(this.data=e)}},{key:"notifyRefreshData",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:{};C()(b()(i.prototype),"notifyRefreshData",this).call(this,e,t,Object.assign({data:this.data},n))}}]),i}(I_),__=a(13),M_="Gauge".concat(zo,"RangeKey"),L_="Gauge".concat(zo,"RangeValue"),R_="Indicator".concat(zo,"RangeKey"),V_="Indicator".concat(zo,"RangeValue"),N_="CustomValue".concat(zo,"Key"),E_="CustomComparisonValue".concat(zo,"Key"),F_="Gauge".concat(zo,"Calibration_"),O_=/([:, '(!%.&^*)}\\+\-"/=;{[<>\]])/g,H_=/(\\[:, '(!%.&^*)}\\+\-"/=;{[<>\]])/g,B_=0,U_=-90,z_=-45;function K_(e){if(e.length<2)return e[0]&&e[0].format;var t=e.map(function(e){return e.format}),a=Bo.a.uniq(t);return 1===a.length?a[0]:"General"}function j_(e,t,a,n,i,r,o){var s,l=5<arguments.length&&void 0!==r?r:null,u=6<arguments.length&&void 0!==o?o:null;switch(i){case 8:if(0<t.categorys.length)if(null!=l){var c="".concat(t.categorys[l-1].format);u&&(c=xu(F()({format:c},u))),s="{".concat(s_(t.categorys[l-1].display),":").concat(c,"}")}else{s=t.categorys.map(function(e){var t=e.format;return u&&(t=xu(F()({format:t},u))),"{".concat(s_(e.display),":").concat(t,"}")}).join(",")}break;case 4:if(0<t.series.length)if("__rightValue__"===n){if(s="{__series2__.value}",u){var d=xu(F()({format:"General"},u));s="{__series2__.value:".concat(d,"}")}}else if(s="{__series__.value}",u){var p=xu(F()({format:"General"},u));s="{__series__.value:".concat(p,"}")}break;case 2:s=e===H.ChartType.Bubble?"{sizeField.value:".concat(a,"}"):"{valueField.value:".concat(a,"}");break;case 1:s=e===H.ChartType.Sunburst&&1<t.categorys.length?"{PercentageLevel.value}":"{PercentageCategory.value}"}return s}function W_(e,t){var a,n,i,r=0;return e.dataLabelCategory&&(a=t,![H.ChartType.Bubble,H.ChartType.Donut,H.ChartType.Funnel,H.ChartType.Pie,H.ChartType.Rose,H.ChartType.DisaggregateScatter].includes(a))&&(r|=8),e.dataLabelSeries&&(n=t,![H.ChartType.Sunburst,H.ChartType.TreeMap].includes(n))&&(r|=4),e.dataLabelValue&&(r|=2),e.dataLabelPercentage&&(i=t,[H.ChartType.PercentStackArea,H.ChartType.PercentStackBar,H.ChartType.PercentStackColumn,H.ChartType.Donut,H.ChartType.Funnel,H.ChartType.Pie,H.ChartType.RadialStackedBar,H.ChartType.Rose,H.ChartType.Sunburst].includes(i))&&(r|=1),r}function G_(e,t){var a=1<arguments.length&&void 0!==t&&t,n="values";return e===H.ChartType.Composite?n=a?"rightValues":"leftValues":[H.ChartType.RangeColumn,H.ChartType.RangeBar,H.ChartType.RangeArea].includes(e)&&(n="upper"),n}function Y_(e,t,a,n,i){var r=4<arguments.length&&void 0!==i&&i,o=function(e,t,a,n){var i=l_(G_(t,3<arguments.length&&void 0!==n&&n),e)||H.DisplayUnit.Auto;return a!==H.DisplayUnit.Auto?a:i}(e,a,n,r),s=function(e,t,a,n){var i;switch(t){case H.ChartType.Bubble:i=e.profile.values.values.length&&e.profile.values.values[0].format;break;case H.ChartType.RangeArea:case H.ChartType.RangeBar:case H.ChartType.RangeColumn:i=e.profile.upper.values.length&&e.profile.upper.values[0].format;break;default:i=K_(n?a.rightValues:a.leftValues)}return i}(e,a,t,r);return c_(s,o,e,G_(a,r))}function q_(e,t,a,n,i,r,o){var s=5<arguments.length&&void 0!==r&&r,l=6<arguments.length&&void 0!==o?o:null,u=Y_(a,n,t,e.dataLabelDisplayUnit,s),c="",d={nullString:e.nullItemsString,emptyString:e.emptyItemsString},p=W_(e,t),h=2&p,y=4&p,g=8&p,m=j_(t,n,u,i,1&p),f=j_(t,n,u,i,h),v=j_(t,n,u,i,y,null,d),b=j_(t,n,u,i,g,l,d),C=[m,f,v,b].filter(function(e){return e});if(1===C.length)c=C[0];else if(3===p)c="".concat(f,"(").concat(m,")");else{var T=[];b&&T.push(b),v&&T.push(v);var S=[];f&&S.push(f),m&&S.push(m),c=0===S.length?"".concat(T.join(",")):0===T.length?"".concat(f,"(").concat(m,")"):"".concat(T.join(","),"(").concat(S.join("/"),")")}return c}function J_(a,e,t,n,i){var r,o,s=a.chartType!==H.ChartType.TreeMap;e.encodings.text=(r=e.config._valueField,o=[],r?o.push({field:r}):t.values.forEach(function(e){o.push({field:s_(e.display)})}),"__rightValue__"===r?o.push({field:"__series2__"}):o.push({field:"__series__"}),t.categorys.forEach(function(e){o.push({field:s_(e.display)})}),o);var l={template:""};if(a.dataLabel){var u=S_(a),c=function(){if(s)switch(a.dataLabelPosition){case ba:return"Outside";case Ca:return"Inside";default:return"Outside"}}(),d=q_(a,a.scenarioChartType,n,t,e.config._valueField,i);if(l={position:c,xPlacement:s?v_(a.chartType,a.dataLabelXPlacement):void 0,yPlacement:s?f_(a.dataLabelYPlacement):void 0,angle:s?b_(a.dataLabelAngle):void 0,offset:s?C_(a.chartType,a.dataLabelXOffset,a.dataLabelYOffset):void 0,connectingLineType:function(){if(s)switch(a.dataLabelConnectingLineMode){case H.DataLabelConnectingLineMode.Always:return"Always";case H.DataLabelConnectingLineMode.Auto:default:return"Auto"}}(),connectingLine:function(){if(s){var e=a.connectingLineColor,t=a.dataLabelConnectingLineMode;if(t===H.DataLabelConnectingLineMode.Always||t===H.DataLabelConnectingLineMode.Auto)return{strokeWidth:a.dataLabelConnectingLineWidth,stroke:e}}}(),scope:"Default",template:d,overlappingLabels:u,textStyle:i_(a.dataLabelTextStyle),shape:T_(a)},a.chartType===H.ChartType.Sunburst&&a.dataLabelCategory&&1<t.categorys.length)for(var p=t.categorys.length,h=1;h<=p;h++)e.config.rules.push({condition:"current.depth = ".concat(h),type:"DataPoint",actions:[{targetElement:"DataPoint",properties:[{name:"text.template",value:q_(a,a.scenarioChartType,n,t,e.config._valueField,i,h)}]}]})}i&&(e.config.plugins=e.config.plugins.filter(function(e){return"GCESDataLabel"!==e.name})),e.config.plugins.push({type:"DataLabelPlugin",name:"GCESDataLabel",arguments:l}),a.chartType===H.ChartType.Line&&"Zeros"===a.showNull&&e.config.plugins.push({type:"TextInfoConverterBuilder",name:"NullValueTextInfoPolicyPlugin",arguments:{value:0}})}function X_(e){switch(e){case Ma:return B_;case La:return U_;case Ra:return z_}}function Q_(e,t){var a=X_(t);return e===H.ChartType.BarInPolar||e===H.ChartType.StackBarInPolar?a===B_?U_:a===U_?B_:a:a}function Z_(e,t){var a=X_(t);switch(e){case H.ChartType.RadialStackedBar:return a===B_?U_:a===U_?B_:a;case H.ChartType.Radar:case H.ChartType.FilledRadar:return-90;default:return a}}function $_(e,t){var a=1<arguments.length&&void 0!==t?t:0,n={rowTitle:!1,columnTitle:!1,dataLabel:!1,dataLabelValue:!0,dataLabelSeries:!1,dataLabelCategory:!1,dataLabelDisplayMode:fa,tooltip:!0,categoryAxis:!0,categoryAxisLine:!0,categoryTickLabel:!0,categoryTickMark:!0,categoryOrigin:0,categoryLabelAngle:_a,valueLabelAngle:_a,valueAxis:!0,valueAxisGridline:!1,valueAxisAxisLine:!0,valueAxisTickLabel:!0,valueAxisTickMark:!0,valueAxisFormat:Oa,valueAxisDisplayUnit:H.DisplayUnit.None,valueAxisUnitLabel:!0,valueAxisGridlineColor:"#cccccc",valueAxisOrigin:0,showDots:!0,legend:!0,legendWrap:!1,legendAutoSize:!0,legendHAlign:bi,legendVAlign:Di,legendWidth:"30%",legendHeight:"30%",legendPosition:Aa,showLegendName:!1,autoGapWidth:!0,categoryGapWidth:50,seriesGapWidth:30,dataLabelPosition:ba,dataLabelPercentage:!1,expand:!1,showNull:Sa,lineStyle:"Default",paletteId:"",referenceLine:[],trendLines:[ss],conditionalFormat:[],legendTextStyle:{fontSize:H.FontSizeList.Ratio1_0},axisTextStyle:{fontSize:H.FontSizeList.Ratio1_0},dataLabelTextStyle:{fontSize:H.FontSizeList.Ratio1_0},contentTextStyle:{fontSize:H.FontSizeList.Ratio1_0},automaticCarousel:!1,carouselInterval:3},i={borderRadius:"".concat(a,"px")};switch(e.chartType){case H.ChartType.PieinPie:case H.ChartType.RadialStackedBar:i.width=.8;break;case H.ChartType.Pie:case H.ChartType.Sunburst:case H.ChartType.Donut:i.width=.9;break;case H.ChartType.Rose:i.width=1;break;case H.ChartType.Column:case H.ChartType.Bar:case H.ChartType.BarInPolar:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:!1===e.autoGapWidth?(i.width=1-e.categoryGapWidth/100,i.overlap=-e.seriesGapWidth/100):i.overlap=-n.seriesGapWidth/100;break;case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.StackBarInPolar:!1===e.autoGapWidth&&(i.width=1-e.categoryGapWidth/100);break;case H.ChartType.Funnel:i.bottomWidth=e.bottomWidth/100,i.topWidth=e.topWidth/100,i.neckHeight=e.neckHeight/100}return i}function eM(e){return e.singleSelection?__.SelectionMode.Point:__.SelectionMode.Points}function tM(e){return e===xa||e===Ia?"Horizontal":"Vertical"}function aM(e,t){return{hAlign:function(e){switch(e){case Ti:return __.HAlign.Left;case Si:return __.HAlign.Right;case Ci:return __.HAlign.Center;default:return}}(t),vAlign:function(e){switch(e){case wi:return __.VAlign.Top;case xi:return __.VAlign.Bottom;case ki:return __.VAlign.Middle;default:return}}(e)}}function nM(e){return e.includes("%")?parseFloat(e)/100:e.includes("px")?e:void 0}function iM(e,t,a,n){if(n)return{maxHeight:.3,maxWidth:.3};switch(e){case xa:case Ia:return{height:nM(a)};case Pa:case Aa:return{width:nM(t)};default:return{}}}function rM(e){switch(e){case"Top":case"Bottom":return"Left";case"Left":case"Right":return"Top";default:return"None"}}function oM(e,t,a,n){var i="";return t&&(i=n===H.ChartType.Sunburst?a&&a[0]&&a[0].display:e.join("/")),i}function sM(s,e){function a(e,t){var a,n=b.profile,i=n[e].options[t];if(n[e].values.length){if(i!==Va)if(1<n[e].values.length)i=Va;else{var r=n[e].values[0];r&&(a=r,Jr.isGroupingItem(a)&&Jr.isDimension(a))&&!d_(r)&&(i=Va)}}else i=void 0;return i}function r(){var e={};switch(s.scenarioChartType){case H.ChartType.StackBarInPolar:case H.ChartType.Pie:case H.ChartType.Sunburst:case H.ChartType.PieinPie:case H.ChartType.Donut:e={type:Fa};break;case H.ChartType.Bubble:case H.ChartType.DisaggregateScatter:e={type:a("xAxis","xAxisScale")}}return e}function o(e,t,a){if(s.chartType===H.ChartType.Radar||s.chartType===H.ChartType.FilledRadar)return"";if(e){var n=(Jr.isBubbleOrScatter(s)?3<=f.settingValues.length?[f.settingValues[1]]:[f.settingValues[0]]:f.categorys).map(function(e){return e.display}).join(" / "),i="";if(i=(i=h_(s.chartType)?f.rows.join(" / "):f.columns.join(" / "))&&i.replace(zo,""),n=n&&i?[i,n].join(" / "):n||i,a){var r=Su(t);r&&(n="".concat(n,"(").concat(r,")"))}return n}return""}function u(){var e="values";switch(s.scenarioChartType){case H.ChartType.Composite:e="leftValues";break;case H.ChartType.Bubble:case H.ChartType.DisaggregateScatter:e="yAxis";break;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:e="upper"}return e}function c(e,t){var a=b.profile,n=K_(a[t]&&a[t].values);return"General"!==e?e:n}function t(e){var t,a=e.valueAxisFormat,n=e.valueAxisDisplayUnit,i=u();t=e.chartType===H.ChartType.PercentStackColumn||e.chartType===H.ChartType.PercentStackArea||e.chartType===H.ChartType.PercentStackBar?a:c(a,i);var r,o,s,l=(r=n,o=u(),s=l_(o,b),r!==H.DisplayUnit.Auto?r:s);return l===H.DisplayUnit.Auto&&[H.ChartType.PercentStackArea,H.ChartType.PercentStackBar,H.ChartType.PercentStackColumn].includes(e.chartType)&&(l=H.DisplayUnit.None),c_(t,l,b,u())}function n(e){if([H.ChartType.Pie,H.ChartType.Donut,H.ChartType.Sunburst].includes(e))return!0}function l(){var e=c(s.xValueAxisFormat,"xAxis");return c_(e,s.xValueAxisDisplayUnit,b,"xAxis")}function d(){var e=s.showCategoryTrackingArea,t=s.showCategoryTrackingLine,a=s.categoryTrackingAreaColor,n=s.categoryTrackingLineType,i=s.categoryTrackingLineColor,r=s.categoryTrackingLineWidth,o=[];return e&&o.push({type:"Area",fill:a}),t&&o.push({type:"CrossY",stroke:i,strokeWidth:r,strokeDasharray:n===Fn.Solid?"1,0":"5,3"}),o}function p(e,t){var a,n=1<arguments.length&&void 0!==t?t:"",i=i_(e);if(""!==n)switch(n){case H.TextOverflowType.Hide:a=__.TextOverflow.Clip;break;case H.TextOverflowType.Ellipsis:a=__.TextOverflow.Ellipsis;break;case H.TextOverflowType.Wrap:a=__.TextOverflow.Wrap}return F()({},i,{overflow:a})}var i,h,y,g,m,f=e.schema,v=e.hoverColor,b=e.aggregatedData;return[function(){var e,t,a,n,i={};switch(s.chartType){case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:i={plots:["p1"],type:"X",scale:r(),title:o(s.columnTitle,l().split(zo)[1],s.xValueAxisUnitLabel),position:s.xValueAxis?"Near":"None",majorGrid:!!s.xValueAxisGridline,majorGridStyle:{stroke:s.xValueAxisGridlineColor},lineStyle:{strokeWidth:s.xValueAxisAxisLine?1:0},textStyle:p(s.axisTextStyle,s.categoryLabelOverflow),labels:s.xValueAxisTickLabel,hoverStyle:{color:v},majorTicks:s.xValueAxisTickMark?void 0:"None",minorTicks:s.xValueAxisTickMark?void 0:"None",format:l(),min:s.xValueAxisMinValue,max:s.xValueAxisMaxValue,maxWidth:.3,maxHeight:.3,majorUnit:d_(null==b||null===(e=b.profile)||void 0===e||null===(t=e.xAxis)||void 0===t?void 0:t.values[0])?void 0:s.xValueAxisInterval,origin:(n=b.profile.yAxis.values[0],d_(n)?void 0:s.xValueAxisOrigin),labelAngle:Q_(s.chartType,s.categoryLabelAngle),reversed:y_(s.chartType),trackers:d()};break;default:i={plots:["p1"],type:"X",scale:r(),position:function(){var e=s.categoryAxis?"Near":"None";switch(s.chartType){case H.ChartType.Pie:case H.ChartType.Sunburst:case H.ChartType.PieinPie:case H.ChartType.Donut:case H.ChartType.Rose:e="None"}return e}(),lineStyle:{strokeWidth:function(){var e=s.categoryAxisLine?1:0;switch(s.chartType){case H.ChartType.Radar:case H.ChartType.FilledRadar:e=0}return e}()},textStyle:p(s.axisTextStyle,s.categoryLabelOverflow),majorGrid:(s.chartType!==H.ChartType.Radar&&s.chartType!==H.ChartType.FilledRadar||(a=s.categoryAxisLine),a),labels:s.categoryTickLabel,hoverStyle:{color:v},majorTicks:s.categoryTickMark?void 0:"None",minorTicks:s.categoryTickMark?void 0:"None",labelAngle:Q_(s.chartType,s.categoryLabelAngle),title:o(s.columnTitle),format:function(){if(!(1<f.categorys.length)){var e=f.categorys[f.categorys.length-1],t="General";return e&&(t=e.format),xu({format:t,nullString:s.nullItemsString,emptyString:s.emptyItemsString})}}(),origin:s.categoryOrigin,reversed:y_(s.chartType),maxWidth:.3,maxHeight:.3,trackers:d()}}return i}(),(y=t(s),g=y.split(zo)[1],m=(s.chartType===H.ChartType.DisaggregateScatter||s.chartType===H.ChartType.Bubble)&&d_(null==b||null===(i=b.profile)||void 0===i||null===(h=i.yAxis)||void 0===h?void 0:h.values[0]),{plots:["p1"],type:"Y",scale:function(){var e={type:"Linear"};switch(s.scenarioChartType){case H.ChartType.PercentStackColumn:case H.ChartType.Funnel:case H.ChartType.PercentStackArea:case H.ChartType.PercentStackBar:case H.ChartType.Pie:case H.ChartType.Sunburst:case H.ChartType.PieinPie:case H.ChartType.Donut:e={type:"Percentage"};break;case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:e.type=b.profile.values.options.valueScale;break;case H.ChartType.Composite:e.type=b.profile.leftValues.options.valueScale;break;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:e.type=b.profile.upper.options.valueScale;break;case H.ChartType.Bubble:case H.ChartType.DisaggregateScatter:e.type=a("yAxis","yAxisScale")}return e}(),title:function(e,t,a){if(e){var n=(Jr.isBubbleOrScatter(s)?3<=f.settingValues.length?[f.settingValues[2]]:[f.settingValues[1]]:f.leftValues).map(function(e){return e.display}).join(" / "),i="";if(i=(i=h_(s.chartType)?f.columns.join(" / "):f.rows.join(" / "))&&i.replace(zo,""),n=n&&i?[i,n].join(" / "):n||i,a){var r=Su(t);r&&(n="".concat(n,"(").concat(r,")"))}return n}return""}(s.rowTitle,g,s.valueAxisUnitLabel),position:function(){var e=s.valueAxis?"Near":"None";switch(s.chartType){case H.ChartType.Pie:case H.ChartType.Sunburst:case H.ChartType.PieinPie:case H.ChartType.Donut:case H.ChartType.Rose:e="None"}return e}(),majorGrid:!!s.valueAxisGridline,majorGridStyle:{stroke:s.valueAxisGridlineColor,strokeWidth:function(){switch(s.chartType){case H.ChartType.Radar:case H.ChartType.FilledRadar:return 1;default:return.5}}()},lineStyle:{strokeWidth:s.valueAxisAxisLine?1:0},textStyle:p(s.valueAxisTextStyle,s.valueLabelOverflow),labels:s.valueAxisTickLabel,majorTicks:s.valueAxisTickMark?void 0:"None",minorTicks:s.valueAxisTickMark?void 0:"None",format:y,labelAngle:Z_(s.chartType,s.valueLabelAngle),min:s.valueAxisMinValue,max:s.valueAxisMaxValue,majorUnit:m?void 0:s.valueAxisInterval,origin:function(){var e;if(Jr.isBubbleOrScatter(s)&&"Cartesian"===s.axisMode&&a("xAxis","xAxisScale")!==Va){var t=b.profile.xAxis.values[0];e=d_(t)?void 0:s.valueAxisOrigin}return e}(),maxWidth:.3,maxHeight:.3,useActualMin:n(s.chartType),useActualMax:n(s.chartType)})]}function lM(e){switch(e){case xa:return"0,0,10,0";case Aa:return"0,0,0,10";case Ia:return"10,0,0,0";case Pa:return"0,10,0,0"}}function uM(e){switch(e){case H.ChartType.Line:case H.ChartType.Radar:case H.ChartType.FilledRadar:return.5;default:return.2}}function cM(e,t,a,n){var i,r,o;switch(n){case H.ChartType.Column:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:case H.ChartType.StackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.Composite:case H.ChartType.PercentStackArea:case H.ChartType.PercentStackBar:case H.ChartType.PercentStackColumn:i=function(e){var t=e.profile,a=t.category.options.categoryScale;if(t.category.values.length){if(a!==Va)if(1<t.category.values.length)a=Va;else{var n=t.category.values[0];n&&Jr.isDimension(n)&&!d_(n)&&(a=Va)}}else a=void 0;return a}(a)}if(i===Na||i===Ea){var s=e.encodings.category.field,l=e.encodings.values[0].field;e.encodings.values[0].field="".concat(s,",").concat(l),e.encodings.category={},t.config.plotAreas[0].axes[0].scale={type:i};var u=s.indexOf(":"),c=-1<u?s.substring(0,u):s;r=t.data.values,o=c,r.sort(function(e,t){return yl(e[o],t[o])})}}function dM(e){var t=e.chartType,a=e.seriesTotalLabelPosition,n=e.seriesTotalLabelOffset,i=e.seriesTotalLabelAngle,r=e.seriesTotalLabelDisplayMode,o={position:"Outside",angle:function(e){switch(e){case H.DataLabelAngle.ParallelToY:return"ParallelToY";case H.DataLabelAngle.PerpendicularToY:return"PerpendicularToY";default:return"Horizontal"}}(i),offset:"0,".concat(n),xPlacement:"Center",yPlacement:"Far",overlappingLabels:m_(r)};switch(t){case H.ChartType.Column:case H.ChartType.Bar:case H.ChartType.BarInPolar:o.position=a===H.SeriesTotalLabelPosition.Outside?"Outside":"Inside";break;case H.ChartType.StackColumn:case H.ChartType.StackBar:case H.ChartType.StackBarInPolar:o.yPlacement=a===H.SeriesTotalLabelPosition.Outside?"Far":"Near"}return o}function pM(a){return function(e,t){return F()({},e,{pivotName:a,valueIndex:t})}}function hM(e,t){return e?Array.isArray(e)?e.map(pM(t)):e.values.map(pM(t)):[]}function yM(e){return(0<arguments.length&&void 0!==e?e:[]).map(function(e){var t=e.valueIndex,a=e.name,n=e.invalid,i=e.display,r=e.isNumber,o=e.isDate,s=e.isString,l=e.pivotName;return{name:a,display:i,valueIndex:t,invalid:n,isNumber:r,isDate:o,isString:s,fieldIdentifier:tl(e),pivotName:l}})}function gM(e){return(0<arguments.length&&void 0!==e?e:[]).map(function(e){var t=!0,a=!1,n=!1;return Jr.isCustomMeasureValue(e)||e.method&&e.method!==H.AggregationMethod.None||(e.dataType===H.DatasetFieldDataType.Date||e.dataType===H.DatasetFieldDataType.Datetime?t=!(a=!0):e.dataType!==H.DatasetFieldDataType.String&&e.dataType!==H.DatasetFieldDataType.Boolean||(t=!(n=!0))),F()({},e,{isNumber:t,isDate:a,isString:n})})}function mM(e){var t=e.getFlattenedPivotSettingItems(!1,{withoutHiddenDataRoles:!0,withoutWeakDataRoles:!0});return t=gM(t).filter(function(e){return!e.isDate}),t=yM(t),ae.uniqWith(ae.eqBy(function(e){return e.fieldIdentifier}))(t)}function fM(e,t){var a=1<arguments.length&&void 0!==t?t:"conditionalFormatValues";if(!e)return[];var n=e.getFlattenedPivotSettingItems([a]),i=gM(n).map(function(e){return pM(a)(e,e.idx)});return yM(i)}function vM(e){return Bo.a.isObject(e)&&e.columnName}function bM(e,t,a){var n,i,r,o=(n=a,function(t){if(vM(t)){var e=ae.compose(ae.prop("display"),ae.find(function(e){return ae.equals(e.fieldIdentifier,t)}))(n);return"current.items[0].".concat(s_(e))}return t}),s=e.rule,l=e.range;switch(s){case rn:i=">",l.minIncluded&&(i=">="),r="<",l.maxIncluded&&(r="<="),i+=o(l.min),r+=o(l.max);break;case on:i="<=",l.minIncluded&&(i="<"),r=">=",l.maxIncluded&&(r=">"),i+=o(l.min),r+=o(l.max);break;case an:case nn:i=t+o(l.max),r=null;break;default:i=t+o(l.min),r=null}return{expression1:i,expression2:r}}function CM(e,t,a){var n=e.rule,i=gs.find(function(e){return e.key===n}).display,r=bM(e,i,a),o=r.expression1,s=r.expression2;return n===rn?"AND(".concat(t," ").concat(o,", ").concat(t," ").concat(s,")"):n===on?"OR(".concat(t," ").concat(o,", ").concat(t," ").concat(s,")"):"".concat(t," ").concat(o)}function TM(e,t,a,n,i,r){var o,s,l,u;if(function(e,t){var a=!0;switch(t){case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.FloorPlan:case H.ChartType.Map:case H.ChartType.RangeBar:case H.ChartType.RangeColumn:case H.ChartType.RangeArea:a=!1;break;default:a=!!e.fieldIdentifier.aggregationMethod}return a}(e,i)){var c=(s=n,l=a,(o=t)?(u='current.valueDefinition ="'.concat(o,'"'),s&&(u+=', current.detail = "'.concat(l,'"'))):u='current.valueDefinition ="'.concat(l,'"'),u),d=CM(e.condition,"current.value",r);return"AND(".concat(c,",").concat(d,")")}var p="current.items[0].".concat(s_(a));return CM(e.condition,p,r)}function SM(e,t,a,n,i,r){var o;switch(e.condition.rule){case H.ConditionalFormatRulesType.MatchWord:case H.ConditionalFormatRulesType.StartWith:case H.ConditionalFormatRulesType.EndWith:case H.ConditionalFormatRulesType.Contain:o=function(e,t){var a,n=e.condition,i=n.rule,r=n.range,o=r.pattern,s=r.caseSensitive,l=s_(t);switch(i){case H.ConditionalFormatRulesType.MatchWord:a=s?"EXACT(current.items[0].".concat(l,',"').concat(o,'")'):"current.items[0].".concat(l,'="').concat(o,'"');break;case H.ConditionalFormatRulesType.StartWith:a=s?"EXACT(LEFT(current.items[0].".concat(l,',LEN("').concat(o,'")),"').concat(o,'")'):"LEFT(current.items[0].".concat(l,',LEN("').concat(o,'"))="').concat(o,'"');break;case H.ConditionalFormatRulesType.EndWith:a=s?"EXACT(RIGHT(current.items[0].".concat(l,',LEN("').concat(o,'")),"').concat(o,'")'):"RIGHT(current.items[0].".concat(l,',LEN("').concat(o,'"))="').concat(o,'"');break;case H.ConditionalFormatRulesType.Contain:a=s?'ISNUMBER(FIND("'.concat(o,'",current.items[0].').concat(l,"))"):'ISNUMBER(SEARCH("'.concat(o,'",current.items[0].').concat(l,"))")}return a}(e,a);break;case H.ConditionalFormatRulesType.Equal:case H.ConditionalFormatRulesType.NotEqual:case H.ConditionalFormatRulesType.Greater:case H.ConditionalFormatRulesType.EqualOrGreater:case H.ConditionalFormatRulesType.Less:case H.ConditionalFormatRulesType.EqualOrLess:case H.ConditionalFormatRulesType.Between:case H.ConditionalFormatRulesType.NotBetween:o=TM(e,t,a,n,i,r)}return o}function DM(e,t,a,n){var i=2<arguments.length&&void 0!==a?a:null,r=3<arguments.length&&void 0!==n?n:null,o=[],s=t.symbolStyle,l=t.borderStyle,u=t.labelStyle,c=t.shapeImageStyle,d=s||{},p=d.color,h=d.opacity,y=d.symbolSize,g=l||{},m=g.borderType,f=g.borderColor,v=g.borderWidth,b=u||{},C=b.showLabel,T=b.fontStyle,S=(c||{}).labelShapeImageId,D=null!==r?r:function(e){switch(e){case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:return!0;default:return!1}}(e);if(p){var k=D?"style.symbolFill":"style.fill";o.push({name:k,value:p})}if(h){var w=D?"style.symbolOpacity":"style.opacity";o.push({name:w,value:h/100})}if(null!=y&&D&&e!==H.ChartType.Bubble&&o.push({name:"style.symbolSize",value:y}),f){var x=D?"style.symbolStroke":"style.stroke";o.push({name:x,value:f})}if(v){var A=D?"style.symbolStrokeWidth":"style.strokeWidth";o.push({name:A,value:v})}if(m){var I=D?"style.symbolStrokeDasharray":"style.strokeDasharray";o.push({name:I,value:m===Fn.Solid?"1,0":"5,3"})}if(C){var P=![H.ChartType.TreeMap,H.ChartType.FloorPlan,H.ChartType.Map].includes(e);if(T&&(o.push({name:"text.textStyle",value:i_(T)}),o.push({name:"text.template",value:i})),P){var _=u||{},M=_.labelLocation,L=_.labelXPlacement,R=_.labelYPlacement,V=_.labelAngle,N=_.labelXOffset,E=_.labelYOffset;if(M&&o.push({name:"text.position",value:M===ba?"Outside":"Inside"}),L&&o.push({name:"text.xPlacement",value:v_(e,L)}),R&&o.push({name:"text.yPlacement",value:f_(R)}),V&&o.push({name:"text.angle",value:b_(V)}),null!==N&&null!==E&&o.push({name:"text.offset",value:C_(V,N,E)}),null!==S&&""!==S){var F=c||{},O={dataLabelShape:!0,dataLabelShapeImageId:S,dataLabelShapeXCenter:F.labelShapeXCenter,dataLabelShapeYCenter:F.labelShapeYCenter,dataLabelShapeXScale:F.labelShapeXScale,dataLabelShapeYScale:F.labelShapeYScale};o.push({name:"text.shape",value:T_(O)})}}}return[{targetElement:"DataPoint",properties:o}]}function kM(y,g,e,m,f,v,b,C,t){var T=8<arguments.length&&void 0!==t&&t,S=[];return e&&e.forEach(function(t){var e=C.find(function(e){return Bo.a.isEqual(e.fieldIdentifier,t.fieldIdentifier)});if(e){var a,n,i,r,o,s,l,u,c,d,p,h=(a=y,n=g,o=v,s=b,l=e,u=f,c=T,d=SM(i=t,(r=m)._valueField,l.display,r._isConditionFormatNeedDetail,o,u),p=i.extendsStyle.labelStyle?q_(i.extendsStyle.labelStyle,s,a,n,r._valueField,c):"",{condition:d,actions:DM(o,i.extendsStyle,p),type:"DataPoint"});S.push(h)}}),S}var wM,xM,AM=function(e,t,a,n,i){var r=a.plotChartType,o=a.scenarioChartType,s=t.appearance.contentTextStyle,l=t.property,u=e.data,c=e.schema,d=s&&s.color?function(e){var t=0<arguments.length&&void 0!==e?e:"",a=lc()(t.toLowerCase()).alpha();return lc()("".concat(t).toLowerCase()).alpha(.7*a).toString()}(s.color):null,p=l.legendTextStyle,h=l.cornerRadius;l=F()({},l,{chartType:r,scenarioChartType:o});var y,g,m,f,v,b={plugins:[{type:"RenderApi",name:"GCESMeasureMultiLineString"}],bar:$_(l,h),selectionMode:eM(l),selectedStyle:{adorners:!1,opacity:1,symbolOpacity:1},unselectedStyle:{adorners:!1,opacity:uM(r),strokeWidth:function(e){switch(e){case H.ChartType.Line:case H.ChartType.Radar:case H.ChartType.FilledRadar:return.5;default:return 0}}(r),symbolOpacity:uM(r),symbolStrokeWidth:0},plotAreas:[{legend:{position:(m=l.legendPosition,f=l.legend,n||!f?"None":m),titlePosition:rM(l.legendPosition),wrapping:l.legendWrap,padding:lM(l.legendPosition),orientation:tM(l.legendPosition),hoverStyle:{color:d},textStyle:F()({},i_(p))},legends:(y=F()({type:"Color",title:oM(c.leftSeries,l.showLegendName,c.categorys,r)},iM(l.legendPosition,l.legendWidth,l.legendHeight,l.legendAutoSize),{},aM(l.legendVAlign,l.legendHAlign),{sortOrder:p_(r,l.legendPosition),gradient:!1}),g=F()({type:"Size",position:function(e){if(!e)return"None"}(l.showSizeBubble)},iM(l.legendPosition,l.legendWidth,l.legendHeight,l.legendAutoSize),{},aM(l.legendVAlign,l.legendHAlign)),i.seriesTotalData&&[H.ChartType.Column,H.ChartType.Bar,H.ChartType.BarInPolar].includes(l.chartType)?[F()({},y,{merge:["p1.Color","seriesTotalPlot.Color"]}),g]:[y,g]),axes:sM(l,{schema:c,hoverColor:d,aggregatedData:i})}]};if((u.config=b,u.plots.forEach(function(e){g_(l,{plotConfig:e.config,hoverColor:d}),J_(l,e,c,i),cM(e,u,i,o)}),i.seriesTotalData)&&(null!==(v=i.profile.series)&&void 0!==v&&v.values.length)){var C=function(e,t,a){var n=t.scenarioChartType,i=t.seriesTotalWidth,r=t.showSeriesTotalLabel,o=t.seriesTotalWithCategory,s=t.seriesTotalLabelDisplayUnit,l=[H.ChartType.Column,H.ChartType.Bar,H.ChartType.BarInPolar].includes(n),u=[H.ChartType.StackColumn,H.ChartType.StackBar,H.ChartType.StackBarInPolar].includes(n),c=l&&r||u,d=ae.clone(e);if(d.name="seriesTotalPlot",d=ae.assocPath(["encodings","values"],[{field:"__seriesTotalValue__"}],d),d=ae.assocPath(["encodings","color"],{field:"__totalSeries__"},d),d=ae.assocPath(["encodings","details"],{},d),c){var p,h={},y=a.profile;h.textStyle=i_(t.seriesTotalLabelTextStyle);var g=y.values.values[0],m=s===H.DisplayUnit.Auto?g.displayUnit:s,f=a.seriesTotalData.map(function(e){return e[g.display]}),v=Iu(g.format,m,f);h.template="{valueField.value:".concat(v,"}");var b=R()(d.encodings.values);if(o&&null!==(p=y.category.values)&&void 0!==p&&p.length){var C=y.category.values.map(function(e){return{field:s_(e.display)}});b=b.concat(C);var T=y.category.values.map(function(e){return"{".concat(s_(e.display),":").concat(e.format,"}")}).join(",");h.template="".concat(T,"(").concat(h.template,")")}h=F()({},h,{},dM(t)),d=ae.assocPath(["config","plugins"],[{type:"DataLabelPlugin",name:"GCESDataLabel",arguments:h}],d),d=ae.assocPath(["encodings","text"],b,d)}else d=ae.assocPath(["encodings","text"],[],d);if(l){var S=[{valueField:"__seriesTotalValue__",width:i/100,cluster:"totalSeries"}];d=ae.assocPath(["config","bar","groups"],S,d)}else u&&(d=ae.assoc("type","Scatter",d),d=ae.assocPath(["config","symbols"],!1,d));return d}(u.plots[0],l,i);switch(l.scenarioChartType){case H.ChartType.Column:case H.ChartType.Bar:case H.ChartType.BarInPolar:u.plots.push(C),u.config.plotAreas[0].axes.forEach(function(e){e.plots=["seriesTotalPlot","p1"]});break;case H.ChartType.StackColumn:case H.ChartType.StackBar:case H.ChartType.StackBarInPolar:u.plots.push(C),u.config.plotAreas[0].axes.forEach(function(e){e.plots=["p1","seriesTotalPlot"]})}}return u.showTooltip=l.tooltip,u.chartType=l.scenarioChartType,u.expand=l.expand&&u.data.values.length<=2e3,u.renderMethod="Canvas",u},IM=function(e,t){function a(){var e,t,a,n=u.profile,i=(null===(e=n.rightValues)||void 0===e||null===(t=e.values)||void 0===t?void 0:t.length)&&n.rightValues.values[0].format,r="General"!==c.valueAxisFormat2?c.valueAxisFormat2:i,o=c_(r,(a=l_("rightValues",u),c.valueAxisDisplayUnit2!==H.DisplayUnit.Auto?c.valueAxisDisplayUnit2:a),u,"rightValues"),s=o.split(zo)[1];return{plots:["p2"],type:"Y",scale:{type:u.profile.rightValues.options.valueScale},title:function(e,t,a){if(e){var n=l.rightValues.map(function(e){return e.display}).join(" / "),i="";if(i=(i=h_(c.chartType)?l.columns.join(" / "):l.rows.join(" / "))&&i.replace(zo,""),n=n&&i?[i,n].join(" / "):n||i,a){var r=Su(t);r&&(n="".concat(n,"(").concat(r,")"))}return n}return""}(c.rowTitle2,s,c.valueAxisUnitLabel2),position:c.valueAxis2?"Far":"None",majorGrid:!!c.valueAxisGridline2,majorGridStyle:{stroke:c.valueAxisGridlineColor2,strokeWidth:.5},lineStyle:{strokeWidth:c.valueAxisAxisLine2?1:0},textStyle:i_(c.valueAxis2TextStyle),labels:c.valueAxisTickLabel2,majorTicks:c.valueAxisTickMark2?void 0:"None",minorTicks:c.valueAxisTickMark2?void 0:"None",format:o,min:c.valueAxisMinValue2,max:c.valueAxisMaxValue2,majorUnit:c.valueAxisInterval2,labelAngle:Z_(c.chartType,c.valueLabelAngle2),maxWidth:.3,maxHeight:.3}}var l=t.schema,n=t.scenario,i=t.leftChartType,r=t.rightChartType,o=t.valuesCount,s=t.values2Count,u=t.aggregatedData,c=n.options.property,d=[i,r],p=oh()(e,{plots:{1:{$apply:function(e){var a=F()({},c,{chartType:r,scenarioChartType:H.ChartType.Composite});return["dataLabel","dataLabelValue","dataLabelPosition","dataLabelDisplayUnit","dataLabelSeries","dataLabelCategory","dataLabelPosition","dataLabelYPlacement","dataLabelXPlacement","dataLabelAngle","dataLabelXOffset","dataLabelYOffset","dataLabelConnectingLineMode","dataLabelConnectingLineWidth","connectingLineColor","dataLabelDisplayMode","dataLabelTextStyle","dataLabelShape","dataLabelShapeImageId","dataLabelShapeXCenter","dataLabelShapeYCenter","dataLabelShapeXScale","dataLabelShapeYScale"].forEach(function(e){var t=a["".concat(e,"2")];a=ae.assoc(e,t,a)}),J_(a,e,l,u,!0),g_(a,{plotConfig:e.config}),e}}},config:{$apply:ae.compose(function(e){return d.some(function(e){return[H.ChartType.Line].includes(e)})?oh()(e,{unselectedStyle:{strokeWidth:{$set:.5}}}):e},function(e){if(!d.some(function(e){return[H.ChartType.Column,H.ChartType.StackColumn,H.ChartType.RangeColumn].includes(e)}))return e;if(!1!==c.autoGapWidth)return e;var t=1-c.categoryGapWidth/100;return oh()(e,{bar:{width:{$set:t}}})},function(e){if(!d.some(function(e){return[H.ChartType.Column,H.ChartType.RangeColumn].includes(e)}))return e;if(!1!==c.autoGapWidth)return e;var t=-c.seriesGapWidth/100;return oh()(e,{bar:{overlap:{$set:t}}})})},chartType:{$set:n.chartType}});return o&&s?p=oh()(p,{config:{plotAreas:{0:{axes:{$push:[a()],0:{plots:{$push:["p2"]}},1:{textStyle:{$set:c.valueAxis1TextStyle}}},legends:{$push:[F()({type:"Color",title:oM(l.rightSeries,c.showLegendName,l.categorys,c.chartType),sortOrder:p_(r,c.legendPosition)},iM(c.legendPosition,c.legendWidth,c.legendHeight,c.legendAutoSize),{},aM(c.legendVAlign,c.legendHAlign))]}}}}}):o&&!s?p=oh()(p,{plots:{$splice:[[1,1]]},config:{plotAreas:{0:{axes:{1:{textStyle:{$set:i_(c.valueAxis1TextStyle)}}}}}}}):!o&&s&&(p=oh()(p,{plots:{$splice:[[0,1]]},config:{plotAreas:{0:{axes:{0:{plots:{$set:["p2"]}},1:{$set:a()}},legends:{$set:[F()({type:"Color",title:oM(l.rightSeries,c.showLegendName,l.categorys,c.chartType)},iM(c.legendPosition,c.legendWidth,c.legendHeight,c.legendAutoSize),{},aM(c.legendVAlign,c.legendHAlign))]}}}}})),p},PM=function(e,t,a,n,i,r){var o,s,l,u,c,d=(o=n.options.property.conditionalFormat,s=r,o.map(function(e){var t,a;if(null!==(t=e.extendsStyle)&&void 0!==t&&null!==(a=t.labelStyle)&&void 0!==a&&a.fontStyle){var n,i,r=Jc(null===(n=e.extendsStyle)||void 0===n||null===(i=n.labelStyle)||void 0===i?void 0:i.fontStyle.fontSize,s);return ae.assocPath(["extendsStyle","labelStyle","fontStyle","fontSize"],r,e)}return e})),p=n.chartType;if(0<d.length){var h=mM(i),y=fM(i);if(p===H.ChartType.Composite){var g,m,f,v=i.getPivotSetting(),b=v.leftValues,C=v.rightValues,T=null==b||null===(g=b.options)||void 0===g?void 0:g.valueChartType,S=null==C||null===(m=C.options)||void 0===m?void 0:m.valueChartType,D=(l=Us.pivotSetting(n),u=["leftValues","category","series","trellisColumns","trellisRows"].reduce(function(e,t){return e=[].concat(R()(e),R()(hM(l[t],t)))},[]),c=["rightValues","category","series","trellisColumns","trellisRows"].reduce(function(e,t){return e=[].concat(R()(e),R()(hM(l[t],t)))},[]),{leftFields:yM(u),rightFields:yM(c)}),k=D.leftFields,w=D.rightFields,x=d.filter(function(e){return ae.any(ae.equals(e.fieldIdentifier))(k.map(function(e){return e.fieldIdentifier}))}),A=d.filter(function(e){return ae.any(ae.equals(e.fieldIdentifier))(w.map(function(e){return e.fieldIdentifier}))}),I=kM(e,t,x,a.plots[0].config,y,T,p,h);if((f=a.plots[0].config.rules).push.apply(f,R()(I)),a.plots[1]){var P,_=kM(e,t,A,a.plots[1].config,y,S,p,h,!0);(P=a.plots[1].config.rules).push.apply(P,R()(_))}}else{var M,L=kM(e,t,d,a.plots[0].config,y,p,p,h);(M=a.plots[0].config.rules).push.apply(M,R()(L))}}return p===H.ChartType.TreeMap&&a.plots[0].config.rules.push({condition:"current.children.length > 0",type:"DataPoint",actions:[{targetElement:"DataPoint",properties:[{name:"text.template",value:""}]}]}),a},_M=function(e,t,a){return SM(e,void 0,t,void 0,H.ChartType.Map,a)},MM=mM,LM=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};(xM=wM=wM||{}).ExpressionStateChange="ExpressionStateChange",xM.ExpressionStateWillChange="ExpressionStateWillChange";var RM=function(e){k()(n,e);var a=w()(n);function n(e,t){var r;return I()(this,n),(r=a.call(this,e)).editorContent=null,r.aggDataExps=[],r.aggDataExpGroup={},r.datasets=[],r.variableExps=[],r.getUsedParametersInModelParametersSetting=function(){var e,t=r.getUsedDatasetIds();return(e=[]).concat.apply(e,R()(t.map(function(t){var e,a;return null!==(a=null===(e=r.aggDataExpGroup[t])||void 0===e?void 0:e.map(function(e){return[e,t]}))&&void 0!==a?a:[]}))).flatMap(function(e){var t,a=N()(e,2),n=a[0],i=a[1];return(null===(t=r.createDataViewPivotSettingHelper(n,i).getDatasetProfile())||void 0===t?void 0:t.modelParameters)||[]}).filter(function(e){return e.valueType===H.modelParameterType.DashboardParameter}).map(function(e){var t;return null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.name})},r.editorContent=t,r.syncExpressions(t),r}return D()(n,[{key:"syncExpressions",value:function(e){var i=this;this.aggDataExps=el(e,H.RichTextExpressionType.AggregatedData);var r={};this.aggDataExps.forEach(function(e,t){var a=e.config.datasetId;r[a]||(r[a]=[]);var n=gu(e,i.data);n.index=t,r[a].push(n)}),this.aggDataExpGroup=r,this.datasets=Object.keys(r),this.variableExps=el(e,H.RichTextExpressionType.DashboardVariable).map(function(e){return{id:e.uuid,variable:e.config.variable}})}},{key:"createDataViewPivotSettingHelper",value:function(e,t){var a=this._reduxStore.getState(),n=Hs.profilesOnlyContent(a)[t],i=d$.getDatasetSchema(t);return cC.create({pivotSetting:e.pivot.pivotSetting,dataViewType:H.DataViewType.Plain,valueRoles:["value","conditionalFormatValues"]},i,n)}},{key:"hasExpression",value:function(){return!!this.aggDataExps.length||!!this.variableExps.length}},{key:"getUsedDatasetIds",value:function(){if(!this.isReady())return[];var t=R()(this.datasets),a=Hs.datasetInfoList(this._reduxStore.getState());return this.variableExps.forEach(function(e){t.push.apply(t,R()(kp("#{".concat(e.variable,"}"),a)))}),t}},{key:"getDatasetIds",value:function(){return this.aggDatasetIds}},{key:"isAffectCrossFilterByScenario",value:function(o){var s=this;if(!o.isLinkedTo(this))return!1;var e=Object.values(this.aggDataExpGroup).flat();return this.aggDatasetIds=[],e.filter(function(e){var t=new P_(e.id,e);if(!o.isAffectToScenario(t))return!1;var a=Us.interactionMappingByScenario(o.data,Object.assign(Object.assign({},e),{parentId:s.id})),n=!(null==a||!a.length),i=t.getDatasetId(),r=o.getDatasetId()===i;return(n||r)&&(s.aggDatasetIds.push(i),!0)}).length}},{key:"getAffectDatasetIds",value:function(e){return this.isAffectCrossFilterByScenario(e)?this.getDatasetIds():null}},{key:"getInitExpressionData",value:function(e){var a=0<arguments.length&&void 0!==e?e:Ft("richText.expression.noData");return[].concat(R()(this.aggDataExps),R()(this.variableExps)).reduce(function(e,t){return e[t.uuid||t.id]=a,e},{})}},{key:"updateDataView",value:function(e,t){var a=this.createDataViewPivotSettingHelper(e,t);if(!a.hasValueSetting())return null;var n="".concat(this.data.id,"-").concat(e.index),i=Object.assign(Object.assign(Object.assign({},this.data),e),{id:n,originalId:e.id,parentId:this.data.id}),r=this.getPivotModel(i,a),o=this.getUserParameters(i,a),s=new XP;return s.model=r,s.userParameters=o,s.helper=a,s.filters=this.getGlobalFilters(i,t),s.customAttributes=a.getCustomAttributes(),s.datasetId=t,this.addDataView(e.id,s),s}},{key:"fetchAggregatedData",value:function(n,e){var l=1<arguments.length&&void 0!==e?e:{};return LM(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:this.syncExpressions(this.editorContent),a=Array.isArray(n)?n:[n],o=(t=[]).concat.apply(t,R()(a.map(function(t){var e,a;return null!==(a=null===(e=s.aggDataExpGroup[t])||void 0===e?void 0:e.map(function(e){return[e,t]}))&&void 0!==a?a:[]}))),this.emit(H.ScenarioEvent.BeforeAggregation),this.renderEvent.start(o.map(function(e){return N()(e,1)[0].id})),o.forEach(function(e,n){var t=N()(e,2),i=t[0],r=t[1];return LM(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.updateDataView(i,r)){e.next=3;break}return e.abrupt("return");case 3:return 0===n&&t.suspend(),n===o.length-1&&t.resume(),e.next=7,this.fetchDataViewAsync(i.id,r,l.sessionId);case 7:if(a=e.sent,Object(Ho.isUndefined)(a))return e.abrupt("return");e.next=10;break;case 10:a={value:a.data[0],profile:a.profile},Object(Ho.isUndefined)(a.value)?this.emit(wM.ExpressionStateChange,V()({},i.id,Ft("richText.expression.noData"))):this.notifyRefreshData(a,t.helper,Object.assign(Object.assign({},i),{expressionType:H.RichTextExpressionType.AggregatedData}));case 12:case"end":return e.stop()}},e,this)}))}),this.renderEvent.start(this.variableExps.map(function(e){return e.id})),this.variableExps.forEach(function(a){return LM(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lh("#{".concat(a.variable,"}"),this.data.id,[],!1);case 2:t=e.sent,this.notifyRefreshData(t,null,{id:a.id,expressionType:H.RichTextExpressionType.DashboardVariable});case 4:case"end":return e.stop()}},e,this)}))});case 10:case"end":return e.stop()}},e,this)}))}},{key:"shouldRefreshData",value:function(e){var t;return!(null==e||!e.length)||!(null===(t=this.variableExps)||void 0===t||!t.length)}},{key:"refreshData",value:function(e){var t=e;t?this.editorContent=t:t=this.editorContent,this.syncExpressions(t),C()(b()(n.prototype),"refreshData",this).call(this)}},{key:"getConstRangeValue",value:function(t,e,a){if(Object(Ho.isUndefined)(t))return null;if(!t.columnName)return t;var n=a.find(function(e){return ae.equals(e.fieldIdentifier,t)});return n?e[n.display]:null}},{key:"tryCondition",value:function(e,t,a,n){var i=this.getConstRangeValue(a.range.min,t,n),r=this.getConstRangeValue(a.range.max,t,n),o=a.range.minIncluded,s=a.range.maxIncluded,l=!1;switch(a.rule){case Za:l=e===i;break;case $a:l=e!==i;break;case en:l=i<e;break;case tn:l=i<=e;break;case an:l=e<r;break;case nn:l=e<=r;break;case rn:l=e<r&&i<e||o&&e===i||s&&e===r;break;case on:l=r<e||e<i||o&&e===i||s&&e===r}return l}},{key:"getValueWithStyle",value:function(e,t,a,n,i){for(var r=n.length;0<r;r--){var o=n[r-1];if(this.tryCondition(e,a,o.condition,i))return{text:t,style:{textStyle:o.extendsStyle.textStyle,borderStyle:o.extendsStyle.borderStyle,backgroundColor:o.style.color}}}return t}},{key:"notifyRefreshData",value:function(e,t,a){var n,i;switch(null==a?void 0:a.expressionType){case H.RichTextExpressionType.DashboardVariable:i=e;break;case H.RichTextExpressionType.AggregatedData:default:var r,o=null!==(n=a.options.property.displayUnit)&&void 0!==n?n:H.DisplayUnit.None;i=e.value;var s=e.profile.value.values[0],l=i[s.display];if(""===l)r="";else{var u=t.getValueFormat(s.name),c=Iu(u,o,[l]);r=ku(c,l)}i=this.getValueWithStyle(l,r,i,a.options.property.conditionalFormats,fM(t))}this.emit(wM.ExpressionStateChange,V()({},a.id,i)),this.renderEvent.done(a.id),this.renderEvent.isComplete()&&(this.emit(H.ScenarioEvent.AggregationReady,this.id),this.renderEvent.end())}},{key:"notifyLoadingState",value:function(){}},{key:"getUsedParameters",value:function(){var n=[];this.variableExps.forEach(function(e){n.push.apply(n,R()(uh("#{".concat(e.variable,"}"))))}),this.aggDataExps.forEach(function(e){var t,a;null!==(a=null===(t=e.config)||void 0===t?void 0:t.filters)&&void 0!==a&&a.forEach(function(e){n.push.apply(n,R()(zA(e)))})});var e=this.getUsedParametersInModelParametersSetting();return n.push.apply(n,R()(e)),n}},{key:"collectVariables",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;return this.sync(),this.variableExps.map(function(e){return sh("#{".concat(e.variable,"}"),t)[0]})}},{key:"refreshVariable",value:function(){this.refreshData()}},{key:"getVariableDependencies",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;return this.collectVariables(t)}},{key:"getActualDependencies",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this.sync();var a=this.getUsedParameters(),n=this.getVariableDependencies(t);return{parameters:this.getParameterDependencies(a,t),variables:n.map(function(e){return null==e?void 0:e.scenarioId}).filter(function(e){return e}),usedParameters:a,usedVariables:n}}}]),n}(k_);RM.EventType=wM;function VM(e){var t,a,n=null!==(a=null===(t=e.options.sliceFilters)||void 0===t?void 0:t[0])&&void 0!==a?a:e.options.property.defaultValue;if(!n||!n.target||0===n.target.length)return 1;switch(e.slicerType){case H.SlicerType.TreeSlicer:case H.SlicerType.ComboBoxSlicer:case H.SlicerType.LabelSlicer:return 0===n.values.length;case H.SlicerType.DateRangeSlicer:case H.SlicerType.RelativeDateSlicer:return!n;case H.SlicerType.DataRangeSlicer:return Object(Ho.every)(n.conditions,function(e){return Object(Ho.isNil)(e.value)});default:return 1}}var NM,EM=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},FM=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).dataView=new QP,e}return D()(a,[{key:"fetchAggregatedData",value:function(o,s){return EM(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getSimplePivotSetting(o)){e.next=7;break}return this.cleanDataCache(),this.notifyRefreshData(),e.abrupt("return");case 7:if(this.sync(),a=s&&s.sessionId,n=s&&s.pageNumber||0,(i=this.getDataViewHelper(o,t)).isReady()){e.next=13;break}return e.abrupt("return");case 13:return this.dataView.helper=i,this.dataView.model=this.getRawModel(Object.assign(Object.assign({},this.data),{pageNumber:n}),i),this.dataView.userParameters=this.getUserParameters(Object.assign(Object.assign({},this.data),{pageNumber:n}),i),this.dataView.filters=this.getGlobalFilters(this.data),this.dataView.customAttributes=i.getCustomAttributes(),this.dataView.datasetId=o,this.preUpdate(),e.next=22,this.dataView.getDataViewAsync(o,a);case 22:(r=e.sent)&&this.setDataCache(r),this.postUpdate(),r&&this.notifyRefresh(r,i,{pageNumber:n});case 26:case"end":return e.stop()}},e,this)}))}},{key:"notifyRefresh",value:function(e,t,a){this.emitRefreshEvent(Object.assign({},e),t,this.id,a)}},{key:"getExportData",value:function(){var e=this.dataView.helper,t=this.getDataCache(),n=null==e?void 0:e.getUsedDimensionItems();return[Object.assign({data:t.data.map(function(e){return e.reduce(function(e,t,a){return e[n[a].display]=t,e},{})})},this.getExtraInfo())]}},{key:"getExportConfig",value:function(){var e=this.dataView.helper,t=null==e?void 0:e.getUsedDimensionItems(),a=this.dataView.config;return Object.assign({dimensions:t,config:a},this.getExtraInfo())}}]),a}(x_),OM=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},HM=function(e){k()(n,e);var t=w()(n);function n(){var e;return I()(this,n),(e=t.apply(this,arguments)).cacheDatasetId=null,e.completeDataCache=null,e.affectedDataCache=null,e.affectOthers=!0,e.memoizeMergeTree=QI($l),e}return D()(n,[{key:"sync",value:function(){C()(b()(n.prototype),"sync",this).call(this),this.data&&(this.cacheDatasetId=C()(b()(n.prototype),"getDatasetId",this).call(this))}},{key:"getDatasetId",value:function(){var e=C()(b()(n.prototype),"getDatasetId",this).call(this);return null!=e?e:this.cacheDatasetId}},{key:"isAffectOthers",value:function(){var e=C()(b()(n.prototype),"isAffectOthers",this).call(this);return e?(this.sync(),!VM(this.data)):e}},{key:"isSlicer",value:function(){return!0}},{key:"updateDataViews",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:H.AggregateRequestType.Default,i=this.getPivotModel(e,t);i.options&&(i.options.includeAllDimensions=!0);var r,o,s=this.getUserParameters(e,t),l=this.getGlobalFilters(e);if(n!==H.AggregateRequestType.Active){var u=new ZP;u.model=i,u.userParameters=s,u.helper=t,u.customAttributes=t.getCustomAttributes(),u.datasetId=t.getDatasetId(),r=Bd.a.v1(),this.addDataView(r,u)}var c=new ZP;return c.model=Object.assign(Object.assign({},i),{id:"".concat(i.id,"_affected")}),c.userParameters=s,c.filters=l,c.helper=t,c.customAttributes=t.getCustomAttributes(),c.datasetId=t.getDatasetId(),o=Bd.a.v1(),this.addDataView(o,c),[r,o]}},{key:"fetchAggregatedData",value:function(e,t){var c=1<arguments.length&&void 0!==t?t:{};return OM(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.sync(),t=this.getDatasetId(),(a=this.getSimplePivotSettings(t)).length){e.next=9;break}return this.emitEmptyRefreshData(c),this.cleanDataCache(),e.abrupt("return");case 9:if((n=this.getDataViewHelper(this.getDatasetId(),a[0])).hasSetting()&&n.isReady()){e.next=13;break}return this.notifyRefreshData(null,n,c),e.abrupt("return");case 13:if(i=this.updateDataViews(this.data,n,null==c?void 0:c.aggregateRequestType),r=N()(i,2),o=r[0],s=r[1],this.preUpdate(),l=this.completeDataCache,u=this.affectedDataCache,o)return e.next=20,this.fetchDataViewAsync(o,t,c.sessionId);e.next=24;break;case 20:l=e.sent,this.completeDataCache=l,this.updateSliceFilters(),null===u&&(u=l);case 24:if(s)return e.next=27,this.fetchDataViewAsync(s,t,c.sessionId);e.next=29;break;case 27:u=e.sent,this.affectedDataCache=u;case 29:this.postUpdate(),l&&u&&this.notifyRefreshData({completeData:l,affectedData:u},n,c);case 31:case"end":return e.stop()}},e,this)}))}},{key:"notifyRefreshData",value:function(e,t,a){this.isReady()&&C()(b()(n.prototype),"notifyRefreshData",this).call(this,e,t,a)}},{key:"updateSliceFilters",value:function(){var e,t,a,n,i,r,o,s,l,u,c,d,p,h=ae.head((null===(t=null===(e=this.data)||void 0===e?void 0:e.options)||void 0===t?void 0:t.sliceFilters)||[]),y=h&&Vl(null==h?void 0:h.values),g=(u=this.data,d=null===(c=null==u?void 0:u.options)||void 0===c?void 0:c.sliceFilters,p=Wb(u,!0),d&&p?eu(p):null);if(g){var m=null!==(i=null===(n=null===(a=this.data)||void 0===a?void 0:a.options)||void 0===n?void 0:n.sliceFilters)&&void 0!==i?i:[],f=null!==(o=null===(r=this.completeDataCache)||void 0===r?void 0:r.data)&&void 0!==o?o:[],v=Qc(null===(s=this.completeDataCache)||void 0===s?void 0:s.profile),b=function(e){var t=0<arguments.length&&void 0!==e?e:{};return null!=t&&t.id?H.TreeSlicerMode.ParentChild:null!=t&&t.hierarchy?H.TreeSlicerMode.Hierarchy:H.TreeSlicerMode.Classic}(null===(l=this.completeDataCache)||void 0===l?void 0:l.profile),C=!(null==h||!h.exclude),T=v.map(function(e){return{column:e.name}}),S=this.getDatasetId(),D=this.memoizeMergeTree(f,g.items,C,v,b,S,y),k=D.values,w=D._unCheckedValues,x=[Object.assign(Object.assign({},m[0]),{target:T,values:k,_unCheckedValues:w})];d$.cacheManager.set(H.CacheType.ActiveFilter,this.id,x)}else d$.cacheManager.delete(H.CacheType.ActiveFilter,this.id)}}]),n}(k_),BM=function(e){return function(e){k()(i,e);var t=w()(i);function i(){var e;return I()(this,i),(e=t.apply(this,arguments)).datasetIds=[],e}return D()(i,[{key:"getDataByDatasetId",value:function(e){return Object.assign(Object.assign({},this.data),{id:Bd.a.v1(),originalId:e,parentId:this.id,pivot:Object.assign(Object.assign({},this.data.pivot),{datasetId:e})})}},{key:"sync",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];(e=C()(b()(i.prototype),"sync",this)).call.apply(e,[this].concat(a)),this.datasetIds=this.data.pivot.datasetsInfo.datasetIds}},{key:"getGlobalFilters",value:function(){var a=this;if(1!==this.datasetIds.length)return this.datasetIds.reduce(function(e,t){return e[t]=C()(b()(i.prototype),"getGlobalFilters",a).call(a,a.getDataByDatasetId(t),t),e},{});var e=this.datasetIds[0];return C()(b()(i.prototype),"getGlobalFilters",this).call(this,this.getDataByDatasetId(e),e)}},{key:"getDatasetId",value:function(){var e,t,a;if(null!==(a=null===(t=null===(e=this.data.pivot)||void 0===e?void 0:e.datasetsInfo)||void 0===t?void 0:t.datasetIds)&&void 0!==a&&a[0])return C()(b()(i.prototype),"getDatasetId",this).call(this)}},{key:"isAffectCrossFilterByScenario",value:function(l){var t=this;return!!l.isLinkedTo(this)&&this.datasetIds.map(function(e){return t.getDataByDatasetId(e)}).some(function(e){var t,a,n=new P_(e.id,e);if(!l.isAffectToScenario(n))return!1;var i=null!==(t=Us.interactionMappingByScenario(l.data,Object.assign(Object.assign({},e),{id:e.originalId})))&&void 0!==t?t:[],r=null!==(a=Us.interactionMappingByScenario(l.data,Object.assign(Object.assign({},e),{id:e.parentId,parentId:void 0})))&&void 0!==a?a:[],o=!![].concat(R()(i),R()(r)).length,s=l.getDatasetId()===n.getDatasetId();return o||s})}},{key:"getUsedDatasetIds",value:function(){return this.datasetIds}}]),i}(e)},UM=function(){function t(e){I()(this,t),this.useBuildInI18n=!1,e&&(this.displayName=e.displayName||"",this.displayNameKey=e.displayNameKey,e._displayNameKey&&(this.useBuildInI18n=!0,this.displayNameKey=e._displayNameKey))}return D()(t,[{key:"getDisplayName",value:function(){return this.useBuildInI18n?Ft(this.displayNameKey):this.displayNameKey&&this.i18nManager?this.i18nManager.getDisplay(this.displayNameKey)||this.displayName||this.displayNameKey:this.displayName}},{key:"setI18nManager",value:function(e){this.i18nManager=e}},{key:"setUseBuildInI18n",value:function(e){this.useBuildInI18n=e}},{key:"getDisplayNameByKey",value:function(e){return this.useBuildInI18n?Ft(e):this.i18nManager&&this.i18nManager.getDisplay(e)||e}}]),t}(),zM=function(){function a(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};I()(this,a),this.icons=null!==(e=null==t?void 0:t.images)&&void 0!==e?e:{}}return D()(a,[{key:"getIcon",value:function(e){return e&&this.icons[e]||""}}]),a}(),KM=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).iconManager=new zM,t.name=e.name,t.icon=e.icon,t.iconCss=e.iconCss,t.defaultValue=e.defaultValue,t.type=e.type,Array.isArray(e.requiredTypes)&&(t.requiredTypes=e.requiredTypes),t}return D()(n,[{key:"getName",value:function(){return this.name}},{key:"getDefaultValue",value:function(){return this.defaultValue}},{key:"setIconManager",value:function(e){this.iconManager=e}},{key:"getDescriptor",value:function(){return{name:this.name,label:this.getDisplayName()||this.name,type:this.type,iconCss:this.iconCss,icon:this.iconManager.getIcon(this.icon),requiredTypes:this.requiredTypes,defaultValue:this.defaultValue}}},{key:"isEqual",value:function(e){return this.name===e.name&&this.type===e.type&&Object(Ho.isEqual)(this.requiredTypes,e.requiredTypes)}}]),n}(UM),jM=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).iconManager=new zM,t.value=e.value,t.iconCss=e.iconCss,t.icon=e.icon,t}return D()(n,[{key:"getValue",value:function(){return this.value}},{key:"setIconManager",value:function(e){this.iconManager=e}},{key:"getDescriptor",value:function(){return{value:this.value,label:this.getDisplayName(),iconCss:this.iconCss,icon:this.iconManager.getIcon(this.icon)}}}]),n}(UM),WM=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).items=[],e}return D()(a,[{key:"addAffectValueRole",value:function(e,t){this.items.push(new jM({value:e,displayName:t}))}},{key:"getDescriptor",value:function(){var e=C()(b()(a.prototype),"getDescriptor",this).call(this);return e.args={items:this.items.map(function(e){return e.getDescriptor()})},e}}]),a}(KM),GM=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).items=[],e.items.forEach(function(e){t.items.push(new jM(e))}),t}return D()(n,[{key:"setI18nManager",value:function(t){C()(b()(n.prototype),"setI18nManager",this).call(this,t),this.items.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){C()(b()(n.prototype),"setIconManager",this).call(this,t),this.items.forEach(function(e){return e.setIconManager(t)})}},{key:"getDescriptor",value:function(){var e=C()(b()(n.prototype),"getDescriptor",this).call(this);return e.args={items:this.items.map(function(e){return e.getDescriptor()})},e}}]),n}(KM),YM=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).items=[],t.displayNameKey="inspector.properties.charts.axis.scaleType",t.condition=e.condition?{min:1,max:1,type:"Measure"}:null,e.ordinal&&t.items.push(new jM({displayNameKey:"inspector.properties.charts.axis.scaleTypes.Ordinal",value:"Ordinal"})),t.items.push(new jM({displayNameKey:"inspector.properties.charts.axis.scaleTypes.Linear",value:"Linear"})),t.items.push(new jM({displayNameKey:"inspector.properties.charts.axis.scaleTypes.Logarithmic",value:"Logarithmic"})),t}return D()(n,[{key:"setI18nManager",value:function(t){C()(b()(n.prototype),"setI18nManager",this).call(this,t),this.items.forEach(function(e){return e.setI18nManager(t)})}},{key:"getDescriptor",value:function(){var e=C()(b()(n.prototype),"getDescriptor",this).call(this);return e.iconCss="icon-axis",e.args={items:this.items.map(function(e){return e.getDescriptor()}),condition:this.condition},e}}]),n}(KM),qM=function(e){k()(o,e);var r=w()(o);function o(e){var t,a,n;I()(this,o),(t=r.call(this,e)).items=Oo.displayUnit;var i=null!==(a=e.isBuiltIn)&&void 0!==a&&a;return t.defaultValue=null!==(n=t.defaultValue)&&void 0!==n?n:i?H.DisplayUnit.Auto:H.DisplayUnitString.Auto,i||(t.items=t.items.map(function(e){var t=e.value;return{label:e.label,value:$u[t]}})),t.isBuiltIn=i,t}return D()(o,[{key:"getDescriptor",value:function(){var e=C()(b()(o.prototype),"getDescriptor",this).call(this);return e.args={items:this.items,isBuiltIn:this.isBuiltIn},e}}]),o}(KM),JM=[{label:"inspector.properties.tables.alignmentSettings.default",value:H.TableAlignment.Default},{label:"inspector.properties.tables.alignmentSettings.left",value:H.TableAlignment.Left},{label:"inspector.properties.tables.alignmentSettings.center",value:H.TableAlignment.Center},{label:"inspector.properties.tables.alignmentSettings.right",value:H.TableAlignment.Right}],XM=function(e){k()(i,e);var n=w()(i);function i(e){var t,a;return I()(this,i),(t=n.call(this,e)).defaultValue=null!==(a=t.defaultValue)&&void 0!==a?a:H.TableAlignment.Default,t}return D()(i,[{key:"getDescriptor",value:function(){var e=C()(b()(i.prototype),"getDescriptor",this).call(this);return e.args={items:JM},e}}]),i}(KM),QM=function(e){k()(i,e);var n=w()(i);function i(e){var t,a;return I()(this,i),(t=n.call(this,e)).defaultValue=null!==(a=t.defaultValue)&&void 0!==a?a:"General",t}return i}(KM),ZM=[{label:"inspector.properties.tables.renderSettings.text",value:H.ImageRenderSetting.Text},{label:"inspector.properties.tables.renderSettings.image_url",value:H.ImageRenderSetting.ImageURL},{label:"inspector.properties.tables.renderSettings.image_binary",value:H.ImageRenderSetting.ImageBinary}],$M=function(e){k()(o,e);var r=w()(o);function o(e){var t,a,n;I()(this,o),(t=r.call(this,e)).items=[];var i=null!==(a=e.noText)&&void 0!==a&&a;return ZM.forEach(function(e){i&&e.value===H.ImageRenderSetting.Text||t.items.push(e)}),t.defaultValue=null!==(n=t.defaultValue)&&void 0!==n?n:i?H.ImageRenderSetting.ImageURL:H.ImageRenderSetting.Text,t}return D()(o,[{key:"getDescriptor",value:function(){var e=C()(b()(o.prototype),"getDescriptor",this).call(this);return e.args={items:this.items},e}}]),o}(KM),eL=function(e){k()(r,e);var i=w()(r);function r(e){var a,t,n;switch(I()(this,r),(a=i.call(this,e)).options=[],a.itemOptions=[],a.enableCustomMeasure=!1,a.name=e.name,a.type=e.kind,a.hidden=e.hidden,a._noQuickFunction=e._noQuickFunction||!1,a._noAggregationMethod=null!==(t=e._noAggregationMethod)&&void 0!==t&&t,a._optionsWithId=e._optionsWithId||!1,a._noHierarchy=e._noHierarchy,Array.isArray(e.acceptedTypes)&&0<e.acceptedTypes.length&&(a.acceptedTypes=e.acceptedTypes),Array.isArray(e.preferredTypes)&&0<e.preferredTypes.length&&(a.preferredTypes=e.preferredTypes),e.kind){case H.DataRoleType.Attribute:case H.DataRoleType.AttributeOrValue:a._noHierarchy=!0}return e.options&&e.options.forEach(function(e){var t;switch(e.type){case eg.DataRoleOptionType.Enum:t=new GM(e);break;case eg.DataRoleOptionType.ScaleType:t=new YM(e);break;case eg.DataRoleOptionType.Format:t=new KM(e);break;case eg.DataRoleOptionType.DisplayUnit:t=new qM(e);break;case eg.DataRoleOptionType.AffectValue:t=new WM(e),a.affectValueOption=t}t&&a.options.push(t)}),null!==(n=e.itemOptions)&&void 0!==n&&n.forEach(function(e){var t;switch(e.type){case eg.DataRoleItemOptionType.Enum:t=new GM(e);break;case eg.DataRoleItemOptionType.RenderSetting:t=new $M(e);break;case eg.DataRoleItemOptionType.Alignment:t=new XM(e);break;case eg.DataRoleItemOptionType.DisplayUnit:t=new qM(e);break;case eg.DataRoleItemOptionType.Format:t=new QM(e)}t&&a.itemOptions.push(t)}),a}return D()(r,[{key:"setI18nManager",value:function(t){C()(b()(r.prototype),"setI18nManager",this).call(this,t),this.options.forEach(function(e){return e.setI18nManager(t)}),this.itemOptions.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){this.options.forEach(function(e){return e.setIconManager(t)}),this.itemOptions.forEach(function(e){return e.setIconManager(t)})}},{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"getHidden",value:function(){return this.hidden}},{key:"getDescriptor",value:function(){return{label:this.getDisplayName()||this.name,name:this.name,type:this.type,options:this.options.map(function(e){return e.getDescriptor()}),itemOptions:this.itemOptions.map(function(e){return e.getDescriptor()}),acceptedTypes:this.acceptedTypes,preferredTypes:this.preferredTypes,hidden:this.hidden,_noQuickFunction:this._noQuickFunction,_noAggregationMethod:this._noAggregationMethod,_noHierarchy:this._noHierarchy,enableCustomMeasure:this.enableCustomMeasure}}},{key:"hasAffectValue",value:function(){return!!this.affectValueOption}},{key:"getAffectValueName",value:function(){return this.affectValueOption.getName()}},{key:"addAffectValueRole",value:function(e,t){this.affectValueOption.addAffectValueRole(e,t)}},{key:"getDocument",value:function(){var t={};return this.options.forEach(function(e){t[e.getName()]=e.getDefaultValue()}),this._optionsWithId&&(t.id=Bd.a.v1()),{options:t,values:[]}}},{key:"validateOptions",value:function(e,t){if(!t)return!0;for(var a=Object.keys(t),n=0;n<a.length;){if(!e[a[n]])return!1;n++}return!0}},{key:"getItemOption",value:function(t){return this.itemOptions.find(function(e){return e.getName()===t})}},{key:"hasItemOption",value:function(t){return!!this.itemOptions.find(function(e){return e.isEqual(t)})}},{key:"getItemOptionDoc",value:function(n){return this.itemOptions.length?this.itemOptions.reduce(function(e,t){var a=t.getDescriptor();return[H.DatasetFieldSmartCategory.ImageBinary,H.DatasetFieldSmartCategory.ImageURL].includes(n)&&a.type===eg.DataRoleItemOptionType.RenderSetting?e[a.name]=n:e[a.name]=t.getDefaultValue(),e},{}):null}},{key:"validate",value:function(e){for(var t=this.itemOptions.reduce(function(e,t){return e[t.getName()]=!0,e},{}),a=0;a<e.values.length;){if(!this.validateOptions(t,e.values[a].options))return!1;a++}return!0}},{key:"migratePivotItemOptionsDoc",value:function(a,n){var i=this;if(!this.itemOptions.length)return null;var r=this.getItemOptionDoc();return n&&Object.keys(n).forEach(function(e){var t=a.getItemOption(e);t&&i.hasItemOption(t)&&(r[e]=n[e])}),r}},{key:"getUserDisplay",value:function(e){var n=this;return e?e.values.reduce(function(e,t){if(t.userDisplay&&e.push(t.userDisplay),!n._noHierarchy){var a=t.dimsDisplay;a&&e.push.apply(e,R()(Object.values(a)))}return e},[]):[]}}]),r}(UM),tL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).enableCustomMeasure=!0,t}return n}(eL),aL=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"hasSameGrouping",value:function(e){var a=e.values;return a.some(function(t,e){return a.slice(e+1).some(function(e){return t.name===e.name})})}},{key:"validate",value:function(e){return C()(b()(a.prototype),"validate",this).call(this,e)&&!this.hasSameGrouping(e)}}]),a}(eL),nL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).preferredKind=e.preferredKind||H.DataRoleType.Grouping,t.enableCustomMeasure=!0,t}return D()(n,[{key:"getDescriptor",value:function(){var e=C()(b()(n.prototype),"getDescriptor",this).call(this);return e.preferredKind=this.preferredKind,e}}]),n}(eL),iL=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return a}(eL),rL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).preferredKind=e.preferredKind||H.DataRoleType.Attribute,t.enableCustomMeasure=!0,t}return D()(n,[{key:"getDescriptor",value:function(){var e=C()(b()(n.prototype),"getDescriptor",this).call(this);return e.preferredKind=this.preferredKind,e}}]),n}(eL),oL=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;I()(this,n),this.name=e,this.min=t,this.max=a}return D()(n,[{key:"validate",value:function(e){var t=e[this.name];if(!t)return!0;var a=t.values.length;return a>=this.min&&a<=this.max}}]),n}(),sL=function(){function e(a){var n=this;I()(this,e),this.items=[],Object.keys(a).forEach(function(e){var t=a[e];n.items.push(new oL(e,t.min,t.max))})}return D()(e,[{key:"validate",value:function(t){return this.items.every(function(e){return e.validate(t)})}}]),e}(),lL=function(){function a(e){var t=this;I()(this,a),this.items=[],e.forEach(function(e){return t.items.push(new sL(e))})}return D()(a,[{key:"validate",value:function(t){return this.items.some(function(e){return e.validate(t)})}}]),a}(),uL=function(){function a(e,t){I()(this,a),e.required&&(this.required=new lL(e.required)),this.dataRoleMapping=t}return D()(a,[{key:"processDataRole",value:function(e,t){switch(this.dataRoleMapping[e]){case H.DataRoleType.Value:t.valueRoles.push(e);break;case H.DataRoleType.Grouping:t.groupingRoles.push(e);break;case H.DataRoleType.GroupingOrValue:t.groupingOrValueRoles.push(e);break;case H.DataRoleType.Attribute:t.attributeRoles.push(e);break;case H.DataRoleType.AttributeOrValue:t.attributeOrValueRoles.push(e)}}},{key:"setCommonRoleMapping",value:function(e){this.dataRoleMapping=Object.assign(Object.assign({},e),this.dataRoleMapping)}},{key:"isDataViewValid",value:function(e){return!!this.validateRoles(e)&&(!this.required||this.required.validate(e))}}]),a}(),cL=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e,t)).value=e.value,a}return D()(i,[{key:"extractPivotSetting",value:function(e){var t={dataViewType:H.DataViewType.Single,pivotSetting:V()({},this.value,e[this.value]),valueRoles:[],groupingRoles:[],groupingOrValueRoles:[],attributeRoles:[],attributeOrValueRoles:[]};return this.processDataRole(this.value,t),t}},{key:"validateRoles",value:function(e){return!!e[this.value]}}]),i}(uL),dL=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e,t)).dataRoles=[],e.dataRoles?a.dataRoles=e.dataRoles:a.dataRoles=Object.keys(t),a.trellisRowRole=e.trellisRows,a.trellisColumnRole=e.trellisColumns,a.seriesRole=e.series,a}return D()(i,[{key:"extractPivotSetting",value:function(a){var n=this,i={dataViewType:H.DataViewType.Plain,pivotSetting:{},valueRoles:[],groupingRoles:[],groupingOrValueRoles:[],attributeRoles:[],attributeOrValueRoles:[],trellisRows:this.trellisRowRole,trellisColumns:this.trellisColumnRole,series:this.seriesRole};return[this.seriesRole,this.trellisRowRole,this.trellisColumnRole].filter(function(e){return n.dataRoles.includes(e)}).forEach(function(e){var t=a[e]||{values:[],options:{}};i.pivotSetting[e]=t,n.processDataRole(e,i)}),this.dataRoles.forEach(function(e){if(!i.pivotSetting[e]){var t=a[e]||{values:[],options:{}};i.pivotSetting[e]=t,n.processDataRole(e,i)}}),i}},{key:"validateRoles",value:function(t){return this.dataRoles.every(function(e){return!!t[e]})}}]),i}(uL),pL=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e,t)).valuesRoles=e.values||[],a.rowsRoles=e.rows||[],a.columnsRoles=e.columns||[],a.rowGrandTotal=e.rowGrandTotal||!1,a.columnGrandTotal=e.columnGrandTotal||!1,a.trellisRowRole=e.trellisRows,a.trellisColumnRole=e.trellisColumns,a.seriesRole=e.series,a}return D()(i,[{key:"extractPivotSetting",value:function(t){var a=this,n={},i={pivotSetting:n,dataViewType:H.DataViewType.Matrix,valuesRoles:this.valuesRoles,rowsRoles:this.rowsRoles,columnsRoles:this.columnsRoles,valueRoles:[],groupingRoles:[],groupingOrValueRoles:[],attributeRoles:[],attributeOrValueRoles:[],rowGrandTotal:this.rowGrandTotal,columnGrandTotal:this.columnGrandTotal,trellisRows:this.trellisRowRole,trellisColumns:this.trellisColumnRole,series:this.seriesRole};this.valuesRoles.forEach(function(e){n[e]=t[e],a.processDataRole(e,i)});function r(t){return[a.trellisColumnRole,a.trellisRowRole,a.seriesRole].findIndex(function(e){return e===t})}return[].concat(R()(this.columnsRoles),R()(this.rowsRoles)).sort(function(e,t){return r(t)-r(e)}).forEach(function(e){n[e]=t[e],a.processDataRole(e,i)}),i}},{key:"validateRoles",value:function(t){return[].concat(R()(this.columnsRoles),R()(this.valuesRoles),R()(this.rowsRoles)).every(function(e){return!!t[e]})}}]),i}(uL),hL=function(e){k()(r,e);var t=w()(r);function r(n){var i;I()(this,r),(i=t.call(this,n)).dataRoles=[],i.dataViewMappings=[],i.options=[],i.iconManager=new zM,i.name=n.name,i.icon=n.icon,i.iconCss=n.iconCss,i.prefers=n.prefers;var a={};return i.dataRoleMapping=a,n.dataRoles&&n.dataRoles.forEach(function(e){var t;switch(e.kind){case H.DataRoleType.Value:a[e.name]=H.DataRoleType.Value,t=new tL(e);break;case H.DataRoleType.Grouping:a[e.name]=H.DataRoleType.Grouping,t=new aL(e);break;case H.DataRoleType.GroupingOrValue:a[e.name]=H.DataRoleType.GroupingOrValue,t=new nL(e);break;case H.DataRoleType.Attribute:a[e.name]=H.DataRoleType.Attribute,t=new iL(e);break;case H.DataRoleType.AttributeOrValue:a[e.name]=H.DataRoleType.AttributeOrValue,t=new rL(e)}t&&i.dataRoles.push(t)}),n.dataViewMappings.forEach(function(e){var t;e.single?t=new cL(e.single,a):e.plain?t=new dL(e.plain,a):e.matrix&&(t=new pL(e.matrix,a)),t&&i.dataViewMappings.push(t)}),n.options&&n.options.forEach(function(e){switch(e.type){case eg.DataRoleTemplateOptionType.Enum:i.options.push(new GM(e));break;case eg.DataRoleTemplateOptionType.HBarSetting:case eg.DataRoleTemplateOptionType.ParetoSetting:case eg.DataRoleTemplateOptionType.BulletSetting:case eg.DataRoleTemplateOptionType.SlicerSetting:e.displayNameKey="dataBindingPanel.sparklineSetting",e.iconCss="icon-setting",i.options.push(new KM(e))}}),n.conditions&&(i.conditions=new lL(n.conditions)),n.prefers&&(i.prefers=n.prefers.map(function(t){var a={};return Object.keys(t).forEach(function(e){i.getDataRole(e)?a["".concat(e).concat(zo).concat(n.name)]=t[e]:a[e]=t[e]}),a})),i}return D()(r,[{key:"setI18nManager",value:function(t){C()(b()(r.prototype),"setI18nManager",this).call(this,t),this.dataRoles.forEach(function(e){return e.setI18nManager(t)}),this.options.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){this.iconManager=t,this.dataRoles.forEach(function(e){return e.setIconManager(t)}),this.options.forEach(function(e){return e.setIconManager(t)})}},{key:"setCommonRoleMapping",value:function(t){this.dataViewMappings.forEach(function(e){return e.setCommonRoleMapping(t)})}},{key:"getDisplayName",value:function(){return C()(b()(r.prototype),"getDisplayName",this).call(this)||this.getName()}},{key:"getName",value:function(){return this.name}},{key:"getDescriptor",value:function(){var a=this;return{label:this.getDisplayName(),iconCss:this.iconCss,icon:this.iconManager.getIcon(this.icon),roles:this.dataRoles.map(function(e){var t=e.getDescriptor();return t.templateName=a.name,t}),prefers:this.prefers,options:this.options.map(function(e){return e.getDescriptor()})}}},{key:"getDocument",value:function(){var t={display:""},a={name:this.name,options:t,roles:{}};return this.dataRoles.forEach(function(e){a.roles[e.getName()]=e.getDocument()}),this.options.forEach(function(e){t[e.getName()]=e.getDefaultValue()}),a}},{key:"getSimplePivotSetting",value:function(e,t){for(var a=Object.assign(Object.assign({},t),e),n=0,i=this.dataViewMappings.length;n<i;n++){var r=this.dataViewMappings[n];if(r.isDataViewValid(a))return r.extractPivotSetting(a)}return null}},{key:"validatePivotSetting",value:function(e){for(var t=!0,a=0,n=this.dataRoles.length;a<n;a++){var i=this.dataRoles[a],r=e[i.getName()];if(!r)return!1;if(!(t=i.validate(r)))return t}return!this.conditions||this.conditions.validate(e)}},{key:"validateViewMapping",value:function(e,t){var a=Object.assign(Object.assign({},t),e);return this.dataViewMappings.every(function(e){return e.isDataViewValid(a)})}},{key:"getActualPivotSetting",value:function(n){var i={};return this.dataRoles.forEach(function(e){var t=e.getName(),a=n[t];a&&e.validate(a)?i[t]=a:i[t]=e.getDocument()}),i}},{key:"getDataRoleDescriptor",value:function(t){var e=this.dataRoles.find(function(e){return e.getName()===t});if(e){var a=e.getDescriptor();return a.templateName=this.name,a}return null}},{key:"getDataRoleNames",value:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:[],n=[];return Object.keys(this.dataRoleMapping).forEach(function(e){a.includes(t.dataRoleMapping[e])&&n.push(e)}),n}},{key:"getDataRole",value:function(t){return this.dataRoles.find(function(e){return e.getName()===t})}},{key:"getUserDisplay",value:function(e){if(!e)return[];var a=e.roles;return this.dataRoles.map(function(e){var t=a[e.getName()];return e.getUserDisplay(t)}).flat()}}]),r}(UM),yL=function(e){k()(i,e);var n=w()(i);function i(e){var a,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return I()(this,i),(a=n.call(this,e)).name="collection",a.templates=[],a.templateMapping={},a.groups=e.groups||[],a.collapsible=e.collapsible,a.editable=e.editable,a.onlyOne=e.onlyOne,a._optionsWithId=e._optionsWithId,t.forEach(function(e){var t=new hL(e);a.templates.push(t),a.templateMapping[t.getName()]=t}),a}return D()(i,[{key:"setI18nManager",value:function(t){C()(b()(i.prototype),"setI18nManager",this).call(this,t),this.templates.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){this.templates.forEach(function(e){return e.setIconManager(t)})}},{key:"setCommonRoleMapping",value:function(t){this.templates.forEach(function(e){return e.setCommonRoleMapping(t)})}},{key:"getDescriptor",value:function(){return{label:this.getDisplayName()||this.name,name:this.name,type:H.DataRoleType.DataRoleCollection,collapsible:this.collapsible,editable:this.editable,onlyOne:this.onlyOne,templates:this.templates.reduce(function(e,t){return e[t.getName()]=t.getDescriptor(),e},{})}}},{key:"getTemplate",value:function(e){if(e)return this.templateMapping[e]}},{key:"getName",value:function(){return this.name}},{key:"getDocument",value:function(){var n=this,i={options:{},groups:[]};return this.groups.forEach(function(e){var t=n.templateMapping[e];if(t){var a=t.getDocument();n._optionsWithId&&(a.options.id=Bd.a.v1()),i.groups.push(a)}}),i}},{key:"getTemplateDocument",value:function(e){var t=this.templateMapping[e];return t?t.getDocument():null}},{key:"getSimplePivotSettings",value:function(n){var i=this,r=[];return n[this.name].groups.forEach(function(e){var t=i.templateMapping[e.name];if(t){var a=t.getSimplePivotSetting(e.roles,n);a&&(a.options=Object.assign(Object.assign({},e.options),{display:e.options.display||t.getDisplayName()})),r.push(a)}}),r}},{key:"getActualDataRoleCollection",value:function(e){var n=this,t=this.getDocument(),a=e[this.name];if(!a)return t;var i=[];return a.groups.forEach(function(e){var t=n.templateMapping[e.name];if(t){var a=t.getActualPivotSetting(e.roles);i.push(Object.assign(Object.assign({},e),{roles:a}))}}),i.length?{options:a.options,groups:i}:t}},{key:"validatePivotSetting",value:function(e){for(var t=e[this.name],a=!0,n=0,i=t.groups.length;n<i;n++){var r=t.groups[n],o=this.templateMapping[r.name];if(o&&!(a=o.validatePivotSetting(Object.assign(Object.assign({},e),r.roles))))break}return a}},{key:"validateViewMapping",value:function(a){var n=this;return a[this.name].groups.every(function(e){var t=n.templateMapping[e.name];return!!t&&t.validateViewMapping(e.roles,a)})}},{key:"getPrefers",value:function(){return this.templates.reduce(function(e,t){var a=t.getDescriptor();return a.prefers&&e.push.apply(e,R()(a.prefers)),e},[])}},{key:"getGroups",value:function(){return this.groups}},{key:"getUserDisplay",value:function(e){var a=this;return e?e.groups.map(function(e){var t=e.name;return a.templateMapping[t].getUserDisplay(e)}).flat():[]}}]),i}(UM),gL=function(){function t(n,i){var e,v=this;I()(this,t),this.dataRoles=[],this.dataViewMappings=[],this._supportFirstInValue=!1,this.matchValidColumn=function(f){return function(t){var e,a,n,i=f.split(zo),r=N()(i,2),o=r[0],s=r[1],l=v.getDataRole(o,s).getDescriptor(),u=function e(t){var a;switch(t){case H.DataRoleType.Value:a=H.ColumnCategory.Measure;break;case H.DataRoleType.Grouping:case H.DataRoleType.Attribute:a=H.ColumnCategory.Dimension;break;case H.DataRoleType.AttributeOrValue:case H.DataRoleType.GroupingOrValue:a=e(l.preferredKind)}return a}(l.type),c=null===(a=null===(e=l.acceptedTypes)||void 0===e?void 0:e.includes(t.dataType))||void 0===a||a,d=!u||t.category===u,p=!0;if(l.preferredTypes){var h=ae.partition(function(e){return Object.values(H.FieldType).includes(e)},l.preferredTypes),y=N()(h,2),g=y[0],m=y[1];g.length&&(d=g.includes((n=t.category,H.FieldType[H.ColumnCategory[n]]))),m.length&&(p=m.some(function(e){return[t.dataType,t.smartCategory,t.type].includes(e)}))}return d&&c&&p}};var r={};if(this.dataRoleMapping=r,this._supportFirstInValue=i._supportFirstInValue,i.dataRoles){var o=[];i.dataRoles.forEach(function(e,t){var a;switch(e.kind){case H.DataRoleType.Value:r[e.name]=H.DataRoleType.Value,a=new tL(e),o.push(a);break;case H.DataRoleType.Grouping:r[e.name]=H.DataRoleType.Grouping,a=new aL(e);break;case H.DataRoleType.GroupingOrValue:r[e.name]=H.DataRoleType.GroupingOrValue,a=new nL(e);break;case H.DataRoleType.Attribute:r[e.name]=H.DataRoleType.Attribute,a=new iL(e);break;case H.DataRoleType.AttributeOrValue:r[e.name]=H.DataRoleType.AttributeOrValue,a=new rL(e);break;case H.DataRoleType.DataRoleCollection:v.dataRolesCollection||(v.dataRolesCollectionPosition=t,v.dataRolesCollection=new yL(e,i.templates),v.dataRolesCollection.setI18nManager(n))}a&&(a.setI18nManager(n),v.dataRoles.push(a),a.hasAffectValue()&&(v.affectValueDataRole=a))}),i.dataViewMappings&&!this.dataRolesCollection&&i.dataViewMappings.forEach(function(e){var t;e.single?t=new cL(e.single,r):e.plain?t=new dL(e.plain,r):e.matrix&&(t=new pL(e.matrix,r)),t&&v.dataViewMappings.push(t)}),this.affectValueDataRole&&o.forEach(function(e){e.getHidden()||v.affectValueDataRole.addAffectValueRole(e.getName(),e.getDisplayName())}),this.dataRolesCollection&&this.dataRolesCollection.setCommonRoleMapping(r)}i.conditions&&(this.conditions=new lL(i.conditions)),this.dataRolesCollection?this.prefers=this.dataRolesCollection.getPrefers():this.prefers=null!==(e=i.prefers)&&void 0!==e?e:[]}return D()(t,[{key:"setIconManager",value:function(t){this.dataRoles.forEach(function(e){e.setIconManager(t)}),this.dataRolesCollection&&this.dataRolesCollection.setIconManager(t)}},{key:"getDescriptors",value:function(){var e=this.dataRoles.filter(function(e){return!e.getHidden()}).map(function(e){return e.getDescriptor()});if(this.dataRolesCollection){var t=this.dataRolesCollection.getDescriptor();e.splice(this.dataRolesCollectionPosition,0,t)}return e}},{key:"getInitPivotSetting",value:function(){var t={};return this.dataRoles.forEach(function(e){t[e.getName()]=e.getDocument()}),this.dataRolesCollection&&(t[this.dataRolesCollection.getName()]=this.dataRolesCollection.getDocument()),t}},{key:"getTemplateDocument",value:function(e){return this.dataRolesCollection?this.dataRolesCollection.getTemplateDocument(e):null}},{key:"getSimplePivotSettings",value:function(e){if(this.dataRolesCollection)return this.dataRolesCollection.getSimplePivotSettings(e).every(function(e){return null===e})?[]:this.dataRolesCollection.getSimplePivotSettings(e);for(var t=[],a=0,n=this.dataViewMappings.length;a<n;a++){var i=this.dataViewMappings[a];if(i.isDataViewValid(e)){t.push(i.extractPivotSetting(e));break}}return t}},{key:"validatePivotSetting",value:function(e){for(var t=!0,a=0,n=this.dataRoles.length;a<n;a++){var i=this.dataRoles[a],r=e[i.getName()];if(!r)return!1;if(!(t=i.validate(r)))return t}return this.dataRolesCollection?this.dataRolesCollection.validatePivotSetting(e):!this.conditions||this.conditions.validate(e)}},{key:"validateViewMapping",value:function(t){return this.dataRolesCollection?this.dataRolesCollection.validateViewMapping(t):this.dataViewMappings.every(function(e){return e.isDataViewValid(t)})}},{key:"getActualPivotSetting",value:function(n){var i={};if(this.dataRoles.forEach(function(e){var t=e.getName(),a=n[t];a&&e.validate(a)?i[t]=a:i[t]=e.getDocument()}),this.dataRolesCollection){var e=this.dataRolesCollection.getName();i[e]=this.dataRolesCollection.getActualDataRoleCollection(n)}return i}},{key:"correctPivotSetting",value:function(n){var i=Object.assign({},n);return this.dataRoles.forEach(function(e){var t=e.getName(),a=n[t];i[t]=Object.assign(Object.assign({},a),{values:a.values.map(ae.omit(["notMatchSchema"]))})}),i}},{key:"getAffectValueDataRole",value:function(){return this.affectValueDataRole}},{key:"getDataRoleDescriptor",value:function(e,t){var a,n=this.getDataRole(e);if(n)return n.getDescriptor();var i=null===(a=this.dataRolesCollection)||void 0===a?void 0:a.getTemplate(t);return i?i.getDataRoleDescriptor(e):null}},{key:"getDataRoleMeta",value:function(){var a=this;return this.dataRoles.reduce(function(e,t){return t.getHidden()&&e.hiddenDataRoles.push(t.getName()),a._supportFirstInValue||t.getType()!==H.DataRoleType.Attribute&&t.getType()!==H.DataRoleType.AttributeOrValue||e.weakDataRoles.push(t.getName()),e},{hiddenDataRoles:[],weakDataRoles:[]})}},{key:"getDataRoleNames",value:function(e,t){var a=this,n=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length?t:void 0,r=[];if(Object.keys(this.dataRoleMapping).forEach(function(e){n.includes(a.dataRoleMapping[e])&&r.push(e)}),!i)return r;if(!this.dataRolesCollection)return r;var o=this.dataRolesCollection.getTemplate(i);return o?r:r.concat(o.getDataRoleNames())}},{key:"getDataRole",value:function(t,e){if(!e)return this.dataRoles.find(function(e){return e.getName()===t});var a=this.dataRolesCollection.getTemplate(e);return a?a.getDataRole(t):null}},{key:"allocateColumns",value:function(t){var s=this;if(!this.prefers.length)return{};for(var e=function(e){var i={},r=s.prefers[e],o=t;if(Object.keys(r).forEach(function(e){var t,a=o.filter(s.matchValidColumn(e)),n=null!==(t=r[e].max)&&void 0!==t?t:a.length;i[e]=ae.take(n,a),o=ae.without(i[e],o)}),0===o.length)return{v:i}},a=0;a<this.prefers.length;a++){var n=e(a);if("object"===E()(n))return n.v}return{}}},{key:"allocateColumn",value:function(u,c){var d,p=this;if(!this.prefers.length)return null;for(var e=0;e<this.prefers.length;e++){var h=this.prefers[e],y=Object.keys(h),t=function(e){var t=h[y[e]].max,a=void 0===t?Number.MAX_SAFE_INTEGER:t,n=y[e].split(zo),i=N()(n,2),r=i[0],o=i[1],s=[];if(o){var l=c.collection.groups.find(function(e){return e.name===o});s=null!==(d=null==l?void 0:l.roles[r].values)&&void 0!==d?d:[]}else s=c[y[e]].values;return s.length>a?"break":s.length<a&&p.matchValidColumn(y[e])(u)?{v:y[e]}:void 0};e:for(var a=0;a<y.length;a++){var n=t(a);switch(n){case"break":break e;default:if("object"===E()(n))return n.v}}}return null}},{key:"getGroups",value:function(){var e,t;return null!==(t=null===(e=this.dataRolesCollection)||void 0===e?void 0:e.getGroups())&&void 0!==t?t:[]}},{key:"getDataRoleCollectionDisplays",value:function(e){if(!this.dataRolesCollection)return[];var t=e[this.dataRolesCollection.getName()];return this.dataRolesCollection.getUserDisplay(t)||[]}},{key:"getDataRolesDisplays",value:function(n){var e;return(null===(e=this.dataRoles)||void 0===e?void 0:e.map(function(e){var t=e.getName(),a=n[t];return e.getUserDisplay(a)}).flat())||[]}},{key:"getUserDisplayKey",value:function(e){var t=this.getDataRoleCollectionDisplays(e),a=this.getDataRolesDisplays(e);return[].concat(R()(t),R()(a)).reduce(function(e,t){var a=ul(t);return a!==t&&e.push(a),e},[])}}]),t}(),mL=function(e){k()(n,e);var a=w()(n);function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return I()(this,n),(e=a.call(this,t)).iconManager=new zM,e.name=t.name||"",e.icon=t.icon||"",e.iconCss=t.iconCss||"",e}return D()(n,[{key:"getName",value:function(){return this.name}},{key:"hasValue",value:function(){return!1}},{key:"getVisibility",value:function(){return!0}},{key:"setIconManager",value:function(e){this.iconManager=e}},{key:"getDescriptor",value:function(){var e=this.getDisplayName()||this.name;return{name:this.name,label:e,icon:this.iconManager.getIcon(this.icon),iconCss:this.iconCss}}}]),n}(UM),fL=mg.InheritProperty,vL=function(e){k()(r,e);var i=w()(r);function r(e){var t;if(I()(this,r),(t=i.call(this,e)).valuePath=[],t.structedPath=[],t.hidden=!1,t.pristine=!1,t.freezeRelativePath=!1,t.inheritFromProperty=!1,t.inheritFromPropertyPath=["options","property"],e){if(t.type=e.type,t.inheritFrom=e.inheritFrom,e.inheritFrom&&!e.inheritFrom.startsWith("dashboard.")){var a=e.inheritFrom.split(".");t.inheritFromProperty=!0;var n=e._ancestorPath?e._ancestorPath.split("."):t.inheritFromPropertyPath;t.inheritFromPropertyPath=[].concat(R()(n),R()(a))}t.defaultValue=e.defaultValue,e.structuredPath?(t.structedPath=e.structuredPath.split("."),t.unionName=[].concat(R()(t.structedPath),[t.name]).join(".")):t.unionName=e.name,t.hidden=e.hidden||!1,t.pristine=e._pristine||!1,e._ancestorPath&&(t.setRelativePath(e._ancestorPath),t.freezeRelativePath=!0)}return t}return D()(r,[{key:"getInheritDashboard",value:function(e){if(!this.inheritFromProperty)switch(this.inheritFrom){case fL.TextStyle:return e.scenario.contentTextStyle;case fL.TitleTextStyle:return e.scenario.titleTextStyle;case fL.Palette:return e.scenario.paletteId;case fL.Padding:return e.scenario.padding;case fL.Margin:return e.scenario.margin;case fL.CornerRadius:return e.scenario.cornerRadius;case fL.GraphOpacity:return e.scenario.graphOpacity;case fL.Border:return e.scenario.border;case fL.Shadow:return e.scenario.shadow;case fL.AutoGradient:return e.scenario.autoGradient;case fL.BackgroundColor:return e.scenario.backgroundColor;case fL.ClickAction:return e.scenario.clickAction;case fL.ContextMenuActions:return e.scenario.contextMenuActions;case fL.ScrollbarThumbColor:return e.scenario.scrollbarThumbBackColor;case fL.ScrollbarTrackColor:return e.scenario.scrollbarTrackBackColor;case fL.BorderColor:return e.scenario.contentTextStyle.color;case fL.BorderSize:return e.scenario.border.size;case fL.NoDataText:return e.scenario.noDataText;case fL.NoDataTextStyle:return e.scenario.noDataTextStyle;case fL.NoDataImage:return e.scenario.noDataImage;case fL.NoDataImageSize:return e.scenario.noDataImageSize;case fL.NoDataTextAlignment:return e.scenario.noDataTextAlignment;case fL.NoDataTextVerticalAlignment:return e.scenario.noDataTextVerticalAlignment;case fL.NullItemsString:return e.scenario.nullItemsString;case fL.EmmptyItemsString:return e.scenario.emptyItemsString}}},{key:"assignInheritPropertyValue",value:function(e){if(void 0===this.getValueOnPath(e)&&this.inheritFromProperty){var t=Bo.a.get(e,this.inheritFromPropertyPath);this.safeAssign(e,t)}}},{key:"getValueOnPath",value:function(e){for(var t=e,a=this.valuePath,n=0,i=a.length;n<i;n++){if(void 0===(t=t[a[n]]))break}return t}},{key:"setValuePath",value:function(e){this.valuePath=e.split(".")}},{key:"setRelativePath",value:function(e){if(!this.freezeRelativePath){var t=e.split("."),a=this.name.split(".");this.valuePath=[].concat(R()(t),R()(this.structedPath),R()(a))}}},{key:"getValuePath",value:function(){return this.valuePath.join(".")}},{key:"isInHiddenState",value:function(e){return!!this.hidden||(!!(e.state&&e.state.hiddenEditors&&e.state.hiddenEditors[this.unionName])||void 0)}},{key:"getVisibility",value:function(e,t){return!this.isInHiddenState(e)&&C()(b()(r.prototype),"getVisibility",this).call(this,e,t)}},{key:"safeAssign",value:function(e,t,a){var n=2<arguments.length&&void 0!==a&&a;if(0!==this.valuePath.length&&(n||void 0!==t))if(1!==this.valuePath.length){for(var i=e,r=0,o=this.valuePath.length-1;r<o;r++){var s=this.valuePath[r];void 0===i[s]&&(i[s]={}),i=i[s]}i[this.valuePath[this.valuePath.length-1]]=t}else e[this.valuePath[0]]=t}},{key:"hasValue",value:function(){return!0}},{key:"getValue",value:function(e,t){var a=this.getValueOnPath(e);return void 0!==a?a:void 0!==this.defaultValue?this.defaultValue:this.inheritFrom&&!this.inheritFromProperty&&t?this.getInheritDashboard(t):void 0}},{key:"getValueState",value:function(e){return void 0!==this.getValueOnPath(e)?H.PropertyValueState.Modified:this.defaultValue?H.PropertyValueState.Default:this.inheritFrom?H.PropertyValueState.Inherited:H.PropertyValueState.Unset}},{key:"getCalculatedValue",value:function(e,t){return this.getValue(e,t)}},{key:"getDefaultValue",value:function(){return this.defaultValue}},{key:"setDefaultValue",value:function(e){this.defaultValue=e}},{key:"getDescriptor",value:function(e){var t=C()(b()(r.prototype),"getDescriptor",this).call(this);return t.valuePath=this.valuePath.join("."),t.type=t.name,t.valueState=this.getValueState(e),t.defaultValue=this.getDefaultValue(),t.pristine=this.pristine,t}},{key:"isEqual",value:function(e){return this.type===e.type&&this.getValuePath()===e.getValuePath()}},{key:"isPristine",value:function(){return this.pristine}},{key:"isValidValue",value:function(){return!0}},{key:"isInheritFromProperty",value:function(){return this.inheritFromProperty}},{key:"getUnionName",value:function(){return this.unionName}}]),r}(mL),bL=function(e){k()(r,e);var i=w()(r);function r(e){var t,a,n;return I()(this,r),(t=i.call(this,e)).min=null!==(a=e.min)&&void 0!==a?a:0,t.max=null!==(n=e.max)&&void 0!==n?n:360,t.step=e.step||1,t.markStep=e.markStep||~~(Math.abs(t.max-t.min)/10)||1,t.marks=e.marks,t.isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=0),t}return D()(r,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(r.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.SliderEditor,a.args={minValue:this.min,maxValue:this.max,step:this.step,markStep:this.markStep,marks:this.marks,withLabel:!1},a}},{key:"isValidValue",value:function(e){return Number.isInteger(e)}}]),r}(vL),CL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).hasPage=e.hasPage,t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.AutoScrollEditor,a.args={hasPage:this.hasPage,labelPosition:"top",minValue:500,maxValue:1500,step:500,marks:{1500:"",1e3:"",500:""}},a}}]),n}(vL),TL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=!!t.defaultValue),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.BoolEditor,a}},{key:"isValidValue",value:function(e){return Object(Ho.isBoolean)(e)||Object(Ho.isUndefined)(e)}}]),n}(vL),SL=function(e){k()(i,e);var t=w()(i);function i(){return I()(this,i),t.apply(this,arguments)}return D()(i,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.args={labelPosition:"top"},a.type=H.EditorType.BorderEditor,a}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?Object.assign(Object.assign({},n),{color:Vc(n.color,a.docTheme)}):n}},{key:"getValue",value:function(e,t){var a=this.getValueOnPath(e)||{},n=this.getDefaultValue();if(n&&(a=Object.assign(Object.assign({},n),a)),this.inheritFrom&&!this.inheritFromProperty&&t){var i=this.getInheritDashboard(t);a=Object.assign(Object.assign({},i),a)}return a}}]),i}(vL),DL=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this,e)).resetType=e.resetType||H.ColorResetType.None,t.resetType===H.ColorResetType.Auto&&t.inheritFrom&&(t.resetType=H.ColorResetType.Inherit),t.isValidValue(t.defaultValue)||(t.defaultValue=void 0),t}return D()(i,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.args={resetType:this.resetType,withReset:!0},a.type=H.EditorType.ColorEditor,a}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?Vc(n,a.docTheme):n}},{key:"isValidValue",value:function(e){return Object(Ho.isUndefined)(e)||Object(Ho.isString)(e)&&(a=Yu(t=e),n=!1,t?a?!(!uc.some(function(e){return e&&t&&e.toLowerCase()===t.toLowerCase()})&&-1===t.search(cc)&&-1===t.search(hc)&&-1===t.search(yc)):uc.some(function(e){return e&&t&&e.toLowerCase()===t.toLowerCase()})||-1!==t.search(cc)||-1!==t.search(hc)||t===is||!1:!n);var t,a,n}}]),i}(vL),kL=function(e){k()(i,e);var t=w()(i);function i(){return I()(this,i),t.apply(this,arguments)}return D()(i,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.args={labelPosition:"top"},a.type=H.EditorType.ColorRangeEditor,a}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?Object.assign(Object.assign({},n),{rangeColors:n.rangeColors.map(function(e){return Vc(e,a.docTheme)})}):n}},{key:"getValue",value:function(e,t){var a=C()(b()(i.prototype),"getValue",this).call(this,e,t),n=C()(b()(i.prototype),"getDefaultValue",this).call(this);return n&&(a=Object.assign(Object.assign({},n),a)),a}}]),i}(vL),wL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).items=[],e.items&&e.items.forEach(function(e){t.items.push(new jM(e))}),t}return D()(n,[{key:"setI18nManager",value:function(t){C()(b()(n.prototype),"setI18nManager",this).call(this,t),this.items.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){C()(b()(n.prototype),"setIconManager",this).call(this,t),this.items.forEach(function(e){return e.setIconManager(t)})}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.EnumEditor,a.args={items:this.items.map(function(e){return e.getDescriptor()})},a}},{key:"setUseBuildInI18n",value:function(t){C()(b()(n.prototype),"setUseBuildInI18n",this).call(this,t),this.items.forEach(function(e){return e.setUseBuildInI18n(t)})}},{key:"isValidValue",value:function(t){return-1!==this.items.findIndex(function(e){return e.getValue()===t})}}]),n}(vL),xL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).precision=2,t.min=e.min,t.max=e.max,t.excludeMin=e._excludeMin,t.excludeMax=e._excludeMax,t.placeholder=e.placeholder,t.allowNullValue=e._allowNullValue,t.isValidValue(t.defaultValue)||(t.defaultValue=void 0),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.args={precision:this.precision,maxValue:this.max,minValue:this.min,excludeMaxValue:this.excludeMax,excludeMinValue:this.excludeMin,placeholder:this.placeholder,allowNullValue:this.allowNullValue},a.type=H.EditorType.FloatEditor,a}},{key:"isValidValue",value:function(e){return Object(Ho.isFinite)(e)||Object(Ho.isNil)(e)}}]),n}(vL),AL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue="General"),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.FormatEditor,a}},{key:"isValidValue",value:function(e){return Object(Ho.isString)(e)}}]),n}(vL),IL=(NM={},V()(NM,H.DisplayUnit.Auto,!0),V()(NM,H.DisplayUnit.None,!0),V()(NM,H.DisplayUnit.Hundreds,!0),V()(NM,H.DisplayUnit.Thousands,!0),V()(NM,H.DisplayUnit.TenThousand,!0),V()(NM,H.DisplayUnit.HundredThousand,!0),V()(NM,H.DisplayUnit.Millions,!0),V()(NM,H.DisplayUnit.TenMillion,!0),V()(NM,H.DisplayUnit.HundredMillion,!0),V()(NM,H.DisplayUnit.Billions,!0),V()(NM,H.DisplayUnit.Trillions,!0),NM),PL=function(e){k()(i,e);var n=w()(i);function i(e){var t;I()(this,i);var a=(t=n.call(this,e)).defaultValue;return Object(Ho.isString)(a)&&(a=ec[a]),t.isValidValue(a)||t.inheritFrom||(a=H.DisplayUnit.Auto),t.defaultValue=a,t}return D()(i,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.DisplayUnitEditor,a}},{key:"isValidValue",value:function(e){return!!IL[e]}},{key:"getCalculatedValue",value:function(e,t){var a=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return Jr.isVisual(e)?$u[a]:a}}]),i}(vL),_L=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.GrandTotalEditor,a.args={labelPosition:"top"},a}},{key:"getValue",value:function(e,t){var a=Bo.a.cloneDeep(this.getValueOnPath(e)||{}),n=this.getDefaultValue();if(n&&(a=Object.assign(Object.assign({},n),a)),this.inheritFrom&&!this.inheritFromProperty&&t){var i=this.getInheritDashboard(t);a=Object.assign(Object.assign({},i),a)}return a}},{key:"getCalculatedValue",value:function(e,t,a){var n=this.getValue(e,t),i=a.docTheme;return n?Object.assign(Object.assign({},n),{foreColor:Vc(n.foreColor,i),backColor:Vc(n.backColor,i)}):n}}]),n}(vL),ML=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getDescriptor",value:function(){return null}}]),a}(vL),LL=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this,e)).isValidValue(t.defaultValue)||(t.defaultValue=void 0),t}return D()(i,[{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?ll(n,a.imageList):n}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.ImageEditor,a.args={withReset:!0},a}},{key:"isValidValue",value:function(e){return Object(Ho.isUndefined)(e)||Object(Ho.isString)(e)}}]),i}(vL),RL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).max=e.max,t.min=e.min,t.step=e.step||1,t.isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=e.min||0),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.args={maxValue:this.max,minValue:this.min,step:this.step},a.type=H.EditorType.IntegerEditor,a}},{key:"isValidValue",value:function(e){return Number.isInteger(e)}}]),n}(vL),VL=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.JumpToEditor,a.args={withLabel:!1,scenarioId:e.id},a}}]),n}(vL),NL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).maxLength=e.maxLength,t.regex=e.regex,t.isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=""),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.args={maxLength:this.maxLength,pattern:this.regex,withReset:!0},a.type=H.EditorType.TextEditor,a}},{key:"isValidValue",value:function(e){return Object(Ho.isString)(e)}}]),n}(vL),EL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).rows=e.rows||6,t.isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=""),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.args={rows:this.rows,labelPosition:"top",withReset:!0},a.type=H.EditorType.TextAreaEditor,a}},{key:"isValidValue",value:function(e){return Object(Ho.isString)(e)}}]),n}(NL),FL=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.MapSelectorEditor,a.args={scenarioId:e.id},a}}]),n}(vL);function OL(e,t){return"object"===E()(e)&&null!==e?Object.assign(Object.assign({},e),{colorStops:e.colorStops.map(function(e){return Vc(e,t)})}):"string"==typeof e?Vc(e,t):e}function HL(t,e){return(1<arguments.length&&void 0!==e?e:[]).find(function(e){return e.key===t})}function BL(t,e,a){var n=HL(e,2<arguments.length&&void 0!==a?a:[]);if(n)return n.colors.map(function(e){return OL(e,t)});var i,r,o,s=["=Theme.Colors!Accent1","=Theme.Colors!Accent2","=Theme.Colors!Accent3","=Theme.Colors!Accent4","=Theme.Colors!Accent5","=Theme.Colors!Accent6"];if(e){var l=(o=HL(i=e,r))?{id:o.key,name:o.mode,colors:o.colors}:ae.flatten(Object.values(ac)).find(function(e){return e.id===i})||ac.themeColors[0];l&&(s=l.colors)}return[OL(s[0],t),OL(s[1],t),OL(s[2],t),OL(s[3],t),OL(s[4],t),OL(s[5],t)]}var UL,zL=function(e){k()(i,e);var t=w()(i);function i(){return I()(this,i),t.apply(this,arguments)}return D()(i,[{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return BL(a.docTheme,n,t.dashboard.customPaletteList)}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.PaletteEditor,a}}]),i}(vL),KL=function(e){k()(r,e);var i=w()(r);function r(e){var t,a,n;return I()(this,r),(t=i.call(this,e)).max=null!==(a=e.max)&&void 0!==a?a:100,t.min=null!==(n=e.min)&&void 0!==n?n:0,t.isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=t.min),t}return D()(r,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(r.prototype),"getDescriptor",this).call(this,e,t);return a.args={maxValue:this.max,minValue:this.min,withReset:!0},a.type=H.EditorType.PercentageEditor,a}},{key:"isValidValue",value:function(e){return Number.isInteger(e)}}]),r}(vL),jL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).defaultValue||t.inheritFrom||(t.defaultValue={top:0,bottom:0,left:0,right:0}),e.editorType&&(t.editorType=e.editorType),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.PositionEditor,a.args={withReset:!0,editorType:this.editorType},a}},{key:"getValue",value:function(e,t){var a=this.getValueOnPath(e),n=this.getDefaultValue();return void 0!==n?a=Object.assign(Object.assign({},n),a):this.inheritFrom&&!this.inheritFromProperty&&t&&(a=Object.assign(Object.assign({},this.getInheritDashboard(t)),a)),a}}]),n}(vL),WL=function(e){k()(i,e);var t=w()(i);function i(e){return I()(this,i),t.call(this,e)}return D()(i,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.args={labelPosition:"top"},a.type=H.EditorType.ShadowEditor,a}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?Object.assign(Object.assign({},n),{color:Vc(n.color,a.docTheme)}):n}},{key:"getValue",value:function(e,t){var a=this.getValueOnPath(e)||{},n=this.getDefaultValue();if(n&&(a=Object.assign(Object.assign({},n),a)),this.inheritFrom&&!this.inheritFromProperty&&t){var i=this.getInheritDashboard(t);a=Object.assign(Object.assign({},i),a)}return a}}]),i}(vL),GL=function(e){k()(o,e);var t=w()(o);function o(e){return I()(this,o),t.call(this,e)}return D()(o,null,[{key:"inheritProperty",value:function(e,t,a,n){return void 0!==e[n]?e[n]:void 0!==t[n]?t[n]:a[n]}}]),D()(o,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(o.prototype),"getDescriptor",this).call(this,e,t),n=this.getAllValues(e,t).val;return a.args={labelPosition:"top",shadowSizeType:"number"},a.type=H.EditorType.ShadowEditor,a.valueState={type:this.getPerPropertyState(n,"type"),color:this.getPerPropertyState(n,"color"),size:this.getPerPropertyState(n,"size")},a}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(o.prototype),"getCalculatedValue",this).call(this,e,t);return n?Object.assign(Object.assign({},n),{color:Vc(n.color,a.docTheme)}):n}},{key:"getValue",value:function(e,t){var a=this.getAllValues(e,t),n=a.val,i=a.defaultValue,r=a.inheritValue;return{type:o.inheritProperty(n,i,r,"type"),color:o.inheritProperty(n,i,r,"color"),size:o.inheritProperty(n,i,r,"size")}}},{key:"getAllValues",value:function(e,t){var a=this.getValueOnPath(e)||{},n=this.getDefaultValue()||{},i={};return this.inheritFromProperty&&this.inheritFrom?i=Bo.a.get(e,this.inheritFromPropertyPath)||{}:this.inheritFrom&&!this.inheritFromProperty&&t&&(i=this.getInheritDashboard(t)||{}),{val:a,defaultValue:n,inheritValue:i}}},{key:"getPerPropertyState",value:function(e,t){var a=e[t],n=this.defaultValue||{};return void 0!==a?H.PropertyValueState.Modified:n[t]?H.PropertyValueState.Default:this.inheritFrom?H.PropertyValueState.Inherited:H.PropertyValueState.Unset}},{key:"assignInheritPropertyValue",value:function(e){var t=this.getValueOnPath(e);if(this.inheritFromProperty){var a=Bo.a.get(e,this.inheritFromPropertyPath);this.safeAssign(e,Bo.a.merge({},a,t))}}}]),o}(vL),YL=mg.InheritProperty,qL=function(e){k()(o,e);var a=w()(o);function o(e){var t;return I()(this,o),(t=a.call(this,e)).fontType=H.DocthemePrefixFontType.minor,t.blackList=e._blackList||[],t.useAbsoluteFontSize=e._useAbsoluteFontSize,t.fontFamilyList=e.fontFamilyList||ms,t.disableColor=e._disableColor,t.fontType=t.inheritFrom===YL.TitleTextStyle?H.DocthemePrefixFontType.major:H.DocthemePrefixFontType.minor,t}return D()(o,[{key:"getPerPropertyState",value:function(e,t){var a=e[t],n=this.defaultValue||{};return void 0!==a?H.PropertyValueState.Modified:n[t]?H.PropertyValueState.Default:this.inheritFrom?H.PropertyValueState.Inherited:H.PropertyValueState.Unset}},{key:"getAllValues",value:function(e,t){var a=this.getValueOnPath(e)||{},n=this.getDefaultValue()||{},i={};return this.inheritFromProperty&&this.inheritFrom?i=Bo.a.get(e,this.inheritFromPropertyPath)||{}:this.inheritFrom&&!this.inheritFromProperty&&t&&(i=this.getInheritDashboard(t)||{}),{val:a,defaultValue:n,inheritValue:i}}},{key:"getValue",value:function(e,t){var a=this.getAllValues(e,t),n=a.val,i=a.defaultValue,r=a.inheritValue;return{fontFamily:o.inheritProperty(n,i,r,"fontFamily"),fontSize:o.inheritProperty(n,i,r,"fontSize"),fontWeight:o.inheritProperty(n,i,r,"fontWeight"),fontStyle:o.inheritProperty(n,i,r,"fontStyle"),color:o.inheritProperty(n,i,r,"color")}}},{key:"getCalculatedValue",value:function(e,t,a){var n,i=this.getValue(e,t);if(i){i.color=Vc(i.color,a.docTheme);var r=this.getInheritDashboard(t)||(null===(n=t.scenario)||void 0===n?void 0:n.contentTextStyle);i.fontSize=_u(i.fontSize,r)}return i}},{key:"getDefaultValue",value:function(){return C()(b()(o.prototype),"getDefaultValue",this).call(this)||{fontFamily:"",fontSize:"1.0x",fontWeight:"",fontStyle:"",color:""}}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(o.prototype),"getDescriptor",this).call(this,e,t);a.args={blackList:this.blackList,useAbsoluteFontSize:this.useAbsoluteFontSize,labelPosition:"top",fontFamilyList:this.fontFamilyList,disableColor:this.disableColor,fontType:this.fontType};var n=this.getAllValues(e,t).val;return a.valueState={fontFamily:this.getPerPropertyState(n,"fontFamily"),fontSize:this.getPerPropertyState(n,"fontSize"),fontWeight:this.getPerPropertyState(n,"fontWeight"),fontStyle:this.getPerPropertyState(n,"fontStyle"),color:this.getPerPropertyState(n,"color")},a.type=H.EditorType.TextStyleEditor,a}},{key:"assignInheritPropertyValue",value:function(e){var t=this.getValueOnPath(e);if(this.inheritFromProperty){var a=Bo.a.get(e,this.inheritFromPropertyPath);this.safeAssign(e,Bo.a.merge({},a,t))}}}],[{key:"inheritProperty",value:function(e,t,a,n){return e[n]||t[n]||a[n]}}]),o}(vL),JL=function(e){k()(o,e);var a=w()(o);function o(e){var t;return I()(this,o),(t=a.call(this,e)).rows=3,t.maxLength=e.maxLength,t.regex=e.regex,t.isValidValue(t.defaultValue)||t.inheritFrom||(t.defaultValue=""),e.multiline&&(t.multiline=!0),e.rows&&(t.rows=e.rows),t}return D()(o,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(o.prototype),"getDescriptor",this).call(this,e,t);return a.args={maxLength:this.maxLength,pattern:this.regex,withReset:!0,rows:this.rows},a.type=this.multiline?H.EditorType.LanguageResourceTextAreaEditor:H.EditorType.LanguageResourceEditor,a}},{key:"isValidValue",value:function(e){return Object(Ho.isString)(e)}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(o.prototype),"getCalculatedValue",this).call(this,e,t,a),i=a.languageResource,r=ul(n);return i&&r!==n&&i[r]||n}}]),o}(vL),XL=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).isSubTitle=e.isSubTitle,t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.AutoTitleEditor,a.args={withReset:!0,scenarioId:e.id,isSubTitle:this.isSubTitle},a}}]),n}(JL),QL=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getDescriptor",value:function(e){var t=C()(b()(a.prototype),"getDescriptor",this).call(this,e);return t.type=H.EditorType.KPIConditionalPreviewEditor,t}}]),a}(vL),ZL=function(e){k()(r,e);var t=w()(r);function r(e){return I()(this,r),t.call(this,Object.assign(Object.assign({},e),{defaultValue:[]}))}return D()(r,[{key:"getDescriptor",value:function(){return null}},{key:"getCalculatedValue",value:function(e,a,n){var t=C()(b()(r.prototype),"getCalculatedValue",this).call(this,e,a),i=n.docTheme;return t?t.map(function(e){var t;return Object.assign(Object.assign({},e),{style:Object.assign(Object.assign({},e.style),{color:Vc(e.style.color,i),secondaryColor:Vc(e.style.secondaryColor,i)}),extendsStyle:{symbolStyle:e.extendsStyle.symbolStyle?Object.assign(Object.assign({},e.extendsStyle.symbolStyle),{color:Vc(e.extendsStyle.symbolStyle.color,i)}):null,borderStyle:e.extendsStyle.borderStyle?Object.assign(Object.assign({},e.extendsStyle.borderStyle),{borderColor:Vc(e.extendsStyle.borderStyle.borderColor,i)}):null,labelStyle:e.extendsStyle.labelStyle?Object.assign(Object.assign({},e.extendsStyle.labelStyle),{fontStyle:e.extendsStyle.labelStyle.fontStyle?Object.assign(Object.assign({},e.extendsStyle.labelStyle.fontStyle),{fontSize:_u(e.extendsStyle.labelStyle.fontStyle.fontSize,null===(t=a.scenario)||void 0===t?void 0:t.contentTextStyle),color:Vc(e.extendsStyle.labelStyle.fontStyle.color,i),fontFamily:e.extendsStyle.labelStyle.fontStyle.fontFamily||i.textStyle.minorFontFamily}):null}):null,shapeImageStyle:e.extendsStyle.shapeImageStyle?Object.assign(Object.assign({},e.extendsStyle.shapeImageStyle),{labelShapeImageId:e.extendsStyle.shapeImageStyle.labelShapeImageId&&ll(e.extendsStyle.shapeImageStyle.labelShapeImageId,n.imageList)}):null}})}):t}}]),r}(vL),$L=function(e){k()(i,e);var t=w()(i);function i(e){return I()(this,i),t.call(this,Object.assign(Object.assign({},e),{defaultValue:[{type:Cr,detailLevel:Hn,lineType:Fn.Solid,lineColor:void 0,lineWidth:1,polynomialDegree:2}]}))}return D()(i,[{key:"getDescriptor",value:function(){return null}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?n.map(function(e){return Object.assign(Object.assign({},e),{lineColor:Vc(e.lineColor,a.docTheme)})}):n}}]),i}(vL),eR=function(e){k()(i,e);var t=w()(i);function i(e){return I()(this,i),t.call(this,Object.assign(Object.assign({},e),{defaultValue:[]}))}return D()(i,[{key:"getDescriptor",value:function(){return null}},{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?n.map(function(e){return Object.assign(Object.assign({},e),{lineColor:Vc(e.lineColor,a.docTheme)})}):n}}]),i}(vL),tR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).items=[],e.items&&e.items.forEach(function(e){t.items.push(new jM(e))}),t}return D()(n,[{key:"setI18nManager",value:function(t){C()(b()(n.prototype),"setI18nManager",this).call(this,t),this.items.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){C()(b()(n.prototype),"setIconManager",this).call(this,t),this.items.forEach(function(e){return e.setIconManager(t)})}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.FilterScopeEditor,a.args={items:this.items.map(function(e){return e.getDescriptor()})},a}}]),n}(vL),aR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.HiddenActionsEditor,a}}]),n}(vL),nR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.FloorPlanSelectorEditor,a.args={scenarioId:e.id},a}}]),n}(vL),iR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.args.withReset=!1,a.type=H.EditorType.ScenarioNameEditor,a}}]),n}(NL),rR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).alias=e.alias,t.defaultValue=!!t.defaultValue,t.palettePath=e.palettePath||"",t}return D()(n,[{key:"getAlias",value:function(){return this.alias||this.name}},{key:"getPalettePath",value:function(){return this.palettePath}},{key:"getValuePathOnProperty",value:function(){return this.valuePath.slice(2)}}]),n}(TL),oR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),void 0!==(t=a.call(this,e)).defaultValue&&(t.defaultValue=t.defaultValue),t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.ScaleStringEditor,a}}]),n}(vL),sR=sg.PublicPropertyType,lR=function(e){k()(o,e);var t=w()(o);function o(e){var i;if(I()(this,o),(i=t.call(this,e)).getItemProperty=function(e){switch(e.type){case sR.Text:return new NL(e);case sR.Integer:return new RL(e);case sR.Float:return new xL(e);case sR.Boolean:return new TL(e);case sR.LongText:return new EL(e);case sR.Enum:return new wL(e);case sR.Color:return new DL(e);case sR.Percentage:return new KL(e);case sR.Format:return new AL(e);case sR.DisplayUnit:return new PL(e);case sR.Angle:case sR.Slider:return new bL(e);case sR.Image:return new LL(e);default:return new NL(e)}},i.getItemCalculatedValue=function(e,t,a,n){if(!t)return t;switch(e){case H.EditorType.ColorEditor:return Vc(t,a);case H.EditorType.ImageEditor:return ll(t,n);default:return t}},Array.isArray(e.itemShape)){var r={};i.itemProperties=e.itemShape.reduce(function(e,t){var a=i.getItemProperty(t),n=a.getName();return n&&!r[n]&&(r[n]=!0,e.push(a)),e},[])}else i.itemProperties=i.getItemProperty(e.itemShape);return i.isValidValue(i.defaultValue)||i.inheritFrom||(i.defaultValue=[]),i}return D()(o,[{key:"getCalculatedValue",value:function(s,l,e){var u=this,t=C()(b()(o.prototype),"getCalculatedValue",this).call(this,s,l),c=e.docTheme,d=e.imageList;return t.map(function(r){if(Array.isArray(u.itemProperties)){var o=Object.assign({},r);return u.itemProperties.forEach(function(e){var t=e.getDescriptor(s,l),a=t.name,n=t.type,i=u.getItemCalculatedValue(n,r[a],c,d);o[a]=i}),o}var e=u.itemProperties.getDescriptor(s,l).type;return u.getItemCalculatedValue(e,r,c,d)})}},{key:"getDescriptor",value:function(t,a){var e=C()(b()(o.prototype),"getDescriptor",this).call(this,t,a),n=Array.isArray(this.itemProperties)?this.itemProperties.map(function(e){return e.getDescriptor(t,a)}):this.itemProperties.getDescriptor(t,a);return e.defaultValue=this.defaultValue,e.args={itemDescriptor:n,withLabel:!1},e.type=H.EditorType.CollectionEditor,e}},{key:"getImageProperties",value:function(e){var n=this.valuePath.join("."),t=Object(Ho.get)(e,n)||[],i=Array.isArray(this.itemProperties);return(i?this.itemProperties:[this.itemProperties]).reduce(function(e,a){return a instanceof LL&&(i?e.push.apply(e,R()(t.map(function(e,t){return"".concat(n,".").concat(t,".").concat(a.getName())}))):e.push.apply(e,R()(t.map(function(e,t){return"".concat(n,".").concat(t)})))),e},[])}},{key:"isValidValue",value:function(t){if(!Array.isArray(t))return!1;if(0===t.length)return!0;var n=this.itemProperties;if(!(Array.isArray(n)===Object(Ho.isObjectLike)(t[0])))return!1;for(var i=!0,e=function(e){var a=t[e];if(!(i=Array.isArray(n)?n.every(function(e){var t=e.getName();return e.isValidValue(a[t])}):n.isValidValue(a)))return"break"},a=0;a<t.length;a++){if("break"===e(a))break}return i}}]),o}(vL),uR=function(e){k()(i,e);var t=w()(i);function i(e){var n;return I()(this,i),(n=t.call(this,e)).getDisableActions=function(){var e=[];return n.supportKeepExclude||e.push(H.InteractionMouseEventAction.Keep,H.InteractionMouseEventAction.Exclude),n.supportDrill||e.push(H.InteractionMouseEventAction.DrillTo),n.supportJump||e.push(H.InteractionMouseEventAction.JumpTo),e},n.setSupportInteraction=function(e,t,a){n.supportKeepExclude=e,n.supportDrill=t,n.supportJump=a},n.inheritFrom=mg.InheritProperty.ClickAction,n}return D()(i,[{key:"getValue",value:function(e,t){var a=C()(b()(i.prototype),"getValue",this).call(this,e,t);return this.getDisableActions().includes(a)&&(a=H.InteractionMouseEventAction.None),a}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);a.type=H.EditorType.ClickActionEditor;var n=this.getDisableActions();return a.args={disableActions:n,withReset:!0},a}}]),i}(vL),cR=function(e){k()(r,e);var t=w()(r);function r(e){var i;return I()(this,r),(i=t.call(this,e)).getDisableActions=function(){var e=[];return i.supportKeepExclude||e.push(H.InteractionMouseEventAction.Keep,H.InteractionMouseEventAction.Exclude),i.supportDrill||e.push(H.InteractionMouseEventAction.DrillTo),i.supportJump||e.push(H.InteractionMouseEventAction.JumpTo),i.supportAddMonitor||e.push(H.InteractionMouseEventAction.AddMonitor),e},i.setSupportInteraction=function(e,t,a,n){i.supportKeepExclude=e,i.supportDrill=t,i.supportJump=a,i.supportAddMonitor=n},i.inheritFrom=mg.InheritProperty.ContextMenuActions,i}return D()(r,[{key:"getValue",value:function(e,t){var a=C()(b()(r.prototype),"getValue",this).call(this,e,t),n=this.getDisableActions();return null==a?void 0:a.filter(function(e){return!n.includes(e)})}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(r.prototype),"getDescriptor",this).call(this,e,t);a.type=H.EditorType.ContextMenuActionsEditor;var n=this.getDisableActions();return a.args={disableActions:n,withReset:!0},a}}]),r}(vL),dR=function(e){k()(a,e);var t=w()(a);function a(e){return I()(this,a),t.call(this,Object.assign(Object.assign({},e),{_ancestorPath:"pivot",displayNameKey:"inspector.properties.charts.series.showSeriesTotal"}))}return a}(TL),pR=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getDescriptor",value:function(){return null}}]),a}(vL),hR=function(e){k()(i,e);var t=w()(i);function i(){return I()(this,i),t.apply(this,arguments)}return D()(i,[{key:"getCalculatedValue",value:function(e,t,a){var n=C()(b()(i.prototype),"getCalculatedValue",this).call(this,e,t);return n?Ec(n,a.docTheme):n}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.GradientEditor,a.args={withReset:!0},a}}]),i}(vL),yR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).layoutType=e.layoutType,t}return D()(n,[{key:"getValueState",value:function(e){return this.getValueOnPath(e)===this.defaultValue?H.PropertyValueState.Default:H.PropertyValueState.Modified}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.IntegerEditor,!Jr.isGroup(e)&&[H.LayoutType.Height,H.LayoutType.Width].includes(this.layoutType)&&(a.args.withReset=!0),a}}]),n}(RL),gR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.BorderSizeEditor,a}},{key:"getCalculatedValue",value:function(e,t){var a=C()(b()(n.prototype),"getCalculatedValue",this).call(this,e,t);return a&&Oi[a]?Oi[a]:a}}]),n}(vL),mR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getVisibility",value:function(e){var t,a,n=null===(a=null===(t=e.pivot)||void 0===t?void 0:t.pivotSetting)||void 0===a?void 0:a.columns;return null!=n&&0<n.values.length}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.DateRangePickerEditor,a.args={withReset:!0},a}}]),n}(vL),fR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.CustomFormatEditor,a.args={withReset:!0,formatType:H.FormatType.DateTime},a}}]),n}(vL),vR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.QuickRangeCollectionEditor,a.args={withLabel:!1},a}}]),n}(vL),bR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.DateModeEditor,a}}]),n}(vL),CR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getVisibility",value:function(e){return Jr.isCustomInputType(e)}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.CustomDataSourceEditor,a.args={scenarioId:e.id,supportedEditorTypes:Eu(e),contentValue:Us.customDataSourceContent(e)},a}}]),n}(vL),TR=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.apply(this,arguments)}return D()(n,[{key:"getValueState",value:function(e){var t=this.getValueOnPath(e);return Array.isArray(t)&&0===t.length?H.PropertyValueState.Default:H.PropertyValueState.Modified}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.SlicerDefaultValueEditor,a.args={scenario:e,withReset:!0},a}}]),n}(vL),SR=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getDescriptor",value:function(){var e=C()(b()(a.prototype),"getDescriptor",this).call(this);return Object.assign(Object.assign({},e),{type:e.name,valuePath:this.name})}}]),a}(mL),DR=(UL={},V()(UL,sg.PrivatePropertyType.DataTableStyleTemplate,H.EditorType.DataTableStyleTemplatesEditor),V()(UL,sg.PrivatePropertyType.KPIMatrixStyleTemplate,H.EditorType.KPIMatrixTableStyleTemplatesEditor),V()(UL,sg.PrivatePropertyType.PivotTableStyleTemplate,H.EditorType.PivotTableStyleTemplatesEditor),UL),kR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).name=H.OperationType.TableStyleTemplate,t.displayNameKey="inspector.categories.tableStyleTemplate",t._editorType=e.type,t}return D()(n,[{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.type=DR[this._editorType],t}}]),n}(SR),wR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).host=e,t.name=e.getUnionName(),t.displayNameKey="inspector.properties.charts.colorAssignments",t.setUseBuildInI18n(!0),t}return D()(n,[{key:"setPaletteProperty",value:function(e){this.palette=e}},{key:"getVisibility",value:function(e){return!this.host.isInHiddenState(e)&&!!this.host.getValue(e)}},{key:"getPalettePath",value:function(){return this.host.getPalettePath()}},{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.DataColorRelationshipEditor,a.args={plotName:this.host.getAlias(),palette:this.palette&&this.palette.getValue(e,t),scenarioId:e.id},a}}]),n}(SR),xR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).name=H.OperationType.BatchTabContainer,t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.valueState=ae.path("options.property.tabStrip.tabStripStyle".split("."),e)?H.PropertyValueState.Modified:H.PropertyValueState.Unset,a.type=H.EditorType.SlicerTypeEditor,a.args={customCss:"tabStripStyle",scenarioId:e.id,withReset:!0,valuePathOnScenario:"options.property.tabStrip.tabStripStyle"},a}}]),n}(SR),AR=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).name=H.OperationType.BatchLabelSlicerStyle,t.defaultValue=e.defaultValue,t}return D()(n,[{key:"getDescriptor",value:function(e,t){var a=C()(b()(n.prototype),"getDescriptor",this).call(this,e,t);return a.type=H.EditorType.SlicerTypeEditor,a.args={scenarioId:e.id,valuePathOnScenario:"options.property.slicerStyle",defaultValue:this.defaultValue},a}}]),n}(SR),IR=sg.PublicPropertyType,PR=sg.PrivatePropertyType,_R=function(e){k()(r,e);var t=w()(r);function r(e){var a;if(I()(this,r),(a=t.call(this,e)).children=[],a.buildInChildren=[],a.colorAssignmentProperties=[],a.paletteProperties={},a.setColorAssignmentOperations=[],a.enableSeriesTotal=!1,a.hidden=!1,a.hidden=null==e?void 0:e.hidden,e&&e.properties){var n=[],i={};e.properties.forEach(function(e){a.createProperty(e).forEach(function(e){var t=e;if(t.hasValue()){t.setRelativePath("options.property");var a=t.getValuePath();t.getName()&&!i[a]&&(i[a]=!0,n.push(t))}else n.push(t)})}),a.children=n,a.setColorAssignmentOperations.forEach(function(e){var t=e.getPalettePath();t&&a.paletteProperties[t]&&e.setPaletteProperty(a.paletteProperties[t])})}return a}return D()(r,[{key:"createProperty",value:function(e){switch(e.type){case IR.Integer:return[new RL(e)];case IR.Float:return[new xL(e)];case IR.Boolean:return[new TL(e)];case IR.Text:return[new NL(e)];case IR.LongText:return[new EL(e)];case IR.Enum:return[new wL(e)];case IR.Color:return[new DL(e)];case IR.Percentage:return[new KL(e)];case IR.Format:return[new AL(e)];case IR.DisplayUnit:return[new PL(e)];case IR.Hidden:return[new ML(e)];case IR.Slider:case IR.Angle:return[new bL(e)];case IR.Palette:var t=new zL(e),a=t.getUnionName();return[this.paletteProperties[a]=t];case IR.TextStyle:return[new qL(e)];case IR.Position:return[new jL(e)];case PR.ColorRange:return[new kL(e)];case PR.AutoScroll:return[new CL(e)];case PR.GrandTotal:return[new _L(e)];case PR.KPIConditionalPreviewEditor:return[new QL(e)];case PR.ConditionalFormat:var n=new ZL(e);return[this.conditionalFormat=n];case PR.Shadow:return[new WL(e)];case PR.ShadowInterger:return[new GL(e)];case PR.Gradient:return[new hR(e)];case PR.SlicerStyle:return[new AR(e)];case PR.BatchTabContainerStyle:return[new xR(e)];case PR.TrendLine:return[new $L(e)];case PR.ReferenceLine:return[new eR(e)];case PR.ContentSetting:return[new pR(e)];case PR.FilterScope:return[new tR(e)];case IR.Image:return[new LL(e)];case PR.MapSelector:return[new FL(e)];case PR.AutoTitle:return[new XL(e)];case PR.DataTableStyleTemplate:case PR.KPIMatrixStyleTemplate:case PR.PivotTableStyleTemplate:return[new kR(e)];case PR.FloorPlanSelector:return[new nR(e)];case IR.ColorAssignment:var i=new rR(e),r=new wR(i);return this.colorAssignmentProperties.push(i),this.setColorAssignmentOperations.push(r),[i,r];case PR.ScaleString:return[new oR(e)];case PR.SeriesTotal:return this.enableSeriesTotal=!0,[new dR(e)];case IR.Collection:return[new lR(e)];case IR.ClickAction:return this.clickActionProperty=new uR(e),[this.clickActionProperty];case PR.BorderSize:return[new gR(e)];case PR.ScenarioName:return[new iR(e)];case PR.Border:return[new SL(e)];case PR.DateRangePicker:return[new mR(e)];case PR.CustomFormat:return[new fR(e)];case PR.QuickRangeCollection:return[new vR(e)];case PR.DateMode:return[new bR(e)];case PR.LanguageResource:return[new JL(e)];case PR.CustomDataSource:return[new CR(e)];case PR.SlicerDefaultValue:return[new TR(e)];default:return[new NL(e)]}}},{key:"addBuildInChild",value:function(e){e.setUseBuildInI18n(!0),this.buildInChildren.push(e)}},{key:"setI18nManager",value:function(t){C()(b()(r.prototype),"setI18nManager",this).call(this,t),this.children.forEach(function(e){return e.setI18nManager(t)}),this.buildInChildren.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){this.children.forEach(function(e){return e.setIconManager(t)}),this.buildInChildren.forEach(function(e){return e.setIconManager(t)})}},{key:"getDefaultValues",value:function(e,t){var i=1<arguments.length&&void 0!==t&&t;return[].concat(R()(this.buildInChildren),R()(this.children)).reduce(function(e,t){if(t&&t.hasValue()){var a=t;if(i&&a.isPristine()||!i){var n=a.getDefaultValue();a.safeAssign(e,n)}}return e},e)}},{key:"getDescriptors",value:function(a,n,i){var r=[];if(this.hidden)return r;var o=this.getDisplayName();return[].concat(R()(this.buildInChildren),R()(this.children)).forEach(function(e){if(e&&e.getVisibility(a,i)){var t=e.getDescriptor(a,n);t&&(t.category=o,r.push(t))}}),r}},{key:"getAllMembers",value:function(){return[].concat(R()(this.buildInChildren),R()(this.children))}},{key:"getConditionalFormatProperty",value:function(){return this.conditionalFormat}},{key:"isColorAssignmentEnabled",value:function(t){return this.colorAssignmentProperties.some(function(e){return e.getValueOnPath({options:{property:t}})})}},{key:"isSupportSeriesTotal",value:function(){return this.enableSeriesTotal}},{key:"getColorAssignmentProperties",value:function(){return this.colorAssignmentProperties}}]),r}(UM),MR=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).name=H.OperationType.BatchSetStyle,e.displayNameKey="inspector.properties.common.scenarioStyle.label",e}return D()(a,[{key:"getDescriptor",value:function(e){var t=C()(b()(a.prototype),"getDescriptor",this).call(this,e);return t.type=H.EditorType.BatchSetStyleEditor,t}}]),a}(SR),LR=function(e){k()(c,e);var u=w()(c);function c(){var e,t,a,n,i,r,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};I()(this,c),(e=u.call(this,o)).displayNameKey="inspector.categories.appearance";var s=o.disable||{};s.batchSetStyle||e.addBuildInChild(new MR),e.addBuildInProperty(new DL({name:"backgroundColor",displayNameKey:"inspector.properties.common.backgroundColor",resetType:H.ColorResetType.NoFill,inheritFrom:mg.InheritProperty.BackgroundColor,hidden:s.backgroundColor,defaultValue:null===(t=o.defaultValue)||void 0===t?void 0:t.backgroundColor})),e.addBuildInProperty(new jL({name:"padding",displayNameKey:"inspector.properties.common.padding",inheritFrom:mg.InheritProperty.Padding,hidden:s.padding,defaultValue:null===(a=o.defaultValue)||void 0===a?void 0:a.padding})),e.addBuildInProperty(new jL({name:"margin",displayNameKey:"inspector.properties.common.margin",inheritFrom:mg.InheritProperty.Margin,hidden:s.margin,defaultValue:null===(n=o.defaultValue)||void 0===n?void 0:n.margin})),e.addBuildInProperty(new qL({name:"textStyle",inheritFrom:mg.InheritProperty.TextStyle,hidden:!0}));var l=new LL({name:"id",displayNameKey:"inspector.properties.common.backgroundImage.src",structuredPath:"backgroundImage",hidden:s.backgroundImage});return e.imageProp=l,e.addBuildInProperty(l),e.addBuildInProperty(new wL({name:"repeat",structuredPath:"backgroundImage",type:sg.PublicPropertyType.Enum,items:[{value:"no-repeat",displayNameKey:"inspector.properties.common.imageRepeat.none"},{value:"repeat",displayNameKey:"inspector.properties.common.imageRepeat.repeat"},{value:"repeat-x",displayNameKey:"inspector.properties.common.imageRepeat.x"},{value:"repeat-y",displayNameKey:"inspector.properties.common.imageRepeat.y"},{value:"space",displayNameKey:"inspector.properties.common.imageRepeat.space"},{value:"round",displayNameKey:"inspector.properties.common.imageRepeat.round"}],defaultValue:gi,displayNameKey:"inspector.properties.common.backgroundImage.repeat"})),e.addBuildInProperty(new wL({name:"displayMode",structuredPath:"backgroundImage",type:sg.PublicPropertyType.Enum,items:[{value:"auto",displayNameKey:"inspector.properties.common.imageSize.original"},{value:"contain",displayNameKey:"inspector.properties.common.imageSize.contain"},{value:"cover",displayNameKey:"inspector.properties.common.imageSize.cover"},{value:"100% 100%",displayNameKey:"inspector.properties.common.imageSize.stretch"}],defaultValue:mi,displayNameKey:"inspector.properties.common.backgroundImage.size"})),e.addBuildInProperty(new wL({name:"vAlign",structuredPath:"backgroundImage",type:sg.PublicPropertyType.Enum,items:[{value:"center",displayNameKey:"inspector.properties.common.vAlign.middle"},{value:"top",displayNameKey:"inspector.properties.common.vAlign.top"},{value:"bottom",displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:vi,displayNameKey:"inspector.properties.common.backgroundImage.vAlign"})),e.addBuildInProperty(new wL({name:"hAlign",structuredPath:"backgroundImage",type:sg.PublicPropertyType.Enum,items:[{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:fi,displayNameKey:"inspector.properties.common.backgroundImage.hAlign"})),e.addBuildInProperty(new SL({name:"border",displayNameKey:"inspector.properties.common.border.label",inheritFrom:mg.InheritProperty.Border,hidden:s.border,defaultValue:null===(i=o.defaultValue)||void 0===i?void 0:i.border})),e.addBuildInProperty(new WL({name:"shadow",displayNameKey:"inspector.properties.common.shadow.label",inheritFrom:mg.InheritProperty.Shadow,hidden:s.shadow,defaultValue:null===(r=o.defaultValue)||void 0===r?void 0:r.shadow})),e.setUseBuildInI18n(!0),e}return D()(c,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("options.appearance"),this.addBuildInChild(e)}},{key:"getDescriptors",value:function(e,t,a){var n=C()(b()(c.prototype),"getDescriptors",this).call(this,e,t,a);if(!!this.imageProp.getValue(e,t))return n;var i=["repeat","displayMode","vAlign","hAlign"];return n.filter(function(e){return!i.includes(e.name)})}}]),c}(_R),RR=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).displayNameKey="inspector.properties.common.autoRefreshInterval",e.name=H.OperationType.SetDatasetAutoRefreshInterval,e}return D()(a,[{key:"getVisibility",value:function(e){var t;return!(null===(t=null==e?void 0:e.pivot)||void 0===t||!t.datasetId)}},{key:"getDescriptor",value:function(e){var t=C()(b()(a.prototype),"getDescriptor",this).call(this,e);return t.type=H.EditorType.DatasetAutoRefreshIntervalEditor,t}}]),a}(SR),VR=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).displayNameKey="inspector.properties.common.autoRefresh",e.name=H.OperationType.SetDatasetAutoRefresh,e}return D()(a,[{key:"getVisibility",value:function(e){var t;return!(null===(t=null==e?void 0:e.pivot)||void 0===t||!t.datasetId)}},{key:"getDescriptor",value:function(e){var t=C()(b()(a.prototype),"getDescriptor",this).call(this,e);return t.type=H.EditorType.DatasetAutoRefreshEditor,t}}]),a}(SR),NR=function(e){k()(s,e);var o=w()(s);function s(e){var t,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];I()(this,s),(t=o.call(this,e)).hasCrossFilter=!1,t.displayNameKey="inspector.categories.interaction";var n=e.disable||{},i=e.defaultValue||{},r=new iR({name:"scenarioName",displayNameKey:"inspector.properties.common.scenarioName"});return t.addBuildInProperty(r),n.crossFilter||a||(t.addBuildInProperty(new TL({name:"enableCrossFilter",displayNameKey:"inspector.properties.common.crossFilter",defaultValue:void 0===i.crossFilter||i.crossFilter,_pristine:!0})),t.addBuildInProperty(new ML({name:"interactionSetting",defaultValue:{},_pristine:!0})),t.hasCrossFilter=!0),n.jumpTo||(t.jumpToProperty=new VL({name:"drillThrough",displayNameKey:"inspector.properties.common.jumpToDocuments",defaultValue:[],_pristine:!0}),t.addBuildInProperty(t.jumpToProperty)),n.dataSetAutoRefresh||(t.autoRefresh=new VR,t.autoRefreshInterval=new RR,t.addBuildInChild(t.autoRefresh),t.addBuildInChild(t.autoRefreshInterval)),n.hiddenActions||t.addBuildInProperty(new aR({name:"hiddenActions",displayNameKey:"inspector.properties.common.visibleMenuItems",defaultValue:void 0===i.hiddenActions?[]:i.hiddenActions})),n.pinAnnotation||t.addBuildInProperty(new TL({name:"pinAnnotation",displayNameKey:"inspector.properties.common.pinAnnotation",defaultValue:!1})),n.contextMenuActions||(t.contextMenuActionsProperty=new cR({name:"contextMenuActions",displayNameKey:"inspector.properties.common.contextMenuActions"}),t.addBuildInProperty(t.contextMenuActionsProperty)),t.setUseBuildInI18n(!0),t}return D()(s,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("options"),this.addBuildInChild(e)}},{key:"setSupportInteraction",value:function(e,t,a,n){var i,r;null!==(i=this.contextMenuActionsProperty)&&void 0!==i&&i.setSupportInteraction(e,t,a,n),null!==(r=this.clickActionProperty)&&void 0!==r&&r.setSupportInteraction(e,t,a)}},{key:"isSupportCrossFilter",value:function(){return this.hasCrossFilter}},{key:"isSupportJumpTo",value:function(){return!!this.jumpToProperty}},{key:"getJumpToProperty",value:function(){return this.jumpToProperty}}]),s}(_R),ER=function(e){k()(r,e);var i=w()(r);function r(e){var t;I()(this,r),(t=i.call(this,e)).displayNameKey="inspector.categories.title";var a=e.defaultValue||{};t.showTitle=new TL({name:"showTitle",displayNameKey:"inspector.properties.common.showTitle",defaultValue:void 0===a.show||a.show}),t.addBuildInProperty(t.showTitle);var n=e.disable||{};return n.auto||t.addBuildInProperty(new XL({name:"text",displayNameKey:"inspector.properties.common.title"})),n.alignment||t.addBuildInProperty(new wL(Object.assign(Object.assign({},r.alignmentDef),{defaultValue:a.alignment||Da}))),t.addBuildInProperty(new qL({name:"textStyle",displayNameKey:"inspector.properties.common.titleTextStyle",inheritFrom:mg.InheritProperty.TitleTextStyle})),t.setUseBuildInI18n(!0),t}return D()(r,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("options.title"),this.addBuildInChild(e)}},{key:"getDescriptors",value:function(e,t,a){var n=C()(b()(r.prototype),"getDescriptors",this).call(this,e,t,a);if(!!this.showTitle.getValue(e,t))return n;var i=["text","alignment","textStyle","titlePosition"];return n.filter(function(e){return!i.includes(e.name)})}}]),r}(_R);ER.alignmentDef={name:"alignment",displayNameKey:"inspector.properties.common.alignment",items:[{value:Da,displayNameKey:"inspector.properties.common.hAlign.left"},{value:ka,displayNameKey:"inspector.properties.common.hAlign.center"},{value:wa,displayNameKey:"inspector.properties.common.hAlign.right"}]};function FR(e,a){return e.some(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).every(function(e){return t[e]===a[e]})})}var OR,HR,BR,UR,zR,KR,jR,WR,GR,YR,qR,JR,XR,QR,ZR,$R=function(e){k()(r,e);var i=w()(r);function r(e,t){var a,n;return I()(this,r),(a=i.call(this,e)).displayNameKey=null!==(n=e.displayNameKey)&&void 0!==n?n:"inspector.categories.layout",a.addBuildInProperty(new yR({name:"left",displayNameKey:"inspector.properties.common.layout.left",layoutType:H.LayoutType.Left})),a.addBuildInProperty(new yR({name:"top",displayNameKey:"inspector.properties.common.layout.top",layoutType:H.LayoutType.Top})),a.addBuildInProperty(new yR({name:"width",displayNameKey:"inspector.properties.common.layout.width",defaultValue:t.width,_pristine:!0,layoutType:H.LayoutType.Width})),a.addBuildInProperty(new yR({name:"height",displayNameKey:"inspector.properties.common.layout.height",defaultValue:t.height,_pristine:!0,layoutType:H.LayoutType.Height})),a.setUseBuildInI18n(!0),a}return D()(r,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("layout"),this.addBuildInChild(e)}}]),r}(_R),eV=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).displayNameKey="inspector.categories.devConfig",e.addBuildInProperty(new NL({name:"port",displayNameKey:"inspector.properties.devConfig.port",defaultValue:"3000",_pristine:!0,regex:"^[\\d]+$"})),e.setUseBuildInI18n(!0),e}return D()(a,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("options.devConfig"),this.addBuildInChild(e)}}]),a}(_R),tV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).enableSliceFilter=e.enableSliceFilter||!1,t.enableSliceFilter&&(t.addBuildInProperty(new ML({name:"sliceFilters",defaultValue:[],_pristine:!0})),t.addBuildInProperty(new ML({name:"interactionSetting",defaultValue:{},_pristine:!0}))),e.hasInteractionCategory||t.addBuildInProperty(new ML({name:"scenarioName"})),t.setUseBuildInI18n(!0),t}return D()(n,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("options"),this.addBuildInChild(e)}},{key:"isSuppotSliceFilter",value:function(){return this.enableSliceFilter}}]),n}(_R),aV=function(e){k()(r,e);var i=w()(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0;if(I()(this,r),(e=i.call(this,t)).displayNameKey=e.displayNameKey||"inspector.categories.noDataContent",(t.disable||{}).inline)e.addBuildInProperty(new JL({name:"text",displayNameKey:"inspector.properties.common.content",defaultValue:a.getDisplay("richText.expression.noData")})),e.addBuildInProperty(new qL({name:"textStyle",displayNameKey:"inspector.properties.common.font.title",inheritFrom:mg.InheritProperty.NoDataTextStyle}));else{e.addBuildInProperty(new JL({name:"text",displayNameKey:"inspector.properties.common.content",inheritFrom:mg.InheritProperty.NoDataText,multiline:!0,rows:3})),e.addBuildInProperty(new wL({name:"textAlign",displayNameKey:"inspector.properties.slicers.labelSlicer.textAlign",inheritFrom:mg.InheritProperty.NoDataTextAlignment,items:[{value:Da,displayNameKey:"inspector.properties.common.hAlign.left"},{value:ka,displayNameKey:"inspector.properties.common.hAlign.center"},{value:wa,displayNameKey:"inspector.properties.common.hAlign.right"}]})),e.addBuildInProperty(new RL({name:"verticalAlignment",displayNameKey:"inspector.properties.common.verticalAlign",inheritFrom:mg.InheritProperty.NoDataTextVerticalAlignment,min:0,max:100})),e.addBuildInProperty(new qL({name:"textStyle",displayNameKey:"inspector.properties.common.font.title",inheritFrom:mg.InheritProperty.NoDataTextStyle}));var n=new LL({name:"imageSrc",displayNameKey:"inspector.properties.common.backgroundImage.src",inheritFrom:mg.InheritProperty.NoDataImage});e.addBuildInProperty(n),e.imageProp=n,e.addBuildInProperty(new wL({name:"imageSize",displayNameKey:"inspector.properties.common.backgroundImage.size",inheritFrom:mg.InheritProperty.NoDataImageSize,items:[{value:"auto",displayNameKey:"inspector.properties.common.imageSize.original"},{value:"contain",displayNameKey:"inspector.properties.common.imageSize.contain"},{value:"cover",displayNameKey:"inspector.properties.common.imageSize.cover"},{value:"100% 100%",displayNameKey:"inspector.properties.common.imageSize.stretch"}]}))}return e.setUseBuildInI18n(!0),e}return D()(r,[{key:"addBuildInProperty",value:function(e){e.setRelativePath("options.property.noData"),this.addBuildInChild(e)}},{key:"getDescriptors",value:function(e,t,a){var n=C()(b()(r.prototype),"getDescriptors",this).call(this,e,t,a);if(!this.imageProp||!!this.imageProp.getValue(e,t))return n;var i=["imageSize"];return n.filter(function(e){return!i.includes(e.name)})}}]),r}(_R),nV=sg.CategoryType,iV=function(){function s(n){var i=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};I()(this,s),this.categories=[],this.size={width:400,height:300},this.margin={top:5,right:5,bottom:5,left:5},this.colorAssignmentProperties=[];var r=this._disableInteraction=!1;if(e.common&&(e.common.size&&(this.size=Object.assign(Object.assign({},this.size),e.common.size)),e.common.margin&&(this.margin=Object.assign(Object.assign({},this.margin),e.common.margin)),r=!!e.common.filter,this._disableInteraction=!!e.common._disableInteraction),e.visual&&e.visual.forEach(function(e){var t;switch(e.type){case nV.Title:t=new ER(e),i.titleCat=t;break;case nV.Interaction:t=new NR(e,r),i.interactionCat=t;break;case nV.Layout:t=new $R(e,i.size),i.layoutCat=t;break;case nV.Appearance:t=new LR(e),i.appearanceCat=t;break;case nV.NoDataAppearance:t=new aV(e,n);break;case nV.Data:default:t=new _R(e)}t.setI18nManager(n),i.categories.push(t);var a=t.getConditionalFormatProperty();a&&(i.conditionalFormatProperty=a),i.colorAssignmentProperties=[].concat(R()(i.colorAssignmentProperties),R()(t.getColorAssignmentProperties()))}),!this.layoutCat){var t=new $R({},this.size);t.setI18nManager(n),this.categories.push(t),this.layoutCat=t}if(!this.appearanceCat){var a=new LR;a.setI18nManager(n),this.categories.push(a),this.appearanceCat=a}var o=new tV({enableSliceFilter:r,hasInteractionCategory:!!this.interactionCat});o.setI18nManager(n),this.categories.push(o),this.buildInCat=o}return D()(s,[{key:"setIconManager",value:function(t){this.categories.forEach(function(e){e.setIconManager(t)})}},{key:"setSupportInteraction",value:function(e,t,a,n){var i;null!==(i=this.interactionCat)&&void 0!==i&&i.setSupportInteraction(e,t,a,n)}},{key:"getSize",value:function(){return this.size}},{key:"getMargin",value:function(){return this.margin}},{key:"getValues",value:function(a,n){var i=[],r={};return this.iterateProperties(function(e){var t=e.getValue(a,n);e.safeAssign(r,t),e.isInheritFromProperty()&&i.push(e)}),i.forEach(function(e){e.assignInheritPropertyValue(r)}),s.fillOptions(r),r}},{key:"getCalculatedValues",value:function(a,n,i){var r=[],o={};return this.iterateProperties(function(e){var t=e.getCalculatedValue(a,n,i);e.safeAssign(o,t,!0),e.isInheritFromProperty()&&r.push(e)}),r.forEach(function(e){e.assignInheritPropertyValue(o)}),s.fillOptions(o),o}},{key:"getDescriptors",value:function(n,i,r){return this.categories.reduce(function(e,t){var a=t.getDescriptors(n,i,r);return[].concat(R()(e),R()(a))},[])}},{key:"getDefaultValues",value:function(e){var a=0<arguments.length&&void 0!==e&&e,t=this.categories.reduce(function(e,t){return t.getDefaultValues(e,a),e},{});return s.fillOptions(t),t}},{key:"isSupportTitle",value:function(){return!!this.titleCat}},{key:"isSupportCrossFilter",value:function(){var e;return!(null===(e=this.interactionCat)||void 0===e||!e.isSupportCrossFilter())}},{key:"isSupportJumpTo",value:function(){var e;return!(null===(e=this.interactionCat)||void 0===e||!e.isSupportJumpTo())}},{key:"isSupportSliceFilter",value:function(){return this.buildInCat.isSuppotSliceFilter()}},{key:"isSupportSeriesTotal",value:function(){return this.categories.some(function(e){return e.isSupportSeriesTotal()})}},{key:"_isDisableInteraction",value:function(){return this._disableInteraction}},{key:"iterateProperties",value:function(e){for(var t=0,a=this.categories.length;t<a;t++)for(var n=this.categories[t].getAllMembers(),i=0,r=n.length;i<r;i++){var o=n[i];if(o&&o.hasValue()&&e(o))return}}},{key:"doConvertOptions",value:function(a,n){var i={};return this.iterateProperties(function(e){if(a.hasProperty(e)){var t=e.getValueOnPath(n);e.isValidValue(t)&&e.safeAssign(i,t)}}),s.fillOptions(i),i.options}},{key:"hasProperty",value:function(t){var a=!1;return this.iterateProperties(function(e){if(e.isEqual(t))return a=!0}),a}},{key:"getPropertyByPath",value:function(t){var a=null;return this.iterateProperties(function(e){if(e.getValuePath()===t)return a=e,!0}),a}},{key:"getPaletteProperties",value:function(){var t=[];return this.iterateProperties(function(e){e instanceof zL&&t.push(e.getValuePath())}),t}},{key:"getImageProperties",value:function(t){var a=[];return this.iterateProperties(function(e){e instanceof LL&&a.push(e.getValuePath()),t&&e instanceof lR&&a.push.apply(a,R()(e.getImageProperties(t)))}),a}},{key:"getTextStyleProperties",value:function(){var t=[];return this.iterateProperties(function(e){e instanceof qL&&t.push(e.getValuePath())}),t}},{key:"getLanguageResourceKey",value:function(n){var i=[];return this.iterateProperties(function(e){if(e instanceof JL){var t=e.getValue(n),a=ul(t);t!==a&&i.push(a)}}),i}},{key:"getConditionalFormat",value:function(e){return this.conditionalFormatProperty?this.conditionalFormatProperty.getValueOnPath(e):[]}},{key:"syncOptions",value:function(a){var n={};return this.iterateProperties(function(e){var t=e.getValueOnPath(a);void 0!==t&&e.isValidValue(t)?e.safeAssign(n,t):e.isPristine()&&e.safeAssign(n,e.getDefaultValue())}),s.fillOptions(n),n.options}},{key:"enableDebugMode",value:function(){this.categories.push(new eV)}},{key:"isColorAssignmentEnabled",value:function(t){return this.categories.some(function(e){return e.isColorAssignmentEnabled(t)})}},{key:"getColorAssignmentByName",value:function(t){return this.colorAssignmentProperties.find(function(e){return e.getAlias()===t})}},{key:"getColorAssignmentProperties",value:function(){return this.colorAssignmentProperties}}],[{key:"fillOptions",value:function(e){var t=e.options||{};t.appearance=t.appearance||{},t.title=t.title||{},t.property=t.property||{},e.options=t}}]),s}(),rV=function(e){k()(r,e);var t=w()(r);function r(){var e;return I()(this,r),(e=t.apply(this,arguments)).horizontal=!1,e}return D()(r,[{key:"setI18nManager",value:function(e){C()(b()(r.prototype),"setI18nManager",this).call(this,e),this.hostMember&&this.hostMember.setI18nManager(e)}},{key:"getVisibility",value:function(e,t){var a=e.options.hiddenActions;if(t.viewer&&null!=a&&a.includes(this.getIdentity()))return!1;var n=d$.globalConfigManager;if(n.get("inSingleScenarioMode")){var i=this.getIdentity().toLowerCase();return i===pg.ActionType.OpenFullDashboard.toLowerCase()?!!d$.globalConfigManager.get("openfulldashboardmode"):!!n.get("actions")&&!!n.get("actions").split(",").includes(i)}return!0}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(r.prototype),"getDescriptor",this).call(this,e,t,a);if(this.hostMember){var i=this.hostMember.getDescriptor(e,t,a);n=Object.assign(Object.assign(Object.assign({},i),n),{value:this.hostMember.getValue(e,t)})}return n.args={horizontal:this.horizontal},n}},{key:"getIdentity",value:function(){return this.name}},{key:"getDisplayName",value:function(){return C()(b()(r.prototype),"getDisplayName",this).call(this)||this.name}},{key:"getRuntimeDisplay",value:function(){return this.getDisplayName()}}]),r}(mL),oV=function(e){k()(o,e);var a=w()(o);function o(e){var t;return I()(this,o),(t=a.call(this)).disableChangeChartType=!1,t.disableChangePivotSetting=!1,t.name=e.type,t.iconCss="icon-change-chart",t.displayNameKey="actionBar.changeChartType",t.disableChangeChartType=e.disableChangeChartType||!1,t.disableChangePivotSetting=e.disableChangePivotSetting||!1,t}return D()(o,[{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(o.prototype),"getDescriptor",this).call(this,e,t,a);n.type=H.ActionMenuType.ConvertVisual;var i=this.disableChangePivotSetting,r=this.disableChangeChartType;return a.viewer?(n.iconCss="icon-change-pivot-setting",n.label=this.getRuntimeDisplay()):i=!0,r&&i?null:(n.args.disableChangeChartType=r,n.args.disableChangePivotSetting=i,n)}},{key:"isSupportChangeChartType",value:function(){return!this.disableChangeChartType}},{key:"getVisibility",value:function(e,t){return C()(b()(o.prototype),"getVisibility",this).call(this,e,t)&&!t.editing}},{key:"getRuntimeDisplay",value:function(){return this.getDisplayNameByKey("actionBar.changePivotSetting")}}]),o}(rV),sV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).name=e.type,t.roles=e.rule.roles,t.defaultDrillType=e.rule.type,t.hostMember=new vL,t.hostMember.setValuePath("drillDown"),t.hostMember.setDefaultValue({items:[],_rootItems:[],type:t.defaultDrillType||H.DrillDownType.Default,_rootType:t.defaultDrillType||H.DrillDownType.Default}),t}return D()(n,[{key:"getVisibility",value:function(){return this.defaultDrillType!==H.DrillDownType.Default}},{key:"getDescriptor",value:function(e){var t,a=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return a.type=H.AnalysisActionType.Drill,t=!!this.defaultDrillType&&a.value.type===this.defaultDrillType,a.args.disabledTypeSelector=t,a}},{key:"getDrillDataRoles",value:function(){return this.roles}},{key:"getDefaultDrillSetting",value:function(){return this.hostMember.getDefaultValue()}}]),n}(rV),lV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).name=e.type,t}return D()(n,[{key:"getVisibility",value:function(e){var t,a,n=null===(a=null===(t=e.pivot)||void 0===t?void 0:t.pivotSetting)||void 0===a?void 0:a.columns;return null!=n&&0<n.values.length}},{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.type=H.AnalysisActionType.RelativeDate,t}}]),n}(rV),uV=[(OR={},V()(OR,XC.CanEdit,!0),V()(OR,XC.Editing,!1),V()(OR,XC.Viewer,!1),V()(OR,XC.Focus,!1),OR),(HR={},V()(HR,XC.HasCustomDataSource,!0),V()(HR,XC.Editing,!1),V()(HR,XC.Viewer,!1),V()(HR,XC.Focus,!1),HR)],cV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-edit",t.displayNameKey="actionBar.edit",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(uV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:vT.Edit})}}]),i}(rV),dV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),t=a.call(this,e),e.path&&(t.targetPath=["options","property",e.path].join(".")),t.name=e.name,t}return D()(n,[{key:"setMappingProperty",value:function(e){this.mappingProperty=e}},{key:"getMappingPropertyPath",value:function(){return this.targetPath}},{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this);return t.valuePath=this.targetPath,t.value=this.getValue(e),t.defaultValue=this.mappingProperty.getDefaultValue(),t.pristine=this.mappingProperty.isPristine(),t}},{key:"getValue",value:function(e){return this.mappingProperty.getValue(e)}}]),n}(mL),pV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).name=e.type,t.extensionType=e.extensionType,t.unionName=e.path,t.horizontal=e.horizontal||!1,t.propertyMapping=new dV(e),t}return D()(n,[{key:"setI18nManager",value:function(e){C()(b()(n.prototype),"setI18nManager",this).call(this,e),this.propertyMapping.setI18nManager(e)}},{key:"setIconManager",value:function(e){this.propertyMapping.setIconManager(e)}},{key:"getVisibility",value:function(e,t){return!!C()(b()(n.prototype),"getVisibility",this).call(this,e,t)&&(!t.editing&&!(e.state&&e.state.hiddenActions&&e.state.hiddenActions[this.unionName]))}},{key:"getDescriptor",value:function(e){var t=this.propertyMapping.getDescriptor(e);return t.type=H.ActionMenuType.Extension,t.args={extensionType:this.extensionType,horizontal:this.horizontal},t}},{key:"getMappingPropertyPath",value:function(){return this.propertyMapping.getMappingPropertyPath()}},{key:"setMappingProperty",value:function(e){this.propertyMapping.setMappingProperty(e)}},{key:"getIdentity",value:function(){return this.propertyMapping.getMappingPropertyPath()}},{key:"getDisplayName",value:function(){return this.propertyMapping.getDisplayName()||this.propertyMapping.getName()}}]),n}(rV),hV=[(BR={},V()(BR,H.CheckFieldType.HasDataset,!0),V()(BR,H.CheckFieldType.Editing,!1),BR)],yV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-filter",t.displayNameKey="actionBar.filter",t.hostMember=new vL,t.hostMember.setValuePath("pivot.pivotFilters"),t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(hV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.Filter})}}]),i}(rV),gV=[(UR={},V()(UR,H.CheckFieldType.Editing,!1),V()(UR,H.CheckFieldType.IsInCardItem,!1),V()(UR,H.CheckFieldType.IsCardInDesigner,!1),UR)],mV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-focus",t.displayNameKey="actionBar.focus",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(gV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e);return n.type=H.ActionMenuType.Focus,a.focus&&(n.label=this.i18nManager.getDisplay("actionBar.exitFocus"),n.iconCss="icon-exit-focus"),n}}]),i}(rV),fV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-comment-text-outline",t.displayNameKey="actionBar.annotation",t.horizontal=!0,t.hostMember=new vL,t.hostMember.setValuePath("annotation"),t}return D()(i,[{key:"getVisibility",value:function(e,t){if(!C()(b()(i.prototype),"getVisibility",this).call(this,e,t))return!1;var a=this.hostMember.getValue(e),n=Us.pinAnnotation(e);return!(t.viewer&&(!a||!n&&!C()(b()(i.prototype),"getVisibility",this).call(this,e,t)))}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e);return n.type=H.ActionMenuType.Annotation,n.value=this.hostMember.getValue(e,t),a.viewer?n.value&&(n.label=this.getDisplayNameByKey("actionBar.annotation"),n.iconCss="mdi mdi-comment-text"):n.value?(n.iconCss="mdi mdi-comment-text",n.label=this.getDisplayNameByKey("actionBar.editAnnotation")):(n.iconCss="mdi mdi-comment-text-outline",n.label=this.getDisplayNameByKey("actionBar.addAnnotation")),n}}]),i}(rV),vV=[(zR={},V()(zR,XC.HasValue,!0),V()(zR,XC.Editing,!1),zR)],bV=[(KR={},V()(KR,XC.HasDimension,!0),V()(KR,XC.Editing,!1),KR)],CV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-rank",t.displayNameKey="actionBar.rank",t.hostMember=new vL,t.hostMember.setValuePath("pivot.pivotRanks"),t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(e.chartType===_C.Card?bV:vV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:vT.Rank})}}]),i}(rV),TV=[(jR={},V()(jR,H.CheckFieldType.HasValue,!0),V()(jR,H.CheckFieldType.Focus,!0),jR)],SV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).disableCustomData=!1,t.name=e.type,t.iconCss="icon-show-pivot-data",t.displayNameKey="actionBar.showData",t.disableCustomData=e.disableCustomData||!1,t.conversionRules=e.rule,t}return D()(n,[{key:"getVisibility",value:function(e,t,a){return C()(b()(n.prototype),"getVisibility",this).call(this,e,t)&&FR(TV,a)}},{key:"getDescriptor",value:function(e){var t=Us.showPivotTable(e),a=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t&&(a.label=Ft("actionBar.hideData"),a.iconCss="mdi mdi-chart-bar"),a.type=H.ActionMenuType.ShowData,a.args.disableCustomData=this.disableCustomData,a}},{key:"getConversionRule",value:function(){return this.conversionRules}}]),n}(rV),DV=[(WR={},V()(WR,H.CheckFieldType.HasDimension,!0),V()(WR,H.CheckFieldType.Editing,!1),V()(WR,H.CheckFieldType.HasCustomDataSource,!1),WR)],kV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-sort",t.displayNameKey="actionBar.sort",t.hostMember=new vL,t.hostMember.setValuePath("pivot.pivotSortInfo"),t.allowControlVisible=!!e.allowControlVisible,t.withoutByColumn=!!e.withoutByColumn,t.withoutByManual=!!e.withoutByManual,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){if(t.viewer&&this.allowControlVisible){var n=Us.property(e).allowSorting;if(void 0!==n&&!n)return!1}return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(DV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return n.args.withoutByColumn=this.withoutByColumn,n.args.withoutByManual=this.withoutByManual,Object.assign(Object.assign({},n),{type:H.ActionMenuType.Sort})}}]),i}(rV),wV=[(GR={},V()(GR,H.CheckFieldType.HasDataset,!0),V()(GR,H.CheckFieldType.Editing,!1),GR)],xV=function(e){k()(p,e);var a=w()(p);function p(e){var t;return I()(this,p),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-square-edit-outline",t.displayNameKey="actionBar.modelParameters",t.hostMember=new vL,t.hostMember.setValuePath("pivot.pivotModelParametersInfo"),t}return D()(p,[{key:"getVisibility",value:function(e,t,a){var n,i=Us.datasetId(e),r=d$.getDatasetSchema(i),o=cx(d$.reduxProxy.getState())(e),s=function(e,t){var a=1<arguments.length&&void 0!==t?t:vd.None;if(a===vd.None)return[];if(!e||!Jr.isAnalysisModel(e.getDatasetType()))return[];var n=e.getDatasetSchema(),i=e.getUsedDimensionItems().map(function(e){return e.entityId}),r=e.getUsedValueItems().map(function(e){return e.entityId}),o=[],s=function(){return!0};switch(a){case vd.Dimension|vd.Value:o=[].concat(R()(i),R()(r)),s=function(){return fd.apply(void 0,arguments)||md.apply(void 0,arguments)};break;case vd.Dimension:o=R()(i),s=md;break;case vd.Filter:o=R()(i),s=gd;break;case vd.Value:o=R()(r),s=fd}return e.rawEntities.map(function(e){return e.id}).filter(function(t){return!o.some(function(e){return t===e})}).filter(function(e){return!s(n,e,r,i)})}(o,vd.Dimension),l=o.getAllEntities(),u=o.getUsedDimensionItems().map(function(e){return e.entityId}),c=o.getUsedValueItems().map(function(e){return e.entityId}),d=l.filter(function(e){var t;return(0<c.length+u.length&&!s.includes(e.id)||c.includes(e.id)||u.includes(e.id))&&0<(null===(t=null==e?void 0:e.parameters)||void 0===t?void 0:t.length)});return(null==r?void 0:r.datasetType)===H.DatasetType.AnalysisModel&&0<(null===(n=null==r?void 0:r.parameters)||void 0===n?void 0:n.length)&&0<(null==d?void 0:d.length)&&(C()(b()(p.prototype),"getVisibility",this).call(this,e,t)&&FR(wV,a))}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(p.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.ModelParameters})}}]),p}(rV),AV=[(YR={},V()(YR,H.CheckFieldType.HasDimension,!0),V()(YR,H.CheckFieldType.Editing,!1),YR)],IV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-switch-row-column",t.displayNameKey="actionBar.swapRowsAndCols",t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(AV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.SwapRowsAndCols})}}]),i}(rV),PV=[(qR={},V()(qR,H.CheckFieldType.Viewer,!1),V()(qR,H.CheckFieldType.Editing,!1),V()(qR,H.CheckFieldType.Focus,!1),qR)],_V=function(e){k()(i,e);var t=w()(i);function i(){var e;return I()(this,i),(e=t.call(this)).name="remove",e.iconCss="icon-delete",e.displayNameKey="actionBar.remove",e.setUseBuildInI18n(!0),e.horizontal=!0,e}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(PV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.Remove})}}]),i}(rV),MV=function(e){k()(r,e);var a=w()(r);function r(e){var t;return I()(this,r),(t=a.call(this)).name=e.type,t.iconCss="icon-ascending",t.displayNameKey="slicers.sort",t.horizontal=!0,t}return D()(r,[{key:"getVisibility",value:function(e,t,a){return C()(b()(r.prototype),"getVisibility",this).call(this,e,t)&&a[H.CheckFieldType.HasValidColumn]&&!a[H.CheckFieldType.IsParameterValue]&&(a[H.CheckFieldType.Editing]||a[H.CheckFieldType.Viewer])}},{key:"getDescriptor",value:function(e){var t=C()(b()(r.prototype),"getDescriptor",this).call(this,e),a=function(e){switch(e){case zn:return{nextSortOrder:Kn,tooltip:"common.asc",icon:"icon-ascending"};case Kn:return{nextSortOrder:Un,tooltip:"common.desc",icon:"icon-descending"};case Un:default:return{nextSortOrder:zn,tooltip:"common.noSort",icon:"icon-sort"}}}(e.options.property.sortOrder),n=Ft(a.tooltip)||t.label,i=a.icon||t.iconCss;return Object.assign(Object.assign({},t),{type:H.ActionMenuType.SlicerSort,label:n,iconCss:i})}}]),r}(rV),LV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-magnify",t.displayNameKey="slicers.search",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&(a[H.CheckFieldType.HasValidColumn]||a[H.CheckFieldType.HasCustomDataSource])&&!a[H.CheckFieldType.IsParameterValue]&&(a[H.CheckFieldType.Editing]||a[H.CheckFieldType.Viewer])&&(void 0===e.options.property.allowSearch||e.options.property.allowSearch)}},{key:"getDescriptor",value:function(e){var t=e.options.property.showSearchbox,a=C()(b()(i.prototype),"getDescriptor",this).call(this,e),n=a.iconCss;return t&&(n="mdi mdi-magnify active-item"),Object.assign(Object.assign({},a),{iconCss:n,type:H.ActionMenuType.SlicerSearch})}}]),i}(rV),RV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-tune",t.displayNameKey="slicers.selectParameter",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&(a[H.CheckFieldType.HasValidColumn]||a[H.CheckFieldType.HasCustomDataSource])&&(a[H.CheckFieldType.Editing]||a[H.CheckFieldType.Viewer]&&a[H.CheckFieldType.HasParameters])&&e.slicerType!==H.SlicerType.DateRangeSlicer}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.SlicerSelectParameter})}}]),i}(rV),VV=[V()({},XC.Viewer,!0)],NV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).disablePNG=!1,t.disableSVG=!1,t.disableExcel=!1,t.disableAllPageExcel=!0,t.name=e.type,t.iconCss="mdi mdi-file-export",t.displayNameKey="actionBar.export",t.disablePNG=e.disablePNG||!1,t.disableSVG=e.disableSVG||!1,t.disableExcel=e.disableExcel||!1,t.disableAllPageExcel=!1!==e.disableAllPageExcel,t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(VV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return n.type=vT.Export,n.args.disablePNG=this.disablePNG,n.args.disableExcel=this.disableExcel,n.args.disableSVG=this.disableSVG,n.args.disableAllPageExcel=this.disableAllPageExcel,n}}]),i}(rV),EV=[(JR={},V()(JR,H.CheckFieldType.Viewer,!1),V()(JR,H.CheckFieldType.Focus,!0),V()(JR,H.CheckFieldType.ShowPivotTable,!0),V()(JR,H.CheckFieldType.Editing,!1),V()(JR,H.CheckFieldType.HasValue,!0),JR)],FV=function(e){k()(i,e);var t=w()(i);function i(){var e;return I()(this,i),(e=t.call(this)).name="clearCustomData",e.iconCss="icon-clear-custom-data",e.displayNameKey="actionBar.clearCustomData",e.hostMember=new vL,e.hostMember.setValuePath("pivot.customData"),e}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(EV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.ClearCustomData})}}]),i}(rV),OV=[V()({},H.CheckFieldType.Viewer,!1)],HV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-edit",t.displayNameKey="actionBar.edit",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(OV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.EditWebContent})}}]),i}(rV),BV=[(XR={},V()(XR,H.CheckFieldType.Viewer,!1),V()(XR,H.CheckFieldType.Focus,!0),V()(XR,H.CheckFieldType.Editing,!1),XR)],UV=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"getVisibility",value:function(e,t,a){return FR(BV,a)}}]),a}(FV),zV=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).horizontal=e.horizontal||!1,t}return D()(n,[{key:"getVisibility",value:function(e,t){return!!C()(b()(n.prototype),"getVisibility",this).call(this,e,t)&&!(e.state&&e.state.hiddenActions&&e.state.hiddenActions[this.name])}},{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.type=H.ActionMenuType.Event,t}}]),n}(rV),KV=function(e){k()(r,e);var i=w()(r);function r(e,t,a){var n;return I()(this,r),(n=i.call(this,{name:e,displayNameKey:t,iconCss:a,type:pg.ActionType.Event})).setUseBuildInI18n(!0),n}return D()(r,[{key:"getVisibility",value:function(e,t){return!t.viewer}},{key:"getDescriptor",value:function(e){var t=C()(b()(r.prototype),"getDescriptor",this).call(this,e);return t.args.isForDebug=!0,t}}]),r}(zV),jV=function(e){k()(i,e);var t=w()(i);function i(){var e;return I()(this,i),(e=t.call(this)).name="clearRuntimeFilter",e.iconCss="icon-clear-custom-data",e.displayNameKey="actionBar.clearRuntimeFilters",e.horizontal=!0,e}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&a[H.CheckFieldType.HasDataset]&&a[H.CheckFieldType.Viewer]&&a[H.CheckFieldType.HasRuntimeFilter]}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.ClearRuntimeFilter})}}]),i}(rV),WV=[V()({},H.CheckFieldType.Viewer,!1)],GV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-share",t.displayNameKey="actionBar.shareScenario",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(WV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.ShareScenario})}}]),i}(rV),YV=[(QR={},V()(QR,H.CheckFieldType.Viewer,!0),V()(QR,H.CheckFieldType.InSingleScenarioMode,!0),QR)],qV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-open-in-new",t.displayNameKey="actionBar.openFullDashboard",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(YV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.OpenFullDashboard})}}]),i}(rV),JV=[(ZR={},V()(ZR,H.CheckFieldType.Viewer,!0),V()(ZR,H.CheckFieldType.HasCrossFilterSetting,!0),ZR)],XV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-clear-selection",t.displayNameKey="actionBar.clearSelection",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(JV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.ClearSelection})}}]),i}(rV),QV=[V()({},H.CheckFieldType.Viewer,!0)],ZV=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="mdi mdi-format-list-bulleted",t.displayNameKey="actionBar.analysisPath",t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(QV,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.AnalysisPath})}}]),i}(rV),$V=[V()({},H.CheckFieldType.Viewer,!1)],eN=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-chart-setting",t.horizontal=!0,t.displayNameKey="actionBar.mergeDatasets",t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR($V,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.MergeDatasets})}}]),i}(rV),tN=[V()({},H.CheckFieldType.Viewer,!1)],aN=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this)).name=e.type,t.iconCss="icon-chart-setting",t.displayNameKey="actionBar.contentSetting",t.horizontal=!0,t}return D()(i,[{key:"getVisibility",value:function(e,t,a){return C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&FR(tN,a)}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.ContentSetting})}}]),i}(rV),nN=function(e){k()(i,e);var t=w()(i);function i(){var e;return I()(this,i),(e=t.call(this)).name="cleanSliceFilter",e.iconCss="icon-clear-custom-data",e.displayNameKey="slicers.clearSelection",e.setUseBuildInI18n(!0),e.horizontal=!0,e}return D()(i,[{key:"getVisibility",value:function(e,t,a){return!!C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&(!(!e.options.sliceFilters||0===e.options.sliceFilters.length)&&(C()(b()(i.prototype),"getVisibility",this).call(this,e,t)&&(a[H.CheckFieldType.Editing]||a[H.CheckFieldType.Viewer])))}},{key:"getDescriptor",value:function(e,t,a){var n=C()(b()(i.prototype),"getDescriptor",this).call(this,e,t,a);return Object.assign(Object.assign({},n),{type:H.ActionMenuType.CleanSliceFilter})}}]),i}(rV),iN=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).dataRole=e.dataRole,t.hasPositionShapeSetting=e.hasPositionShapeSetting,t.hasSymbolSizeSetting=e.hasSymbolSizeSetting,t.hasValueLabelSetting=e.hasValueLabelSetting,t.hasCategoryLabelSetting=e.hasCategoryLabelSetting,t.hasSeriesLabelSetting=e.hasSeriesLabelSetting,t.hasPercentageLabelSetting=e.hasPercentageLabelSetting,t.hasLocationLabelSetting=e.hasLocationLabelSetting,t.hasColorLabelSetting=e.hasColorLabelSetting,t.hasSizeLabelSetting=e.hasSizeLabelSetting,t.hasShapeLabelSetting=e.hasShapeLabelSetting,t.hasAreaLabelSetting=e.hasAreaLabelSetting,t.hasDetailLabelSetting=e.hasDetailLabelSetting,t}return D()(n,[{key:"getDataRole",value:function(){return this.dataRole}},{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.args.dataRole=this.dataRole,t.args.hasSymbolSizeSetting=this.hasSymbolSizeSetting,t.args.hasPositionShapeSetting=this.hasPositionShapeSetting,t.args.hasValueLabelSetting=this.hasValueLabelSetting,t.args.hasCategoryLabelSetting=this.hasCategoryLabelSetting,t.args.hasSeriesLabelSetting=this.hasSeriesLabelSetting,t.args.hasPercentageLabelSetting=this.hasPercentageLabelSetting,t.args.hasLocationLabelSetting=this.hasLocationLabelSetting,t.args.hasColorLabelSetting=this.hasColorLabelSetting,t.args.hasSizeLabelSetting=this.hasSizeLabelSetting,t.args.hasShapeLabelSetting=this.hasShapeLabelSetting,t.args.hasAreaLabelSetting=this.hasAreaLabelSetting,t.args.hasDetailLabelSetting=this.hasDetailLabelSetting,t}}]),n}(pV),rN=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).axisItems=[],e.axis&&e.axis.forEach(function(e){t.axisItems.push(new jM(e))}),t.scope=e._scope||!1,t.constOnly=e._constOnly||!1,t}return D()(n,[{key:"setI18nManager",value:function(t){C()(b()(n.prototype),"setI18nManager",this).call(this,t),this.axisItems.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){C()(b()(n.prototype),"setIconManager",this).call(this,t),this.axisItems.forEach(function(e){return e.setIconManager(t)})}},{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.args.axis=this.axisItems.map(function(e){return e.getDescriptor()}),t.args.scope=this.scope,t.args.constOnly=this.constOnly,t}}]),n}(pV),oN=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).pivotKey=e.pivotKey||"columns",t}return D()(n,[{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.args.pivotKey=this.pivotKey,t}}]),n}(pV),sN=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).trueState=e.toggleState[0],t.falseState=e.toggleState[1],t}return D()(n,[{key:"getDescriptor",value:function(e){var t=C()(b()(n.prototype),"getDescriptor",this).call(this,e);return t.value?(t.iconCss=this.falseState.iconCss,t.icon=this.iconManager.getIcon(this.falseState.icon),t.label=this.getDisplayNameByKey(this.falseState.displayNameKey)||this.falseState.displayName||this.falseState.displayNameKey):(t.iconCss=this.trueState.iconCss,t.icon=this.iconManager.getIcon(this.trueState.icon),t.label=this.getDisplayNameByKey(this.trueState.displayNameKey)||this.trueState.displayName||this.trueState.displayNameKey),t}}]),n}(pV),lN=function(e){k()(i,e);var a=w()(i);function i(e){var t;return I()(this,i),(t=a.call(this,e)).items=[],e.items&&e.items.forEach(function(e){t.items.push(new jM(e))}),t}return D()(i,[{key:"setI18nManager",value:function(t){C()(b()(i.prototype),"setI18nManager",this).call(this,t),this.items.forEach(function(e){return e.setI18nManager(t)})}},{key:"setIconManager",value:function(t){C()(b()(i.prototype),"setIconManager",this).call(this,t),this.items.forEach(function(e){return e.setIconManager(t)})}},{key:"getDescriptor",value:function(e){var t,a,n=C()(b()(i.prototype),"getDescriptor",this).call(this,e);return n.args.items=this.items.map(function(e){var t=e.getDescriptor();return a=null!=a?a:n.value===t.value?t:null,Object.assign(Object.assign({},t),{selected:a===t})}),n.iconCss=null!==(t=null==a?void 0:a.iconCss)&&void 0!==t?t:n.iconCss,n}}]),i}(pV),uN=function(){function e(){I()(this,e)}return D()(e,null,[{key:"create",value:function(e){switch(e.extensionType){case pg.ExtensionType.Toggle:return new sN(e);case pg.ExtensionType.ReferenceLine:return new rN(e);case pg.ExtensionType.ConditionalFormat:return new iN(e);case pg.ExtensionType.TableConditionalFormat:return new oN(e);case pg.ExtensionType.Enum:return new lN(e);default:return new pV(e)}}}]),e}(),cN=pg.ActionType,dN=function(){function t(e){I()(this,t),this.actions=[],this.i18n=e}return D()(t,[{key:"makeAction",value:function(t){var a=this,e=this.createActions(t);e&&e.length&&e.forEach(function(e){a.actions.push(e),e.setI18nManager(a.i18n),t.type!==cN.Extension&&t.type!==cN.Event&&e.setUseBuildInI18n(!0)})}},{key:"setIconManager",value:function(t){this.actions.forEach(function(e){e.setIconManager(t)})}},{key:"initialize",value:function(e){var t=this;e.forEach(function(e){t.makeAction(e)})}},{key:"getDescriptors",value:function(a,n,i){var r=[];return this.actions.forEach(function(e){if(e.getVisibility(a,n,i)){var t=e.getDescriptor(a,null,n);t&&r.push(t)}}),r}}]),t}(),pN=pg.ActionType,hN=function(e){k()(o,e);var i=w()(o);function o(e,t){var a,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return I()(this,o),(a=i.call(this,e)).optionsExecutor=t,a.initialize(n),a}return D()(o,[{key:"createActions",value:function(e){var t;switch(e.type){case pN.Filter:this.filter=new yV(e),t=[this.filter],this.optionsExecutor.isSupportSliceFilter()||t.push(new jV);break;case pN.Sort:t=[new kV(e)];break;case pN.ModelParameters:t=[new xV(e)];break;case pN.Rank:t=[new CV(e)];break;case pN.ConvertVisual:this.optionsExecutor.isSupportSliceFilter()||(this.convertVisual=new oV(e),t=[this.convertVisual]);break;case pN.Edit:t=[new cV(e)];break;case pN.Focus:t=[new mV(e)];break;case pN.Annotation:t=[new fV(e)];break;case pN.ShowData:this.showData=new SV(e),t=[this.showData,new FV];break;case pN.Export:t=[new NV(e)];break;case pN.Extension:var a=uN.create(e);if(a){var n=a.getMappingPropertyPath(),i=this.optionsExecutor.getPropertyByPath(n);i&&(a.setMappingProperty(i),t=[a])}e.extensionType===pg.ExtensionType.ConditionalFormat&&(this._conditionFormat=a);break;case pN.Event:t=[new zV(e)];break;case pN.SwapRowsAndCols:t=[new IV(e)];break;case pN.SlicerSearch:t=[new LV(e)];break;case pN.SlicerSort:t=[new MV(e)];break;case pN.SlicerSelectParameter:t=[new RV(e)];break;case pN.EditWebContent:t=[new HV(e)];break;case pN.CleanCustomDataForTable:t=[new UV];break;case pN.ShareScenario:t=[new GV(e)];break;case pN.OpenFullDashboard:t=[new qV(e)];break;case pN.ClearSelection:t=[new XV(e)];break;case pN.AnalysisPath:t=[new ZV(e)];break;case pN.MergeDatasets:t=[new eN(e)];break;case pN.ContentSetting:t=[new aN(e)]}return t}},{key:"initialize",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];C()(b()(o.prototype),"initialize",this).call(this,t),this.actions.push(new _V),this.optionsExecutor.isSupportSliceFilter()&&this.actions.push(new nN)}},{key:"isSupportShowData",value:function(){return!!this.showData}},{key:"isSupportChangeChartType",value:function(){return!!this.convertVisual&&this.convertVisual.isSupportChangeChartType()}},{key:"isSupportFilter",value:function(){return!!this.filter}},{key:"getShowDataRule",value:function(){return this.showData?this.showData.getConversionRule():null}},{key:"getConditionalFormatDataRole",value:function(){if(this._conditionFormat)return this._conditionFormat.getDataRole()}},{key:"getActions",value:function(){return this.actions.reduce(function(e,t){var a={label:t.getRuntimeDisplay(),value:t.getIdentity()};return e.push(a),e},[])}},{key:"hasAction",value:function(e){for(var t=0,a=this.actions.length;t<a;t++){if(e===this.actions[t].getIdentity())return!0}return!1}},{key:"enableDebugMode",value:function(){this.actions.push(new KV(H.DevCommandType.Refresh,"actionBar.refreshDefinition","mdi mdi-refresh"))}},{key:"getDescriptors",value:function(e,t,a){var n=C()(b()(o.prototype),"getDescriptors",this).call(this,e,t,a);if(!n.filter(function(e){return e.name===pg.ActionType.ModelParameters}).length){var i=new xV({type:pg.ActionType.ModelParameters});if(i.getVisibility(e,t,a)){var r=i.getDescriptor(e,null,t);if(r)return n.concat([r])}}return n}}]),o}(dN),yN=pg.ActionType,gN=function(e){k()(i,e);var n=w()(i);function i(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return I()(this,i),(t=n.call(this,e)).initialize(a),t}return D()(i,[{key:"createActions",value:function(e){var t;switch(e.type){case yN.Drill:this.drillAction=new sV(e),t=[this.drillAction];break;case yN.RelativeDate:t=[new lV(e)]}return t}},{key:"getDrillAction",value:function(){return this.drillAction}},{key:"isSupportAnalysis",value:function(){return 0<this.actions.length}}]),i}(dN),mN=function(){function r(){var a=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:H.Language.EN_US;I()(this,r),this.resources={},this.languages=[],Object.keys(n).forEach(function(e){var t=e.toLocaleLowerCase();a.resources[t]=n[e],a.languages.push(t)}),this.setLanguage(e)}return D()(r,[{key:"getDisplay",value:function(e){return Object(Ho.get)(this.lngResource,e,null)}},{key:"setLanguage",value:function(e){var t,a=0<arguments.length&&void 0!==e?e:H.Language.EN_US;if(this.lng=a.toLocaleLowerCase(),this.resources[this.lng])this.lngResource=this.resources[this.lng];else{var n=this.lng.split("-")[0];if(this.resources[n])this.lngResource=this.resources[n];else{var i=this.languages.find(function(e){return e.startsWith("".concat(n,"-"))});this.lngResource=i&&null!==(t=this.resources[i])&&void 0!==t?t:this.resources[r.fallbackLng]}}}},{key:"getLanguage",value:function(){return this.lng}}]),r}();mN.fallbackLng=H.Language.EN_US.toLowerCase();function fN(e){return{dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},(t=e)!==H.ChartType.PercentStackColumn?{name:"valueScale",type:"_scaleType",defaultValue:"Linear"}:void 0,{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}].filter(function(e){return!!e})},{name:"category",displayNameKey:"dataBindingPanel.axis",kind:"grouping",preferredTypes:QN.includes(t)?[H.PreferredType.Date,H.PreferredType.DateTime,H.PreferredType.SubDate]:void 0,options:[{name:"categoryScale",type:"_scaleType",defaultValue:"Ordinal",ordinal:!0,condition:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{values:{min:1}}]}}],conditions:[{series:{max:0}},{series:{min:1},values:{max:1}}],prefers:[{values:{max:1},category:{max:1},series:{max:1},trellisColumns:{}},{values:{},category:{max:1},trellisColumns:{}}],conversionRules:{out:[{mode:"post",execute:[{source:"category",target:"trellisColumns",cmd:"all"}]}]}};var t}var vN,bN,CN,TN,SN,DN,kN,wN,xN,AN,IN,PN,_N,MN,LN,RN,VN,NN,EN,FN,ON,HN,BN,UN,zN,KN,jN,WN,GN,YN=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).id="",t.name="",t.icon="",t.iconCss="",t.trusted=!0,t.runInIframe=!1,t.scenarioType=null,t.isDatasetChangeable=function(){return!0},t.definitionJSON=e,t.id=e.id,t.name=e.name,t.icon=e.icon,t.iconCss=e.iconCss,t.version=e.version,t.i18nManager=new mN(e.i18nResources,Et.language),t.iconManager=new zM(e.assets),t}return D()(n,[{key:"getName",value:function(){return this.getDisplayName()||this.name}},{key:"getMenuDesc",value:function(){return{label:this.getName()||this.id,scenarioType:this.scenarioType,id:this.id,icon:this.icon,iconCss:this.iconCss}}},{key:"getActionBar",value:function(e,t,a){var n=this.actionExecutor.getDescriptors(e,t,a);return t.isInCardTemplateDesigner?n.filter(function(e){return e.type!==H.ActionMenuType.ShareScenario&&e.type!==H.ActionMenuType.Annotation}):n}},{key:"getInspector",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:{mobile:!1,viewer:!1,focus:!1,editing:!1};return{descriptors:this.optionsExecutor.getDescriptors(e,t,n),defaultValue:this.optionsExecutor.getDefaultValues(),objectValue:this.optionsExecutor.getValues(e,t)}}},{key:"getAnalysis",value:function(e){return this.analysisExecutor?this.analysisExecutor.getDescriptors(e,{viewer:!1,mobile:!1,editing:!1,focus:!1}):null}},{key:"getDataBinding",value:function(){return this.isSupportDataBinding()?this.dataBindingExecutor.getDescriptors():null}},{key:"isSupportDataBinding",value:function(){return!!this.dataBindingExecutor}},{key:"getAffectValueDataRole",value:function(){return this.dataBindingExecutor?this.dataBindingExecutor.getAffectValueDataRole():null}},{key:"validatePivotSetting",value:function(e){return!!this.dataBindingExecutor&&this.dataBindingExecutor.validatePivotSetting(e)}},{key:"validateViewMapping",value:function(e){return!!this.dataBindingExecutor&&this.dataBindingExecutor.validateViewMapping(e)}},{key:"getTemplateDocument",value:function(e){return this.dataBindingExecutor?this.dataBindingExecutor.getTemplateDocument(e):null}},{key:"getDataBindingMeta",value:function(){return this.dataBindingExecutor?this.dataBindingExecutor.getDataRoleMeta():null}},{key:"getActualPivotSetting",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};return this.dataBindingExecutor?this.dataBindingExecutor.getActualPivotSetting(t):{}}},{key:"correctPivotSetting",value:function(e){var t,a,n=0<arguments.length&&void 0!==e?e:{};return null!==(a=null===(t=this.dataBindingExecutor)||void 0===t?void 0:t.correctPivotSetting(n))&&void 0!==a?a:{}}},{key:"getDataRoleDescriptor",value:function(){var e;return this.dataBindingExecutor?(e=this.dataBindingExecutor).getDataRoleDescriptor.apply(e,arguments):null}},{key:"getDataRoleNames",value:function(){var e;return this.dataBindingExecutor?(e=this.dataBindingExecutor).getDataRoleNames.apply(e,arguments):[]}},{key:"getSimplePivotSettings",value:function(e){var t;return(null===(t=this.dataBindingExecutor)||void 0===t?void 0:t.getSimplePivotSettings(e))||[]}},{key:"isSupportTitle",value:function(){return this.optionsExecutor.isSupportTitle()}},{key:"isSupportSeriesTotal",value:function(){return this.optionsExecutor.isSupportSeriesTotal()}},{key:"isSupportJumpTo",value:function(){return this.optionsExecutor.isSupportJumpTo()}},{key:"isSupportCrossFilterSetting",value:function(){return!!this.dataBindingExecutor&&this.optionsExecutor.isSupportCrossFilter()}},{key:"isSupportSliceFilter",value:function(){return this.optionsExecutor.isSupportSliceFilter()}},{key:"getEntireScenario",value:function(e,t){var a=this.optionsExecutor.getValues(e,t);return Object.assign(Object.assign({},e),{options:a.options})}},{key:"getActualOptions",value:function(e,t,a){return this.optionsExecutor.getCalculatedValues(e,t,a).options}},{key:"getPropertyValue",value:function(e,t,a){var n=this.optionsExecutor.getPropertyByPath("options.property.".concat(e));if(n)return n.getValue(t,a)}},{key:"getPropertyCalculatedValue",value:function(e,t,a,n){var i=this.optionsExecutor.getPropertyByPath(e);if(i)return i.getCalculatedValue(t,a,n)}},{key:"getPaletteProperties",value:function(){return this.optionsExecutor.getPaletteProperties()}},{key:"getImageProperties",value:function(e){return this.optionsExecutor.getImageProperties(e)}},{key:"getTextStyleProperties",value:function(){return this.optionsExecutor.getTextStyleProperties()}},{key:"getLanguageResourceKey",value:function(e){var t=this.optionsExecutor.getLanguageResourceKey(e);if(!e.pivot||!e.pivot.pivotSetting||!this.dataBindingExecutor)return t;var a=e.pivot.pivotSetting,n=this.dataBindingExecutor.getUserDisplayKey(a);return[].concat(R()(t),R()(n))}},{key:"syncOptions",value:function(e){return this.optionsExecutor.syncOptions(e)}},{key:"isColorAssignmentEnabled",value:function(e){return this.optionsExecutor.isColorAssignmentEnabled(e)}},{key:"getColorAssignmentByName",value:function(e){return this.optionsExecutor.getColorAssignmentByName(e)}},{key:"getColorAssignmentProperties",value:function(){return this.optionsExecutor.getColorAssignmentProperties()}},{key:"doConvertOptions",value:function(e,t){return this.optionsExecutor.doConvertOptions(e.optionsExecutor,t)}},{key:"isSupportChangeChartType",value:function(){return this.actionExecutor.isSupportChangeChartType()}},{key:"isSupportShowData",value:function(){return this.actionExecutor.isSupportShowData()}},{key:"isSupportFilter",value:function(){return this.actionExecutor.isSupportFilter()}},{key:"getConditionalFormat",value:function(e){return this.optionsExecutor.getConditionalFormat(e)}},{key:"getActions",value:function(){return this.actionExecutor.getActions()}},{key:"hasAction",value:function(e){return this.actionExecutor.hasAction(e)}},{key:"isSupportAnalysis",value:function(){return this.analysisExecutor&&this.analysisExecutor.isSupportAnalysis()}},{key:"isSupportDrill",value:function(){return!!this.analysisExecutor&&!!this.analysisExecutor.getDrillAction()}},{key:"getDrillDataRoles",value:function(){return this.analysisExecutor?this.analysisExecutor.getDrillAction().getDrillDataRoles():[]}},{key:"isSupportKeepExclude",value:function(){return!0}},{key:"isSupportAddMonitor",value:function(){return!0}},{key:"createScenario",value:function(e,t){var a=this.optionsExecutor.getDefaultValues(!0);return{id:e,pageId:t,scenarioType:this.scenarioType,options:a.options,state:{selected:!1,showPivotTable:!1},usedInMobile:!1,zIndex:0,mobileLayout:{top:0,left:0,width:360,height:240},layout:this.optionsExecutor.getSize()}}},{key:"toJSON",value:function(){return this.definitionJSON}},{key:"getLegacyPivotSettingSchema",value:function(){var e,t,a,n,i,r,o=this.definitionJSON;return{dataRoles:(null===(t=null===(e=o.capabilities)||void 0===e?void 0:e.dataBinding)||void 0===t?void 0:t.dataRoles)||[],conditions:(null===(n=null===(a=o.capabilities)||void 0===a?void 0:a.dataBinding)||void 0===n?void 0:n.conditions)||[],conversionRules:(null===(r=null===(i=o.capabilities)||void 0===i?void 0:i.dataBinding)||void 0===r?void 0:r.conversionRules)||{}}}},{key:"getLegacyPivotSettingSchemaForTable",value:function(){var e,t,a,n,i=this.definitionJSON;return{dataRoles:(null===(t=null===(e=i.capabilities)||void 0===e?void 0:e.dataBinding)||void 0===t?void 0:t.dataRoles)||[],conditions:(null===(n=null===(a=i.capabilities)||void 0===a?void 0:a.dataBinding)||void 0===n?void 0:n.conditions)||[],conversionRules:this.actionExecutor.getShowDataRule()}}},{key:"getDataBindingExecutorForLegacy",value:function(e){return new gL(this.i18nManager,e)}},{key:"getDataBindingExecutor",value:function(){return this.dataBindingExecutor}},{key:"getOptionsExecutor",value:function(){return this.optionsExecutor}},{key:"getActionExecutor",value:function(){return this.actionExecutor}},{key:"getAnalysisExecutor",value:function(){return this.analysisExecutor}},{key:"getI18nManager",value:function(){return this.i18nManager}},{key:"getIconManager",value:function(){return this.iconManager}},{key:"supportRecommend",value:function(){return!1}},{key:"isSlicer",get:function(){return!1}},{key:"_isDisableInteraction",get:function(){return!1}},{key:"isSupportTriggerDataInteraction",get:function(){return!1}},{key:"isSupportReceiveDataInteraction",get:function(){return!1}},{key:"supportedDataViewTypes",get:function(){var e,t;if(!this.supportedDataViewList){var a=((null===(t=null===(e=this.definitionJSON.capabilities)||void 0===e?void 0:e.dataBinding)||void 0===t?void 0:t.dataViewMappings)||[]).reduce(function(e,t){return e.concat(Object.keys(t))},[]);this.supportedDataViewList=Array.from(new Set(a))}return this.supportedDataViewList}},{key:"supportChangeChartTypeMenuList",get:function(){return null}}]),n}(UM),qN=function(e){k()(r,e);var n=w()(r);function r(e){var t;I()(this,r),t=n.call(this,e);var a=e.capabilities||{};return a.dataBinding&&(t.dataBindingExecutor=new gL(t.i18nManager,a.dataBinding),t.dataBindingExecutor.setIconManager(t.iconManager)),t.optionsExecutor=new iV(t.i18nManager,a.options),t.actionExecutor=new hN(t.i18nManager,t.optionsExecutor,a.actions),t.analysisExecutor=new gN(t.i18nManager,a.analysis),t.optionsExecutor.setIconManager(t.iconManager),t.optionsExecutor.setSupportInteraction(t.isSupportKeepExclude(),t.isSupportDrill(),t.isSupportJumpTo(),t.isSupportAddMonitor()),t.actionExecutor.setIconManager(t.iconManager),t.analysisExecutor.setIconManager(t.iconManager),t}return D()(r,[{key:"createScenario",value:function(e,t){var a=C()(b()(r.prototype),"createScenario",this).call(this,e,t),n={datasetId:null,pivotFilters:[],pivotRanks:[],pivotSetting:{},pivotSortInfo:{},pivotModelParameters:[],customData:[]};if(this.dataBindingExecutor&&(n.pivotSetting=this.dataBindingExecutor.getInitPivotSetting()),a.pivot=n,this.analysisExecutor){var i=this.analysisExecutor.getDrillAction();i&&(a.drillDown=i.getDefaultDrillSetting())}return a.version=this.version,a}},{key:"doChangeVisualType",value:function(e){return Object.assign(Object.assign({},e),{scenarioType:this.scenarioType})}},{key:"isSupportTriggerDataInteraction",get:function(){return this.isSupportDataBinding()}},{key:"isSupportReceiveDataInteraction",get:function(){return this.isSupportDataBinding()}},{key:"_isDisableInteraction",get:function(){return this.optionsExecutor._isDisableInteraction()}}]),r}(YN),JN=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).scenarioType=H.ScenarioType.PivotChart,t.chartType=e.id,t}return D()(n,[{key:"createScenario",value:function(e,t){var a=C()(b()(n.prototype),"createScenario",this).call(this,e,t);switch(a.chartType=this.chartType,this.id){case H.ChartType.PivotTable:case H.ChartType.DataTable:case H.ChartType.KpiMatrix:a.fixedColumnsWidthInfo=[];break;case H.ChartType.Card:a.cardTemplate={scenarios:{},pageOptions:{}}}return a}},{key:"doChangeVisualType",value:function(e){var t=C()(b()(n.prototype),"doChangeVisualType",this).call(this,e);return delete t.visualId,t.chartType=this.chartType,this.id!==H.ChartType.PivotTable&&this.id!==H.ChartType.DataTable&&this.id!==H.ChartType.KpiMatrix||(t.fixedColumnsWidthInfo=[]),t}},{key:"isSupportKeepExclude",value:function(){return this.id!==H.ChartType.DataTable&&C()(b()(n.prototype),"isSupportKeepExclude",this).call(this)}},{key:"supportRecommend",value:function(){return![H.ChartType.KpiMatrix,H.ChartType.WebContent,H.ChartType.Card].includes(this.chartType)}},{key:"isSupportAddMonitor",value:function(){var e=this.id;return![H.ChartType.DataTable,H.ChartType.PivotTable,H.ChartType.KpiMatrix,H.ChartType.Card].includes(e)}}]),n}(qN),XN=function(e){k()(l,e);var s=w()(l);function l(t){var e,a,n,i;I()(this,l),(e=s.call(this,t)).description="",e.jsContent="",e.cssContent="",e.description=t.description,e.jsContent=t.jsContent,e.cssContent=t.cssContent,e.scenarioType=H.ScenarioType.Visual,e.visualType=null!==(a=t.visualType)&&void 0!==a?a:H.CustomVisualType.Visual,e.trusted=!!t.configuration&&!!t.configuration.$trusted,e.runInIframe=null===(i=null===(n=t.configuration)||void 0===n?void 0:n.$runInIframe)||void 0===i||i;var r=t.externalJs||[];e.externalJs=r.map(function(e){return l.createExternalAssetsUrl(e,t.configuration)});var o=t.externalCss||[];return e.externalCss=o.map(function(e){return l.createExternalAssetsUrl(e,t.configuration)}),e}return D()(l,[{key:"createScenario",value:function(e,t){var a=C()(b()(l.prototype),"createScenario",this).call(this,e,t);return a.visualId=this.id,a.version=this.version,a}},{key:"doChangeVisualType",value:function(e){var t=C()(b()(l.prototype),"doChangeVisualType",this).call(this,e);return delete t.chartType,t.visualId=this.id,t}},{key:"getMenuDesc",value:function(){var e=C()(b()(l.prototype),"getMenuDesc",this).call(this);return Object.assign(Object.assign({},e),{visualType:this.visualType})}},{key:"supportRecommend",value:function(){return this.visualType===H.CustomVisualType.Visual}},{key:"isSlicer",get:function(){return this.isSupportSliceFilter()}}],[{key:"createExternalAssetsUrl",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:{},n=e;try{n=Object(Ho.template)(e,{interpolate:/\{\{(.+?)\}\}/g})(a)}catch(e){}return encodeURIComponent(n)}}]),l}(qN),QN=[H.ChartType.Line,H.ChartType.Area,H.ChartType.StackArea,H.ChartType.PercentStackArea],ZN={legendWidthHeight:/^([1-9]?\d(\.\d+)?)%$|^\d+(\.\d+)?px$/};(bN=vN=vN||{}).headerHAlign=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left";return{name:"hAlign",structuredPath:"header",type:sg.PublicPropertyType.Enum,items:[{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:e,displayNameKey:"inspector.properties.common.alignment"}},bN.containerHeaderTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TitleTextStyle,type:sg.PublicPropertyType.TextStyle,structuredPath:"header",name:"textStyle",displayNameKey:"inspector.properties.common.titleTextStyle",defaultValue:e}},bN.mobileAutoLayoutPolicy=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Flow";return{name:"mobileAutoLayoutPolicy",type:sg.PublicPropertyType.Enum,items:[{value:"Flow",displayNameKey:"inspector.properties.containers.flow"},{value:"Scale",displayNameKey:"inspector.properties.containers.scale"}],defaultValue:e,displayNameKey:"inspector.properties.containers.mobileAutoLayoutPolicy"}},bN.filterScope=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Rr;return{name:"filterScope",type:sg.PrivatePropertyType.FilterScope,items:[{value:Lr,displayNameKey:"inspector.properties.containers.filterScope_container"},{value:Rr,displayNameKey:"inspector.properties.containers.filterScope_global"}],defaultValue:d$.globalConfigManager.get("containerFilterScope")||e,displayNameKey:"inspector.properties.containers.filterScope"}},(TN=CN=CN||{}).scrollbarColorSetting=[{name:"scrollbarThumbBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarThumbBackColor",inheritFrom:mg.InheritProperty.ScrollbarThumbColor,hidden:!0},{name:"scrollbarTrackBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarTrackBackColor",inheritFrom:mg.InheritProperty.ScrollbarTrackColor,hidden:!0}],TN.internalBorderSetting=[{name:"internalBorderColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.internalBorder.color",inheritFrom:mg.InheritProperty.BorderColor,default:Ni},{name:"internalBorderSize",type:sg.PrivatePropertyType.BorderSize,displayNameKey:"inspector.properties.common.internalBorder.size",inheritFrom:mg.InheritProperty.BorderSize}],TN.titlePosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Top";return{name:"titlePosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.titlePosition.title",items:[{value:"Top",displayNameKey:"inspector.properties.slicers.titlePosition.outside"},{value:"Left",displayNameKey:"inspector.properties.slicers.titlePosition.inline"}],defaultValue:e}},TN.contentTextStyle=function(e){return{name:"contentTextStyle",displayNameKey:"inspector.properties.common.contentTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,defaultValue:e}},TN.showNullItems=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showNullItems",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showNullItems",defaultValue:e}},TN.showEmptyStringItems=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showEmptyStringItems",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showEmptyStringItems",defaultValue:e}},TN.setDefaultValue=function(){return{name:"sliceFilters",type:sg.PrivatePropertyType.SlicerDefaultValue,displayNameKey:"inspector.properties.slicers.defaultValue.title",_ancestorPath:"options",_pristine:!0,defaultValue:[]}},function(n){n.tableScrollPattern={name:"scrollByPixel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.scrollPattern",defaultValue:!0},n.autoScroll=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{type:sg.PrivatePropertyType.AutoScroll,name:"autoScroll",displayNameKey:"inspector.properties.tables.autoScroll",defaultValue:{enable:!1,speed:ua,autoPageTurning:!1},hasPage:e}},n.scrollbarMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Hover";return{name:"scrollbarMode",type:sg.PublicPropertyType.Enum,items:[{value:"Auto",displayNameKey:"inspector.properties.tables.scrollbarMode.Auto"},{value:"Hidden",displayNameKey:"inspector.properties.tables.scrollbarMode.Hidden"},{value:"Visible",displayNameKey:"inspector.properties.tables.scrollbarMode.Visible"},{value:"Hover",displayNameKey:"inspector.properties.tables.scrollbarMode.Hover"}],displayNameKey:"inspector.properties.common.scrollbarMode",defaultValue:e}},n.alignment=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Default";return{name:"alignment",type:sg.PublicPropertyType.Enum,items:[{value:"Default",displayNameKey:"inspector.properties.tables.alignmentSettings.default"},{value:"Left",displayNameKey:"inspector.properties.tables.alignmentSettings.left"},{value:"Center",displayNameKey:"inspector.properties.tables.alignmentSettings.center"},{value:"Right",displayNameKey:"inspector.properties.tables.alignmentSettings.right"}],displayNameKey:"inspector.properties.common.tableAlignment",defaultValue:e}};var i={name:"enableUiFilter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.enableUiFilter",defaultValue:!1};n.contentTextStyle=function(e){return{name:"contentTextStyle",displayNameKey:"inspector.properties.common.contentTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,defaultValue:e}},n.hiddenProps=[{name:"expand",type:sg.PublicPropertyType.Hidden,defaultValue:!0},{name:"borderColor",type:sg.PublicPropertyType.Color,defaultValue:"#dfe8e8",hidden:!0},{name:"gridLine",type:sg.PublicPropertyType.Color,defaultValue:"=Theme.Colors(3,2)",hidden:!0},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"contentTextStyle",hidden:!0}],n.cornerStyle=[{name:"enableWordWrap",structuredPath:"corner",inheritFrom:"colHeader.enableWordWrap",type:sg.PublicPropertyType.Hidden,displayNameKey:"inspector.properties.tables.enableWordWrap"},{name:"backColor",structuredPath:"corner",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"corner",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{color:"=Theme.Colors!Light1",fontWeight:H.FontWeight.Bold}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"corner.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.colHeaderStyle=[{name:"enableWordWrap",structuredPath:"colHeader",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.enableWordWrap",defaultValue:!1},{name:"backColor",structuredPath:"colHeader",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"colHeader",displayNameKey:"inspector.properties.common.headerTextStyle",defaultValue:{color:"=Theme.Colors!Light1",fontWeight:H.FontWeight.Bold}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"colHeader.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.rowHeaderStyle=[{name:"enableWordWrap",structuredPath:"rowHeader",inheritFrom:"whole.enableWordWrap",type:sg.PublicPropertyType.Hidden,displayNameKey:"inspector.properties.tables.enableWordWrap"},{name:"backColor",structuredPath:"rowHeader",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors(0,4,0.5)",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"rowHeader",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"rowHeader.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.firstDataStripeStyle=[{name:"enableWordWrap",structuredPath:"firstDataStripe",inheritFrom:"whole.enableWordWrap",type:sg.PublicPropertyType.Hidden,displayNameKey:"inspector.properties.tables.enableWordWrap"},{name:"backColor",structuredPath:"firstDataStripe",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors(0,4,0.5)",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"firstDataStripe",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"firstDataStripe.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.secondDataStripeStyle=[{name:"enableWordWrap",structuredPath:"secondDataStripe",inheritFrom:"whole.enableWordWrap",type:sg.PublicPropertyType.Hidden,displayNameKey:"inspector.properties.tables.enableWordWrap"},{name:"backColor",structuredPath:"secondDataStripe",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors(0,4,0.25)",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"secondDataStripe",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"secondDataStripe.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.wholeStyle=[{name:"enableWordWrap",structuredPath:"whole",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.enableWordWrap",defaultValue:!0},{name:"backColor",structuredPath:"whole",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.wholeTableBackColor",defaultValue:"transparent",resetType:H.ColorResetType.NoFill},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"whole",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{fontSize:H.FontSizeList.Ratio1_0}},{name:"color",structuredPath:"whole.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.wholeTableBorderColor",defaultValue:"=Theme.Colors!Light1",resetType:H.ColorResetType.NoFill}],n.subTotalsStyle=[{name:"enableWordWrap",structuredPath:"subTotals",inheritFrom:"whole.enableWordWrap",type:sg.PublicPropertyType.Hidden,displayNameKey:"inspector.properties.tables.enableWordWrap"},{name:"display",structuredPath:"subTotals",type:sg.PublicPropertyType.Enum,items:[{value:"bottom",displayNameKey:"inspector.properties.tables.subTotalMode.bottom"},{value:"top",displayNameKey:"inspector.properties.tables.subTotalMode.top"},{value:"subtotalSetting_none",displayNameKey:"inspector.properties.tables.subTotalMode.hidden"}],displayNameKey:"inspector.properties.tables.subTotalMode.title",defaultValue:"bottom"},{name:"backColor",structuredPath:"subTotals",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors(0,4,0.8)",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"subTotals",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{color:"=Theme.Colors!Light1",fontWeight:H.FontWeight.Bold}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"subTotals.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.grandTotalsStyle=[{name:"enableWordWrap",structuredPath:"grandTotals",inheritFrom:"whole.enableWordWrap",type:sg.PublicPropertyType.Hidden,displayNameKey:"inspector.properties.tables.enableWordWrap"},{name:"grandTotals",type:sg.PrivatePropertyType.GrandTotal,displayNameKey:"inspector.properties.tables.grandTotalSettings",defaultValue:{display:za,frozen:Ja}},{name:"backColor",structuredPath:"grandTotals",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.backColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.NoFill},{inheritFrom:"whole.textStyle",type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"grandTotals",displayNameKey:"inspector.properties.tables.textStyle",defaultValue:{color:"=Theme.Colors!Light1",fontWeight:H.FontWeight.Bold}},{name:"color",inheritFrom:"whole.border.color",structuredPath:"grandTotals.border",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.tables.borderColor",resetType:H.ColorResetType.NoFill}],n.useAlternateRowStyle={name:"useAlternateRowStyle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.useAlternateRowStyle",defaultValue:!0},n.treatLastRowHeaderAsData={name:"treatLastRowHeaderAsData",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.treatLastRowHeaderAsData",defaultValue:!0};var r=[{name:"scrollbarThumbBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarThumbBackColor",inheritFrom:mg.InheritProperty.ScrollbarThumbColor},{name:"scrollbarTrackBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarTrackBackColor",inheritFrom:mg.InheritProperty.ScrollbarTrackColor}];n.tableCommonSetting=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=[n.treatLastRowHeaderAsData,n.useAlternateRowStyle].concat(R()((e?o:s)()),[{name:"colHeaderVisible",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.colHeaderVisible",defaultValue:!0},i,{name:"autoFitMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.tables.autoFitMode.label",defaultValue:Fr,items:[{value:Er,displayNameKey:"inspector.properties.tables.autoFitMode.useColHeader"},{value:Fr,displayNameKey:"inspector.properties.tables.autoFitMode.useContent"}]},{name:"rowHeight",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.tables.rowHeight",defaultValue:2,min:1},{name:"labelIndent",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.tables.labelIndent",defaultValue:2,min:0},n.scrollbarMode()],r,[n.alignment()],R()(n.wholeStyle));if(!e){var a=t.findIndex(function(e){return"treatLastRowHeaderAsData"===e.name});t.splice(a,1)}return t};var o=function(e,t){var a=0<arguments.length&&void 0!==e?e:"rowHeader",n=!(1<arguments.length&&void 0!==t)||t,i={name:"rowNumberPosition",structuredPath:a,type:sg.PublicPropertyType.Enum,items:[{value:"first",displayNameKey:"inspector.properties.tables.rowNumberInsertPosition.first"},{value:"last",displayNameKey:"inspector.properties.tables.rowNumberInsertPosition.last"}],displayNameKey:"inspector.properties.tables.rowNumberInsertPosition.title",defaultValue:"first"};return n&&i.items.push({value:"all",displayNameKey:"inspector.properties.tables.rowNumberInsertPosition.all"}),[{name:"showRowNumber",structuredPath:a,type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.showRowNumber",defaultValue:!1},i,{name:"rowNumberCountRule",type:sg.PublicPropertyType.Enum,structuredPath:a,items:[{value:"global",displayNameKey:"inspector.properties.tables.rowNumberCountRule.global"},{value:"region",displayNameKey:"inspector.properties.tables.rowNumberCountRule.region"}],displayNameKey:"inspector.properties.tables.rowNumberCountRule.title",defaultValue:"global"},{name:"rowNumberAdjoin",structuredPath:a,type:sg.PublicPropertyType.Enum,items:[{value:"before",displayNameKey:"inspector.properties.tables.rowNumberAdjoin.before"},{value:"after",displayNameKey:"inspector.properties.tables.rowNumberAdjoin.after"}],displayNameKey:"inspector.properties.tables.rowNumberAdjoin.title",defaultValue:"before"}]},s=function(){return[{name:"showRowNumber",structuredPath:"whole",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.showRowNumber",defaultValue:!1},{name:"rowNumberCountRule",type:sg.PublicPropertyType.Enum,structuredPath:"whole",items:[{value:"global",displayNameKey:"inspector.properties.tables.rowNumberCountRule.global"},{value:"region",displayNameKey:"inspector.properties.tables.rowNumberCountRule.page"}],displayNameKey:"inspector.properties.tables.rowNumberCountRule.title",defaultValue:"global"},{name:"rowNumberAdjoin",structuredPath:"whole",type:sg.PublicPropertyType.Hidden,defaultValue:"before"},{name:"rowNumberPosition",structuredPath:"whole",type:sg.PublicPropertyType.Hidden,defaultValue:"first"}]};n.allowSorting={name:"allowSorting",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.allowSorting",defaultValue:!0}}(SN=SN||{}),(kN=DN=DN||{}).scrollbarColorSetting=[{name:"scrollbarThumbBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarThumbBackColor",inheritFrom:mg.InheritProperty.ScrollbarThumbColor,hidden:!0},{name:"scrollbarTrackBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarTrackBackColor",inheritFrom:mg.InheritProperty.ScrollbarTrackColor,hidden:!0}],kN.hiddenCategory={properties:[{name:"referenceLine",type:sg.PrivatePropertyType.ReferenceLine},{name:"expand",type:sg.PublicPropertyType.Hidden,defaultValue:!1},{name:"trendLines",type:sg.PrivatePropertyType.TrendLine},{name:"conditionalFormat",type:sg.PrivatePropertyType.ConditionalFormat},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,hidden:!0,name:"axisTextStyle"},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,hidden:!0,name:"dataLabelTextStyle"},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"legendTextStyle",hidden:!0},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"contentTextStyle",hidden:!0},{name:"contentSetting",type:sg.PrivatePropertyType.ContentSetting}]},(wN=kN.ChartStyle||(kN.ChartStyle={})).paletteId=function(){return{name:"paletteId",inheritFrom:mg.InheritProperty.Palette,type:sg.PublicPropertyType.Palette,displayNameKey:"inspector.properties.charts.palette"}},wN.graphOpacity=function(){return{name:"graphOpacity",inheritFrom:mg.InheritProperty.GraphOpacity,type:sg.PublicPropertyType.Percentage,displayNameKey:"inspector.properties.charts.graphOpacity"}},wN.autoGapWidth=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"autoGapWidth",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.autoGapWidth",defaultValue:e}},wN.categoryGapWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50;return{name:"categoryGapWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.categoryGapWidth",min:0,max:100,defaultValue:e}},wN.seriesGapWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30;return{name:"seriesGapWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.seriesGapWidth",min:-100,max:100,defaultValue:e}},wN.cornerRadius=function(e){return{name:"cornerRadius",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.cornerRadius",inheritFrom:mg.InheritProperty.CornerRadius,defaultValue:e,min:0}},wN.autoGradient=function(){return{name:"autoGradient",inheritFrom:mg.InheritProperty.AutoGradient,type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.autoGradient"}},wN.lineWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1.5;return{name:"lineWidth",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.lineWidth",defaultValue:e,min:1}},wN.lineType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Fn.Solid;return{name:"lineType",type:sg.PublicPropertyType.Enum,items:[{value:Fn.Solid,displayNameKey:"lineTypes.solid"},{value:Fn.Dashed,displayNameKey:"lineTypes.dashed"}],displayNameKey:"inspector.properties.charts.lineType",defaultValue:e}},wN.symbolShape=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Dot";return{name:"symbolShape",type:sg.PublicPropertyType.Enum,items:[{value:"Dot",displayNameKey:"inspector.properties.charts.symbolShape.Dot"},{value:"Box",displayNameKey:"inspector.properties.charts.symbolShape.Box"},{value:"Triangle",displayNameKey:"inspector.properties.charts.symbolShape.Triangle"},{value:"Diamond",displayNameKey:"inspector.properties.charts.symbolShape.Diamond"},{value:"Plus",displayNameKey:"inspector.properties.charts.symbolShape.Plus"},{value:"X",displayNameKey:"inspector.properties.charts.symbolShape.X"}],displayNameKey:"inspector.properties.charts.symbolShape.title",defaultValue:e}},wN.symbolSize=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;return{name:"symbolSize",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.symbolSize",defaultValue:e,min:1}},wN.symbolFill=function(){return{name:"symbolFill",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.symbolFill",resetType:H.ColorResetType.Auto}},wN.symbolStroke=function(){return{name:"symbolStroke",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.symbolStroke",resetType:H.ColorResetType.Auto}},wN.lineStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Default";return{name:"lineStyle",type:sg.PublicPropertyType.Enum,items:[{value:"Default",displayNameKey:"inspector.properties.charts.lineStyle.default"},{value:"Spline",displayNameKey:"inspector.properties.charts.lineStyle.spline"},{value:"Step",displayNameKey:"inspector.properties.charts.lineStyle.step"}],displayNameKey:"inspector.properties.charts.lineStyle.title",defaultValue:e}},wN.showNull=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Connected";return{name:"showNull",type:sg.PublicPropertyType.Enum,items:[{value:"Connected",displayNameKey:"inspector.properties.charts.showNull.connect"},{value:"Gaps",displayNameKey:"inspector.properties.charts.showNull.gap"},{value:"Zeros",displayNameKey:"inspector.properties.charts.showNull.zero"}],displayNameKey:"inspector.properties.charts.showNull.title",defaultValue:e}},wN.showDots=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showDots",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showDots",defaultValue:e}},wN.startAngle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"startAngle",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.startAngle",defaultValue:e,min:0,max:360}},wN.sweep=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:360;return{name:"sweep",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.sweep",defaultValue:e,min:0,max:360}},wN.innerRadius=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"innerRadius",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.innerRadias",defaultValue:e,min:0,max:99}},wN.axisMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Cartesian";return{name:"axisMode",type:sg.PublicPropertyType.Enum,items:[{value:"Cartesian",displayNameKey:"inspector.properties.charts.axisMode.cartesian"},{value:"Radial",displayNameKey:"inspector.properties.charts.axisMode.radial"},{value:"Polygonal",displayNameKey:"inspector.properties.charts.axisMode.polygonal"}],displayNameKey:"inspector.properties.charts.axisMode.title",defaultValue:e}},wN.topWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:70;return{name:"topWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.topWidth",defaultValue:e,min:0,max:100}},wN.bottomWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30;return{name:"bottomWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.bottomWidth",defaultValue:e,min:0,max:100}},wN.neckHeight=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"neckHeight",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.neckHeight",defaultValue:e,min:0,max:100}},wN.reverseColor=function(){return{name:"reverseColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.reverseColor",resetType:H.ColorResetType.NoFill}},wN.maintainColorAssignments=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"maintainColorAssignments",type:sg.PublicPropertyType.ColorAssignment,displayNameKey:"inspector.properties.charts.maintainColorAssignments",defaultValue:e,palettePath:"paletteId"}},(xN=kN.Carousel||(kN.Carousel={})).automaticCarousel=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"automaticCarousel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.automaticCarousel",defaultValue:e}},xN.carouselInterval=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return{name:"carouselInterval",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.carouselInterval",min:0,_excludeMin:!0,defaultValue:e}},(AN=kN.Interaction||(kN.Interaction={})).singleSelection=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"singleSelection",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.singleSelection",defaultValue:e}},AN.clickAction=function(){return{name:"clickAction",type:sg.PublicPropertyType.ClickAction,displayNameKey:"inspector.properties.common.clickAction"}},(IN=kN.DataLabel||(kN.DataLabel={})).dataLabel=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabel2":"dataLabel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showDataLabel",defaultValue:e}},IN.dataLabelPercentage=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"dataLabelPercentage",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.percentageDisplay",defaultValue:e}},IN.dataLabelPosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ba;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelPosition2":"dataLabelPosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.location",items:[{value:ba,displayNameKey:"inspector.properties.charts.dataLabel.position.around"},{value:Ca,displayNameKey:"inspector.properties.charts.dataLabel.position.onSlice"}],defaultValue:e}},IN.dataLabelValue=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelValue2":"dataLabelValue",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.value",defaultValue:e}},IN.dataLabelDisplayUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DisplayUnit.Auto;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelDisplayUnit2":"dataLabelDisplayUnit",type:sg.PublicPropertyType.DisplayUnit,displayNameKey:"inspector.properties.charts.dataLabel.displayUnit",defaultValue:e}},IN.dataLabelSeries=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelSeries2":"dataLabelSeries",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.series",defaultValue:e}},IN.dataLabelCategory=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelCategory2":"dataLabelCategory",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.category",defaultValue:e}},IN.dataLabelDetails=function(){return Object.assign(Object.assign({},IN.dataLabelCategory()),{displayNameKey:"inspector.properties.charts.dataLabel.details"})},IN.dataLabelDisplayMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelDisplayMode2":"dataLabelDisplayMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",items:[{value:1,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.all"},{value:3,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.smart"}],defaultValue:e}},IN.dataLabelTextStyle=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:t?"dataLabelTextStyle2":"dataLabelTextStyle",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle",defaultValue:e}},IN.connectingLineColor=function(e){return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"connectingLineColor2":"connectingLineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.connectingLineColor",resetType:H.ColorResetType.Auto,defaultValue:e}},IN.dataLabelYPlacement=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DataLabelPlacement.Far;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelYPlacement2":"dataLabelYPlacement",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.yPlacement.title",items:[{value:H.DataLabelPlacement.Far,displayNameKey:"inspector.properties.charts.dataLabel.yPlacement.far"},{value:H.DataLabelPlacement.Center,displayNameKey:"inspector.properties.charts.dataLabel.yPlacement.center"},{value:H.DataLabelPlacement.Near,displayNameKey:"inspector.properties.charts.dataLabel.yPlacement.near"}],defaultValue:e}},IN.dataLabelXPlacement=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DataLabelPlacement.Center;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelXPlacement2":"dataLabelXPlacement",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.xPlacement.title",items:[{value:H.DataLabelPlacement.Far,displayNameKey:"inspector.properties.charts.dataLabel.xPlacement.far"},{value:H.DataLabelPlacement.Center,displayNameKey:"inspector.properties.charts.dataLabel.xPlacement.center"},{value:H.DataLabelPlacement.Near,displayNameKey:"inspector.properties.charts.dataLabel.xPlacement.near"}],defaultValue:e}},IN.dataLabelAngle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DataLabelAngle.Horizontal;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelAngle2":"dataLabelAngle",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.angle.title",items:[{value:H.DataLabelAngle.Horizontal,displayNameKey:"inspector.properties.charts.dataLabel.angle.horizontal"},{value:H.DataLabelAngle.PerpendicularToY,displayNameKey:"inspector.properties.charts.dataLabel.angle.perpendicularToY"},{value:H.DataLabelAngle.ParallelToY,displayNameKey:"inspector.properties.charts.dataLabel.angle.parallelToY"}],defaultValue:e}},IN.dataLabelConnectingLineMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DataLabelConnectingLineMode.None;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelConnectingLineMode2":"dataLabelConnectingLineMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.connectingLineMode.title",items:[{value:H.DataLabelConnectingLineMode.None,displayNameKey:"inspector.properties.charts.dataLabel.connectingLineMode.none"},{value:H.DataLabelConnectingLineMode.Always,displayNameKey:"inspector.properties.charts.dataLabel.connectingLineMode.always"},{value:H.DataLabelConnectingLineMode.Auto,displayNameKey:"inspector.properties.charts.dataLabel.connectingLineMode.auto"}],defaultValue:e}},IN.dataLabelXOffset=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelXOffset2":"dataLabelXOffset",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.dataLabel.xOffset",defaultValue:e}},IN.dataLabelYOffset=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelYOffset2":"dataLabelYOffset",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.dataLabel.yOffset",defaultValue:e}},IN.dataLabelConnectingLineWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelConnectingLineWidth2":"dataLabelConnectingLineWidth",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.dataLabel.connectingLineWidth.title",defaultValue:e}},IN.dataLabelShape=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelShape2":"dataLabelShape",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showShape",defaultValue:e}},IN.dataLabelShapeImageId=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelShapeImageId2":"dataLabelShapeImageId",type:sg.PublicPropertyType.Image,displayNameKey:"inspector.properties.charts.dataLabel.shapeImage",defaultValue:e}},IN.dataLabelShapeXCenter=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelShapeXCenter2":"dataLabelShapeXCenter",type:sg.PublicPropertyType.Percentage,displayNameKey:"inspector.properties.charts.dataLabel.shapeXCenter",defaultValue:e}},IN.dataLabelShapeYCenter=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50;return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelShapeYCenter2":"dataLabelShapeYCenter",type:sg.PublicPropertyType.Percentage,displayNameKey:"inspector.properties.charts.dataLabel.shapeYCenter",defaultValue:e}},IN.dataLabelShapeXScale=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"1x";return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelShapeXScale2":"dataLabelShapeXScale",type:sg.PrivatePropertyType.ScaleString,displayNameKey:"inspector.properties.charts.dataLabel.shapeXScale",defaultValue:e}},IN.dataLabelShapeYScale=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"1x";return{name:1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"dataLabelShapeYScale2":"dataLabelShapeYScale",type:sg.PrivatePropertyType.ScaleString,displayNameKey:"inspector.properties.charts.dataLabel.shapeYScale",defaultValue:e}},(PN=kN.Legend||(kN.Legend={})).legend=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"legend",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showLegend",defaultValue:e}},PN.showLegendName=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showLegendName",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.title",defaultValue:e}},PN.legendTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"legendTextStyle",displayNameKey:"inspector.properties.common.legendTextStyle",defaultValue:e}},PN.legendPosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Right";return{name:"legendPosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.position",items:[{value:"Top",displayNameKey:"inspector.properties.common.surroundingPosition.top"},{value:"Right",displayNameKey:"inspector.properties.common.surroundingPosition.right"},{value:"Bottom",displayNameKey:"inspector.properties.common.surroundingPosition.bottom"},{value:"Left",displayNameKey:"inspector.properties.common.surroundingPosition.left"}],defaultValue:e}},PN.legendAutoSize=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"legendAutoSize",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.legendAutoSize",defaultValue:e}},PN.legendWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"30%";return{name:"legendWidth",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.legendWidth",defaultValue:e,regex:ZN.legendWidthHeight}},PN.legendHeight=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"30%";return{name:"legendHeight",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.legendHeight",defaultValue:e,regex:ZN.legendWidthHeight}},PN.legendHAlign=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"auto";return{name:"legendHAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.legendHAlign",items:[{value:"auto",displayNameKey:"inspector.properties.common.auto"},{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:e}},PN.legendVAlign=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"auto";return{name:"legendVAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.legendVAlign",items:[{value:"auto",displayNameKey:"inspector.properties.common.auto"},{value:"center",displayNameKey:"inspector.properties.common.vAlign.middle"},{value:"top",displayNameKey:"inspector.properties.common.vAlign.top"},{value:"bottom",displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:e}},PN.legendWrap=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"legendWrap",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.legendWrap",defaultValue:e}},PN.showSizeBubble=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showSizeBubble",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showSizeLegend",defaultValue:e}},(_N=kN.CategoryAxis||(kN.CategoryAxis={})).categoryAxis=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"categoryAxis",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:e}},_N.categoryAxisLine=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"categoryAxisLine",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxisLine",defaultValue:e}},_N.categoryTickLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"categoryTickLabel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showTickLabel",defaultValue:e}},_N.categoryTickMark=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"categoryTickMark",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showTickMark",defaultValue:e}},_N.columnTitle=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"columnTitle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showTitle",defaultValue:e}},_N.categoryLabelAngle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{name:"categoryLabelAngle",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.axis.lableDirection",items:[{value:1,displayNameKey:"inspector.properties.common.orientation.auto"},{value:2,displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:3,displayNameKey:"inspector.properties.common.orientation.vertical"},{value:4,displayNameKey:"inspector.properties.common.orientation.diagonal"}],defaultValue:e}},_N.categoryOrigin=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"categoryOrigin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.categoryOrigin",defaultValue:e}},_N.axisTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"axisTextStyle",displayNameKey:"inspector.properties.charts.axis.axisTextStyle",defaultValue:e}},_N.categoryLabelOverflow=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.TextOverflowType.Hide;return{name:"categoryLabelOverflow",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.title",items:[{value:H.TextOverflowType.Hide,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.hide"},{value:H.TextOverflowType.Ellipsis,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.ellipsis"},{value:H.TextOverflowType.Wrap,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.wrap"}],defaultValue:e}},(MN=kN.ValueAxis||(kN.ValueAxis={})).valueAxis=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxis",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:e}},MN.valueAxisGridline=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisGridline",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showGridLine",defaultValue:e}},MN.valueAxisGridlineColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#cccccc";return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisGridlineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.axis.gridLineColor",defaultValue:e,resetType:H.ColorResetType.None}},MN.valueAxisMaxValue=function(e){return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisMaxValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.maxValue",defaultValue:e,_allowNullValue:!0}},MN.valueAxisMinValue=function(e){return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisMinValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.minValue",defaultValue:e,_allowNullValue:!0}},MN.valueAxisInterval=function(e){return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisInterval",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.axis.interval",defaultValue:e,_allowNullValue:!0}},MN.valueAxisAxisLine=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisAxisLine",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showAxisLine"}},MN.valueAxisTickLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisTickLabel",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showTickLabel"}},MN.valueAxisTickMark=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisTickMark",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showTickMark"}},MN.rowTitle=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"rowTitle",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.common.showTitle"}},MN.valueAxisUnitLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisUnitLabel",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showUnitsLabel"}},MN.valueAxisFormat=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"General";return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisFormat",type:sg.PublicPropertyType.Format,defaultValue:e,displayNameKey:"inspector.properties.common.format"}},MN.valueAxisDisplayUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DisplayUnit.Auto;return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisDisplayUnit",type:sg.PublicPropertyType.DisplayUnit,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.displayUnit"}},MN.valueAxisUnitLabelPosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.UnitLabelPosition.OnScale;return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueAxisUnitLabelPosition",type:sg.PublicPropertyType.Enum,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.unitsLabelPosition",items:[{value:H.UnitLabelPosition.OnScale,displayNameKey:"inspector.properties.charts.axis.labelPosition.onScale"},{value:H.UnitLabelPosition.OnTitle,displayNameKey:"inspector.properties.charts.axis.labelPosition.onTitle"}]}},MN.valueLabelAngle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"valueLabelAngle",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.common.orientation.auto"},{value:2,displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:3,displayNameKey:"inspector.properties.common.orientation.vertical"},{value:4,displayNameKey:"inspector.properties.common.orientation.diagonal"}],defaultValue:e,displayNameKey:"inspector.properties.charts.axis.lableDirection"}},MN.valueAxisOrigin=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"valueAxisOrigin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.categoryOrigin",defaultValue:e}},MN.valueAxisTextStyle=function(){return{name:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"valueAxisTextStyle",type:sg.PublicPropertyType.TextStyle,inheritFrom:mg.InheritProperty.TextStyle,displayNameKey:"inspector.properties.charts.axis.axisTextStyle"}},MN.valueLabelOverflow=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.TextOverflowType.Hide;return{name:"valueLabelOverflow",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.title",items:[{value:H.TextOverflowType.Hide,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.hide"},{value:H.TextOverflowType.Ellipsis,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.ellipsis"},{value:H.TextOverflowType.Wrap,displayNameKey:"inspector.properties.charts.axis.categoryLabelOverflow.wrap"}],defaultValue:e}},(LN=kN.ValueAxisX||(kN.ValueAxisX={})).xValueAxis=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"xValueAxis",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showAxis",defaultValue:e}},LN.xValueAxisGridline=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"xValueAxisGridline",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.axis.showGridLine",defaultValue:e}},LN.xValueAxisGridlineColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#cccccc";return{name:"xValueAxisGridlineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.axis.gridLineColor",defaultValue:e}},LN.xValueAxisMaxValue=function(e){return{name:"xValueAxisMaxValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.maxValue",defaultValue:e,_allowNullValue:!0}},LN.xValueAxisMinValue=function(e){return{name:"xValueAxisMinValue",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.minValue",defaultValue:e,_allowNullValue:!0}},LN.xValueAxisInterval=function(e){return{name:"xValueAxisInterval",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.axis.interval",defaultValue:e,_allowNullValue:!0}},LN.xValueAxisAxisLine=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"xValueAxisAxisLine",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showAxisLine"}},LN.xValueAxisTickLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"xValueAxisTickLabel",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showTickLabel"}},LN.xValueAxisTickMark=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"xValueAxisTickMark",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showTickMark"}},LN.columnTitle=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"columnTitle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showTitle",defaultValue:e}},LN.xValueAxisFormat=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"General";return{name:"xValueAxisFormat",type:sg.PublicPropertyType.Format,defaultValue:e,displayNameKey:"inspector.properties.common.format"}},LN.xValueAxisDisplayUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DisplayUnit.Auto;return{name:"xValueAxisDisplayUnit",type:sg.PublicPropertyType.DisplayUnit,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.displayUnit"}},LN.xValueAxisUnitLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"xValueAxisUnitLabel",type:sg.PublicPropertyType.Boolean,defaultValue:e,displayNameKey:"inspector.properties.charts.axis.showUnitsLabel"}},LN.xValueAxisOrigin=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"xValueAxisOrigin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.axis.categoryOrigin",defaultValue:e}},(RN=kN.Gauge||(kN.Gauge={})).pointerColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#999999";return{name:"pointerColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.pointerColor",defaultValue:e}},RN.rangeDotType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"precentage";return{name:"rangeDotType",structuredPath:"rangeDotsAndColors",type:sg.PublicPropertyType.Enum,items:[{value:"precentage",displayNameKey:"inspector.properties.charts.rangeDotTypeEnums.precentage"},{value:"constant",displayNameKey:"inspector.properties.charts.rangeDotTypeEnums.constant"}],displayNameKey:"inspector.properties.charts.rangeDotType",defaultValue:e}},RN.rangeDotsAndColors=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[150,100,75,0];return{name:"rangeDotsAndColors",type:sg.PrivatePropertyType.ColorRange,displayNameKey:"inspector.properties.charts.rangeDotsAndColorslabel",defaultValue:{rangeDotType:zi,rangeDots:e,rangeColors:["=Theme.Colors!Accent5","=Theme.Colors!Accent3","=Theme.Colors!Accent1"]}}},RN.startAngle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"startAngle",type:sg.PublicPropertyType.Angle,defaultValue:e,min:0,max:360,step:15,markStep:30,displayNameKey:"inspector.properties.charts.startAngle"}},RN.sweep=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:360;return{name:"sweep",type:sg.PublicPropertyType.Angle,defaultValue:e,min:30,max:360,step:15,markStep:30,displayNameKey:"inspector.properties.charts.sweep"}},RN.valueSourceType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"dataset";return{name:"valueSourceType",type:sg.PublicPropertyType.Enum,items:[{value:"dataset",displayNameKey:"inspector.properties.charts.valueSourceType.fromDataset"},{value:"customInput",displayNameKey:"inspector.properties.charts.valueSourceType.fromCustomInput"}],displayNameKey:"inspector.properties.charts.valueSource",defaultValue:e}},RN.valueCustomInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:150;return{name:"valueCustomInput",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.valueCustomInput",defaultValue:e}},RN.comparisonSourceType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"dataset";return{name:"comparisonSourceType",type:sg.PublicPropertyType.Enum,items:[{value:"dataset",displayNameKey:"inspector.properties.charts.valueSourceType.fromDataset"},{value:"customInput",displayNameKey:"inspector.properties.charts.valueSourceType.fromCustomInput"}],displayNameKey:"inspector.properties.charts.comparisonSource",defaultValue:e}},RN.comparisonCustomInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return{name:"comparisonCustomInput",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.comparisonCustomInput",defaultValue:e}},RN.showSubTitle=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showSubTitle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showSubTitle",defaultValue:e}},RN.customSubTitle=function(){return{name:"customSubTitle",type:sg.PrivatePropertyType.AutoTitle,displayNameKey:"inspector.properties.charts.customSubTitle",isSubTitle:!0}},RN.subTitleTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"subTitleTextStyle",displayNameKey:"inspector.properties.charts.subTitleFontSetting",_enableAuto:!0,defaultValue:e}},RN.gaugeDataLabelTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"dataLabelTextStyle",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle",_enableAuto:!0,defaultValue:e}},RN.valueCustomUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return{name:"valueCustomUnit",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.valueCustomUnit",defaultValue:e}},RN.valueCustomUnitTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"valueCustomUnitTextStyle",displayNameKey:"inspector.properties.charts.valueCustomUnitTextStyle",defaultValue:e,_enableAuto:!0}},RN.showDeltaLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showDeltaLabel",displayNameKey:"inspector.properties.charts.showDeltaLabel",type:sg.PublicPropertyType.Boolean,defaultValue:e}},RN.showDeltaSymbol=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showDeltaSymbol",displayNameKey:"inspector.properties.charts.showDeltaSymbol",type:sg.PublicPropertyType.Boolean,defaultValue:e}},RN.showDeltaPercentage=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showDeltaPercentage",displayNameKey:"inspector.properties.charts.showDeltaPercentage",type:sg.PublicPropertyType.Boolean,defaultValue:e}},RN.calculationMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.CalculationMode.Ratio;return{name:"calculationMode",type:sg.PublicPropertyType.Enum,items:[{value:H.CalculationMode.Ratio,displayNameKey:"inspector.properties.charts.calculationModeEnums.ratio"},{value:H.CalculationMode.Delta,displayNameKey:"inspector.properties.charts.calculationModeEnums.delta"}],defaultValue:e,displayNameKey:"inspector.properties.charts.calculationMode"}},RN.deltaLabelTextStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"deltaLabelTextStyle",displayNameKey:"inspector.properties.charts.deltaLabelTextStyle",_enableAuto:!0,_blackList:["color"],defaultValue:t,_disableColor:e}},RN.calibrationType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"complete";return{name:"calibrationType",type:sg.PublicPropertyType.Enum,items:[{value:"complete",displayNameKey:"inspector.properties.charts.calibrationType.complete"},{value:"boundary",displayNameKey:"inspector.properties.charts.calibrationType.boundary"},{value:"hide",displayNameKey:"inspector.properties.charts.calibrationType.hide"}],defaultValue:e,displayNameKey:"inspector.properties.charts.calibrationType.title"}},RN.gaugeAxisType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"constant";return{name:"gaugeAxisType",type:sg.PublicPropertyType.Enum,items:[{value:"precentage",displayNameKey:"inspector.properties.charts.gaugeAxisTypeEnums.precentage"},{value:"constant",displayNameKey:"inspector.properties.charts.gaugeAxisTypeEnums.constant"}],defaultValue:e,displayNameKey:"inspector.properties.charts.gaugeAxisType"}},(VN=kN.Indicator||(kN.Indicator={})).unreachedColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#e5e5e5";return{name:"unreachedColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.unreachedColor",defaultValue:e}},VN.isMutativeReachedColor=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"isMutativeReachedColor",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.isMutativeReachedColor",defaultValue:e}},VN.reachedColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"=Theme.Colors!Accent1";return{name:"reachedColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.reachedColor",defaultValue:e}},VN.showPercentageLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showDeltaLabel",displayNameKey:"inspector.properties.charts.showPercentageLabel",type:sg.PublicPropertyType.Boolean,defaultValue:e}},VN.percentageLabelTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"deltaLabelTextStyle",displayNameKey:"inspector.properties.charts.percentageLabelTextStyle",_enableAuto:!0,_blackList:["color"],defaultValue:e,_disableColor:!0}},(NN=kN.KPI||(kN.KPI={})).contentHAlignment=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2;return{name:"contentHAlignment",displayNameKey:"inspector.properties.common.alignment",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.common.hAlign.left"},{value:2,displayNameKey:"inspector.properties.common.hAlign.center"},{value:3,displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:e}},NN.conditionalFormatType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"noBackground";return{name:"conditionalFormatType",displayNameKey:"inspector.properties.charts.conditionalFormatType",type:sg.PrivatePropertyType.KPIConditionalPreviewEditor,defaultValue:e}},(EN=kN.Data||(kN.Data={})).showTopN=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showTopN",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showTopN",defaultValue:e}},EN.topN=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return{name:"topN",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.topN",defaultValue:e,min:1}},(FN=kN.Trellis||(kN.Trellis={})).trellisPadding=function(e){return{name:"trellisPadding",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.charts.trellis.padding",defaultValue:e}},FN.trellisBorderColor=function(){return{name:"trellisBorderColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.trellis.borderColor",defaultValue:"#666666",resetType:H.ColorResetType.Auto}},FN.trellisTextStyle=function(e){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"trellisTextStyle",displayNameKey:"inspector.properties.charts.trellis.textStyle",defaultValue:e}},(ON=kN.Tooltip||(kN.Tooltip={})).tooltip=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"tooltip",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showTooltip",defaultValue:e}},ON.tooltipModeNoCategory=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.TooltipMode.DataPoint;return{name:"tooltipMode",type:sg.PublicPropertyType.Enum,items:[{value:H.TooltipMode.None,displayNameKey:"inspector.properties.charts.tooltipMode.none"},{value:H.TooltipMode.DataPoint,displayNameKey:"inspector.properties.charts.tooltipMode.dataPointTooltip"}],defaultValue:e,displayNameKey:"inspector.properties.charts.tooltipMode.title"}},ON.tooltipMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.TooltipMode.DataPoint;return{name:"tooltipMode",type:sg.PublicPropertyType.Enum,items:[{value:H.TooltipMode.None,displayNameKey:"inspector.properties.charts.tooltipMode.none"},{value:H.TooltipMode.DataPoint,displayNameKey:"inspector.properties.charts.tooltipMode.dataPointTooltip"},{value:H.TooltipMode.Category,displayNameKey:"inspector.properties.charts.tooltipMode.categoryTooltip"}],defaultValue:e,displayNameKey:"inspector.properties.charts.tooltipMode.title"}},ON.categoryTrackingArea=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showCategoryTrackingArea",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showCategoryTrackingArea",defaultValue:e}},ON.categoryTrackingAreaColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"rgba(97,97,97,0.7)";return{name:"categoryTrackingAreaColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.categoryTrackingAreaColor",defaultValue:e}},ON.categoryTrackingLine=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showCategoryTrackingLine",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showCategoryTrackingLine",defaultValue:e}},ON.categoryTrackingLineColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#666";return{name:"categoryTrackingLineColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.categoryTrackingLineColor",defaultValue:e}},ON.categoryTrackingLineType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Fn.Dashed;return{name:"categoryTrackingLineType",type:sg.PublicPropertyType.Enum,items:[{value:Fn.Dashed,displayNameKey:"lineTypes.dashed"},{value:Fn.Solid,displayNameKey:"lineTypes.solid"}],displayNameKey:"inspector.properties.charts.categoryTrackingLineType",defaultValue:e}},ON.categoryTrackingLineWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{name:"categoryTrackingLineWidth",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.categoryTrackingLineWidth",defaultValue:e}},ON.pointTrackingCrossX=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showPointTrackingCrossX",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showPointTrackingCrossX",defaultValue:e}},ON.pointTrackingCrossXColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#666";return{name:"pointTrackingCrossXColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.pointTrackingCrossXColor",defaultValue:e}},ON.pointTrackingCrossXType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Fn.Dashed;return{name:"pointTrackingCrossXType",type:sg.PublicPropertyType.Enum,items:[{value:Fn.Dashed,displayNameKey:"lineTypes.dashed"},{value:Fn.Solid,displayNameKey:"lineTypes.solid"}],displayNameKey:"inspector.properties.charts.pointTrackingCrossXType",defaultValue:e}},ON.pointTrackingCrossXWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{name:"pointTrackingCrossXWidth",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.pointTrackingCrossXWidth",defaultValue:e}},ON.pointTrackingCrossY=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"showPointTrackingCrossY",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showPointTrackingCrossY",defaultValue:e}},ON.pointTrackingCrossYColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#666";return{name:"pointTrackingCrossYColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.pointTrackingCrossYColor",defaultValue:e}},ON.pointTrackingCrossYType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Fn.Dashed;return{name:"pointTrackingCrossYType",type:sg.PublicPropertyType.Enum,items:[{value:Fn.Dashed,displayNameKey:"lineTypes.dashed"},{value:Fn.Solid,displayNameKey:"lineTypes.solid"}],displayNameKey:"inspector.properties.charts.pointTrackingCrossYType",defaultValue:e}},ON.pointTrackingCrossYWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{name:"pointTrackingCrossYWidth",type:sg.PublicPropertyType.Float,min:0,_excludeMin:!0,displayNameKey:"inspector.properties.charts.pointTrackingCrossYWidth",defaultValue:e}},(HN=kN.Series||(kN.Series={})).showSeriesTotal=function(){return{name:"showSeriesTotal",type:sg.PrivatePropertyType.SeriesTotal}},HN.totalDisplay=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ft("inspector.properties.charts.series.defaultDisplay");return{name:"seriesTotalDisplay",type:sg.PublicPropertyType.Text,defaultValue:e,displayNameKey:"inspector.properties.charts.series.totalDisplay"}},HN.seriesTotalColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"rgba(66,34,112,0.5)";return{name:"seriesTotalColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.series.totalColor",defaultValue:e,resetType:H.ColorResetType.None}},HN.seriesTotalWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:90;return{name:"seriesTotalWidth",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.charts.series.totalWidth",min:0,max:100,defaultValue:e}},HN.showSeriesTotalLabel=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{name:"showSeriesTotalLabel",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.series.showTotalLabel",defaultValue:e}},HN.seriesTotalWithCategory=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"seriesTotalWithCategory",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.series.categoryName",defaultValue:e}},HN.seriesTotalLabelDisplayUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DisplayUnit.Auto;return{name:"seriesTotalLabelDisplayUnit",type:sg.PublicPropertyType.DisplayUnit,displayNameKey:"inspector.properties.charts.series.displayUnit",defaultValue:e}},HN.seriesTotalLabelPosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.SeriesTotalLabelPosition.Outside;return{name:"seriesTotalLabelPosition",type:sg.PublicPropertyType.Enum,items:[{value:H.SeriesTotalLabelPosition.Outside,displayNameKey:"inspector.properties.charts.series.labelPosition.outside"},{value:H.SeriesTotalLabelPosition.Inside,displayNameKey:"inspector.properties.charts.series.labelPosition.inside"}],displayNameKey:"inspector.properties.charts.series.labelPosition.title",defaultValue:e}},HN.seriesTotalLabelOffset=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return{name:"seriesTotalLabelOffset",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.charts.series.labelOffset",defaultValue:e}},HN.seriesTotalLabelAngle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DataLabelAngle.Horizontal;return{name:"seriesTotalLabelAngle",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.angle.title",items:[{value:H.DataLabelAngle.Horizontal,displayNameKey:"inspector.properties.charts.dataLabel.angle.horizontal"},{value:H.DataLabelAngle.PerpendicularToY,displayNameKey:"inspector.properties.charts.dataLabel.angle.perpendicularToY"},{value:H.DataLabelAngle.ParallelToY,displayNameKey:"inspector.properties.charts.dataLabel.angle.parallelToY"}],defaultValue:e}},HN.seriesTotalLabelTextStyle=function(){return{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"seriesTotalLabelTextStyle",displayNameKey:"inspector.properties.charts.series.dataLabelStyle",defaultValue:{fontSize:H.FontSizeList.Ratio1_2,fontWeight:H.FontWeight.Bold}}},HN.seriesTotalLabelDisplayMode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2;return{name:"seriesTotalLabelDisplayMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",items:[{value:1,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.all"},{value:3,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.smart"}],defaultValue:e}},(BN||(BN={})).allDimensions=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{name:"includeAllDimensions",type:sg.PublicPropertyType.Boolean,_displayNameKey:"inspector.properties.common.includeAllDimensions",_ancestorPath:"pivot.aggregationOptions",defaultValue:e}},(zN=UN=UN||{}).nullItemsString=function(){return{name:"nullItemsString",type:sg.PrivatePropertyType.LanguageResource,displayNameKey:"inspector.properties.common.showNull.display",inheritFrom:mg.InheritProperty.NullItemsString}},zN.emptyItemsString=function(){return{name:"emptyItemsString",type:sg.PrivatePropertyType.LanguageResource,displayNameKey:"inspector.properties.common.showEmpty.display",inheritFrom:mg.InheritProperty.EmmptyItemsString}},(jN=KN=KN||{}).setDataSouceType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DataSourceType.Normal;return{name:"dataSourceType",type:sg.PublicPropertyType.Enum,items:[{displayNameKey:"inspector.properties.common.customDataSource.normal",value:H.DataSourceType.Normal},{displayNameKey:"inspector.properties.common.customDataSource.customInput",value:H.DataSourceType.CustomInput}],displayNameKey:"inspector.properties.common.customDataSource.dataSourceType",_ancestorPath:"options",defaultValue:e}},jN.setCustomDataSource=function(){return{name:"customDataSource",type:sg.PrivatePropertyType.CustomDataSource,displayNameKey:"inspector.properties.common.customDataSource.customInput",_ancestorPath:"pivot"}},(GN=WN=WN||{}).referenceLine={type:pg.ActionType.Extension,name:"referenceLine",path:"referenceLine",extensionType:pg.ExtensionType.ReferenceLine,displayNameKey:"actionBar.referenceLine",iconCss:"icon-reference-line"},GN.expand={type:pg.ActionType.Extension,name:"expand",displayNameKey:"actionBar.expand",iconCss:"icon-expand",path:"expand",extensionType:pg.ExtensionType.Toggle,toggleState:[{displayNameKey:"actionBar.expand",iconCss:"icon-expand"},{displayNameKey:"actionBar.shrink",iconCss:"icon-shrink"}]},GN.conditionalFormat={type:pg.ActionType.Extension,name:"conditionalFormat",path:"conditionalFormat",extensionType:pg.ExtensionType.ConditionalFormat,displayNameKey:"actionBar.conditionalFormat",iconCss:"icon-conditional-format",dataRole:"conditionalFormatValues",hasSymbolSizeSetting:!1,hasPositionShapeSetting:!0,hasValueLabelSetting:!0,hasCategoryLabelSetting:!0,hasSeriesLabelSetting:!0,hasPercentageLabelSetting:!1,hasLocationLabelSetting:!1,hasColorLabelSetting:!1,hasSizeLabelSetting:!1,hasShapeLabelSetting:!1,hasAreaLabelSetting:!1,hasDetailLabelSetting:!1},GN.trendLine={type:pg.ActionType.Extension,name:"trendLines",path:"trendLines",extensionType:pg.ExtensionType.TrendLine,displayNameKey:"actionBar.trendLine",iconCss:"icon-trend-line"},GN.rangeChartShowData={type:pg.ActionType.ShowData,rule:{out:[{mode:"post",execute:[{source:"upper",target:"values",cmd:"all"},{source:"lower",target:"values",cmd:"all"}]}]}};function $N(e){return{dataRoles:UE,dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",required:[{values:{min:1}}]}}],conditions:[{values:{max:1}}],prefers:e===H.ChartType.TreeMap?[{values:{max:1},details:{max:2},trellisColumns:{max:2},trellisRows:{}}]:[{values:{max:1},details:{}}],conversionRules:{in:[{mode:"pre",execute:[{source:"category",target:"details",cmd:"all"},{source:"series",target:"details",cmd:"all"},{source:"location",target:"details",cmd:"all"}]}],out:[{mode:"post",conditions:[{category:null}],execute:[{source:"details",target:"series",cmd:"all"}]},{mode:"post",execute:[{source:"details",target:"series",cmd:"last"},{source:"details",target:"category",cmd:"all"}]}]}}}function eE(e){return{dataRoles:rF,dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{upper:{min:1},lower:{min:1}}]}}],conditions:[{upper:{max:1},lower:{max:1}}],prefers:[V()({upper:{max:1},lower:{max:1},category:{max:1},series:{max:1}},e===H.ChartType.RangeBar?"trellisRows":"trellisColumns",{})],conversionRules:{in:[{mode:"post",execute:[{source:"values",target:"upper",cmd:"first"},{source:"values",target:"lower",cmd:"last"}]}],out:[{mode:"post",execute:[{source:"lower",target:"values",cmd:"all"},{source:"upper",target:"values",cmd:"all"}]}]}}}function tE(e,a){return e.reduce(function(e,n){var t=a.find(function(e){return a=e,(t=n).type===a.type&&t.name===a.name;var t,a});return e.push(null!=t?t:n),e},[])}function aE(e){return"".concat(TF,"_").concat(e)}function nE(e,t){return t.filter(function(t){return!e.some(function(e){return e(t)})})}function iE(e){return e.type===H.ActionMenuType.ConvertVisual}function rE(e){var t;return(t=function(e){k()(s,e);var o=w()(s);function s(e){var t,a;I()(this,s);for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=o.call(this,(a=e,[ae.over(ae.lensPath(["capabilities","actions"]),ae.concat([{type:pg.ActionType.Event,name:"enterEditing",horizontal:!0,_displayNameKey:"spreadChart.enterEditing",iconCss:"icon-chart-setting"},{type:pg.ActionType.Event,name:"exitEditing",_displayNameKey:"spreadChart.exitEditing",iconCss:"icon-clear-selection"},{type:pg.ActionType.Event,name:"setDataSourceRange",_displayNameKey:"spreadChart.setDataSourceRange",iconCss:"mdi mdi-shape-rectangle-plus"},{type:pg.ActionType.Event,name:"showDataSourceRange",_displayNameKey:"spreadChart.showDataSourceRange",iconCss:"mdi mdi-vector-rectangle"},{type:pg.ActionType.Extension,extensionType:pg.ExtensionType.Enum,name:"editorLayout",path:"editorLayout",iconCss:"mdi mdi-panorama-wide-angle",_displayNameKey:"spreadChart.layout",items:[{value:H.SpreadChartLayout.Tables,_displayNameKey:"spreadChart.tables",iconCss:"icon-singal"},{value:H.SpreadChartLayout.Source,_displayNameKey:"spreadChart.source",iconCss:"icon-singal"},{value:H.SpreadChartLayout.Tables|H.SpreadChartLayout.Source,_displayNameKey:"spreadChart.tablesAndSource",iconCss:"icon-left-right"},{value:H.SpreadChartLayout.Source|H.SpreadChartLayout.Viewer,_displayNameKey:"spreadChart.tablesAndViewer",iconCss:"icon-top-buttom"},{value:H.SpreadChartLayout.All,_displayNameKey:"spreadChart.all",iconCss:"icon-all"}]}])),ae.over(ae.lensPath(["capabilities","actions"]),function(e){return tE(e,[{type:pg.ActionType.ConvertVisual}])}),ae.over(ae.lensPath(["capabilities","actions"]),ae.reject(function(e){return[pg.ActionType.Filter,pg.ActionType.Rank,pg.ActionType.ShowData].includes(e.type)})),ae.set(ae.lensPath(["capabilities","analysis"]),[]),ae.over(ae.lensPath(["capabilities","options","visual"]),function(e){return ae.map(function(e){return e.type===sg.CategoryType.Interaction?ae.mergeDeepRight(e,{disable:{dataSetAutoRefresh:!0}}):"inspector.categories.dataVisualization"===e.displayNameKey?Object.assign(Object.assign({},e),{properties:e.properties.filter(function(e){return"includeAllDimensions"!==e.name})}):["inspector.categories.tables.grandTotals"].includes(e.displayNameKey)?ae.evolve({properties:ae.map(function(e){return e.type===sg.PrivatePropertyType.GrandTotal?ae.mergeDeepRight(e,{hidden:!0,defaultValue:{display:Wa}}):e})},e):e},null!=e?e:[])}),ae.over(ae.lensPath(["capabilities","options","visual"]),function(e){return ae.concat(null!=e?e:[],[{_displayNameKey:"inspector.categories.dataVisualization",properties:[{name:"removeData",type:sg.PublicPropertyType.Enum,_displayNameKey:"spreadChart.removeData",_ancestorPath:"pivot.aggregationOptions",items:[{value:H.EmptyDataInSpreadSource.EmptyRowColumn,_displayNameKey:"spreadChart.emptyRowColumn"},{value:H.EmptyDataInSpreadSource.EmptyDimension,_displayNameKey:"spreadChart.emptyDimension"},{value:H.EmptyDataInSpreadSource.EmptyCell,_displayNameKey:"spreadChart.emptyCell"},{value:H.EmptyDataInSpreadSource.None,_displayNameKey:"spreadChart.none"}],defaultValue:"none"},{name:"columnAsField",type:sg.PublicPropertyType.Boolean,_pristine:!0,_displayNameKey:"spreadChart.columnAsField",defaultValue:!0}]},{properties:[{name:"editorLayout",type:sg.PublicPropertyType.Hidden,defaultValue:H.SpreadChartLayout.Tables|H.SpreadChartLayout.Source}]},{properties:[{name:"disableAutoFit",type:sg.PublicPropertyType.Hidden,defaultValue:!0}]}])}),ae.over(ae.lensPath(["capabilities","dataBinding","dataRoles"]),function(e){return ae.map(function(e){return Object.assign(Object.assign({},e),{_noQuickFunction:!0,_noAggregationMethod:!0})},null!=e?e:[])}),ae.mergeDeepLeft({displayNameKey:"chartTypes.spreadSource"})].reduce(function(e,t){return t(e)},a)),i)).isDatasetChangeable=function(){return!1},t.isSupportChangeChartType=function(){return!1},t.id=aE(t.id),t.originalDisplayNameKey=e.displayNameKey,t}return D()(s,[{key:"getName",value:function(){return this.originalDisplayNameKey?this.getDisplayNameByKey(this.originalDisplayNameKey):C()(b()(s.prototype),"getName",this).call(this)}},{key:"createScenario",value:function(e,t){var a=C()(b()(s.prototype),"createScenario",this).call(this,e,t),n=wF.createScenario(Bd.a.v1(),"Sheet1");return a.pivotTables=[n],a.dataSourceType=H.DataSourceType.Spread,a.pivot.datasetId=e,a.pivot.dataTable={},a.pivot.dataRanges={},a}},{key:"isSupportKeepExclude",value:function(){return!1}},{key:"supportRecommend",value:function(){return!1}},{key:"isSupportAddMonitor",value:function(){return!1}},{key:"getActionBar",value:function(e,t,a){var n=this.actionExecutor.getDescriptors(e,t,a),i=n.find(function(e){return e.name===pg.ActionType.Focus});n=[i].concat(R()(n.filter(function(e){return e!==i}))).filter(function(e){return e});var r,o=!t.viewer,s=e.state.editing&&t.focus;return n=o?s?(r=[].concat(DF,[iE]),n.filter(function(t){return r.some(function(e){return e(t)})})):nE(DF,n):nE([function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes("enterEditing")}].concat(DF),n)}},{key:"isSupportTriggerDataInteraction",get:function(){return!0}},{key:"isSupportReceiveDataInteraction",get:function(){return!0}}],[{key:"getPivotTables",value:function(e){return e.pivotTables.map(kF.makeUpPivotTable)}},{key:"findActivePivotTable",value:function(t){var e;return null!==(e=t.pivotTables.find(function(e){return e.id===t.state.activeTableId}))&&void 0!==e?e:t.pivotTables[0]}},{key:"getOriginalVisualId",value:function(e){return SF.exec(e)[1]}}]),s}(e)).createPivotTable=function(){return wF.createScenario.apply(wF,arguments)},t.makeDefId=aE,t.pivotTableDef=wF,t.makeUpPivotTable=kF.makeUpPivotTable,t.isInnerPivotTable=kF.isInnerPivotTable,t}var oE,sE,lE,uE,cE,dE,pE=fN(H.ChartType.Column),hE={name:H.ChartType.Column,displayNameKey:"chartTypes.column",id:H.ChartType.Column,version:"0.0.0",description:"",iconCss:"dd-png-column-chart",capabilities:{dataBinding:pE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.seriesGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.series",properties:[DN.Series.showSeriesTotal(),DN.Series.totalDisplay(),DN.Series.seriesTotalColor(),DN.Series.seriesTotalWidth(),DN.Series.showSeriesTotalLabel(),DN.Series.seriesTotalWithCategory(),DN.Series.seriesTotalLabelDisplayUnit(),DN.Series.seriesTotalLabelPosition(),DN.Series.seriesTotalLabelOffset(),DN.Series.seriesTotalLabelAngle(),DN.Series.seriesTotalLabelDisplayMode(),DN.Series.seriesTotalLabelTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:8,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:pE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},yE=fN(H.ChartType.StackColumn),gE={name:H.ChartType.StackColumn,displayNameKey:"chartTypes.stackedColumn",id:H.ChartType.StackColumn,iconCss:"dd-png-stacked-column-chart",capabilities:{dataBinding:yE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.series",properties:[DN.Series.showSeriesTotal(),DN.Series.seriesTotalWithCategory(),DN.Series.seriesTotalLabelDisplayUnit(),DN.Series.seriesTotalLabelPosition(),DN.Series.seriesTotalLabelOffset(),DN.Series.seriesTotalLabelAngle(),DN.Series.seriesTotalLabelDisplayMode(),DN.Series.seriesTotalLabelTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:8,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:yE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},mE=fN(H.ChartType.PercentStackColumn),fE={name:H.ChartType.PercentStackColumn,displayNameKey:"chartTypes.percentStackedColumn",id:H.ChartType.PercentStackColumn,iconCss:"dd-png-percent-stacked-column-chart",capabilities:{dataBinding:mE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:8,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasPercentageLabelSetting:!0}),Object.assign(Object.assign({},WN.referenceLine),{_constOnly:!0}),WN.expand,{type:pg.ActionType.ShowData,rule:mE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},vE={dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"category",displayNameKey:"dataBindingPanel.axis",kind:"grouping",options:[{name:"categoryScale",type:"_scaleType",defaultValue:"Ordinal",ordinal:!0,condition:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{values:{min:1}}]}}],conditions:[{series:{max:0}},{series:{min:1},values:{max:1}}],prefers:[{values:{max:1},category:{max:1},series:{max:1},trellisRows:{}},{values:{},category:{max:1},trellisRows:{}}],conversionRules:{out:[{mode:"post",execute:[{source:"category",target:"trellisRows",cmd:"all"}]}]}},bE={name:H.ChartType.Bar,displayNameKey:"chartTypes.bar",id:H.ChartType.Bar,iconCss:"dd-png-bar-chart",capabilities:{dataBinding:vE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.seriesGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.series",properties:[DN.Series.showSeriesTotal(),DN.Series.totalDisplay(),DN.Series.seriesTotalColor(),DN.Series.seriesTotalWidth(),DN.Series.showSeriesTotalLabel(),DN.Series.seriesTotalWithCategory(),DN.Series.seriesTotalLabelDisplayUnit(),DN.Series.seriesTotalLabelPosition(),DN.Series.seriesTotalLabelOffset(),DN.Series.seriesTotalLabelAngle(),DN.Series.seriesTotalLabelDisplayMode(),DN.Series.seriesTotalLabelTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:8,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:vE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},CE={name:H.ChartType.StackBar,displayNameKey:"chartTypes.stackedBar",id:H.ChartType.StackBar,iconCss:"dd-png-stacked-bar-chart",capabilities:{dataBinding:vE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisTextStyle(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.series",properties:[DN.Series.showSeriesTotal(),DN.Series.seriesTotalWithCategory(),DN.Series.seriesTotalLabelDisplayUnit(),DN.Series.seriesTotalLabelPosition(),DN.Series.seriesTotalLabelOffset(),DN.Series.seriesTotalLabelAngle(),DN.Series.seriesTotalLabelDisplayMode(),DN.Series.seriesTotalLabelTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:8,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:vE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},TE={name:H.ChartType.PercentStackBar,displayNameKey:"chartTypes.percentStackedBar",id:H.ChartType.PercentStackBar,iconCss:"dd-png-percent-stacked-bar-chart",capabilities:{dataBinding:vE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:8,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasPercentageLabelSetting:!0}),Object.assign(Object.assign({},WN.referenceLine),{_constOnly:!0}),WN.expand,{type:pg.ActionType.ShowData,rule:vE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},SE=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.Line),DE=fN(H.ChartType.Line),kE={name:H.ChartType.Line,displayNameKey:"chartTypes.line",id:H.ChartType.Line,iconCss:"dd-png-line-chart",capabilities:{dataBinding:DE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineStyle(),DN.ChartStyle.lineType(),DN.ChartStyle.lineWidth(),DN.ChartStyle.showNull(),DN.ChartStyle.showDots(null===(oE=null==SE?void 0:SE.property)||void 0===oE?void 0:oE.showDots),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:8,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0}),WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:DE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},wE=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.Area),xE=fN(H.ChartType.Area),AE={name:H.ChartType.Area,displayNameKey:"chartTypes.area",id:H.ChartType.Area,iconCss:"dd-png-area-chart",capabilities:{dataBinding:xE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineStyle(),DN.ChartStyle.lineType(),DN.ChartStyle.lineWidth(),DN.ChartStyle.showNull(),DN.ChartStyle.showDots(null===(sE=null==wE?void 0:wE.property)||void 0===sE?void 0:sE.showDots),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:20,top:8,right:20,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0}),WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:xE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},IE=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.StackArea),PE=fN(H.ChartType.StackArea),_E={name:H.ChartType.StackArea,displayNameKey:"chartTypes.stackedArea",id:H.ChartType.StackArea,iconCss:"dd-png-stacked-area-chart",capabilities:{dataBinding:PE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineStyle(),DN.ChartStyle.lineType(),DN.ChartStyle.lineWidth(),DN.ChartStyle.showDots(null===(lE=null==IE?void 0:IE.property)||void 0===lE?void 0:lE.showDots),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:20,top:8,right:20,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0}),WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:PE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},ME={dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{values:{min:1}}]}}],conditions:[{series:{max:0}},{series:{min:1},values:{max:1}}],prefers:[{values:{max:1},series:{max:1}}],conversionRules:{in:[{mode:"post",conditions:[{series:{max:0}}],execute:[{source:"category",target:"series",cmd:"last"}]}],out:[{mode:"pre",execute:[{source:"series",target:"category",cmd:"first"}]}]}},LE={name:H.ChartType.Pie,displayNameKey:"chartTypes.pie",id:H.ChartType.Pie,iconCss:"dd-png-pie-chart",capabilities:{dataBinding:ME,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(!1),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(!0),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(H.DataLabelPlacement.Center),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasCategoryLabelSetting:!1,hasPercentageLabelSetting:!0}),WN.expand,{type:pg.ActionType.ShowData},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["series"]}}]},i18nResources:Gt},RE=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.PercentStackArea),VE=fN(H.ChartType.PercentStackArea),NE={name:H.ChartType.PercentStackArea,displayNameKey:"chartTypes.percentStackedArea",id:H.ChartType.PercentStackArea,iconCss:"dd-png-percent-stacked-area-chart",capabilities:{dataBinding:VE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineStyle(),DN.ChartStyle.lineType(),DN.ChartStyle.lineWidth(),DN.ChartStyle.showDots(null===(uE=null==RE?void 0:RE.property)||void 0===uE?void 0:uE.showDots),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:20,top:8,right:20,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0,hasPercentageLabelSetting:!0}),Object.assign(Object.assign({},WN.referenceLine),{_constOnly:!0}),WN.expand,{type:pg.ActionType.ShowData,rule:VE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},EE={name:H.ChartType.Donut,displayNameKey:"chartTypes.donut",id:H.ChartType.Donut,iconCss:"dd-png-donut-chart",capabilities:{dataBinding:ME,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.innerRadius(70),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(!1),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(!0),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(H.DataLabelPlacement.Center),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasCategoryLabelSetting:!1,hasPercentageLabelSetting:!0}),WN.expand,{type:pg.ActionType.ShowData},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["series"]}}]},i18nResources:Gt},FE={dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{values:{min:1}}]}}],conditions:[{series:{max:0}},{series:{min:1},values:{max:1}}],conversionRules:{in:[{mode:"post",conditions:[{series:{max:0}}],execute:[{source:"category",target:"series",cmd:"last"}]}],out:[{mode:"pre",execute:[{source:"series",target:"category",cmd:"first"}]}]}},OE={name:H.ChartType.Rose,displayNameKey:"chartTypes.rose",id:H.ChartType.Rose,iconCss:"dd-png-rose-chart",capabilities:{dataBinding:FE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.innerRadius(20),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasCategoryLabelSetting:!1,hasPercentageLabelSetting:!0}),WN.referenceLine,WN.expand,{type:pg.ActionType.ShowData},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["series"]}}]},i18nResources:Gt},HE={dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",type:"displayUnit",iconCss:"icon-display-unit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"category",displayNameKey:"dataBindingPanel.axis",kind:"grouping"},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{values:{min:1}}]}}],conditions:[{series:{max:0}},{series:{min:1},values:{max:1}}],prefers:[{values:{max:1},category:{max:1},series:{max:1},trellisColumns:{}},{values:{},category:{max:1},trellisColumns:{}}],conversionRules:{out:[{mode:"post",execute:[{source:"category",target:"trellisColumns",cmd:"all"}]}]}},BE={name:H.ChartType.RadialStackedBar,displayNameKey:"chartTypes.radialStackedBar",id:H.ChartType.RadialStackedBar,iconCss:"dd-png-bar-in-polar-with-radial",capabilities:{dataBinding:HE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.innerRadius(),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(!0),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(Ma),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasPercentageLabelSetting:!0}),WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:HE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},UE=[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"details",displayNameKey:"dataBindingPanel.details",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],zE={name:H.ChartType.Sunburst,displayNameKey:"chartTypes.sunburst",id:H.ChartType.Sunburst,iconCss:"dd-png-sunburst-chart",capabilities:{dataBinding:$N(H.ChartType.Sunburst),options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.innerRadius(),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.autoGradient(),{name:"style",type:sg.PublicPropertyType.Hidden,defaultValue:{stroke:"white",strokeWidth:1}}]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelDetails(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(H.DataLabelPlacement.Center),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSeriesLabelSetting:!1,hasCategoryLabelSetting:!1,hasPercentageLabelSetting:!0,hasDetailLabelSetting:!0}),{type:pg.ActionType.ShowData,rule:{out:[{mode:"post",execute:[{source:"details",target:"category",cmd:"all"}]}]}},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["details"]}}]},i18nResources:Gt},KE={name:H.ChartType.BarInPolar,displayNameKey:"chartTypes.barInPolar",id:H.ChartType.BarInPolar,iconCss:"dd-png-bar-in-polar",capabilities:{dataBinding:HE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.innerRadius(20),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.seriesGapWidth(),DN.ChartStyle.cornerRadius()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(H.DataLabelAngle.ParallelToY),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(!0),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.categoryLabelAngle(2),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.series",properties:[DN.Series.showSeriesTotal(),DN.Series.totalDisplay(),DN.Series.seriesTotalColor(),DN.Series.seriesTotalWidth(),DN.Series.showSeriesTotalLabel(),DN.Series.seriesTotalWithCategory(),DN.Series.seriesTotalLabelDisplayUnit(),DN.Series.seriesTotalLabelPosition(),DN.Series.seriesTotalLabelOffset(),DN.Series.seriesTotalLabelAngle(H.DataLabelAngle.PerpendicularToY),DN.Series.seriesTotalLabelDisplayMode(),DN.Series.seriesTotalLabelTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:HE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},jE={name:H.ChartType.StackBarInPolar,displayNameKey:"chartTypes.stackedBarInPolar",id:H.ChartType.StackBarInPolar,iconCss:"dd-png-stacked-bar-in-polar",capabilities:{dataBinding:HE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.innerRadius(20),DN.ChartStyle.startAngle(),DN.ChartStyle.sweep(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.cornerRadius()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(H.DataLabelAngle.ParallelToY),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(!0),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.categoryLabelAngle(2),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(!0),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.series",properties:[DN.Series.showSeriesTotal(),DN.Series.seriesTotalWithCategory(),DN.Series.seriesTotalLabelDisplayUnit(),DN.Series.seriesTotalLabelPosition(),DN.Series.seriesTotalLabelOffset(),DN.Series.seriesTotalLabelAngle(H.DataLabelAngle.PerpendicularToY),DN.Series.seriesTotalLabelDisplayMode(),DN.Series.seriesTotalLabelTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:HE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},WE={name:H.ChartType.Radar,displayNameKey:"chartTypes.radar",id:H.ChartType.Radar,iconCss:"dd-png-radar-chart",capabilities:{dataBinding:HE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineWidth(2),DN.ChartStyle.lineType(),DN.ChartStyle.showDots(),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(!0),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(!1),DN.ValueAxis.valueAxisTickLabel(!1),DN.ValueAxis.valueAxisTickMark(!1),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0}),WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:HE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},GE={name:H.ChartType.FilledRadar,displayNameKey:"chartTypes.filledRadar",id:H.ChartType.FilledRadar,iconCss:"dd-png-filled-radar-chart",capabilities:{dataBinding:HE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineWidth(),DN.ChartStyle.lineType(),DN.ChartStyle.showDots(),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(!0),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(!1),DN.ValueAxis.valueAxisTickLabel(!1),DN.ValueAxis.valueAxisTickMark(!1),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0}),WN.referenceLine,WN.trendLine,WN.expand,{type:pg.ActionType.ShowData,rule:HE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},YE={name:H.ChartType.DisaggregateScatter,displayNameKey:"chartTypes.scatter",id:H.ChartType.DisaggregateScatter,iconCss:"dd-png-disaggregate-scatter-chart",capabilities:{dataBinding:{dataRoles:[{name:"xAxis",displayNameKey:"dataBindingPanel.axis_x",kind:"grouping",preferredTypes:[H.PreferredType.Measure],options:[{name:"xAxisScale",type:"_scaleType",defaultValue:"Linear",ordinal:!0,condition:!0}]},{name:"yAxis",displayNameKey:"dataBindingPanel.axis_y",kind:"grouping",preferredTypes:[H.PreferredType.Measure],options:[{name:"yAxisScale",type:"_scaleType",defaultValue:"Linear",ordinal:!0,condition:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{xAxis:{min:1},yAxis:{min:1}}]}}],conditions:[{xAxis:{max:1},yAxis:{max:1}}],prefers:[{xAxis:{max:1},yAxis:{max:1},series:{max:1}}]},options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.axisMode(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_x",properties:[DN.ValueAxisX.xValueAxis(),DN.ValueAxisX.xValueAxisGridline(),DN.ValueAxisX.xValueAxisGridlineColor(),DN.ValueAxisX.xValueAxisMaxValue(),DN.ValueAxisX.xValueAxisMinValue(),DN.ValueAxisX.xValueAxisInterval(),DN.ValueAxisX.xValueAxisAxisLine(),DN.ValueAxisX.xValueAxisTickLabel(),DN.ValueAxisX.xValueAxisTickMark(),DN.CategoryAxis.columnTitle(),DN.ValueAxisX.xValueAxisUnitLabel(),DN.ValueAxisX.xValueAxisFormat(),DN.ValueAxisX.xValueAxisDisplayUnit(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.ValueAxisX.xValueAxisOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_y",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueLabelOverflow(),DN.ValueAxis.valueAxisOrigin(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0,hasCategoryLabelSetting:!1,dataRole:""}),Object.assign(Object.assign({},WN.referenceLine),{axis:[{value:H.AxisType.YAxis,displayNameKey:"dataBindingPanel.axis_y"},{value:H.AxisType.XAxis,displayNameKey:"dataBindingPanel.axis_x"}]}),WN.trendLine,{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},qE={name:H.ChartType.Bubble,displayNameKey:"chartTypes.bubble",id:H.ChartType.Bubble,iconCss:"dd-png-bubble-chart",capabilities:{dataBinding:{dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.size",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}],_noQuickFunction:!0},{name:"xAxis",displayNameKey:"dataBindingPanel.axis_x",kind:"groupingOrValue",preferredTypes:[H.PreferredType.Measure],options:[{name:"xAxisScale",type:"_scaleType",defaultValue:"Linear",ordinal:!0,condition:!0}]},{name:"yAxis",displayNameKey:"dataBindingPanel.axis_y",kind:"groupingOrValue",preferredTypes:[H.PreferredType.Measure],options:[{name:"yAxisScale",type:"_scaleType",defaultValue:"Linear",ordinal:!0,condition:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{xAxis:{min:1},yAxis:{min:1}}]}}],conditions:[{values:{max:1},xAxis:{max:1},yAxis:{max:1}}],prefers:[{values:{max:1},xAxis:{max:1},yAxis:{max:1},series:{max:1}}]},options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.axisMode(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_x",properties:[DN.ValueAxisX.xValueAxis(),DN.ValueAxisX.xValueAxisGridline(),DN.ValueAxisX.xValueAxisGridlineColor(),DN.ValueAxisX.xValueAxisMaxValue(),DN.ValueAxisX.xValueAxisMinValue(),DN.ValueAxisX.xValueAxisInterval(),DN.ValueAxisX.xValueAxisAxisLine(),DN.ValueAxisX.xValueAxisTickLabel(),DN.ValueAxisX.xValueAxisTickMark(),DN.ValueAxisX.columnTitle(),DN.ValueAxisX.xValueAxisUnitLabel(),DN.ValueAxisX.xValueAxisFormat(),DN.ValueAxisX.xValueAxisDisplayUnit(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.ValueAxisX.xValueAxisOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_y",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueLabelOverflow(),DN.ValueAxis.valueAxisOrigin(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.showSizeBubble(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasCategoryLabelSetting:!1}),Object.assign(Object.assign({},WN.referenceLine),{axis:[{value:H.AxisType.YAxis,displayNameKey:"dataBindingPanel.axis_y"},{value:H.AxisType.XAxis,displayNameKey:"dataBindingPanel.axis_x"}]}),WN.trendLine,{type:pg.ActionType.ShowData},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["series"]}}]},i18nResources:Gt},JE={name:H.ChartType.TreeMap,displayNameKey:"chartTypes.treeMap",id:H.ChartType.TreeMap,iconCss:"dd-png-treemap-chart",capabilities:{dataBinding:$N(H.ChartType.TreeMap),options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelDetails(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasPositionShapeSetting:!1,hasSeriesLabelSetting:!1,hasCategoryLabelSetting:!1,hasDetailLabelSetting:!0}),{type:pg.ActionType.ShowData,rule:{out:[{mode:"post",execute:[{source:"details",target:"category",cmd:"all"}]}]}},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["details"]}}]},i18nResources:Gt},XE={name:H.ChartType.Funnel,displayNameKey:"chartTypes.funnel",id:H.ChartType.Funnel,iconCss:"dd-png-funnel-chart",capabilities:{dataBinding:FE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.topWidth(),DN.ChartStyle.bottomWidth(),DN.ChartStyle.neckHeight(30),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Data.showTopN(),DN.Data.topN(),DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelPercentage(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelPosition(Ca),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasCategoryLabelSetting:!1,hasPercentageLabelSetting:!0}),Object.assign(Object.assign({},WN.referenceLine),{_constOnly:!0}),WN.expand,{type:pg.ActionType.ShowData},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["series"]}}]},i18nResources:Gt},QE={dataRoles:[{name:"value",aliasName:"values",displayNameKey:"dataBindingPanel.mainValue",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"comparisonValue",aliasName:"values",displayNameKey:"dataBindingPanel.comparisonValue",kind:"value"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",required:[{value:{min:1}},{comparisonValue:{min:1}}]}}],conditions:[{value:{max:1},comparisonValue:{max:1}}],prefers:[{value:{max:1},comparisonValue:{max:1}}],conversionRules:{in:[{mode:"pre",execute:[{source:"values",target:"value",cmd:"first"},{source:"values",target:"comparisonValue",cmd:"last"}]}]}},ZE={name:H.ChartType.Gauge,displayNameKey:"chartTypes.gauge",id:H.ChartType.Gauge,iconCss:"dd-png-gauge-chart",capabilities:{dataBinding:QE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.valueSetting",properties:[DN.Gauge.valueSourceType(),DN.Gauge.valueCustomInput(),DN.Gauge.comparisonSourceType(),DN.Gauge.comparisonCustomInput()]},{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.innerRadius(80),DN.Gauge.pointerColor(),DN.Gauge.rangeDotType(),DN.Gauge.rangeDotsAndColors(),DN.Gauge.startAngle(225),DN.Gauge.sweep(270),DN.ChartStyle.graphOpacity()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.subTitleLabelStyle",properties:[DN.Gauge.showSubTitle(),DN.Gauge.customSubTitle(),DN.Gauge.subTitleTextStyle({fontSize:"-1x"})]},{displayNameKey:"inspector.categories.dataLabelStyle",properties:[DN.Gauge.gaugeDataLabelTextStyle({fontSize:"-1x"}),DN.DataLabel.dataLabelDisplayUnit(),DN.Gauge.valueCustomUnit(),DN.Gauge.valueCustomUnitTextStyle({fontSize:"-1x"})]},{displayNameKey:"inspector.categories.deltaLabelStyle",properties:[DN.Gauge.showDeltaLabel(),DN.Gauge.showDeltaSymbol(),DN.Gauge.showDeltaPercentage(),DN.Gauge.calculationMode(),DN.Gauge.deltaLabelTextStyle(!0,{fontSize:"-1x"}),{name:"showDeltaValue",type:sg.PublicPropertyType.Hidden,defaultValue:!0},{name:"conditionalFormatType",type:sg.PublicPropertyType.Hidden,defaultValue:Qi}]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.Gauge.calibrationType(),DN.ValueAxis.valueAxisDisplayUnit(),DN.Gauge.gaugeAxisType(),DN.ValueAxis.valueAxisFormat(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.expand,{type:pg.ActionType.ShowData,rule:QE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},$E={name:H.ChartType.Indicator,displayNameKey:"chartTypes.indicator",id:H.ChartType.Indicator,iconCss:"dd-png-indicator-chart",capabilities:{dataBinding:QE,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.valueSetting",properties:[DN.Gauge.valueSourceType(),DN.Gauge.valueCustomInput(),Object.assign(Object.assign({},DN.Gauge.rangeDotsAndColors()),{hidden:!0}),DN.Gauge.comparisonSourceType(),DN.Gauge.comparisonCustomInput()]},{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.cornerRadius(),DN.ChartStyle.innerRadius(80),DN.Indicator.unreachedColor(),DN.Indicator.isMutativeReachedColor(),DN.Indicator.reachedColor(),DN.Gauge.rangeDotType(),DN.Gauge.rangeDotsAndColors([100,75,50,0]),DN.Gauge.startAngle(),DN.Gauge.sweep(),DN.ChartStyle.graphOpacity()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.subTitleLabelStyle",properties:[DN.Gauge.showSubTitle(),DN.Gauge.customSubTitle(),DN.Gauge.subTitleTextStyle({fontSize:"-1x"})]},{displayNameKey:"inspector.categories.dataLabelStyle",properties:[DN.DataLabel.dataLabelTextStyle({fontSize:"-1x"}),DN.DataLabel.dataLabelDisplayUnit(),DN.Gauge.valueCustomUnit(),DN.Gauge.valueCustomUnitTextStyle({fontSize:"-1x"})]},{displayNameKey:"inspector.categories.percentageLabelStyle",properties:[DN.Indicator.showPercentageLabel(!0),DN.Indicator.percentageLabelTextStyle({fontSize:"-1x"}),{name:"conditionalFormatType",type:sg.PublicPropertyType.Hidden,defaultValue:Qi}]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:8,top:8,right:8,bottom:8}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.expand,{type:pg.ActionType.ShowData,rule:QE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},eF={name:H.ChartType.KPI,displayNameKey:"chartTypes.kpi",id:H.ChartType.KPI,iconCss:"dd-png-KPI-chart",capabilities:{dataBinding:QE,options:{common:{size:{width:200,height:100}},visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.valueSetting",properties:[DN.Gauge.valueSourceType(),DN.Gauge.valueCustomInput(),DN.Gauge.comparisonSourceType(),DN.Gauge.comparisonCustomInput()]},{displayNameKey:"inspector.categories.chartStyle",properties:[DN.Gauge.rangeDotType(),DN.Gauge.rangeDotsAndColors(),DN.KPI.contentHAlignment()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title,defaultValue:{show:!1}},{displayNameKey:"inspector.categories.subTitleLabelStyle",properties:[DN.Gauge.showSubTitle(),DN.Gauge.customSubTitle(),DN.Gauge.subTitleTextStyle({fontSize:"-1x"})]},{displayNameKey:"inspector.categories.dataLabelStyle",properties:[DN.DataLabel.dataLabelTextStyle({fontSize:"-1x"}),DN.DataLabel.dataLabelDisplayUnit(),DN.Gauge.valueCustomUnit(),DN.Gauge.valueCustomUnitTextStyle({fontSize:"-1x"})]},{displayNameKey:"inspector.categories.deltaLabelStyle",properties:[DN.Gauge.showDeltaLabel(),DN.Gauge.showDeltaSymbol(),DN.Gauge.showDeltaPercentage(),DN.Gauge.calculationMode(),DN.Gauge.deltaLabelTextStyle(!0,{fontSize:"-1x"}),DN.KPI.conditionalFormatType()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.expand,{type:pg.ActionType.ShowData,rule:QE.conversionRules},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},tF=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.Composite),aF={dataRoles:[{name:"leftValues",aliasName:"values",displayNameKey:"dataBindingPanel.leftValue",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0},{displayNameKey:"actionBar.changeChartType",name:"valueChartType",iconCss:"dd-png-line-chart",type:"enum",defaultValue:"column",items:[{value:"line",displayNameKey:"chartTypes.line",iconCss:"dd-png-line-chart"},{value:"column",displayNameKey:"chartTypes.column",iconCss:"dd-png-column-chart"},{value:"area",displayNameKey:"chartTypes.area",iconCss:"dd-png-area-chart"},{value:"stackedColumn",displayNameKey:"chartTypes.stackedColumn",iconCss:"dd-png-stacked-column-chart"}]},{name:"valueScale",type:"_scaleType",defaultValue:"Linear"}]},{name:"rightValues",displayNameKey:"dataBindingPanel.rightValue",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0},{displayNameKey:"actionBar.changeChartType",name:"valueChartType",iconCss:"dd-png-line-chart",type:"enum",defaultValue:"line",items:[{value:"line",displayNameKey:"chartTypes.line",iconCss:"dd-png-line-chart"},{value:"column",displayNameKey:"chartTypes.column",iconCss:"dd-png-column-chart"},{value:"area",displayNameKey:"chartTypes.area",iconCss:"dd-png-area-chart"},{value:"stackedColumn",displayNameKey:"chartTypes.stackedColumn",iconCss:"dd-png-stacked-column-chart"}]},{name:"valueScale",type:"_scaleType",defaultValue:"Linear"}]},{name:"category",displayNameKey:"dataBindingPanel.axis",kind:"grouping",options:[{name:"categoryScale",type:"_scaleType",defaultValue:"Ordinal",ordinal:!0,condition:!0}]},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping",options:[{name:"seriesAxis",type:"_affectValue",displayNameKey:"dataBindingPanel.seriesAxisLabel",iconCss:"mdi-border-all-variant mdi dd-pivot-setting-icon"}]},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{trellisRows:"trellisRows",trellisColumns:"trellisColumns",series:"series",required:[{leftValues:{min:1}},{rightValues:{min:1}}]}}],conditions:[{series:{max:0}},{series:{min:1},leftValues:{max:1},rightValues:{max:1}}],prefers:[{leftValues:{max:1},rightValues:{max:1},category:{max:1},series:{max:1},trellisColumns:{}}],conversionRules:{out:[{mode:"post",execute:[{source:"category",target:"trellisColumns",cmd:"all"}]}]}},nF={name:H.ChartType.Composite,displayNameKey:"chartTypes.combined",id:H.ChartType.Composite,iconCss:"dd-png-combined-chart",capabilities:{dataBinding:aF,options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.showDots(null===(cE=null==tF?void 0:tF.property)||void 0===cE?void 0:cE.showDots),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke(),DN.ChartStyle.lineStyle(),DN.ChartStyle.lineType(),DN.ChartStyle.lineWidth(),DN.ChartStyle.showNull(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.seriesGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.leftValueDataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.rightValueDataLabel",properties:[DN.DataLabel.dataLabel(void 0,!0),DN.DataLabel.dataLabelValue(void 0,!0),DN.DataLabel.dataLabelDisplayUnit(void 0,!0),DN.DataLabel.dataLabelSeries(void 0,!0),DN.DataLabel.dataLabelCategory(void 0,!0),DN.DataLabel.dataLabelPosition(void 0,!0),DN.DataLabel.dataLabelYPlacement(void 0,!0),DN.DataLabel.dataLabelXPlacement(void 0,!0),DN.DataLabel.dataLabelAngle(void 0,!0),DN.DataLabel.dataLabelXOffset(void 0,!0),DN.DataLabel.dataLabelYOffset(void 0,!0),DN.DataLabel.dataLabelConnectingLineMode(void 0,!0),DN.DataLabel.dataLabelConnectingLineWidth(void 0,!0),DN.DataLabel.connectingLineColor(void 0,!0),DN.DataLabel.dataLabelDisplayMode(void 0,!0),DN.DataLabel.dataLabelTextStyle(void 0,!0),DN.DataLabel.dataLabelShape(void 0,!0),DN.DataLabel.dataLabelShapeImageId(void 0,!0),DN.DataLabel.dataLabelShapeXCenter(void 0,!0),DN.DataLabel.dataLabelShapeYCenter(void 0,!0),DN.DataLabel.dataLabelShapeXScale(void 0,!0),DN.DataLabel.dataLabelShapeYScale(void 0,!0)]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value1",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle("valueAxis1TextStyle")]},{displayNameKey:"inspector.categories.axis_value2",properties:[DN.ValueAxis.valueAxis(!0,"valueAxis2"),DN.ValueAxis.valueAxisGridline(!1,"valueAxisGridline2"),DN.ValueAxis.valueAxisGridlineColor("#cccccc","valueAxisGridlineColor2"),DN.ValueAxis.valueAxisMaxValue(null,"valueAxisMaxValue2"),DN.ValueAxis.valueAxisMinValue(null,"valueAxisMinValue2"),DN.ValueAxis.valueAxisInterval(null,"valueAxisInterval2"),DN.ValueAxis.valueAxisAxisLine(!0,"valueAxisAxisLine2"),DN.ValueAxis.valueAxisTickLabel(!0,"valueAxisTickLabel2"),DN.ValueAxis.valueAxisTickMark(!0,"valueAxisTickMark2"),DN.ValueAxis.rowTitle(!1,"rowTitle2"),DN.ValueAxis.valueAxisFormat("General","valueAxisFormat2"),DN.ValueAxis.valueAxisDisplayUnit(H.DisplayUnit.Auto,"valueAxisDisplayUnit2"),DN.ValueAxis.valueAxisUnitLabel(!0,"valueAxisUnitLabel2"),DN.ValueAxis.valueLabelAngle(1,"valueLabelAngle2"),DN.ValueAxis.valueAxisTextStyle("valueAxis2TextStyle")]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:8,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasSymbolSizeSetting:!0}),WN.referenceLine,WN.expand,{type:pg.ActionType.ShowData,rule:{in:[{mode:"post",execute:[{source:"values",target:"rightValues",cmd:"all"}]}],out:[{mode:"post",execute:[{source:"category",target:"trellisColumns",cmd:"all"},{source:"rightValues",target:"values",cmd:"all"}]}]}},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},iF={name:H.ChartType.FloorPlan,displayNameKey:"chartTypes.floorPlan",id:H.ChartType.FloorPlan,version:"0.0.0",description:"",iconCss:"dd-png-floorPlan-chart",capabilities:{dataBinding:{dataRoles:[{name:"area",aliasName:"category",displayNameKey:"dataBindingPanel.floorPlanArea",kind:"grouping"},{name:"color",displayNameKey:"dataBindingPanel.floorPlanColor",kind:"groupingOrValue",preferredKind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"}]},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{plain:{required:[{color:{min:1}}]}}],conditions:[{area:{max:1},color:{max:1}}],prefers:[{area:{max:1},color:{max:1}}]},options:{visual:[{properties:[{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"contentTextStyle",hidden:!0}]},{properties:[{name:"conditionalFormat",type:sg.PrivatePropertyType.ConditionalFormat}]},{displayNameKey:"inspector.categories.chartStyle",properties:[{name:"areaBorderColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.areaBorderColor",defaultValue:"=Theme.Colors!Accent1"},{name:"usePalette",type:sg.PublicPropertyType.Enum,items:[{value:!0,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.palette"},{value:!1,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.gradient"}],displayNameKey:"inspector.properties.charts.colorPerfrence",defaultValue:!1},DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),{name:"gradientColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.gradientColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.None},DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGradient()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.switchFloorPlan",properties:[{name:"floorPlanId",type:sg.PrivatePropertyType.FloorPlanSelector,displayNameKey:"inspector.properties.charts.floorPlan",defaultValue:null}]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),{name:"useLevelColor",type:sg.PublicPropertyType.Enum,items:[{value:!1,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.gradual"},{value:!0,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.grouped"}],displayNameKey:"inspector.properties.charts.gradientPerfrence",defaultValue:!1},{name:"gradientColorGroupNumber",displayNameKey:"inspector.properties.charts.gradientColorGroupNumber",type:sg.PublicPropertyType.Integer,min:1,defaultValue:5},DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),{name:"dataLabelArea",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.area",defaultValue:!1},{name:"dataLabelColor",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.color",defaultValue:!0},DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.Extension,name:"floorPlanId",path:"floorPlanId",extensionType:pg.ExtensionType.FloorPlanSelector,displayNameKey:"actionBar.selectFloorPlan",iconCss:"mdi mdi-floor-plan"},{type:pg.ActionType.ConvertVisual},Object.assign(Object.assign({},WN.conditionalFormat),{hasPositionShapeSetting:!1,hasValueLabelSetting:!1,hasCategoryLabelSetting:!1,hasSeriesLabelSetting:!1,hasColorLabelSetting:!0,hasAreaLabelSetting:!0}),{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[]},i18nResources:Gt},rF=[{name:"upper",displayNameKey:"dataBindingPanel.upper",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{name:"valueScale",type:"_scaleType",defaultValue:"Linear"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}]},{name:"lower",displayNameKey:"dataBindingPanel.lower",kind:"value"},{name:"category",displayNameKey:"dataBindingPanel.axis",kind:"grouping"},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping"},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],oF={name:H.ChartType.RangeBar,displayNameKey:"chartTypes.rangeBar",id:H.ChartType.RangeBar,version:"0.0.0",description:"",iconCss:"dd-png-range-bar-chart",capabilities:{dataBinding:eE(H.ChartType.RangeBar),options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.seriesGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient(),DN.ChartStyle.reverseColor()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:0,right:8,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,WN.rangeChartShowData,{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},sF={name:H.ChartType.RangeColumn,displayNameKey:"chartTypes.rangeColumn",id:H.ChartType.RangeColumn,version:"0.0.0",description:"",iconCss:"dd-png-range-column-chart",capabilities:{dataBinding:eE(H.ChartType.RangeColumn),options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.autoGapWidth(),DN.ChartStyle.categoryGapWidth(),DN.ChartStyle.seriesGapWidth(),DN.ChartStyle.cornerRadius(),DN.ChartStyle.autoGradient(),DN.ChartStyle.reverseColor()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:0,top:8,right:0,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,WN.rangeChartShowData,{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},lF=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.RangeArea),uF={name:H.ChartType.RangeArea,displayNameKey:"chartTypes.rangeArea",id:H.ChartType.RangeArea,version:"0.0.0",description:"",iconCss:"dd-png-range-area-chart",capabilities:{dataBinding:eE(H.ChartType.RangeArea),options:{visual:[DN.hiddenCategory,{displayNameKey:"inspector.categories.chartStyle",properties:[DN.ChartStyle.maintainColorAssignments(),DN.ChartStyle.paletteId(),DN.ChartStyle.graphOpacity(),DN.ChartStyle.lineStyle(),DN.ChartStyle.lineType(),DN.ChartStyle.lineWidth(),DN.ChartStyle.showNull(),DN.ChartStyle.showDots(null===(dE=null==lF?void 0:lF.property)||void 0===dE?void 0:dE.showDots),DN.ChartStyle.symbolShape(),DN.ChartStyle.symbolSize(),DN.ChartStyle.symbolFill(),DN.ChartStyle.symbolStroke(),DN.ChartStyle.autoGradient(),DN.ChartStyle.reverseColor()]},{displayNameKey:"inspector.categories.dataVisualization",properties:[DN.Carousel.automaticCarousel(),DN.Carousel.carouselInterval(),BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.dataLabel",properties:[DN.DataLabel.dataLabel(),DN.DataLabel.dataLabelValue(),DN.DataLabel.dataLabelDisplayUnit(),DN.DataLabel.dataLabelSeries(),DN.DataLabel.dataLabelCategory(),DN.DataLabel.dataLabelPosition(),DN.DataLabel.dataLabelYPlacement(),DN.DataLabel.dataLabelXPlacement(),DN.DataLabel.dataLabelAngle(),DN.DataLabel.dataLabelXOffset(),DN.DataLabel.dataLabelYOffset(),DN.DataLabel.dataLabelConnectingLineMode(),DN.DataLabel.dataLabelConnectingLineWidth(),DN.DataLabel.connectingLineColor(),DN.DataLabel.dataLabelDisplayMode(),DN.DataLabel.dataLabelTextStyle(),DN.DataLabel.dataLabelShape(),DN.DataLabel.dataLabelShapeImageId(),DN.DataLabel.dataLabelShapeXCenter(),DN.DataLabel.dataLabelShapeYCenter(),DN.DataLabel.dataLabelShapeXScale(),DN.DataLabel.dataLabelShapeYScale()]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipMode(),DN.Tooltip.categoryTrackingArea(),DN.Tooltip.categoryTrackingAreaColor(),DN.Tooltip.categoryTrackingLine(),DN.Tooltip.categoryTrackingLineType(),DN.Tooltip.categoryTrackingLineColor(),DN.Tooltip.categoryTrackingLineWidth(),DN.Tooltip.pointTrackingCrossX(),DN.Tooltip.pointTrackingCrossXType(),DN.Tooltip.pointTrackingCrossXColor(),DN.Tooltip.pointTrackingCrossXWidth(),DN.Tooltip.pointTrackingCrossY(),DN.Tooltip.pointTrackingCrossYType(),DN.Tooltip.pointTrackingCrossYColor(),DN.Tooltip.pointTrackingCrossYWidth()]},{displayNameKey:"inspector.categories.axis_category",properties:[DN.CategoryAxis.categoryAxis(),DN.CategoryAxis.categoryAxisLine(),DN.CategoryAxis.categoryTickLabel(),DN.CategoryAxis.categoryTickMark(),DN.CategoryAxis.columnTitle(),DN.CategoryAxis.categoryLabelAngle(),DN.CategoryAxis.categoryLabelOverflow(),DN.CategoryAxis.categoryOrigin(),DN.CategoryAxis.axisTextStyle()]},{displayNameKey:"inspector.categories.axis_value",properties:[DN.ValueAxis.valueAxis(),DN.ValueAxis.valueAxisGridline(),DN.ValueAxis.valueAxisGridlineColor(),DN.ValueAxis.valueAxisMaxValue(),DN.ValueAxis.valueAxisMinValue(),DN.ValueAxis.valueAxisInterval(),DN.ValueAxis.valueAxisAxisLine(),DN.ValueAxis.valueAxisTickLabel(),DN.ValueAxis.valueAxisTickMark(),DN.ValueAxis.rowTitle(),DN.ValueAxis.valueAxisUnitLabel(),DN.ValueAxis.valueAxisFormat(),DN.ValueAxis.valueAxisDisplayUnit(),DN.ValueAxis.valueLabelAngle(),DN.ValueAxis.valueAxisTextStyle()]},{displayNameKey:"inspector.categories.legend",properties:[DN.Legend.legend(),DN.Legend.showLegendName(),DN.Legend.legendTextStyle(),DN.Legend.legendPosition(),DN.Legend.legendAutoSize(),DN.Legend.legendWidth(),DN.Legend.legendHeight(),DN.Legend.legendHAlign(),DN.Legend.legendVAlign(),DN.Legend.legendWrap()]},{displayNameKey:"inspector.categories.trellis",properties:[DN.Trellis.trellisPadding({left:20,top:8,right:20,bottom:0}),DN.Trellis.trellisBorderColor(),DN.Trellis.trellisTextStyle()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},WN.conditionalFormat,WN.referenceLine,WN.trendLine,WN.expand,WN.rangeChartShowData,{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt},cF={name:"itemsFormat",displayNameKey:"dataBindingPanel.editFormat",type:eg.DataRoleItemOptionType.Format,defaultValue:"General"},dF={name:"itemsDisplayUnit",displayNameKey:"inspector.properties.charts.axis.displayUnit",type:eg.DataRoleItemOptionType.DisplayUnit,defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0},pF={name:"alignment",displayNameKey:"dataBindingPanel.alignmentSetting",type:eg.DataRoleItemOptionType.Alignment,defaultValue:H.TableAlignment.Default},hF={name:"renderSetting",displayNameKey:"dataBindingPanel.renderSetting",type:eg.DataRoleItemOptionType.RenderSetting,defaultValue:H.ImageRenderSetting.Text},yF={name:H.ChartType.PivotTable,displayNameKey:"components.pivotTable",id:H.ChartType.PivotTable,iconCss:"dd-png-pivot-table",capabilities:{dataBinding:{dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"attributeOrValue",preferredKind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}],itemOptions:[pF,cF,dF]},{name:"rows",aliasName:"category",displayNameKey:"dataBindingPanel.rows",kind:"grouping",itemOptions:[pF,cF,hF]},{name:"columns",aliasName:"series",displayNameKey:"dataBindingPanel.columns",kind:"grouping",itemOptions:[cF,hF]},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping",itemOptions:[cF]},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping",itemOptions:[pF,cF]},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],dataViewMappings:[{matrix:{values:["values","tooltip","conditionalFormatValues"],rows:["trellisRows","rows"],columns:["trellisColumns","columns"],trellisRows:"trellisRows",series:"columns",trellisColumns:"trellisColumns",rowGrandTotal:!0,columnGrandTotal:!0,required:[{values:{min:1}},{rows:{min:1}},{trellisRows:{min:1}}]}}],prefers:[{values:{},rows:{}}],conversionRules:{out:[{mode:"post",execute:[{source:"category",target:"trellisColumns",cmd:"all"}]}]},_supportFirstInValue:!0},options:{visual:[{displayNameKey:"inspector.categories.tableSetting",properties:[{name:"customDataHighlight",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.tables.highlightCustomData",defaultValue:!0}].concat(R()(SN.tableCommonSetting()),[{type:sg.PrivatePropertyType.PivotTableStyleTemplate,displayNameKey:"inspector.properties.tables.tableTemplates"},{name:"expandStatus",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.tables.expandStatus.title",items:[{value:zr.Show,displayNameKey:"inspector.properties.tables.expandStatus.show"},{value:zr.Auto,displayNameKey:"inspector.properties.tables.expandStatus.auto"},{value:zr.Hide,displayNameKey:"inspector.properties.tables.expandStatus.hide"}],defaultValue:zr.Show},{name:"layoutType",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.tables.layoutType.title",items:[{value:Kr,displayNameKey:"inspector.properties.tables.layoutType.tabular"},{value:jr,displayNameKey:"inspector.properties.tables.layoutType.compact"}],defaultValue:Kr}])},{displayNameKey:"inspector.categories.dataVisualization",properties:[BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),{type:sg.PublicPropertyType.Boolean,name:"frozenGroup",displayNameKey:"inspector.properties.tables.freezeRowHeader",defaultValue:!0},SN.autoScroll(),SN.tableScrollPattern]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.tables.columnHeader",properties:SN.colHeaderStyle},{displayNameKey:"inspector.categories.tables.rowHeader",properties:R()(SN.rowHeaderStyle)},{displayNameKey:"inspector.categories.tables.corner",properties:SN.cornerStyle},{displayNameKey:"inspector.categories.tables.subTotals",properties:SN.subTotalsStyle},{displayNameKey:"inspector.categories.tables.grandTotals",properties:SN.grandTotalsStyle},{displayNameKey:"inspector.categories.tables.firstDataStripe",properties:SN.firstDataStripeStyle},{displayNameKey:"inspector.categories.tables.secondDataStripe",properties:SN.secondDataStripeStyle},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{properties:[].concat(R()(SN.hiddenProps),[{name:"conditionalFormat",type:sg.PublicPropertyType.Hidden,defaultValue:[]},{name:"overwriteCell",type:sg.PublicPropertyType.Hidden,defaultValue:{backColor:"#EFEDC7",foreColor:"#333333"}}])}]},actions:[{type:pg.ActionType.Edit},{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export,disableSVG:!0},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.SwapRowsAndCols},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual},{type:pg.ActionType.Extension,name:"conditionalFormat",path:"conditionalFormat",extensionType:pg.ExtensionType.TableConditionalFormat,displayNameKey:"actionBar.conditionalFormat",iconCss:"icon-conditional-format",pivotKey:"values"},WN.expand,{type:pg.ActionType.CleanCustomDataForTable},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},gF={name:H.ChartType.DataTable,displayNameKey:"components.rawDataTable",id:H.ChartType.DataTable,iconCss:"dd-png-data-table",capabilities:{dataBinding:{dataRoles:[{name:"columns",displayNameKey:"dataBindingPanel.columns",kind:"grouping",preferredTypes:[H.PreferredType.Measure,H.PreferredType.Dimension],itemOptions:[{name:"alignment",displayNameKey:"dataBindingPanel.alignmentSetting",type:eg.DataRoleItemOptionType.Alignment,defaultValue:H.TableAlignment.Default},{name:"itemsFormat",displayNameKey:"dataBindingPanel.editFormat",type:eg.DataRoleItemOptionType.Format,defaultValue:"General"},{name:"itemsDisplayUnit",displayNameKey:"inspector.properties.charts.axis.displayUnit",type:eg.DataRoleItemOptionType.DisplayUnit,defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0},{name:"renderSetting",displayNameKey:"dataBindingPanel.renderSetting",type:eg.DataRoleItemOptionType.RenderSetting,defaultValue:H.ImageRenderSetting.Text}]},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"grouping",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]},{name:"conditionalFormatValues",kind:"grouping",hidden:!0}],dataViewMappings:[{plain:{required:[{columns:{min:1}}]}}],prefers:[{columns:{}}]},options:{visual:[{displayNameKey:"inspector.categories.tableSetting",properties:[].concat(R()(SN.tableCommonSetting(!1)),[{type:sg.PrivatePropertyType.DataTableStyleTemplate,displayNameKey:"inspector.properties.tables.tableTemplates"}])},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),{type:sg.PublicPropertyType.Integer,name:"pageCapacity",displayNameKey:"inspector.properties.tables.pageCapacity",defaultValue:200,min:1},SN.autoScroll(!0),SN.tableScrollPattern,SN.allowSorting]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.tables.columnHeader",properties:SN.colHeaderStyle},{displayNameKey:"inspector.categories.tables.firstDataStripe",properties:SN.firstDataStripeStyle},{displayNameKey:"inspector.categories.tables.secondDataStripe",properties:SN.secondDataStripeStyle},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{properties:[].concat(R()(SN.hiddenProps),[{name:"conditionalFormat",type:sg.PublicPropertyType.Hidden,defaultValue:[]}])}]},actions:[{type:pg.ActionType.Edit},{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export,disableAllPageExcel:!1,disableSVG:!0},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort,allowControlVisible:!0,withoutByColumn:!0,withoutByManual:!0},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual,disableChangeChartType:!0},WN.expand,{type:pg.ActionType.Extension,name:"conditionalFormat",path:"conditionalFormat",extensionType:pg.ExtensionType.TableConditionalFormat,displayNameKey:"actionBar.conditionalFormat",iconCss:"icon-conditional-format",pivotKey:"columns"},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},mF={name:"itemsFormat",displayNameKey:"dataBindingPanel.editFormat",type:eg.DataRoleItemOptionType.Format,defaultValue:"General"},fF={name:"itemsDisplayUnit",displayNameKey:"inspector.properties.charts.axis.displayUnit",type:eg.DataRoleItemOptionType.DisplayUnit,defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0},vF=[ae.set(ae.lensPath(["capabilities","dataBinding"]),{dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{type:"format",name:"valueFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data"},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"displayUnit",iconCss:"icon-display-unit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0}],itemOptions:[mF,fF]},{name:"rows",aliasName:"category",displayNameKey:"dataBindingPanel.rows",kind:"grouping",itemOptions:[mF]},{name:"columns",aliasName:"series",displayNameKey:"dataBindingPanel.columns",kind:"grouping",itemOptions:[mF]},{name:"trellisColumns",displayNameKey:"dataBindingPanel.trellisColumns",kind:"grouping",itemOptions:[mF]},{name:"trellisRows",displayNameKey:"dataBindingPanel.trellisRows",kind:"grouping",itemOptions:[mF]}],dataViewMappings:[{matrix:{values:["values"],rows:["trellisRows","rows"],columns:["trellisColumns","columns"],rowGrandTotal:!0,columnGrandTotal:!0,trellisRows:"trellisRows",trellisColumns:"trellisColumns",required:[{values:{min:1}}]}}],conversionRules:{out:[{mode:"post",execute:[{source:"category",target:"trellisColumns",cmd:"all"}]}]}}),ae.set(ae.lensPath(["capabilities","actions"]),[{type:pg.ActionType.Event,name:"addPivotTable",_displayNameKey:"spreadChart.addPivotTable",iconCss:"icon-add"},{type:pg.ActionType.Event,name:"removePivotTable",_displayNameKey:"spreadChart.removePivotTable",iconCss:"icon-delete"},{type:pg.ActionType.Filter},{type:pg.ActionType.ModelParameters}]),ae.over(ae.lensPath(["capabilities","dataBinding","dataRoles",0,"options",1]),ae.mergeDeepLeft({defaultValue:H.DisplayUnit.None}))].reduce(function(e,t){return t(e)},yF),bF=[hE,sF,gE,fE,bE,oF,CE,TE,kE,AE,uF,_E,NE,LE,EE,OE,BE,zE,KE,jE,WE,GE,YE,qE,JE,nF,XE,ZE,$E,eF,gF,iF],CF={id:H.ScenarioType.SpreadChart},TF="SPREAD_SOURCE",SF=new RegExp("^".concat(TF,"_(.*)")),DF=[function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes("exitEditing")},function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes("setDataSourceRange")},function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes("showDataSourceRange")},function(e){var t;return null===(t=e.valuePath)||void 0===t?void 0:t.includes("editorLayout")}],kF=function(e){k()(r,e);var t=w()(r);function r(){return I()(this,r),t.apply(this,arguments)}return D()(r,[{key:"createScenario",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:Bd.a.v1(),n=1<arguments.length&&void 0!==t?t:"untitled",i=C()(b()(r.prototype),"createScenario",this).call(this,a,"");return{id:i.id,name:n,pivot:i.pivot}}}],[{key:"makeUpPivotTable",value:function(e){return Object.assign(Object.assign({},e),{scenarioType:H.ScenarioType.PivotChart,chartType:H.ChartType.PivotTable,_isInnerPivotTable:!0})}},{key:"isInnerPivotTable",value:function(e){return(null==e?void 0:e._isInnerPivotTable)&&(null==e?void 0:e.scenarioType)===H.ScenarioType.PivotChart&&(null==e?void 0:e.chartType)===H.ChartType.PivotTable}}]),r}(JN),wF=new kF(vF),xF=[];Hs.scenarioOrInnerPivotTableById=function(t,e){var a=Hs.scenarioById(t,e);if(a)return a;var n=Hs.focusedScenarioId(e),i=Hs.scenarioById(n,e);if(i){var r=i.pivotTables.find(function(e){return e.id===t});return r&&kF.makeUpPivotTable(r)}};var AF=function(e){return function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"supportChangeChartTypeMenuList",get:function(){return xF}}],[{key:"canChangeChartTypeTo",value:function(e){var t=e.supportedDataViewTypes;return 1===t.length&&t[0]===H.DataViewType.Plain}},{key:"addSupportedChangeChartTypeList",value:function(e){xF.push(e)}},{key:"getSupportedChangeChartTypeList",value:function(){return xF}},{key:"resetSupportedChangeChartTypeList",value:function(){xF.length=0}},{key:"removeChangeChartTypeListById",value:function(t){var e=xF.findIndex(function(e){return e.id===t});-1<e&&xF.splice(e,1)}}]),a}(rE(e))},IF=AF(JN),PF=AF(XN),_F=IF,MF=function(){function n(e,t){var a=this;I()(this,n),this._values=[],this.cacheMapping=new Map,this.getPivotValue=function(e){if(a.hasCache(e))return a.findCache(e);var t=a.findMatchedValue(e);return a.addCache(e,t),t},this._values=e.matrix.values}return D()(n,[{key:"addCache",value:function(e,t){this.cacheMapping.set(JSON.stringify(e),t)}},{key:"hasCache",value:function(e){return this.cacheMapping.has(JSON.stringify(e))}},{key:"findCache",value:function(e){return this.cacheMapping.get(JSON.stringify(e))}},{key:"findMatchedValue",value:function(e){function a(e){var t=Object.keys(e).length;i||(n=e),t<i&&(n=e),n===e&&(i=t)}var n={},i=0;return this.values.forEach(function(t){e.dimensions.every(function(e){return t[e.name]===e.entry})&&a(t)}),i||this.values.forEach(function(t){e.dimensions.every(function(e){return"string"==typeof e.entry&&"".concat(t[e.name])===e.entry})&&a(t)}),n[e.measure]}},{key:"equals",value:function(e){return e instanceof n&&Ho.isEqual(this.values,e.values)}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"values",get:function(){return this._values}}],[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Uh()(n,t)}}]),n}(),LF=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},RF=function(e){return function(e){k()(s,e);var i=w()(s);function s(){var t;I()(this,s);for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(t=i.call.apply(i,[this].concat(a))).datasetIds=[],t.makeUpPivotTable=function(e){return Object.assign(Object.assign({},e),{originalId:e.id,id:Bd.a.v1(),pageId:t.data.pageId,parentId:t.id,containerId:t.data.containerId,tabId:t.data.tabId,options:{enableCrossFilter:Us.enableCrossFilter(t.data)}})},t.realtimeAggregate=function(){t.refreshData()},t.pivotDataProviderManager=d$.dataProviderManagerCache.getOrCreate(a[0]),t.dataManager.dataTable.subscribe(t.realtimeAggregate),t}return D()(s,[{key:"getDataView",value:function(e){var t=this.makeUpPivotTable(e),a=new XP;a.onError=this.onRequestError,a.resource=this._aggResource;var n=Us.datasetId(t);if(n){var i=this.getSimplePivotSetting(n,t);if(i){var r=this.getDataViewHelper(n,i);return a.model=this.getPivotModel(t,r),a.userParameters=this.getUserParameters(t,r),a.helper=r,a.filters=this.getGlobalFilters(t,n),a.customAttributes=r.getCustomAttributes(),a.datasetId=n,a}}}},{key:"fetchPivotTablesAsync",value:function(n,s){return LF(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=this.pivotTableGroups[n])?[t]:Object.values(this.pivotTableGroups),e.next=4,Promise.all(t.map(function(e){var o,t=e.map(function(r){return LF(a,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getDataView(r)){e.next=3;break}return e.abrupt("return");case 3:return o||t.suspend(),a=(o=t).getDataViewAsync(Us.datasetId(r),s),e.next=8,a;case 8:(n=e.sent)&&((i=new MF(n,t.helper)).name=r.name,this.dataManager.addDataProvider(r.id,i));case 10:case"end":return e.stop()}},e,this)}))});return null!=o&&o.resume(),Promise.all(t)}));case 4:case"end":return e.stop()}},e,this)}))}},{key:"fetchAggregatedData",value:function(t,e){var a=this,n=1<arguments.length&&void 0!==e?e:{},i=Object.create(null,{fetchAggregatedData:{get:function(){return C()(b()(s.prototype),"fetchAggregatedData",a)}}});return LF(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:return this.sync(),this.preUpdate(),e.next=6,this.fetchPivotTablesAsync(t,n.sessionId);case 6:this.postUpdate(),i.fetchAggregatedData.call(this,this.id,Object.assign({forceRefresh:!0},n));case 8:case"end":return e.stop()}},e,this)}))}},{key:"refreshData",value:function(){for(var t=this,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];this.isReady()&&(this.sync(),this.preUpdate(),Promise.all(this.datasetIds.map(function(e){return t._datasetSchemaResource.fetch(e)})).then(function(){var e;return t.postUpdate(),(e=C()(b()(s.prototype),"refreshData",t)).call.apply(e,[t].concat(a)),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)}))}},{key:"sync",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];(e=C()(b()(s.prototype),"sync",this)).call.apply(e,[this].concat(a));var i=this.data,r=_F.getPivotTables(i).filter(Us.datasetId),o=ae.groupBy(Us.datasetId,r);this.pivotTableGroups=o,this.datasetIds=Object.keys(o)}},{key:"isAffectCrossFilterByScenario",value:function(o){var s=this;return!!o.isLinkedTo(this)&&Object.values(this.pivotTableGroups).flat().some(function(e){var t=Object.assign(Object.assign({},s.makeUpPivotTable(e)),{id:e.id}),a=new P_(t.id,t);if(!o.isAffectToScenario(a))return!1;var n=Us.interactionMappingByScenario(o.data,t),i=!(null==n||!n.length),r=o.getDatasetId()===a.getDatasetId();return i||r})}},{key:"getDatasetId",value:function(){var e;if(!ae.isEmpty(null===(e=this.data.pivot)||void 0===e?void 0:e.dataRanges))return C()(b()(s.prototype),"getDatasetId",this).call(this)}},{key:"getUsedDatasetIds",value:function(){return this.datasetIds}},{key:"dataManager",get:function(){return this.pivotDataProviderManager}}]),s}(e)},VF=function(){function a(e,t){I()(this,a),this.resource=e,this.dataViewHelper=t}return D()(a,[{key:"buildDataView",value:function(){return{}}},{key:"getData",value:function(){return this.resource.content}},{key:"getDataView",value:function(){var e=this.getData();return this.buildDataView(e)}}]),a}(),NF=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"buildDataView",value:function(e){if(e&&e.value)return{data:(e.value.collections||[]).map(function(e){return{value:e.value,display:e.label,children:[]}}),profile:this.dataViewHelper.getTinyProfile()}}}]),a}(VF),EF=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"buildDataView",value:function(e){var t,a,n,i;return{min:null!==(a=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.min)&&void 0!==a?a:0,max:null!==(i=null===(n=null==e?void 0:e.value)||void 0===n?void 0:n.max)&&void 0!==i?i:0,profile:{columns:{values:[{id:{columnName:"customInput"},name:"customInput"}]}}}}}]),a}(VF),FF=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};function OF(e){return function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"fetchAggregatedData",value:function(h,e){var y,t=this,g=1<arguments.length&&void 0!==e?e:{},m=Object.create(null,{fetchAggregatedData:{get:function(){return C()(b()(a.prototype),"fetchAggregatedData",t)}}});return FF(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.sync(),Jr.isCustomInputType(this.data)){e.next=5;break}return e.abrupt("return",m.fetchAggregatedData.call(this,h,g));case 5:if(null!=g&&g.context&&this.setContext(null==g?void 0:g.context),this.data.pivot.customDataSource){e.next=12;break}return t=this.getSimplePivotSettings(this.getDatasetId()),a=this.getDataViewHelper(this.getDatasetId(),t[0]),n=this.buildRes(void 0,a),this.notifyRefreshData(n,a,g),e.abrupt("return");case 12:this.preUpdate(),i=this.data.pivot.customDataSource,(r=lP.generateByCustomData(i))&&this._cacheManager.set(Lw.DatasetSchema,i.id,r),o=Kk(this.data,null===(y=i.content.profile.columns[0])||void 0===y?void 0:y.columnName),s=d$.definitionManager.getDefinitionById(this.data.slicerType),l=s.getSimplePivotSettings(o)[0],u=cC.create(l,r),this.customDataView=new NF(i,u),c=this.customDataView.getDataView(),this.completeDataCache=c,this.updateSliceFilters(),this.postUpdate(),c&&(d={completeData:c,affectedData:c},p=this.buildRes(d,u),this.notifyRefreshData(p,u,g));case 26:case"end":return e.stop()}},e,this)}))}}]),a}(e)}var HF=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};function BF(e){return function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"fetchAggregatedData",value:function(r,e){var t=this,o=1<arguments.length&&void 0!==e?e:{},s=Object.create(null,{fetchAggregatedData:{get:function(){return C()(b()(a.prototype),"fetchAggregatedData",t)}}});return HF(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.sync(),Jr.isCustomDataSource(this.data)){e.next=5;break}return e.abrupt("return",s.fetchAggregatedData.call(this,r,o));case 5:null!=o&&o.context&&this.setContext(null==o?void 0:o.context),this.preUpdate(),t=this.getSimplePivotSettings(this.getDatasetId()),a=this.getDataViewHelper(this.getDatasetId(),t[0]),n=this.data.pivot.customDataSource,this.customDataView=new EF(n,a),i=this.customDataView.getDataView(),this.postUpdate(),i&&this.notifyRefreshData(i,a);case 14:case"end":return e.stop()}},e,this)}))}},{key:"refreshData",value:function(e){if(this.isReady()){this.sync();var t=this.getDatasetId();if(!t)return this.postUpdate(),void this.fetchAggregatedData(t,e);C()(b()(a.prototype),"refreshData",this).call(this,e)}}}]),a}(e)}function UF(e){null!=e&&e.setSilence(!1),null!=e&&e.notifyLoadingState(!1)}function zF(e){return e&&/gc(dv)?-scroll/.test(e.target.className)&&!/gc-scrollbars__view/.test(e.target.className)}var KF,jF,WF,GF,YF=function(e,t,a,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":E()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(o=(r<3?i(o):3<r?i(t,a,o):i(t,a))||o);return 3<r&&o&&Object.defineProperty(t,a,o),o},qF=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},JF=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).dataView=new e_,e.cacheDatasetId=null,e.affectOthers=!0,e}return D()(a,[{key:"sync",value:function(){C()(b()(a.prototype),"sync",this).call(this),this.data&&(this.cacheDatasetId=C()(b()(a.prototype),"getDatasetId",this).call(this))}},{key:"getDatasetId",value:function(){var e=C()(b()(a.prototype),"getDatasetId",this).call(this);return null!=e?e:this.cacheDatasetId}},{key:"isAffectOthers",value:function(){var e=C()(b()(a.prototype),"isAffectOthers",this).call(this);return e?(this.sync(),!VM(this.data)):e}},{key:"isSlicer",value:function(){return!0}},{key:"fetchAggregatedData",value:function(i,e){var r=1<arguments.length&&void 0!==e?e:{};return qF(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if((t=this.getSimplePivotSettings(i)).length){e.next=7;break}return this.emitEmptyRefreshData(),this.cleanDataCache(),e.abrupt("return");case 7:if((a=this.getDataViewHelper(this.getDatasetId(),t[0])).hasSetting()&&a.isReady()){e.next=11;break}return this.notifyRefreshData(null,a),e.abrupt("return");case 11:return this.sync(),this.dataView.model=this.getPivotModel(this.data,a),this.dataView.userParameters=this.getUserParameters(this.data,a),this.dataView.helper=a,this.dataView.customAttributes=a.getCustomAttributes(),this.preUpdate(),e.next=19,this.dataView.getDataViewAsync(i,r.sessionId);case 19:(n=e.sent)&&this.setDataCache(n),this.postUpdate(),n&&this.notifyRefreshData(n,a);case 23:case"end":return e.stop()}},e,this)}))}}]),a}(x_),XF=JF=YF([BF],JF),QF=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},ZF=function(e){k()(a,e);var t=w()(a);function a(){var m;return I()(this,a),(m=t.apply(this,arguments)).getUsedParametersInSlicerFilters=function(){function t(e){if(e){var t=Fl(e);t.isParameterValue&&u.push(t.value)}}var e,a,n,i,r,o,s,l,u=[];if((null===(e=m.data)||void 0===e?void 0:e.slicerType)===H.SlicerType.RelativeDateSlicer){var c=null===(i=null===(n=null===(a=m.data)||void 0===a?void 0:a.options)||void 0===n?void 0:n.property)||void 0===i?void 0:i.items;c&&c.forEach(function(e){t(e.anchorDate),t(e.lastDateNumber),t(e.nextDateNumber),t(e.offsetNumber)})}else{var d=null===(l=null!==(o=null===(r=m.data)||void 0===r?void 0:r.options.sliceFilters[0])&&void 0!==o?o:null===(s=m.data)||void 0===s?void 0:s.options.property.defaultValue)||void 0===l?void 0:l.payload;if(d){var p=d.type,h=d.range;if(p===H.DateRangeType.Static)t(h.min),t(h.max);else{var y=m.data.options.property.quickRanges,g=p===H.DateRangeType.Relative?h:null==y?void 0:y[h];t(null==g?void 0:g.lastDateNumber),t(null==g?void 0:g.nextDateNumber),t(null==g?void 0:g.offsetNumber),t(null==g?void 0:g.anchorDate)}}}return u},m}return D()(a,[{key:"fetchAggregatedData",value:function(n){return QF(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if((t=this.getSimplePivotSettings(n)).length){e.next=6;break}return this.emitEmptyRefreshData(),e.abrupt("return");case 6:a=this.getDataViewHelper(this.getDatasetId(),t[0]),this.notifyRefreshData(null,a);case 8:case"end":return e.stop()}},e,this)}))}}]),a}(XF),$F=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},eO=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).dataView=new XP,e.getIdForSeriesTotal=function(e){return"".concat(e,"-SERIES-TOTAL")},e}return D()(a,[{key:"getHelperExcludeSeries",value:function(e){var t=e.getPivotSettingDesc(),a=ae.assocPath(["series","values"],[],t.pivotSetting);return e.clone(Object.assign(Object.assign({},t),{pivotSetting:a}))}},{key:"resolveModelForSeriesTotal",value:function(e){var t=e.getSeriesRole(),a=e.getFlattenedPivotSettingItems([t]);if(0<(null==a?void 0:a.length)&&this.data.pivot.showSeriesTotal){var n=this.getHelperExcludeSeries(e),i=eA(this.getIdForSeriesTotal(this.data.id),hA(this.data,n),n);this.dataView.seriesTotalPivotModel=i,this.dataView.seriesTotalViewHelper=n}else this.dataView.seriesTotalPivotModel=void 0,this.dataView.seriesTotalViewHelper=void 0}},{key:"updateExtensionData",value:function(){}},{key:"fetchAggregatedData",value:function(s,e){var l=1<arguments.length&&void 0!==e?e:{};return $F(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(null!=l&&l.context&&this.setContext(null==l?void 0:l.context),this.beforeFetchAggregatedData(s,l),t=this.getSimplePivotSetting(s),a=this.getDataViewHelper(s,t),t&&a.hasSetting()&&a.isReady()){e.next=12;break}return this.cleanDataCache(),n=this.buildRes(void 0,a),this.postUpdate(),n&&this.notifyRefreshMockDataAsync(n,a),e.abrupt("return");case 12:return this.sync(),i=this.getGlobalFilters(this.data),this.dataView.helper=a,this.dataView.userParameters=this.getUserParameters(this.data,a),this.dataView.model=this.getPivotModel(this.data,a),this.dataView.filters=i,this.dataView.customAttributes=a.getCustomAttributes(),this.dataView.datasetId=s,this.dataView.customData=this.getCustomData(this.data),this.updateExtensionData(a),this.resolveModelForSeriesTotal(a),this.preUpdate(),e.next=26,this.dataView.getDataViewAsync(s,l.sessionId);case 26:if((r=e.sent)&&this.setDataCache(r),r){e.next=31;break}return this.postUpdate(),e.abrupt("return");case 31:o=this.buildRes(r,a),this.postUpdate(),o&&this.notifyRefreshData(o,a);case 34:case"end":return e.stop()}},e,this)}))}},{key:"getCustomData",value:function(e){return Us.customData(e)}},{key:"beforeFetchAggregatedData",value:function(){}},{key:"getColorAssignmentColumnInfo",value:function(){var e,t=Wc(this.data.chartType,null===(e=this.getDataCache())||void 0===e?void 0:e.profile);if(t){var a=this.dataView.helper.getFlattenedPivotSettingItems();return Object.assign(Object.assign({},t),{columnsInfo:t.columns.map(function(t){var e=a.find(function(e){return ae.equals(tl(e),t)});return{columnIdentifier:t,display:null==e?void 0:e.display}})})}return null}},{key:"getColorAssignmentDataPointsInfo",value:function(e){var t=this.getExportData();return 0<(null==t?void 0:t.length)?Kc(this.data.chartType,t,e):null}}]),a}(x_),tO=function(e){k()(u,e);var t=w()(u);function u(){var e;return I()(this,u),(e=t.apply(this,arguments)).dataView=new $P,e}return D()(u,[{key:"sync",value:function(){for(var e,t,a,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(e=C()(b()(u.prototype),"sync",this)).call.apply(e,[this].concat(i));var o=d$.definitionManager.getDefinition(this.data).getAffectValueDataRole(),s=o.getName(),l=o.getAffectValueName();this.dataView.affectSource=s,this.dataView.affectTarget=null===(a=null===(t=this.data)||void 0===t?void 0:t.pivot.pivotSetting[s])||void 0===a?void 0:a.options[l]}},{key:"getExportData",value:function(){var e=this.getDataCache();return[{data:e.data.leftValues.data,profile:e.profile,title:Ft("dialogs.exportDashboard.combinedChartSheetName.left"),sort:e.sort},{data:e.data.rightValues.data,profile:e.profile,title:Ft("dialogs.exportDashboard.combinedChartSheetName.right"),sort:e.sort}]}}]),u}(eO),aO=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"collectVariables",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this.sync();var a=this.data.options.property.src;return a?sh(a,t):[]}},{key:"refreshVariable",value:function(e){this.emit(H.ScenarioEvent.RefreshVariable,e)}},{key:"getVariableDependencies",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;return this.collectVariables(t)}},{key:"getUsedParameters",value:function(){this.sync();var e=this.data.options.property.src;return[].concat(R()(uh(e)),R()(C()(b()(a.prototype),"getUsedParameters",this).call(this)))}},{key:"getActualDependencies",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this.sync();var a=this.getUsedParameters(),n=this.getVariableDependencies(t);return{parameters:this.getParameterDependencies(a,t),variables:n.map(function(e){return null==e?void 0:e.scenarioId}).filter(function(e){return e}),usedParameters:a,usedVariables:n}}}]),a}(eO),nO=function(e){k()(r,e);var t=w()(r);function r(){return I()(this,r),t.apply(this,arguments)}return D()(r,[{key:"getDataViewOptions",value:function(){var e,t,a=null!==(e=Us.pivotSortInfo(this.data))&&void 0!==e?e:{},n=null!==(t=Us.uiSortInfo(this.data))&&void 0!==t?t:{},i=Object.assign(Object.assign({},ae.map(ae.assoc("priority",Wn),a)),ae.map(ae.assoc("priority",Gn),n));return Object.assign(Object.assign({},C()(b()(r.prototype),"getDataViewOptions",this).call(this)),{tinyProfile:!1,withWrapper:!1,sortsMapping:i})}},{key:"mergeResults",value:function(e){var a=this.getPivotSettingHelper(this.getDatasetId()).getPivotSettingProfile();return e.map(function(e,t){return e&&(e.profile=Object.assign(Object.assign({},a.collection.groups[t]),{options:e.options,roles:e.profile})),e},[])}},{key:"getColorAssignmentColumnInfo",value:function(r){var e,t,a=this.getDataCache();if(a){var n,i=rI()(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(("scatter"!==r||null!==(e=null==o?void 0:o.profile)&&void 0!==e&&e.roles.shape)&&("mapTile"!==r||null===(t=null==o?void 0:o.profile)||void 0===t||!t.roles.shape)){var s=Wc(this.data.chartType,null==o?void 0:o.profile);if(s){var l=this.dataView.helpers.find(function(e){var t,a,n,i;return!!e&&((null===(a=null===(t=e.getPivotSettingDesc())||void 0===t?void 0:t.pivotSetting)||void 0===a?void 0:a.shape)&&"scatter"===r||!(null!==(i=null===(n=e.getPivotSettingDesc())||void 0===n?void 0:n.pivotSetting)&&void 0!==i&&i.shape)&&"mapTile"===r)});if(l){var u=function(){var a=l.getFlattenedPivotSettingItems();return{v:Object.assign(Object.assign({},s),{columnsInfo:s.columns.map(function(t){var e=a.find(function(e){return ae.equals(tl(e),t)});return{columnIdentifier:t,display:null==e?void 0:e.display}})})}}();if("object"===E()(u))return u.v}}return null}}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getColorAssignmentDataPointsInfo",value:function(e){var t=this.getExportData();return 0<(null==t?void 0:t.length)?Kc(this.data.chartType,t,e):null}}]),r}(I_),iO=function(e){k()(i,e);var a=w()(i);function i(e,t){var s;return I()(this,i),(s=a.call(this,e)).getSubScenarioUsedParameters=function(e){var t,a,n=s.getDatasetProfile(s.getDatasetId()),i=[];if(e.scenarioType===H.ScenarioType.RichEditor){el(null==e?void 0:e.editorContent,H.RichTextExpressionType.DashboardVariable).map(function(e){return{id:e.uuid,variable:e.config.variable}}).forEach(function(e){i.push.apply(i,R()(uh("#{".concat(e.variable,"}"))))}),el(null==e?void 0:e.editorContent,H.RichTextExpressionType.AggregatedData).forEach(function(e){var t,a;null!==(a=null===(t=e.config)||void 0===t?void 0:t.filters)&&void 0!==a&&a.forEach(function(e){i.push.apply(i,R()(zA(e)))})});var r=((null==n?void 0:n.modelParameters)||[]).filter(function(e){return e.valueType===H.modelParameterType.DashboardParameter}).map(function(e){var t;return null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.name});i.push.apply(i,R()(r))}else if((e.scenarioType===H.ScenarioType.PivotChart||e.scenarioType===H.ScenarioType.Picture||e.scenarioType===H.ScenarioType.Visual)&&(i=[].concat(R()(n_.getUsedParametersInSlicerFiltersStatic(e)),R()(n_.getUsedParametersInFiltersStatic(e)),R()(n_.getUsedParametersInRanksStatic(e)),R()(n_.getUsedParametersInSortsStatic(e)),R()(n_.getUsedParametersInModelParametersSettingStatic(e,n))),e.chartType===H.ChartType.WebContent)){var o=null===(a=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.property)||void 0===a?void 0:a.src;i=[].concat(R()(uh(o)),R()(i))}return ae.uniq(i)},s.context=t,s}return D()(i,[{key:"notifyRefreshData",value:function(e,t,a){var n=ae.mergeRight(null!=a?a:{},{isForceUpdateCardItemDataset:!0});C()(b()(i.prototype),"notifyRefreshData",this).call(this,e,t,n)}},{key:"buildRes",value:function(e,t){var a=this.context.property;return t.setOption({nullString:a.nullItemsString,emptyString:a.emptyItemsString}),{aggregatedData:e,dataViewHelper:t}}},{key:"getPivotModel",value:function(e,t){var a=C()(b()(i.prototype),"getPivotModel",this).call(this,e,t);return a.options.includeAllDimensions=!0,a}},{key:"updateExtensionData",value:function(e){var t=this.getGlobalFilters(this.data,this.getDatasetId(),!0),a={globalFilters:oA(this.data,e,!0),pivotFilters:sA(this.data,e,!0)},n=UA(a.globalFilters,a.pivotFilters);this.extensionData={globalFiltersWithIgnoreEntityRelation:t,pivotFiltersWithIgnoreEntityRelation:n}}},{key:"generateGlobalFiltersForCardItem",value:function(){var e,t,a=null===(e=this.extensionData)||void 0===e?void 0:e.globalFiltersWithIgnoreEntityRelation,n=null===(t=this.extensionData)||void 0===t?void 0:t.pivotFiltersWithIgnoreEntityRelation;return ch(a,n)}},{key:"generateCalculatedFiltersForCardItem",value:function(){var e,t;return null===(t=null===(e=this.dataView)||void 0===e?void 0:e.model)||void 0===t?void 0:t.calcFilters}},{key:"getUsedParameters",value:function(){return ae.compose(ae.flatten,ae.concat(C()(b()(i.prototype),"getUsedParameters",this).call(this)),ae.map(this.getSubScenarioUsedParameters),ae.values)(this.data.cardTemplate.scenarios)}},{key:"getVariableDependencies",value:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:null;return ae.compose(ae.flatten,ae.concat(C()(b()(i.prototype),"getVariableDependencies",this).call(this,a)),ae.map(function(e){return t.getSubScenarioVariableDependencies(e,a)}),ae.values)(this.data.cardTemplate.scenarios)}},{key:"getSubScenarioVariableDependencies",value:function(e,t){var a,n,i=1<arguments.length&&void 0!==t?t:null;if(Jr.isRichEditor(e))return el(null==e?void 0:e.editorContent,H.RichTextExpressionType.DashboardVariable).map(function(e){return{id:e.uuid,variable:e.config.variable}}).map(function(e){return sh("#{".concat(e.variable,"}"),i)[0]});if(Jr.isWebContent(e)){var r=null===(n=null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.property)||void 0===n?void 0:n.src;return sh(r,i)}return[]}}]),i}(eO),rO=function(){function e(){I()(this,e)}return D()(e,null,[{key:"create",value:function(e){var t=null,a=eO,n=I_,i=nO;switch(Jr.isSpreadChart(e)&&(a=RF(a),n=RF(n),i=RF(i)),Jr.isMergedChart(e)&&(a=BM(a),n=BM(n),i=BM(i)),e.scenarioType){case H.ScenarioType.RichEditor:t=new RM(e.id,e.editorContent);break;case H.ScenarioType.PivotChart:switch(e.chartType){case H.ChartType.PivotTable:t=new a(e.id);break;case H.ChartType.DataTable:t=new FM(e.id);break;case H.ChartType.KpiMatrix:case H.ChartType.Map:t=new i(e.id);break;case H.ChartType.Composite:t=new tO(e.id);break;case H.ChartType.WebContent:t=new aO(e.id);break;case H.ChartType.Card:t=new iO(e.id,void 0);break;default:t=new a(e.id)}break;case H.ScenarioType.Slicer:switch(e.slicerType){case H.SlicerType.TreeSlicer:case H.SlicerType.LabelSlicer:case H.SlicerType.ComboBoxSlicer:t=new HM(e.id);break;case H.SlicerType.DataRangeSlicer:t=new XF(e.id);break;case H.SlicerType.DateRangeSlicer:case H.SlicerType.RelativeDateSlicer:t=new ZF(e.id)}break;case H.ScenarioType.Visual:t=new n(e.id);break;case H.ScenarioType.Picture:t=new a(e.id)}return t}}]),e}(),oO=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},sO=function(){function t(e){I()(this,t),this._taskItemMap=new Map,this._id=Bd.a.v1(),this._isRunning=!1,this._options=e}return D()(t,[{key:"run",value:function(){return oO(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._isRunning=!0,this.beforeExecute(),e.abrupt("return",this.execute().then(function(e){return t.afterExecute(e)}).finally(function(){t._isRunning=!1}));case 3:case"end":return e.stop()}},e,this)}))}},{key:"getTaskKeys",value:function(){return Array.from(this._taskItemMap,function(e){var t=N()(e,2),a=t[0];t[1];return a})}},{key:"getTaskItems",value:function(){return Array.from(this._taskItemMap,function(e){var t=N()(e,2);t[0];return t[1]})}},{key:"removeTaskItem",value:function(e){this._taskItemMap.get(e)&&this._taskItemMap.delete(e)}},{key:"id",get:function(){return this._id}},{key:"isRunning",get:function(){return this._isRunning}}]),t}(),lO=function(e){k()(a,e);var t=w()(a);function a(e){var r;return I()(this,a),(r=t.call(this,e)).afterExecute=function(e){var t=r._options,n=t.topic,a=t.datasetIds,i=[];return e.forEach(function(e){if("rejected"===e.status){var t=e.reason,a=t.config;i.push(a),r.getRelatedScenariosByDatasetId(a).forEach(function(e){e.onRequestError&&(e.onRequestError(t),t.done=!0),UF(e)}),n.emit(zT.Error,t)}}),a.length||n.emit(zT.AggregationReady),Promise.resolve(i)},r.getRelatedScenariosByDatasetId=function(t){var e=r._options.scenarios;return Object.values(e).filter(function(e){return e.getUsedDatasetIds().includes(t)})},r}return D()(a,[{key:"beforeExecute",value:function(){var a=this,e=this._options,t=e.datasetIds,n=e.datasetSchemaResource;n.suspend(),t.forEach(function(e){if(!a._taskItemMap.has(e)){var t=n.fetch(e);a._taskItemMap.set(e,t)}}),n.resume()}},{key:"execute",value:function(){return Promise.allSettled(this.getTaskItems())}}]),a}(sO),uO=function(e){k()(a,e);var t=w()(a);function a(e){return I()(this,a),t.call(this,e)}return D()(a,[{key:"beforeExecute",value:function(){var s=this,e=this._options,t=e.aggResource,a=e.aggregatedLoadOption,n=e.scenarios,l=e.rejectedDatasetIds,u=e.sessionId,c=a.fromGlobalFilters;t.suspend();try{n.forEach(function(e){var n=e.scenario,i=e.aggregateRequestType,t=n.getUsedDatasetIds();if(!t.length)return n.refreshData(),void UF(n);if(Jr.isMergedChart(n.data)){var a={fromGlobalFilters:c,aggregateRequestType:i,sessionId:u},r=n._datasetSchemaResource.fetch(n.getDatasetId()).then(function(){return n.fetchAggregatedData(n.getDatasetId(),a)}).finally(function(){UF(n)}),o=Bo.a.sortBy(t).join("-");s._taskItemMap.set("".concat(o,"-").concat(n.id,"-").concat(i),r)}else t.forEach(function(e){if(!l.includes(e)){var t={fromGlobalFilters:c,aggregateRequestType:i,sessionId:u},a=n.fetchAggregatedData(e,t).finally(function(){UF(n)});s._taskItemMap.set("".concat(e,"-").concat(n.id,"-").concat(i),a)}})})}catch(e){}t.resume()}},{key:"execute",value:function(){return Promise.allSettled(this.getTaskItems())}},{key:"afterExecute",value:function(){var e=this._options.scenarios,t=void 0===e?[]:e,a=new Map;return t.forEach(function(e){var t=e.scenario;e.aggregateRequestType!==xw.Active&&a.set(t.id,t.updateParametersBySelection())}),Promise.allSettled(Array.from(a,function(e){var t=N()(e,2);t[0];return t[1]}))}}]),a}(sO),cO=function(){function t(e){I()(this,t),this._taskQueue=[],this._options={},this._sessionId="".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),this._isRunning=!1,this._options=e}return D()(t,[{key:"start",value:function(){return oO(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._options,a=t.prepareData,n=void 0===a?{}:a,i=t.datasetSchemaResource,r=t.topic,o=n.datasetIds,s=n.scenarios,l=void 0===s?[]:s,this._isRunning=!0,u=new lO({datasetIds:o,scenarios:l,datasetSchemaResource:i,topic:r}),e.prev=4,e.next=7,u.run();case 7:c=e.sent,this.prepareBatchTask(c);case 9:if(0<this._taskQueue.length)return e.next=12,this._taskQueue.shift().run();e.next=14;break;case 12:e.next=9;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),nu.error(e.t0);case 19:return e.prev=19,this._isRunning=!1,e.finish(19);case 22:case"end":return e.stop()}},e,this,[[4,16,19,22]])}))}},{key:"prepareBatchTask",value:function(e){var t,a=this._options,n=a.prepareData,i=a.aggregatedLoadOption,r=a.aggResource,o=n.batchStages,s=this.sessionId,l=rI()(o);try{for(l.s();!(t=l.n()).done;){var u=t.value;this.addBatchTask(new uO({scenarios:u,aggregatedLoadOption:i,rejectedDatasetIds:e,aggResource:r,sessionId:s}))}}catch(e){l.e(e)}finally{l.f()}}},{key:"addBatchTask",value:function(e){this._taskQueue.push(e)}},{key:"removeBatchTask",value:function(t){this._taskQueue.find(function(e){return e.id===t})&&Bo.a.remove(this._taskQueue,function(e){return e.getId()===t})}},{key:"cancelBatchTask",value:function(e){var t,a=e._taskQueue.flatMap(function(e){return e.getTaskKeys()}),n=rI()(this._taskQueue);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!i.isRunning){var r,o=i.getTaskKeys(),s=Bo.a.intersection(o,a),l=rI()(s);try{for(l.s();!(r=l.n()).done;){var u=r.value;i.removeTaskItem(u)}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){n.e(e)}finally{n.f()}}},{key:"destroy",value:function(){this._taskQueue=[]}},{key:"sessionId",get:function(){return this._sessionId}},{key:"timeStamp",get:function(){return Number(this._sessionId.split("-")[0])}},{key:"isRunning",get:function(){return this._isRunning}}]),t}(),dO=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},pO=function(){function t(e){var o=this;I()(this,t),this.id="",this._reduxStore=null,this._scenarios={},this._aggResource=null,this._datasetSchemaResource=null,this._isReady=!1,this._topic=new f.a.EventEmitter,this._pageRenderEvent=new FP,this.variableManager=null,this._sessionMap=new Map,this._pageRenderEventHandler=function(e){o._pageRenderEvent.done(e),o._pageRenderEvent.isComplete()&&(o._topic.emit(H.PageEvent.AggregationReady),o._pageRenderEvent.end())},this._scenarioErrorEventHandler=function(e){o.notifyError(e),o._pageRenderEvent.end()},this.onVariableChange=function(t){nu.log("Variable Change",t),o.scenariosLoop(function(e){e.tryRefreshVariable(t)})},this.notifyError=function(e){o._topic.emit(H.PageEvent.Error,e)},this.doFontLoaded=function(e){var t=e.familyName;o.scenariosLoop(function(e){e.tryRepaint({familyName:t})})},this.isGlobalFiltersUseParameters=function(t){if(!t||0===t.size)return!1;var e,a=o._reduxStore.getState(),n=Hs.pivotFilters(a)||[],i=rI()(n);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(zA(r).some(function(e){return t.has(e)}))return!0}}catch(e){i.e(e)}finally{i.f()}return!1},this.id=e,this._topic.setMaxListeners(0)}return D()(t,[{key:"setReduxStore",value:function(e){this._reduxStore=e}},{key:"setAggResource",value:function(e){this._aggResource=e}},{key:"setDatasetSchemaResource",value:function(e){this._datasetSchemaResource=e}},{key:"setVariableManager",value:function(e){this.variableManager=e}},{key:"setInformManager",value:function(e){this.informManager=e}},{key:"setParameterManager",value:function(e){this._parameterManager=e}},{key:"setCacheManager",value:function(e){this._cacheManager=e}},{key:"setCustomAttributesManager",value:function(e){this._customAttributesManager=e}},{key:"inject",value:function(e){e.setReduxStore(this._reduxStore),e.setAggResource(this._aggResource),e.setDatasetSchemaResource(this._datasetSchemaResource),e.setParameterManager(this._parameterManager),e.setCacheManager(this._cacheManager)}},{key:"getScenario",value:function(e){return this._scenarios[e]}},{key:"getScenarios",value:function(){return this._scenarios}},{key:"getScenarioByName",value:function(t){var a=null;return this.scenariosLoop(function(e){Us.scenarioName(e.getData())===t&&(a=e)}),a}},{key:"initScenario",value:function(e,t,a){var n=1<arguments.length&&void 0!==t&&t,i=2<arguments.length?a:void 0;this.inject(e),e.on(H.ScenarioEvent.Error,this._scenarioErrorEventHandler),e.on(H.ScenarioEvent.AggregationReady,this._pageRenderEventHandler),this._isReady&&(e.ready(),n||(e.refreshData(i?{context:i}:void 0),e.isAffectOthers()&&this._doFilter(e)))}},{key:"addScenario",value:function(e,t,a){var n=1<arguments.length&&void 0!==t&&t,i=2<arguments.length?a:void 0;this._scenarios[e.id]&&this._scenarios[e.id].destroy(),this._scenarios[e.id]=e,this.initScenario(e,n,i)}},{key:"removeScenario",value:function(t){var e=Object.values(this._scenarios).find(function(e){return e===t});this._isReady&&t.isAffectOthers()&&this._doFilter(t,!0),e&&delete this._scenarios[t.id],t.destroy(),null!=d$&&d$.cacheManager.delete(H.CacheType.ActiveFilter,t.id)}},{key:"isReady",value:function(){return this._isReady}},{key:"scenariosLoop",value:function(t){var a=this;Object.keys(this._scenarios).forEach(function(e){t(a._scenarios[e])})}},{key:"ready",value:function(){this._isReady=!0,this.scenariosLoop(function(e){e.ready()}),this.batchLoadAggregatedData(),this.informManager.subscribe(H.InformEventType.fonts,this.doFontLoaded),this.variableManager.subscribe(this.onVariableChange)}},{key:"_cancelDatasetRequest",value:function(e){return e&&e.q.isPending()?(e.q.cancel(),e.scenarios):[]}},{key:"destroy",value:function(){var t=this;this._isReady=!1,Object.keys(this._scenarios).forEach(function(e){t._scenarios[e].destroy()}),this._topic.removeAllListeners(),this.variableManager.unsubscribe(this.onVariableChange),this._sessionMap.forEach(function(e){return e.destroy()})}},{key:"batchLoadAggregatedData",value:function(){var e=this.prepareAggregateScenarios(H.BatchLoadingType.All);this.doPageAggregateBatchLoad(e)}},{key:"prepareParameters",value:function(e){return d$.isInjectedParameterManager?Promise.resolve():e?this._parameterManager.prepareParameterDefaultBaseAsync(e):this._parameterManager.prepareParameterDefaultValueAsync()}},{key:"begin",value:function(e,t,a){this._pageRenderEvent.start(e);var n,i=rI()(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this._scenarios[r];null!=o&&o.setSilence(a),null!=o&&o.notifyLoadingState(!0)}}catch(e){i.e(e)}finally{i.f()}return this.prepareParameters(t)}},{key:"end",value:function(e){this._pageRenderEvent.end(e)}},{key:"doPageAggregateBatchLoad",value:function(e,t,a,n){var i,r,o,s=this,l=1<arguments.length&&void 0!==t?t:null,u=2<arguments.length&&void 0!==a?a:{},c=3<arguments.length&&void 0!==n?n:null;if(this._isReady&&e&&(null!==(i=e.scenarios)&&void 0!==i&&i.length||!l||l.length||c)){var d=e,p=null!==(o=null===(r=d.scenarios)||void 0===r?void 0:r.map(function(e){return e.id}))&&void 0!==o?o:[],h=u.silence;this.begin(p,l,h).then(function(){var e;return null===(e=null==c?void 0:c.updateParametersBySelection)||void 0===e?void 0:e.call(c)}).finally(function(){var e;return s.isReady()?(d.type!==H.BatchLoadingType.All||null!==(e=d.scenarios)&&void 0!==e&&e.length||!p.length||(d=s.prepareAggregateScenarios(H.BatchLoadingType.All)),s.startAggregateSession(d,u)):null}).finally(function(){s.doEmbeddedComponentsRefresh(c),s.end(p)})}}},{key:"_doFilter",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t;if(this._isReady&&e){e.sync();var n=a?e:null,i=this.prepareAggregateScenarios(H.BatchLoadingType.Trigger,new Set([e.id]),n);this.doPageAggregateBatchLoad(i,[],{fromGlobalFilters:!0},e)}}},{key:"doCrossFilter",value:function(e){var t=this.getScenario(e);this._isReady&&t&&this._doFilter(t)}},{key:"doDatasetRefresh",value:function(a,e){var n=this,t=1<arguments.length&&void 0!==e&&e;if(this._isReady){var i=new Set;if(Object.keys(this._scenarios).forEach(function(e){var t=n._scenarios[e];t.sync(),t.getUsedDatasetIds().includes(a)&&i.add(t.id)}),0!==i.size){var r=this._parameterManager.getDatesetRelatedParameters(a),o=new Set(r);this.scenariosLoop(function(e){e.getUsedParameters().some(function(e){return o.has(e)})&&i.add(e.id)}),this.doScenarioRefreshBase(i,r,{silence:t})}}}},{key:"getDatasetsAffectedByParameter",value:function(u){var c=this,e=this._reduxStore.getState(),d=Hs.profiles(e),p=[];return Object.keys(d).forEach(function(a){var e=d[a],n=new Set;(e.content.customAttributes||[]).forEach(function(e){var t=c._customAttributesManager.getCustomAttribute(a,e.entity,e.name);n.add(t)});for(var t=Array.from(n),i=!1,r=0;r<t.length;r++){for(var o=t[r].getParameterDependence(),s=0;s<o.length;s++){var l=o[s];if(u.has(l)){i=!0;break}}if(i)break}i&&p.push(a)}),p}},{key:"doParameterRefreshByBinding",value:function(e){var t=this.getScenario(e);this._isReady&&t&&(t.sync(),t.updateSliceFilters(),this.doParameterRefresh(new Set(t.getParametersBindingSelf()),[e]))}},{key:"doParameterRefresh",value:function(t,e){var a=1<arguments.length&&void 0!==e?e:[];if(t){var n=new Set;if(this.isGlobalFiltersUseParameters(t)){var i=this._reduxStore.getState(),r=Hs.pivotFilters(i)||[];n=new Set(r.map(function(e){return null==e?void 0:e.datasetId}).filter(function(e){return e}))}this.getDatasetsAffectedByParameter(t).forEach(function(e){n.add(e)});var o=new Set(a);this.scenariosLoop(function(e){e.getUsedParameters().some(function(e){return t.has(e)})&&o.add(e.id),0<n.size&&(e.getUsedDatasetIds().some(function(e){return n.has(e)})&&o.add(e.id))});var s=Array.from(t);this.doScenarioRefreshBase(o,s)}}},{key:"doSlicerChange",value:function(e){var t=this.getScenario(e);this._isReady&&t&&(t.sync(),t.updateSliceFilters(),this._doFilter(t))}},{key:"doScenarioRefresh",value:function(e){this._scenarios[e]&&this.doScenarioRefreshBase(new Set([e]))}},{key:"doScenarioRefreshBase",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:[],i=2<arguments.length&&void 0!==a?a:{},r=this.prepareAggregateScenarios(H.BatchLoadingType.Partial,e);this.doPageAggregateBatchLoad(r,n,i)}},{key:"doOuterClick",value:function(e,t,a){var n=this;this._isReady&&(zF(t)||(a?this._topic.emit(H.PageEvent.OuterClick,e):setTimeout(function(){n._topic.emit(H.PageEvent.OuterClick,e)},0)))}},{key:"doInnerClick",value:function(e,t){this._isReady&&(zF(t)||this._topic.emit(H.PageEvent.InnerClick,e))}},{key:"on",value:function(e,t){this._topic.on(e,t)}},{key:"off",value:function(e,t){this._topic.removeListener(e,t)}},{key:"one",value:function(e,t){this._topic.once(e,t)}},{key:"emit",value:function(e,t){this._topic.emit(e,t)}},{key:"dispatchActionEvent",value:function(e,t,a){var n=this._scenarios[e];n&&n.dispatchActionEvent(t,a)}},{key:"isAffectedByPage",value:function(e){if(e.id===this.id)return!1;var t=Object.keys(e._scenarios),a=this.getAllRelatedScenarios();return t.some(function(e){return a.scenarios[e]})}},{key:"triggerSelectionChange",value:function(e,t){var a;null!==(a=this.getScenario(e))&&void 0!==a&&a.setSelectionInfo(t)}},{key:"doEmbeddedComponentsRefresh",value:function(e){var t,a,n=this.id,i={pageId:n};if(e){var r=!this._scenarios[e.id]?null:e.getFilter(),o=e.getDatasetId(),s=e.getSelectionInfo(),l=[{sourceScenarioId:e.id,sourceDatasetId:o,filter:r,pageId:n}];i=Object.assign(Object.assign({},i),{paramInfo:s,filterInfo:l})}var u=Hs.pivotFilters(this._reduxStore.getState());i.globalFilters=u.map(function(e){return Object.assign(Object.assign({},e),{range:eu(e)})}),null!==(t=null==d$?void 0:d$.embeddedDashboardManager)&&void 0!==t&&t.doRefreshAll(i),null!==(a=null==d$?void 0:d$.embeddedReportManager)&&void 0!==a&&a.doRefreshAll(i)}},{key:"startAggregateSession",value:function(n,e){var i,r=1<arguments.length&&void 0!==e?e:{};return dO(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&null!==(i=null==n?void 0:n.scenarios)&&void 0!==i&&i.length){e.next=2;break}return e.abrupt("return");case 2:return t=new cO({prepareData:n,aggregatedLoadOption:r,datasetSchemaResource:this._datasetSchemaResource,aggResource:this._aggResource,topic:this._topic}),this._sessionMap.forEach(function(e){e.isRunning?e.cancelBatchTask(t):a._sessionMap.delete(e.sessionId)}),this._sessionMap.set(t.sessionId,t),e.prev=5,e.next=8,t.start();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),e.t0;case 13:case"end":return e.stop()}},e,this,[[5,10]])}))}},{key:"getOrCreateScenarioModel",value:function(e){var t=this._scenarios[e];if(!t){var a=this._reduxStore.getState(),n=Hs.scenarioById(e,a);n&&(t=rO.create(n),this.inject(t),t.ready())}return t}},{key:"getAllRelatedScenarios",value:function(e){for(var t=0<arguments.length&&void 0!==e?e:null,a=Object.values(this._scenarios),n=Array.from(a),i=Object.assign({},this._scenarios),r={};0<n.length;){var o=n.shift(),s=r[o.id];s||(s=o.getDependencies(a,t),r[o.id]=s);var l,u=rI()(s.dependencies);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(!i[c]){var d=this.getOrCreateScenarioModel(c);d&&(i[c]=d,n.push(d))}}}catch(e){u.e(e)}finally{u.f()}}return{scenarios:i,dependenciesCache:r}}},{key:"prepareAggregateScenarios",value:function(s,e,t){var l=1<arguments.length&&void 0!==e?e:new Set,a=2<arguments.length&&void 0!==t?t:null;if(s!==H.BatchLoadingType.All&&0===l.size)return{};var n=[],i={},r=this.getAllRelatedScenarios(a),o=r.scenarios,u=r.dependenciesCache,c=[];Object.values(o).forEach(function(e){var t;if(!e.isEmbedded()){var a=null!==(t=u[e.id])&&void 0!==t?t:{},n=a.usedParameters,i=void 0===n?[]:n,r=a.usedVariables,o=void 0===r?[]:r;0<e.getUsedDatasetIds().length||0<i.length||0<o.length?c.push(e):s!==H.BatchLoadingType.All&&!l.has(e.id)||e.refreshData()}});var d=function(a,e,t){var n=2<arguments.length&&void 0!==t?t:new Set;if(!a||0===Object.keys(a).length)return[];var i=eI(a,e,n),r=i.directedGraph,o=i.lastStageList,s=tI(r);if(0<o.length){if(0===s.length)return[o];var l=s[s.length-1],u=Bo.a.flatMap(o,function(e){var t=e.id;return[t].concat(R()(a[t].dependencies.dependencies),R()(a[t].dependencies.crossFilter))});0===Bo.a.intersection(l.map(function(e){return e.id}),u).length?l.push.apply(l,R()(o)):s.push(o)}return s}(c.reduce(function(e,t){var a=t.id,n=t.isSlicer(),i=u[a];return e[a]={id:a,isSlicer:n,dependencies:i},e},{}),s,l).map(function(e){return e.map(function(e){var t=o[e.id];return i[e.id]||(i[e.id]=t,n=n.concat(t.getUsedDatasetIds())),Object.assign(Object.assign({},e),{scenario:t})})});return{datasetIds:Array.from(new Set(n)),scenarios:Object.values(i),batchStages:d,type:s}}}]),t}(),hO=function(){function e(){I()(this,e),this._slicerDynamicQueries={}}return D()(e,[{key:"registerDynamicQuery",value:function(e,t){null!=e&&null!=t&&(this._slicerDynamicQueries[e]=t)}},{key:"unRegisterDynamicQuery",value:function(e){this._slicerDynamicQueries[e]&&(this._slicerDynamicQueries[e]=void 0)}},{key:"queryDynamicSlicer",value:function(e){var t=e.id;if(this._slicerDynamicQueries[t])return this._slicerDynamicQueries[t](e)}},{key:"destroy",value:function(){this._slicerDynamicQueries={}}}]),e}(),yO=function(){function u(e,t,a,n,i,r,o,s){var l=this;I()(this,u),this.variableManager=null,this.page=null,this.virtualPage=null,this.exportPage=null,this.pivotAggregatedDataResource=null,this.datasetSchemaResource=null,this.uiDelegatorManager=null,this.pages=[],this.globalFilters=[],this.setPageCommon=function(e){e.setReduxStore(l.reduxProxy.getStore()),e.setAggResource(l.pivotAggregatedDataResource),e.setDatasetSchemaResource(l.datasetSchemaResource),e.setCustomAttributesManager(l.customAttributesManager),e.setVariableManager(l.variableManager),e.setInformManager(l.informManager),e.setParameterManager(l.parameterManager),e.setCacheManager(l.cacheManager)},this.onError=function(e){l.uiDelegatorManager.notificationDelegator.showError(e)},this.preloadNextPage=function(){var t=l.reduxProxy.getState(),e=Hs.pageIdList(t).filter(function(e){return!ws.hidden(Hs.pageById(e,t))}),a=e.indexOf(l.page.id),n=e[(a+1)%e.length];if(n!==l.page.id){var i=new pO(n);l.setPageCommon(i),Hs.scenariosByPageId(n,t).forEach(function(e){var t=rO.create(e);t&&i.addScenario(t)}),i.ready()}},this.pivotAggregatedDataResource=e.get("PivotAggregatedData"),this.datasetSchemaResource=e.get("DatasetSchema"),this.uiDelegatorManager=t,this.reduxProxy=a,this.dynamicSlicerManager=new hO,this.variableManager=n,this.informManager=i,this.parameterManager=r,this.customAttributesManager=o,this.cacheManager=s}return D()(u,[{key:"setPage",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t;this.setPageCommon(e),this.page=e,a&&e.one(H.PageEvent.AggregationReady,this.preloadNextPage),e.on(H.PageEvent.Error,this.onError)}},{key:"addPage",value:function(e){this.pages.push(e)}},{key:"refreshAllPage",value:function(t,e){var a=1<arguments.length&&void 0!==e&&e;t&&this.pages.forEach(function(e){return e.doDatasetRefresh(t,a)})}},{key:"getPage",value:function(){return this.page}},{key:"getPages",value:function(){return this.pages}},{key:"setVirtualPage",value:function(e){this.setPageCommon(e),(this.virtualPage=e).on(H.PageEvent.Error,this.onError)}},{key:"setExportPage",value:function(e){this.setPageCommon(e),(this.exportPage=e).on(H.PageEvent.Error,this.onError)}},{key:"getVirtualPage",value:function(){return this.virtualPage}},{key:"getExportPage",value:function(){return this.exportPage}},{key:"refresh",value:function(e,t){var a,n,i,r,o=1<arguments.length&&void 0!==t&&t;if(e)return null!==(a=this.page)&&void 0!==a&&a.doDatasetRefresh(e,o),void(null!==(n=this.virtualPage)&&void 0!==n&&n.doDatasetRefresh(e,o));null!==(i=this.page)&&void 0!==i&&i.batchLoadAggregatedData(),null!==(r=this.virtualPage)&&void 0!==r&&r.batchLoadAggregatedData()}},{key:"refreshByPageId",value:function(e,t){if(this.page)this.refresh(e);else if(t){var a=this.pages.find(function(e){return e.id===t});null!=a&&a.doDatasetRefresh(e)}}},{key:"refreshByParameters",value:function(t){var e,a;this.page?(null!==(e=this.page)&&void 0!==e&&e.doParameterRefresh(t),null!==(a=this.virtualPage)&&void 0!==a&&a.doParameterRefresh(t)):this.pages.forEach(function(e){return e.doParameterRefresh(t)})}},{key:"isDocumentDirty",value:function(){var e=this.reduxProxy.getState();return Hs.dirty(e)}},{key:"destroy",value:function(){var e;null!==(e=this.page)&&void 0!==e&&e.destroy(),this.pages=[],this.dynamicSlicerManager.destroy()}},{key:"getDynamicManager",value:function(){return this.dynamicSlicerManager}},{key:"setGlobalFilters",value:function(e){this.globalFilters=e}},{key:"getGlobalFilters",value:function(){return this.globalFilters}},{key:"getCurrentPage",value:function(){switch(d$.globalConfigManager.get("visiblePageType")){case H.PageType.ExportPage:return this.getExportPage();case H.PageType.VirtualPage:return this.getVirtualPage();case H.PageType.ActivePage:default:return this.getPage()}}},{key:"getScenarioByName",value:function(e){var t=new Array,a=this.getCurrentPage(),n=this.getPages();a?t.push(a):(!n||0<n.length)&&t.push.apply(t,R()(n));for(var i=null,r=0,o=t;r<o.length;r++){if(i=o[r].getScenarioByName(e))break}return i}}]),u}();(jF=KF=KF||{}).MaxValue="maxvalue",jF.MinValue="minvalue",(GF=WF=WF||{}).Single="single",GF.Array="array",GF.Range="range",GF.Hierarchical="hierarchical",GF.Empty="empty";function gO(e){return null==e?{type:WF.Empty,value:e}:{type:WF.Single,value:e}}function mO(e){return{type:WF.Array,value:null==e?[]:e}}function fO(e,t){if(null==e)return{type:WF.Empty,value:e};switch(null==t?void 0:t.toLowerCase()){case KF.MinValue:return gO(e.min);case KF.MaxValue:return gO(e.max);default:return{type:WF.Range,value:e}}}function vO(e,t){return void 0===e?{type:WF.Empty}:null===e?{type:WF.Empty,value:null}:{type:WF.Hierarchical,columnNames:t,value:e}}function bO(e,t,a){var n=Object.assign({},LO);null!=a&&(n.undefinedText=a,n.nullText=a);var i=function(e){if(null==e||!e.length)return[_p];var t=ae.trim(e);if(!t.length)return[_p];var a=ae.compose(ae.map(Mp),ae.split("|"))(t),n=ae.filter(function(e){return e.type===H.DashboardVariableFormatterType.FormatFn})(a);if(1<n.length)throw"Number of $FORMAT$ formatter should NOT be greater than one.";var i=ae.filter(function(e){return e.type!==H.DashboardVariableFormatterType.FormatFn})(a);if(1<i.length)throw"Number of basic formatter should NOT be greater than one.";if(0!==n.length&&0!==i.length&&i[0].type===H.DashboardVariableFormatterType.Json)throw"$FORMAT$ can not work with $JSON$.";return 0===i.length?[].concat(R()(a),[_p]):a}(t),r=ae.filter(function(e){return e.type!==H.DashboardVariableFormatterType.FormatFn})(i),o=ae.compose(ae.head,ae.filter(function(e){return e.type===H.DashboardVariableFormatterType.FormatFn}))(i);o&&(n.formatFnFormatter=o);var s=ae.head(r);switch(s.type){case H.DashboardVariableFormatterType.Json:return BO(e,s);case H.DashboardVariableFormatterType.Collection:return zO(e,s,n);case H.DashboardVariableFormatterType.Common:default:var l=s;switch(e.type){case WF.Array:return VO(e.value,l.formatterText,n);case WF.Range:return NO(e.value,l.formatterText,n);case WF.Hierarchical:return OO(e,l.formatterText,n);case WF.Single:case WF.Empty:default:return RO(e.value,l.formatterText,n)}}}function CO(e,t,a,n){return!e||3<arguments.length&&void 0!==n&&n?e:Ol(e,t,a,Ml)}function TO(e,t){var a=GO(t,e);return YO("enableCrossFilter",a)}function SO(e,t,a,f){var v=t[a].scenarioId,b=[];if(!TO(v,f))return!(t[a].passedFilterInfos=[]);e.forEach(function(e){var t=e.sourceDatasetId,a=e.sourceScenarioId,n=e.filter,i=e.pageId;if(null!==n&&(!1!==TO(a,f)&&function(e,t,a){var n=[e,t].map(GO(a)),i=N()(n,2),r=[i[0],i[1]].map(YO("containerId")),o=N()(r,2),s=o[0],l=o[1];if(!s)return!0;var u=GO(a,l);return YO("filterScope",u)===Rr||!!s}(a,v,f))){var r,o,s,l,u,c,d,p,h,y=(r=a,o=v,s=f,ae.compose(ae.path([o]),Us.interactionSetting,GO(ae.__,r))(s)),g={datasetId:t,pageId:i,filters:n?[n]:[]};if(y){if(y.unassociate)return;var m=(l=y,u=g,c=n,d=i,h=!(p=[]),Object.keys(l).forEach(function(e){u.datasetId===e&&(h=!0);var t=l[e].mapping;if(t){if(!t.length)return;var a=c.columnNames,n=Bb(t),i=Tg(a,n);if(!i)return;var r=Dg(c.range.items,i,a),o=Sg(i,n),s=ae.compose(ae.assocPath(["range","items"],r),ae.assoc("columnNames",o))(c);p.push({datasetId:e,pageId:d,filters:[s]})}else p.push(u)}),h||p.push(u),p);b.push.apply(b,R()(m))}else b.push(g)}});var n=t[a].passedFilterInfos,i=function(e){var o=[];return(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){var t,a=e.datasetId,n=e.filters,i=e.pageId,r=o.find(function(e){return e.datasetId===a&&e.pageId===i});r?(t=r.filters).push.apply(t,R()(n)):o.push({datasetId:a,pageId:i,filters:R()(n)})}),o}(b);return!ae.equals(n,i)&&(t[a].passedFilterInfos=i,!0)}function DO(e,t){return t?"#{".concat(e,"|").concat(t,"}"):"#{".concat(e,"}")}function kO(e,t){if(!e||!t||!t.length)return null;var a=d$.reduxProxy.getState(),n=dx(a,e);if(!(n||(a=d$.reduxProxy.getParentState(),n=dx(a,e))))return null;var i=n.getFlattenedPivotSettingItems(!1,{withoutHiddenDataRoles:!0}),r="".concat(H.DashboardVariables.Selection),o=ae.map(function(e){var t=ae.find(ae.propEq("name",e),i);return t||(t=n.getColumn(e),{name:e,display:e})},t),s=XO(H.VariableValueType.HierarchyValue,o);return DO(r,s)}function wO(e){if(e&&e.name){var t=d$.reduxProxy.getState(),a=Hs.scenarioWithoutDrillDataByName(e.name,t);if(a||((t=d$.reduxProxy.getParentState())&&(a=Hs.scenarioWithoutDrillDataByName(e.name,t)),a))if(Us.datasetId(a)||Jr.isCustomDataSource(a)){var n=dx(t,a.id),i=n.getUsedDimensionItems();if(Jr.isCustomDataSource(a)){var r=Us.customDataSourceContent(a);i=ae.pathOr([],["profile","columns"],r)}var o,s,l="".concat(H.DashboardVariables.Slicer,'["').concat(e.name,'"]');switch(Us.slicerType(a)){case H.SlicerType.TreeSlicer:case H.SlicerType.ComboBoxSlicer:o=H.VariableValueType.HierarchyValue,s=e.columns.map(function(t){var e=i.find(function(e){return e.name===t});return e||(e=n.getColumn(t),{name:t,display:t})},[]);break;case H.SlicerType.DataRangeSlicer:case H.SlicerType.DateRangeSlicer:case H.SlicerType.RelativeDateSlicer:var u=null===e||void 0===e?void 0:e.valuePropertyName;switch(u){case H.JumpToRangeValuePropertyType.MinValue:case H.JumpToRangeValuePropertyType.MaxValue:o=H.VariableValueType.SingleValue,l="".concat(l,".").concat(u);break;default:o=H.VariableValueType.RangeValue}break;case H.SlicerType.LabelSlicer:o=H.VariableValueType.ArrayValue}var c=XO(o,s);return DO(l,c)}}}function xO(e,t){if(e&&t){var a=d$.reduxProxy.getState(),n=dx(a,e);if(n||((a=d$.reduxProxy.getParentState())&&(n=dx(a,e)),n)){var i=n.getColumn(t.name),r="".concat(H.DashboardVariables.FilteredValue,'["').concat(i.display,'"]'),o=H.VariableValueType.ArrayValue,s=null===t||void 0===t?void 0:t.valuePropertyName;switch(s){case H.JumpToListValuePropertyType.MinValue:case H.JumpToListValuePropertyType.MaxValue:o=H.VariableValueType.SingleValue,r="".concat(r,".").concat(s)}var l=XO(o);return DO(r,l)}}}function AO(e){if(e&&e.name){var t=iu(e.name);if(t){var a="".concat(H.DashboardVariables.Parameters,'["').concat(e.name,'"]'),n=t.multiValue?H.VariableValueType.ArrayValue:H.VariableValueType.SingleValue,i=XO(n);return DO(a,i)}}}function IO(e){var t=e;return null==e||Bo.a.isNumber(e)?t=e:e&&e.toISOString?t='"'.concat(_l(e),'"'):Bo.a.isString(e)&&(t='"'.concat(e,'"')),t}function PO(e,t,a){var n="";return a?(n=null==t?"[]":t,'"'.concat(e,'":').concat(n)):(n=(Bo.a.isArray(t)?ae.compose(ae.join(","),ae.map(IO)):IO)(t),'"'.concat(e,'":[').concat(n,"]"))}function _O(e,t){var a=JSON.stringify(t);return'"'.concat(e,'":').concat(a)}function MO(n,h,e){var i=2<arguments.length&&void 0!==e?e:[];return JO(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){var c,d,p,t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=h,d=i,p=[],n.forEach(function(e){var t,a,n=null===(t=e.binding)||void 0===t?void 0:t.actualValue;if(n)p.push(_O(e.name,n));else{var i=e.value;switch(e.valueType){case H.JumpToParameterValueType.Constant:p.push(PO(e.name,i));break;case H.JumpToParameterValueType.Selection:(null===(a=e.content)||void 0===a?void 0:a.type)===H.JumpToParameterValueType.Selection&&(c=e.scenarioId,d=e.selectionInfo?e.selectionInfo:[]);var r=kO(c,i);p.push(PO(e.name,r,!0));break;case H.JumpToParameterValueType.DashboardParameter:var o=su(null==i?void 0:i.name);if(void 0!==o){Array.isArray(o)||(o=[o]),p.push(_O(e.name,o));break}var s=AO(i);p.push(PO(e.name,s,!0));break;case H.JumpToParameterValueType.Slicer:var l=wO(i);p.push(PO(e.name,l,!0));break;case H.JumpToParameterValueType.FilteredValue:var u=xO(h,i);p.push(PO(e.name,u,!0))}}}),t=ae.compose(function(e){return"{".concat(e,"}")},ae.join(","),ae.filter(function(e){return null!=e}))(p),e.next=7,lh(t,c,d,void 0,"[]");case 7:return a=e.sent,e.abrupt("return",encodeURIComponent(a));case 9:case"end":return e.stop()}},e)}))}var LO={undefinedText:"",nullText:"null",arrayLeftBracket:"[",arrayRightBracket:"]",arrayItemSeparator:","},RO=function(e,t,a){var n;if(void 0===e)return a.undefinedText;if(null===e)return a.nullText;var i=null===(n=null==a?void 0:a.formatFnFormatter)||void 0===n?void 0:n["#value"],r=EO(i,e);return t?t.replace(/#value/g,r):r},VO=function(e,t,a){var n=1<arguments.length?t:void 0,i=2<arguments.length?a:void 0,r=(0<arguments.length&&void 0!==e?e:[]).map(function(e){return RO(e,n,i)}),o=i.arrayLeftBracket,s=i.arrayRightBracket,l=i.arrayItemSeparator;return"".concat(o).concat(r.join(l)).concat(s)},NO=function(e,t,a){var n=[e.min,e.max];return VO(n,t,a)},EO=ae.curry(function(e,t){return e?e(t):"".concat(t)}),FO=/\["(.+?)"\]/g,OO=function(e,t,l){var a,n=l.arrayLeftBracket,i=l.arrayRightBracket,r=l.arrayItemSeparator;if(null===(a=e.columnNames)||void 0===a||!a.length)return"${leftBracket}${rightBracket}";var o=HO({},{children:e.value},e.columnNames,-1),u=t;t||(u=ae.compose(ae.join(":"),ae.map(function(e){return'["'.concat(e,'"]')}))(e.columnNames));var c=R()(u.matchAll(FO)).map(function(e){return{columnFullText:e[0],index:e.index,columnName:e[1]}}),s=ae.compose(ae.uniq,ae.map(function(e){for(var t,a=u,n=0;n<c.length;n++){var i=c[n],r=e[i.columnName],o=null===(t=null==l?void 0:l.formatFnFormatter)||void 0===t?void 0:t[i.columnName],s=null==r?"":EO(o,r);a=a.replace(i.columnFullText,s)}return a}))(o);return"".concat(n).concat(s.join(r)).concat(i)},HO=function a(e,t,n,i){var r=0<arguments.length&&void 0!==e?e:{},o=1<arguments.length?t:void 0,s=2<arguments.length?n:void 0,l=3<arguments.length&&void 0!==i?i:-1,u=Object.assign({},r);0<=l&&(u[s[l]]=o.value);return null==o.children||0===o.children.length?[u]:o.children.reduce(function(e,t){return e.concat(a(u,t,s,l+1))},[])},BO=function(e,t){var a=[];if(void 0!==e.value)switch(e.type){case WF.Single:a=[e.value];break;case WF.Range:a=[e.value.min,e.value.max];break;case WF.Array:a=e.value;break;case WF.Hierarchical:a=UO(e,t);break;case WF.Empty:}return JSON.stringify(a)},UO=function(t,e){var a;if(null===(a=t.columnNames)||void 0===a||!a.length)return[];var n=e.dimensionNames,i=function a(e,t,n,i){var r=0<arguments.length&&void 0!==e?e:[],o=1<arguments.length?t:void 0,s=2<arguments.length?n:void 0,l=3<arguments.length&&void 0!==i?i:-1,u=R()(r);0<=l&&u.push(o.value);return null==o.children||0===o.children.length?0===u.length?[]:[u]:o.children.reduce(function(e,t){return e.concat(a(u,t,s,l+1))},[])}([],{children:t.value},t.columnNames,-1),r=i;if(!ae.isEmpty(n)&&!ae.equals(n,t.columnNames)){var o=n.map(function(e){return t.columnNames.indexOf(e)});r=i.map(function(t){return o.map(function(e){return t[e]})})}return 1===n.length&&(r=ae.compose(ae.uniq,ae.flatten)(r)),r},zO=function(e,t,a){var n,i,r;switch(a.arrayLeftBracket=null!==(n=t.leftBracket)&&void 0!==n?n:a.arrayLeftBracket,a.arrayRightBracket=null!==(i=t.rightBracket)&&void 0!==i?i:a.arrayRightBracket,a.arrayItemSeparator=null!==(r=t.itemSeparator)&&void 0!==r?r:a.arrayItemSeparator,e.type){case WF.Array:return VO(e.value,t.commonFormatterText,a);case WF.Range:return NO(e.value,t.commonFormatterText,a);case WF.Hierarchical:return OO(e,t.commonFormatterText,a);case WF.Single:return VO([e.value],t.commonFormatterText,a);case WF.Empty:default:return VO([],t.commonFormatterText,a)}},KO=function(e,o,s,l){return new(s=s||ed.Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},jO={type:WF.Empty},WO=function(){function i(e,t,a,n){I()(this,i),this.topic=new m.EventEmitter,this.variableContext={userInfo:null,datasetInfo:[]},this.docPath=e,this.globalConfigManager=t,this.httpResourceManager=a,this.reduxProxy=n,this.queryStringParser=new fx.a(window.location.search),this.topic.setMaxListeners(0)}return D()(i,[{key:"setParentDashboardVariableManager",value:function(e){this.parentDashboardVariableManager=e}},{key:"destroy",value:function(){this.globalConfigManager=null,this.httpResourceManager=null,this.reduxProxy=null,this.queryStringParser=null,this.topic.removeAllListeners(H.ApplicationEventType.DashboardVariableChanged)}},{key:"subscribe",value:function(e){this.topic.on(H.ApplicationEventType.DashboardVariableChanged,e)}},{key:"unsubscribe",value:function(e){this.topic.off(H.ApplicationEventType.DashboardVariableChanged,e)}},{key:"setUserInfo",value:function(e){this.variableContext.userInfo=e,this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.User})}},{key:"fireDocumentChange",value:function(){this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.Document})}},{key:"fireSlicerChange",value:function(e){e&&this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.Slicers,scenarioId:e})}},{key:"fireParameterChange",value:function(e){e&&e.length&&this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.Parameters,names:e})}},{key:"onLanguageResourceChange",value:function(){this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.Language})}},{key:"updateDatasetInfo",value:function(e,t,a){var n,i=2<arguments.length&&void 0!==a&&a,r=ae.findIndex(ae.propEq("id",e))(null!==(n=this.variableContext.datasetInfo)&&void 0!==n?n:[]);if(!(r<0)){var o=this.variableContext.datasetInfo[r],s=ae.merge(o,t);this.variableContext.datasetInfo[r]=s,i||o.lastUpdatedAt===s.lastUpdatedAt||this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.Datasets})}}},{key:"setDatasetInfo",value:function(e){this.variableContext.datasetInfo=e,this.topic.emit(H.ApplicationEventType.DashboardVariableChanged,{variableType:H.DashboardVariables.Datasets})}},{key:"isValidVariableName",value:function(e){return!!e&&Object.values(H.DashboardVariables).includes(e.toLowerCase())}},{key:"isValidParameterName",value:function(t){return!!t&&!!Hs.parameters(this.reduxProxy.getState()).find(function(e){return e.name===t})}},{key:"getVariableContent",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:null,i={variableType:null==e?void 0:e.toLowerCase()};if(null!=t&&t.length)switch(e.toLowerCase()){case H.DashboardVariables.Slicer:case H.DashboardVariables.Slicers:var r=t[0];if(!r)break;var o=this.getState(),s=ae.compose(ae.find(function(e){return Us.scenarioName(e)===r}),ae.filter(function(e){return Jr.isSlicer(e)||Jr.isVisualSlicer(e)}),ae.values)(Hs.scenarios(o));s||Us.scenarioName(n)!==r||(s=n),i.scenarioId=null==s?void 0:s.id}return i}},{key:"getVariableValue",value:function(s){return KO(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVariableValueInternal(s);case 2:if(t=e.sent,a=s.useOriginalValue,n=void 0!==a&&a,i=s.formatterText,r=s.defaultText,n)return e.abrupt("return",t.value);e.next=6;break;case 6:return o=bO(t,i,r),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}))}},{key:"getVariableValueSync",value:function(e){var t=this.getVariableValueSyncInternal(e),a=e.useOriginalValue,n=void 0!==a&&a,i=e.formatterText,r=e.defaultText;return n?t.value:bO(t,i,r)}},{key:"getVariableValueInternal",value:function(u){return KO(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=jO,this.parentDashboardVariableManager)return e.next=4,this.parentDashboardVariableManager.getVariableValueInternal(u);e.next=7;break;case 4:if((t=e.sent).type!==WF.Empty)return e.abrupt("return",t);e.next=7;break;case 7:if(a=u.variableName,n=u.path,i=u.formatterText,r=u.scenarioId,o=u.selectedDataList,s=void 0===o?[]:o,null==n||!n.length){e.next=37;break}e.t0=a.toLowerCase(),e.next=e.t0===H.DashboardVariables.User?12:e.t0===H.DashboardVariables.Document?14:e.t0===H.DashboardVariables.UrlParameters?16:e.t0===H.DashboardVariables.Parameters?18:e.t0===H.DashboardVariables.Slicer||e.t0===H.DashboardVariables.Slicers?20:e.t0===H.DashboardVariables.FilteredValue?24:e.t0===H.DashboardVariables.Datasets?28:e.t0===H.DashboardVariables.Language?32:34;break;case 12:return t=this.getUserInfo(n),e.abrupt("break",35);case 14:return t=this.getDocumentVariableValue(n),e.abrupt("break",35);case 16:return t=this.getUrlParametersVariableValue(n),e.abrupt("break",35);case 18:return t=this.getParameterValue(n),e.abrupt("break",35);case 20:return e.next=22,this.getSlicerValue(n,!0);case 22:return t=e.sent,e.abrupt("break",35);case 24:return e.next=26,this.getFilterValue(n,r);case 26:return t=e.sent,e.abrupt("break",35);case 28:return e.next=30,this.getDatasetValue(n);case 30:return t=e.sent,e.abrupt("break",35);case 32:return t=this.getLanguageResourceValue(n),e.abrupt("break",35);case 34:return e.abrupt("break",35);case 35:e.next=38;break;case 37:a.toLowerCase()===H.DashboardVariables.Selection&&(l=null==i?"":i.trim(),t=this.getSelectionValue(n,r,s,!l));case 38:return void 0===t.value?t={type:WF.Empty}:null===t.value&&(t={type:WF.Empty,value:t.value}),e.abrupt("return",t);case 40:case"end":return e.stop()}},e,this)}))}},{key:"getVariableValueSyncInternal",value:function(e){var t=jO;if(this.parentDashboardVariableManager&&(t=this.parentDashboardVariableManager.getVariableValueSyncInternal(e)).type!==WF.Empty)return t;var a=e.variableName,n=e.path,i=e.formatterText,r=e.scenarioId,o=e.selectedDataList,s=void 0===o?[]:o;if(null!=n&&n.length)switch(a.toLowerCase()){case H.DashboardVariables.User:t=this.getUserInfo(n);break;case H.DashboardVariables.Document:t=this.getDocumentVariableValue(n);break;case H.DashboardVariables.UrlParameters:t=this.getUrlParametersVariableValue(n);break;case H.DashboardVariables.Parameters:t=this.getParameterValue(n)}else if(a.toLowerCase()===H.DashboardVariables.Selection){var l=null==i?"":i.trim();t=this.getSelectionValue(n,r,s,!l)}return void 0===t.value?t={type:WF.Empty}:null===t.value&&(t={type:WF.Empty,value:t.value}),t}},{key:"getLanguageResourceValue",value:function(e){var t=e[0],a=this.getState(),n=Hs.languageResource(a)[t];return gO(n||"".concat(H.DashboardVariables.Language,'["').concat(t,'"]'))}},{key:"getUserInfo",value:function(e){var t=this.variableContext.userInfo,a=e.join(".");return"roles"===a?mO(ae.propOr([],a,t)):gO(ae.prop(a,t))}},{key:"getUserRoles",value:function(){return this.variableContext.userInfo.roles}},{key:"getDocumentVariableValue",value:function(e){var t=e.join("."),a=this.getState();switch(t){case"id":return gO(Hs.dashboardId(a));case"name":return gO(Hs.name(a));default:return jO}}},{key:"getUrlParametersVariableValue",value:function(e){var t=e.join("."),a=this.queryStringParser.getQuery(t);return null==a&&(a=this.globalConfigManager.get(t)),null==a&&(a=this.globalConfigManager.get("allQueries")[t]),gO(a)}},{key:"getParameterFormattedValueByName",value:function(e,t){var a=t.isSingle,n=t.withFormat,i=iu(e),r=su(e,a);return n?Array.isArray(r)?r.map(function(e){return Jl(e,i)}):Jl(r,i):r}},{key:"getParameterValue",value:function(e){var t=e[0],a=Hs.parameters(this.reduxProxy.getState()).find(function(e){return e.name===t}),n=this.getParameterFormattedValueByName(t,{withFormat:!0});return!a.multiValue&&Bo.a.isArray(n)&&(n=n[0]),null==n?jO:(Bo.a.isArray(n)?mO:gO)(n)}},{key:"getSlicerValueFromBuildInSlicer",value:function(e,t,a,n,i){var r,o,v,s=3<arguments.length&&void 0!==n&&n,b=4<arguments.length&&void 0!==i&&i;v=function(e){var t,a=d$.cacheManager.get(H.CacheType.ActiveFilter,e.id);a=a||(null===(t=e.options)||void 0===t?void 0:t.sliceFilters);var n=ae.head(a);if(!n&&Jr.isDateRangeSlicer(e)&&(n=e.options.property.defaultValue),n&&!ae.isEmpty(n))switch(e.slicerType){case H.SlicerType.LabelSlicer:case H.SlicerType.TreeSlicer:case H.SlicerType.ComboBoxSlicer:return F()({},e,{slicerSetting:{rule:H.FilterRule.GENERAL,range:{items:n.values}}});case H.SlicerType.DataRangeSlicer:var i={min:null,max:null,maxIncluded:!0,minIncluded:!0};return n.conditions.forEach(function(e){switch(e.operator){case H.AdvancedFilterOperator.GreaterThanOrEqual:i.min=e.value;break;case H.AdvancedFilterOperator.GreaterThan:i.min=e.value,i.minIncluded=!1;break;case H.AdvancedFilterOperator.LessThanOrEqual:i.max=e.value;break;case H.AdvancedFilterOperator.LessThan:i.max=e.value,i.maxIncluded=!1}}),F()({},e,{slicerSetting:{rule:H.FilterRule.VALUE_RANGE,range:i}});case H.SlicerType.DateRangeSlicer:var r=n.payload,o=r.range,s=r.type;if(s===H.DateRangeType.Relative)return rl(e,o);if(s===H.DateRangeType.Static)return F()({},e,{slicerSetting:{rule:H.FilterRule.DATE_RANGE,range:o}});if(s!==H.DateRangeType.Quick)break;var l=e.options.property.quickRanges;return rl(e,l[o]);case H.SlicerType.RelativeDateSlicer:var u=e.options.property.items;return F()({},e,{slicerSetting:{rule:H.FilterRule.SLICER_RELATIVE_DATE,range:{items:u,selectedIndex:n.payload.selectedIndex}}})}else switch(e.slicerType){case H.SlicerType.LabelSlicer:case H.SlicerType.TreeSlicer:case H.SlicerType.ComboBoxSlicer:return F()({},e,{slicerSetting:{rule:H.FilterRule.GENERAL,range:{items:[]}}});case H.SlicerType.DataRangeSlicer:return F()({},e,{slicerSetting:{rule:H.FilterRule.VALUE_RANGE,range:{min:null,max:null,maxIncluded:!0,minIncluded:!0}}});case H.SlicerType.DateRangeSlicer:return F()({},e,{slicerSetting:{rule:H.FilterRule.DATE_RANGE,range:{min:null,max:null,maxIncluded:!0,minIncluded:!0}}});case H.SlicerType.RelativeDateSlicer:return F()({},e,{slicerSetting:{rule:H.FilterRule.SLICER_RELATIVE_DATE,range:{items:[],selectedIndex:-1}}})}}(t);var l=Us.slicerSetting(v),C=eu(l);switch(v.options.property.selectionMode===Yn&&(C=cu(C)),l.rule){case H.FilterRule.GENERAL:var T=Us.datasetId(v),S=Vl(l.range.items);if(Us.slicerType(v)===H.SlicerType.LabelSlicer){var u=v.pivot.pivotSetting.columns.values,c=CO(C.items,u,T,S);return mO(c.map(function(e){return e.value}))}var D=Hs.profilesOnlyContent(e)[T],d=function(e){var t,a,n,i,r,o,s=new sy(e,D),l=v.pivot.pivotSetting;if(Us.dataSourceType(v)===H.DataSourceType.CustomInput){var u=Us.customDataSourceContent(v),c=ae.pathOr([],["profile","columns"],u);l=Kk(v,null===(t=c[0])||void 0===t?void 0:t.columnName)}var d,p=null===(a=l.collection)||void 0===a?void 0:a.groups;if(p&&p[0]){var h=p[0].roles;d=h.hierarchy?h.hierarchy.values:h.id?h.id.values:null===(n=h.columns)||void 0===n?void 0:n.values}else d=(null===(i=v.pivot.pivotSetting.columns)||void 0===i?void 0:i.values)||[];var y=[];d.forEach(function(e){var t=e.dims?e.dims||[]:[e];b?t.forEach(function(e){return y.push(s.getHierarchyDimension(null==e?void 0:e.name).display)}):t.forEach(function(e){return y.push(s.getColumn(null==e?void 0:e.name).display)})});var g=[],m=ae.head(null===(r=v.options)||void 0===r?void 0:r.sliceFilters);null!==(o=null==m?void 0:m.target)&&void 0!==o&&o.length&&(g=m.target.map(function(e){return{name:e.column}}));var f=CO(C.items,g,T,S);return vO(f,y)};if(s&&!Jr.isCustomDataSource(v)){var p=this.httpResourceManager.get("DatasetSchema");return new ed.Promise(function(t){p.fetch(T).then(function(e){return t(d(e))})})}var h=this.httpResourceManager.getData("DatasetSchema",T);return d(h);case H.FilterRule.DATE_RANGE:var y,g,m=v.options.property,f=m.dateMode;if(m.rangeMode===H.RangeMode.Basic){var k=C.min;g=null==k?y=null:(y=_l(k.startOf(f)),_l(k.endOf(f).add(1,"s")))}else y=C.min?_l(C.min):null,g=C.max?_l(C.max):null;return fO({min:y,max:g},a);case H.FilterRule.VALUE_RANGE:var w=null!==(r=C.min)&&void 0!==r?r:null,x=null!==(o=C.max)&&void 0!==o?o:null;return fO({min:w,max:x},a);case H.FilterRule.RELATIVE_DATE:case H.FilterRule.SLICER_RELATIVE_DATE:if(-1===C.selectedIndex)return fO({min:null,max:null},a);var A=ry(C.items[C.selectedIndex]),I=A.min?A.min:null,P=A.max?A.max:null;return fO({min:I,max:P},a)}return jO}},{key:"getSlicerValueFromCustomVisual",value:function(e){var t=Us.sliceFilters(e)[0];if(!t)return jO;var a=jO;switch(t.filterType){case H.VisualFilterType.Basic:a=mO(t.values);break;case H.VisualFilterType.Advanced:a=jO;break;case H.VisualFilterType.Tuple:var n=Eb.convertToCommonFilter(t);a=vO(n.range.items,n.columnNames)}return a}},{key:"getSlicerValue",value:function(e,t,a){var n=1<arguments.length&&void 0!==t&&t,i=2<arguments.length&&void 0!==a&&a;if(this.parentDashboardVariableManager){var r=this.parentDashboardVariableManager.getSlicerValue(e,n,i);if(r.type!==WF.Empty)return r}var o=e[0];if(!o)return jO;var s=this.getState(),l=ae.compose(ae.find(function(e){return Us.scenarioName(e)===o}),ae.filter(function(e){return Jr.isSlicer(e)||Jr.isVisualSlicer(e)}),ae.values)(Hs.scenarios(s));if(null==l)return jO;if(Jr.isSlicer(l)){var u=e.slice(1).join(".");return this.getSlicerValueFromBuildInSlicer(s,l,u,n,i)}return this.getSlicerValueFromCustomVisual(l)}},{key:"getFilterValue",value:function(f,e){var v=this;return new ed.Promise(function(h){if(f.length<1)return h(jO);var y=v.reduxProxy.getState(),g=Hs.scenarioById(e,y);if(null==g)return h(jO);var m=Us.datasetId(g);if(!m)return h(jO);v.httpResourceManager.get("DatasetSchema").fetch(m).then(function(e){var t=Hs.profileByDatasetId(m,y),a=ux(g),n=cx(y,g,t,a),i=f[0],r=n.getColumns().find(function(e){return e.display===i});if(null==r||!r.name)return h(jO);var o=ae.propOr("","1",f).toLowerCase(),s=o===KF.MaxValue||o===KF.MinValue,l=s&&r.dataType===H.DatasetFieldDataType.Number,u=Object.assign(Object.assign({},g),{scenarioType:H.ScenarioType.Slicer,slicerType:l?H.SlicerType.DataRangeSlicer:H.SlicerType.LabelSlicer,pivot:Object.assign(Object.assign({},g.pivot),{pivotSetting:{columns:{values:[{name:r.name,valueType:H.AggregationValueType.Value}]}}})}),c=rO.create(u);c.on(H.ScenarioEvent.RefreshData,function(e){c.destroy();var t=jO;if(l)t=fO(e,o.toLowerCase());else{var a=e.completeData.data.map(function(e){return e.value});if(s){var n=Bo.a.min(a),i=Bo.a.max(a);t=fO({min:n,max:i},o.toLowerCase())}else t=mO(a)}h(t)}),c.ready();var d=v.docPath.split(".").concat(["scenarios",u.id]),p=ae.assocPath(d,u,y);c.setReduxStore({getState:function(){return p}}),c.setAggResource(v.httpResourceManager.get("PivotAggregatedData")),c.setDatasetSchemaResource(v.httpResourceManager.get("DatasetSchema")),c.refreshData()})})}},{key:"getSelectionValue",value:function(e,t,a,n){var i=2<arguments.length&&void 0!==a?a:[],r=3<arguments.length?n:void 0;if(!ae.isEmpty(e))return jO;var o=this.getState(),s=Hs.scenarioById(t,o);if(null==s)return jO;var l=cx(o,s),u=r?l.getUsedDimensionItems():l.getFlattenedPivotSettingItems(!1,{withoutHiddenDataRoles:!0}),c=ae.compose(ae.uniq,ae.map(ae.prop("display")))(u),d=ae.map(function(a){for(var e={},n=e,i=null,t=function(t){var e=a.find(function(e){return e.display===c[t]});n.value=null==e?void 0:e.originalValue,t!==c.length-1&&(i={},n.children=[i],n=i)},r=0;r<c.length;r++)t(r);return e},i);return vO(d,c)}},{key:"getDatasetValue",value:function(e){var t=e[0];if(!t)return jO;var a=e[1];if(!a)return jO;var n=this.variableContext.datasetInfo.find(function(e){return e.name===t});if(null==n)return jO;if("lastupdated"!==a.toLowerCase())return jO;var i=kl(!0),r=pu(i)(new Date(n.lastUpdatedAt));return gO(r)}},{key:"getState",value:function(){return this.reduxProxy.getState()}}]),i}(),GO=ae.curry(function(e,t){return Hs.scenarioById(t,e)}),YO=ae.curry(function(e,t){var a;return null===(a=Us[e])||void 0===a?void 0:a.call(Us,t)}),qO=function(){function n(e,t,a){var m=this;I()(this,n),this._subDashboards={},this._passedFilterInfos=[],this._scenarioFilterList=[],this.globalFilters=[],this.getPassedFilterInfos=function(){return m._passedFilterInfos},this.updateParameters=function(e,t){var a,n,i,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=m._subDashboards[e];if(o&&null!==(a=o.instance)&&void 0!==a&&a.dashboard){var s=t||{},l=s.scenarioName,u=s.selectionInfo,c=o.parameters,d=o.scenarioId,p=c;if(!p||r){var h=m.reduxProxy.getState(),y=Hs.scenarioById(d,h);p=(null===(i=null===(n=Us.contentSetting)||void 0===n?void 0:n.call(Us,y))||void 0===i?void 0:i.parameters)||[]}var g=m.updateActualValue(p,l,u);return!(!r&&ae.equals(p,g))&&(o.parameters=g,m.setParameters(e,g),!0)}},this.updateActualValue=function(e,r,o){return(e||[]).map(function(e){var t,a,n=e.content.value;switch(null===(t=e.content)||void 0===t?void 0:t.type){case H.JumpToParameterValueType.Constant:return Object.assign(Object.assign({},e),{value:e.content.value});case H.JumpToParameterValueType.Selection:case H.JumpToParameterValueType.Slicer:if(r&&(null===(a=null==n?void 0:n.value)||void 0===a?void 0:a.name)!==r)return e;var i=Object.assign(Object.assign({},e),{binding:n});return Object.assign(Object.assign({},e),{value:m.parameterManager.calculateBindingParameterValue(i,o)});case H.JumpToParameterValueType.DashboardParameter:return Object.assign(Object.assign({},e),{value:su(e.content.value)});default:return e}})},this.dashboardManager=e,this.reduxProxy=t,this.parameterManager=a}return D()(n,[{key:"addSubDashboard",value:function(e,t,a,n){this._subDashboards[e]={instance:t,scenarioId:a,pageId:n}}},{key:"removeSubDashboard",value:function(e){var t=this._subDashboards[e];t&&setTimeout(function(){t.instance.destroy()}),delete this._subDashboards[e]}},{key:"getSubDashboard",value:function(e,t){var a=function(e,t,a){var n=2<arguments.length&&void 0!==a&&a;return t&&e?"".concat(e,"-").concat(t).concat(n?"-exporting":""):""}(Us.scenarioName(t),e);return this._subDashboards[a]}},{key:"getSubDocsInfos",value:function(){return this._subDashboards}},{key:"addSetting",value:function(e,t){this._subDashboards[e].setting=t}},{key:"doCrossFilter",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this._passedFilterInfos=t}},{key:"updateFilter",value:function(e,a){var t=this;return!(null==a||!a.length)&&(this._scenarioFilterList=this._scenarioFilterList.filter(function(t){return a.every(function(e){return e.sourceScenarioId!==t.sourceScenarioId})}),a.forEach(function(e){e.sourceScenarioId&&e.sourceDatasetId&&void 0!==e.filter&&e.pageId&&t._scenarioFilterList.push(e)}),this.updatePassedFilterInfos(e))}},{key:"removeFilter",value:function(){this._passedFilterInfos=[]}},{key:"setParameters",value:function(e,t){var a,n,i,r=1<arguments.length&&void 0!==t?t:[];if(this._subDashboards[e]){var o={};r.forEach(function(e){var t;o[e.name]=e.value?(t=e.value,Array.isArray(t)?t:[t]):e.value}),null!==(i=null===(n=null===(a=this._subDashboards[e].instance)||void 0===a?void 0:a.dashboard)||void 0===n?void 0:n._setParameterValue)&&void 0!==i&&i.call(n,o,!0)}}},{key:"triggerSubDashboardsCrossFilter",value:function(e){var t,a,n,i,r,o,s=this._subDashboards[e];if(s){var l=s.instance,u=s.passedFilterInfos,c=s.pageId,d=u.filter(function(e){return e.pageId===c}),p=null===(i=null===(n=null===(a=null===(t=null==l?void 0:l.dashboard)||void 0===t?void 0:t.dashboard)||void 0===a?void 0:a.getCurrentPage())||void 0===n?void 0:n.store)||void 0===i?void 0:i.id;null!==(o=null===(r=null==l?void 0:l.dashboard)||void 0===r?void 0:r.dashboardContext)&&void 0!==o&&o.embeddedDashboardManager.doCrossFilter(d,p)}}},{key:"updatePassedFilterInfos",value:function(e){var t,a=this.reduxProxy.getState();try{t=SO(this._scenarioFilterList,this._subDashboards,e,a)}catch(e){nu.error(e)}return t&&this.triggerSubDashboardsCrossFilter(e),t}},{key:"getUsedDatasetIdListByDocId",value:function(t){var e=Object.keys(this._subDashboards).find(function(e){return e.includes(t)});return e?this._subDashboards[e].instance.dashboard.dashboardContext.datasetManager.getUsedDatasetIdList():[]}},{key:"destroy",value:function(){var n=this;Object.keys(this._subDashboards).forEach(function(e){var t,a;return null===(a=null===(t=n._subDashboards[e].instance)||void 0===t?void 0:t.destroy)||void 0===a?void 0:a.call(t)})}},{key:"doRefreshAll",value:function(t){var a=this,n=(t||{}).pageId;Object.keys(this._subDashboards).filter(function(e){return a._subDashboards[e].pageId===n}).forEach(function(e){a.doRefresh(e,t)})}},{key:"doRefresh",value:function(e,t,a){var n,i,r,o,s=2<arguments.length&&void 0!==a&&a,l=t||{},u=l.paramInfo,c=l.filterInfo,d=l.globalFilters,p=void 0===d?[]:d,h=(this._subDashboards[e]||{}).instance,y=this.updateParameters(e,u,s),g=this.updateFilter(e,c),m=!ae.equals(this.globalFilters,p);m&&(this.globalFilters=p,null!==(n=h.dashboard)&&void 0!==n&&n.setGlobalFilters(p)),(y||g||m)&&(null!==(i=h.dashboard)&&void 0!==i&&i.getDashboardContext().dashboardManager.refresh(),null!==(o=null===(r=null==h?void 0:h.dashboard)||void 0===r?void 0:r.dashboard)&&void 0!==o&&o.refresh())}},{key:"setOuterGlobalFilters",value:function(e){this._outerGlobalFilters=e}},{key:"getOuterGlobalFilters",value:function(){return this._outerGlobalFilters}},{key:"crossFilterSetting",get:function(){return Object.keys(this._subDashboards)}},{key:"passedFilterInfos",get:function(){return this._passedFilterInfos}}]),n}(),JO=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},XO=function(e,t){var a="";switch(e){case H.VariableValueType.SingleValue:case H.VariableValueType.ArrayValue:case H.VariableValueType.RangeValue:a="$JSON$";break;case H.VariableValueType.HierarchyValue:a=ae.compose(function(e){return"$JSON$(".concat(e,")")},ae.join(","),ae.map(function(e){return'"'.concat(e.display,'"')}))(t||[])}return a},QO=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},ZO=function(){function a(e,t){var m=this;I()(this,a),this._subReports={},this.emitter=null,this.onDpUrlChanged=function(e){m.emitter.on(Ek.DpUrlChanged,e)},this.getDpBySubDocId=function(e){var t;return null===(t=m._subReports[e])||void 0===t?void 0:t.dpUrl},this.updateParameters=function(e,t){var a,n,i=m._subReports[e];if(i){var r=t||{},o=r.scenarioName,s=r.selectionInfo,l=i.scenarioId,u=Hs.scenarioById(l,m.reduxProxy.getState()),c=((null===(n=null===(a=Us.contentSetting)||void 0===a?void 0:a.call(Us,u))||void 0===n?void 0:n.parameters)||[]).map(function(e){var t,a,n,i;return(null===(n=null===(a=null===(t=e.content)||void 0===t?void 0:t.value)||void 0===a?void 0:a.value)||void 0===n?void 0:n.name)===o&&(null===(i=e.content)||void 0===i?void 0:i.type)===qS.Selection?Object.assign(Object.assign({},e),{selectionInfo:s}):e});m.setParameters(e,c)}},this.generateJumpToParameters=function(e){return e.map(function(e){var t,a,n,i,r,o,s,l,u,c,d=null===(t=e.content)||void 0===t?void 0:t.value,p=null===(a=e.content)||void 0===a?void 0:a.type;switch(p){case qS.Selection:d=null===(r=null===(i=null===(n=e.content)||void 0===n?void 0:n.value)||void 0===i?void 0:i.value)||void 0===r?void 0:r.checkedFieldNames;var h=m.reduxProxy.getState(),y=null===(l=null===(s=null===(o=e.content)||void 0===o?void 0:o.value)||void 0===s?void 0:s.value)||void 0===l?void 0:l.name,g=Hs.scenarioByName(y,h);return Object.assign(Object.assign({},e),{valueType:p,value:d,scenarioId:null==g?void 0:g.id});case qS.Slicer:d=null===(c=null===(u=e.content)||void 0===u?void 0:u.value)||void 0===c?void 0:c.value;break;case qS.DashboardParameter:d={name:d}}return Object.assign(Object.assign({},e),{valueType:p,value:d})})},this.updateAllParameters=function(){Object.keys(m._subReports).forEach(function(i){return QO(m,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._subReports[i],e.next=3,MO(this.generateJumpToParameters(t.parameters));case 3:a=e.sent,t.dpUrl!==a&&(t.dpUrl=a,n={dpUrl:a,subDocId:i},this.emitter.emit(Ek.DpUrlChanged,n));case 5:case"end":return e.stop()}},e,this)}))})},this.emitter=e,this.reduxProxy=t}return D()(a,[{key:"getSubDocsInfos",value:function(){return this._subReports}},{key:"addSubReport",value:function(e,t){this._subReports[e]={scenarioId:t}}},{key:"removeSubReport",value:function(e,t){this.emitter.removeListener(Ek.DpUrlChanged,t),delete this._subReports[e]}},{key:"setParameters",value:function(n,e){var i=1<arguments.length&&void 0!==e?e:[];return QO(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._subReports[n]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,MO(this.generateJumpToParameters(i));case 4:t=e.sent,this._subReports[n].dpUrl!==t&&(this._subReports[n].dpUrl=t,a={dpUrl:t,subDocId:n},this.emitter.emit(Ek.DpUrlChanged,a));case 6:case"end":return e.stop()}},e,this)}))}},{key:"doRefreshAll",value:function(t){var a=this;Object.keys(this._subReports).forEach(function(e){a.doRefresh(e,t)})}},{key:"doRefresh",value:function(e,t){var a=(t||{}).paramInfo;this.updateParameters(e,a)}},{key:"destroy",value:function(){Object.keys(this._subReports).forEach(this.removeSubReport),this.emitter.removeAllListeners()}}]),a}(),$O=function(){function n(e,t,a){var i=this;I()(this,n),this.shouldRenderScenarioStatus={},this.getListeners=function(){var n=i;return{singlePageRenderCompleted:function(){n.resetShouldRenderScenarioStatus(),setTimeout(function(){i.eventHub.emit("rendered")},100)},singleScenarioRenderCompleted:function(e){!1===n.shouldRenderScenarioStatus[e]&&(n.shouldRenderScenarioStatus[e]=!0,i.tryDoComplete())},recordScenario:function(e){var t=e.scenarioId,a=e.pageId;i.recordPageId||(i.recordPageId=a),a===i.recordPageId&&(n.shouldRenderScenarioStatus[t]=!1)},scenariosCountCompleted:function(){n.scenariosCountCompleted=!0,i.tryDoComplete()}}},this.emitter=e,this.eventHub=t,this.globalConfigManager=a,this.init()}return D()(n,[{key:"resetShouldRenderScenarioStatus",value:function(){this.shouldRenderScenarioStatus={},this.recordPageId=null}},{key:"tryDoComplete",value:function(){this.scenariosCountCompleted&&Object.values(this.shouldRenderScenarioStatus).every(function(e){return e})&&(this.emitter.removeAllListeners(H.ExportEvent.SINGLE_SCENARIO_RENDER_COMPLETED),this.emitter.emit(H.ExportEvent.SINGLE_PAGE_RENDER_COMPLETED))}},{key:"init",value:function(){var e=this.globalConfigManager.get("parentDashboardIds");if(null!=e&&e.length){var t=this.getListeners(),a=this.emitter;a.on(H.ExportEvent.SINGLE_SCENARIO_RENDER_COMPLETED,t.singleScenarioRenderCompleted),a.on(H.ExportEvent.SCENARIO_VIEWER_BASE_RENDERED,t.recordScenario),a.on(H.ExportEvent.SCENARIOS_COUNT_COMPLETED,t.scenariosCountCompleted),a.on(H.ExportEvent.SINGLE_PAGE_RENDER_COMPLETED,t.singlePageRenderCompleted)}}},{key:"destroy",value:function(){this.emitter.removeAllListeners()}}]),n}(),eH=function(){function i(){var n=this;I()(this,i),this.onMessageHandler=function(e){var t=e.data[i.TokenKey];if(t){var a=n.listenerMapping[t];a&&a(e.data)}},window.addEventListener("message",this.onMessageHandler),this.listenerMapping={}}return D()(i,[{key:"subscribe",value:function(e,t){this.listenerMapping[e]=t}},{key:"unsubscribe",value:function(e){delete this.listenerMapping[e]}},{key:"destroy",value:function(){window.removeEventListener("message",this.onMessageHandler),this.listenerMapping={}}}]),i}();eH.TokenKey="__token";var tH=function(e){k()(i,e);var n=w()(i);function i(e){var t;I()(this,i),t=n.call(this,e);var a=e.capabilities||{};return a.dataBinding&&(t.dataBindingExecutor=new gL(t.i18nManager,a.dataBinding),t.dataBindingExecutor.setIconManager(t.iconManager)),t.optionsExecutor=new iV(t.i18nManager,a.options),t.actionExecutor=new hN(t.i18nManager,t.optionsExecutor,a.actions),t.scenarioType=e.id,t}return D()(i,[{key:"createScenario",value:function(e,t){var a=C()(b()(i.prototype),"createScenario",this).call(this,e,t);switch(this.id){case H.ScenarioType.Container:case H.ScenarioType.TabContainer:a.tabSettingContent={0:{text:Ft("patterns.container.tabTitleButton",{number:1})},activeTab:0,tabs:[0]};break;case H.ScenarioType.Picture:var n={datasetId:null,pivotSetting:{}};this.dataBindingExecutor&&(n.pivotSetting=this.dataBindingExecutor.getInitPivotSetting()),a.pivot=n}return a}},{key:"getSimplePivotSettings",value:function(e){var t;return(null===(t=this.dataBindingExecutor)||void 0===t?void 0:t.getSimplePivotSettings(e))||[]}},{key:"isSupportTriggerDataInteraction",get:function(){return this.id===H.ScenarioType.Picture}},{key:"isSupportReceiveDataInteraction",get:function(){return this.id===H.ScenarioType.Picture}}]),i}(YN),aH=function(e){k()(i,e);var t=w()(i);function i(){return I()(this,i),t.apply(this,arguments)}return D()(i,[{key:"createScenario",value:function(e,t){var a=C()(b()(i.prototype),"createScenario",this).call(this,e,t);return a.editorContent={delta:{}},a}},{key:"getLanguageResourceKey",value:function(e){var n=C()(b()(i.prototype),"getLanguageResourceKey",this).call(this,e);return el(e.editorContent,H.RichTextExpressionType.DashboardVariable).forEach(function(e){var t=e.config;if(t&&t.variable){var a=ul("#{".concat(t.variable,"}"));a!=="#{".concat(t.variable,"}")&&n.push(a)}}),n}},{key:"isSupportReceiveDataInteraction",get:function(){return!0}}]),i}(tH),nH=function(e){k()(n,e);var t=w()(n);function n(){return I()(this,n),t.call(this,{id:"dummy",name:"dummy",_displayNameKey:"menuBar.categories.visuals.title"})}return D()(n,[{key:"createScenario",value:function(e,t){var a=C()(b()(n.prototype),"createScenario",this).call(this,e,t);return a.state.isDummy=!0,a}}]),n}(XN),iH=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).scenarioType=H.ScenarioType.Slicer,t}return D()(n,[{key:"isSupportDataBinding",value:function(){return!0}},{key:"createScenario",value:function(e,t){var a=C()(b()(n.prototype),"createScenario",this).call(this,e,t);return a.slicerType=this.id,a.mobileLayout.height=100,a}},{key:"isSlicer",get:function(){return!0}},{key:"isSupportReceiveDataInteraction",get:function(){return!this._isDisableInteraction}}]),n}(qN),rH=function(e){k()(n,e);var t=w()(n);function n(){var e;return I()(this,n),(e=t.call(this,n.def)).setUseBuildInI18n(!0),e.actionExecutor.enableDebugMode(),e.optionsExecutor.enableDebugMode(),e.trusted=!0,e.runInIframe=!0,e}return D()(n,[{key:"updateVisual",value:function(e){var t=new XN(e);this.dataBindingExecutor=t.getDataBindingExecutor(),this.optionsExecutor=t.getOptionsExecutor(),this.optionsExecutor.enableDebugMode(),this.actionExecutor=t.getActionExecutor(),this.actionExecutor.enableDebugMode(),this.analysisExecutor=t.getAnalysisExecutor(),this.i18nManager=t.getI18nManager(),this.iconManager=t.getIconManager(),this.definitionJSON=e,this.version=t.version,this.jsContent=t.jsContent,this.cssContent=t.cssContent,this.externalJs=t.externalJs,this.externalCss=t.externalCss}},{key:"createScenario",value:function(e,t){var a=C()(b()(n.prototype),"createScenario",this).call(this,e,t);return a.state.isDevMode=!0,a}}]),n}(XN);rH.def={name:"visualDevTools",displayNameKey:"components.devTools",id:"visualDevTools",iconCss:"dd-png-dev-visual",capabilities:{}};function oH(e,a){return e.reduce(function(e,n){var t=a.find(function(e){return a=e,(t=n).type===a.type&&t.name===a.name;var t,a});return e.push(null!=t?t:n),e},[])}function sH(e){return"".concat(gH,"_").concat(e)}function lH(e){var t;return(t=function(e){k()(s,e);var o=w()(s);function s(e){var t,a;I()(this,s);for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=o.call(this,(a=e,[ae.over(ae.lensPath(["capabilities","actions"]),ae.concat([{type:pg.ActionType.MergeDatasets}])),ae.over(ae.lensPath(["capabilities","actions"]),function(e){return oH(e,[{type:pg.ActionType.ConvertVisual}])}),ae.over(ae.lensPath(["capabilities","actions"]),ae.reject(function(e){return[pg.ActionType.ShowData].includes(e.type)})),ae.set(ae.lensPath(["capabilities","analysis"]),[]),ae.over(ae.lensPath(["capabilities","options","visual"]),function(e){return ae.map(function(e){return e.type===sg.CategoryType.Interaction?ae.mergeDeepRight(e,{disable:{dataSetAutoRefresh:!0}}):e},null!=e?e:[])}),ae.over(ae.lensPath(["capabilities","options","visual"]),function(e){return ae.concat(null!=e?e:[],[{displayNameKey:"inspector.categories.dataVisualization",properties:[{name:"joinType",type:sg.PublicPropertyType.Enum,displayNameKey:"mergedChart.datasetJoinType",_ancestorPath:"pivot.datasetsInfo",_pristine:!0,items:[{value:H.MergeDatasetsJoinType.Inner,displayNameKey:"mergedChart.innerJoin"},{value:H.MergeDatasetsJoinType.Full,displayNameKey:"mergedChart.fullJoin"}],defaultValue:H.MergeDatasetsJoinType.Inner}]}])}),ae.mergeDeepLeft({displayNameKey:"chartTypes.multiSource"})].reduce(function(e,t){return t(e)},a)),i)).isDatasetChangeable=function(){return!1},t.isSupportChangeChartType=function(){return!1},t.id=sH(t.id),t.originalDisplayNameKey=e.displayNameKey,t}return D()(s,[{key:"getName",value:function(){return this.originalDisplayNameKey?this.getDisplayNameByKey(this.originalDisplayNameKey):C()(b()(s.prototype),"getName",this).call(this)}},{key:"createScenario",value:function(e,t){var a=C()(b()(s.prototype),"createScenario",this).call(this,e,t);return a.dataSourceType=H.DataSourceType.Merged,a.pivot.datasetId=e,a.pivot.datasetsInfo={datasetIds:[],links:[],joinType:H.MergeDatasetsJoinType.Inner},a}},{key:"isSupportKeepExclude",value:function(){return!1}},{key:"supportRecommend",value:function(){return!1}},{key:"isSupportAddMonitor",value:function(){return!1}},{key:"getActionBar",value:function(e,t,a){var n=this.actionExecutor.getDescriptors(e,t,a),i=n.find(function(e){return e.name===pg.ActionType.Focus});return n=[i].concat(R()(n.filter(function(e){return e!==i}))).filter(function(e){return e}),e.pivot.datasetsInfo.datasetIds.length||(n=n.filter(function(e){return e.type!==pg.ActionType.Filter})),n}},{key:"isSupportTriggerDataInteraction",get:function(){return!0}},{key:"isSupportReceiveDataInteraction",get:function(){return!0}}],[{key:"getOriginalVisualId",value:function(e){return mH.exec(e)[1]}}]),s}(e)).makeDefId=sH,t}var uH,cH,dH,pH,hH=[hE,sF,gE,fE,bE,oF,CE,TE,kE,AE,uF,_E,NE,LE,EE,OE,BE,zE,KE,jE,WE,GE,YE,qE,JE,nF,XE,ZE,$E,eF,yF,iF],yH={id:H.ScenarioType.MergedChart},gH="MERGED_SOURCE",mH=new RegExp("^".concat(gH,"_(.*)")),fH=[],vH=function(e){return function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"supportChangeChartTypeMenuList",get:function(){return fH}}],[{key:"canChangeChartTypeTo",value:function(e){var t=e.supportedDataViewTypes;return 1===t.length&&t[0]===H.DataViewType.Plain}},{key:"addSupportedChangeChartTypeList",value:function(e){fH.push(e)}},{key:"getSupportedChangeChartTypeList",value:function(){return fH}},{key:"resetSupportedChangeChartTypeList",value:function(){fH.length=0}},{key:"removeChangeChartTypeListById",value:function(t){var e=fH.findIndex(function(e){return e.id===t});-1<e&&fH.splice(e,1)}}]),a}(lH(e))},bH=vH(JN),CH=vH(XN),TH=bH,SH=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"isSupportReceiveDataInteraction",get:function(){return!0}}]),a}(tH),DH=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"isSupportReceiveDataInteraction",get:function(){return!1}}]),a}(tH),kH={name:"itemsFormat",displayNameKey:"dataBindingPanel.editFormat",type:eg.DataRoleItemOptionType.Format,defaultValue:"General"},wH={name:"itemsDisplayUnit",displayNameKey:"inspector.properties.charts.axis.displayUnit",type:eg.DataRoleItemOptionType.DisplayUnit,defaultValue:H.DisplayUnit.Auto,isBuiltIn:!0},xH={name:"alignment",displayNameKey:"dataBindingPanel.alignmentSetting",type:eg.DataRoleItemOptionType.Alignment,defaultValue:H.TableAlignment.Default},AH={name:"renderSetting",displayNameKey:"dataBindingPanel.renderSetting",type:eg.DataRoleItemOptionType.RenderSetting,defaultValue:H.ImageRenderSetting.Text},IH={name:H.ChartType.KpiMatrix,displayNameKey:"components.kpiMatrix",id:H.ChartType.KpiMatrix,iconCss:"dd-png-kpi-matrix-chart",capabilities:{options:{visual:[{displayNameKey:"inspector.categories.tableSetting",properties:[].concat(R()(SN.tableCommonSetting()),[{type:sg.PrivatePropertyType.KPIMatrixStyleTemplate,displayNameKey:"inspector.properties.tables.tableTemplates"},{name:"graphColorPreference",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.graphColorPreference",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.Auto}])},{displayNameKey:"inspector.categories.dataVisualization",properties:[BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),{type:sg.PublicPropertyType.Boolean,name:"frozenGroup",displayNameKey:"inspector.properties.tables.freezeRowHeader",defaultValue:!0},SN.autoScroll(),SN.tableScrollPattern]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.tables.columnHeader",properties:SN.colHeaderStyle},{displayNameKey:"inspector.categories.tables.rowHeader",properties:R()(SN.rowHeaderStyle)},{displayNameKey:"inspector.categories.tables.corner",properties:SN.cornerStyle},{displayNameKey:"inspector.categories.tables.firstDataStripe",properties:SN.firstDataStripeStyle},{displayNameKey:"inspector.categories.tables.secondDataStripe",properties:SN.secondDataStripeStyle},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{properties:[].concat(R()(SN.hiddenProps),[{name:"referenceLine",type:sg.PublicPropertyType.Hidden,defaultValue:[]}])}]},dataBinding:{dataRoles:[{name:"rows",aliasName:"category",displayNameKey:"dataBindingPanel.rows",kind:"grouping",_optionsWithId:!0,itemOptions:[xH,kH,AH]},{kind:"collection",displayNameKey:"dataBindingPanel.columns",groups:["value","commonChart","image"],_optionsWithId:!0,collapsible:!0,editable:!0}],templates:[{name:"value",displayNameKey:"dataBindingPanel.singleValue",iconCss:"mdi mdi-numeric",dataRoles:[{name:"value",displayNameKey:"dataBindingPanel.value",kind:"value",itemOptions:[xH,kH,wH]}],dataViewMappings:[{matrix:{values:["value"],rows:["rows"],required:[{value:{min:1}}]}}],conditions:[{value:{max:1}}]},{name:"hBar",displayNameKey:"dataBindingPanel.hBarGraph",iconCss:"mdi mdi-signal-cellular-3 mdi-rotate-90",dataRoles:[{name:"value",displayNameKey:"dataBindingPanel.value",kind:"value"}],dataViewMappings:[{matrix:{values:["value"],rows:["rows"],required:[{value:{min:1}}]}}],conditions:[{value:{max:1}}],options:[{name:"parameters",type:"_HBarSetting",defaultValue:{barSize:60}}]},{name:"pareto",displayNameKey:"dataBindingPanel.paretoGraph",iconCss:"mdi mdi-stairs mdi-flip-h",dataRoles:[{name:"value",displayNameKey:"dataBindingPanel.value",kind:"value"}],dataViewMappings:[{matrix:{values:["value"],rows:["rows"],required:[{value:{min:1}}]}}],options:[{name:"parameters",type:"_paretoSetting",defaultValue:{barSize:60,target:80}}],conditions:[{value:{max:1}}]},{name:"bullet",displayNameKey:"dataBindingPanel.bulletGraph",iconCss:"icon-bullet",dataRoles:[{name:"bulletActual",displayNameKey:"dataBindingPanel.mainValue",kind:"value"},{name:"bulletTarget",displayNameKey:"dataBindingPanel.comparisonValue",kind:"value"},{name:"bulletForecast",displayNameKey:"dataBindingPanel.forecastValue",kind:"value"}],dataViewMappings:[{matrix:{values:["bulletActual","bulletTarget","bulletForecast"],rows:["rows"],required:[{bulletActual:{min:1},bulletTarget:{min:1}}]}}],conditions:[{bulletActual:{max:1},bulletTarget:{max:1},bulletForecast:{max:1}}],options:[{name:"parameters",type:"_bulletSetting",defaultValue:{barSize:60,maxi:120,good:90,bad:60,tickunit:10}}]},{name:"commonChart",displayNameKey:"dataBindingPanel.diagram",dataRoles:[{name:"chartValue",displayNameKey:"dataBindingPanel.value",kind:"value"},{name:"chartCategory",displayNameKey:"dataBindingPanel.axis",kind:"grouping"}],dataViewMappings:[{matrix:{values:["chartValue"],columns:["chartCategory"],rows:["rows"],required:[{chartValue:{min:1}}]}}],conditions:[{chartValue:{max:1}}],options:[{name:"type",displayNameKey:"actionBar.changeChartType",type:"enum",defaultValue:"line",items:[{value:"line",displayNameKey:"dataBindingPanel.trend",iconCss:"mdi mdi-chart-line-variant"},{value:"column",displayNameKey:"dataBindingPanel.bar",iconCss:"mdi mdi-chart-bar"},{value:"area",displayNameKey:"dataBindingPanel.area",iconCss:"mdi mdi-chart-areaspline"},{value:"winloss",displayNameKey:"dataBindingPanel.winLoss",iconCss:"mdi mdi-swap-vertical"}]}]},{name:"image",displayNameKey:"dataBindingPanel.Image",iconCss:"mdi mdi-image-area",dataRoles:[{name:"image",displayNameKey:"dataBindingPanel.Image",kind:"grouping",itemOptions:[Object.assign(Object.assign({},AH),{defaultValue:H.ImageRenderSetting.ImageURL,noText:!0})]}],dataViewMappings:[{matrix:{rows:["rows"],columns:["image"],required:[{image:{min:1}}]}}],conditions:[{image:{max:1}}]}]},actions:[{type:pg.ActionType.Edit},{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export,disableSVG:!0},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual,disableChangeChartType:!0},WN.expand,{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},PH={name:H.ChartType.Map,displayNameKey:"chartTypes.map",id:H.ChartType.Map,iconCss:"dd-png-map",capabilities:{dataBinding:{dataRoles:[{name:"location",displayNameKey:"dataBindingPanel.location",kind:"grouping",preferredTypes:[H.PreferredType.GeoRegion]},{name:"lat",displayNameKey:"dataBindingPanel.latitude",kind:"grouping",preferredTypes:[H.PreferredType.GeoLatitude]},{name:"long",displayNameKey:"dataBindingPanel.longtitude",kind:"grouping",preferredTypes:[H.PreferredType.GeoLongitude]},{kind:"collection",displayNameKey:"dataBindingPanel.layers",groups:["map","scatter"]},{name:"conditionalFormatValues",kind:"value",hidden:!0}],templates:[{name:"map",displayNameKey:"dataBindingPanel.mapTiles",dataRoles:[{name:"color",displayNameKey:"dataBindingPanel.color",kind:"groupingOrValue"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]}],dataViewMappings:[{plain:{dataRoles:["color","location","tooltip","conditionalFormatValues"],required:[{color:{min:1},location:{min:1}}]}}],conditions:[{location:{max:1},color:{max:1}}]},{name:"scatter",displayNameKey:"dataBindingPanel.scatter",dataRoles:[{name:"size",displayNameKey:"dataBindingPanel.size",kind:"value"},{name:"color",displayNameKey:"dataBindingPanel.color",kind:"groupingOrValue",preferredKind:"value"},{name:"shape",displayNameKey:"dataBindingPanel.shape",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]}],dataViewMappings:[{plain:{dataRoles:["size","color","shape","lat","long","tooltip","conditionalFormatValues"],required:[{lat:{min:1},long:{min:1}}]}},{plain:{dataRoles:["size","color","shape","location","tooltip","conditionalFormatValues"],required:[{size:{min:1},location:{min:1}},{color:{min:1},location:{min:1}},{shape:{min:1},location:{min:1}}]}}],conditions:[{location:{max:1},size:{max:1},lat:{max:1},long:{max:1},color:{max:1},shape:{max:1}}],prefers:[{lat:{max:1},long:{max:1},size:{max:1},color:{max:1}},{location:{max:1},size:{max:1},color:{max:1}}]}]},options:{visual:[{properties:[{name:"contentTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,hidden:!0},{name:"conditionalFormat",type:sg.PrivatePropertyType.ConditionalFormat}]},{displayNameKey:"inspector.categories.chartStyle",properties:[{name:"mapInfo",type:sg.PrivatePropertyType.MapSelector,displayNameKey:"inspector.properties.charts.map",defaultValue:null===(cH=null===(uH=Oo.getScenarioOptions(H.ScenarioType.PivotChart,H.ChartType.Map))||void 0===uH?void 0:uH.property)||void 0===cH?void 0:cH.mapInfo,_pristine:!0},{name:"regionalBorderColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.regionalBorderColor",defaultValue:"=Theme.Colors!Accent1"},{name:"autoGradient",inheritFrom:mg.InheritProperty.AutoGradient,type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.autoGradient"}]},{displayNameKey:"inspector.categories.dataVisualization",properties:[BN.allDimensions()]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),DN.Interaction.singleSelection()]},{type:sg.CategoryType.Title},{displayNameKey:"dataBindingPanel.mapTiles",properties:[{name:"usePalette",structuredPath:"mapTile",type:sg.PublicPropertyType.Enum,items:[{value:!0,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.palette"},{value:!1,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.gradient"}],displayNameKey:"inspector.properties.charts.colorPerfrence",defaultValue:!1},{name:"maintainColorAssignments",structuredPath:"mapTile",type:sg.PublicPropertyType.ColorAssignment,displayNameKey:"inspector.properties.charts.maintainColorAssignments",defaultValue:!1,alias:"mapTile",palettePath:"mapTile.paletteId"},{name:"paletteId",structuredPath:"mapTile",inheritFrom:mg.InheritProperty.Palette,type:sg.PublicPropertyType.Palette,displayNameKey:"inspector.properties.charts.palette"},{name:"gradientColor",structuredPath:"mapTile",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.gradientColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.None},{name:"useLevelColor",structuredPath:"mapTile",type:sg.PublicPropertyType.Enum,items:[{value:!1,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.gradual"},{value:!0,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.grouped"}],displayNameKey:"inspector.properties.charts.gradientPerfrence",defaultValue:!1},{name:"gradientColorGroupNumber",displayNameKey:"inspector.properties.charts.gradientColorGroupNumber",structuredPath:"mapTile",type:sg.PublicPropertyType.Integer,min:1,defaultValue:5},{name:"dataLabel",structuredPath:"mapTile",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showDataLabel",defaultValue:!1},{name:"dataLabelDisplayUnit",structuredPath:"mapTile",type:sg.PublicPropertyType.DisplayUnit,displayNameKey:"inspector.properties.charts.dataLabel.displayUnit",defaultValue:H.DisplayUnit.Auto},{name:"dataLabelLocation",structuredPath:"mapTile",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.location",defaultValue:!1},{name:"dataLabelColor",structuredPath:"mapTile",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.color",defaultValue:!0},{name:"dataLabelDisplayMode",structuredPath:"mapTile",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.all"}],displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",defaultValue:1},{name:"dataLabelTextStyle",structuredPath:"mapTile",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle},{name:"graphOpacity",structuredPath:"mapTile",inheritFrom:mg.InheritProperty.GraphOpacity,type:sg.PublicPropertyType.Percentage,displayNameKey:"inspector.properties.charts.graphOpacity"}]},{displayNameKey:"dataBindingPanel.scatter",properties:[{name:"usePalette",structuredPath:"scatter",type:sg.PublicPropertyType.Enum,items:[{value:!0,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.palette"},{value:!1,displayNameKey:"inspector.properties.charts.colorPerfrenceEnums.gradient"}],displayNameKey:"inspector.properties.charts.colorPerfrence",defaultValue:!1},{name:"maintainColorAssignments",structuredPath:"scatter",type:sg.PublicPropertyType.ColorAssignment,displayNameKey:"inspector.properties.charts.maintainColorAssignments",defaultValue:!1,alias:"scatter",palettePath:"scatter.paletteId"},{name:"paletteId",structuredPath:"scatter",inheritFrom:mg.InheritProperty.Palette,type:sg.PublicPropertyType.Palette,displayNameKey:"inspector.properties.charts.palette"},{name:"gradientColor",structuredPath:"scatter",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.charts.gradientColor",defaultValue:"=Theme.Colors!Accent1",resetType:H.ColorResetType.None},{name:"useLevelColor",structuredPath:"scatter",type:sg.PublicPropertyType.Enum,items:[{value:!1,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.gradual"},{value:!0,displayNameKey:"inspector.properties.charts.gradientPerfrenceEnums.grouped"}],displayNameKey:"inspector.properties.charts.gradientPerfrence",defaultValue:!1},{name:"gradientColorGroupNumber",displayNameKey:"inspector.properties.charts.gradientColorGroupNumber",structuredPath:"scatter",type:sg.PublicPropertyType.Integer,min:1,defaultValue:5},{name:"dataLabel",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.showDataLabel",defaultValue:!1},{name:"dataLabelDisplayUnit",structuredPath:"scatter",type:sg.PublicPropertyType.DisplayUnit,displayNameKey:"inspector.properties.charts.dataLabel.displayUnit",defaultValue:H.DisplayUnit.Auto},{name:"dataLabelLocation",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.location",defaultValue:!1},{name:"dataLabelSize",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.size",defaultValue:!0},{name:"dataLabelColor",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.color",defaultValue:!0},{name:"dataLabelShape",structuredPath:"scatter",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.dataLabel.shape",defaultValue:!0},{name:"dataLabelDisplayMode",structuredPath:"scatter",type:sg.PublicPropertyType.Enum,items:[{value:1,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.auto"},{value:2,displayNameKey:"inspector.properties.charts.dataLabel.displayMode.all"}],displayNameKey:"inspector.properties.charts.dataLabel.displayMode.title",defaultValue:1},{name:"dataLabelTextStyle",structuredPath:"scatter",displayNameKey:"inspector.properties.charts.dataLabel.dataLabelTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle},{name:"graphOpacity",structuredPath:"scatter",inheritFrom:mg.InheritProperty.GraphOpacity,type:sg.PublicPropertyType.Percentage,displayNameKey:"inspector.properties.charts.graphOpacity",defaultValue:100}]},{displayNameKey:"inspector.categories.legend",properties:[{name:"legend",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.showLegend",defaultValue:!1},{name:"showLegendName",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.title",defaultValue:!1},{name:"legendTextStyle",displayNameKey:"inspector.properties.common.legendTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle},{name:"legendPosition",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.position",items:[{value:"Top",displayNameKey:"inspector.properties.common.surroundingPosition.top"},{value:"Right",displayNameKey:"inspector.properties.common.surroundingPosition.right"},{value:"Bottom",displayNameKey:"inspector.properties.common.surroundingPosition.bottom"},{value:"Left",displayNameKey:"inspector.properties.common.surroundingPosition.left"}],defaultValue:"Right"},{name:"legendAutoSize",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.legendAutoSize",defaultValue:!0},{name:"legendHeight",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.legendHeight",defaultValue:"30%",regex:ZN.legendWidthHeight},{name:"legendWidth",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.charts.legendWidth",defaultValue:"30%",regex:ZN.legendWidthHeight},{name:"legendHAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.legendHAlign",items:[{value:"auto",displayNameKey:"inspector.properties.common.auto"},{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:"auto"},{name:"legendVAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.charts.legendVAlign",items:[{value:"auto",displayNameKey:"inspector.properties.common.auto"},{value:"center",displayNameKey:"inspector.properties.common.vAlign.middle"},{value:"top",displayNameKey:"inspector.properties.common.vAlign.top"},{value:"bottom",displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:"auto"},{name:"legendWrap",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.charts.legendWrap",defaultValue:!1}]},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export},{type:pg.ActionType.Filter},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},Object.assign(Object.assign({},WN.conditionalFormat),{hasPositionShapeSetting:!1,hasValueLabelSetting:!1,hasCategoryLabelSetting:!1,hasSeriesLabelSetting:!1,hasLocationLabelSetting:!0,hasColorLabelSetting:!0,hasSizeLabelSetting:!0,hasShapeLabelSetting:!0}),{type:pg.ActionType.Extension,name:"mapInfo",path:"mapInfo",extensionType:pg.ExtensionType.MapSelector,displayNameKey:"actionBar.selectMap",iconCss:"mdi mdi-map"},{type:pg.ActionType.ConvertVisual,disableChangeChartType:!0},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["location"],type:"path"}}]},i18nResources:Gt};(pH=dH=dH||{}).Regular="regularStyle",pH.Hover="hoverStyle",pH.Selected="selectedStyle";function _H(e){var t=0<arguments.length&&void 0!==e?e:dH.Regular,a=[{name:"backgroundColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.backgroundColor",_ancestorPath:"options.cardTemplate.".concat(t),defaultValue:function(e){switch(0<arguments.length&&void 0!==e?e:dH.Regular){case dH.Selected:return"=Theme.Colors(0,0,0.2)";case dH.Hover:return"=Theme.Colors(0,0,0.15)";default:return"=Theme.Colors(0,0,0.1)"}}(t)},{name:"backgroundGradient",type:sg.PrivatePropertyType.Gradient,displayNameKey:"inspector.properties.common.backgroundGradient",_ancestorPath:"options.cardTemplate.".concat(t)},{name:"id",type:sg.PublicPropertyType.Image,displayNameKey:"inspector.properties.common.backgroundImage.src",_ancestorPath:"options.cardTemplate.".concat(t,".backgroundImage")},t===dH.Regular&&{name:"".concat(t,".borderThickness"),type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.slicers.labelSlicer.borderThickness",_ancestorPath:"options.cardTemplate",inheritFrom:t===dH.Regular?void 0:"".concat(dH.Regular,".borderThickness"),min:0,defaultValue:t===dH.Regular?0:void 0},{name:"borderColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.slicers.labelSlicer.borderColor",_ancestorPath:"options.cardTemplate.".concat(t),defaultValue:t===dH.Selected?"=Theme.Colors!Accent1":us.color}];return[].concat(a)}var MH,LH,RH={name:H.ChartType.Card,displayNameKey:"chartTypes.card",id:H.ChartType.Card,iconCss:"dd-png-card-chart",capabilities:{dataBinding:{dataRoles:[{name:"category",displayNameKey:"dataBindingPanel.category",kind:"grouping"},{name:"tooltip",displayNameKey:"dataBindingPanel.tooltip",kind:"attributeOrValue",itemOptions:[{type:"format",name:"itemsFormat",displayNameKey:"inspector.properties.charts.axis.dataFormat",requiredTypes:[H.DatasetFieldDataType.Number,H.DatasetFieldDataType.Date,H.DatasetFieldDataType.Datetime]},{displayNameKey:"inspector.properties.charts.axis.displayUnit",name:"itemsDisplayUnit",type:"displayUnit",defaultValue:H.DisplayUnit.Auto,requiredTypes:[H.DatasetFieldDataType.Number],isBuiltIn:!0}]}],dataViewMappings:[{matrix:{values:["tooltip"],rows:["category"],required:[{category:{min:1}}]}}],prefers:[{category:{}}]},options:{common:{size:{width:800}},visual:[{properties:[{name:"contentTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,hidden:!0}]},{type:sg.CategoryType.Interaction,properties:[DN.Interaction.clickAction(),{name:"selectionMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.selectionMode.title",items:[{value:H.SlicerSelectionMode.Single,displayNameKey:"inspector.properties.slicers.selectionMode.single"},{value:H.SlicerSelectionMode.Multiple,displayNameKey:"inspector.properties.slicers.selectionMode.multiple"}],defaultValue:H.SlicerSelectionMode.Multiple},{name:"cardInteractionMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.card.cardInteractionMode.label",items:[{value:H.CardInteractionMode.CardItem,displayNameKey:"inspector.properties.card.cardInteractionMode.cardItem"},{value:H.CardInteractionMode.SubScenario,displayNameKey:"inspector.properties.card.cardInteractionMode.subScenario"}],defaultValue:H.CardInteractionMode.CardItem}]},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.cardLayout",properties:[{name:"layoutMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.card.layoutMode.label",items:[{value:H.CardLayoutMode.Auto,displayNameKey:"inspector.properties.card.layoutMode.auto"},{value:H.CardLayoutMode.Distributed,displayNameKey:"inspector.properties.card.layoutMode.distributed"},{value:H.CardLayoutMode.FixedSize,displayNameKey:"inspector.properties.card.layoutMode.fixedSize"}],_ancestorPath:"options.cardTemplate",defaultValue:H.CardLayoutMode.Distributed},{name:"flowDirection",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.card.flowDirection.label",items:[{value:H.CardFlowDirection.Z_Mode,displayNameKey:"inspector.properties.card.flowDirection.ZMode"},{value:H.CardFlowDirection.N_Mode,displayNameKey:"inspector.properties.card.flowDirection.NMode"}],_ancestorPath:"options.cardTemplate",defaultValue:H.CardFlowDirection.Z_Mode},{name:"cardItemSize.width",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.card.cardItemWidth",_ancestorPath:"options.cardTemplate",defaultValue:200,min:0},{name:"cardItemSize.height",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.card.cardItemHeight",_ancestorPath:"options.cardTemplate",defaultValue:150,min:0},{name:"itemCountPerLine",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.card.itemCountPerLine",_ancestorPath:"options.cardTemplate",defaultValue:4,min:1},{name:"enablePagination",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.card.enablePagination",_ancestorPath:"options.cardTemplate",defaultValue:!0},{name:"itemCountPerPage",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.card.itemCountPerPage",_ancestorPath:"options.cardTemplate",defaultValue:4,min:1}]},{displayNameKey:"inspector.categories.cardItemStyle",properties:[{name:"borderRadius",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.cornerRadius",_ancestorPath:"options.cardTemplate",editorType:"radius",defaultValue:{left:0,top:0,right:0,bottom:0}},{name:"padding",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.padding",_ancestorPath:"options.cardTemplate",defaultValue:{left:6,top:6,right:6,bottom:6}},{name:"margin",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.margin",_ancestorPath:"options.cardTemplate",defaultValue:{left:6,top:6,right:6,bottom:6}}].concat(R()(_H(dH.Regular)))},{displayNameKey:"inspector.categories.cardItemSelectedStyle",properties:R()(_H(dH.Selected))},{displayNameKey:"inspector.categories.cardItemHoverStyle",properties:R()(_H(dH.Hover))},{displayNameKey:"inspector.categories.tooltip",properties:[DN.Tooltip.tooltipModeNoCategory()]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[UN.nullItemsString(),UN.emptyItemsString()]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:R()(DN.scrollbarColorSetting)}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export,disableSVG:!0},{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.Rank},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.ConvertVisual,disableChangeChartType:!0},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.Drill,rule:{roles:["category"]}}]},i18nResources:Gt};(LH=MH=MH||{}).Regular="inactiveTab",LH.Hover="hover",LH.Selected="activeTab";function VH(e){var t,a=0<arguments.length&&void 0!==e?e:MH.Regular,n=[{name:"borderRadius",structuredPath:"tabStrip.".concat(a),type:sg.PublicPropertyType.Position,inheritFrom:a===MH.Regular?"tabStrip.contentRadius":"tabStrip.".concat(MH.Regular,".borderRadius"),displayNameKey:"inspector.properties.common.cornerRadius",editorType:"radius"},{name:"gradient",structuredPath:"tabStrip.".concat(a),type:sg.PrivatePropertyType.Gradient,inheritFrom:a===MH.Regular?void 0:"tabStrip.".concat(MH.Regular,".gradient"),displayNameKey:"inspector.properties.common.backgroundGradient"},{name:"image",structuredPath:"tabStrip.".concat(a),type:sg.PublicPropertyType.Image,inheritFrom:a===MH.Regular?void 0:"tabStrip.".concat(MH.Regular,".image"),displayNameKey:"inspector.properties.common.backgroundImage.src"},{name:"shadow",structuredPath:"tabStrip.".concat(a),type:sg.PrivatePropertyType.ShadowInterger,inheritFrom:a===MH.Regular?void 0:"tabStrip.".concat(MH.Regular,".shadow"),displayNameKey:"inspector.properties.common.shadow.label",defaultValue:a===MH.Regular?{type:"none",size:0,color:"#cccccc"}:{}},{name:"showBorder",structuredPath:"tabStrip.".concat(a),type:sg.PublicPropertyType.Boolean,inheritFrom:"showSplitLine",displayNameKey:"inspector.properties.slicers.labelSlicer.showBorder",hidden:!0},{name:"thickness",structuredPath:"tabStrip.".concat(a),type:sg.PublicPropertyType.Integer,inheritFrom:a===MH.Regular?void 0:"tabStrip.".concat(MH.Regular,".thickness"),displayNameKey:"inspector.properties.slicers.labelSlicer.borderThickness",min:1},{name:"color",structuredPath:"tabStrip.".concat(a,".border"),type:sg.PublicPropertyType.Color,inheritFrom:"tabStrip.".concat(a,".textStyle.color"),displayNameKey:"inspector.properties.containers.activeTabBorderColor"}];return a===MH.Selected?[].concat(n,R()([{name:"position",structuredPath:t="tabStrip.".concat(a,".markingLine"),type:sg.PublicPropertyType.Text,defaultValue:"bottom",displayNameKey:"inspector.properties.common.position",hidden:!0},{name:"length",structuredPath:t,type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.markingLineLength",defaultValue:100,hidden:!0},{name:"thickness",structuredPath:t,type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.markingLineThickness",defaultValue:2,min:0,hidden:!0},{name:"offset",structuredPath:t,type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.common.offset",defaultValue:0,hidden:!0}])):[].concat(n)}var NH,EH,FH={name:H.ScenarioType.TabContainer,displayNameKey:"components.tabContainer",id:H.ScenarioType.TabContainer,iconCss:"dd-png-tab-container",capabilities:{options:{visual:[{properties:[{name:"height",type:sg.PublicPropertyType.Hidden,defaultValue:40,structuredPath:"header"},{name:"position",type:sg.PublicPropertyType.Hidden,defaultValue:"top",structuredPath:"header"},{name:"mobile",type:sg.PublicPropertyType.Hidden,defaultValue:{headerHeight:40,tabStripHeight:40}},{name:"visible",type:sg.PublicPropertyType.Hidden,defaultValue:!0}]},{displayNameKey:"inspector.categories.tabStrip",properties:[{name:"visible",structuredPath:"tabStrip",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.containers.tabStripVisible",defaultValue:!0},{name:"tabStripStyle",structuredPath:"tabStrip",type:sg.PrivatePropertyType.BatchTabContainerStyle,displayNameKey:"inspector.properties.common.style"},{name:"position",structuredPath:"tabStrip",type:sg.PublicPropertyType.Enum,items:[{value:"top",displayNameKey:"inspector.properties.common.surroundingPosition.top"},{value:"bottom",displayNameKey:"inspector.properties.common.surroundingPosition.bottom"}],displayNameKey:"inspector.properties.containers.tabStripMode",defaultValue:"top"},{name:"alignment",structuredPath:"tabStrip",displayNameKey:"inspector.properties.containers.tabStripAlignment.label",type:sg.PublicPropertyType.Enum,defaultValue:"left",items:[{value:"left",displayNameKey:"inspector.properties.containers.tabStripAlignment.left"},{value:"right",displayNameKey:"inspector.properties.containers.tabStripAlignment.right"},{value:"center",displayNameKey:"inspector.properties.containers.tabStripAlignment.center"}]},{name:"mode",structuredPath:"tabStrip.width",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.containers.tabWidth.label",defaultValue:"auto",items:[{value:Vr.Fixed,displayNameKey:"inspector.properties.containers.tabWidth.fixed"},{value:Vr.Auto,displayNameKey:"inspector.properties.containers.tabWidth.auto"},{value:Vr.Distribute,displayNameKey:"inspector.properties.containers.tabWidth.distribute"}]},{name:"value",structuredPath:"tabStrip.width",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.containers.tabWidth.input",defaultValue:100,min:1},{name:"heightMode",structuredPath:"tabStrip",type:sg.PublicPropertyType.Enum,items:[{value:Nr.Auto,displayNameKey:"inspector.properties.containers.tabHeight.auto"},{value:Nr.Fixed,displayNameKey:"inspector.properties.containers.tabHeight.fixed"}],displayNameKey:"inspector.properties.containers.tabHeight.label",defaultValue:"auto"},{name:"height",structuredPath:"tabStrip",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.containers.tabHeight.input",defaultValue:40},{name:"textAlignment",structuredPath:"tabStrip",displayNameKey:"inspector.properties.containers.tabTextAlignment.label",type:sg.PublicPropertyType.Enum,defaultValue:"center",items:[{value:"left",displayNameKey:"inspector.properties.containers.tabTextAlignment.left"},{value:"right",displayNameKey:"inspector.properties.containers.tabTextAlignment.right"},{value:"center",displayNameKey:"inspector.properties.containers.tabTextAlignment.center"}]},{inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,name:"textStyle",structuredPath:"tabStrip",displayNameKey:"inspector.properties.common.tabStripTextStyle",defaultValue:{fontSize:H.FontSizeList.Ratio1_0}},{name:"backgroundColor",structuredPath:"tabStrip",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.backgroundColor",resetType:H.ColorResetType.NoFill},{name:"padding",structuredPath:"tabStrip",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.containers.padding",defaultValue:{left:0,right:0,top:0,bottom:0}},{name:"color",structuredPath:"tabStrip.border",type:sg.PublicPropertyType.Color,defaultValue:"=Theme.Colors!Dark1",displayNameKey:"inspector.properties.containers.tabStripeBorderColor"},{name:"showSplitLine",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.containers.showSplitLine",defaultValue:!1},{name:"gap",structuredPath:"tabStrip",type:sg.PublicPropertyType.Integer,defaultValue:0,displayNameKey:"inspector.properties.containers.tabStripGap",min:0},{name:"showMenuIcon",structuredPath:"tabStrip",type:sg.PublicPropertyType.Boolean,defaultValue:!0,displayNameKey:"inspector.properties.containers.showMenuIcon"},vN.mobileAutoLayoutPolicy()]},{displayNameKey:"inspector.categories.pageTabSetting",properties:[{name:"contentRadius",structuredPath:"tabStrip",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.cornerRadius",editorType:"radius"},{name:"backgroundPadding",structuredPath:"tabStrip",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.padding"},{name:"optionBackgroundColor",structuredPath:"tabStrip",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.backgroundColor"},{name:"gradient",structuredPath:"tabStrip",type:sg.PrivatePropertyType.Gradient,displayNameKey:"inspector.properties.common.backgroundGradient"}]},{type:sg.CategoryType.Interaction,disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,hiddenActions:!0,contextMenuActions:!0},properties:[vN.filterScope(),{name:"autoSwitch",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.autoPlay",defaultValue:!1,structuredPath:"tabStrip"},{name:"switchInterval",type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.common.autoPlayInterval",defaultValue:30,structuredPath:"tabStrip",min:1}]},{displayNameKey:"inspector.categories.header",properties:[{name:"visible",structuredPath:"header",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showTitle",defaultValue:!1},{name:"text",structuredPath:"header",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.common.title",defaultValue:Ft("patterns.container.defaultTitle")},vN.headerHAlign(),vN.containerHeaderTextStyle()]},{displayNameKey:"inspector.categories.inactiveTabSetting",properties:[{name:"backColor",structuredPath:"tabStrip.inactiveTab",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.containers.inActiveTabBackColor"},{name:"color",structuredPath:"tabStrip.inactiveTab.textStyle",inheritFrom:"tabStrip.textStyle.color",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.containers.tabTextColor"}].concat(R()(VH(MH.Regular)))},{displayNameKey:"inspector.categories.hoverTabSetting",properties:[{name:"backgroundColor",structuredPath:"tabStrip.".concat(MH.Hover),type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.containers.activeTabBackColor"},{name:"color",structuredPath:"tabStrip.".concat(MH.Hover,".textStyle"),inheritFrom:"tabStrip.textStyle.color",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.containers.tabTextColor"}].concat(R()(VH(MH.Hover)))},{displayNameKey:"inspector.categories.activeTabSetting",properties:[{name:"backColor",structuredPath:"tabStrip.activeTab",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.containers.activeTabBackColor"},{name:"color",structuredPath:"tabStrip.activeTab.textStyle",inheritFrom:"tabStrip.textStyle.color",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.containers.tabTextColor"}].concat(R()(VH(MH.Selected)),[{name:"color",structuredPath:"tabStrip.activeTab.indicator",type:sg.PublicPropertyType.Color,defaultValue:"=Theme.Colors!Dark1",displayNameKey:"inspector.properties.containers.activeTabIndicatorColor"}])},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:[],disable:{padding:!0}}]},actions:[{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},OH={name:H.ScenarioType.Container,displayNameKey:"components.container",id:H.ScenarioType.Container,iconCss:"dd-png-container",capabilities:{options:{visual:[{properties:[{name:"height",type:sg.PublicPropertyType.Hidden,defaultValue:40,structuredPath:"header"},{name:"position",type:sg.PublicPropertyType.Hidden,defaultValue:"top",structuredPath:"header"},{name:"mobile",type:sg.PublicPropertyType.Hidden,defaultValue:{headerHeight:40,tabStripHeight:40}},{name:"visible",structuredPath:"tabStrip",type:sg.PublicPropertyType.Hidden,defaultValue:!1},{name:"height",structuredPath:"tabStrip",type:sg.PublicPropertyType.Hidden,defaultValue:40},{name:"position",structuredPath:"tabStrip",type:sg.PublicPropertyType.Hidden,defaultValue:"top"},{name:"autoSwitch",structuredPath:"tabStrip",type:sg.PublicPropertyType.Hidden,defaultValue:!1},{name:"switchInterval",structuredPath:"tabStrip",type:sg.PublicPropertyType.Hidden,defaultValue:30},{name:"textStyle",structuredPath:"tabStrip",type:sg.PublicPropertyType.TextStyle,inheritFrom:mg.InheritProperty.TextStyle,defaultValue:{fontSize:H.FontSizeList.Ratio1_0},hidden:!0},{name:"visible",type:sg.PublicPropertyType.Hidden,defaultValue:!0},{name:"color",structuredPath:"tabStrip.border",type:sg.PublicPropertyType.Hidden,defaultValue:"=Theme.Colors!Dark1",hidden:!0},{name:"mode",structuredPath:"tabStrip.width",type:sg.PublicPropertyType.Hidden,defaultValue:"auto",items:[{value:Vr.Fixed,displayNameKey:"inspector.properties.containers.tabWidth.fixed"},{value:Vr.Auto,displayNameKey:"inspector.properties.containers.tabWidth.auto"},{value:Vr.Distribute,displayNameKey:"inspector.properties.containers.tabWidth.distribute"}]}]},{type:sg.CategoryType.Interaction,disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,hiddenActions:!0,contextMenuActions:!0},properties:[vN.filterScope()]},{displayNameKey:"inspector.categories.header",properties:[{name:"visible",structuredPath:"header",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.common.showTitle",defaultValue:!0},{name:"text",structuredPath:"header",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.common.title",defaultValue:Ft("patterns.container.defaultTitle")},vN.headerHAlign(),{name:"showSplitLine",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.containers.showSplitLine",defaultValue:!0},vN.containerHeaderTextStyle()]},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:[vN.mobileAutoLayoutPolicy()],disable:{padding:!0}}]},actions:[{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},HH={name:H.ScenarioType.Picture,displayNameKey:"components.image",id:H.ScenarioType.Picture,iconCss:"dd-png-picture",capabilities:{dataBinding:{dataRoles:[{name:"imageSource",displayNameKey:"dataBindingPanel.imageSource",kind:"attribute",itemOptions:[{name:"renderSetting",displayNameKey:"dataBindingPanel.renderSetting",type:eg.DataRoleItemOptionType.RenderSetting,defaultValue:H.ImageRenderSetting.ImageURL,noText:!0}]}],dataViewMappings:[{plain:{required:[{imageSource:{min:1}}]}}],conditions:[{imageSource:{max:1}}]},options:{visual:[{type:sg.CategoryType.Interaction,disable:{contextMenuActions:!0}},{displayNameKey:"inspector.categories.content",properties:[{name:"id",structuredPath:"imageSetting",type:sg.PublicPropertyType.Image,displayNameKey:"inspector.properties.image.source"},{name:"repeat",structuredPath:"imageSetting",type:sg.PublicPropertyType.Enum,items:[{value:"no-repeat",displayNameKey:"inspector.properties.common.imageRepeat.none"},{value:"repeat",displayNameKey:"inspector.properties.common.imageRepeat.repeat"},{value:"repeat-x",displayNameKey:"inspector.properties.common.imageRepeat.x"},{value:"repeat-y",displayNameKey:"inspector.properties.common.imageRepeat.y"},{value:"space",displayNameKey:"inspector.properties.common.imageRepeat.space"},{value:"round",displayNameKey:"inspector.properties.common.imageRepeat.round"}],defaultValue:gi,displayNameKey:"inspector.properties.common.backgroundImage.repeat"},{name:"displayMode",structuredPath:"imageSetting",type:sg.PublicPropertyType.Enum,items:[{value:"auto",displayNameKey:"inspector.properties.common.imageSize.original"},{value:"contain",displayNameKey:"inspector.properties.common.imageSize.contain"},{value:"cover",displayNameKey:"inspector.properties.common.imageSize.cover"},{value:"100% 100%",displayNameKey:"inspector.properties.common.imageSize.stretch"}],defaultValue:mi,displayNameKey:"inspector.properties.common.backgroundImage.size"},{name:"vAlign",structuredPath:"imageSetting",type:sg.PublicPropertyType.Enum,items:[{value:"center",displayNameKey:"inspector.properties.common.vAlign.middle"},{value:"top",displayNameKey:"inspector.properties.common.vAlign.top"},{value:"bottom",displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:vi,displayNameKey:"inspector.properties.common.backgroundImage.vAlign"},{name:"hAlign",structuredPath:"imageSetting",type:sg.PublicPropertyType.Enum,items:[{value:"center",displayNameKey:"inspector.properties.common.hAlign.center"},{value:"left",displayNameKey:"inspector.properties.common.hAlign.left"},{value:"right",displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:fi,displayNameKey:"inspector.properties.common.backgroundImage.hAlign"},{name:"contentTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle,hidden:!0}]},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,disable:{backgroundImage:!0}}]},actions:[{type:pg.ActionType.Extension,name:"backgroundImageID",path:"imageSetting.id",extensionType:pg.ExtensionType.ImagePicker,displayNameKey:"actionBar.edit",iconCss:"icon-edit",horizontal:!0},{type:pg.ActionType.Annotation},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},BH={name:H.ScenarioType.RichEditor,displayNameKey:"components.richText",id:H.ScenarioType.RichEditor,iconCss:"dd-png-rich-editor",capabilities:{options:{visual:[{type:sg.CategoryType.Interaction,disable:{dataSetAutoRefresh:!0,jumpTo:!0,contextMenuActions:!0},properties:[{name:"hyperlinkUnderline",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.richText.hyperlinkUnderline",items:[{value:H.HyperlinkStyle.Show,displayNameKey:"inspector.properties.richText.hyperlinkStyle.show"},{value:H.HyperlinkStyle.Hide,displayNameKey:"inspector.properties.richText.hyperlinkStyle.hide"},{value:H.HyperlinkStyle.ShowOnHover,displayNameKey:"inspector.properties.richText.hyperlinkStyle.showOnHover"}],defaultValue:H.HyperlinkStyle.Show}]},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.blankData",properties:[{name:"emptyItemsString",type:sg.PublicPropertyType.Text,displayNameKey:"inspector.properties.common.content",inheritFrom:mg.InheritProperty.EmmptyItemsString},{name:"emptyItemsFont",type:sg.PublicPropertyType.TextStyle,displayNameKey:"inspector.properties.common.font.title",inheritFrom:"contentTextStyle"}]},{type:sg.CategoryType.NoDataAppearance,displayNameKey:"inspector.categories.nullDataContent",disable:{inline:!0}},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:[{name:"contentTextStyle",displayNameKey:"inspector.properties.common.contentTextStyle",inheritFrom:mg.InheritProperty.TextStyle,type:sg.PublicPropertyType.TextStyle},{name:"contentVerticalMiddle",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.richText.contentVerticalMiddle",defaultValue:!1},{name:"scrollbarThumbBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarThumbBackColor",inheritFrom:mg.InheritProperty.ScrollbarThumbColor,hidden:!0},{name:"scrollbarTrackBackColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.scrollbarTrackBackColor",inheritFrom:mg.InheritProperty.ScrollbarTrackColor,hidden:!0}],disable:{margin:!0}}]},actions:[{type:pg.ActionType.Edit},{type:pg.ActionType.Annotation},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},UH={name:H.ChartType.WebContent,displayNameKey:"components.webContent",id:H.ChartType.WebContent,iconCss:"dd-png-web-content",capabilities:{dataBinding:{dataRoles:[{name:"values",displayNameKey:"dataBindingPanel.values",kind:"value",options:[{displayNameKey:"inspector.properties.charts.axis.dataFormat",iconCss:"icon-format-data",type:"format",name:"valueFormat"}]},{name:"dimensions",displayNameKey:"dataBindingPanel.dimensions",kind:"grouping"},{name:"series",displayNameKey:"dataBindingPanel.legend",kind:"grouping"}],dataViewMappings:[{plain:{required:[{values:{min:1}}]}}]},options:{visual:[{type:sg.CategoryType.Interaction,disable:{jumpTo:!0,dataSetAutoRefresh:!0,contextMenuActions:!0}},{type:sg.CategoryType.Title},{displayNameKey:"inspector.categories.webContent",properties:[{name:"customSetting",type:sg.PublicPropertyType.LongText,displayNameKey:"inspector.properties.webContent.customSetting"},{name:"enableToken",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.webContent.enableToken",defaultValue:!1},{name:"src",type:sg.PublicPropertyType.Hidden,defaultValue:""},{name:"srcdoc",type:sg.PublicPropertyType.Hidden,defaultValue:""},{name:"template",type:sg.PublicPropertyType.Hidden,defaultValue:""},{name:"contentTextStyle",type:sg.PublicPropertyType.TextStyle,inheritFrom:mg.InheritProperty.TextStyle,hidden:!0}]},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance}]},actions:[{type:pg.ActionType.ClearSelection},{type:pg.ActionType.EditWebContent},{type:pg.ActionType.Focus},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export,disableExcel:!0},{type:pg.ActionType.Filter},{type:pg.ActionType.Rank},{type:pg.ActionType.ConvertVisual,disableChangeChartType:!0},{type:pg.ActionType.ShowData,rule:{out:[{mode:"post",execute:[{source:"dimensions",target:"category",cmd:"all"}]}]}},{type:pg.ActionType.AnalysisPath},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},zH={name:H.ScenarioType.EmbeddedDashboard,displayNameKey:"components.embeddedDashboard",id:H.ScenarioType.EmbeddedDashboard,iconCss:"dd-png-embedded-dashboard",capabilities:{options:{visual:[DN.hiddenCategory,{type:sg.CategoryType.Interaction,disable:{jumpTo:!0,contextMenuActions:!0}},{type:sg.CategoryType.Title,defaultValue:{show:!1}},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,defaultValue:{backgroundColor:"transparent",padding:{left:0,top:0,right:0,bottom:0},margin:{left:0,top:0,right:0,bottom:0},border:{type:"buildin-none"},shadow:{type:"none"}}}]},actions:[{type:pg.ActionType.Focus},{type:pg.ActionType.ContentSetting},{type:pg.ActionType.Annotation},{type:pg.ActionType.Export,disableExcel:!0,disableSVG:!0},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},KH={name:H.ScenarioType.EmbeddedReport,displayNameKey:"components.embeddedReport",id:H.ScenarioType.EmbeddedReport,iconCss:"dd-png-embedded-report",capabilities:{options:{visual:[DN.hiddenCategory,{type:sg.CategoryType.Interaction,disable:{jumpTo:!0,contextMenuActions:!0,crossFilter:!0}},{type:sg.CategoryType.Title,defaultValue:{show:!1}},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,defaultValue:{backgroundColor:"transparent",padding:{left:0,top:0,right:0,bottom:0},margin:{left:0,top:0,right:0,bottom:0},border:{type:"buildin-none"},shadow:{type:"none"}}}]},actions:[{type:pg.ActionType.Focus},{type:pg.ActionType.ContentSetting},{type:pg.ActionType.Annotation},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},jH={name:H.ScenarioType.Group,id:H.ScenarioType.Group,capabilities:{options:{visual:[{type:sg.CategoryType.Layout,displayNameKey:"inspector.categories.groupSetting",properties:[{name:"scenarioName",type:sg.PrivatePropertyType.ScenarioName,displayNameKey:"inspector.properties.common.scenarioName",_ancestorPath:"options"}]},{type:sg.CategoryType.Appearance,hidden:!0,defaultValue:{backgroundColor:"transparent",padding:{left:0,top:0,right:0,bottom:0},margin:{left:0,top:0,right:0,bottom:0},border:{type:"buildin-none"},shadow:{type:"none"}}}]},actions:[{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},WH={dataRoles:{kind:"collection",displayNameKey:"dialogs.pivotSetting.title",groups:["multi-dimensions"],collapsible:!1,editable:!1,onlyOne:!0,hidden:!0},templates:[{name:"multi-dimensions",displayNameKey:"dataBindingPanel.multiDimensions",dataRoles:[{name:"columns",displayNameKey:"dataBindingPanel.dimensions",kind:"grouping"}],dataViewMappings:[{plain:{required:[{columns:{min:1}}]}}]},{name:"parent-child",displayNameKey:"dataBindingPanel.parentChild",options:[{name:"parameters",type:"_slicerSetting",defaultValue:{editRootId:!0}}],dataRoles:[{name:"pid",displayNameKey:"dataBindingPanel.pid",kind:"grouping",_noHierarchy:!0},{name:"id",displayNameKey:"dataBindingPanel.id",kind:"grouping",_noHierarchy:!0},{name:"display",displayNameKey:"dataBindingPanel.display",kind:"attribute"}],dataViewMappings:[{plain:{required:[{pid:{min:1},id:{min:1}}]}}],conditions:[{pid:{max:1},id:{max:1},display:{max:1}}]},{name:"hierarchy",displayNameKey:"dataBindingPanel.hierarchy",options:[{name:"parameters",type:"_slicerSetting",defaultValue:{editSeparator:!0}}],dataRoles:[{name:"hierarchy",displayNameKey:"dataBindingPanel.hierarchy",kind:"grouping",_noHierarchy:!0},{name:"display",displayNameKey:"dataBindingPanel.display",kind:"attribute"}],dataViewMappings:[{plain:{required:[{hierarchy:{min:1}}]}}],conditions:[{hierarchy:{max:1},display:{max:1}}]}]},GH={name:H.SlicerType.ComboBoxSlicer,displayNameKey:"components.comboSlicer",id:H.SlicerType.ComboBoxSlicer,iconCss:"dd-png-combobox-slicer",capabilities:{dataBinding:{dataRoles:[WH.dataRoles],templates:WH.templates},options:{common:{size:{height:100},filter:!0},visual:[{properties:[{name:"sortOrder",type:sg.PublicPropertyType.Hidden,defaultValue:Un},{name:"showSearchbox",type:sg.PublicPropertyType.Hidden,defaultValue:!1}]},{type:sg.CategoryType.Interaction,disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,contextMenuActions:!0},properties:[{name:"selectionMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.selectionMode.title",items:[{value:Yn,displayNameKey:"inspector.properties.slicers.selectionMode.single"},{value:qn,displayNameKey:"inspector.properties.slicers.selectionMode.multiple"}],defaultValue:qn},KN.setDataSouceType(),KN.setCustomDataSource(),CN.setDefaultValue()]},{type:sg.CategoryType.Title,properties:[CN.titlePosition()],disable:{alignment:!0}},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[{name:"placeholder",type:sg.PrivatePropertyType.LanguageResource,displayNameKey:"inspector.properties.slicers.placeholder",defaultValue:Ft("slicers.notSelected")},CN.showNullItems(),UN.nullItemsString(),CN.showEmptyStringItems(),UN.emptyItemsString(),{name:"allowSearch",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.allowSearch",defaultValue:!0},{name:"searchPlaceholder",type:sg.PrivatePropertyType.LanguageResource,displayNameKey:"inspector.properties.slicers.searchPlaceholder",defaultValue:Ft("slicers.filterPlaceholder")}]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout,properties:R()(CN.internalBorderSetting)},{type:sg.CategoryType.Appearance,properties:[CN.contentTextStyle()].concat(R()(CN.scrollbarColorSetting))}]},actions:[{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.Edit},{type:pg.ActionType.SlicerSort},{type:pg.ActionType.SlicerSelectParameter},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},YH={name:H.SlicerType.DataRangeSlicer,displayNameKey:"components.dataRangeSlicer",id:H.SlicerType.DataRangeSlicer,iconCss:"dd-png-data-range-slicer",capabilities:{dataBinding:{dataRoles:[{name:"columns",displayNameKey:"dataBindingPanel.columns",kind:"grouping",acceptedTypes:["number"]}],dataViewMappings:[{plain:{required:[{columns:{min:1}}]}}],conditions:[{columns:{max:1}}]},options:{common:{size:{height:100},filter:!0,_disableInteraction:!0},visual:[{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[]},{displayNameKey:"inspector.categories.labelSlicer.slicerStyle",properties:[{name:"slicerStyle",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.style",items:[{value:"Input Box",displayNameKey:"inspector.properties.slicers.dataRangeLayout.input"},{value:"Slider",displayNameKey:"inspector.properties.slicers.dataRangeLayout.slider"},{value:"Input Box + Slider",displayNameKey:"inspector.properties.slicers.dataRangeLayout.both"}],defaultValue:"Slider"}]},{type:sg.CategoryType.Interaction,properties:[KN.setDataSouceType(),KN.setCustomDataSource()],disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,contextMenuActions:!0}},{type:sg.CategoryType.Title,properties:[CN.titlePosition()],disable:{alignment:!0}},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:[CN.contentTextStyle()]}]},actions:[{type:pg.ActionType.Edit},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},qH={name:H.SlicerType.DateRangeSlicer,displayNameKey:"components.dateRangeSlicer",id:H.SlicerType.DateRangeSlicer,iconCss:"dd-png-date-range",capabilities:{dataBinding:{dataRoles:[{name:"columns",displayNameKey:"dataBindingPanel.columns",kind:"grouping",_noHierarchy:!0,acceptedTypes:["date","datetime"]}],dataViewMappings:[{plain:{required:[{columns:{min:1}}]}}],conditions:[{columns:{max:1}}]},options:{common:{size:{height:100},filter:!0,_disableInteraction:!0},visual:[{displayNameKey:"inspector.categories.datePickerSetting",properties:[{name:"dateMode",type:sg.PrivatePropertyType.DateMode,displayNameKey:"slicers.dateRangeSlicer.dateMode.title",defaultValue:H.DateMode.Date,_pristine:!0},{name:"rangeMode",type:sg.PublicPropertyType.Enum,displayNameKey:"slicers.dateRangeSlicer.rangeMode.title",items:[{value:H.RangeMode.Basic,displayNameKey:"slicers.dateRangeSlicer.rangeMode.basic"},{value:H.RangeMode.StartEnd,displayNameKey:"slicers.dateRangeSlicer.rangeMode.startEnd"}],defaultValue:H.RangeMode.Basic,_pristine:!0},{name:"defaultValue",type:sg.PrivatePropertyType.DateRangePicker,displayNameKey:"slicers.dateRangeSlicer.defaultValue.title"},{name:"dataFormat",type:sg.PrivatePropertyType.CustomFormat,displayNameKey:"slicers.dateRangeSlicer.dataFormat.title"},{name:"datePlaceholder",type:sg.PublicPropertyType.Text,displayNameKey:"slicers.dateRangeSlicer.placeholder.dateTitle",defaultValue:Ft("slicers.dateRangeSlicer.placeholder.dateDefault")},{name:"startPlaceholder",type:sg.PublicPropertyType.Text,displayNameKey:"slicers.dateRangeSlicer.placeholder.startTitle",defaultValue:Ft("slicers.dateRangeSlicer.placeholder.startDefault")},{name:"endPlaceholder",type:sg.PublicPropertyType.Text,displayNameKey:"slicers.dateRangeSlicer.placeholder.endTitle",defaultValue:Ft("slicers.dateRangeSlicer.placeholder.endDefault")},{name:"allowClear",type:sg.PublicPropertyType.Boolean,displayNameKey:"slicers.dateRangeSlicer.allowClear",defaultValue:!0},{name:"showQuickRanges",type:sg.PublicPropertyType.Boolean,displayNameKey:"slicers.dateRangeSlicer.quickRanges.show",defaultValue:!0},{name:"quickRanges",type:sg.PrivatePropertyType.QuickRangeCollection,displayNameKey:"slicers.dateRangeSlicer.quickRanges.title",defaultValue:[]}]},{type:sg.CategoryType.Interaction,disable:{crossFilter:!0,jumpTo:!0,pinAnnotation:!0,contextMenuActions:!0},defaultValue:{hiddenActions:[pg.ActionType.SlicerSelectParameter]}},{type:sg.CategoryType.Title,properties:[CN.titlePosition()],disable:{alignment:!0}},{type:sg.CategoryType.Layout,properties:R()(CN.internalBorderSetting)},{type:sg.CategoryType.Appearance,properties:[CN.contentTextStyle()]}]},actions:[{type:pg.ActionType.SlicerSelectParameter},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt};(EH=NH=NH||{}).Regular="regular",EH.Hover="hover",EH.Selected="selected";function JH(e){var t,a,n=0<arguments.length&&void 0!==e?e:NH.Regular,i=[{name:"borderRadius",structuredPath:n,type:sg.PublicPropertyType.Position,inheritFrom:n===NH.Regular?"contentRadius":"regular.borderRadius",displayNameKey:"inspector.properties.common.cornerRadius",editorType:"radius"},{name:"backgroundColor",structuredPath:n,type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.backgroundColor",defaultValue:n===NH.Hover?"rgba(0, 0, 0, 0.2)":void 0},{name:"gradient",structuredPath:n,type:sg.PrivatePropertyType.Gradient,displayNameKey:"inspector.properties.common.backgroundGradient"},{name:"image",structuredPath:n,inheritFrom:n===NH.Regular?void 0:"regular.image",type:sg.PublicPropertyType.Image,displayNameKey:"inspector.properties.common.backgroundImage.src"},{name:"font",structuredPath:n,type:sg.PublicPropertyType.TextStyle,inheritFrom:n===NH.Regular?"contentTextStyle":"regular.font",defaultValue:n===NH.Selected?{color:"=Theme.Colors!Hyperlink",fontSize:""}:{},displayNameKey:"inspector.properties.common.font.title"},{name:"shadow",structuredPath:n,type:sg.PrivatePropertyType.ShadowInterger,inheritFrom:n===NH.Regular?void 0:"regular.shadow",displayNameKey:"inspector.properties.common.shadow.label",defaultValue:n===NH.Regular?{type:"none",size:0,color:"#cccccc"}:{}},{name:"showBorder",structuredPath:n,type:sg.PublicPropertyType.Boolean,inheritFrom:n===NH.Regular?void 0:"regular.showBorder",displayNameKey:"inspector.properties.slicers.labelSlicer.showBorder"},{name:"thickness",structuredPath:n,type:sg.PublicPropertyType.Integer,inheritFrom:n===NH.Regular?void 0:"regular.thickness",displayNameKey:"inspector.properties.slicers.labelSlicer.borderThickness",min:1},{name:"borderColor",structuredPath:n,type:sg.PublicPropertyType.Color,inheritFrom:"".concat(n,".font.color"),displayNameKey:"inspector.properties.slicers.labelSlicer.borderColor"}],r={name:"showMarkingLine",structuredPath:n,type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.labelSlicer.showMarkingLine",defaultValue:!1},o=n===NH.Selected?"hover.markingLine":void 0;return[].concat(i,[r],R()((t="".concat(n,".markingLine"),a=o,[{name:"position",structuredPath:t,type:sg.PublicPropertyType.Enum,inheritFrom:a?"".concat(a,".position"):void 0,defaultValue:a?void 0:"bottom",displayNameKey:"inspector.properties.common.position",items:[{value:"top",displayNameKey:"top"},{value:"right",displayNameKey:"right"},{value:"bottom",displayNameKey:"bottom"},{value:"left",displayNameKey:"left"}]},{name:"length",structuredPath:t,type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.markingLineLength",inheritFrom:a?"".concat(a,".length"):void 0,defaultValue:a?void 0:100,min:0},{name:"thickness",structuredPath:t,type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.markingLineThickness",inheritFrom:a?"".concat(a,".thickness"):void 0,defaultValue:a?void 0:5,min:0},{name:"offset",structuredPath:t,inheritFrom:a?"".concat(a,".offset"):void 0,type:sg.PublicPropertyType.Integer,displayNameKey:"inspector.properties.common.offset",defaultValue:0},{name:"color",structuredPath:t,inheritFrom:a?"".concat(a,".color"):void 0,type:sg.PublicPropertyType.Color,defaultValue:a?void 0:"=Theme.Colors!Hyperlink",displayNameKey:"inspector.properties.common.color"}])))}var XH,QH,ZH={name:H.SlicerType.LabelSlicer,displayNameKey:"components.labelSlicer",id:H.SlicerType.LabelSlicer,iconCss:"dd-png-label-slicer",capabilities:{dataBinding:{dataRoles:[{name:"columns",displayNameKey:"dataBindingPanel.columns",kind:"grouping",_noHierarchy:!0}],dataViewMappings:[{plain:{required:[{columns:{min:1}}]}}],conditions:[{columns:{max:1}}]},options:{common:{size:{height:100},filter:!0},visual:[{properties:[{name:"sortOrder",type:sg.PublicPropertyType.Hidden,defaultValue:Un},{name:"showSearchbox",type:sg.PublicPropertyType.Hidden,defaultValue:!1}]},{displayNameKey:"inspector.categories.labelSlicer.slicerStyle",properties:[{name:"slicerStyle",type:sg.PrivatePropertyType.SlicerStyle,displayNameKey:"inspector.properties.common.style",defaultValue:H.LabelSlicerType.Label},{name:"orientation",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.orientation",items:[{value:"Horizontal",displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:"Vertical",displayNameKey:"inspector.properties.common.orientation.vertical"}],defaultValue:"Horizontal"},{name:"isWrap",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.wrapItems",defaultValue:!1},{name:"slicerItemsAlignment",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.alignment",items:[{value:1,displayNameKey:"inspector.properties.common.hAlign.left"},{value:2,displayNameKey:"inspector.properties.common.hAlign.center"},{value:3,displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:1},{name:"slicerItemsVerticalAlignment",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.alignment",items:[{value:1,displayNameKey:"inspector.properties.common.vAlign.top"},{value:2,displayNameKey:"inspector.properties.common.vAlign.middle"},{value:3,displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:Da},{name:"textAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.labelSlicer.textAlign",items:[{value:Da,displayNameKey:"inspector.properties.common.hAlign.left"},{value:ka,displayNameKey:"inspector.properties.common.hAlign.center"},{value:wa,displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:Da},{name:"textVerticalAlign",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.labelSlicer.textVerticalAlign",items:[{value:Da,displayNameKey:"inspector.properties.common.vAlign.top"},{value:ka,displayNameKey:"inspector.properties.common.vAlign.middle"},{value:wa,displayNameKey:"inspector.properties.common.vAlign.bottom"}],defaultValue:ka},{name:"widthAdaptive",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.widthAdaptive",defaultValue:!0},{name:"optionWidth",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.itemOptionWidth",defaultValue:80,min:0},{name:"optionHeight",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.itemOptionHeight",defaultValue:26.667,min:0},{name:"optionPadding",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.slicers.labelSlicer.itemOptionPadding",defaultValue:{left:10,top:5,right:10,bottom:5}},{name:"optionMargin",type:sg.PublicPropertyType.Float,displayNameKey:"inspector.properties.slicers.labelSlicer.itemOptionMargin",defaultValue:0,min:0},{name:"collapseBorder",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.labelSlicer.collapseBorder",defaultValye:!1}]},{displayNameKey:"inspector.categories.labelSlicer.groupStyle",properties:[{name:"contentRadius",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.cornerRadius",editorType:"radius"},{name:"backgroundPadding",type:sg.PublicPropertyType.Position,displayNameKey:"inspector.properties.common.padding"},{name:"optionBackgroundColor",type:sg.PublicPropertyType.Color,displayNameKey:"inspector.properties.common.backgroundColor"},{name:"gradient",type:sg.PrivatePropertyType.Gradient,displayNameKey:"inspector.properties.common.backgroundGradient"},{name:"firstImage",type:sg.PublicPropertyType.Image,displayNameKey:"inspector.properties.slicers.labelSlicer.firstItemImage"},{name:"lastImage",type:sg.PublicPropertyType.Image,displayNameKey:"inspector.properties.slicers.labelSlicer.lastItemImage"}]},{type:sg.CategoryType.Interaction,properties:[{name:"selectionMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.selectionMode.title",items:[{value:Yn,displayNameKey:"inspector.properties.slicers.selectionMode.single"},{value:qn,displayNameKey:"inspector.properties.slicers.selectionMode.multiple"}],defaultValue:qn},KN.setDataSouceType(),KN.setCustomDataSource(),CN.setDefaultValue()],disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,contextMenuActions:!0}},{type:sg.CategoryType.Title,properties:[CN.titlePosition()]},{displayNameKey:"inspector.categories.labelSlicer.regularStyle",properties:R()(JH(NH.Regular))},{displayNameKey:"inspector.categories.labelSlicer.hoverStyle",properties:R()(JH(NH.Hover))},{displayNameKey:"inspector.categories.labelSlicer.selectedStyle",properties:R()(JH(NH.Selected))},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[CN.showNullItems(),UN.nullItemsString(),CN.showEmptyStringItems(),UN.emptyItemsString(),{name:"allowSearch",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.allowSearch",defaultValue:!0},{name:"searchPlaceholder",type:sg.PrivatePropertyType.LanguageResource,displayNameKey:"inspector.properties.slicers.searchPlaceholder",defaultValue:Ft("slicers.filterPlaceholder")}]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:[CN.contentTextStyle()].concat(R()(CN.scrollbarColorSetting))}]},actions:[{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.Edit},{type:pg.ActionType.SlicerSelectParameter},{type:pg.ActionType.SlicerSort},{type:pg.ActionType.SlicerSearch},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},$H={name:H.SlicerType.RelativeDateSlicer,displayNameKey:"components.relativeDateSlicer",id:H.SlicerType.RelativeDateSlicer,iconCss:"dd-png-relative-date-slicer",capabilities:{dataBinding:{dataRoles:[{name:"columns",displayNameKey:"dataBindingPanel.columns",kind:"grouping",_noHierarchy:!0,acceptedTypes:["date","datetime"]}],dataViewMappings:[{plain:{required:[{columns:{min:1}}]}}],conditions:[{columns:{max:1}}]},options:{common:{size:{height:100},filter:!0,_disableInteraction:!0},visual:[{properties:[{name:"items",type:sg.PublicPropertyType.Hidden}]},{displayNameKey:"inspector.categories.labelSlicer.slicerStyle",properties:[{name:"slicerStyle",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.style",items:[{value:"Label",displayNameKey:"inspector.properties.slicers.lablesLayout.label"},{value:"List",displayNameKey:"inspector.properties.slicers.lablesLayout.list"},{value:"Button Group",displayNameKey:"inspector.properties.slicers.lablesLayout.buttonGroup"}],defaultValue:"Label"},{name:"orientation",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.orientation",items:[{value:"Horizontal",displayNameKey:"inspector.properties.common.orientation.horizontal"},{value:"Vertical",displayNameKey:"inspector.properties.common.orientation.vertical"}],defaultValue:"Horizontal"},{name:"isWrap",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.wrapItems",defaultValue:!1},{name:"slicerItemsAlignment",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.common.alignment",items:[{value:1,displayNameKey:"inspector.properties.common.hAlign.left"},{value:2,displayNameKey:"inspector.properties.common.hAlign.center"},{value:3,displayNameKey:"inspector.properties.common.hAlign.right"}],defaultValue:1},{name:"widthAdaptive",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.widthAdaptive",defaultValue:!0}]},{type:sg.CategoryType.Interaction,disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,contextMenuActions:!0}},{type:sg.CategoryType.Title,properties:[CN.titlePosition()],disable:{alignment:!0}},{type:sg.CategoryType.Layout},{type:sg.CategoryType.Appearance,properties:[CN.contentTextStyle()].concat(R()(CN.scrollbarColorSetting))}]},actions:[{type:pg.ActionType.Edit},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}],analysis:[{type:pg.ActionType.RelativeDate}]},i18nResources:Gt},eB={name:H.SlicerType.TreeSlicer,displayNameKey:"components.treeSlicer",id:H.SlicerType.TreeSlicer,iconCss:"dd-png-tree-slicer",capabilities:{dataBinding:{dataRoles:[WH.dataRoles],templates:WH.templates},options:{common:{size:{width:200},filter:!0},visual:[{properties:[{name:"sortOrder",type:sg.PublicPropertyType.Hidden,defaultValue:Un},{name:"showSearchbox",type:sg.PublicPropertyType.Hidden,defaultValue:!1},{name:"titlePosition",type:sg.PublicPropertyType.Hidden,defaultValue:"Top"}]},{type:sg.CategoryType.Interaction,disable:{crossFilter:!0,jumpTo:!0,dataSetAutoRefresh:!0,pinAnnotation:!0,contextMenuActions:!0},properties:[{name:"selectionMode",type:sg.PublicPropertyType.Enum,displayNameKey:"inspector.properties.slicers.selectionMode.title",items:[{value:Yn,displayNameKey:"inspector.properties.slicers.selectionMode.single"},{value:qn,displayNameKey:"inspector.properties.slicers.selectionMode.multiple"}],defaultValue:qn},KN.setDataSouceType(),KN.setCustomDataSource(),CN.setDefaultValue()]},{type:sg.CategoryType.Title},{type:sg.CategoryType.Data,displayNameKey:"inspector.categories.data",properties:[CN.showNullItems(),UN.nullItemsString(),CN.showEmptyStringItems(),UN.emptyItemsString(),{name:"allowSearch",type:sg.PublicPropertyType.Boolean,displayNameKey:"inspector.properties.slicers.allowSearch",defaultValue:!0},{name:"searchPlaceholder",type:sg.PrivatePropertyType.LanguageResource,displayNameKey:"inspector.properties.slicers.searchPlaceholder",defaultValue:Ft("slicers.filterPlaceholder")}]},{type:sg.CategoryType.NoDataAppearance},{type:sg.CategoryType.Layout,properties:R()(CN.internalBorderSetting)},{type:sg.CategoryType.Appearance,properties:[CN.contentTextStyle()].concat(R()(CN.scrollbarColorSetting))}]},actions:[{type:pg.ActionType.Filter},{type:pg.ActionType.Sort},{type:pg.ActionType.ModelParameters},{type:pg.ActionType.Edit},{type:pg.ActionType.SlicerSort},{type:pg.ActionType.SlicerSelectParameter},{type:pg.ActionType.ShareScenario},{type:pg.ActionType.OpenFullDashboard}]},i18nResources:Gt},tB=[hE,sF,gE,fE,bE,oF,CE,TE,AE,uF,_E,NE,kE,LE,EE,OE,BE,zE,KE,jE,WE,GE,YE,qE,JE,nF,XE,ZE,$E,eF,RH],aB=[ZH,eB,GH,YH,qH,$H],nB=[yF,gF,IH],iB=[PH,iF],rB=[OH,FH],oB=[BH,HH].concat(Oo.showWebContent?UH:[]),sB=[zH,KH],lB=[CF],uB=[yH],cB=[jH],dB=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};(QH=XH=XH||{}).Loaded="loaded",QH.Error="error",QH.Finished="finished";var pB=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this)).topic=new f.a.EventEmitter,a.definitions={},a.dummyVisual=new nH,a.visualDebugger=new rH,a.buildInCharts=[],a.buildInTables=[],a.buildInMaps=[],a.buildInSlicers=[],a.buildInSpreadCharts=[],a.buildInMergedCharts=[],a.buildInContainers=[],a.buildInComponents=[],a.buildInEmbeddedComponents=[],a.supportChangeChartTypeMenuList=[],a.hasForceCreateAllBuildInDef=!1,a.allBuildInDefClazz={},a.availableRecommendList=[],a.topic.setMaxListeners(0),a.visualResource=e.get("VisualDefinition"),a.globalConfig=t,tB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Chart,e)}),aB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Slicer,e)}),nB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Table,e)}),iB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Map,e)}),rB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Container,e)}),oB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Component,e)}),lB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.SpreadChart,e)}),uB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.MergedChart,e)}),sB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.EmbeddedComponents,e)}),cB.forEach(function(e){return a.makeBuildInDefClazz(H.CategoryType.Hidden,e)}),a.definitions[a.visualDebugger.id]=a.visualDebugger,a}return D()(i,[{key:"destroySelf",value:function(){this.topic.removeAllListeners()}},{key:"addToSupportChangeChartTypeMenuList",value:function(t,e){var a=1<arguments.length&&void 0!==e&&e;a&&t.visualType===H.CustomVisualType.Slicer||(this.supportChangeChartTypeMenuList.find(function(e){return e.id===t.id})||this.supportChangeChartTypeMenuList.push(t),a&&(_F.addSupportedChangeChartTypeList(Object.assign(Object.assign({},t),{isSpreadChart:!0,id:_F.makeDefId(t.id)})),TH.addSupportedChangeChartTypeList(Object.assign(Object.assign({},t),{isMergedChart:!0,id:TH.makeDefId(t.id)}))))}},{key:"makeBuildInDefClazz",value:function(a,e){var n=this;switch(a){case H.CategoryType.SpreadChart:bF.forEach(function(e){var t=_F.makeDefId(e.id);n.allBuildInDefClazz[t]={category:a,def:e}});break;case H.CategoryType.MergedChart:hH.forEach(function(e){var t=TH.makeDefId(e.id);n.allBuildInDefClazz[t]={category:a,def:e}});break;default:this.allBuildInDefClazz[e.id]={category:a,def:e}}}},{key:"forceCreateBuildInDef",value:function(){var t=this;if(!this.hasForceCreateAllBuildInDef){var e=this.supportChangeChartTypeMenuList,a=R()(_F.getSupportedChangeChartTypeList()),n=R()(TH.getSupportedChangeChartTypeList());this.supportChangeChartTypeMenuList=[],_F.resetSupportedChangeChartTypeList(),TH.resetSupportedChangeChartTypeList(),tB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Chart,e)}),aB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Slicer,e)}),nB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Table,e)}),iB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Map,e)}),rB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Container,e)}),oB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Component,e)}),lB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.SpreadChart,e)}),uB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.MergedChart,e)}),sB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.EmbeddedComponents,e)}),cB.forEach(function(e){return t.addBuildInDefMenu(H.CategoryType.Hidden,e)}),this.supportChangeChartTypeMenuList=this.supportChangeChartTypeMenuList.concat(e),a.forEach(function(e){return _F.addSupportedChangeChartTypeList(e)}),n.forEach(function(e){return TH.addSupportedChangeChartTypeList(e)}),this.hasForceCreateAllBuildInDef=!0}}},{key:"removeFromSupportChangeChartTypeMenuList",value:function(t){var e=this.supportChangeChartTypeMenuList.findIndex(function(e){return e.id===t});-1<e&&this.supportChangeChartTypeMenuList.splice(e,1)}},{key:"canChangeChartTypeTo",value:function(t){return!!t&&(!!this.isVisualLoaded(t.id)&&this.getSupportChangeChartTypeMenuList(t).some(function(e){return e.id===t.id}))}},{key:"addBuildInDef",value:function(e,t){var a;switch(e){case H.CategoryType.Table:case H.CategoryType.Map:a=new JN(t);break;case H.CategoryType.Slicer:a=new iH(t);break;case H.CategoryType.Chart:a=new JN(t);break;case H.CategoryType.Container:a=new tH(t);break;case H.CategoryType.SpreadChart:a=new _F(t);break;case H.CategoryType.MergedChart:a=new TH(t);break;case H.CategoryType.Component:a=new(t.id===H.ChartType.WebContent?JN:t.id===H.ScenarioType.RichEditor?aH:tH)(t);break;case H.CategoryType.EmbeddedComponents:t.id===H.ScenarioType.EmbeddedDashboard?a=new SH(t):t.id===H.ScenarioType.EmbeddedReport&&(a=new DH(t));break;case H.CategoryType.Hidden:a=new tH(t);break;default:throw Error("Invalid Category Type: ".concat(e))}return this.definitions[a.id]=a}},{key:"addBuildInDefMenu",value:function(e,t){var a,n=this,i=[],r=this.definitions[t.id];switch(e){case H.CategoryType.Table:a=null!=r?r:new JN(t),i=this.buildInTables;break;case H.CategoryType.Map:a=null!=r?r:new JN(t),i=this.buildInMaps;break;case H.CategoryType.Slicer:a=null!=r?r:new iH(t),i=this.buildInSlicers;break;case H.CategoryType.Chart:a=null!=r?r:new JN(t),i=this.buildInCharts;break;case H.CategoryType.Container:a=null!=r?r:new tH(t),i=this.buildInContainers;break;case H.CategoryType.SpreadChart:var o=bF.map(function(e){var t=n.definitions[_F.makeDefId(e.id)]||new _F(e);return n.definitions[t.id]=t});o.forEach(function(e){return _F.addSupportedChangeChartTypeList(e.getMenuDesc())}),a=o[0],i=this.buildInSpreadCharts;break;case H.CategoryType.MergedChart:var s=hH.map(function(e){var t=n.definitions[TH.makeDefId(e.id)]||new TH(e);return n.definitions[t.id]=t});s.forEach(function(e){return TH.addSupportedChangeChartTypeList(e.getMenuDesc())}),a=s[0],i=this.buildInMergedCharts;break;case H.CategoryType.Component:a=t.id===H.ChartType.WebContent?r||new JN(t):t.id===H.ScenarioType.RichEditor?r||new aH(t):r||new tH(t),i=this.buildInComponents;break;case H.CategoryType.EmbeddedComponents:t.id===H.ScenarioType.EmbeddedDashboard?a=r||new SH(t):t.id===H.ScenarioType.EmbeddedReport&&(a=r||new DH(t)),i=this.buildInEmbeddedComponents;break;case H.CategoryType.Hidden:a=r||new tH(t);break;default:throw Error("Invalid Category Type: ".concat(e))}var l=(this.definitions[a.id]=a).getMenuDesc();i.push(l),a.isSupportChangeChartType()&&this.addToSupportChangeChartTypeMenuList(l),this.tryAddToAvailableRecommendList(a)}},{key:"getSupportChangeChartTypeMenuList",value:function(e){var t;this.forceCreateBuildInDef();var a=null!==(t=null==e?void 0:e.supportChangeChartTypeMenuList)&&void 0!==t?t:this.supportChangeChartTypeMenuList,n=this.globalConfig,i=n.showCharts,r=n.showVisual;return a.filter(function(e){return Jr.isVisual(e)?r:i})}},{key:"loadVisual",value:function(a,e,t){var n=1<arguments.length&&void 0!==e&&e,i=2<arguments.length&&void 0!==t&&t;return dB(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchVisual(a,n,i);case 3:t=e.sent,this.topic.emit(XH.Loaded,t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.topic.emit(XH.Error,a,e.t0);case 10:this.topic.emit(XH.Finished,a);case 11:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"fetchVisual",value:function(i,e,t){var r=this,a=1<arguments.length&&void 0!==e&&e,n=2<arguments.length&&void 0!==t&&t;if(!i)return ed.Promise.reject("Cannot load visual without a visual id!");if(this.isVisualLoaded(i))return ed.Promise.resolve(this.definitions[i]);var o=i;return a&&(o=PF.getOriginalVisualId(i)),n&&(o=CH.getOriginalVisualId(i)),this.visualResource.fetch(o).then(function(e){var t=new XN(e);if((r.definitions[t.id]=t).isSupportChangeChartType()){var a=new PF(e);_F.canChangeChartTypeTo(t)?r.definitions[a.id]=a:_F.removeChangeChartTypeListById(a.id);var n=new CH(e);TH.canChangeChartTypeTo(t)?r.definitions[n.id]=n:TH.removeChangeChartTypeListById(n.id)}else r.removeFromSupportChangeChartTypeMenuList(t.id),_F.removeChangeChartTypeListById(_F.makeDefId(t.id)),TH.removeChangeChartTypeListById(TH.makeDefId(t.id));return r.definitions[i]?Promise.resolve(r.definitions[i]):Promise.reject()})}},{key:"on",value:function(e,t){this.topic.on(e,t)}},{key:"off",value:function(e,t){this.topic.removeListener(e,t)}},{key:"updateDebugVisual",value:function(e){this.visualDebugger.updateVisual(e),this.topic.emit("loaded",this.visualDebugger)}},{key:"isVisualLoaded",value:function(e){return!!this.allBuildInDefClazz[e]||!!this.definitions[e]}},{key:"tryToGetBuildInDefInstance",value:function(e){if(this.definitions[e])return this.definitions[e];var t=this.allBuildInDefClazz[e];return t?this.addBuildInDef(t.category,t.def):null}},{key:"createScenario",value:function(e,t,a,n){if(a!==H.ScenarioType.Visual&&a!==H.ScenarioType.PivotChart&&a!==H.ScenarioType.Slicer)return this.tryToGetBuildInDefInstance(a).createScenario(e,t);var i,r=this.tryToGetBuildInDefInstance(n);return r?i=r.createScenario(e,t):(i=this.dummyVisual.createScenario(e,t)).visualId=n,i}},{key:"getEntireScenario",value:function(e,t){var a=this.getDefinition(e);return a?a.getEntireScenario(e,t):e}},{key:"getDefinitionById",value:function(e){return this.tryToGetBuildInDefInstance(e)}},{key:"getDefinition",value:function(e){if(_F.isInnerPivotTable(e))return _F.pivotTableDef;if(e.scenarioType===H.ScenarioType.Visual)return this.definitions[e.visualId]||this.dummyVisual;if(e.scenarioType!==H.ScenarioType.PivotChart)return e.scenarioType===H.ScenarioType.Slicer?this.tryToGetBuildInDefInstance(e.slicerType):this.tryToGetBuildInDefInstance(e.scenarioType);var t=e.chartType;return Jr.isSpreadChart(e)&&(t=_F.makeDefId(e.chartType)),Jr.isMergedChart(e)&&(t=TH.makeDefId(e.chartType)),this.tryToGetBuildInDefInstance(t)}},{key:"getDummyDefinition",value:function(){return this.dummyVisual}},{key:"isDefinitionLoaded",value:function(e){return e.scenarioType!==H.ScenarioType.Visual||!!this.definitions[e.visualId]}},{key:"generateMenuDesc",value:function(e){var t=new XN(e),a=t.getMenuDesc();return this.tryAddToAvailableRecommendList(t),a}},{key:"tryAddToAvailableRecommendList",value:function(t){if(t.supportRecommend()&&!this.availableRecommendList.find(function(e){return e.id===t.id})){var e=t.getMenuDesc();this.availableRecommendList.push(e)}}},{key:"getAvailableRecommendList",value:function(){this.forceCreateBuildInDef();var e=this.globalConfig,t=e.showCharts,a=e.showVisual;return this.availableRecommendList.filter(function(e){return Jr.isVisual(e)?a:t})}}]),i}(RP),hB=function(){function e(){I()(this,e),this.store=null,this.isLite=!1,this.topic=new m.EventEmitter,this.parentStore=null,this.getParentDocDataStateFn=null}return D()(e,[{key:"setStore",value:function(e){return this.store=e}},{key:"getStore",value:function(){return this.store}},{key:"getState",value:function(){return this.store?this.store.getState():null}},{key:"dispatch",value:function(e){this.store.dispatch(e)}},{key:"on",value:function(e,t){this.topic.addListener(e,t)}},{key:"off",value:function(e,t){this.topic.off(e,t)}},{key:"emit",value:function(e){for(var t,a=arguments.length,n=new Array(1<a?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];(t=this.topic).emit.apply(t,[e].concat(n))}},{key:"setParentStoreInfo",value:function(e,t){this.parentStore=e,this.getParentDocDataStateFn=t}},{key:"getParentState",value:function(){return this.parentStore&&this.getParentDocDataStateFn?this.getParentDocDataStateFn(this.parentStore):null}},{key:"destroy",value:function(){this.parentStore=null,this.topic.removeAllListeners()}}]),e}(),yB=function(){function e(){I()(this,e),this.delegated=null}return D()(e,[{key:"delegate",value:function(e){this.delegated=e}},{key:"reset",value:function(){this.delegated=null}},{key:"getDelegateFunc",value:function(){return this.delegated||e.noop}},{key:"destroy",value:function(){this.delegated=null}}]),e}();yB.noop=function(){return null};function gB(e){return{type:"ACTION_APP_ACTION_LIST",payload:{actions:e.filter(function(e){return e})}}}function mB(e){return{type:"ACTION_NOT_UNDO",payload:{action:e}}}function fB(e,t,a,n,i){return{type:"ACTION_ADD_NEW_ASSIGNMENT",datasetId:e,payload:{assignment:{type:t,columns:t===H.ColorRelationType.DimensionItem?a:void 0,relationships:n,paletteId:i}}}}var vB,bB,CB,TB=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"showModal",value:function(e){this.getDelegateFunc()(e)}}]),a}(yB),SB=function(e){k()(i,e);var n=w()(i);function i(e){var t,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return I()(this,i),(t=n.call(this)).showError=function(e){t.disabled||t.getDelegateFunc()(H.NotificationType.error,e,t.reduxProxy)},t.showInfo=function(e){t.disabled||t.getDelegateFunc()(H.NotificationType.info,e,t.reduxProxy)},t.reduxProxy=e,t.disabled=a,t}return D()(i,[{key:"destroy",value:function(){C()(b()(i.prototype),"destroy",this).call(this),this.reduxProxy=null}}]),i}(yB),DB=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return a}(yB),kB=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).onFullScreenChanged=function(){t.getDelegateFunc()()},t.root=e,document.addEventListener("fullscreenchange",t.onFullScreenChanged),document.addEventListener("webkitfullscreenchange",t.onFullScreenChanged),document.addEventListener("mozfullscreenchange",t.onFullScreenChanged),document.addEventListener("MSFullscreenChange",t.onFullScreenChanged),t}return D()(n,[{key:"requestFullScreen",value:function(){var e=this.root;(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen).call(e)}},{key:"isFullScreen",value:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}},{key:"destroy",value:function(){C()(b()(n.prototype),"destroy",this).call(this),this.root=null,document.removeEventListener("fullscreenchange",this.onFullScreenChanged),document.removeEventListener("webkitfullscreenchange",this.onFullScreenChanged),document.removeEventListener("mozfullscreenchange",this.onFullScreenChanged),document.removeEventListener("MSFullscreenChange",this.onFullScreenChanged)}}]),n}(yB),wB=function(e){k()(u,e);var l=w()(u);function u(e,t,a,n,i){var r;I()(this,u),(r=l.call(this)).shouldShowWaterMaker=!1,r.licenseTextA=Ft("license.textA",{ns:H.LocaleNamespace.Internal}),r.licenseTextB=Ft("license.textB",{ns:H.LocaleNamespace.Internal}),r.waterMakerStyle={fontSize:"12pt",position:"absolute",pointerEvents:"none",bottom:"50px",left:"65px",color:"#BFBEBE",lineHeight:"2",zIndex:"2"},r.querySelector=function(e){return r._root.querySelector(e)},r.querySelectorAll=function(e){return r.root.querySelectorAll(e)},i?(r._root=i.cardDropDownRoot,r._injectRoot=i.root,r.namespace=""):(r._root=e,r.namespace=n),r.modalDelegator=new TB;var o=a.get("disableNotification");if(r.notificationDelegator=new SB(t,o),r.sideBarDelegator=new DB,r.fullScreenDelegator=new kB(r._root),a.get("isInTrial")&&null==i){r.shouldShowWaterMaker=!0;var s=r.createWaterMaker();r.markerDom=s,r._root.appendChild(s)}return r}return D()(u,[{key:"checkMarker",value:function(e){this.shouldShowWaterMaker&&"Trial"===e.wynWaterMarkContent&&this.markerDom.parentNode!==this._root&&this._root.appendChild(this.markerDom)}},{key:"createWaterMaker",value:function(){var t=this,a=document.createElement("div");return Object.keys(this.waterMakerStyle).forEach(function(e){return a.style[e]=t.waterMakerStyle[e]}),a.innerHTML='<p style="margin: 0">'.concat(this.licenseTextA,'</p><p style="margin: 0">').concat(this.licenseTextB,"</p>"),a}},{key:"appendWaterMakerOnCanvas",value:function(e){if(this.shouldShowWaterMaker){var t=e.getContext("2d");t.save(),t.font="".concat(this.waterMakerStyle.fontSize," Arial"),t.fillStyle=this.waterMakerStyle.color,t.textAlign="start",t.resetTransform(),t.fillText(this.licenseTextA,30,e.height-85),t.fillText(this.licenseTextB,30,e.height-50),t.restore()}}},{key:"createSVGTextNode",value:function(e,t,a){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.style.fill=this.waterMakerStyle.color,n.style.fontSize=this.waterMakerStyle.fontSize,n.style.fontFamily="Arial",n.style.textAnchor="start",n.textContent=e,n.setAttribute("x",t),n.setAttribute("y",a),n}},{key:"appendWaterMakerOnSVG",value:function(e){if(this.shouldShowWaterMaker){var t=e.viewBox.baseVal,a=t.x,n=t.y,i=t.height,r=this.createSVGTextNode(this.licenseTextA,a+30,n+i-85),o=this.createSVGTextNode(this.licenseTextB,a+30,n+i-50);e.appendChild(r),e.appendChild(o)}}},{key:"appendToRoot",value:function(e){this._root.appendChild(e)}},{key:"getViewPort",value:function(e){var t=this.root.getBoundingClientRect(),a={width:t.width,height:t.height,top:t.top,left:t.left};return e?a[e]:a}},{key:"getNameSpace",value:function(){return this.namespace}},{key:"destroyObjectForInject",value:function(){this.fullScreenDelegator.destroy(),this.notificationDelegator.destroy(),this.sideBarDelegator.destroy(),this.fullScreenDelegator=null,this.notificationDelegator=null,this.sideBarDelegator=null}},{key:"destroySelf",value:function(){this.shouldShowWaterMaker=!1,this.markerDom&&this._root.removeChild(this.markerDom)}},{key:"dropDownRoot",get:function(){return this.root.querySelector("#".concat(this.namespace,"ui-dropdown-root"))}},{key:"modalRoot",get:function(){return this.root.querySelector("#".concat(this.namespace,"ui-modal-root"))}},{key:"root",get:function(){return this._root}},{key:"actualRoot",get:function(){var e;return null!==(e=this._injectRoot)&&void 0!==e?e:this._root}},{key:"cardDropDownRoot",get:function(){return this.root.querySelector("#".concat(this.namespace,"ui-card-dropdown-root"))}}]),u}(RP),xB=function(){function e(){var t=this;I()(this,e),this._onChange=function(){},this.refresh=function(){return t._onChange()},this.subscribe=function(e){return t._onChange=e,function(){return t.unsubscribe()}},this.unsubscribe=function(){t._onChange=function(){}}}return D()(e,[{key:"reset",value:function(){this._data=void 0,this.unsubscribe()}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this._onChange()}}]),e}(),AB=function(){function t(e){var a=this;I()(this,t),this._realtimeData=new xB,this.subscribe=function(e){return a._listeners.push(e),function(){return a.unsubscribe(e)}},this.unsubscribe=function(t){var e=a._listeners.findIndex(function(e){return e===t});-1!==e&&a._listeners.splice(e,1)},this.unsubscribeAll=function(){a._listeners=[]},this.getDataProvider=function(e){return a._dataProviders[e]},this.findDataProviderByName=function(t){return Object.values(a._dataProviders).find(function(e){return e.name===t})},this._dataProviders=null!=e?e:{},this._listeners=[]}return D()(t,[{key:"getCurrentDataTable",value:function(e){var t;return null!==(t=this.dataTable.data)&&void 0!==t?t:e}},{key:"setCurrentDataTable",value:function(e){this.dataTable.data=e}},{key:"publish",value:function(t){this._listeners.forEach(function(e){return e(t)})}},{key:"addDataProvider",value:function(e,t){var a=this._dataProviders[e],n=t.equals(a);return n||(this._dataProviders[e]=t,this.publish()),!n}},{key:"clearDataProvider",value:function(e){e?delete this._dataProviders[e]:this._dataProviders={},this.publish()}},{key:"resetListeners",value:function(){this.unsubscribeAll(),this.dataTable.reset()}},{key:"dispose",value:function(){this.clearDataProvider(),this.resetListeners()}},{key:"clone",get:function(){return new t(this._dataProviders)}},{key:"dataTable",get:function(){return this._realtimeData}}]),t}(),IB=function(){function e(){var t=this;I()(this,e),this.get=function(e){return t._cache[e]},this._cache={}}return D()(e,[{key:"add",value:function(e,t){this._cache[e]=t}},{key:"getOrCreate",value:function(e){var t=this.get(e);return t||(this.add(e,new AB),this.get(e))}},{key:"clear",value:function(e){var t;if(e){var a=this.get(e);null!==(t=null==a?void 0:a.dispose)&&void 0!==t&&t.call(a),delete this._cache[e]}}}]),e}(),PB=function(){function i(e){var t=this;I()(this,i),this.pending=[],this.global=window,this.enableAmap=!1,this.amapToken="",this.onScriptsLoaded=function(){t.global.initAMapUI(),t.amapUI=t.global.AMapUI,t.pending.forEach(function(e){return e.resolve()})},this.onScriptsError=function(){t.pending.forEach(function(e){return e.reject()})},this.enableAmap=e.get("enableAmap"),this.amapToken=e.get("amapToken")}return D()(i,[{key:"loadScripts",value:function(){var e=this;this.scriptQ=ed.Promise.all([this.loadAMapScript(),this.loadAMapUIScript()]).then(this.onScriptsLoaded,this.onScriptsError).finally(function(){e.pending=[],e.scriptQ=null})}},{key:"loadAMapScript",value:function(){var n=this;return new ed.Promise(function(e,t){var a=i.createScript("https://webapi.amap.com/maps?v=1.4.1&key=".concat(n.amapToken,"&callback=__amapLoaderHandler"));a.onerror=t,n.global.__amapLoaderHandler=e,d$.uiDelegatorManager.appendToRoot(a)})}},{key:"loadAMapUIScript",value:function(){return new ed.Promise(function(e,t){var a=i.createScript("https://webapi.amap.com/ui/1.1/main-async.js");a.onerror=t,a.onload=e,d$.uiDelegatorManager.appendToRoot(a)})}},{key:"generateGeoJSON",value:function(t){var e=this;return new ed.Promise(function(n,i){e.amapUI.loadUI(["geo/DistrictExplorer"],function(e){new e({}).loadAreaNode(t,function(e,t){if(e)i(e);else{var a={projection:"Mercator",content:{type:"FeatureCollection",features:t.getSubFeatures()}};n(a)}})})})}},{key:"generatePending",value:function(e){var a=this;return this.scriptQ||this.loadScripts(),new ed.Promise(function(e,t){a.pending.push({resolve:e,reject:t})}).then(function(){return a.generateGeoJSON(e)})}},{key:"fetchGeoJSON",value:function(e){return this.enableAmap?this.amapUI?this.generateGeoJSON(e):this.generatePending(e):ed.Promise.reject()}}],[{key:"createScript",value:function(e){var t=document.createElement("script");return t.async=!1,t.charset="utf-8",t.type="text/javascript",t.src=e,t}}]),i}(),_B=(vB=gB,ae.compose(mB,vB),function(){function h(e){I()(this,h),this.datasetColorAssignments={},this.reduxProxy=e}return D()(h,[{key:"getDatasetColorAssignments",value:function(e){if(!this.datasetColorAssignments[e]){var t=this.reduxProxy.getState();if(null!=t){var a=Hs.profiles(t);if(a&&a[e])return this.datasetColorAssignments[e]=ae.clone(a[e].colorAssignments),this.datasetColorAssignments[e]}}return this.datasetColorAssignments[e]}},{key:"getColorsFromPaletteId",value:function(e){var t=this.reduxProxy.getState();if(null==t)return[];var a=Hs.customPaletteList(t),n=e;n=n||(Hs.paletteId(t)||nc);return qc(n,a).colors}},{key:"getActualPaletteId",value:function(e){if(e)return e;var t=this.reduxProxy.getState();if(null!=t){var a=Hs.paletteId(t);if(a)return a}return nc}},{key:"checkDataColorRelationshipsShouldUpdated",value:function(e,t,a,n){var i=this.getDatasetColorAssignments(e);if(i){var r=jc(i,t,a);if(r)return 0<Gc(r.type,r.relationships,n).length}return!0}},{key:"updateDataColorRelationships",value:function(e,t,a,n,i){var r,o=this.getDatasetColorAssignments(e),s={type:t,columns:a,relationships:[],paletteId:this.getActualPaletteId(i)};if(!o){var l=this.getColorsFromPaletteId(i);return r=h.getNewRelationships([],n,l),s.relationships=r,this.datasetColorAssignments[e]=[s],void this.reduxProxy.dispatch(gB([{type:"PROFILES_ADD_DATASET",datasetId:e},fB(e,t,a,r,s.paletteId)]))}var u=jc(o,t,a);if(!u){var c=this.getColorsFromPaletteId(i);return r=h.getNewRelationships([],n,c),s.relationships=r,this.datasetColorAssignments[e].push(s),void this.reduxProxy.dispatch(fB(e,t,a,r,s.paletteId))}var d=Gc(u.type,u.relationships,n);if(d.length){var p=this.getColorsFromPaletteId(u.paletteId);r=h.getNewRelationships(u.relationships,d,p),u.relationships=u.relationships.concat(r),this.reduxProxy.dispatch({type:"ACTION_ADD_RELATIONSHIPS",datasetId:e,payload:{type:t,columns:a,newRelationships:r}})}}},{key:"getDataColorRelationships",value:function(e,t,a){var n=this.getDatasetColorAssignments(e);if(n){var i=jc(n,t,a);if(i)return i.relationships}return null}},{key:"setColorAssignment",value:function(e,t,a,n,i){var r=this.getDatasetColorAssignments(e),o={type:t,columns:a,relationships:n,paletteId:i};if(r){var s=jc(r,t,a);s?(s.relationships=ae.clone(n),s.paletteId=i):r.push(o)}else this.datasetColorAssignments[e]=[o]}},{key:"resetColorAssignmentByUndoRedo",value:function(e){var t=this,a=Hs.profiles(e);this.datasetColorAssignments={},Object.keys(a).forEach(function(e){t.datasetColorAssignments[e]=ae.clone(a[e].colorAssignments)})}}],[{key:"getNewRelationships",value:function(e,t,a){for(var n=[],i=e.length,r=0;r<t.length;r++){var o=Yc(r+i,a),s={dataPoint:t[r],color:o};n.push(s)}return n}}]),h}()),MB=function(){function t(e){var o=this;I()(this,t),this.sortDimensionsListMap=new Map,this.getSortDimensionsList=function(e,t){var a,n=Hs.scenarioById(t,o.reduxProxy.getState()),i=Us.pivotSortInfo(n);if(!e.isReady())return[];a=o.sortDimensionsListMap.has(t)?o.sortDimensionsListMap.get(t)():e.getUsedDimensionItems(!1,{withoutCollection:!0,withoutWeakDataRoles:!0});var r=Object.keys(i);return ae.compose(ae.map(function(e){return{name:e.name,display:e.display,valueType:e.dataType}}),ae.uniqWith(ae.eqProps("name")),ae.filter(function(e){return!ae.contains(e.name,r)}))(a)},this.reduxProxy=e}return D()(t,[{key:"registerGetSortDimensionsList",value:function(e,t){null!=e&&null!=t&&this.sortDimensionsListMap.set(e,t)}},{key:"unRegisterGetSortDimensionsList",value:function(e){this.sortDimensionsListMap.has(e)&&this.sortDimensionsListMap.delete(e)}}]),t}(),LB=a(15),RB=a.n(LB),VB=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};(CB=bB=bB||{}).High="high",CB.Medium="medium",CB.Low="low";function NB(e,t){var a=1<arguments.length&&void 0!==t&&t;if(Array.isArray(e)&&(!a||!Bo.a.isEmpty(e)))return e}function EB(e){return Jr.isWebFont(e)?[!0,e.replace(H.WRAP_NUMBER_START_FONT_MARKER,"")]:[!1,e]}function FB(e){var s=this;I()(this,FB),this.context=e,this.loadedFontIds=[],this.getFont=function(a){return UB(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.context.httpResourceManager.get("WebFont").fetch(a);case 3:return t=e.sent,e.abrupt("return",{id:a,content:t});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{id:a});case 10:case"end":return e.stop()}},e,this,[[0,7]])}))},this.getUsedFontIds=function(e){var t=e.type,a=void 0===t?H.LoadFontType.Dashboard:t,n=e.scenario,i=s.context.shareResourceManager,r=[];switch(a){case H.LoadFontType.Dashboard:r=i.collectFontsFromDocData();break;case H.LoadFontType.Scenario:if(r=i.collectFontsFromScenario(n),(null==n?void 0:n.scenarioType)===H.ScenarioType.Visual){var o=i.collectFontsFromDashboard();r=R()(new Set([].concat(R()(r),R()(o))))}break;case H.LoadFontType.Theme:r=i.collectFontsFromTheme()}return r},this.getUsedFonts=function(i){return UB(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i?{type:H.LoadFontType.Scenario,scenario:i}:{type:H.LoadFontType.Dashboard},a=this.getUsedFontIds(t),e.next=4,Promise.all(a.map(this.getFont));case 4:return n=e.sent,e.abrupt("return",n.filter(function(e){return e&&e.content}));case 6:case"end":return e.stop()}},e,this)}))},this.loadUsedFonts=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return UB(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.waitAll,a=void 0!==t&&t,n=zB(r,["waitAll"]),i=this.getUsedFontIds(n),e.next=4,this.loadFonts(i,a);case 4:case"end":return e.stop()}},e,this)}))},this.loadFonts=function(p){var h=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return UB(s,void 0,void 0,regeneratorRuntime.mark(function e(){var s,l,u,c,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((l=p.filter(function(e){return!d.loadedFontIds.includes(e)})).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all(l.map(this.getFont));case 5:if(u=e.sent,c=u.filter(function(e){return e&&e.content}),t=c,a=this.context.uiDelegatorManager.root,o=void 0,i=t.map(Wu).join("\n"),r="font-loader",(o=null!==(n=a.querySelector("#".concat(r)))&&void 0!==n?n:document.createElement("style")).id=r,o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i)),a.appendChild(o),(s=this.loadedFontIds).push.apply(s,R()(l)),h){e.next=13;break}Gu(u,function(e){d.context.informManager.inform(H.InformEventType.fonts,{familyName:e})}),e.next=15;break;case 13:return e.next=15,new Promise(function(e){return Gu(u,null,e)});case 15:case"end":return e.stop()}var t,a,n,i,r,o},e,this)}))},this.loadAllServerFont=function(){return UB(s,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.httpResourceManager.get("FontList").fetch();case 2:t=e.sent,this.loadFonts(t.map(function(e){return e.id}));case 4:case"end":return e.stop()}},e,this)}))}}var OB=function(e){k()(s,e);var o=w()(s);function s(e,t,a,n,i){var h;I()(this,s),(h=o.call(this)).taskMap=new Map,h.multiValueFilter=function(t,e){var a=h.getParameterListFromState().find(function(e){return e.name===t});return a&&!a.multiValue&&1<e.length?e.slice(0,1):e},h.getParameterListFromState=function(){return Hs.parameters(h.reduxProxy.getState())},h.calculateBindingVariableValue=function(s,e){if(s){if(s.valueType===H.DashboardVariables.Selection){if(null===e||null==e||!e.length)return;var l,u=[],t=rI()(e);try{var a=function(){var e,a=l.value,n=[],t=s.value.checkedFieldNames,i=void 0===t?[]:t,r=rI()(i);try{var o=function(){var t=e.value;null!=a&&a.forEach(function(e){e.field===t&&n.push(e.originalValue)})};for(r.s();!(e=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}u.push(n)};for(t.s();!(l=t.n()).done;)a()}catch(e){t.e(e)}finally{t.f()}if(0===u.length)return;return u}if(s.valueType===H.DashboardVariables.Slicer){if(!s.value)return;var n,i=[s.value.name],r=s.value.valuePropertyName;r&&i.push(r);var o=h.dashboardVariableManager.getSlicerValue(i,!1,!0);if(o.type===WF.Hierarchical?n=h.buildActualValueByTreeSlicerValue(s.value.columns,o):o.type===WF.Range?(n=[],null!=o.value.min&&n.push(o.value.min),null!=o.value.max&&n.push(o.value.max)):(p=null==o?void 0:o.value,n=Array.isArray(p)?p:null!=p?[p]:[]),Bo.a.isEmpty(n)){var c=Hs.scenarioByName(s.value.name,h.reduxProxy.getState()),d=d$.cacheManager.get(H.CacheType.ActiveFilter,null==c?void 0:c.id);return c&&d?[]:void 0}return n}var p}},h.buildActualValueByTreeSlicerValue=function(n,e){var i=[];if(!n||0===n.length)return i;var r=0,o=[],t=e.value,s=e.columnNames;return function a(e){e.forEach(function(e){var t=-1!==n.indexOf(s[r]);t&&o.push(e.value),o.length<n.length&&e.children&&0<e.children.length?(r++,a(e.children),r--):i.push([].concat(o)),t&&o.pop()})}(t),i},h.calculateDefaultVariableValue=function(l){return VB(RB()(h),void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",void 0);case 2:if(t=l.logicValues){e.next=5;break}return e.abrupt("return",NB(l.values,!0));case 5:if(0===t.length&&0!==l.values.length)return e.abrupt("return",NB(l.values,!0));e.next=7;break;case 7:a=[],n=0;case 9:if(!(n<t.length)){e.next=33;break}i=t[n],e.t0=i.valueType,e.next=e.t0===H.DefaultValueType.staticValue?14:e.t0===H.DefaultValueType.userContext||e.t0===H.DefaultValueType.organizationContext?16:e.t0===H.DefaultValueType.dataSet?24:29;break;case 14:return a.push(l.values[n]),e.abrupt("break",30);case 16:return e.next=18,this.httpResourceManager.get("ContextInfo").fetch();case 18:return r=e.sent,o=void 0,i.valueType===H.DefaultValueType.userContext&&(o=r.userContext[i.value]),i.valueType===H.DefaultValueType.organizationContext&&(o=r.organizationContext[i.value]),o&&a.push.apply(a,R()(o)),e.abrupt("break",30);case 24:return e.next=26,this.calculateDataSetVariableValue(i.datasetReference);case 26:return void 0!==(s=e.sent)&&a.push(s),e.abrupt("break",30);case 29:return e.abrupt("break",30);case 30:n++,e.next=9;break;case 33:if(0===a.length)return e.abrupt("return",void 0);e.next=35;break;case 35:return e.abrupt("return",a);case 36:case"end":return e.stop()}},e,this)}))},h.calculateDataSetVariableValue=function(g){return VB(RB()(h),void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p,h,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(t=g.datasetId,a=g.valueField,n=g.aggType,t&&a&&n){e.next=5;break}return e.abrupt("return");case 5:return(i=new e_).resource=this.httpResourceManager.get("PivotAggregatedData"),r={columns:{options:{},values:[{name:a}]}},e.next=10,this.httpResourceManager.get("DatasetSchema").fetch(t);case 10:return o=e.sent,s=this.definitionManager.getDefinitionById(H.SlicerType.DataRangeSlicer),l=s.getSimplePivotSettings(r)[0],u=this.reduxProxy.getState(),c=Hs.profilesOnlyContent(u),d=c[t],p=cC.create(l,o,d),i.helper=p,h={pivotFilters:[],pivotSortInfo:[],pivotRanks:[]},i.model=eA("tmp",h,p),i.customAttributes=p.getCustomAttributes(),e.next=23,i.getDataViewAsync(t,null);case 23:if(y=e.sent,n===H.ParameterDatasetAggType.max)return e.abrupt("return",y.max);e.next=26;break;case 26:return e.abrupt("return",y.min);case 27:case"end":return e.stop()}},e,this)}))},h.transformValue=function(e,t){var a,n,i=t.transform,r=(i=void 0===i?{}:i).rule,o=void 0===r?H.TransformRule.OriginalValue:r,s=i.direction,l=void 0===s?H.TransformDirection.Backward:s,u=i.unit,c=void 0===u?H.TransformDateUnit.Year:u,d=t.dataType;if(o&&[H.ParameterDataTypeFull.Date,H.ParameterDataTypeFull.DateTime].includes(d)){if(o===H.TransformRule.OriginalValue)return e;var p=c||H.TransformDateUnit.Year,h=_e()(e),y=p;if("day"===y&&(y="date"),o===H.TransformRule.Part)return y===H.TransformDateUnit.Month?h[y]()+1:null!==(n=null===(a=h[y])||void 0===a?void 0:a.call(h))&&void 0!==n?n:e;if(!p)return e;if(!l||l===H.TransformDirection.Backward)return _l(h.startOf(y));var g="date"===y?"day":y;return _l(h.add(1,g).startOf(y))}return e},h.transformValues=function(e,t){return t.transform?t.multiValue&&Array.isArray(e)?e.map(function(e){return h.transformValue(e,t)}):h.transformValue(e,t):e},h.convertParameterValue=function(e,t,a){var n=a;if(Array.isArray(n)){if(e===H.ParameterDataTypeFull.MultiDimension)return n;n=n[0]}if(null==n)return null;switch(e){case H.ParameterDataTypeFull.Boolean:return Bo.a.isBoolean(n)?n:"TRUE"===Bo.a.toUpper(n)||"FALSE"!==Bo.a.toUpper(n)&&null;case H.ParameterDataTypeFull.Integer:var i=Bo.a.toNumber(n);return isNaN(i)?null:Bo.a.toInteger(n);case H.ParameterDataTypeFull.Float:var r=Bo.a.toNumber(n);return isNaN(r)?null:r;case H.ParameterDataTypeFull.String:return Bo.a.toString(n);case H.ParameterDataTypeFull.DateTime:var o=_e()(n);return o.isValid()?_l(t?o.startOf("day"):o):null;default:return n}},h.parseParameter=function(a,e){if(e){var t=e;return a.multiValue||(t=t.slice(0,1)),t.map(function(e){var t=h.convertParameterValue(a.dataType,a.dateOnly,e);return t?h.transformValues(t,a):t})}},h.calculateDpParameterValue=function(e){var t=h.dp.get(null==e?void 0:e.name);if(!Bo.a.isNil(t))return Array.isArray(t)?t:[t]},h.calculateBindingParameterValue=function(e,t){var a=h.calculateBindingVariableValue(null==e?void 0:e.binding,t);if(a)return a},h.getParameterValuePriority=function(e){var t;return null!==(t=e.binding)&&void 0!==t&&t.valueType?bB.High:h.dp.has(e.name)?bB.Medium:bB.Low},h.calculateDefaultParameterValueAsync=function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return VB(RB()(h),void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getParameterListFromState(),a=t.find(function(e){return e.name===c})){e.next=4;break}return e.abrupt("return",void 0);case 4:return n=function(t){return VB(u,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=NB(t),e.t0){e.next=5;break}return e.next=4,this.calculateDefaultVariableValue(a.defaultValue);case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}))},i=function(e){return NB(e)||u.calculateDpParameterValue(a)},r=function(){return u.calculateBindingParameterValue(a,d)},o=ae.cond([[ae.equals(bB.High),function(){return ae.pipe(r,i,n)()}],[ae.equals(bB.Medium),function(){return ae.pipe(i,n)()}],[ae.equals(bB.Low),function(){return ae.pipe(n)()}]]),s=this.getParameterValuePriority(a),e.next=11,o(s);case 11:return l=e.sent,e.abrupt("return",this.parseParameter(a,l));case 13:case"end":return e.stop()}},e,this)}))},h.prepareParameterDefaultBaseAsync=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return Promise.all(e.map(function(e){return h.setDefalutParameterValueAsync(e,t)}))},h.prepareParameterDefaultValueAsync=function(){var e=h.getParameterListFromState();return Bo.a.partition(e,function(e){var t,a;return!(null!==(a=null===(t=e.binding)||void 0===t?void 0:t.value)&&void 0!==a&&a.name)}).map(function(e){return e.map(function(e){return e.name})}).reduce(function(e,t){return e.then(function(){return h.prepareParameterDefaultBaseAsync(t)})},Promise.resolve())},h.getParameterValue=function(e){return h.parametersStateMap.get(e)},h.getDatesetRelatedParameters=function(a){var n=[];return h.getParameterListFromState().forEach(function(e){var t;e.defaultValue&&null!==(t=e.defaultValue)&&void 0!==t&&t.logicValues.length&&e.defaultValue.logicValues.find(function(e){return e.valueType===H.DefaultValueType.dataSet&&e.datasetReference.datasetId===a})&&n.push(e.name)}),n},h.setDefalutParameterValueAsync=function(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return VB(RB()(h),void 0,void 0,regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.taskMap.has(n)||(t=this.calculateDefaultParameterValueAsync(n,i).then(function(e){if(e)return a.parametersStateMap.set(n,e),a.multiValueFilter(n,e);a.parametersStateMap.has(n)&&a.parametersStateMap.delete(n)}).catch(function(){return a.parametersStateMap.delete(n),[]}).finally(function(){a.taskMap.delete(n)}),this.taskMap.set(n,t)),e.abrupt("return",this.taskMap.get(n));case 2:case"end":return e.stop()}},e,this)}))},h.setBindingParameterValueFromSelection=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=h.getParameterListFromState().filter(function(e){var t,a=e.binding;return(null===(t=null==a?void 0:a.value)||void 0===t?void 0:t.name)===n});return h.prepareParameterDefaultBaseAsync(t.map(function(e){return e.name}),e)},h.setParameterValueFromDP=function(t){t&&Object.keys(t).forEach(function(e){t[e]?h.dp.set(e,t[e]):h.dp.delete(e)})},h.clear=function(){return h.parametersStateMap.clear()},h.getValueByBinding=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return h.calculateBindingVariableValue(e,t)},h.reduxProxy=e,h.dashboardVariableManager=t,h.httpResourceManager=a,h.definitionManager=n,h.dp=new Map,h.parametersStateMap=new Map;var r=i.get("dp");return r&&(h.dp=new Map(Object.entries(r))),h}return D()(s,[{key:"destroySelf",value:function(){this.reduxProxy=null,this.dashboardVariableManager=null,this.httpResourceManager=null,this.definitionManager=null,this.clear()}},{key:"getParameterDataType",value:function(t){var e=Hs.parameters(this.reduxProxy.getState()).find(function(e){return e.name===t});return e?e.outputDataType:null}},{key:"getParameterDataTypeFull",value:function(t){var e=Hs.parameters(this.reduxProxy.getState()).find(function(e){return e.name===t});return e?e.outputDataType===H.ParameterDataType.DateTime&&e.dateOnly?H.ParameterDataTypeFull.Date:e.outputDataType:null}}]),s}(RP),HB=function(){function n(e,t){var r=this;I()(this,n),this._reduxProxy=e,this._definitionManager=t,this._canAccessResource=new Set,this._listeners=[],this._isNewDashboard=!1,this._resourceInfo=new Map,this.isSharedImage=function(t){if(!t)return!1;var e=r._reduxProxy.getState(),a=ks.imageList(Hs.dashboard(e)).some(function(e){return e.id===t}),n=al(t),i=Jr.isSlicerImage(t);return!a&&!n&&!i},this.convertDatasetIds=function(e){var a=[],n=[],t=r._reduxProxy.getState(),i=hd(t);return e.forEach(function(t){var e=H.DocumentType.Dataset;r._canAccessResource.has(t)?e=!i.filter(function(e){return e.type===H.DatasetType.COT}).find(function(e){return e.id===t})?H.DocumentType.AnalysisModel:H.DocumentType.Dataset:r._resourceInfo.has(t)&&(e=r._resourceInfo.get(t).type);e===H.DocumentType.AnalysisModel?n.push(t):a.push(t)}),[a,n]},this.dashboardIsBroken=function(){return!r._isNewDashboard&&r.collectResourcesFromDocData().some(function(e){var t=e.id;return!r._canAccessResource.has(t)})},this.onCanAccessResourceChanged=function(t){return r._listeners.push(t),function(){var e=r._listeners.findIndex(function(e){return e===t});-1<e&&r._listeners.splice(e,1)}},this.isResourceAvailable=function(e){return!!r._isNewDashboard||r._canAccessResource.has(e)},this.updateCanAccessShareResource=function(e){var t=r._reduxProxy.getState();r._isNewDashboard=""===Hs.dashboardId(t),r._canAccessResource=new Set(e.filter(function(e){var t=e.canRead,a=e.removed;return t&&!a}).map(function(e){return e.id})),r._resourceInfo.clear(),e.map(function(e){var t=e.id;r._resourceInfo.set(t,e)}),r._listeners.forEach(function(e){return e&&e(!0)})};var a=this._reduxProxy.getState();this._isNewDashboard=""===Hs.dashboardId(a)}return D()(n,[{key:"destroy",value:function(){this._listeners=[],this._definitionManager=null,this._reduxProxy=null}},{key:"collectResourcesFromDrillThrough",value:function(e){var t,a=new Set,n=new Set;return e.forEach(function(e){e.type===H.JumpToType.Dashboard?a.add(e.dashboardDocId):e.type===H.JumpToType.Report&&n.add(e.reportDocId)}),t={},V()(t,H.DocumentType.Dashboard,R()(a)),V()(t,H.DocumentType.Report,R()(n)),t}},{key:"collectResourcesFromRichEditorContent",value:function(e){function d(e){var t=EB(e),a=N()(t,2),n=a[0],i=a[1];n&&r.add(i)}var t,a,p=this,r=new Set,h=new Set,y=new Set;return null!==(a=e.delta.ops)&&void 0!==a&&a.forEach(function(e){var t,a,n,i,r,o;d(null===(t=e.attributes)||void 0===t?void 0:t.font),((null===(i=null===(n=null===(a=e.insert)||void 0===a?void 0:a.expression)||void 0===n?void 0:n.config)||void 0===i?void 0:i.conditionalFormats)||[]).forEach(function(e){return d(e.extendsStyle.textStyle.fontFamily)});var s=null!==(o=null===(r=e.attributes)||void 0===r?void 0:r.jumpToDocuments)&&void 0!==o?o:[],l=p.collectResourcesFromDrillThrough(s),u=l[H.DocumentType.Dashboard],c=l[H.DocumentType.Report];u.forEach(function(e){return h.add(e)}),c.forEach(function(e){return y.add(e)})}),t={},V()(t,H.DocumentType.Font,R()(r)),V()(t,H.DocumentType.Dashboard,R()(h)),V()(t,H.DocumentType.Report,R()(y)),t}},{key:"collectResourcesFromCard",value:function(e,a){var n=this;if(!Jr.isCardChart(e))return[];var i=[];return Object.values(e.cardTemplate.scenarios).forEach(function(e){var t=a.call(n,e);i.push.apply(i,R()(t))}),i}},{key:"collectImagesFromScenario",value:function(a){function n(e){t.isSharedImage(e)&&i.push(e)}var e,t=this,i=[];if(this._definitionManager.getDefinition(a).getImageProperties().forEach(function(e){var t=Us.getValueByPath(a,e);n(t)}),(null!==(e=Us.getValueByPath(a,"options.property.conditionalFormat"))&&void 0!==e?e:[]).forEach(function(e){var t,a;return n(null===(a=null===(t=e.extendsStyle)||void 0===t?void 0:t.shapeImageStyle)||void 0===a?void 0:a.labelShapeImageId)}),Jr.isCardChart(a)){var r=this.collectResourcesFromCard(a,this.collectImagesFromScenario);i.push.apply(i,R()(r))}return ae.uniq(i)}},{key:"collectFontsFromScenario",value:function(a){function i(e){var t=EB(e),a=N()(t,2),n=a[0],i=a[1];n&&r.push(i)}var e,r=[];if(this._definitionManager.getDefinition(a).getTextStyleProperties().forEach(function(e){var t=Us.getValueByPath(a,e);i(null==t?void 0:t.fontFamily)}),(null!==(e=Us.getValueByPath(a,"options.property.conditionalFormat"))&&void 0!==e?e:[]).forEach(function(e){var t,a,n;return i(null===(n=null===(a=null===(t=e.extendsStyle)||void 0===t?void 0:t.labelStyle)||void 0===a?void 0:a.fontStyle)||void 0===n?void 0:n.fontFamily)}),Jr.isRichEditor(a)){var t=this.collectResourcesFromRichEditorContent(a.editorContent)[H.DocumentType.Font];r.push.apply(r,R()(t))}else if(Jr.isCardChart(a)){var n=this.collectResourcesFromCard(a,this.collectFontsFromScenario);r.push.apply(r,R()(n))}return ae.uniq(r)}},{key:"collectDashboardsReportsFromScenario",value:function(e){var t=[],a=[],n=Us.drillThrough(e),i=this.collectResourcesFromDrillThrough(n),r=i[H.DocumentType.Dashboard],o=i[H.DocumentType.Report];t.push.apply(t,R()(r)),a.push.apply(a,R()(o));var s=Us.getValueByPath(e,"options.property.contentSetting.docId");if(Jr.isEmbeddedDashboard(e))t.push(s);else if(Jr.isEmbeddedReport(e))a.push(s);else if(Jr.isRichEditor(e)){var l=this.collectResourcesFromRichEditorContent(e.editorContent),u=l[H.DocumentType.Dashboard],c=l[H.DocumentType.Report];t.push.apply(t,R()(u)),a.push.apply(a,R()(c))}return[ae.uniq(t),ae.uniq(a)]}},{key:"collectDatasetsFromScenario",value:function(e){var t=Hs.datasetInfoList(this._reduxProxy.getState()),a=Hp(e,t);if(Jr.isCardChart(e)){var n=this.collectResourcesFromCard(e,this.collectDatasetsFromScenario);a.push.apply(a,R()(n))}return ae.uniq(a)}},{key:"collectVisualsFromScenario",value:function(e){var t=[];if(Jr.isVisual(e)&&"visualDevTools"!==e.visualId)t.push(function(e){if(!e)return null;switch(!0){case e.startsWith("SPREAD_SOURCE_"):return/^SPREAD_SOURCE_(.*)/.exec(e)[1];case e.startsWith("MERGED_SOURCE_"):return/^MERGED_SOURCE_(.*)/.exec(e)[1];default:return e}}(e.visualId));else if(Jr.isCardChart(e)){var a=this.collectResourcesFromCard(e,this.collectVisualsFromScenario);t.push.apply(t,R()(a))}return ae.uniq(t)}},{key:"collectFloorPlansFromScenario",value:function(e){var t=[];if(Jr.isFloorPlanChart(e)){var a=Us.floorPlanId(e);a&&t.push(a)}else if(Jr.isCardChart(e)){var n=this.collectResourcesFromCard(e,this.collectFloorPlansFromScenario);t.push.apply(t,R()(n))}return ae.uniq(t)}},{key:"collectMapHierarchiesGeoJsonFromScenario",value:function(e){var r=this,o=[],s=[];if(Jr.isMapChart(e)){var t=Us.mapInfo(e);t&&(t.mode===H.MapMode.Offline?o.push(t.hierarchyId):t.mode===H.MapMode.DirectGeo&&s.push(t.nodeId))}else if(Jr.isCardChart(e)){Object.values(e.cardTemplate.scenarios).forEach(function(e){var t=r.collectMapHierarchiesGeoJsonFromScenario(e),a=N()(t,2),n=a[0],i=a[1];o.push.apply(o,R()(n)),s.push.apply(s,R()(i))})}return[ae.uniq(o),ae.uniq(s)]}},{key:"collectResourcesFromScenario",value:function(e){var t=this.collectImagesFromScenario(e),a=this.collectFontsFromScenario(e),n=this.collectDashboardsReportsFromScenario(e),i=N()(n,2),r=i[0],o=i[1],s=this.collectDatasetsFromScenario(e),l=this.convertDatasetIds(s),u=N()(l,2),c=u[0],d=u[1],p=this.collectVisualsFromScenario(e),h=this.collectFloorPlansFromScenario(e),y=this.collectMapHierarchiesGeoJsonFromScenario(e),g=N()(y,2),m=g[0],f=g[1];return[t.map(function(e){return{id:e,type:H.DocumentType.Image}}),a.map(function(e){return{id:e,type:H.DocumentType.Font}}),r.map(function(e){return{id:e,type:H.DocumentType.Dashboard}}),o.map(function(e){return{id:e,type:H.DocumentType.Report}}),c.map(function(e){return{id:e,type:H.DocumentType.Dataset}}),d.map(function(e){return{id:e,type:H.DocumentType.AnalysisModel}}),p.map(function(e){return{id:e,type:H.DocumentType.Visual}}),h.map(function(e){return{id:e,type:H.DocumentType.FloorPlan}}),m.map(function(e){return{id:e,type:H.DocumentType.MapHierarchy}}),f.map(function(e){return{id:e,type:H.DocumentType.GeoJson}})].flat()}},{key:"collectDatasetsFromDashboard",value:function(){var e=Hs.dashboard(this._reduxProxy.getState()),o=new Set;return ks.parameters(e).forEach(function(e){var t,a,n,i,r=null===(a=null===(t=e.validValues)||void 0===t?void 0:t.datasetReference)||void 0===a?void 0:a.datasetId;r&&o.add(r),null!==(i=null===(n=e.defaultValue)||void 0===n?void 0:n.logicValues)&&void 0!==i&&i.forEach(function(e){var t;if(e&&e.valueType===H.DefaultValueType.dataSet){var a=null===(t=e.datasetReference)||void 0===t?void 0:t.datasetId;a&&o.add(a)}})}),R()(o)}},{key:"collectFontsFromTheme",value:function(){var e=Hs.docTheme(this._reduxProxy.getState()).textStyle,t=[e.minorFontFamily,e.majorFontFamily],r=new Set;return t.forEach(function(e){var t=EB(e),a=N()(t,2),n=a[0],i=a[1];n&&r.add(i)}),R()(r)}},{key:"collectFontsFromDashboard",value:function(){var e=this._reduxProxy.getState(),o=Hs.dashboard(e),s=new Set;return[ks.titleTextStyle,ks.contentTextStyle,ks.noDataTextStyle].forEach(function(e){var t=e(o),a=EB(null==t?void 0:t.fontFamily),n=N()(a,2),i=n[0],r=n[1];i&&s.add(r)}),this.collectFontsFromTheme().forEach(function(e){return s.add(e)}),R()(s)}},{key:"collectResourcesFromDashboard",value:function(){var e,t=this._reduxProxy.getState(),a=Hs.dashboard(t),n=[],i=[],r=[],o=Hs.docThemeId(t);o&&n.push(o);var s=null===(e=ks.backgroundImage(a))||void 0===e?void 0:e.id;this.isSharedImage(s)&&i.push(s);var l=ks.languageResourceId(a);l&&r.push(l);var u=this.collectDatasetsFromDashboard(),c=this.convertDatasetIds(u),d=N()(c,2),p=d[0],h=d[1],y=this.collectFontsFromDashboard();return[n.map(function(e){return{id:e,type:H.DocumentType.Theme}}),i.map(function(e){return{id:e,type:H.DocumentType.Image}}),r.map(function(e){return{id:e,type:H.DocumentType.LanguageResource}}),p.map(function(e){return{id:e,type:H.DocumentType.Dataset}}),h.map(function(e){return{id:e,type:H.DocumentType.AnalysisModel}}),y.map(function(e){return{id:e,type:H.DocumentType.Font}})].flat()}},{key:"collectResourcesFromDocData",value:function(){var t=this,e=this._reduxProxy.getState(),a=Object.values(Hs.scenarios(e)).map(function(e){return t.collectResourcesFromScenario(e)}),n=this.collectResourcesFromDashboard();return ae.uniq([].concat(R()(a.flat()),R()(n)))}},{key:"collectFontsFromDocData",value:function(){var t=this,e=this._reduxProxy.getState(),a=Object.values(Hs.scenarios(e)).map(function(e){return t.collectFontsFromScenario(e)}),n=this.collectFontsFromDashboard();return ae.uniq(a.flat().concat(n))}},{key:"getResourceName",value:function(e){var t,a=this._resourceInfo.get(e);return null!==(t=null==a?void 0:a.name)&&void 0!==t?t:e}},{key:"collectUnavailableResourcesFromScenario",value:function(e){var t=this;return this._isNewDashboard?[]:this.collectResourcesFromScenario(e).filter(function(e){return!t._canAccessResource.has(e.id)}).map(function(e){return Object.assign(Object.assign({},e),{name:t.getResourceName(e.id)})})}},{key:"collectUnavailableResourcesFromDashboard",value:function(){var t=this;return this._isNewDashboard?[]:this.collectResourcesFromDashboard().filter(function(e){return!t._canAccessResource.has(e.id)}).map(function(e){return Object.assign(Object.assign({},e),{name:t.getResourceName(e.id)})})}},{key:"refreshCanAccessResource",value:function(t,e){var a=this,n=1<arguments.length&&void 0!==e?e:[];this._isNewDashboard||(n.forEach(function(e){var t=e.id;t&&a._canAccessResource.add(t)}),this._listeners.forEach(function(e){return e&&e(t)}))}},{key:"collectLanguageResourceInDashboard",value:function(){var e=this._reduxProxy.getState(),t=Hs.dashboard(e);return[ks.nullItemsString(t),ks.emptyItemsString(t),ks.noDataText(t)].reduce(function(e,t){if(t){var a=ul(t);a!==t&&e.push(a)}return e},[])}},{key:"collectLanguageResourceKeysInDocData",value:function(){var a=this,e=this._reduxProxy.getState(),t=ae.compose(ae.reduce(function(e,t){return[].concat(R()(e),R()(a.collectLanguageResourceKeysInScenario(t)))},[]),ae.values)(Hs.scenarios(e)),n=this.collectLanguageResourceInDashboard();return ae.uniq([].concat(R()(n),R()(t)))}},{key:"collectLanguageResourceKeysInScenario",value:function(e){var a=this,t=this._definitionManager.getDefinition(e).getLanguageResourceKey(e);return e.chartType===H.ChartType.Card?ae.compose(ae.reduce(function(e,t){return[].concat(R()(e),[a.collectLanguageResourceKeysInScenario(t)])},t),ae.values)(e.cardTemplate.scenarios):t}}]),n}(),BB=function(){function e(){I()(this,e),this.store=new Map}return D()(e,[{key:"set",value:function(e,t,a){var n=this.store.get(e);n||(n={},this.store.set(e,n)),Object(Ho.set)(n,t,a)}},{key:"get",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:null,i=this.store.get(e);return i?t?Object(Ho.get)(i,t,n):i:n}},{key:"delete",value:function(e,t){if(this.store.has(e)){t||this.store.delete(e);var a=this.store.get(e);Object(Ho.unset)(a,t)}}},{key:"destroy",value:function(){this.store.clear()}}]),e}(),UB=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},zB=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},KB=function(){function i(e,t,a,n){I()(this,i),this._webFontManager=new FB({httpResourceManager:e,uiDelegatorManager:t,informManager:a,shareResourceManager:n})}return D()(i,[{key:"webFontManager",get:function(){return this._webFontManager}}]),i}(),jB=ae.curry(function(e,t){return{type:"ACTION_SET_DASHBOARD_OPTIONS",payload:{descriptor:e,value:t,isReset:!!e.isReset}}}),WB=(ae.curry(function(e,t){return{type:"ACTION_SET_DASHBOARD_DEFAULT_THEME",payload:{descriptor:e,value:t,isReset:!!e.isReset}}}),jB({valuePath:"page.displayMode"}),jB({valuePath:"dashboard.crossFilterMode"}),ae.curry(function(e,t,a){return{type:"ACTION_INSERT_PIVOT_ITEM",scenarioId:e,pivotName:t,payload:{insertIndex:3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,item:a}}})),GB=ae.curry(function(e,t,a){return{type:"ACTION_REMOVE_PIVOT_ITEM",scenarioId:e,pivotName:t,payload:{removeIndex:a}}}),YB=(ae.curry(function(e,t,a,n){return{type:"ACTION_REORDER_PIVOT_ITEM",scenarioId:e,pivotName:t,payload:{newIndex:a,preIndex:n}}}),ae.curry(function(e,t,a,n){return{type:"ACTION_CHANGE_PIVOT_ITEM",scenarioId:e,pivotName:t,payload:{index:a,item:n}}}),ae.curry(function(e,t,a,n){return{type:"ACTION_PIVOTSETTING_ITEM_ISUNAVAILABLE_UPDATE",scenarioId:e,pivotName:t,payload:{index:a,isUnavailable:n}}}),ae.curry(function(e,t,a,n){return{type:"ACTION_EXCLUDE_HIERARCHY_ITEM",scenarioId:e,pivotName:t,payload:{index:a,exclude:n}}}),ae.curry(function(e,t,a,n){return gB([GB(e,t,a),WB(e,t,n,a)])}),ae.curry(function(e,t,a){return{type:"ACTION_ADD_PIVOT_SORTITEM",scenarioId:e,payload:{sortKey:t,sortItem:a}}}),ae.curry(function(e,t,a){return{type:"ACTION_CHANGE_PIVOT_SORTITEM",scenarioId:e,payload:{sortKey:t,sortItem:a}}}),ae.curry(function(e,t){return{type:"ACTION_REMOVE_PIVOT_SORTITEM",scenarioId:e,payload:{sortKey:t}}}),function(){function t(e){I()(this,t),this.name=e}return D()(t,[{key:"injectDependency",value:function(){}}]),t}()),qB=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e))._reduxProxy=t,a}return D()(i,[{key:"execute",value:function(e){var t,s=this,l=e.target,u=e.index,c=e.name,a=Hs.scenarios(null===(t=this._reduxProxy)||void 0===t?void 0:t.getState());Object.values(a).filter(function(e){return Jr.isTabContainer(e)}).forEach(function(e){var t,a;if(Us.scenarioName(e)===l){var n=Us.activeTab(e),i=Us.tabs(e),r=Us.tabSettingContent(e),o=i[-1<u?u:-1];null==o&&c&&(o=i.find(function(e){var t;return(null===(t=r[e])||void 0===t?void 0:t.text)===c})),-1<o&&o!==n&&(null!==(t=s._reduxProxy)&&void 0!==t&&t.dispatch({type:"ACTION_CHANGE_ACTIVE_TAB",scenarioId:e.id,payload:{tabId:o}}),null!==(a=s._reduxProxy)&&void 0!==a&&a.emit(s.name,e.id,o))}})}},{key:"getName",value:function(){return this.name}}]),i}(YB),JB=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e))._reduxProxy=t,a}return D()(i,[{key:"execute",value:function(e){var t,a,n=e.index,i=e.name,r=null===(t=this._reduxProxy)||void 0===t?void 0:t.getState(),o=Hs.pages(r),s=ks.pageIdList(Hs.dashboard(r)).filter(function(e){return!ws.hidden(null==o?void 0:o[e])}),l=s.map(function(e){var t,a,n;return null===(n=null===(a=null===(t=o[e])||void 0===t?void 0:t.options)||void 0===a?void 0:a.page)||void 0===n?void 0:n.title}),u=!Number.isInteger(n)||n<0||n>s.length-1,c=-1===l.indexOf(i);if(!u||!c){var d=s[u?l.indexOf(i):n];d$.dashboardManager.getPage().emit(H.PageEvent.TogglePage,d),null!==(a=this._reduxProxy)&&void 0!==a&&a.emit(this.name,d)}}},{key:"getName",value:function(){return this.name}}]),i}(YB),XB=a(68),QB=function(){function l(e,t,a){I()(this,l),this.usedCustomAttributes=[],this.usedParameters=[],this.usedAttributes=[],this.datasetId=e;var n=t.entity,i=t.name,r=t.value,o=t.type,s=t.dataType;this.id=l.makeCustomAttributeId(n,i),this.entity=n,this.attribute=i,this.expression=r,this.type=o,this.dataType=s,this.store=a}return D()(l,[{key:"convertExps",value:function(){var e=this.store.getDatasetCustomAttributesMeta(this.datasetId).map(function(e){return e.toJSON()}),t=Object(Ho.groupBy)(e,function(e){return e.entity});return Object.keys(t).map(function(e){return{name:e,attributes:t[e],relations:[]}})}},{key:"delayInit",value:function(){if(!this.ast){this.ast=XB.ASTRoot.createASTRoot(this.expression);var e={entity:this.entity,name:this.attribute,entities:this.convertExps()},t=this.ast.getDependence(e),a=new Set,n=/parameters\["(.*?)"\]/gi;t.parameters.forEach(function(e){n.lastIndex=0;var t=n.exec(e);t&&a.add(t[1])}),this.usedParameters=Array.from(a),this.usedAttributes=t.attributes.map(function(e){return{id:l.makeCustomAttributeId(e.entity,e.attribute),entity:e.entity,attribute:e.attribute}}),this.usedCustomAttributes=t.expressions.map(function(e){return{id:l.makeCustomAttributeId(e.entity,e.attribute),entity:e.entity,attribute:e.attribute}}),this.runtimeExpression=this.ast.toString(e)}}},{key:"getCustomAttributeDependence",value:function(){return this.delayInit(),this.usedCustomAttributes||[]}},{key:"getAttributeDependence",value:function(){return this.delayInit(),this.usedAttributes||[]}},{key:"getParameterDependence",value:function(){return this.delayInit(),this.usedParameters||[]}},{key:"shouldCompile",value:function(){return 0<this.usedParameters.length}},{key:"isOutdate",value:function(e){return this.expression!==e}},{key:"compile",value:function(e){return this.delayInit(),this.shouldCompile()?this.ast.compile({entity:this.entity,name:this.attribute,compile:e}):this.runtimeExpression}},{key:"toJSON",value:function(){return{name:this.attribute,mode:this.type,type:this.dataType,exp:this.expression,entity:this.entity}}},{key:"toRuntimeJSON",value:function(){return this.delayInit(),{columnId:this.attribute,type:this.type,definition:this.runtimeExpression,tableName:this.entity}}}],[{key:"makeCustomAttributeId",value:function(e,t){return"".concat(e,"").concat(t).toUpperCase()}},{key:"fromCustomAttributeId",value:function(e){var t=e.split(""),a=N()(t,2);return{entity:a[0],attribute:a[1]}}}]),l}(),ZB=function(){function t(e){I()(this,t),this.cache={},this.reduxProxy=e}return D()(t,[{key:"isEqualString",value:function(e,t){return e.toUpperCase()===t.toUpperCase()}},{key:"getAttributeFromRedux",value:function(e,t,a){var n=this,i=this.reduxProxy.getState(),r=(Hs.profiles(i)||{})[e];return r?(r.content.customAttributes||[]).find(function(e){return n.isEqualString(e.entity,t)&&n.isEqualString(e.name,a)}):null}},{key:"getCustomAttribute",value:function(e,t,a){var n=this.getAttributeFromRedux(e,t,a);if(!n)return null;var i=QB.makeCustomAttributeId(t,a),r=Object(Ho.get)(this.cache,[e,i]);return r&&!r.isOutdate(n.value)||(r=new QB(e,n,this),Object(Ho.set)(this.cache,[e,r.id],r)),r}},{key:"getDatasetCustomAttributesMeta",value:function(t){var a=this,e=this.reduxProxy.getState(),n=(Hs.profiles(e)||{})[t];return n?(n.content.customAttributes||[]).map(function(e){return a.getCustomAttribute(t,e.entity,e.name)}):[]}}]),t}(),$B=function(){function t(e){I()(this,t),this.backendAttrs={},this.store=new ZB(e)}return D()(t,[{key:"getRelatedAttributes",value:function(e,t,a){for(var n=QB.makeCustomAttributeId(t,a),i=new Map,r=[{entity:t,attribute:a,id:n}],o=[],s=new Set;r.length;){var l=r.shift();if(!i.has(l.id)){var u=this.store.getCustomAttribute(e,l.entity,l.attribute);u&&(i.set(l.id,u),u.getCustomAttributeDependence().forEach(function(e){return r.push(e)}),u.getAttributeDependence().forEach(function(e){s.has(e.id)||(o.push(e),s.add(e.id))}))}}return{metas:Array.from(i.values()),attrs:o}}},{key:"getCustomAttribute",value:function(e,t,a){return this.store.getCustomAttribute(e,t,a)}},{key:"getOrCreateBackendCustomAttribute",value:function(e,t){var a=t.entity,n=t.name,i=QB.makeCustomAttributeId(a,n),r=Object(Ho.get)(this.backendAttrs,["datasetId",i]);return r&&!r.isOutdate(t.definition)||(r=new QB(e,t,this.store),Object(Ho.set)(this.backendAttrs,["datasetId",i],r)),r}},{key:"isParameterSupported",value:function(e){return!e.multiValue&&e.valueType!==ES.Dynamic}}]),t}(),eU=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"injectDependency",value:function(e){if(null==e||!e.dashboardManager||null==e||!e.reduxProxy)throw new Error("The injection object is invalid");this.dashboardManager=e.dashboardManager,this.reduxProxy=e.reduxProxy}},{key:"getName",value:function(){return this.name}},{key:"execute",value:function(e,t){if(e){var a=e.target,n=this.dashboardManager.getScenarioByName(a);this.preExecute(n,e,t)&&this.commandExe(n,e,t)}else t.reject(rU.undefinedPayload())}},{key:"preExecute",value:function(e,t,a){return Hs.designer("view")(this.reduxProxy.getState())===H.AppViewMode.Designer?(a.reject(rU.executeAtDesigner()),!1):!!e||(a.reject(rU.notFoundSpecifiedScenario(t.target)),!1)}}],[{key:"getInstance",value:function(e){var t=iU.commandInstanceMap.get(e);if(t)return t;throw new Error("Error command name : ".concat(e))}}]),a}(YB);eU.commandInstanceMap=new Map;var tU=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.call(this,H.Command.DrillDown)}return D()(a,[{key:"commandExe",value:function(e,t,a){var n=t.drillDimension,i=t.position,r=t.selectionIds;null!=e&&e.emit(H.Command.DrillDown,i,n,a,r)}}]),a}(eU),aU=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).name=H.Command.Drill,e}return a}(tU),nU=function(e){k()(i,e);var t=w()(i);function i(){return I()(this,i),t.call(this,H.Command.DrillUp)}return D()(i,[{key:"preExecute",value:function(e,t,a){if(!C()(b()(i.prototype),"preExecute",this).call(this,e,t,a))return!1;var n=e.getData();return!(Us.activeDrillItemIndex(n)<0)||(a.reject(rU.noDrillItem(H.Command.DrillUp)),!1)}},{key:"commandExe",value:function(e,t,a){var n=e.getData(),i=Us.activeDrillItemIndex(n);null!=e&&e.emit(H.Command.DrillUp,i,a)}}]),i}(eU),iU=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.call(this,H.Command.DrillReset)}return D()(a,[{key:"commandExe",value:function(e,t,a){null!=e&&e.emit(H.Command.DrillReset,a)}}]),a}(eU);eU.commandInstanceMap.set(H.Command.Drill,new aU),eU.commandInstanceMap.set(H.Command.DrillDown,new tU),eU.commandInstanceMap.set(H.Command.DrillUp,new nU),eU.commandInstanceMap.set(H.Command.DrillReset,new iU);var rU=function(){function e(){I()(this,e)}return D()(e,null,[{key:"undefinedPayload",value:function(){return{errorNumber:this.errorNumberMap.UNDEFINED_PAYLOAD,errorMessage:"Empty payload and please assign the target scenario in payload."}}},{key:"executeAtDesigner",value:function(){return{errorNumber:this.errorNumberMap.EXECUTE_AT_DESIGNER,errorMessage:"Can not execute command at design time."}}},{key:"notFoundSpecifiedScenario",value:function(e){return{errorNumber:this.errorNumberMap.NOT_FOUND_SPECIFIED_SCENARIO,errorMessage:"Invalid scenario name : ".concat(e)}}},{key:"invalidDimension",value:function(e){return{errorNumber:this.errorNumberMap.INVALID_DIMENSION,errorMessage:"Invalid dimension : ".concat(e)}}},{key:"noDrillItem",value:function(e){var t="";switch(e){case H.Command.Drill:case H.Command.DrillDown:default:t="No sub-item to drill down.";break;case H.Command.DrillUp:t="No high-level item to drill up.";break;case H.Command.DrillReset:t="No Drill item."}return{errorNumber:this.errorNumberMap.NO_DRILL_ITEM,errorMessage:t}}},{key:"noSelectionItem",value:function(){return{errorNumber:this.errorNumberMap.NO_SELECTION_ITEM,errorMessage:"No selection for drilling down."}}}]),e}();rU.errorNumberMap={UNDEFINED_PAYLOAD:210101,EXECUTE_AT_DESIGNER:210102,NOT_FOUND_SPECIFIED_SCENARIO:210103,INVALID_DIMENSION:210104,NO_DRILL_ITEM:210105,NO_SELECTION_ITEM:210106};var oU,sU,lU=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},uU=function(){function a(e){var t=this;I()(this,a),this.initialized=!1,this.getDashboardContext=function(){return t.dashboardContext},this.dashboardContext=e}return D()(a,[{key:"initContext",value:function(e){var t,a,n,i,r,o,s,l,u,c,d;this.injectData=null==e?void 0:e.__injectData;var p,h,y=this.dashboardContext,g=new hB;y.setReduxProxy(g),h=null!==(t=null==e?void 0:e.__injectData)&&void 0!==t&&t.uiDelegatorManager?e.__injectData.useInjectUiDelegatorManager?(p=e.__injectData.uiDelegatorManager,kP.SameWithInjectObject):(p=new wB(this.wrapper,g,y.globalConfigManager,y.applicationManager.namespace,e.__injectData.uiDelegatorManager),kP.WrapInjectObject):(p=new wB(this.wrapper,g,y.globalConfigManager,y.applicationManager.namespace),kP.None),p.setInjectMode(h),y.setUIDelegatorManager(p);function m(e){return null!=e?kP.SameWithInjectObject:kP.None}var f=new mx;y.setCommandService(f),f.register(new qB(H.Command.SwitchTab,g)),f.register(new qB(H.Command.SelectTab,g)),f.register(new JB(H.Command.SwitchPage,g));var v=new EP(g,null==e?void 0:e.__injectData);v.setInjectMode(m(null===(a=null==e?void 0:e.__injectData)||void 0===a?void 0:a.httpResourceManager)),y.setHttpResourceManager(v);var b=v.get("DatasetSchema"),C=v.get("DatasetColumnLookup"),T=new yx(g);T.setDatasetSchemaResource(b),T.setDatasetLookupsResource(C),y.globalConfigManager.get("datasetId")&&T.setDefaultDatasetId(y.globalConfigManager.get("datasetId")),y.setDatasetManager(T);var S=new $B(g);y.setCustomAttributeManager(S);var D=y.globalConfigManager.get("availableComponents"),k=D.showCharts,w=D.showVisual,x=null!==(i=null===(n=null==e?void 0:e.__injectData)||void 0===n?void 0:n.definitionManager)&&void 0!==i?i:new pB(v,{showCharts:k,showVisual:w});x.setInjectMode(m(null===(r=null==e?void 0:e.__injectData)||void 0===r?void 0:r.definitionManager)),y.setDefinitionManager(x);var A=y.globalConfigManager,I=new WO(this.dashboardContext._legacyWynbi.reduxDocData,A,v,g);null!==(o=null==e?void 0:e.__injectData)&&void 0!==o&&o.dashboardVariableManager&&I.setParentDashboardVariableManager(e.__injectData.dashboardVariableManager),y.setDashboardVariableManager(I);var P=null!==(l=null===(s=null==e?void 0:e.__injectData)||void 0===s?void 0:s.parameterManager)&&void 0!==l?l:new OB(g,I,y.httpResourceManager,x,A);P.setInjectMode(m(null===(u=null==e?void 0:e.__injectData)||void 0===u?void 0:u.parameterManager)),y.setParameterManager(P);var _=new BB;y.setCacheManager(_);var M=new yO(v,p,g,I,y.informManager,P,S,_);y.setDashboardManager(M),y.setExportManager(new $O(y.getApplicationEmitter(),y.appEventHub,A)),y.setMessageHost(new eH),y.setDataProviderManagerCache(new IB),null!==(c=null==e?void 0:e.__injectData)&&void 0!==c&&c.amapLoader?y.setAMapLoader(null===(d=null==e?void 0:e.__injectData)||void 0===d?void 0:d.amapLoader):y.setAMapLoader(new PB(A));var L=new _B(g);y.setColorAssignmentManager(L);var R=new MB(g);y.setSortContainerManager(R);var V=new qO(M,g,P);y.setEmbeddedDashboardManager(V);var N=new ZO(y.getApplicationEmitter(),g);y.setEmbeddedReportManager(N);var E=new HB(g,x);y.setShareResourceManger(E),y.resourceManager=new KB(v,p,y.informManager,y.shareResourceManager),f.register(eU.getInstance(H.Command.Drill),{dashboardManager:M,reduxProxy:g}),f.register(eU.getInstance(H.Command.DrillDown),{dashboardManager:M,reduxProxy:g}),f.register(eU.getInstance(H.Command.DrillUp),{dashboardManager:M,reduxProxy:g}),f.register(eU.getInstance(H.Command.DrillReset),{dashboardManager:M,reduxProxy:g})}},{key:"makeDefer",value:function(){var a={},e=new Promise(function(e,t){a.resolve=e,a.reject=t});return a.q=e,a}},{key:"createDom",value:function(e){this.container=e,this.wrapper=document.createElement("div"),this.root=document.createElement("div"),this.wrapper.className="wyn-dashboard-app ".concat(this.dashboardContext.globalConfigManager.getThemeClass()),this.wrapper.style.height="100%",this.wrapper.tabIndex=-1,this.root.className="dd-weight-theme",this.wrapper.appendChild(this.root),e.appendChild(this.wrapper)}},{key:"setParameterValue",value:function(e){this._setParameterValue(e)}},{key:"_setParameterValue",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t,n=this.dashboardContext;Hs.parameters(n.reduxProxy.getState())&&(n.parameterManager.setParameterValueFromDP(e),a||n.dashboardManager.refreshByParameters(new Set(Object.keys(e))))}},{key:"setGlobalFilters",value:function(e){this.dashboardContext.dashboardManager.setGlobalFilters(e)}},{key:"destroy",value:function(){this.initialized&&(this.dashboardContext.destroy(null==this.injectData),this.container.removeChild(this.wrapper),this.dashboardContext=null,d$=null,this.initialized=!1,this.container=null,this.injectData=null,this.wrapper=null)}},{key:"on",value:function(e,t){this.dashboardContext.appEventHub.on(e,t)}},{key:"once",value:function(e,t){this.dashboardContext.appEventHub.once(e,t)}},{key:"off",value:function(e,t){this.dashboardContext.appEventHub.off(e,t)}},{key:"requestFullScreen",value:function(){this.dashboardContext.uiDelegatorManager.fullScreenDelegator.requestFullScreen()}},{key:"executeCommand",value:function(e){return this.dashboardContext.commandService.executeAsync(e)}},{key:"getDatasetsAsync",value:function(){return lU(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dashboardContext.datasetManager.getDatasetsAsync());case 1:case"end":return e.stop()}},e,this)}))}}]),a}();(sU=oU=oU||{}).Root="$root",sU.Host="$host",sU.UI="$ui",sU.Logic="$logic",sU.Portal="$portal",sU.Fragment="$fragment";var cU,dU=function(){function e(){I()(this,e),this.withContext=!0,this.destroyed=!1,this.isMountedOnRoot=!1,this.mounted=!1,this.added=!1,this.context={},this.children=[]}return D()(e,[{key:"addChildren",value:function(){var t=this;if(this.destroyed)console.warn(this._getDevMessage("Do not add component on a destroyed component!"));else{for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];a.forEach(function(e){return t.addChild(e)})}}},{key:"removeChildren",value:function(){var t=this;if(this.destroyed)console.warn(this._getDevMessage("Do not remove component on a destroyed component!"));else{for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];a.forEach(function(e){return t.removeChild(e)})}}},{key:"removerAllChildren",value:function(){this.removeChildren.apply(this,R()(this.children))}},{key:"addChild",value:function(e){if(e)if(e.added){var t=e._getDevInfo();console.warn(this._getDevMessage("Do not add ".concat(t.text," twice!")))}else e.setContext(this.context),this.children.push(e),e.added=!0,this.mountChild(e);else console.warn(this._getDevMessage("Do not add null!"))}},{key:"removeChild",value:function(t){if(t.added)this.children=this.children.filter(function(e){return t!==e}),t.added=!1,this.unmountChild(t);else{var e=t._getDevInfo();console.warn(this._getDevMessage("Do not remove ".concat(e.text," twice!")))}}},{key:"mountToParent",value:function(e){if(this.mounted){var t=this._getDevInfo();console.warn(this._getDevMessage("Do not mount ".concat(t.text," twice!")))}else this.parent=e,this.mounted=!0,this.didMount(),e.isMountedOnRoot&&this.doMountOnRoot()}},{key:"unmountFromParent",value:function(){this.mounted&&(this.willUnmount(),this.parent=null,this.mounted=!1,this.isMountedOnRoot=!1,this.children.forEach(function(e){e.unmountFromParent()}))}},{key:"doMountOnRoot",value:function(){this.isMountedOnRoot||(this.children.forEach(function(e){e.doMountOnRoot()}),this.isMountedOnRoot=!0,this.didMountOnRoot())}},{key:"didMount",value:function(){}},{key:"willUnmount",value:function(){}},{key:"didMountOnRoot",value:function(){}},{key:"destroy",value:function(){if(this.destroyed)console.warn(this._getDevMessage("Do not destroy component twice!"));else{for(;this.children.length;){var e=this.children.shift();this.removeChild(e),e.destroy()}this.destroyed=!0,this.children=[],this.clearContext()}}},{key:"setContext",value:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:{};this.withContext&&(this.context=Object.assign(Object.assign({},this.context),a),this.children.forEach(function(e){e.setContext(t.context)}))}},{key:"clearContext",value:function(){this.withContext&&(this.context={},this.children.forEach(function(e){e.clearContext()}))}},{key:"_getDevInfo",value:function(){return{text:this.type,color:"#000"}}},{key:"_getDevMessage",value:function(e){var t=this._getDevInfo();return"<".concat(t.text,">: ").concat(e)}},{key:"print",value:function(e){var t=0<arguments.length&&void 0!==e&&e,a=this._getDevInfo();this.children.length?(console.group("  %c<".concat(a.text,">"),"color: ".concat(a.color)),t&&console.dir(this),this.children.forEach(function(e){e.print(t)}),console.log("%c</".concat(a.text,">"),"color: ".concat(a.color,"; font-weight: bold")),console.groupEnd()):console.log("  %c<".concat(a.text,"/>"),"color: ".concat(a.color))}}]),e}(),pU=["top","right","bottom","left","width","height"],hU=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).children=[],t.eventHandlers=[],t.tag="",t.type=oU.Host,e&&(t.tag=e.tag,t.createHostDom(e),t._didMountOnRoot=e.didMountOnRoot),t}return D()(n,[{key:"createHostDom",value:function(e){var t=e.tag,a=e.style,n=e.className,i=e.innerHTML,r=e.onClick,o=e.textContent,s=e.onScroll,l=e.id,u=e.title,c=e.onContextMenu,d=e.onMouseOver,p=e.onMouseOut,h=e.onMouseDown;this.node=document.createElement(t),l&&(this.node.id=l),n&&(this.node.className=n),a&&this.setStyle(a),i&&this.setInnerHTML(i),r&&this.addEventListener("click",r),c&&this.addEventListener("contextmenu",c),s&&this.addEventListener("scroll",s),d&&this.addEventListener("mouseover",d),p&&this.addEventListener("mouseout",p),h&&this.addEventListener("mousedown",h),o&&this.setText(o),u&&this.setAttribute("title",u)}},{key:"getRef",value:function(){return this.node}},{key:"setStyle",value:function(t){var e,a=this;null!==(e=this.node)&&void 0!==e&&e.style&&Object.keys(t).forEach(function(e){-1<pU.indexOf(e)&&"number"==typeof t[e]?a.node.style[e]="".concat(t[e],"px"):a.node.style[e]=t[e]})}},{key:"setAttribute",value:function(e,t){this.node.setAttribute(e,t)}},{key:"setInnerHTML",value:function(e){this.node.innerHTML=e}},{key:"setText",value:function(e){this.node.textContent=e}},{key:"setTitle",value:function(e){this.node.title=e}},{key:"addClassName",value:function(){var e;(e=this.node.classList).add.apply(e,arguments)}},{key:"removeClassName",value:function(e){this.node.classList.remove(e)}},{key:"addEventListener",value:function(e,t,a){var n=2<arguments.length&&void 0!==a&&a;this.node.addEventListener(e,t,n),this.eventHandlers.push({type:e,capture:n,cb:t})}},{key:"removeEventListener",value:function(t,a,e){var n=2<arguments.length&&void 0!==e&&e;this.node.removeEventListener(t,a,n),this.eventHandlers=this.eventHandlers.filter(function(e){return e.cb!==a&&e.type!==t&&e.capture!==n})}},{key:"_getDevInfo",value:function(){return{text:"".concat(this.tag," (").concat(this.node.className,")"),color:"green"}}},{key:"mountChild",value:function(e){e.mountToParent(this)}},{key:"unmountChild",value:function(e){e.unmountFromParent()}},{key:"mountToParent",value:function(e){e.node.appendChild(this.node),C()(b()(n.prototype),"mountToParent",this).call(this,e)}},{key:"unmountFromParent",value:function(){C()(b()(n.prototype),"unmountFromParent",this).call(this);var e=this.node.parentNode;e&&e.removeChild(this.node)}},{key:"didMountOnRoot",value:function(){var e;null!==(e=this._didMountOnRoot)&&void 0!==e&&e.call(this,this.getRef())}},{key:"destroy",value:function(){var t=this;C()(b()(n.prototype),"destroy",this).call(this),this.eventHandlers.forEach(function(e){t.node.removeEventListener(e.type,e.cb,e.capture)}),this.node=null}}]),n}(dU),yU=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).children=[],e.type=oU.Fragment,e}return D()(a,[{key:"mountChild",value:function(e){this.parent&&e.mountToParent(this.parent)}},{key:"unmountChild",value:function(e){this.parent&&e.unmountFromParent()}},{key:"mountToParent",value:function(t){this.children.forEach(function(e){e.mountToParent(t)}),C()(b()(a.prototype),"mountToParent",this).call(this,t)}}]),a}(dU),gU=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).withContext=!1,e._listeners=[],e.type=oU.UI,e}return D()(a,[{key:"addEventListener",value:function(e,t,a){e.addEventListener(t,a),this._listeners.push(function(){e.removeEventListener(t,a)})}},{key:"_traversalChildren",value:function(e,t){var a=e.children;if(a)for(var n=0;n<a.length;n+=1){var i=t(a[n]);if(i)return i}}},{key:"_getDevInfo",value:function(){return{text:this.constructor.name,color:"blue"}}},{key:"willUnmount",value:function(){this._listeners.length&&this._listeners.forEach(function(e){return e()})}}]),a}(yU),mU=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).type=oU.Logic,e}return D()(a,[{key:"_getDevInfo",value:function(){return{text:this.constructor.name,color:"purple"}}}]),a}(yU),fU=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).type=oU.Root,t.node=e,t.mounted=!0,t.added=!0,t.isMountedOnRoot=!0,t}return D()(n,[{key:"_getDevInfo",value:function(){return{text:"Root",color:"#000"}}},{key:"mountToParent",value:function(){}},{key:"unmountFromParent",value:function(){}},{key:"mountChild",value:function(e){C()(b()(n.prototype),"mountChild",this).call(this,e),e.doMountOnRoot()}}]),n}(hU),vU=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).type=oU.Portal,t.root=new fU(e),t}return D()(n,[{key:"mountChild",value:function(e){e.mountToParent(this.root)}},{key:"unmountChild",value:function(e){e.unmountFromParent()}},{key:"destroy",value:function(){C()(b()(n.prototype),"destroy",this).call(this),this.root.destroy(),this.root=null}},{key:"_getDevInfo",value:function(){return{text:"Portal",color:"lightblue"}}}]),n}(dU),bU=(cU={},V()(cU,Li,"5px 1px"),V()(cU,Ri,"10px 3px"),V()(cU,Vi,"15px 5px"),cU);var CU=document.createElement("canvas"),TU=CU.getContext("2d"),SU=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"apply",value:function(e){this.props=Object.assign(Object.assign({},a.defaultProps),e),this.wrapper&&this.removeChildren(this.wrapper),this.wrapper=new hU({tag:"div",className:"layout-full",style:{position:"relative"}}),this.addChildren(this.wrapper),this._renderTopBorder(),this._renderRightBorder(),this._renderBottomBorder(),this._renderLeftBorder(),this._renderTopLeftCorner(),this._renderTopRightCorner(),this._renderBottomRightCorner(),this._renderBottomLeftCorner()}},{key:"_getBackground",value:function(e,t,a,n,i){var r=this.props,o=r.strokeWidth,s=r.stroke;CU.width=e.width+n,CU.height=e.height+i,TU.save(),TU.translate(t,a),TU.strokeStyle=s,TU.lineWidth=o,TU.lineCap="square",e.children.forEach(function(e){var t=new Path2D(e.d);TU.stroke(t)});var l=CU.toDataURL();return TU.restore(),TU.clearRect(0,0,CU.width,CU.width),"url(".concat(l,")")}},{key:"_renderTopBorder",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.border||!t.border.top)return null;var n=a/2,i=0,r=0;if(t.corner){var o=t.corner;i=o.topLeft?o.topLeft.width:0,r=o.topRight?o.topRight.width:0}var s=t.border.top,l={top:0,right:r,left:i,height:s.height+a,backgroundRepeat:"repeat-x",backgroundImage:this._getBackground(s,0,n,0,a),position:"absolute"},u=new hU({tag:"div",className:"dd-svg-border-element",style:l});this.wrapper.addChildren(u)}},{key:"_renderRightBorder",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.border||!t.border.right)return null;var n=a/2,i=0,r=0;if(t.corner){var o=t.corner;i=o.topRight?o.topRight.height:0,r=o.bottomRight?o.bottomRight.height:0}var s=t.border.right,l={top:i,right:0,bottom:r,width:s.width+a,backgroundRepeat:"repeat-y",backgroundImage:this._getBackground(s,n,0,a,0),position:"absolute"},u=new hU({tag:"div",className:"dd-svg-border-element",style:l});this.wrapper.addChildren(u)}},{key:"_renderBottomBorder",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.border||!t.border.bottom)return null;var n=a/2,i=0,r=0;if(t.corner){var o=t.corner;i=o.bottomLeft?o.bottomLeft.width:0,r=o.bottomRight?o.bottomRight.width:0}var s=t.border.bottom,l={right:r,left:i,bottom:0,height:s.height+a,backgroundRepeat:"repeat-x",backgroundImage:this._getBackground(s,0,n,0,a),position:"absolute"},u=new hU({tag:"div",className:"dd-svg-border-element",style:l});this.wrapper.addChildren(u)}},{key:"_renderLeftBorder",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.border||!t.border.left)return null;var n=a/2,i=0,r=0;if(t.corner){var o=t.corner;i=o.topLeft?o.topLeft.height:0,r=o.bottomLeft?o.bottomLeft.height:0}var s=t.border.left,l={top:i,bottom:r,left:0,width:s.width+a,backgroundRepeat:"repeat-y",backgroundImage:this._getBackground(s,n,0,a,0),position:"absolute"},u=new hU({tag:"div",className:"dd-svg-border-element",style:l});this.wrapper.addChildren(u)}},{key:"_renderTopLeftCorner",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.corner||!t.corner.topLeft)return null;var n=t.corner.topLeft,i=a/2,r={top:0,left:0,width:n.width+a,height:n.height+a,backgroundRepeat:"no-repeat",backgroundImage:this._getBackground(n,i,i,a,a),position:"absolute"},o=new hU({tag:"div",className:"dd-svg-border-element",style:r});this.wrapper.addChildren(o)}},{key:"_renderTopRightCorner",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.corner||!t.corner.topRight)return null;var n=t.corner.topRight,i=a/2,r={top:0,right:0,width:n.width+a,height:n.height+a,backgroundRepeat:"no-repeat",backgroundImage:this._getBackground(n,i,i,a,a),position:"absolute"},o=new hU({tag:"div",className:"dd-svg-border-element",style:r});this.wrapper.addChildren(o)}},{key:"_renderBottomRightCorner",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.corner||!t.corner.bottomRight)return null;var n=t.corner.bottomRight,i=a/2,r={bottom:0,right:0,width:n.width+a,height:n.height+a,backgroundRepeat:"no-repeat",backgroundImage:this._getBackground(n,i,i,a,a),position:"absolute"},o=new hU({tag:"div",className:"dd-svg-border-element",style:r});this.wrapper.addChildren(o)}},{key:"_renderBottomLeftCorner",value:function(){var e=this.props,t=e.shape,a=e.strokeWidth;if(!t.corner||!t.corner.bottomLeft)return null;var n=t.corner.bottomLeft,i=a/2,r={bottom:0,left:0,width:n.width+a,height:n.height+a,backgroundRepeat:"no-repeat",backgroundImage:this._getBackground(n,i,i,a,a),position:"absolute"},o=new hU({tag:"div",className:"dd-svg-border-element",style:r});this.wrapper.addChildren(o)}}]),a}(gU);SU.defaultProps={shape:{},stroke:"#ccc",strokeWidth:1};function DU(e,t){var a=e;do{if(IU.call(a,t))return a;a=a.parentElement||a.parentNode}while(null!==a&&1===a.nodeType);return null}function kU(){return d$.uiDelegatorManager.actualRoot}var wU=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).background=new hU({tag:"div",className:"wyn-background-layer"}),e.border=new SU,e.background.addChildren(e.border),e.addChildren(e.background),e}return D()(a,[{key:"renderBackground",value:function(e,t,a){var n;e.backgroundImage?(n=$y({docTheme:t,backgroundColor:e.backgroundColor,dashboardImageList:a,id:e.backgroundImage.id,displayMode:e.backgroundImage.displayMode,repeat:e.backgroundImage.repeat,vAlign:e.backgroundImage.vAlign,hAlign:e.backgroundImage.hAlign})).backgroundImage&&(n.backgroundImage="url(".concat(n.backgroundImage,")")):n=$y({docTheme:t,backgroundColor:e.backgroundColor}),this.background.setStyle(n)}},{key:"renderShadow",value:function(e){if(e.shadow){var t=function(e){var t={};if(e.type!==Ii){var a=bU[e.size],n=e.color;switch(e.type){case Pi:t.boxShadow="inset 0 0 ".concat(a," ").concat(n,", 0 0 ").concat(a," ").concat(n);break;case _i:t.boxShadow="inset 0 0 ".concat(a," ").concat(n);break;case Mi:t.boxShadow="0 0 ".concat(a," ").concat(n)}}return t}(e.shadow);this.background.setStyle(t)}}},{key:"renderBorder",value:function(e){var t;e.border&&e.border.type!==H.BuildInBorderEnums.None&&this.border.apply({shape:(t=e.border.type,Dy.find(function(e){return e.id===t})||null),stroke:e.border.color,strokeWidth:Oi[e.border.size]})}},{key:"setStyle",value:function(e,t,a){this.renderBackground(e,t,a),this.renderShadow(e),this.renderBorder(e)}},{key:"hide",value:function(){this.background.setStyle({display:"none"})}}]),a}(gU),xU=a(22),AU=a.n(xU),IU=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,PU=function(e){k()(o,e);var r=w()(o);function o(e){var t,a,n;I()(this,o),(a=r.call(this)).host=new hU({tag:"div",className:"".concat(null!==(n=e.className)&&void 0!==n?n:""," wyn-scrollbar"),style:e.style}),a.addChildren(a.host);var i=Array.isArray(e.content)?e.content:[e.content];return(t=a.host).addChildren.apply(t,R()(i)),a}return D()(o,[{key:"update",value:function(){this.ins.update()}},{key:"didMountOnRoot",value:function(){this.ins=new dp.a(this.host.getRef(),{minScrollbarLength:30})}},{key:"willUnmount",value:function(){this.ins.destroy()}}]),o}(gU),_U=function(e){k()(u,e);var l=w()(u);function u(e){var i,t,a;I()(this,u),(i=l.call(this)).opened=!1,i._onOpen=[],i._onClose=[],i.items=[],i.clickHandler=function(e){var t;e.stopPropagation(),e.preventDefault();var a=DU(e.target,"[data-popup]");if(a){var n=a.getAttribute("data-popup");null!==(t=i.onSelectCallback)&&void 0!==t&&t.call(RB()(i),i.items[n].value),i.close()}};var n=new hU({tag:"div",className:"wyn-popup-container ".concat(null!==(t=e.customCSS)&&void 0!==t?t:""),onClick:i.clickHandler}),r=new hU({tag:"div"}),o=new PU({content:r,className:"wyn-popup-view"});if(n.addChildren(o),i.popup=n,i.wrapper=r,i.addChildren(n),e.items&&i.setItems(e.items),e.content&&i.setContent(e.content),i.onSelectCallback=e.onSelect,i.width=e.width,e.backdrop){i.backdrop=new hU({tag:"div",className:"wyn-backdrop wyn-backdrop-upper ".concat(null!==(a=e.backdropCustomCSS)&&void 0!==a?a:""),onClick:function(){i.close()}});var s=new vU(d$.uiDelegatorManager.dropDownRoot);s.addChildren(i.backdrop),i.addChildren(s)}return void 0!==e.value&&i.setValue(e.value),setTimeout(function(){return o.update()}),i}return D()(u,[{key:"showPopup",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t,n=this.width||e.width;this.popup.setStyle({display:"block",width:a?"auto":"".concat(n,"px")});var i={width:a?null:n,height:this.popup.getRef().getBoundingClientRect().height,gap:3},r=qy(e,kU(),[{type:"bottom",size:i},{type:"top",size:i},{type:"left",size:i},{type:"right",size:i}],{defaultPopoverSize:i});this.popup.setStyle({top:"".concat(r.top,"px"),left:"".concat(r.left,"px")})}},{key:"show",value:function(e,t){var a,n=1<arguments.length&&void 0!==t&&t;this.showPopup(e,n),null!==(a=this.backdrop)&&void 0!==a&&a.setStyle({display:"block"}),this.opened=!0,this._onOpen.forEach(function(e){return e()})}},{key:"close",value:function(){var e;this.opened&&(this.popup.setStyle({display:"none"}),null!==(e=this.backdrop)&&void 0!==e&&e.setStyle({display:"none"}),this.opened=!1,this._onClose.forEach(function(e){return e()}))}},{key:"toggle",value:function(e){this.opened?this.close():this.show(e)}},{key:"setItems",value:function(e){this.items=e,this.wrapper.removerAllChildren(),this.wrapper.setInnerHTML(u.compiled({items:e}))}},{key:"setContent",value:function(){var e;this.wrapper.removerAllChildren(),this.wrapper.setInnerHTML(""),(e=this.wrapper).addChildren.apply(e,arguments)}},{key:"setValue",value:function(t){var e;null!==(e=this.wrapper.getRef().querySelector(".wyn-popup-active"))&&void 0!==e&&e.classList.remove("wyn-popup-active");var a=this.items.findIndex(function(e){return e.value===t}),n=this.wrapper.getRef().querySelector('[data-popup="'.concat(a,'"]'));n&&n.classList.add("wyn-popup-active")}},{key:"on",value:function(e,t){"open"===e&&this._onOpen.push(t),"close"===e&&this._onClose.push(t)}},{key:"isOpened",value:function(){return this.opened}}]),u}(gU);_U.template='\n    <ul>\n      {{#each items}}\n      <li data-popup="{{@index}}"><a>{{this.label}}</a></li>\n      {{/each}}\n    </ul>\n    ',_U.compiled=AU.a.compile(_U.template);var MU=function(e){k()(o,e);var a=w()(o);function o(e){var r;I()(this,o),(r=a.call(this)).shown=!1,r.clickHandler=function(e){var t,a,n;switch(e.stopPropagation(),e.preventDefault(),null===(t=e.target.dataset)||void 0===t?void 0:t.command){case"drill":var i=e.target.dataset.drill;return void(null!==(a=r.onItemClick)&&void 0!==a&&a.call(RB()(r),+i));case"clear":return r.setShown(!1),void(null!==(n=r.onClear)&&void 0!==n&&n.call(RB()(r)))}},r.onMouseOver=function(e){var t;if(e.stopPropagation(),e.preventDefault(),"drill-detail"===(null===(t=e.target.dataset)||void 0===t?void 0:t.command)){var a=e.target.dataset.drill,n=r.items[+a].detail,i=0<n.items.length;r.popup=new _U({content:new hU({tag:"div",className:"wyn-drill-detail-container",innerHTML:o.detailCompiled(Object.assign(Object.assign({},n),{label:"".concat(Ft("charts.tooltip.drillDetail"),": ").concat(n.label),showItems:i,total:"...Total: ".concat(n.total)}))})}),r.popup.show(e.target.getBoundingClientRect(),!0),r.portal.addChildren(r.popup)}},r.onMouseOut=function(e){var t;e.stopPropagation(),e.preventDefault(),"drill-detail"===(null===(t=e.target.dataset)||void 0===t?void 0:t.command)&&(r.popup.close(),r.portal.removeChildren(r.popup))};var t=new hU({tag:"div",className:"wyn-drill-path-container",style:{display:"none"},onClick:r.clickHandler,onMouseOver:r.onMouseOver,onMouseOut:r.onMouseOut});return r.drillPath=t,r.addChildren(t),r.onItemClick=e.onChange,r.onClear=e.onClear,r.portal=new vU(d$.uiDelegatorManager.dropDownRoot),r.addChildren(r.portal),r}return D()(o,[{key:"setDrillItems",value:function(e){this.items=e,this.drillPath.setInnerHTML(o.compiled({items:e})),this.setShown(1<e.length)}},{key:"setShown",value:function(e){e!==this.shown&&(this.shown=e,this.drillPath.setStyle({display:e?"block":"none"}))}}]),o}(gU);MU.template='\n  <ul>\n    <li>\n       <a data-command="clear" href="javascript:void(0)" class="mdi mdi-close-circle-outline"></a>\n    </li>\n    {{#each items}}\n    <li class="drill-item">\n      {{#if this.active}}\n        <span title="{{this.label}}">{{this.label}}</span>\n        {{else}}\n        <a data-command="drill" data-drill="{{@index}}" href="javascript:void(0)" title="{{this.label}}">{{this.label}}</a>\n      {{/if}}\n      {{#if this.detail}}\n        <a class="mdi mdi-lightbulb-outline" data-command="drill-detail" data-drill="{{@index}}"></a>\n      {{/if}}\n    </li>\n    {{/each}}\n  </ul>\n    ',MU.detailTemplate='\n    <div class="drill-detail">\n      <div class="drill-detail-label">{{label}}</div>\n      {{#if showItems}}\n        <ul class="drill-detail-list">\n          {{#each items}}\n            <li class="drill-detail-item">{{this}}</li>\n          {{/each}}\n          {{#if hasEllipsis}}\n            <li class="drill-detail-item">{{total}}</li>\n          {{/if}}\n        </ul>\n      {{/if}}\n    </div>\n  ',MU.compiled=AU.a.compile(MU.template),MU.detailCompiled=AU.a.compile(MU.detailTemplate);var LU=function(e){k()(i,e);var n=w()(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];I()(this,i),(e=n.call(this)).counter=0;var a=new hU({tag:"div",className:"wyn-loading-block ".concat(t?"wyn-loading-block-themed":""),innerHTML:i.template});return e.overlay=a,e.addChildren(a),e}return D()(i,[{key:"show",value:function(){this.counter++,this.overlay.setStyle({display:"block"})}},{key:"hide",value:function(){0<this.counter&&(this.counter--,0===this.counter&&this.overlay.setStyle({display:"none"}))}}]),i}(gU);LU.template='\n  <div class="loader-icon">\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n  ';var RU,VU=function(e){k()(o,e);var t=w()(o);function o(e){var a;return I()(this,o),(a=t.call(this)).opened=!1,a.jumpToItems=[],a.drillSetting={items:[],_rootItems:[],type:H.DrillDownType.Default,_rootType:H.DrillDownType.Default},a.isMouseIn=!1,a.withMenu=!1,a.getDefaultExpand=function(){var e;return(null===(e=a.pivotSettingHelper)||void 0===e?void 0:e.getDatasetType())!==H.DatasetType.AnalysisModel},a.getDrillItems=function(){return a.drillSetting.items.map(function(e){var t=a.pivotSettingHelper.getColumn(e.name);return{label:e.display||(t.entityName?"[".concat(t.entityName,"].").concat(t.display):t.display),value:e.name}})},a.clickHandler=function(e){e.stopPropagation(),e.preventDefault();var t=DU(e.target,"[data-command]");if(t)switch(t.getAttribute("data-command")){case"keep":return void a.onKeepExclude(a.selected,!0);case"exclude":return void a.onKeepExclude(a.selected,!1);case"drill":return void a.onDrill(t);case"jumpTo":return void a.onJumpTo(t);case"close":a.isMouseIn=!1,a.hide()}},a.portal=new vU(d$.uiDelegatorManager.dropDownRoot),a.tootip=new hU({tag:"div",className:"wyn-tooltip-container",onClick:a.clickHandler}),a.tootip.addEventListener("mouseover",function(){a.isMouseIn=!0}),a.tootip.addEventListener("mouseout",function(){a.isMouseIn=!1}),a.portal.addChildren(a.tootip),a.addChildren(a.portal),e&&(a.jumpToItems=e.jumpToItems,a.onJumpToCallback=e.onJumpTo,a.onDrillToCallback=e.onDrillTo,a.onKeepExclude=e.onKeepExclude,a.DrillPanelContainer=e.DrillPanelContainer),a}return D()(o,[{key:"tryRemovePop",value:function(){this.popup&&(this.portal.removeChildren(this.popup),this.popup=null)}},{key:"onDrill",value:function(e){var t,a=this,n=this.drillSetting,i=n._rootType,r=n.items;if(i===H.DrillDownType.Path)return null!==(t=this.onDrillToCallback)&&void 0!==t&&t.call(this,r[0].name,this.selected),void this.hide();this.tryRemovePop();var o=this.getDrillItems();i===H.DrillDownType.List?this.popup=new _U({items:o,onSelect:function(e){var t;null!==(t=a.onDrillToCallback)&&void 0!==t&&t.call(a,e,a.selected),a.hide()},width:150}):this.popup=new _U({content:new this.DrillPanelContainer({datasetSchemaHelper:this.pivotSettingHelper,drillDownItems:r,onAttributeClick:function(e){var t;null!==(t=a.onDrillToCallback)&&void 0!==t&&t.call(a,e,a.selected),a.hide()},defaultExpand:this.getDefaultExpand()}),width:150}),this.portal.addChildren(this.popup),this.popup.toggle(e.getBoundingClientRect())}},{key:"onJumpTo",value:function(e){var t,a=this;if(1===this.jumpToItems.length)return null!==(t=this.onJumpToCallback)&&void 0!==t&&t.call(this,this.jumpToItems[0].value,this.selected),void this.hide();this.tryRemovePop(),this.popup=new _U({items:this.jumpToItems,onSelect:function(e){var t;null!==(t=a.onJumpToCallback)&&void 0!==t&&t.call(a,e,a.selected),a.hide()},width:150}),this.portal.addChildren(this.popup),this.popup.toggle(e.getBoundingClientRect())}},{key:"show",value:function(e){var t,a,n;this.withMenu=!!e.menu,this.tootip.setInnerHTML(o.compiled(Object.assign(Object.assign({},e),{selectedText:Ft("patterns.tooltip.selectedValue",{count:null===(t=e.selected)||void 0===t?void 0:t.length}),fields:e.fields||[],hideSelectedCount:null!==(a=e.hideSelectedCount)&&void 0!==a&&a,menu:e.menu,showDrill:0<this.drillSetting.items.length,showJump:0<this.jumpToItems.length})));var i={top:e.position.y,left:e.position.x};this.tootip.setStyle({top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),display:"block"});var r=Jy(this.tootip.getRef(),kU());this.tootip.setStyle({top:"".concat(i.top+r.top,"px"),left:"".concat(i.left+r.left,"px")}),this.opened=!0,this.selected=e.selected,null!==(n=this.popup)&&void 0!==n&&n.close()}},{key:"move",value:function(e){var t;if(this.opened){this.tootip.setStyle({top:"".concat(e.y,"px"),left:"".concat(e.x,"px")});var a=Jy(this.tootip.getRef(),kU());this.tootip.setStyle({top:"".concat(e.y+a.top,"px"),left:"".concat(e.x+a.left,"px")}),null!==(t=this.popup)&&void 0!==t&&t.close()}}},{key:"hide",value:function(){var e,t;if(this.opened){if(!this.withMenu&&this.isMouseIn)return;this.tootip.setStyle({display:"none"}),this.opened=!1,null!==(e=this.popup)&&void 0!==e&&e.close(),null!==(t=this.onClose)&&void 0!==t&&t.call(this)}}},{key:"setOnClose",value:function(e){this.onClose=e}},{key:"setDrillSetting",value:function(e){this.drillSetting=e}},{key:"setOnDrillTo",value:function(e){this.onDrillToCallback=e}},{key:"setPivotSettingHelper",value:function(e){this.pivotSettingHelper=e}}]),o}(gU);VU.template='\n    {{#if title}}\n    <div class="tooltip-header">\n    {{title}}\n    </div>\n    {{/if}}\n    <a class="tooltip-close mdi mdi-close" data-command="close"></a>\n    <div class="tooltip-body">\n      <ul class="tooltip-labels">\n        {{#each fields}}\n          <li>{{this.label}}:</li>\n        {{/each}}\n      </ul>\n      <ul class="tooltip-values">\n        {{#each fields}}\n          <li>{{this.value}}</li>\n        {{/each}}\n      </ul>\n      {{#unless hideSelectedCount}}\n        {{#if selected}}\n        <p class="tooltip-selected">{{selectedText}}.</p>\n        {{/if}}\n      {{/unless}}\n    </div>\n    {{#if menu}}\n      <div class="tooltip-footer">\n        <a class="tooltip-command" data-command="keep">\n          <i class="icon-keep"></i>\n          <span>'.concat(Ft("charts.tooltip.keep"),'</span>\n        </a>\n        <a class="tooltip-command" data-command="exclude">\n          <i class="icon-exclude"></i>\n          <span>').concat(Ft("charts.tooltip.exclude"),'</span>\n        </a>\n        {{#if showDrill}}\n          <a class="tooltip-command" data-command="drill">\n            <i class="icon-enable-drill-down"></i>\n            <span>').concat(Ft("charts.tooltip.drill"),'</span>\n          </a>\n        {{/if}}\n        {{#if showJump}}\n          <a class="tooltip-command" data-command="jumpTo">\n            <i class="icon-link"></i>\n            <span>').concat(Ft("charts.tooltip.jump"),"</span>\n          </a>\n        {{/if}}\n      </div>\n    {{/if}}\n    "),VU.compiled=AU.a.compile(VU.template);var NU,EU,FU=(RU={},V()(RU,Da,"left"),V()(RU,ka,"center"),V()(RU,wa,"right"),RU),OU=function(e){k()(i,e);var n=w()(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};I()(this,i),(e=n.call(this)).textStyle={};var a=new hU({tag:"div",className:"".concat(t.className||""," wyn-text-panel"),textContent:t.text,onClick:t.onClick});return e.textHost=a,e.addChildren(a),e}return D()(i,[{key:"setText",value:function(e){this.textHost.setText(e)}},{key:"show",value:function(){var t=this;this.textHost.setStyle({display:"block"}),requestAnimationFrame(function(){if(t.verticalAlignment&&t.noDataHost){var e=t.textHost.getRef().getBoundingClientRect().height-t.noDataHost.getRef().getBoundingClientRect().height;t.textHost.setStyle({paddingTop:"".concat(e*t.verticalAlignment/100,"px")})}})}},{key:"hide",value:function(){this.textHost.setStyle({display:"none"})}},{key:"setTextStyle",value:function(e,t){this.textStyle=e,this.textHost.setStyle(Object.assign(Object.assign({},e),{fontSize:Jc(e.fontSize,t),fontWeight:Uu(e.fontWeight)}))}},{key:"setScale",value:function(e){this.textHost.setStyle({fontSize:Jc(this.textStyle.fontSize,e)})}},{key:"setHtml",value:function(e){this.textHost.setInnerHTML(e)}},{key:"seNoData",value:function(e){var t=e.textAlign,a=e.imageSrc,n=e.text,i=e.verticalAlignment;this.setNodataText(n),t&&this.noDataHost&&this.noDataHost.setStyle({textAlign:FU[t]}),a&&this.textHost.setStyle({backgroundImage:"url(".concat(a,")"),backgroundSize:"".concat(e.imageSize)}),this.verticalAlignment=i}},{key:"setNodataText",value:function(e){this.noDataHost=new hU({tag:"div",className:"wyn-text-noData"});var t=e.split("\n").map(function(e){return'<div style="height:2em; line-height: 2em">'.concat(e,"</div>")}).join("");this.noDataHost.setInnerHTML(t),this.textHost.removerAllChildren(),this.textHost.setInnerHTML(""),this.textHost.addChildren(this.noDataHost)}}]),i}(gU),HU=function(e){k()(i,e);var n=w()(i);function i(e){var t;I()(this,i),t=n.call(this);var a=new hU({tag:"a",className:e.className,onClick:e.onClick});return t.btn=a,t.addChildren(a),t}return D()(i,[{key:"addClassName",value:function(e){this.btn.addClassName(e)}},{key:"removeClassName",value:function(e){this.btn.removeClassName(e)}}]),i}(gU);(EU=NU=NU||{}).Horizontal="Horizontal",EU.Vertical="Vertical";var BU=function(e){k()(A,e);var x=w()(A);function A(r){var n,e,t,a,i,o,s,l,u,c,d,p,h,y,g,m;I()(this,A),(n=x.call(this)).clickHandler=function(e){var t;if(e.stopPropagation(),e.preventDefault(),e.target.hasAttribute("data-key")){var a=e.target.getAttribute("data-key");if(a===n.active)return;null!==(t=n.onSelectCallback)&&void 0!==t&&t.call(RB()(n),a)}},n.onShowDropDown=function(e){n.popup.toggle(e.target.getBoundingClientRect())};var f=new hU({tag:"div",className:"wyn-tab-panel",onClick:n.clickHandler});r.direction===NU.Vertical?f.addClassName("wyn-tab-panel-vertical"):f.addClassName("wyn-tab-panel-horizontal"),null!==(e=r.tabStyle)&&void 0!==e&&e.position&&f.addClassName("wyn-tab-panel-".concat(r.tabStyle.position));var v="",b="",C="",T=r.tabStyle;T&&("fixed"===(null===(t=T.width)||void 0===t?void 0:t.mode)&&(v="width: ".concat(r.tabStyle.width.value,"px;"),b="width: ".concat(r.tabStyle.width.value,"px;")),null!==(a=T.inactiveTab)&&void 0!==a&&a.backColor&&(v="".concat(v," background-color: ").concat(T.inactiveTab.backColor,";")),null!==(i=T.inactiveTab)&&void 0!==i&&i.border.color&&(v="".concat(v," border-color: ").concat(T.inactiveTab.border.color,";")),null!==(o=T.inactiveTab)&&void 0!==o&&o.textStyle.color&&(v="".concat(v," color: ").concat(T.inactiveTab.textStyle.color,";")),null!==(s=T.activeTab)&&void 0!==s&&s.backColor?b="".concat(b," background-color: ").concat(T.activeTab.backColor,";"):null!==(l=T.inactiveTab)&&void 0!==l&&l.backColor&&(b="".concat(b," background-color: ").concat(T.inactiveTab.backColor,";")),null!==(u=T.activeTab)&&void 0!==u&&u.border.color?b="".concat(b," border-color: ").concat(T.activeTab.border.color,";"):null!==(c=T.inactiveTab)&&void 0!==c&&c.border.color&&(b="".concat(b," border-color: ").concat(T.inactiveTab.border.color,";")),null!==(d=T.activeTab)&&void 0!==d&&d.textStyle.color?b="".concat(b," color: ").concat(T.activeTab.textStyle.color,";"):null!==(p=T.inactiveTab)&&void 0!==p&&p.textStyle.color&&(b="".concat(b," color: ").concat(T.inactiveTab.textStyle.color,";")),null!==(h=T.activeTab)&&void 0!==h&&h.indicator&&(C="background-color: ".concat(T.activeTab.indicator.color)),"distribute"===(null===(y=T.width)||void 0===y?void 0:y.mode)&&r.direction!==NU.Vertical&&f.addClassName("wyn-tab-panel-distribute")),n.normalStyle=v,n.activeStyle=b;var S=new hU({tag:"div",className:"wyn-tab-panel-items-inner",onClick:n.clickHandler,innerHTML:A.compiled({items:r.items.map(function(e,t){var a,n,i="text-align: ".concat((null===(a=r.tabStyle)||void 0===a?void 0:a.textAlignment)||"center",";");return 0<(null===(n=r.tabStyle)||void 0===n?void 0:n.gap)&&0<t&&(i="".concat(i," padding-left:").concat(r.tabStyle.gap,"px")),Object.assign(Object.assign({},e),{className:r.direction===NU.Vertical?"wyn-block":"wyn-inline-block",normalStyle:v,style:i,indicatorStyle:C})})})});r.direction===NU.Horizontal&&null!==(g=r.tabStyle)&&void 0!==g&&g.alignment&&S.setStyle({"text-align":r.tabStyle.alignment});var D=new PU({className:"wyn-tab-panel-items ".concat(0<(null===(m=r.tabStyle)||void 0===m?void 0:m.gap)?"":"wyn-tab-panel-items-without-gap"),content:S});if(n.onSelectCallback=r.onSelect,n.itemPanel=S,f.addChildren(D),r.disableBtn)f.addClassName("wyn-tab-panel-no-button");else{var k=new HU({className:"wyn-tab-btn mdi mdi-dots-vertical",onClick:n.onShowDropDown});f.addChildren(k)}n.popup=new _U({items:r.items.map(function(e){return{value:e.key,label:e.text}}),onSelect:r.onSelect,width:100,backdrop:!0});var w=new vU(d$.uiDelegatorManager.dropDownRoot);return w.addChildren(n.popup),n.addChildren(f,w),n.wrapper=f,n}return D()(A,[{key:"unsetActive",value:function(){this.active=null,this.popup.setValue(null);var e=this.itemPanel.getRef().querySelector(".active");e&&(e.classList.remove("active"),e.children[0].setAttribute("style",this.normalStyle))}},{key:"setActive",value:function(e){if(e!==this.active){this.unsetActive();var t=this.itemPanel.getRef().querySelector('[data-key="'.concat(e,'"]'));t&&(t.parentElement.classList.add("active"),t.setAttribute("style",this.activeStyle),t.scrollIntoView({block:"nearest"})),this.popup.setValue(e),this.active=e}}},{key:"getRef",value:function(){return this.wrapper.getRef()}},{key:"addClassName",value:function(e){this.wrapper.addClassName(e)}}]),A}(gU);BU.template='\n    <ul>\n      {{#each items}}<li class="{{className}}" style="{{this.style}}"><a data-key="{{this.key}}" title="{{this.text}}" style="{{this.normalStyle}}">{{this.text}} <i style="{{this.indicatorStyle}}"></i></a></li>{{/each}}\n    </ul>\n    ',BU.compiled=AU.a.compile(BU.template);var UU=function(e){k()(l,e);var s=w()(l);function l(e){var n;I()(this,l),(n=s.call(this)).invokePropsOnResize=Object(Ho.debounce)(function(){n._disposed||n.onResizeCallback()},600),n.resetScroll=function(){n.expand.scrollLeft=1e5,n.expand.scrollTop=1e5,n.shrink.scrollLeft=1e5,n.shrink.scrollTop=1e5},n.onResize=function(){if(!n._disposed){n.rafId=0;var e=n.sensor.parentElement,t=e.offsetWidth,a=e.offsetHeight;n.lastWidth===t&&n.lastHeight===a||(n.lastWidth=t,n.lastHeight=a,n.invokePropsOnResize())}},n.onScroll=function(){n.rafId||(n.rafId=requestAnimationFrame(n.onResize),n.resetScroll())},n.onResizeCallback=e;var t=new hU({tag:"div",className:"resize-sensor"}),a=new hU({tag:"div",className:"resize-sensor-expand",onScroll:n.onScroll}),i=new hU({tag:"div",style:{width:"100000px",height:"100000px"}});a.addChildren(i);var r=new hU({tag:"div",className:"resize-sensor-shrink",onScroll:n.onScroll}),o=new hU({tag:"div"});return r.addChildren(o),t.addChildren(a,r),n.sensor=t.getRef(),n.expand=a.getRef(),n.shrink=r.getRef(),n.addChildren(t),n}return D()(l,[{key:"willUnmount",value:function(){this._disposed=!0}},{key:"didMountOnRoot",value:function(){var e=this.sensor.parentElement,t=e.offsetWidth,a=e.offsetHeight;this.lastWidth=t,this.lastHeight=a,this.resetScroll()}}]),l}(gU),zU=function(e){k()(i,e);var n=w()(i);function i(e){var a;I()(this,i),(a=n.call(this)).onClickHandler=function(e){if(e.target.hasAttribute("data-cmd")){var t;switch(e.target.getAttribute("data-cmd")){case"first":t=1;break;case"prev":if(1===a.value)return;t=a.value-1;break;case"next":if(a.value===a.total)return;t=a.value+1;break;case"last":t=a.total}if(t===a.value)return;a.onChangeCallback(t),a.setValue(t)}},a.onSubmitHandler=function(e){e.stopPropagation(),e.preventDefault();var t=+a.valueDom.value;Number.isNaN(t)&&(t=1),t<1?t=1:t>a.total&&(t=a.total),t!==a.value?(a.setValue(t),a.onChangeCallback(t)):a.render()};var t=new hU({tag:"div",className:"wyn-pagination ".concat(e.className||""),onClick:a.onClickHandler});return a.wrapper=t,a.addChildren(t),a.onChangeCallback=e.onChange,a.value=e.value||1,a.total=e.total||1,a.init(),a}return D()(i,[{key:"init",value:function(){this.wrapper.setInnerHTML(i.compiled({value:this.value,total:this.total})),this.valueDom=this.wrapper.getRef().querySelector("[data-role=pagination-value]"),this.totalDom=this.wrapper.getRef().querySelector("[data-role=pagination-total]"),this.wrapper.getRef().querySelector("form").addEventListener("submit",this.onSubmitHandler),this.valueDom.addEventListener("blur",this.onSubmitHandler),this.render()}},{key:"render",value:function(){var e=this.value.toString();this.valueDom.value=e,this.totalDom.textContent=this.total.toString(),this.valueDom.style.width="".concat(e.length,"em"),1===this.value?this.wrapper.addClassName("wyn-pagination-prev-disabled"):this.wrapper.removeClassName("wyn-pagination-prev-disabled"),this.value===this.total?this.wrapper.addClassName("wyn-pagination-next-disabled"):this.wrapper.removeClassName("wyn-pagination-next-disabled")}},{key:"willUnmount",value:function(){this.wrapper.getRef().querySelector("form").removeEventListener("submit",this.onSubmitHandler),this.valueDom.removeEventListener("blur",this.onSubmitHandler)}},{key:"setValue",value:function(e,t){this.value=e,t&&(this.total=t),this.render()}},{key:"blur",value:function(){this.valueDom.blur()}},{key:"show",value:function(){this.wrapper.setStyle({display:"block"})}},{key:"hide",value:function(){this.wrapper.setStyle({display:"none"})}},{key:"disable",value:function(){this.wrapper.addClassName("wyn-pagination-disabled")}},{key:"enable",value:function(){this.wrapper.removeClassName("wyn-pagination-disabled")}}]),i}(gU);zU.template='\n    <a data-cmd="first" class="mdi mdi-chevron-double-left"></a>\n    <a data-cmd="prev" class="mdi mdi-chevron-left"></a>\n    <form>\n      <label>\n        <input data-role="pagination-value"/>\n        <span>/</span>\n        <span data-role="pagination-total"></span>\n      </label>\n    </form>\n    <a data-cmd="next" class="mdi mdi-chevron-right"></a>\n    <a data-cmd="last" class="mdi mdi-chevron-double-right"></a>\n  ',zU.compiled=AU.a.compile(zU.template);var KU=function(){if("object"!==("undefined"==typeof window?"undefined":E()(window)))return!1;var e=window.navigator.userAgent,t=e.indexOf("Trident/"),a=e.indexOf("MSIE ");return-1<t||-1<a}(),jU="object"===("undefined"==typeof window?"undefined":E()(window))&&-1<window.navigator.userAgent.indexOf("Edge/"),WU=!KU&&!jU,GU=function(e){k()(n,e);var a=w()(n);function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return I()(this,n),(e=a.call(this)).host=new hU({tag:"div",className:"wyn-iframe-polyfill ".concat(t.className||"")}),e.iframe=new hU({tag:"iframe",className:"wyn-iframe-polyfill-srcdoc"}),t.name&&e.iframe.setAttribute("name",t.name),t.title&&e.iframe.setAttribute("title",t.title),e.sandbox=t.sandbox,e.srcDoc=t.srcDoc,e.src=t.src,e.addChildren(e.host),e.host.addChildren(e.iframe),e}return D()(n,[{key:"render",value:function(){if(!this.srcDoc)return this.src&&this.iframe.setAttribute("src",this.src),this.iframe.setAttribute("allowFullScreen",!0),void(this.sandbox&&this.iframe.setAttribute("sandbox",this.sandbox));this.iframe.setAttribute("sandbox","allow-same-origin"),WU?this.iframe.setAttribute("srcDoc",this.srcDoc):this._renderIESrcDoc()}},{key:"_renderIESrcDoc",value:function(){var e=this.iframe.getRef().contentWindow.document;e.open("text/html","replace"),e.write(this.srcDoc),e.close()}},{key:"didMount",value:function(){this.render()}},{key:"sendMessage",value:function(e,t){this.iframe.getRef().contentWindow.postMessage(e,t||"*")}},{key:"update",value:function(e){this.sandbox=e.sandbox,this.srcDoc=e.srcDoc,this.src=e.src,this.render()}}]),n}(gU),YU=function(e){k()(i,e);var n=w()(i);function i(e){var a;I()(this,i),(a=n.call(this)).onChangeHandler=function(e){e.stopPropagation(),e.preventDefault();var t=a.searchboxDom.value;a.value=t,a.debouncedAfterValueChange()},a.onClearHandler=function(e){e.stopPropagation(),e.preventDefault(),a.searchboxDom.value="",a.value="",a.debouncedAfterValueChange()},a.onCheckHandler=function(e){var t;e.preventDefault(),e.stopPropagation(),null!==(t=a.onCheck)&&void 0!==t&&t.call(RB()(a))},a.afterValueChange=function(){a.onChange(a.value),void 0===a.value||""===a.value?(a.checkBtn.disabled=!0,a.host.removeClassName("wyn-search-box-clear")):(a.checkBtn.disabled=!1,a.host.addClassName("wyn-search-box-clear"))},a.debouncedAfterValueChange=Object(Ho.debounce)(a.afterValueChange,300);var t=new hU({tag:"div",className:"wyn-search-box ".concat(e.className||"")});return a.host=t,a.addChildren(t),a.value=e.value||"",a.placeholder=e.placeholder||"",a.onChange=e.onChange,a.onCheck=e.onCheck,a.init(),a}return D()(i,[{key:"init",value:function(){var e=i.compiled({value:this.value,placeholder:this.placeholder});this.host.setInnerHTML(e);var t=this.host.getRef().querySelector('[data-role="searchbox"]'),a=this.host.getRef().querySelector('[data-role="check"]');this.searchboxDom=t,this.checkBtn=a,t.addEventListener("input",this.onChangeHandler),a.addEventListener("click",this.onCheckHandler),this.host.getRef().querySelector('[data-role="clear"]').addEventListener("click",this.onClearHandler)}},{key:"willUnmount",value:function(){this.searchboxDom.removeEventListener("input",this.onChangeHandler),this.checkBtn.removeEventListener("click",this.onCheckHandler),this.host.getRef().querySelector('[data-role="clear"]').removeEventListener("click",this.onClearHandler)}},{key:"setValue",value:function(e){this.value=e,this.searchboxDom.value=e}},{key:"hide",value:function(){this.host.addClassName("wyn-force-hide"),this.searchboxDom.value="",this.value=""}},{key:"show",value:function(){this.host.removeClassName("wyn-force-hide")}}]),i}(gU);YU.template='\n    <div>\n    <label>\n    <span class="mdi mdi-magnify" data-role="magnify"></span>\n    <input data-role="searchbox" value="{{value}}" placeholder="{{placeholder}}"/>\n    <button data-role="clear" class="mdi mdi-close"></button>\n    </label>\n    <button class="mdi mdi-check" data-role="check" disabled></button>\n    </div>\n    ',YU.compiled=AU.a.compile(YU.template);var qU=function(e){k()(i,e);var n=w()(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};I()(this,i),(e=n.call(this)).shown=!1,e._onClose=function(){},e.onClose=function(){e._onClose&&e._onClose()},e.getDomRef=function(){return e.container.getRef()};var a=new vU(d$.uiDelegatorManager.dropDownRoot);return e.container=new hU({tag:"div",className:"".concat(t.className||""," wyn-popup-container"),style:t.style}),a.addChildren(e.container),e.addChildren(a),t.backdrop&&(e.backdrop=new hU({tag:"div",className:"wyn-backdrop",onClick:function(){e.hide()}}),a.addChildren(e.backdrop)),t.onClose&&(e._onClose=t.onClose),e}return D()(i,[{key:"setContents",value:function(){var e;(e=this.container).addChildren.apply(e,arguments)}},{key:"showPopup",value:function(e,t){var a=qy(e,d$.uiDelegatorManager.root,[{type:"bottom",size:t},{type:"top",size:t},{type:"left",size:t},{type:"right",size:t}],{defaultPopoverSize:t});this.container.setStyle({top:"".concat(a.top,"px"),left:"".concat(a.left,"px"),display:"flex",width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}},{key:"show",value:function(e,t){var a;this.shown||(this.showPopup(e,t),null!==(a=this.backdrop)&&void 0!==a&&a.setStyle({display:"block"}),this.shown=!0)}},{key:"hide",value:function(){var e;this.shown&&(this.container.setStyle({display:"none"}),null!==(e=this.backdrop)&&void 0!==e&&e.setStyle({display:"none"}),this.shown=!1,this._onClose&&this._onClose())}},{key:"toggle",value:function(e,t){this.shown?this.hide():this.show(e,t)}}]),i}(mU),JU=function(e){k()(n,e);var t=w()(n);function n(e){var a;return I()(this,n),(a=t.call(this)).onClickHandler=function(e){if(e.target.hasAttribute("data-cmd")){var t=e.target.getAttribute("data-cmd");t!==H.ActionMenuType.SlicerSort&&t!==H.ActionMenuType.CleanSliceFilter||e.stopPropagation(),a.onClick(t)}},a.hostContainer=new hU({tag:"ul",className:"wyn-actionbar-container",onClick:a.onClickHandler}),a.addChildren(a.hostContainer),e.items&&a.setItems(e.items),a.onClick=e.onClick,a}return D()(n,[{key:"setItems",value:function(e){var a=this;this.hostContainer.removerAllChildren(),e.forEach(function(e){var t=new hU({tag:"li",className:"wyn-actionbar-item ".concat(e.icon),title:e.text});t.setAttribute("data-cmd",e.value),a.hostContainer.addChildren(t)})}}]),n}(gU),XU=function(e){k()(o,e);var n=w()(o);function o(e){var s,t;I()(this,o),(s=n.call(this)).onClickHandler=function(e){if(e.target.hasAttribute("data-key")){var t=+e.target.getAttribute("data-key");s.props.active!==t&&s.props.onChangePage(t)}else{if(e.target.hasAttribute("data-cmd"))"prev"===e.target.getAttribute("data-cmd")?s.prevGroup():s.nextGroup()}},s.prevGroup=function(){var e=s.props.onChangePage,t=s.state.groupIndex;if(0<t){var a=s.getPageByGroupIndex(t-1),n=s.getRange(t-1);s.setState({range:n,groupIndex:t-1}),s.renderItems(),e(a)}},s.nextGroup=function(){var e=s.props,t=e.onChangePage,a=e.groupSize,n=e.items.length,i=s.state.groupIndex;if((i+1)*a<n){var r=s.getPageByGroupIndex(i+1),o=s.getRange(i+1);s.setState({range:o,groupIndex:i+1}),s.renderItems(),t(r)}},s.props=e;var a=s.getGroupIndex();return s.state={range:s.getRange(a),groupIndex:a},s.container=new hU({tag:"div",className:"wyn-slide-indecator ".concat(null!==(t=e.className)&&void 0!==t?t:""),onClick:s.onClickHandler}),s.addChildren(s.container),s.renderItems(),s.setActive(e.active),s}return D()(o,[{key:"renderItems",value:function(){var e=this.state,t=e.range,a=e.groupIndex,n=this.props,i=n.groupSize,r=n.items;this.container.setInnerHTML(o.compiled({items:t,canPrev:0<a,canNext:(a+1)*i<r.length}))}},{key:"setState",value:function(e){this.state=Object.assign(Object.assign({},this.state),e)}},{key:"refreshGroup",value:function(){var e=this.getGroupIndex();this.setState({range:this.getRange(e),groupIndex:e})}},{key:"getRange",value:function(e){var t=this.props,a=t.groupSize,n=t.items,i=this.props.items.length;return(i<a?Object(ae.range)(0,i):i<e*a+a?Object(ae.range)(i-a,i):Object(ae.range)(e*a,e*a+a)).map(function(e){return{text:n[e],value:e,label:e+1}})}},{key:"getPageByGroupIndex",value:function(e){var t=this.props.active,a=this.getRange(e);return a.find(function(e){return e.value===t})?t:a[0].value}},{key:"getGroupIndex",value:function(){var e=this.props;return~~(e.active/e.groupSize)}},{key:"needRefreshGroup",value:function(){var t=this.props.active;return-1!==t&&!this.state.range.find(function(e){return e.value===t})}},{key:"unsetActiveUI",value:function(){var e=this.container.getRef().querySelector(".wyn-slide-indecator-item-active");null!=e&&e.classList.remove("wyn-slide-indecator-item-active")}},{key:"setActive",value:function(e){this.props.active=e,this.needRefreshGroup()&&(this.refreshGroup(),this.renderItems()),this.unsetActiveUI();var t=this.container.getRef().querySelector('[data-key="'.concat(e,'"]'));null!=t&&t.classList.add("wyn-slide-indecator-item-active")}}]),o}(gU);XU.template='\n    <ul>\n    {{#if canPrev}}\n      <li data-cmd="prev" class="mdi mdi-chevron-left"></li>\n    {{/if}}\n    {{#each items}}\n      <li class="wyn-slide-indecator-item" data-key="{{this.value}}" data-label="{{this.label}}" title="{{this.text}}"></li>\n    {{/each}}\n    {{#if canNext}}\n      <li data-cmd="next" class="mdi mdi-chevron-right"></li>\n    {{/if}}\n    </ul>\n    ',XU.compiled=AU.a.compile(XU.template);var QU=function(e){k()(s,e);var o=w()(s);function s(e){var i;I()(this,s),(i=o.call(this)).opened=!1,i.subMenuShouldOnLeft=!1,i.closeMenu=function(e){var t;e.stopPropagation(),e.preventDefault(),i.close(),null!==(t=i.onBackdropClick)&&void 0!==t&&t.call(RB()(i))},i.onMouseOver=function(e){i.closeSubMenu();var t=DU(e.target,"[data-submenu]");if(t){var a=t.getAttribute("data-submenu"),n=i.items[a].children;i.subPop=new s(n instanceof dU?{content:n,maxHeight:i.maxHeight,maxWidth:i.maxWidth,backdrop:!1}:{items:n,maxHeight:i.maxHeight,maxWidth:i.maxWidth,backdrop:!1,onSelect:function(e){i.onSelectCallback(e),i.close()}}),i.addChildren(i.subPop),i.subPop.showSubMenu(t,i.subMenuShouldOnLeft)}},i.onBackdropMouseOver=function(e){i.closeSubMenu()},i.clickHandler=function(e){var t;e.stopPropagation(),e.preventDefault(),i.scrollbar.update();var a=DU(e.target,"[data-popup]");if(a){var n=a.getAttribute("data-popup");null!==(t=i.onSelectCallback)&&void 0!==t&&t.call(RB()(i),i.items[n].value),i.close()}},i.maxHeight=e.maxHeight,i.maxWidth=e.maxWidth;var t=new vU(d$.uiDelegatorManager.dropDownRoot),a=new hU({tag:"div",className:"wyn-popup-container",style:{maxWidth:"".concat(e.maxWidth,"px"),maxHeight:"".concat(e.maxHeight,"px"),minWidth:"150px"},onMouseOver:i.onMouseOver,onClick:i.clickHandler}),n=new hU({tag:"div"}),r=new PU({content:n,className:"wyn-popup-view",style:{maxHeight:"".concat(e.maxHeight,"px")}});return i.scrollbar=r,a.addChildren(r),i.popup=a,i.wrapper=n,t.addChildren(a),i.addChildren(t),e.items&&i.setItems(e.items),e.content&&i.setContent(e.content),i.onSelectCallback=e.onSelect,i.backdrop=new hU({tag:"div",className:"wyn-backdrop",onClick:i.closeMenu,onContextMenu:i.closeMenu,onMouseOver:i.onBackdropMouseOver}),i.onBackdropClick=e.onBackdropClick,t.addChildren(i.backdrop),i}return D()(s,[{key:"showSubMenu",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t;this.subMenuShouldOnLeft=a,this.popup.setStyle({display:"block"});var n=e.getBoundingClientRect(),i=this.popup.getRef().getBoundingClientRect(),r=0<i.height-(window.innerHeight-n.top),o="".concat(r?n.bottom-i.height+1:n.top-1,"px");if(this.opened=!0,a)this.popup.setStyle({top:o,left:"".concat(n.left-i.width-5,"px")});else{var s={width:i.width,height:i.height},l=qy(n,kU(),[{type:"right",size:s},{type:"left",size:s}],{defaultPopoverSize:s});"left"===l.type&&(this.subMenuShouldOnLeft=!0),this.popup.setStyle({top:o,left:"".concat(l.left,"px")})}}},{key:"closeSubMenu",value:function(){this.subPop&&(this.subPop.wrapper.removerAllChildren(),this.removeChildren(this.subPop),this.subPop=null)}},{key:"show",value:function(e,t){var a;this.opened&&this.close(),this.popup.setStyle({display:"block",left:"".concat(e,"px"),top:"".concat(t,"px")});var n=this.popup.getRef().getBoundingClientRect(),i=kU().getBoundingClientRect();n.bottom>i.bottom&&this.popup.setStyle({top:"".concat(t-n.height,"px")}),n.right>i.right&&this.popup.setStyle({left:"".concat(e-n.width,"px")}),null!==(a=this.backdrop)&&void 0!==a&&a.setStyle({display:"block"}),this.opened=!0}},{key:"close",value:function(){var e;this.opened&&(this.popup.setStyle({display:"none"}),null!==(e=this.backdrop)&&void 0!==e&&e.setStyle({display:"none"}),this.opened=!1,this.closeSubMenu(),this.scrollbar.update())}},{key:"setItems",value:function(e){var t=this;this.items=e,this.wrapper.removerAllChildren(),this.wrapper.setInnerHTML(s.compiled({items:e})),setTimeout(function(){return t.scrollbar.update()})}},{key:"setContent",value:function(e){var t=this;this.wrapper.removerAllChildren(),this.wrapper.setInnerHTML(""),this.wrapper.addChildren(e),setTimeout(function(){return t.scrollbar.update()})}}]),s}(gU);QU.template='\n    <ul>\n      {{#each items}}\n        {{#if this.children}}\n          <li data-submenu="{{@index}}" class="{{#if this.disabled}}disabled{{/if}}">\n            {{#if this.icon}}<i class="{{this.icon}}"></i>{{/if}}\n            <span title="{{this.label}}">{{this.label}}</span>\n            <i class="mdi mdi-chevron-right"></i>\n          </li>\n        {{else}}\n          <li data-popup="{{@index}}" class="{{#if this.disabled}}disabled{{/if}}">\n            {{#if this.icon}}<i class="{{this.icon}}"></i>{{/if}}\n            <span title="{{this.label}}">{{this.label}}</span>\n          </li>\n        {{/if}}\n      {{/each}}\n    </ul>\n    ',QU.compiled=AU.a.compile(QU.template);var ZU=function(e){k()(i,e);var n=w()(i);function i(e){var t;I()(this,i),(t=n.call(this)).history=[],t.onClickHandler=function(){if(!t.isEmpty()){var e=t.history.pop();t.onBack(e),t.sync()}},t.onBack=e.onBack;var a=new hU({tag:"div",className:"wyn-nav-stack-btn mdi mdi-keyboard-return",onClick:t.onClickHandler,title:e.title});return t.host=a,t.addChildren(a),t}return D()(i,[{key:"push",value:function(e){this.history.push(e),this.sync()}},{key:"isEmpty",value:function(){return 0===this.history.length}},{key:"sync",value:function(){this.isEmpty()?this.host.setStyle({display:"none"}):this.host.setStyle({display:"block"})}}]),i}(gU),$U=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).shown=!1,t.msgs=[],t.current=null,t.onClickHander=function(e){switch(e.stopPropagation(),e.preventDefault(),e.target.getAttribute("data-cmd")){case"dismiss":t.doDismiss();break;case"showDetails":case"showAll":t.config.onShowAll();break;case"dismissAll":t.config.onDismissAll()}},t.host=new hU({tag:"div",className:"wyn-notification wyn-notification-".concat(e.type),onClick:t.onClickHander}),t.addChildren(t.host),t.config=e,t}return D()(n,[{key:"doDismiss",value:function(){var e=this.msgs.indexOf(this.current);this.config.onDismiss(e)}},{key:"render",value:function(){if(this.current){var e=n.compiled({title:this.current.title,count:this.msgs.length,isMulti:1<this.msgs.length,showDetial:1===this.msgs.length&&this.msgs[0].content});this.host.setInnerHTML(e)}}},{key:"setMessages",value:function(e){this.msgs=e,this.current&&this.shown&&-1!==e.indexOf(this.current)||!e.length||(this.current=e[e.length-1]),this.render()}},{key:"show",value:function(){this.shown||(this.host.setStyle({display:"block"}),this.shown=!0)}},{key:"hide",value:function(){this.shown&&(this.host.setStyle({display:"none"}),this.shown=!1)}},{key:"reset",value:function(){this.current=null}}]),n}(gU);$U.template='\n    <div class="wyn-notification-content">\n      <div class="wyn-notification-title">{{title}}</div>\n      <div class="wyn-notification-footer">\n        {{#if showDetial}}\n        <a class="wyn-notification-btn" data-cmd="showDetails">'.concat(Ft("notifications.showDetails"),'</a>\n        {{/if}}\n        <a class="wyn-notification-btn" data-cmd="dismiss">').concat(Ft("notifications.dismiss"),'</a>\n        {{#if isMulti}}\n        <a class="wyn-notification-btn wyn-float-right" data-cmd="dismissAll">').concat(Ft("notifications.dismissAll"),'</a>\n        <a class="wyn-notification-btn wyn-float-right" data-cmd="showAll">').concat(Ft("notifications.showAll"),'</a>\n        {{/if}}\n      </div>\n    </div>\n    <div class="wyn-notification-icon mdi mdi-alert-circle-outline">\n    </div>\n    {{#if isMulti}}\n    <a class="wyn-notification-count">+{{count}}</div>\n    {{/if}}\n  '),$U.compiled=AU.a.compile($U.template);var ez=function(e){k()(l,e);var s=w()(l);function l(e){var a;I()(this,l),(a=s.call(this)).msgs=[],a.shown=!1,a.detailPanelClickHander=function(e){switch(e.stopPropagation(),e.preventDefault(),e.target.getAttribute("data-cmd")){case"dismiss":var t=e.target.getAttribute("data-idx");a.config.onDismiss(+t);break;case"dismissAll":a.config.onDismissAll()}};var t=new hU({tag:"div",className:"wyn-message-box wyn-message-box-error",onClick:a.detailPanelClickHander}),n=new hU({tag:"div",className:"wyn-message-box-header"}),i=new hU({tag:"div"}),r=new PU({className:"wyn-message-box-body",content:i}),o=new hU({tag:"div",className:"wyn-message-box-footer",innerHTML:'<a data-cmd="dismissAll">'.concat(Ft("notifications.dismissAll"),"</a>")});return t.addChildren(n,r,o),a.container=t,a.headerPanel=n,a.bodyPanel=i,a.backdrop=new hU({tag:"div",className:"wyn-message-box-backdrop",onClick:function(){e.onBackDropClick()}}),a.addChildren(t,a.backdrop),a.config=e,a}return D()(l,[{key:"render",value:function(){var e=l.compiled({msgs:this.msgs});this.bodyPanel.setInnerHTML(e),this.headerPanel.setText("".concat(this.msgs.length," ").concat(Ft("notifications.errorCategory")))}},{key:"setMessages",value:function(e){this.msgs=e,this.render()}},{key:"show",value:function(){this.shown||(this.shown=!0,this.container.setStyle({display:"block"}),this.backdrop.setStyle({display:"block"}))}},{key:"hide",value:function(){this.shown&&(this.shown=!1,this.container.setStyle({display:"none"}),this.backdrop.setStyle({display:"none"}))}}]),l}(gU);ez.template='\n    <ul>\n      {{#each msgs}}\n      <li class="wyn-message-box-item">\n        <div class="wyn-message-box-item-top">\n          {{this.title}}\n          <a class="mdi mdi-close" data-cmd="dismiss" data-idx="{{@index}}"></a>\n        </div>\n        <div class="wyn-message-box-item-bottom">\n          {{this.content}}\n        </div>\n      </li>\n      {{/each}}\n    </ul>\n  ',ez.compiled=AU.a.compile(ez.template);var tz=function(e){k()(d,e);var c=w()(d);function d(e){var t,a=e.contentRender,n=e.height,i=e.width,r=e.onClosed;I()(this,d),t=c.call(this);var o=new vU(d$.uiDelegatorManager.dropDownRoot);t.portal=o;var s=new hU({tag:"div",className:"wyn-modal-mask"});t.mask=s;var l=new hU({tag:"div",style:{width:i||"calc(100% - 60px)",height:n||"calc(100% - 50px)"},className:"wyn-modal-content-container"}),u=new hU({tag:"button",className:"mdi mdi-close wyn-modal-close-btn",onClick:function(e){e.stopPropagation(),e.preventDefault(),null!=r&&r(),t.destroy()}});return l.addChildren(u),s.addChildren(l),o.addChildren(s),t.content=a(l),t}return D()(d,[{key:"destroy",value:function(){this.destroyed||(C()(b()(d.prototype),"destroy",this).call(this),this.portal.removeChildren(this.mask),this.content&&this.content.destroy())}}]),d}(gU),az=function(e){k()(p,e);var d=w()(p);function p(e){var t,a=e.contentRender,n=e.text;I()(this,p),t=d.call(this);var i=new vU(d$.uiDelegatorManager.dropDownRoot);t.portal=i;var r=new hU({tag:"div",className:"wyn-doc-embedded-container"});t.container=r;var o=new hU({tag:"div",className:"wyn-doc-embedded-content-container"}),s=new hU({tag:"div",className:"wyn-doc-embedded-back-btn-container"}),l=new hU({tag:"span",className:"wyn-doc-embedded-back-btn",onClick:function(e){e.stopPropagation(),e.preventDefault(),t.destroy()}}),u=new hU({tag:"span",className:"wyn-doc-embedded-back-btn-icon info-icon icon-back"}),c=new hU({tag:"span",className:"wyn-doc-embedded-back-btn-text"});return c.setText(n),l.addChildren(u),l.addChildren(c),s.addChildren(l),r.addChildren(s),r.addChildren(o),i.addChildren(r),t.content=a(o),t}return D()(p,[{key:"destroy",value:function(){this.destroyed||(C()(b()(p.prototype),"destroy",this).call(this),this.portal.removeChildren(this.container),this.content&&this.content.destroy())}}]),p}(gU),nz=function(e){k()(v,e);var f=w()(v);function v(e){var t;I()(this,v),(t=f.call(this)).onCloseClick=function(){var e;null!==(e=t.onClosed)&&void 0!==e&&e.call(RB()(t)),t.destroy()},t.onOKClick=function(){t.disableOK||t.onOK()},t.onCancelClick=function(){t.destroy()},t.setOKDisableState=function(e){t.disableOK!==e&&((t.disableOK=e)?t.OKBtn.addClassName("disable"):t.OKBtn.removeClassName("disable"))};var a=e.contentRender,n=e.onOK,i=e.onClosed;t.onOK=n,t.onClosed=i;var r=new vU(d$.uiDelegatorManager.dropDownRoot);t.portal=r,t.disableOK=!1;var o=new hU({tag:"div",className:"wyn-dialog-backdrop"});t.backdrop=o;var s=new hU({tag:"div",className:e.customClass?"wyn-dialog-container ".concat(e.customClass):"wyn-dialog-container"});t.backdrop.addChildren(s);var l=new hU({tag:"div",className:"wyn-dialog-header-container"}),u=new hU({tag:"div",className:"wyn-dialog-title-box"}),c=new hU({tag:"span",className:"wyn-dialog-title",textContent:e.title}),d=new hU({tag:"div",className:"wyn-dialog-btn-box"}),p=new HU({className:"wyn-dialog-close-btn mdi mdi-close",onClick:t.onCloseClick});d.addChildren(p),u.addChildren(c),l.addChildren(u,d);var h=new hU({tag:"div",className:"wyn-dialog-content-container"}),y=new hU({tag:"div",className:"wyn-dialog-footer-container"}),g=new hU({tag:"button",className:"wyn-dialog-footer-btn ok-btn",onClick:t.onOKClick,textContent:Ft("dialogs.common.ok")});t.OKBtn=g;var m=new hU({tag:"button",className:"wyn-dialog-footer-btn cancel-btn",onClick:t.onCancelClick,textContent:Ft("dialogs.common.cancel")});return y.addChildren(g,m),s.addChildren(l,h,y),r.addChildren(t.backdrop),t.content=a(h),t}return D()(v,[{key:"destroy",value:function(){this.destroyed||(C()(b()(v.prototype),"destroy",this).call(this),this.portal.removeChildren(this.backdrop),this.content&&this.content.destroy())}}]),v}(gU),iz=function(){function l(e,t){I()(this,l),this.initialized=!1,this.tempStatus={},this.id=e.id,this.json=e,this.store=t}return D()(l,[{key:"changeToMobileLayout",value:function(){this.json.layout=this.json.mobileLayout,this.tryUpdateContainerMobileLayout()}},{key:"tryUpdateContainerMobileLayout",value:function(){Jr.isContainer(this.json)&&(this.json.options.property.header.height=this.json.options.property.mobile.headerHeight,this.json.options.property.tabStrip.height=this.json.options.property.mobile.tabStripHeight)}},{key:"getName",value:function(){return this.json.options.scenarioName}},{key:"getDefinitionId",value:function(){switch(this.json.scenarioType){case H.ScenarioType.Visual:return this.json.visualId;case H.ScenarioType.PivotChart:return this.json.chartType;case H.ScenarioType.Slicer:return this.json.slicerType;default:return this.json.scenarioType}}},{key:"getAppearance",value:function(){return this.json.options.appearance}},{key:"getTitle",value:function(){return this.json.options.title}},{key:"getProperties",value:function(){return this.json.options.property}},{key:"getOptions",value:function(){return this.json.options}},{key:"getDrillSetting",value:function(){var e;return null!==(e=this.json.drillDown)&&void 0!==e?e:{type:H.DrillDownType.Default,items:[],_rootType:H.DrillDownType.Default,_rootItems:[]}}},{key:"getLayout",value:function(){return this.json.layout}},{key:"getMobileLayout",value:function(){return this.json.mobileLayout}},{key:"isUsedInMobile",value:function(){return this.json.usedInMobile}},{key:"getMargin",value:function(){return this.json.options.appearance.margin?this.json.options.appearance.margin:this.store.getScenarioGlobalConfig().margin}},{key:"getScenarioType",value:function(){return this.json.scenarioType}},{key:"getContainerId",value:function(){return this.json.containerId}},{key:"getTabId",value:function(){return this.json.tabId}},{key:"getSliceFilters",value:function(){return this.json.options.sliceFilters||[]}},{key:"getDrillThrough",value:function(){return this.json.options.drillThrough||[]}},{key:"getPivot",value:function(){return this.json.pivot}},{key:"getZIndex",value:function(){return this.json.zIndex}},{key:"getInheritJson",value:function(){return this.inheritJson}},{key:"getCardTemplatePageOptions",value:function(){var e;return(null===(e=this.json.cardTemplate)||void 0===e?void 0:e.pageOptions)||{}}},{key:"getCardTemplateScenarios",value:function(){var e;return(null===(e=this.json.cardTemplate)||void 0===e?void 0:e.scenarios)||{}}},{key:"getCardTemplateOptions",value:function(){return this.json.options.cardTemplate}},{key:"isSpreadSource",value:function(){return Jr.isSpreadChart(this.json)}},{key:"isMergedSource",value:function(){return Jr.isMergedChart(this.json)}},{key:"getAttribute",value:function(e){return this.json[e]}},{key:"toJSON",value:function(){return this.json}},{key:"init",value:function(e){if(!this.initialized){var t=this.json,a=this.store.getDashboard(),n=this.store.getDocTheme(),i=this.store.getLanguageResource(),r=e.getActualOptions(t,a.options,{docTheme:n,imageList:[].concat(R()(Yr),R()(a.imageList)),languageResource:i});t.options=r,this.store.setScenario(this.id,t),this.inheritJson=e.getEntireScenario(t,a.options),this.initialized=!0}}},{key:"getDocTheme",value:function(){return this.store.getDocTheme()}},{key:"getImageList",value:function(){return this.store.getImageList()}},{key:"getScenarios",value:function(){var r=this,o=this.store.getScenarioMapping(),e=Object.keys(o),s=this.getScenarioType();return e.reduce(function(e,t){var a=o[t];if(s===H.ScenarioType.Group){if(a.groupId===r.id){var n=new l(a,r.store);n.getScenarioType()!==H.ScenarioType.Visual&&n.init(d$.definitionManager.getDefinition(a)),e.push(n)}}else if(a.containerId===r.id&&!a.groupId){var i=new l(a,r.store);i.getScenarioType()!==H.ScenarioType.Visual&&i.init(d$.definitionManager.getDefinition(a)),e.push(i)}return e},[])}},{key:"addRuntimeFilter",value:function(e){this.json.pivot.pivotFilters.push(e)}},{key:"cleanRuntimeFilter",value:function(){this.json.pivot.pivotFilters=this.json.pivot.pivotFilters.filter(function(e){return!1!==(null==e?void 0:e.editable)})}},{key:"changeSnapShot",value:function(e){this.store.setScenario(this.id,e),this.json=e}},{key:"clearCrossFilter",value:function(){var e=this.json;return!(!e||!e.crossFilterSetting)&&!(e.crossFilterSetting=null)}},{key:"setCrossFilter",value:function(e){var t=this.json;return!(!t||t.crossFilterSetting===e)&&(t.crossFilterSetting=e,!0)}},{key:"activeDrillItemIndex",value:function(){var e=Hs.scenarioWithoutDrillDataById(this.id,this.store.getState());return Us.activeDrillItemIndex(e)}},{key:"canScenarioTriggerCrossFilter",value:function(){return function(e,t){var a=Hs.view(e),n=!!Hs.focusedScenarioId(e);if(a===H.AppViewMode.Designer||n)return!1;var i=Hs.scenarioById(t,e);return Hs.crossFilterMode(e)!==H.CrossFilterMode.Off&&Us.enableCrossFilter(i)}(this.store.getState(),this.id)}},{key:"setSlicerFilter",value:function(e){this.json.options.sliceFilters=e}},{key:"setProperty",value:function(e,t){Object(Ho.set)(this.json.options.property,e,t)}},{key:"doHierarchyChange",value:function(e,t){this.json.pivot.pivotSetting[e.type].values[e.index].expandTo=t}},{key:"setUiSortInfo",value:function(e){this.json.pivot.uiSortInfo=e}},{key:"getPageGlobalConfig",value:function(){return this.store.getPageGlobalConfig()}},{key:"getDashboardConfig",value:function(){return this.store.getDashboardConfig()}},{key:"reset",value:function(){this.clearCrossFilter()}},{key:"setTempStatus",value:function(e,t){this.tempStatus[e]=t}},{key:"getTempStatus",value:function(e){return this.tempStatus[e]}},{key:"setAttribute",value:function(e,t){this.json[e]=t}},{key:"getDashboardName",value:function(){return this.store.getName()}}]),l}(),rz=function(){function a(e,t){I()(this,a),this.id=e.id,this.json=e,this.store=t,this.tryUpdateAutoLayout()}return D()(a,[{key:"tryUpdateAutoLayout",value:function(){if(this.getOptions().mobileAutoLayout){var e=this.store.getState(),t=Hs.dashboard(e),a=ks.margin(t),n=Hs.scenariosByPageId(this.id,e),i=Ru(a,n);n.forEach(function(e){e.usedInMobile=!0,e.mobileLayout=i[e.id],Jr.isContainer(e)&&(e.options.property.mobile=i["".concat(e.id,"container")])})}}},{key:"getName",value:function(){return this.json.options.page.title}},{key:"getDocTheme",value:function(){return this.store.getDocTheme()}},{key:"getImageList",value:function(){return this.store.getImageList()}},{key:"getOptions",value:function(){return Object.assign(Object.assign({},this.store.getPageGlobalConfig()),this.json.options.page)}},{key:"getScenarios",value:function(){var i=this,r=this.store.getScenarioMapping();return Object.keys(r).reduce(function(e,t){var a=r[t];if(a.pageId===i.id&&!a.containerId&&!a.groupId){var n=new iz(a,i.store);n.getScenarioType()!==H.ScenarioType.Visual&&n.init(d$.definitionManager.getDefinition(a)),e.push(n)}return e},[])}},{key:"getFontSizeAdaptation",value:function(){return this.store.getDashboardConfig().fontSizeAdaptation}},{key:"getCrossFilterMode",value:function(){return this.store.getDashboardConfig().crossFilterMode}},{key:"isVisible",value:function(){return!this.json.options.page.hidden}}]),a}(),oz=function(){function i(){I()(this,i),this.state={docData:null,designer:{view:"VIEWER",user:null,datasetInfoList:[],serverImageList:R()(Yr),languageResource:null}}}return D()(i,[{key:"dispatch",value:function(){}},{key:"getState",value:function(){return this.state}},{key:"setDocData",value:function(e,t){this.id=e.dashboard.id,this.state.docData=e,this.state.designer.datasetInfoList=t,this.scenarioMapping=e.scenarios,this.pageMapping=e.pages,this.imageList=ks.imageList(e.dashboard),this.dashboard=e.dashboard}},{key:"init",value:function(e,t){var a=0<arguments.length&&void 0!==e?e:{},n=1<arguments.length?t:void 0;this.state.designer.languageResource=a,this.state.designer.docThemeList=[n||os],i.makeActualDashboard(this.dashboard,this.getDocTheme(),this.imageList)}},{key:"getDocTheme",value:function(){return Hs.docTheme(this.state)}},{key:"getDocThemeId",value:function(){return ks.docThemeId(this.dashboard)}},{key:"getImageList",value:function(){return this.imageList}},{key:"getLanguageResource",value:function(){return Hs.languageResource(this.state)}},{key:"getDashboard",value:function(){return this.dashboard}},{key:"getName",value:function(){return this.dashboard.name}},{key:"getScenarioMapping",value:function(){return this.scenarioMapping}},{key:"getScenarioGlobalConfig",value:function(){return this.dashboard.options.scenario}},{key:"getDashboardConfig",value:function(){return this.dashboard.options.dashboard}},{key:"getPageGlobalConfig",value:function(){return this.dashboard.options.page}},{key:"getParameters",value:function(){return Hs.parameters(this.state)}},{key:"setScenario",value:function(e,t){this.scenarioMapping[e]=t}},{key:"getScenario",value:function(e){return this.scenarioMapping[e]}},{key:"getPages",value:function(){var t=this;return this.dashboard.pageIdList.map(function(e){return new rz(t.pageMapping[e],t)})}}],[{key:"makeActualDashboard",value:function(e,t,a){var n,i,r,o,s,l,u,c=e.options.scenario.titleTextStyle,d=e.options.scenario.contentTextStyle,p=e.options.scenario.noDataTextStyle;e.options.scenario.titleTextStyle=Object.assign(Object.assign({},c),{fontFamily:c.fontFamily||t.textStyle.majorFontFamily,fontSize:c.fontSize||t.textStyle.majorFontSize,fontWeight:c.fontWeight||t.textStyle.majorFontWeight,fontStyle:c.fontStyle||t.textStyle.majorFontStyle}),e.options.scenario.contentTextStyle=Object.assign(Object.assign({},d),{fontFamily:d.fontFamily||t.textStyle.minorFontFamily,fontSize:d.fontSize||t.textStyle.minorFontSize,fontWeight:d.fontWeight||t.textStyle.minorFontWeight,fontStyle:d.fontStyle||t.textStyle.minorFontStyle}),e.options.scenario.noDataTextStyle=Object.assign(Object.assign({},p),{fontFamily:p.fontFamily||t.textStyle.minorFontFamily,fontSize:p.fontSize||t.textStyle.minorFontSize,fontWeight:p.fontWeight||t.textStyle.minorFontWeight,fontStyle:p.fontStyle||t.textStyle.minorFontStyle}),null!==(n=(o=e.options.scenario).clickAction)&&void 0!==n||(o.clickAction=d$.globalConfigManager.get("clickAction")),null!==(i=(s=e.options.scenario).contextMenuActions)&&void 0!==i||(s.contextMenuActions=d$.globalConfigManager.get("contextMenuActions")),(l=e.options.scenario).scrollbarThumbBackColor||(l.scrollbarThumbBackColor=t.colors.scrollbarThumb),(u=e.options.scenario).scrollbarTrackBackColor||(u.scrollbarTrackBackColor=t.colors.scrollbarTrack),e.options.scenario.hyperlink=t.colors.hyperlink,null!==(r=e.options.page.backgroundImage)&&void 0!==r&&r.id&&(e.options.page.backgroundImage.id=ll(e.options.page.backgroundImage.id,a))}}]),i}(),sz=function(){function e(){I()(this,e),this.counter=0,this.taskList=[]}return D()(e,[{key:"isSuspended",value:function(){return 0<this.counter}},{key:"suspend",value:function(){this.counter++}},{key:"resume",value:function(){this.isSuspended()&&(this.counter--,!this.isSuspended()&&this.taskList.length&&(this.taskList.forEach(function(e){return e()}),this.taskList=[]))}},{key:"setTask",value:function(e){this.taskList=[e]}},{key:"addTask",value:function(e){this.taskList.push(e)}},{key:"reset",value:function(){this.counter=0,this.taskList=[]}}]),e}(),lz=function(){function n(e,t,a){I()(this,n),this.xScale=1,this.yScale=1,this.isMobile=Io(d$.globalConfigManager.get("__isMobile")),this.enableScale=!1,this.switchPageFuc=null,this.isIntegratedByPage=!1,this.pageModel=e,this.language=t,this.enableScale=a.getFontSizeAdaptation(),this.store=a}return D()(n,[{key:"setGridSize",value:function(e,t){this.xScale=e,this.yScale=t}},{key:"getGridSize",value:function(){return{xScale:this.xScale,yScale:this.yScale}}},{key:"getScale",value:function(){if(!this.enableScale)return 1;var e=this.getGridSize();return Math.min(e.xScale,e.yScale)}},{key:"getParentGridSize",value:function(){return this.parent?this.parent.getGridSize():this.getGridSize()}},{key:"getLanguage",value:function(){return this.language}},{key:"getIsMobile",value:function(){return this.isMobile}},{key:"setIsIntegratedByPage",value:function(e){this.isIntegratedByPage=e}},{key:"getIsIntegratedByPage",value:function(){return this.parent?this.parent.getIsIntegratedByPage():this.isIntegratedByPage}},{key:"setSwitchPageFuc",value:function(e){this.switchPageFuc=e}},{key:"invokeSwitchPage",value:function(e){var t;this.parent?this.parent.invokeSwitchPage(e):null!==(t=this.switchPageFuc)&&void 0!==t&&t.call(this,e)}},{key:"reset",value:function(){this.switchPageFuc=null,this.isIntegratedByPage=!1}},{key:"spawn",value:function(){var e=new n(this.pageModel,this.language,this.store);return e.parent=this,e.isMobile=this.isMobile,e}},{key:"getId",value:function(){return this.store.id}}]),n}(),uz=function(){function a(e){var t=this;I()(this,a),this.dispatchActionEvent=function(e){t.onCustomEventCallback&&t.onCustomEventCallback(e)},(this.messageProxy=e).on(H.VisualCommandType.DispatchActionEvent,this.dispatchActionEvent)}return D()(a,[{key:"renderStart",value:function(){this.messageProxy.emit(H.VisualCommandType.VisualEvent,{type:H.VisualEventType.RenderStart})}},{key:"renderError",value:function(){this.messageProxy.emit(H.VisualCommandType.VisualEvent,{type:H.VisualEventType.RenderError})}},{key:"renderFinish",value:function(){this.messageProxy.emit(H.VisualCommandType.VisualEvent,{type:H.VisualEventType.RenderFinish})}},{key:"registerOnCustomEventCallback",value:function(e){this.onCustomEventCallback=e}}]),a}(),cz=function(){function a(e){var t=this;I()(this,a),this.doMove=Object(Ho.throttle)(function(e){t.messageProxy.emit(H.VisualCommandType.MoveTooltip,e)},50),this.messageProxy=e}return D()(a,[{key:"show",value:function(e){this.messageProxy.emit(H.VisualCommandType.ShowTooltip,e)}},{key:"hide",value:function(){this.messageProxy.emit(H.VisualCommandType.HideTooltip)}},{key:"move",value:function(e){this.doMove(e)}}]),a}(),dz=function(){function t(e){I()(this,t),this.getDefaultTask=function(){return{payloads:[]}},this.messageProxy=e,this.task=this.getDefaultTask()}return D()(t,[{key:"setProperty",value:function(e,t){var a=this;this.task.payloads.push({propertyName:e,value:t}),this.timer||(this.timer=setTimeout(function(){a.messageProxy.emit(H.VisualCommandType.SetProperty,a.task),a.task=a.getDefaultTask(),a.timer=null}))}}]),t}(),pz=function(){function i(e,t,a){var n=this;I()(this,i),this.getDisplayUnitLabel=function(e){var t="charts.displayUnit.";switch(e){case H.DisplayUnitString.Hundreds:t+="e2";break;case H.DisplayUnitString.Thousands:t+="e3";break;case H.DisplayUnitString.TenThousand:t+="e4";break;case H.DisplayUnitString.HundredThousand:t+="e5";break;case H.DisplayUnitString.Millions:t+="e6";break;case H.DisplayUnitString.TenMillion:t+="e7";break;case H.DisplayUnitString.HundredMillion:t+="e8";break;case H.DisplayUnitString.Billions:t+="e9";break;case H.DisplayUnitString.Trillions:t+="e12";break;default:t=""}return n.dashboardLocalizationManager.getDisplay(t)},this.attachDisplayUnit=function(e,t){return n.isNoneDisplayUnit(t)?e:"".concat(e).concat(n.getDisplayUnitLabel(t))},this.isNoneDisplayUnit=function(e){return e===H.DisplayUnitString.None},this.lng=e,this.dashboardLocalizationManager=t,this.edition=a}return D()(i,[{key:"getRoundedFloatingNumber",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:14;return e&&e.toPrecision?Number(e.toPrecision(a)):e}},{key:"isAutoDisplayUnit",value:function(e){return e===H.DisplayUnitString.Auto}},{key:"getAutoDisplayUnit",value:function(e){var t=H.DisplayUnitString.None;if(e&&e.length){var a=Math.max.apply(Math,R()(e.map(function(e){return Math.abs(e)})));"EN"===this.edition?1e3<=a&&a<1e6?t=H.DisplayUnitString.Thousands:1e6<=a&&a<1e9?t=H.DisplayUnitString.Millions:1e9<=a&&a<1e12?t=H.DisplayUnitString.Billions:1e12<=a&&(t=H.DisplayUnitString.Trillions):1e4<=a&&a<1e8?t=H.DisplayUnitString.TenThousand:1e8<=a&&(t=H.DisplayUnitString.HundredMillion)}return t}},{key:"format",value:function(e,t,a){var n=0<arguments.length&&void 0!==e?e:"General",i=1<arguments.length?t:void 0,r=2<arguments.length?a:void 0;if(null===i)return this.dashboardLocalizationManager.getDisplay("common.nullDisplay");if(void 0===i||""===i)return this.dashboardLocalizationManager.getDisplay("common.emptyDisplay");if("boolean"==typeof i)return i.toString().replace(/^\S/,function(e){return e.toUpperCase()});if("number"!=typeof i)return new Dl.a.Spread.Formatter.GeneralFormatter(n,this.lng).format(i);var o=n.split("_");if("subDate"===o[0]&&null!=o[1]){var s=+o[1];if(s===H.SubColumnTypes.Quarter&&1<=i&&i<=4)return this.dashboardLocalizationManager.getDisplay("patterns.datetime.quarter".concat(i));if(s===H.SubColumnTypes.Month&&1<=i&&i<=12){var l=Date.parse("0-".concat(i,"-1"));return new Intl.DateTimeFormat(this.lng,{month:"short"}).format(l)}return"".concat(i)}var u=null!=r?r:H.DisplayUnitString.None,c=this.getRoundedFloatingNumber(i/function(e){switch(e){case H.DisplayUnitString.None:return 1;case H.DisplayUnitString.Hundreds:return 100;case H.DisplayUnitString.Thousands:return 1e3;case H.DisplayUnitString.TenThousand:return 1e4;case H.DisplayUnitString.HundredThousand:return 1e5;case H.DisplayUnitString.Millions:return 1e6;case H.DisplayUnitString.TenMillion:return 1e7;case H.DisplayUnitString.HundredMillion:return 1e8;case H.DisplayUnitString.Billions:return 1e9;case H.DisplayUnitString.Trillions:return 1e12;default:return 1}}(u)),d="General"!==n||this.isNoneDisplayUnit(u)?n:"0.0",p=new Dl.a.Spread.Formatter.GeneralFormatter(d,this.lng);return this.attachDisplayUnit(p.format(c),u)}}]),i}(),hz=function(){function n(){I()(this,n),this.measures=[],this.dimensions={}}return D()(n,[{key:"withMeasure",value:function(e,t){return this.measures.push({profile:e,value:null==t?void 0:t[e.display]}),this}},{key:"withDimension",value:function(e,t){return this.dimensions[e.name]=t[e.display],this}},{key:"compareMeasures",value:function(e,t){return n.isSameArray(e,t)}},{key:"compareDimensions",value:function(e,t){for(var a=Object.keys(e),n=0,i=a.length;n<i;n++){var r=a[n];if(e[r]!==t[r])return!1}return!0}},{key:"equals",value:function(e){return this.compareMeasures(this.measures,e.measures)&&this.compareDimensions(this.dimensions,e.dimensions)&&this.compareDimensions(e.dimensions,this.dimensions)}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"includes",value:function(e){return this.compareMeasures(this.measures,e.measures)&&this.compareDimensions(this.dimensions,e.dimensions)}},{key:"isSameStructure",value:function(e){var t=Object.keys(this.dimensions),a=Object.keys(e.dimensions);return n.isSameArray(this.measures,e.measures)&&n.isSameArray(t,a)}},{key:"isEmpty",value:function(){return 0===this.measures.length&&0===Object.keys(this.dimensions).length}},{key:"clone",value:function(e){this.measures=e.measures,this.dimensions=e.dimensions}}],[{key:"isSelectionId",value:function(e){return!!e.withDimension}},{key:"isSameArray",value:function(e,t){if(e.length!==t.length)return!1;for(var a=0,n=e.length;a<n;a++){var i=t[a];if(-1===e.indexOf(i))return!1}return!0}}]),n}(),yz=function(){function r(e){var t=this;I()(this,r),this.selected=[],this.promiseFactory=new gx,this.onCleanSelection=function(){t.clear()},(this.messageProxy=e).on(H.VisualCommandType.CleanSelection,this.onCleanSelection)}return D()(r,[{key:"findSelectionIndex",value:function(t){return this.selected.findIndex(function(e){return e.equals(t)})}},{key:"triggerSelectionChange",value:function(){this.onSelectCallback&&this.onSelectCallback(this.selected),this.messageProxy.emit(H.VisualCommandType.SelectionChange,this.selected)}},{key:"addSelection",value:function(e){var t=r.makeSureIsSelectionId(e);t.isEmpty()||(0!==this.selected.length?t.isSameStructure(this.selected[0])?this.contains(t)||this.selected.push(t):this.selected=[t]:this.selected.push(t))}},{key:"setSelectionIds",value:function(e){var t=this;this.selected=[],e.forEach(function(e){t.addSelection(e)})}},{key:"getSelectionIds",value:function(){return this.selected}},{key:"getCount",value:function(){return this.selected.length}},{key:"select",value:function(e,t){var a=this,n=1<arguments.length&&void 0!==t&&t,i=this.promiseFactory.defer();if(!e)return i.reject(),i.promise;var r=Array.isArray(e)?e:[e];return n?r.forEach(function(e){a.addSelection(e)}):(this.selected=[],this.addSelection(r[0])),this.triggerSelectionChange(),i.resolve(),i.promise}},{key:"clear",value:function(e){var n=this,t=this.promiseFactory.defer();if(e){var a=Array.isArray(e)?e:[e],i=!1;a.forEach(function(e){var t=r.makeSureIsSelectionId(e),a=n.findSelectionIndex(t);-1<a&&(n.selected.splice(a,1),i=!0)}),i&&this.triggerSelectionChange()}else 0<this.selected.length&&(this.selected=[],this.triggerSelectionChange());return t.resolve(),t.promise}},{key:"registerOnSelectCallback",value:function(e){this.onSelectCallback=e}},{key:"contains",value:function(e){var t=r.makeSureIsSelectionId(e);return-1<this.selected.findIndex(function(e){return e.includes(t)})}},{key:"isEmpty",value:function(){return 0===this.selected.length}}],[{key:"makeSureIsSelectionId",value:function(e){if(hz.isSelectionId(e))return e;var t=new hz;return t.clone(e),t}}]),r}(),gz=function(){function t(e){I()(this,t),this.messageProxy=e,this.managers=[]}return D()(t,[{key:"createSelectionManager",value:function(){var e=new yz(this.messageProxy);return this.managers.push(e),e}},{key:"createSelectionId",value:function(e){var t=new hz;return e&&t.clone(e),t}}]),t}(),mz=function(){function t(e){I()(this,t),this.messageProxy=e}return D()(t,[{key:"execute",value:function(e){this.messageProxy.emit(H.VisualCommandType.ExecuteCommand,e)}}]),t}(),fz=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};I()(this,t),this.images=e.images||{}}return D()(t,[{key:"getImage",value:function(e){return this.images[e]}}]),t}(),vz=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};I()(this,t),this.configuration=e}return D()(t,[{key:"get",value:function(e){return this.configuration[e]}}]),t}(),bz=function(){function t(e){I()(this,t),this.messageProxy=e}return D()(t,[{key:"applyFilter",value:function(e){var t=[];e&&t.push(e.toJSON()),this.messageProxy.emit(H.VisualCommandType.SetFilter,{filters:t})}},{key:"clean",value:function(){this.messageProxy.emit(H.VisualCommandType.SetFilter,{filters:[]})}}]),t}(),Cz=function(){function t(e){I()(this,t),this.messageProxy=e}return D()(t,[{key:"show",value:function(e){this.messageProxy.emit(H.VisualCommandType.ShowContextMenu,e)}},{key:"hide",value:function(){this.messageProxy.emit(H.VisualCommandType.HideContextMenu)}}]),t}(),Tz=function(){function r(e,t,a,n){I()(this,r),this.promiseFactory=new gx,this.definition=a,this.propertyService=new dz(e),this.localizationManager=t,this.eventService=new uz(e);var i=new mN(je,t.getLanguage());this.formatService=new pz(t.getLanguage(),i,n),this.toolTipService=new cz(e),this.selectionService=new gz(e),this.assetsManager=new fz(a.assets),this.configurationManager=new vz(a.configuration),this.commandService=new mz(e),this.filterService=new bz(e),this.contextMenuService=new Cz(e)}return D()(r,[{key:"loadExternalJs",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:document.body,n=this.promiseFactory.defer(),i=document.createElement("script");return i.src=e,i.setAttribute("data-wyn-visual-id",this.definition.id),i.onload=function(){n.resolve()},i.onerror=function(){n.reject()},a.appendChild(i),n.promise}},{key:"loadExternalCss",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:document.head,n=this.promiseFactory.defer(),i=document.createElement("link");return i.href=e,i.setAttribute("data-wyn-visual-id",this.definition.id),i.rel="stylesheet",i.onload=function(){n.resolve()},i.onerror=function(){n.reject()},a.appendChild(i),n.promise}}]),r}(),Sz=function(){function n(e,t,a){var i=this;I()(this,n),this.doUpdate=function(e){if(i.lastUpdateOpt=e,i.visual){if(e.updateType===H.VisualUpdateType.ViewportChange){var t=i.visual;if(t.onResize)return void t.onResize()}try{var a=i.visual.getInspectorHiddenState?i.visual.getInspectorHiddenState(e):null,n=i.visual.getActionBarHiddenState?i.visual.getActionBarHiddenState(e):null;i.visual.update(e),i.messageProxy.emit(H.VisualCommandType.VisibilityStateChange,{hiddenEditors:a,hiddenActions:n})}catch(e){i.printError(e)}}},this.doPreUpdate=function(e){i.visual&&i.messageProxy.emit(H.VisualCommandType.PreUpdateFeedback,{colorAsignmentConfigMapping:i.visual.getColorAssignmentConfigMapping(e)})},this.container=t,this.id=e,(this.messageProxy=a).once(H.VisualCommandType.Init,this.initialize.bind(this)),a.on(H.VisualCommandType.Update,this.doUpdate),a.on(H.VisualCommandType.PreUpdate,this.doPreUpdate)}return D()(n,[{key:"initialize",value:function(e){var t=e.definition,a=e.language,n=e.updateOptions,i=e.edition,r=new mN(t.i18nResources,a);this.host=new Tz(this.messageProxy,r,t,i),this.lastUpdateOpt=n,this.createVisual(t,n),this.messageProxy.emit(H.VisualCommandType.Initialized)}},{key:"createScript",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:document.body;if(e.jsContent){var n=document.createElement("script");n.innerHTML=e.jsContent,n.setAttribute("data-wyn-visual-id",e.id),a.appendChild(n)}}},{key:"createStyle",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:document.head;if(e.cssContent){var n=document.createElement("style");n.innerHTML=e.cssContent,n.setAttribute("data-wyn-visual-id",e.id),a.appendChild(n)}}},{key:"printError",value:function(){0}},{key:"destroy",value:function(){var e,t;this.messageProxy.destroy(),null!==(t=null===(e=this.visual)||void 0===e?void 0:e.onDestroy)&&void 0!==t&&t.call(e)}},{key:"start",value:function(){this.messageProxy.emit(H.VisualCommandType.Ready)}}]),n}(),Dz=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"setMessageHandler",value:function(e){this.messageHandler=e}},{key:"emit",value:function(e,t){this.messageHandler({type:e,payload:t})}}]),a}(function(){function t(e){I()(this,t),this.topic=new m.EventEmitter,this.topic.setMaxListeners(0),this.token=e}return D()(t,[{key:"broadcast",value:function(e,t){this.topic.emit(e,t)}},{key:"on",value:function(e,t){this.topic.on(e,t)}},{key:"once",value:function(e,t){this.topic.once(e,t)}},{key:"off",value:function(e,t){this.topic.off(e,t)}},{key:"destroy",value:function(){this.topic.removeAllListeners()}}]),t}()),kz=function(){function n(e,t,a){I()(this,n)}return D()(n,[{key:"update",value:function(){}},{key:"getInspectorHiddenState",value:function(){return null}},{key:"getActionBarHiddenState",value:function(){return null}},{key:"getColorAssignmentConfigMapping",value:function(){return null}},{key:"onDestroy",value:function(){}}]),n}();kz.Models={Filter:{BasicFilter:Nb,AdvancedFilter:Fb,TupleFilter:Eb}},kz.Enums={FilterType:H.VisualFilterType,BasicFilterOperator:H.BasicFilterOperator,AdvancedFilterOperator:H.AdvancedFilterOperator,AdvancedFilterLogicalOperator:H.AdvancedFilterLogicalOperator,UpdateType:H.VisualUpdateType,DisplayUnit:H.DisplayUnitString,InteractionAction:H.InteractionMouseEventAction};var wz=function(e){k()(s,e);var i=w()(s);function s(e,t){var a;I()(this,s);var n=document.createElement("div");return n.style.width="100%",n.style.height="100%",((a=i.call(this,e,n,new Dz(e))).root=t).appendChild(n),a}return D()(s,[{key:"initialize",value:function(e){var t=this;this.messageProxy.emit(H.VisualCommandType.ReadyLoadFonts);var a=e.definition,n=e.language,i=e.updateOptions,r=e.edition,o=new mN(a.i18nResources,n);this.host=new Tz(this.messageProxy,o,a,r),this.loadExternal(a,!!s.loadedPlugins[a.id]).then(function(){t.createVisual(a,i),t.messageProxy.emit(H.VisualCommandType.Initialized)})}},{key:"loadExternal",value:function(t,e){var a=this,n=1<arguments.length&&void 0!==e&&e,i=[];t.externalCss&&t.externalCss.forEach(function(e){var t=a.host.loadExternalCss(e,a.root);i.push(t)});var r=Promise.all(i);if(n)return r;var o=Promise.resolve();if(t.externalJs)for(var s=0,l=function(){var e=t.externalJs[s];o=o.then(function(){return a.host.loadExternalJs(e)}),s++};s<t.externalJs.length;)l();return Promise.all([r,o])}},{key:"createVisual",value:function(e,t){var a=s.loadedPlugins[e.id];if(this.createStyle(e,this.root),a||(window.WynVisual=kz,this.createScript(e,this.root),a=window.WynVisualClass,s.loadedPlugins[e.id]=a,window.WynVisual=null,window.WynVisualClass=null),a)try{this.visual=new a(this.container,this.host,t)}catch(e){this.printError(e)}}},{key:"setMessageHandler",value:function(e){this.messageProxy.setMessageHandler(e)}},{key:"runCommand",value:function(e,t){this.messageProxy.broadcast(e,t)}}]),s}(Sz);wz.loadedPlugins={};var xz,Az;(Az=xz=xz||{}).BeforeMount="_beforeMount",Az.Mounted="mounted",Az.Render="render",Az.Rendered="rendered",Az.Failed="failed",Az.Update="update",Az.LoadStart="loadStart",Az.LoadComplete="loadComplete",Az.Error="error",Az.SelectionChange="selectionChange";var Iz,Pz,_z=function(){function t(e){I()(this,t),this.topic=new m.EventEmitter,this.promiseFactory=new gx,this.renderedDefer=[],this.hasSelection=!1,this.processedErrorIds={},this.key=e}return D()(t,[{key:"on",value:function(e,t){this.topic.addListener(e,t)}},{key:"once",value:function(e,t){this.topic.once(e,t)}},{key:"off",value:function(e,t){this.topic.off(e,t)}},{key:"fireBeforeMount",value:function(){this.topic.emit(xz.BeforeMount,this.key)}},{key:"fireMounted",value:function(){this.topic.emit(xz.Mounted,this.key)}},{key:"fireRender",value:function(){this.topic.emit(xz.Render,this.key)}},{key:"fireRendered",value:function(){this.renderedDefer.forEach(function(e){return e.resolve()}),this.renderedDefer=[],this.topic.emit(xz.Rendered,this.key)}},{key:"fireFailed",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";this.topic.emit(xz.Failed,this.key,t)}},{key:"fireUpdate",value:function(){this.topic.emit(xz.Update,this.key)}},{key:"fireLoadStart",value:function(){this.topic.emit(xz.LoadStart,this.key)}},{key:"fireLoadComplete",value:function(){this.topic.emit(xz.LoadComplete,this.key)}},{key:"fireError",value:function(e,t){var a=e.id;a?this.processedErrorIds[a]||(this.processedErrorIds[a]=!0,this.topic.emit(xz.Error,this.key,t||this.key,e)):this.topic.emit(xz.Error,this.key,t||this.key,e)}},{key:"fireSelectionChange",value:function(e,t,a){var n=this.hasSelection;this.hasSelection=0<(null==e?void 0:e.length),(n||this.hasSelection)&&this.topic.emit(xz.SelectionChange,this.key,a||this.key,e,t)}},{key:"getRenderedPromise",value:function(){var e=this.promiseFactory.defer();return this.renderedDefer.push(e),e.promise}},{key:"destroy",value:function(){this.topic.removeAllListeners(),this.renderedDefer.forEach(function(e){return e.reject()}),this.renderedDefer=[],this.processedErrorIds={}}},{key:"reset",value:function(){}}]),t}(),Mz=function(){function a(e){var t=this;I()(this,a),this.mapping={},this.processing=!1,this.total=0,this.delayTryComplete=Object(Ho.debounce)(function(){t.tryComplete()},1e3),this.onComplete=e}return D()(a,[{key:"start",value:function(e){this.mapping[e]=!1,this.processing=!0}},{key:"batchStart",value:function(e){var t=this;e.length&&(e.forEach(function(e){t.mapping[e]=!1}),this.processing=!0)}},{key:"setTotal",value:function(e){this.total=e}},{key:"isComplete",value:function(){var t=this;if(!this.processing)return!0;var e=Object(Ho.partition)(Object.keys(this.mapping),function(e){return t.mapping[e]}),a=N()(e,2),n=a[0],i=a[1];return 0<this.total?this.total<=n.length:0===i.length}},{key:"tryComplete",value:function(){this.isComplete()&&(this.end(),this.onComplete())}},{key:"end",value:function(){this.mapping={},this.processing=!1,this.total=0}},{key:"isProcessing",value:function(){return this.processing}},{key:"done",value:function(e){this.processing&&(this.mapping[e]=!0,0<this.total?this.tryComplete():this.delayTryComplete())}}]),a}(),Lz=function(e){k()(r,e);var t=w()(r);function r(e){var i;return I()(this,r),(i=t.call(this,e)).collection=[],i.renderSuspendProcessor=new sz,i.isMounted=!1,i.beforeMountHandler=function(e){i.isMounted||(i.mountTransaction.isProcessing()||C()(b()(r.prototype),"fireBeforeMount",RB()(i)).call(RB()(i)),i.mountTransaction.start(e))},i.mountedHandler=function(e){i.mountTransaction.done(e)},i.renderHandler=function(e){i.renderTransaction.isProcessing()||(i.renderSuspendProcessor.isSuspended()?i.renderSuspendProcessor.addTask(function(){C()(b()(r.prototype),"fireRender",RB()(i)).call(RB()(i))}):C()(b()(r.prototype),"fireRender",RB()(i)).call(RB()(i))),i.renderTransaction.start(e)},i.renderedHandler=function(e){i.renderTransaction.done(e)},i.errorHandler=function(e,t,a){C()(b()(r.prototype),"fireError",RB()(i)).call(RB()(i),a,t)},i.selectionChangeHandler=function(e,t,a,n){C()(b()(r.prototype),"fireSelectionChange",RB()(i)).call(RB()(i),a,t,n)},i.renderSuspendProcessor.suspend(),i.mountTransaction=new Mz(function(){i.isMounted||(C()(b()(r.prototype),"fireMounted",RB()(i)).call(RB()(i)),i.isMounted=!0,i.renderSuspendProcessor.resume())}),i.renderTransaction=new Mz(function(){i.renderSuspendProcessor.isSuspended()?i.renderSuspendProcessor.addTask(function(){C()(b()(r.prototype),"fireRendered",RB()(i)).call(RB()(i))}):C()(b()(r.prototype),"fireRendered",RB()(i)).call(RB()(i))}),i.self=new _z(e),i.addEventHub(i.self),i}return D()(r,[{key:"addEventHub",value:function(e){this.collection.push(e),e.on(xz.Render,this.renderHandler),e.on(xz.Rendered,this.renderedHandler),e.on(xz.BeforeMount,this.beforeMountHandler),e.on(xz.Mounted,this.mountedHandler),e.on(xz.Error,this.errorHandler),e.on(xz.SelectionChange,this.selectionChangeHandler)}},{key:"afterRemoveEventHub",value:function(e){e.off(xz.Render,this.renderHandler),e.off(xz.Rendered,this.renderedHandler),e.off(xz.BeforeMount,this.beforeMountHandler),e.off(xz.Mounted,this.mountedHandler),e.off(xz.Error,this.errorHandler),e.off(xz.SelectionChange,this.selectionChangeHandler)}},{key:"removeEventHub",value:function(t){this.collection=this.collection.filter(function(e){return e!==t}),this.afterRemoveEventHub(t)}},{key:"fireBeforeMount",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.mountTransaction.setTotal(t+1),this.mountTransaction.start(this.key),this.self.fireBeforeMount()}},{key:"fireMounted",value:function(){this.mountTransaction.done(this.key)}},{key:"fireRender",value:function(){this.self.fireRender()}},{key:"fireRendered",value:function(){var e=this;setTimeout(function(){return e.self.fireRendered()},1e3)}},{key:"reset",value:function(){this.isMounted=!1}},{key:"destroy",value:function(){var t=this;this.mountTransaction.end(),this.renderTransaction.end(),this.collection.forEach(function(e){return t.afterRemoveEventHub(e)}),this.collection=[],this.isMounted=!1,C()(b()(r.prototype),"destroy",this).call(this)}}]),r}(_z),Rz=function(){function n(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:6e3,a=1<arguments.length?arguments[1]:void 0;I()(this,n),this.started=!1,this.paused=!1,this.doTask=function(){e.paused||e.cb(),e.timer=setTimeout(e.doTask,e.delay)},this.delay=t,this.cb=a}return D()(n,[{key:"start",value:function(){this.started||(this.started=!0,this.timer=setTimeout(this.doTask,this.delay))}},{key:"stop",value:function(){this.started&&(this.started=!1,clearTimeout(this.timer),this.timer=null)}},{key:"restart",value:function(){this.started&&(this.stop(),this.start())}},{key:"resume",value:function(){this.paused=!1}},{key:"suspend",value:function(){this.paused=!0}},{key:"isStoped",value:function(){return!this.started}},{key:"destroy",value:function(){this.stop(),this.cb=null}}]),n}(),Vz=function(){function t(e){var n=this;I()(this,t),this.timers={},this.addAutoReloadTimer=function(e,t){var a=new Rz(1e3*t,function(){n.doRefresh(e)});a.start(),n.timers[e]=a},this.ctx=e}return D()(t,[{key:"doRefresh",value:function(t){var a=this;this.ctx.httpResourceManager.cleanDatasetCache(t),this.ctx.httpResourceManager.get("DatasetSchema").fetch(t).then(function(e){a.ctx.dashboardVariableManager.updateDatasetInfo(t,ae.pick(["lastUpdatedAt"],e),!0),a.ctx.dashboardManager.refreshAllPage(t,!0)})}},{key:"start",value:function(){var a=this;if(!this.ctx.globalConfigManager.get("static")){var e=this.ctx.reduxProxy.getState(),t=Hs.profiles(e),n=Up(e);ae.compose(ae.forEachObjIndexed(function(e,t){return a.addAutoReloadTimer(t,ae.path(["reloadData","interval"],e))}),ae.pick(n))(t);var i=Up(e,H.DatasetAutoRefreshType.RealTime);0<i.length&&this.ctx.wsEventSource.init({datasetRefresh:{ids:i,onRefresh:function(e){a.doRefresh(e)}}})}}},{key:"destroy",value:function(){var t=this;this.ctx.wsEventSource.destroy(),Object.keys(this.timers).forEach(function(e){return t.timers[e].stop()})}}]),t}();(Pz=Iz=Iz||{}).None="none",Pz.Preview="preview",Pz.Detail="detail";var Nz=function(e){k()(i,e);var n=w()(i);function i(e){var t;I()(this,i),(t=n.call(this)).msgs=[],t.mode=Iz.None,t.onShowAllHandler=function(){t.notification.hide(),t.msgBox.show(),t.mode=Iz.Detail},t.onDismissHandler=function(e){-1<e&&(t.msgs.splice(e,1),0===t.msgs.length?t.hide():(t.msgBox.setMessages(t.msgs),t.notification.setMessages(t.msgs)))},t.onDismissAllHandler=function(){t.msgs=[],t.hide()},t.onBackDropClickHandler=function(){t.mode=Iz.Preview,t.msgBox.hide(),t.notification.show()};var a=new vU(d$.uiDelegatorManager.dropDownRoot);return t.msgBox=new ez({onDismiss:t.onDismissHandler,onDismissAll:t.onDismissAllHandler,onBackDropClick:t.onBackDropClickHandler}),t.notification=new $U({onDismiss:t.onDismissHandler,onDismissAll:t.onDismissAllHandler,onShowAll:t.onShowAllHandler,type:e}),a.addChildren(t.msgBox,t.notification),t.addChildren(a),t}return D()(i,[{key:"autoDismissHandler",value:function(){var e=this,t=d$.globalConfigManager.get("notificationTime");t&&(clearTimeout(this.timer),this.timer=setTimeout(function(){e.mode=Iz.None,e.notification.hide()},t))}},{key:"append",value:function(e){this.msgs.push(e),this.notification.setMessages(this.msgs),this.msgBox.setMessages(this.msgs),this.autoDismissHandler(),this.mode===Iz.None&&(this.notification.show(),this.mode=Iz.Preview)}},{key:"hide",value:function(){this.mode=Iz.None,this.notification.hide(),this.notification.reset(),this.msgBox.hide()}}]),i}(mU),Ez=function(e){k()(p,e);var d=w()(p);function p(e){var r;I()(this,p),(r=d.call(this)).isMobile=Io(d$.globalConfigManager.get("__isMobile")),r.showingHiddenPage=!1,r.hasMounted=!1,r.onNavBack=function(t){var e;r.navStack.isEmpty()&&(r.showingHiddenPage=!1,r.wrapper.removeClassName("wyn-dashboard-no-pager"),null!==(e=r.scheduler)&&void 0!==e&&e.restart());var a=r.pages.findIndex(function(e){return e.store.id===t});if(-1<a)r.showPage(a);else{var n=r.hiddenPages.find(function(e){return e.store.id===t});n&&r.mountUIPage(n)}},r.onChangePage=function(e){r.showPage(+e)},r.onJumpToPage=function(t){var e,a=r.current.store.id,n=r.pages.findIndex(function(e){return e.store.id===t});if(-1<n)return r.navStack.isEmpty()?null!==(e=r.scheduler)&&void 0!==e&&e.restart():r.navStack.push(a),void r.showPage(n);var i=r.hiddenPages.find(function(e){return e.store.id===t});i&&(r.navStack.push(a),r.showingHiddenPage=!0,r.wrapper.addClassName("wyn-dashboard-no-pager"),r.mountUIPage(i))},r.showPrev=function(){var e;if(r.navStack.isEmpty()){var t=r.activePageIndex-1;t<0||(null!==(e=r.scheduler)&&void 0!==e&&e.restart(),r.showPage(t))}},r.showNext=function(){var e;if(r.navStack.isEmpty()){var t=r.activePageIndex+1;t>r.pages.length-1||(null!==(e=r.scheduler)&&void 0!==e&&e.restart(),r.showPage(t))}},r.onAutoSwitch=function(){var e=d$.globalConfigManager.getState("pauseAutoSwitch");if(!r.showingHiddenPage&&!e){var t=(r.activePageIndex+1)%r.pages.length;r.showPage(t)}},r.createAutoSwitchButton=function(){var e=new HU({className:"wyn-page-auto-switch-btn icon-page-play-pause",onClick:function(){r.scheduler.isStoped()?(e.removeClassName("icon-page-auto-play"),e.addClassName("icon-page-play-pause"),r.scheduler.start()):(e.removeClassName("icon-page-play-pause"),e.addClassName("icon-page-auto-play"),r.scheduler.stop())}});r.pageWrapper.addChildren(e)},r.onScenarioFocusChange=function(e){r.scheduler&&(e?r.scheduler.suspend():r.scheduler.resume())};var t=e.pages,a=e.store,n=e.hiddenPages,i=e.eventHub;r.eventHub=i;var o=new hU({tag:"div",className:"wyn-dashboard"});r.leftBtn=new HU({className:"wyn-nav-btn wyn-nav-btn-left mdi mdi-chevron-left",onClick:r.showPrev}),r.rightBtn=new HU({className:"wyn-nav-btn wyn-nav-btn-right mdi mdi-chevron-right",onClick:r.showNext}),r.currentWrapper=new hU({tag:"div",className:"layout-full"}),r.navStack=new ZU({onBack:r.onNavBack,title:Ft("appBar.pageBack")});var s=new wU;s.setStyle(a.getPageGlobalConfig(),a.getDocTheme(),a.getImageList());var l=new UU(function(){r.current.resize()}),u=new hU({tag:"div",className:"layout-full wyn-dashboard-content"}),c=new hU({tag:"div",className:"layout-full wyn-page-wrapper"});return o.addChildren(l,u),u.addChildren(c),c.addChildren(r.leftBtn,r.rightBtn,s,r.currentWrapper,r.navStack),r.addChildren(o),r.wrapper=o,r.dashboardHost=u,r.pageWrapper=c,r.pages=t,r.hiddenPages=n,r.store=a,r.mountPager(),r}return D()(p,[{key:"mountPager",value:function(){if(!d$.globalConfigManager.get("hideNav")){var e=this.store.getDashboardConfig();e.tabStrip.visible&&(e.tabStrip.style===H.TabStripStyle.Navigator?this.addSlider():e.tabStrip.style===H.TabStripStyle.Normal&&this.addTabs())}}},{key:"addSlider",value:function(){if(!(this.pages.length<2)){var e=new hU({tag:"div",className:"wyn-dashboard-dots"});this.pager=new XU({items:this.pages.map(function(e){return e.getName()}),active:0,groupSize:5,onChangePage:this.onChangePage}),e.addChildren(this.pager),this.pageWrapper.addChildren(e)}}},{key:"addTabs",value:function(){var e=this.store.getDashboardConfig();this.dashboardHost.addClassName("wyn-dashboard-content-".concat(e.tabStrip.position));var t=new hU({tag:"div",className:"wyn-dashboard-nav"}),a="left"===e.tabStrip.position||"right"===e.tabStrip.position?NU.Vertical:NU.Horizontal;this.pager=new BU({items:this.pages.map(function(e,t){return{text:e.getName(),key:t}}),onSelect:this.onChangePage,disableBtn:this.isMobile||a===NU.Vertical,tabStyle:e.tabStrip,direction:a}),t.addChildren(this.pager),this.dashboardHost.addChildren(t)}},{key:"mountUIPage",value:function(e){this.current&&this.current.disconnect(),this.current=e,this.current.connect(this.currentWrapper.getRef()),this.current.instance.disableBackground(),this.current.instance.setOnJumpToPage(this.onJumpToPage),this.hasMounted&&this.current.refresh()}},{key:"showPage",value:function(e){var t;this.activePageIndex=e,this.mountUIPage(this.pages[e]),e-1<0?this.leftBtn.addClassName("wyn-hidden"):this.leftBtn.removeClassName("wyn-hidden"),e+1>this.pages.length-1?this.rightBtn.addClassName("wyn-hidden"):this.rightBtn.removeClassName("wyn-hidden"),null!==(t=this.pager)&&void 0!==t&&t.setActive(e)}},{key:"getCurrentPage",value:function(){return this.current}},{key:"didMount",value:function(){this.eventHub.fireBeforeMount(1);var e=+d$.globalConfigManager.get("pageNumber"),t=0;Number.isInteger(e)&&((t=e-1)>=this.pages.length||t<0)&&(t=0),this.showPage(t),d$.reduxProxy.on(H.Command.SwitchPage,this.onJumpToPage);var a=this.store.getDashboardConfig();a.tabStrip.autoSwitch&&!d$.globalConfigManager.get("static")&&!this.isMobile&&1<this.pages.length&&(this.createAutoSwitchButton(),this.scheduler=new Rz(1e3*a.tabStrip.switchInterval,this.onAutoSwitch),this.scheduler.start()),this.hasMounted=!0,d$.appEventHub.on(H.AppEvent.ScenarioFocusChange,this.onScenarioFocusChange),this.eventHub.fireMounted()}},{key:"willUnmount",value:function(){var e;this.current.disconnect(),this.hasMounted=!1,d$.reduxProxy.off(H.Command.SwitchPage,this.onJumpToPage),null!==(e=this.scheduler)&&void 0!==e&&e.destroy(),d$.appEventHub.off(H.AppEvent.ScenarioFocusChange,this.onScenarioFocusChange)}}]),p}(mU),Fz=function(){function e(){I()(this,e),this.children=[]}return D()(e,[{key:"connect",value:function(e){this.disconnect(),this.connectedHost=new fU(e)}},{key:"isConnected",value:function(){return!!this.connectedHost}},{key:"disconnect",value:function(){this.isConnected()&&(this.children.forEach(function(e){return e.disconnect()}),this.eventHub.reset(),this.connectedHost.destroy(),this.connectedHost=null,this.instance=null)}},{key:"getName",value:function(){return this.name}},{key:"on",value:function(e,t){this.eventHub.on(e,t)}},{key:"once",value:function(e,t){this.eventHub.once(e,t)}},{key:"off",value:function(e,t){this.eventHub.off(e,t)}},{key:"refresh",value:function(){this.children.forEach(function(e){return e.refresh()})}},{key:"resize",value:function(){this.isConnected()&&this.children.forEach(function(e){return e.resize()})}},{key:"suspend",value:function(){this.children.forEach(function(e){return e.suspend()})}},{key:"resume",value:function(){this.children.forEach(function(e){return e.resume()})}},{key:"destroy",value:function(){this.disconnect(),this.eventHub.destroy(),this.children.forEach(function(e){e.destroy()}),this.children=[]}}]),e}(),Oz=function(e){k()(i,e);var n=w()(i);function i(e){var t,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return I()(this,i),(t=n.call(this)).scenarioElements={},t.offset={x:0,y:0},t.scenarios=e,t.isMobile=a,t}return D()(i,[{key:"makeScenarioPosition",value:function(e){var t=e.store.getLayout(),a=e.store.getMargin();return{left:"".concat((t.left-this.offset.x)*this.xScale,"px"),width:"".concat(t.width*this.xScale,"px"),height:"".concat(t.height*this.yScale,"px"),top:"".concat((t.top-this.offset.y)*this.yScale,"px"),zIndex:"".concat(e.store.getZIndex()+1e4),padding:"".concat(a.top,"px ").concat(a.right,"px ").concat(a.bottom,"px ").concat(a.left,"px")}}},{key:"createScenario",value:function(e){var t=new hU({tag:"div",className:"wyn-scenario-wrapper",style:this.makeScenarioPosition(e)});this.addChildren(t),this.scenarioElements[e.store.id]=t,e.connect(t.getRef())}},{key:"resizeAll",value:function(e,t){var a=this;this.xScale=e,this.yScale=t,this.scenarios.forEach(function(e){var t=a.scenarioElements[e.store.id];null!=t&&t.setStyle(a.makeScenarioPosition(e))})}},{key:"refreshAll",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this.scenarios.forEach(function(e){return e.refresh(t)})}},{key:"init",value:function(e,t,a){var n=this,i=0<arguments.length&&void 0!==e?e:1,r=1<arguments.length&&void 0!==t?t:1,o=2<arguments.length?a:void 0;this.xScale=i,this.yScale=r,o&&(this.offset=o),this.scenarios.forEach(function(e){n.isMobile&&!e.store.isUsedInMobile()||n.createScenario(e)})}},{key:"willUnmount",value:function(){this.scenarios.forEach(function(e){e.disconnect()})}}]),i}(mU),Hz=function(e){k()(l,e);var s=w()(l);function l(e){var t;I()(this,l),(t=s.call(this)).showBackground=!0,t.onAllScenariosMounted=function(){t.pageContext.pageModel.batchLoadAggregatedData()};var a=e.scenarios,n=e.pageContext,i=e.eventHub,r=e.store;if(t.pageContext=n,t.eventHub=i,t.store=r,t.scenarios=a,t.wrapper=new hU({tag:"div",className:"wyn-page",onClick:function(e){t.pageContext.pageModel.doOuterClick(null,e)}}),n.getIsMobile())t.wrapper.addClassName("wyn-page-mobile"),t.addChildren(t.wrapper);else{var o=new PU({className:"layout-full",content:t.wrapper});t.addChildren(o)}return t.pageContext.setIsIntegratedByPage(!0),t.eventHub.once(xz.Mounted,t.onAllScenariosMounted),t}return D()(l,[{key:"resize",value:function(){if(this.scenarioCollection){var e=this.updateScale(),t=e.xScale,a=e.yScale;this.scenarioCollection.resizeAll(t,a)}}},{key:"updateScale",value:function(){var e=this.wrapper.getRef().getBoundingClientRect();if(!this.pageContext.getIsMobile()){var i=0,r=0;this.scenarios.forEach(function(e){var t=e.store.getLayout(),a=t.left+t.width;i<a&&(i=a);var n=t.top+t.height;r<n&&(r=n)});var t=e.width/i,a=e.height/r;return this.pageContext.setGridSize(t,a),{xScale:t,yScale:a}}var n=e.width/360;return this.pageContext.setGridSize(n,n),{xScale:n,yScale:n}}},{key:"mountAll",value:function(){this.eventHub.fireBeforeMount(this.scenarios.length),this.scenarioCollection=new Oz(this.scenarios,this.pageContext.getIsMobile()),this.wrapper.addChildren(this.scenarioCollection);var e=this.updateScale(),t=e.xScale,a=e.yScale;if(this.scenarioCollection.init(t,a),this.showBackground){var n=new wU;n.setStyle(this.store.getOptions(),this.store.getDocTheme(),this.store.getImageList()),this.wrapper.addChildren(n)}this.eventHub.fireMounted()}},{key:"disableBackground",value:function(){this.showBackground=!1}},{key:"setOnJumpToPage",value:function(e){this.pageContext.setSwitchPageFuc(e)}},{key:"willUnmount",value:function(){this.pageContext.reset(),this.eventHub.off(xz.Mounted,this.onAllScenariosMounted)}},{key:"refresh",value:function(){this.eventHub.fireRender(),this.scenarioCollection?(this.pageContext.pageModel.batchLoadAggregatedData(),this.resize()):this.mountAll(),this.eventHub.fireRendered()}}]),l}(mU);function Bz(e,i){var r=[],o=!!i;return e.forEach(function(e){var t,a=e.dimensions;o?(t=Object.keys(a).filter(function(e){return i.includes(e)}),Object.keys(a).filter(function(e){return!i.includes(e)}).forEach(function(e){return delete a[e]})):t=Object.keys(a);var n=r.find(function(e){return e.colNames.length===t.length&&e.colNames.every(function(e){return void 0!==a[e]})});n?n.dims.push(a):r.push({colNames:t,dims:[a]})}),r}function Uz(a,e){var t=1<arguments.length&&void 0!==e&&e,n=a.colNames,i=a.dims,r=n[0],o={},s=[];return i.forEach(function(e){var t=e[r];o[t]||(s.push(function n(i,r,o){var e=i.colNames,t=i.dims;if(!(r>=e.length)){var s=e[r+1],l=e[r],u={},c=[];return t.forEach(function(e){if(e[l]===o){var t=e[s];if(!u[t]){var a=n(i,r+1,t);a&&c.push(a),u[t]=!0}}}),{value:o,children:c}}}(a,0,t)),o[t]=!0)}),{columnNames:n,range:{items:s},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:t,editable:!1}}function zz(e,t){var a=1<arguments.length&&void 0!==t&&t;return Bz(e).map(function(e){return Uz(e,a)})[0]}function Kz(e,t){var o=1<arguments.length?t:void 0,a=[];return(0<arguments.length&&void 0!==e?e:[]).forEach(function(i){var r=[];Object.keys(i.dimensions).forEach(function(e){var t=i.dimensions[e],a=o.getColumn(e);if(a&&!a.invalid){var n={field:a.name,value:a.formatValue(t),originalValue:t,display:a.display,isValue:a.isValue&&(a.method!==H.AggregationMethod.None||Jr.isCustomMeasureValue(a)),categoryName:a.categoryName};r.push(n)}}),r.length&&a.push(r)}),a}function jz(e,t,a){return!e||e!==t&&a!==H.CrossFilterMode.MultiSource}function Wz(e){var o,i,r,s,t=(o=[],e.forEach(function(r){return r.forEach(function(e,t){var a=0===t?null:r[t-1].id,n=Bo.a.map(r.slice(0,t+1),"value").toString(),i=e.originalValue;e.id=n,o.push({id:n,parentid:a,value:i})})}),o);return i=t,r={items:[]},s={},(i=ae.uniq(i)).forEach(function(e){var t={value:e.value},a=e.id,n=e.parentid||0;s[a]=s[a]||[],0<=i.findIndex(function(e){return e.parentid===a})&&(t.children=s[a]),0!==n?(s[n]=s[n]||[],s[n].push(t)):r.items.push(t)}),r}function Gz(e){return Bo.a.map(e[0],"field")}function Yz(e){var t=e.selectedFields;return{columnNames:Gz(t),range:Wz(t),rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:!1}}function qz(e,t){for(var a,n,i,r,o=e.length,s=Math.floor(o/2)-1;-1<s;s--){var l=s,u=2*s+1,c=2*s+2;u<o&&0<t(e[s],e[u])&&(l=u),c<o&&0<t(e[l],e[c])&&(l=c),l!==s&&(n=l,r=void 0,r=[(a=e)[i=s],a[n]],a[n]=r[0],a[i]=r[1])}}function Jz(e,t,a,n){var i,r;if(!e)return e;var o=e.data,s=t.getFlattenedPivotSettingItems([jD.Values]),l=null===(i=ae.head(s))||void 0===i?void 0:i.display,u=function(e){for(var t=[jD.Details,jD.Series,jD.Category],a=e.getFlattenedPivotSettingItems(),n=0;n<t.length;n++){var i=e.getFlattenedPivotSettingItems([t[n]]);if(i.length){var r=ae.head(i),o=r.display,s=e.getRoleScale([t[n]]),l=ae.propEq("display",o);return{dimensionName:o,canChangeType:!(a.findIndex(l)!==a.length-1-a.reverse().findIndex(l)||s&&s!==Va),isNumber:Jr.isNumber(r),isDate:Jr.isDate(r)}}}return{}}(t),c=u.dimensionName,d=u.canChangeType,p=u.isNumber,h=u.isDate;if(!l||!c||null==o||!o.length)return e;var y=ae.compose(ae.ifElse(function(){return d&&p},ae.map(function(e){return"".concat(e)}),ae.identity),ae.map(ae.head),Qz(a,function(e,t){return t[1]-e[1]}),ae.toPairs,ae.map(ae.reduce(function(e,t){return ae.add(t[l],e)},0)),ae.groupBy(function(e){return e[c]}))(o),g=d$._legacyWynbi.scenarioOthersCacheMap,m={dimensionName:c,valueName:l,aggForest:{},keysSequence:[],changeNumberToString:p&&d},f={},v=[],b=ae.compose(ae.ifElse(function(){return p&&!d||h},ae.filter(function(e){return e[c]!==Xz}),ae.reduce(function(e,t){if(ae.includes("".concat(t[c]),y))return[].concat(R()(e),[t]);var a,n=v.map(function(e){return t[e]}),i=[].concat(R()(n),["value"]),r=[].concat(R()(n),["used"]),o=ae.path(i,f),s=ae.path(r,f);return isNaN(o)||s?e:(f=ae.assocPath(r,!0,f),[].concat(R()(e),[Object.assign(Object.assign({},t),(a={},V()(a,c,Xz),V()(a,l,o),a))]))},[])),ae.map(function(e){var t=e[c];if(ae.includes("".concat(t),y))return e;var a=Object.assign(Object.assign({},e),V()({},c,Xz));v.length||(v=ae.compose(ae.append(c),ae.reject(ae.equals(c)),ae.reject(ae.includes(ae.__,ae.map(ae.prop("display"),s))),ae.keys)(a),m.keysSequence=v);var n=v.map(function(e){return a[e]}),i=[].concat(R()(n),["value"]).map(function(e){return null===e?lx:e}),r=ae.pathOr(0,i,f),o=[].concat(R()(ae.init(n)),[e[c]]).map(function(e){return null===e?lx:e});return f=ae.compose(ae.assocPath(o,e[l]),ae.assocPath(i,a[l]+r))(f),m.aggForest=ae.assocPath(i,a[l]+r,f),a}),ae.ifElse(function(){return p&&d},ae.map(function(e){return Object.assign(Object.assign({},e),V()({},c,"".concat(e[c])))}),ae.identity))(o);g[n]=m;var C=[].concat(R()(null===(r=null==e?void 0:e.sort[c])||void 0===r?void 0:r.order),[Xz]);return ae.compose(ae.assocPath(["sort",c,"order"],C),ae.assocPath(["data"],b))(e)}var Xz="[".concat(Ft("common.others")).concat("","]"),Qz=ae.curry(function(e,t,a){if(a.length<=e)return a;for(var n=[],i=0,r=a;i<e;i++)qz(r,t),n.push(ae.head(r)),r=r.slice(1,r.length);return n});function Zz(e){return e.model.type===__.ElementType.DataPoint}function $z(e){return e.model.type===__.ElementType.DataPointLabel}function eK(e){if(e.type===__.ElementType.PlotArea)return e;var t=e.parent;return null===t?null:t.type===__.ElementType.PlotArea?t:eK(t)}var tK="blankClick",aK="mouseEnter",nK="mouseLeave",iK="shapeClick",rK="seriesClick",oK="axisClick",sK="trellisColumnHeader",lK="trellisRowHeader",uK="selectionChange",cK="rePaint",dK="mouseMove",pK="legendItemClick",hK="mouseEnterCategory",yK="mouseLeaveCategory",gK="rendered",mK="SyncSelection";function fK(e){return e.model.type===__.ElementType.Plot||e.model.type===__.ElementType.Header||e.model.type===__.ElementType.PlotArea||e.model.type===__.ElementType.Footer||e.model.type===__.ElementType.TrellisCell||e.model.type===__.ElementType.TrellisCorner||e.model.type===__.ElementType.Axis}var vK=function(e){return[H.ChartType.Gauge,H.ChartType.Indicator,H.ChartType.KPI].includes(e)};function bK(e){var t;if(e)return e.__meta__&&(e=F()({},e,{},e.__meta__)),(t=e).__meta__&&"right"===t.__meta__.axis&&(e.__series__=e.__series2__),ae.omit(["__leftValue__","__rightValue__","__series2__","__meta__","axis"],e)}function CK(e,t){var a,n,i=e.items.map(function(e){return F()({},e,{},e.__meta__)}),r=function e(t){if(t.type===__.ElementType.Plot)return t;var a=t.parent;return null===a?null:a.type===__.ElementType.Plot?a:e(a)}(e);if("seriesTotalPlot"===(null==r?void 0:r.name))return i.filter(function(e){return null==e.__seriesTotalValue__});if(vK(t))return i;if(t===H.ChartType.FloorPlan)return i;if((Number.isInteger(e.depth)||"sunburst"===t)&&i.length)return[(a=e,(n=ae.clone(a.items[0]))[a.valueDefinition]=a.value,n.depth=a.depth,n)];var o="__rightValue__"===e.valueDefinition,s=null;if(e.item&&0!==e.item[e.valueDefinition]){s=F()({},e.item,V()({},o?"__series2__":"__series__",e.detail));var l=Bo.a.filter(i,s);if((null===l||void 0===l||!l.length)&&i.length)if(Object.values(s).includes(Xz))l=[ae.head(i)];return l}s=F()({},e.item,V()({},o?"__series2__":"__series__",e.detail));var u=Bo.a.filter(i,s);return u.length||(s[e.valueDefinition]=null,u=Bo.a.filter(i,s)),u}function TK(e,t){var n=V()({categorySortField:!0,seriesSortField:!0,trellisColumnSortField:!0,trellisRowSortField:!0,__leftValue__:!0,__rightValue__:!0,__meta__:!0,__series__:!0},t,!0);return e.reduce(function(e,a){return e.push(Object.keys(a).reduce(function(e,t){return n[t]||(e[t]=a[t]),e},{})),e},[])}function SK(e){var t=e.detail,a=e.valueDefinition,n=e.dimension,i=e.items,r={detail:t,valueDefinition:a,dimension:n},o={queryStr:"[]",itemsId:[]},s=Object.keys(r).reduce(function(e,t){var a="string"==typeof r[t]?'"'.concat(r[t],'"'):r[t];return null!=a&&e.push("".concat(t,"=").concat(a)),e},[]);if(o.itemsId=TK(i,a),s.length){var l=s.join(",");o.queryStr="[AND(".concat(l,")]")}return o}function DK(e){return{queryStr:"[]",itemsId:{latitude:e.latitude,longitude:e.longitude}}}var kK=function(e,a){var t=e.reduce(function(e,t){return a===H.ChartType.Gauge?t.items[0]["GaugeRangeKey"]||e.push(t):a===H.ChartType.Indicator?t.items[0]["IndicatorRangeKey"]||e.push(t):t.points&&t.points.length?e=e.concat(t.points):e.push(t),e},[]);return t=(t=t.map(function(e){return CK(e,a).map(bK)})).filter(function(e){return e.length})};function wK(e,t,a,n){var i=kK(a,n);if("__seriesTotalValue__"===t.valueDefinition&&i.length){var r=[];i.forEach(function(e){e.length&&(r=r.concat(e.map(function(e){return[e]})))}),i=r}else i=i.reduce(function(e,t){var a=t.filter(function(e){return void 0===e.__seriesTotalValue__});return a.length&&e.push(a),e},[]);var o=ae.clone(t.items||[]).map(function(e){return bK(e)}),s={event:{x:e.originalEvent.clientX,y:e.originalEvent.clientY},model:{item:ae.clone(t.item),items:o,valueDefinition:t.valueDefinition,selected:t.selected,value:t.value,depth:t.depth},selected:i};if(t.points)s.model={items:[],selected:!0};else if("__leftValue__"===t.valueDefinition||"__rightValue__"===t.valueDefinition){var l=CK(t,n)[0];s.model.valueDefinition=l.__meta__.valueDefinition,s.model.item=function(e,t){if(e)return e[t]=e.__leftValue__||e.__rightValue__,ae.omit(["__leftValue__","__rightValue__","__series2__"],e)}(s.model.item,l.__meta__.valueDefinition),s.multiValue=!0}return s}function xK(e){for(var t=0,a=0,n=0;n<e.length;n++){var i=e[n],r=i.option,o=r.name;if(("Bar"===r.type||"Line"===r.type||"Area"===r.type)&&r.config.axisMode===__.AxisMode.Cartesian&&"seriesTotalPlot"!==o){var s=i;if(0<s.seriesList.length){var l=s.seriesList[0].axisX.queryInterface("IAxisCategoryModel").categoryValues.length;0===t&&0<l&&(t=l)}a+="Bar"!==r.type||null!=r.encodings.details&&0<r.encodings.details.length&&r.encodings.details[0].group===__.Group.Stack?1:s.seriesList.length}}return 0===t&&0<a&&(t=1),{categoryCount:t,entryCount:a}}function AK(e,t){var a;return 0<e&&0<t&&(a=1===t?e<=3?.21*e:.5:e<=2&&t<=3?.32*e:.5),a}function IK(t,e){return null!=e&&e.length?e.map(function(e){var n=function(e,t){if(null!=e&&e.length){var i=new Map;t.forEach(function(e){if(!e.isValue){var t=e.display;i.set(t,e.originalValue)}});var a=e.find(function(e){var a=e.length?e[0]:e,n=!0;return i.forEach(function(e,t){if(a[t]!==e)return n=!1}),n});if(null!=a&&a.length)return a[0]}}(t,e);return n?e.map(function(e){if(e.isValue){var t=e.display,a=n[t];return F()({},e,{originalValue:a,value:a})}return e}):e}):e}function PK(e){for(;null!=e.parent;)e=e.parent;if(null==e)throw"DvModel Error";var t=e.queryInterface("IFlexDvModel");if(null==t)throw"FlexDvModel Error";return t.control}function _K(e){return{attributeId:e.attributeId,tableName:e.entityName,columnId:null!=(t=e).subColumnType&&t.subColumnType!==H.SubColumnType.None?e.parentAttributeName:e.attributeName,subColumnType:e.subColumnType||H.SubColumnType.None,aggregationType:e.method,display:e.display};var t}function MK(e,t,a){var n,i=t.data,r=[],o=[];switch(i.scenarioType){case H.ScenarioType.PivotChart:if(vK(i.chartType)&&0===a.getUsedDimensionItems().length){var s=t.getDataCache(),l=a.getAllUsedColumnsDisplayMapping();Object.keys(l).forEach(function(e){var t=l[e],a=(null==s?void 0:s.data.length)&&s.data[0][e]||0;Jr.isValueOrCustomMeasure(t)&&!Jr.isAttributeItem(t)&&r.push({fieldIdentifier:_K(t),value:a})})}else if(null!=e&&1===e.length){var u=a.getAllUsedColumnsDisplayMapping();Object(Ho.flatten)(e).forEach(function(e){var t=null==u?void 0:u[e.display];!t||Jr.isCalculation(t)||Jr.isAttributeItem(t)||(Jr.isCustomMeasureValue(t)||!Jr.isGroupingItem(t)?r.push({fieldIdentifier:_K(t),value:e.originalValue}):e.isValue||o.push({fieldIdentifier:_K(t),value:e.originalValue}))})}break;case H.ScenarioType.Visual:if(null!=e){var c=(n=e,Array.isArray(n)?n:[n]);if(1===c.length&&c[0].measures.length){var d=a.getAllUsedColumnsDisplayMapping();c[0].measures.forEach(function(e){var t=d[e.profile.display];!t||Jr.isCalculation(t)||Jr.isAttributeItem(t)||!Jr.isCustomMeasureValue(t)&&Jr.isGroupingItem(t)||r.push({fieldIdentifier:_K(t),value:null==e?void 0:e.value})}),Object.keys(c[0].dimensions).forEach(function(e){var t=a.getColumn(e);o.push({fieldIdentifier:_K(t),value:c[0].dimensions[e]})})}}}return{values:r,dimensions:o}}function LK(e,t){return e.attributeId===t.attributeId&&e.tableName===t.tableName&&e.columnId===t.columnId&&e.subColumnType===t.subColumnType}function RK(e,t){return LK(e.fieldIdentifier,t.column)&&(a=e.fieldIdentifier.aggregationType,n=t.aggregationType,(a||"none")===(n||"none"));var a,n}function VK(e,a){return e.filter(function(e){return null!=(t=e,a.find(function(e){return RK(e,t)}));var t})}function NK(e,t,a){var n,i,r,o,s=t.values,l=t.dimensions,u=function(e,t,n){var a=e.find(function(e){return e.id===t});if(a)return a;var i,r=rI()(e);try{var o=function(){var e=i.value,a=e.values;if(n.every(function(t){return null!==a.find(function(e){return RK(t,e)})}))return{v:e}};for(r.s();!(i=r.n()).done;){var s=o();if("object"===E()(s))return s.v}}catch(e){r.e(e)}finally{r.f()}}(e.pivots,a.id,s);if(u){var c=u.dimensions,d=u.values,p=u.filters,h=Object.assign(Object.assign({},u),{dimensions:[],calcValues:[],values:VK(d,s),filters:(i=l,r=c,o=null!=(n=p)&&n.items?Object(Ho.clone)(n.items):[],i.forEach(function(t){var e=r.find(function(e){return LK(t.fieldIdentifier,e.column)});if(e){var a={type:Jp.Exact,range:{items:[{value:t.value}]},exclude:!1};o.push({columns:[e.column],filterBy:a})}}),{type:H.LogicalType.And,items:o})});return h._extendFields&&delete h._extendFields,Object.assign(Object.assign({},e),{pivots:[h]})}}function EK(e,n){var u=[];return function r(e,t,a){var o=1<arguments.length&&void 0!==t?t:[],s=2<arguments.length&&void 0!==a?a:0,l=n[s];e.forEach(function(e){var t,a,n,i=[].concat(R()(o),[(t=e.value,n="General",(null==(a=l)?void 0:a.subColumnType)!==H.SubColumnType.None&&(n="subDate_".concat(a.subColumnType)),wu(n,t,{nullString:Ft("common.showNullAs"),emptyString:Ft("common.showEmptyAs")}))]);e.children&&e.children.length?r(e.children,i,s+1):u.push(i)})}(e.items),u}function FK(e){var t,a=[],n=e.pivots,i=e.filters,r=((null==i?void 0:i.items)||[]).concat((null===(t=n[0].filters)||void 0===t?void 0:t.items)||[]);return r.length&&r.forEach(function(e){null!=e.columns?a.push({name:function(e){var t=e.columnId;if(e.subColumnType!==H.SubColumnType.None){var a=oy(e.subColumnType);t+="(".concat(a,")")}return t}(e.columns[0]),value:function(e){var t=e.filterBy,a="";switch(t.type){case Jp.Exact:var n=t.range;if(n.items.length)a=EK(n,e.columns).map(function(e){return 1<e.length?"[".concat(e.join(","),"]"):e}).join(","),t.exclude&&(a="".concat(Ft("common.exclude")," ").concat(a));break;case Jp.Range:a=t.exclude?Ft("patterns.conditions.notBetween",{max:t.range.max,min:t.range.min}):Ft("patterns.conditions.between",{max:t.range.max,min:t.range.min});break;case Jp.Greater:a="".concat(Ft("conditions.greater")," ").concat(t.range.min);break;case Jp.Less:a="".concat(Ft("conditions.less")," ").concat(t.range.max);break;case Jp.StartWith:a="".concat(Ft("dialogs.filter.types.startWith")," ").concat(t.range.pattern);break;case Jp.EndWith:a="".concat(Ft("dialogs.filter.types.endWith")," ").concat(t.range.pattern);break;case Jp.Contain:a="".concat(Ft("dialogs.filter.types.contain")," ").concat(t.range.pattern);break;case Jp.MatchWord:a="".concat(Ft("dialogs.filter.types.matchWord")," ").concat(t.range.pattern)}return a}(e)}):null!=e.items&&a.push({name:Ft("common.groupFilter"),value:""})}),a}var OK=function(e){return"tooltip"!==e};function HK(e){var t=d$.definitionManager.getDefinition(e).getName();return t||Ft("patterns.chartTitle.default")}function BK(e){var t,a=e.scenario,n=e.datasetSchema,i=e.datasetProfile,r=e.languageResource,o=void 0===r?{}:r;if(a.options.title.text)return a.options.title.text;var s="",l=(t={},V()(t,H.ChartType.PivotTable,Ft("components.pivotTable")),V()(t,H.ChartType.DataTable,Ft("components.rawDataTable")),V()(t,H.ChartType.WebContent,Ft("components.webContent")),V()(t,H.ChartType.KpiMatrix,Ft("components.kpiMatrix")),t);switch(a.scenarioType){case H.ScenarioType.PivotChart:case H.ScenarioType.Visual:var u=ux(a),c=uC.create(a.pivot.pivotSetting,n,i,u,o);s=(s=a.chartType!==H.ChartType.DataTable?function(e,n,i){if(e.isReady()){var t=ae.map(ae.prop("display")),a=t(function(e){if(n!==H.ChartType.Gauge&&n!==H.ChartType.Indicator&&n!==H.ChartType.KPI)return e;if(i.valueSourceType===Ui.CustomInput)return[{display:Ft("inspector.properties.charts.gaugeValueCustomInput")}];var t=0<e.filter(function(e){return"comparisonValue"===e.categoryName}).length,a=0<e.filter(function(e){return"value"===e.categoryName}).length;return t&&!a?[{display:Ft("inspector.properties.charts.emptyValue")}]:e.filter(function(e){return"value"===e.categoryName})}(e.getUsedValueItems(OK,{withoutHiddenDataRoles:!0}))),r=t(e.getUsedDimensionItems(!1,{withoutHierarchy:!1})),o=function(e){var t="";return e&&e.length&&(t+=e.pop()),e.length&&(t=e.join(Ft("patterns.chartTitle.separator"))+Ft("patterns.chartTitle.connector")+t),t},s=o(a);return 0<r.length&&(s=Ft("patterns.chartTitle.pattern",{measure:s,dimension:o(r)})),s}}(c,a.chartType,a.options.property):function(e){if(e.isReady())return Bo.a.map([].concat(R()(e.getUsedValueItems(!1,{withoutHiddenDataRoles:!0})),R()(e.getUsedDimensionItems(OK,{withoutHierarchy:!1,withoutHiddenDataRoles:!0}))),"display").join(Ft("patterns.chartTitle.separator"))}(c))||(l[a.chartType]||HK(a));break;case H.ScenarioType.Slicer:s=function(e,t){if(t.isReady()){var a=t.getUsedDimensionItems(),n="";switch(e.slicerType){case H.SlicerType.TreeSlicer:case H.SlicerType.ComboBoxSlicer:n=ae.compose(ae.join(Ft("patterns.chartTitle.separator")),ae.map(ae.prop("display")))(a);break;case H.SlicerType.DataRangeSlicer:case H.SlicerType.LabelSlicer:case H.SlicerType.DateRangeSlicer:case H.SlicerType.RelativeDateSlicer:var i=ae.head(a);n=i&&i.display}if(!n)switch(e.slicerType){case H.SlicerType.TreeSlicer:n=Ft("components.treeSlicer");break;case H.SlicerType.ComboBoxSlicer:n=Ft("components.comboSlicer");break;case H.SlicerType.DataRangeSlicer:n=Ft("components.dataRangeSlicer");break;case H.SlicerType.LabelSlicer:n=Ft("components.labelSlicer");break;case H.SlicerType.DateRangeSlicer:n=Ft("components.dateRangeSlicer");break;case H.SlicerType.RelativeDateSlicer:n=Ft("components.relativeDateSlicer")}return n}}(a,uC.create(a.pivot.pivotSetting,n,i,null,o))||HK(a)}return s}function UK(e,u,c,d){var p=d.pivotSettingHelper;return e.reduce(function(a,e){function t(e){var t=0<arguments.length&&void 0!==e?e:{};return Object.assign(Object.assign({},a),t)}var n,i,r,o;try{switch(e){case H.CheckFieldType.HasDataset:return t({hasDataset:!!Us.datasetId(u)});case H.CheckFieldType.HasDimension:return t({hasDimension:null==p?void 0:p.hasDimensionSetting()});case H.CheckFieldType.HasValue:return t({hasValue:null==p?void 0:p.getUsedValueItems(!1,{withoutHiddenDataRoles:!0}).some(function(e){return!Jr.isAttributeItem(e)})});case H.CheckFieldType.Focus:return t({focus:c.focus});case H.CheckFieldType.HasValidColumn:return t({hasValidColumn:null==p?void 0:p.hasDimensionSetting()});case H.CheckFieldType.IsParameterValue:var s=Us.sliceFilters(u);return t({isParameterValue:Fl((null==s?void 0:s.length)&&s[0].values).isParameterValue});case H.CheckFieldType.ShowPivotTable:var l=Us.showPivotTable(u);return void 0===l&&(l=!0),t({showPivotTable:l});case H.CheckFieldType.CanEdit:return t({canEdit:(o=u,!Jr.isSlicer(o)||(null==p?void 0:p.hasDimensionSetting()))});case H.CheckFieldType.Mobile:return t({mobile:c.mobile});case H.CheckFieldType.Viewer:return t({viewer:c.viewer});case H.CheckFieldType.Editing:return t({editing:c.editing});case H.CheckFieldType.HasParameters:return t({hasParameters:d.hasParameters});case H.CheckFieldType.HasRuntimeFilter:return t({hasRuntimeFilter:null===(i=null===(n=null==u?void 0:u.pivot)||void 0===n?void 0:n.pivotFilters)||void 0===i?void 0:i.some(function(e){return!1===(null==e?void 0:e.editable)})});case H.CheckFieldType.InSingleScenarioMode:return t({inSingleScenarioMode:!!d$.globalConfigManager.get("inSingleScenarioMode")});case H.CheckFieldType.HasCrossFilterSetting:return t({hasCrossFilterSetting:!(null==u||!u.crossFilterSetting)});case H.CheckFieldType.IsInCardItem:return t({isInCardItem:!(null===(r=null==u?void 0:u.state)||void 0===r||!r.isInCardTemplate)});case H.CheckFieldType.IsCardInDesigner:return t({isCardInDesigner:u.chartType===H.ChartType.Card&&!c.viewer});case H.CheckFieldType.HasCustomDataSource:return t({hasCustomDataSource:Jr.isCustomDataSource(u)});default:return t()}}catch(e){return nu.error(e),t()}},{})}function zK(e,t,a,n,i,r){var o=t[0];if(o){var s,l=e,u={name:a.name},c=(s=i).type===H.DrillDownType.Default?[]:s.items,d=ae.find(ae.propEq("name",u.name),c);if(d&&d.display&&(u.userDisplay=d.display),l=oh()(l,{pivot:{pivotSetting:V()({},o,{values:{$set:[u]}})},state:{drillState:function(e){return oh()(e||{},{activeDrillItemIndex:{$set:r}})}},drillDown:{$set:F()({},i,{items:i.items.filter(function(e){return e.name!==a.name})})}}),Jr.isMapChart(e)){var p=Us.mapInfo(e),h=a.geoInfo,y=id(a.mapId,p.mode),g=nd(h,y);l=oh()(l,{options:{property:{mapInfo:{nodeId:{$set:g||p.nodeId}}}}})}if(l=oh()(l,{state:{drillItemName:{$set:a.name},$unset:["pivotSettingCache"]}}),n){var m,f,v,b=null==e||null===(m=e.pivot)||void 0===m?void 0:m.datasetId,C=Ol(null===(f=n.range)||void 0===f?void 0:f.items,null===(v=n.columnNames)||void 0===v?void 0:v.map(function(e){return{name:e}}),b,Ll),T=ae.assocPath(["range","items"],C,n);l=oh()(l,{pivot:{pivotFilters:{$push:[F()({},T,{drillItemName:a.name})]}}})}return l}}function KK(e,i,t){return function(e,t){switch(e){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackColumn:case H.ChartType.PercentStackArea:case H.ChartType.RadialStackedBar:case H.ChartType.BarInPolar:case H.ChartType.StackBarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Rose:case H.ChartType.Funnel:if(t===En)return[{name:"values",kind:H.DataRoleType.Value}];break;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:if(t===En)return[{name:"upper",kind:H.DataRoleType.Value},{name:"lower",kind:H.DataRoleType.Value}];break;case H.ChartType.Composite:if(t===En)return[{name:"leftValues",kind:H.DataRoleType.Value},{name:"rightValues",kind:H.DataRoleType.Value}];break;case H.ChartType.DisaggregateScatter:switch(t){case Nn:return[{name:"xAxis",kind:H.DataRoleType.GroupingOrValue}];case En:return[{name:"yAxis",kind:H.DataRoleType.GroupingOrValue}]}break;case H.ChartType.Bubble:switch(t){case Nn:return[{name:"xAxis",kind:H.DataRoleType.Grouping}];case En:return[{name:"yAxis",kind:H.DataRoleType.Grouping}]}}return[]}(e,t).some(function(e){var t,a,n=i.getFlattenedPivotSettingItems([e.name]);return e.kind===H.DataRoleType.Value?0<n.length:1===n.length&&(n.length&&(t=n[0],a=!(Jr.isCustomMeasureValue(t)||t.method&&t.method!==H.AggregationMethod.None),t.scale!==Va&&!(a&&!Jr.isNumber(t))))})}function jK(e,t,a,n){if(0<e.length){var i=e.filter((r=n,o=a,function(e){if((e.aggregateType!==Pn||1<e.value||e.value<-1)&&[H.ChartType.PercentStackArea,H.ChartType.PercentStackBar,H.ChartType.PercentStackColumn,H.ChartType.Funnel].includes(o))return!1;if(e.detailLevel===Bn){var t=r.getPivotSetting({valuesOnly:!0});if(0===t.trellisColumns.length&&0===t.trellisRows.length)return!1}var a=null==e.axisType?En:e.axisType;return!(a!==Nn&&a!==En||a===Nn&&!KK(o,r,Nn)||a===En&&!KK(o,r,En))}));t.overlays=i.map(function(e){var t;return{type:"ReferenceLine",position:"Front",aggregate:function(e){if(e!==Pn)return e}(e.aggregateType),value:function(e,t){if(e===Pn)return t}(e.aggregateType,e.value),axis:function(e,t){switch(e){case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:return t.axisType||En;default:return En}}(a,e),style:{stroke:e.lineColor,strokeWidth:e.showLine?e.lineWidth:0,strokeDasharray:e.lineType===Fn.Solid?"1,0":"5,3"},detailLevel:(t=e.detailLevel,0<n.getFlattenedPivotSettingItems(["trellisColumns","trellisRows"]).length?t===Hn?Bn:t===Bn?Hn:t:t)}})}var r,o}var WK,GK=function(e){k()(n,e);var a=w()(n);function n(){var e;I()(this,n),(e=a.call(this)).shown=!1,e.titleText="";var t=new hU({tag:"div",className:"wyn-scenario-title",style:{display:"none"}});return e.titleHost=t,e.addChildren(t),e}return D()(n,[{key:"setShown",value:function(e){e!==this.shown&&((this.shown=e)?this.titleHost.setStyle({display:"block"}):this.titleHost.setStyle({display:"none"}))}},{key:"updateTitle",value:function(e){var t=BK({scenario:this.context.store.toJSON(),datasetSchema:e.getDatasetSchema(),datasetProfile:e.getDatasetProfile(),languageResource:e.getLanguageResource()});this.setTitle(t)}},{key:"init",value:function(e,t){this.setTitleStyle(e,t);var a=this.context.definition.getName();this.setTitle(e.text||a)}},{key:"setTitleStyle",value:function(e,t){e.showTitle&&(this.setShown(!0),this.titleHost.setStyle(Object.assign(Object.assign({},e.textStyle),{textAlign:function(e){switch(e){case ka:return"center";case wa:return"right";default:return"left"}}(e.alignment),fontSize:Jc(e.textStyle.fontSize,t),fontWeight:Uu(e.textStyle.fontWeight)})))}},{key:"getTitle",value:function(){return this.titleText}},{key:"setTitle",value:function(e){this.titleHost.setText(e),this.titleHost.setTitle(e),this.titleText=e}}]),n}(mU),YK=(WK={},V()(WK,H.ActionMenuType.CleanSliceFilter,!0),V()(WK,H.ActionMenuType.SlicerSearch,!0),V()(WK,H.ActionMenuType.SlicerSort,!0),V()(WK,H.ActionMenuType.Focus,!0),V()(WK,H.ActionMenuType.ClearRuntimeFilter,!0),V()(WK,H.ActionMenuType.OpenFullDashboard,!0),WK),qK=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this))._onClickHandler=function(e){e!==H.ActionMenuType.Focus?e!==H.ActionMenuType.OpenFullDashboard?t.onClickAction(e):function(){var t,e=d$.globalConfigManager.get("openfulldashboardmode");if(d$.accessService.hasBaseUrl()){var a=d$.globalConfigManager.get("dashboardId");t=new URL("".concat(d$.accessService.getUrl()).concat(H.PathName.Dashboard,"/").concat(a));var n=d$.globalConfigManager.getInitConfig();Object.keys(n||{}).forEach(function(e){null==n[e]||["baseUrl","disableIframe"].includes(e)||t.searchParams.append(e,n[e])})}else t=new URL(window.location.href),["scenario","actions","size","openfulldashboardmode"].forEach(function(e){return t.searchParams.delete(e)});var i=t.href;switch(e){case H.JumpToOpenMode.NewWindow.toLowerCase():dl(i);break;case H.JumpToOpenMode.Redirect.toLowerCase():default:try{window.top.location.href=i}catch(e){nu.error(e),window.location.href=i}}}():t.context.toggleFocus()},t.actionbar=new JU({onClick:t._onClickHandler}),t.addChildren(t.actionbar),t.onClickAction=e.onClick,t}return D()(n,[{key:"update",value:function(e){e&&(this.pivotSettingHelper=e);var t=this.pivotSettingHelper,a=this.context,n=a.store,i=a.definition,r=a.getEnv,o=n.toJSON(),s=r(),l=UK(Object.values(H.CheckFieldType),o,s,{pivotSettingHelper:t,hasParameters:!1}),u=i.getActionBar(o,s,l),c=[];u.forEach(function(e){YK[e.type]&&c.push({icon:e.iconCss,text:e.label,value:e.type})}),this.actionbar.setItems(c)}}]),n}(mU),JK=function(e){k()(a,e);var t=w()(a);function a(){var r;return I()(this,a),(r=t.call(this)).onLoadingStateChange=function(e){e?r.context.eventHub.fireLoadStart():r.context.eventHub.fireLoadComplete()},r.onAggError=function(e){var t=Pd(e);t.id=e.id||Bd.a.v1(),r.context.eventHub.fireError(t);var a,n,i=(a=e,n=Ft("error.getDatasetFailed"),a&&(403===a.httpStatusCode?n=Ft("error.getDatasetNoAccess"):200214===a.errorCode&&(n=Ft("error.errorCode.200214.content",{maxAggDataPoints:a.context.MaxAggDataPoints}))),n);r.errorPanel.setText(i),r.errorPanel.show(),r.container.hide()},r.onKeepOrExclude=function(e){r.context.store.addRuntimeFilter(e),r.refresh()},r.captureClickHandler=function(e){r.context.pageContext.pageModel.doOuterClick(r.context.store.id,e)},r.bodyHost=new hU({tag:"div",className:"wyn-scenario-body"}),r.contentHost=new hU({tag:"div",className:"wyn-scenario-content"}),r.errorPanel=new OU,r.scenarioTitle=new GK,r.bodyHost.addChildren(r.errorPanel),r.contentHost.addChildren(r.scenarioTitle,r.bodyHost),r.addChildren(r.contentHost),r.actionBarContainer=new qK({onClick:function(e){return r.onActionBarClick(e)}}),r.addChildren(r.actionBarContainer),r}return D()(a,[{key:"willUnmount",value:function(){this.scenarioModel&&this.context.pageContext.pageModel.removeScenario(this.scenarioModel),this.contentHost.removeEventListener("click",this.captureClickHandler,!0)}},{key:"onAggChange",value:function(){this.errorPanel.hide(),this.container.show()}},{key:"init",value:function(){this.contentHost.addEventListener("click",this.captureClickHandler,!0)}},{key:"shouldRefresh",value:function(){return!1}},{key:"tryRefresh",value:function(e){this.destroyed||!e&&this.context.pageContext.getIsIntegratedByPage()&&!this.shouldRefresh()||this.refresh()}},{key:"onActionBarClick",value:function(e){e===H.ActionMenuType.ClearRuntimeFilter&&(this.context.store.cleanRuntimeFilter(),this.refresh())}},{key:"resize",value:function(){}},{key:"showActions",value:function(){this.actionBarContainer.update()}},{key:"getTitle",value:function(){return this.scenarioTitle.getTitle()}}]),a}(mU),XK=function(e,t,a){if(function(e){switch(e){case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.Sunburst:case H.ChartType.TreeMap:case H.ChartType.Gauge:case H.ChartType.Indicator:case H.ChartType.KPI:return!1;default:return!0}}(t.chartType)){var n=t.options.property.referenceLine;jK(n,e.plots[0].config,t.chartType,a),e.plots[1]&&"seriesTotalPlot"!==e.plots[1].name&&jK(n,e.plots[1].config,t.chartType,a)}return e};function QK(e){var t;switch(e){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.TreeMap:case H.ChartType.Composite:case H.ChartType.Funnel:case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.FloorPlan:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:t=__.ColorOptionType.Linear;break;case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.Rose:case H.ChartType.RadialStackedBar:case H.ChartType.Sunburst:case H.ChartType.FilledRadar:case H.ChartType.Map:t=__.ColorOptionType.Radial}return t}function ZK(e){return void 0!==QK(e)}function $K(e){return ae.is(Object,e)&&e.type===Pr?F()({},e,{position:function(e){switch(e){case _r.Top:case _r.Bottom:case _r.Left:case _r.Right:return[{keyword:e}];case _r.LeftTop:return[{keyword:_r.Left},{keyword:_r.Top}];case _r.RightTop:return[{keyword:_r.Right},{keyword:_r.Top}];case _r.LeftBottom:return[{keyword:_r.Left},{keyword:_r.Bottom}];case _r.RightBottom:return[{keyword:_r.Right},{keyword:_r.Bottom}];default:return[{keyword:_r.Center}]}}(e.position)}):e}function ej(e,t,a,n,i){if(a){if("string"==typeof e){var r=lc()(e),o=Lc(r,50);return{type:n,angle:i,colorStops:[Lc(o,t),Lc(r,t)]}}if(ae.is(Object,e))return F()({},e,{colorStops:e.colorStops.map(function(e){return Lc(e,t)})})}return ae.is(Object,e)?F()({},e,{colorStops:e.colorStops.map(function(e){return Lc(e,t)})}):"string"==typeof e?Lc(e,t):e}function tj(e,a,n,i,r,t){var o,s,l=e.paletteId,u=e.graphOpacity,c=e.autoGradient,d=e.maintainColorAssignments,p=5<arguments.length&&void 0!==t?t:"",h=null!=(o=l)&&o.length?o.map(function(e){return $K(e)}):o,y=c&&ZK(a),g=y&&QK(a),m=y&&function(e){var t;switch(e){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.TreeMap:case H.ChartType.Composite:case H.ChartType.Funnel:case H.ChartType.RangeColumn:case H.ChartType.RangeArea:t=0;break;case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:t=-45;break;case H.ChartType.Bar:case H.ChartType.RangeBar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:t=90}return t}(a);if(d){var f=n&&zc(a,n,p);if(f){var v=f.dataPoints,b=f.type,C=f.format,T=[],S=b===H.ColorRelationType.MeasureName;if(i&&v)if(S){(function(e,t){var a;if(e!==H.ChartType.Composite){var n=t.profile.values;if(null!==(a=n.values)&&void 0!==a&&a.length)return n.values.map(function(e){return{columnIdentifier:tl(e),display:e.display}})}return null})(a,n).forEach(function(t){var e=i.find(function(e){return ae.equals(e.dataPoint,t.columnIdentifier)});if(e){var a=Nc(e.color,r);T.push({data:null==t?void 0:t.display,color:ej(a,u,y,g,m)})}})}else{var D=i.reduce(function(e,t){return e[t.dataPoint]=Nc(t.color,r),e},{});v.forEach(function(e){if(D[e]){var t=e;!function(e){switch(e){case H.ChartType.TreeMap:case H.ChartType.Sunburst:case H.ChartType.FloorPlan:case H.ChartType.Map:return!1;default:return!0}}(a)?function(e,t){if(t){var a=t.details,n=t.color;switch(e){case H.ChartType.TreeMap:case H.ChartType.Sunburst:return 1===(null==a?void 0:a.values.length)&&Jr.isDate(null==a?void 0:a.values[0]);case H.ChartType.FloorPlan:case H.ChartType.Map:return 1===(null==n?void 0:n.values.length)&&Jr.isDate(null==n?void 0:n.values[0])&&Jr.isGroupingItem(null==n?void 0:n.values[0]);default:return!0}}return!1}(a,null==n?void 0:n.profile)&&(t=new Date(t)):t=ku(C,t),T.push({data:t,color:ej(D[e],u,y,g,m)})}})}return T.map(function(e){return F()({},e,{color:$K(e.color)})})}}return c&&ZK(a)?h.map(function(e){return ej(e,u,y,g,m)}):h?(s=u,h.map(function(e){return ae.is(Object,e)?F()({},e,{colorStops:e.colorStops.map(function(e){return Lc(e,s)})}):"string"==typeof e?Lc(e,s):e})):[]}var aj=function(e){return e.nodeId},nj=function(e){return e.name||e.NAME};function ij(e,a){var t=e[0],n=t?t[a]:0,i=t?t[a]:0;return e.forEach(function(e){var t=e[a];n<t&&(n=t),t<i&&(i=t)}),{max:n,min:i}}function rj(e,t,a){if(e<1||t===a)return[{from:a,to:t+1}];for(var n,i=wl(t-a),r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=i/e,s=Math.ceil(o/r)*r,l=Math.floor(a/r)*r,u=(t-l)/(e-1),c=l+(n=u<s?function(e,t,a){for(var n,i=.1*a;!n;){var r=wl(Math.ceil(e/i)*i);r<t?n=r:i*=.1}return n}(o,u,r):s),d=[{to:c,title:"<".concat(c)}],p=e-2;0<p;){var h=wl(c+n);d.push({from:c,to:h}),c=h,p--}return d.push({from:c,title:">".concat(c)}),d}function oj(e,t,a){for(var n=a/100/t,i=[],r=0,o=0;o<t;o++){var s=r+n;i.push(lc()(e).alpha(s).rgb().toString()),r=s}return i}function sj(e){return e&&e.values&&e.values[0]&&e.values[0].display}function lj(e){return e&&e.values&&e.values[0]&&e.values[0].format}function uj(e){return e&&e.values&&e.values[0]&&e.values[0].name}function cj(t,e,a,n,i,r,o,s,l){var u=8<arguments.length&&void 0!==l?l:"",c=a.gradientColor,d=a.useLevelColor,p=a.gradientColorGroupNumber,h=a.usePalette,y=a.graphOpacity,g=a.maintainColorAssignments,m=!0,f=null,v=void 0===y?n:y,b=null==a?void 0:a.paletteId,C=tj({paletteId:b,graphOpacity:v,autoGradient:i,maintainColorAssignments:g},H.ChartType.Map,s,r,o,u);t||h||(C=[c]);var T=e&&e.find(function(e){return null!=e[t]});if(!h&&T&&"number"==typeof T[t])if(m=!1,d){var S=ij(e,t);C=oj(c,(f=rj(p,S.max,S.min)).length,v)}else C=[Lc(c,0),Lc(c,v)];return{discrete:m,ranges:f,palette:C}}function dj(e){return e.long&&e.lat}var pj=function(e,t,a,n,i){var r=a.textStyle,o=a.docTheme,s=a.pivotSettingHelper,l=t.autoGradient,u=t.graphOpacity,c=F()({},t,{textStyle:r,docTheme:o});if(!e)return{common:c};var d=e.reduce(function(e,t){if(!t)return e;var a=t.data,n=t.profile,i=H.DisplayUnit.None;if(t.profile&&"scatter"===t.profile.name){var r=u_("size",a,n.roles),o=u_("color",a,n.roles);i=Math.max(r,o)}t.profile&&"map"===t.profile.name&&(i=u_("color",a,n.roles));var s={data:a,setting:n,autoDisplayUnit:i};return e.push(s),e},[]),p=MM(s);return c.conditionalFormat=t.conditionalFormat.filter(function(t){return p.find(function(e){return Bo.a.isEqual(e.field,t.field)})}),{common:c,bubble:function(e,t,a,n,i,r,o){var s=e.find(function(e){return"scatter"===e.setting.name&&!dj(e.setting.roles)});if(s){var l=s.setting.roles,u=l.size,c=l.color,d=l.shape,p=l.location,h=[u,c,d].map(function(e){return{name:uj(e),display:sj(e),format:lj(e)}}),y=N()(h,3),g=y[0],m=y[1],f=y[2];return F()({autoDisplayUnit:s.autoDisplayUnit,size:g.display,sizeFormat:g.format,shape:f.display,shapeFormat:f.format,color:m.display,colorFormat:m.format,location:sj(p),values:[g,m],fieldsWithIdentifier:[].concat(R()(yM(p.values)),R()(yM(u.values)),R()(yM(c.values)),R()(yM(d.values)))},t.scatter,{},cj(m.display,s.data,t.scatter,a,n,i,r,o,"scatter"))}}(d,t,u,l,i,o,e),colorGradient:function(e){var t=e.configs,a=e.property,n=e.baseOpacity,i=e.autoGradient,r=e.dataColorRelationships,o=e.docTheme,s=e.aggResult,l=t.find(function(e){return"map"===e.setting.name});if(l){var u=l.setting.roles,c=u.color,d=u.location,p=sj(c),h=lj(c),y={name:uj(c),display:p,format:h};return F()({autoDisplayUnit:l.autoDisplayUnit,color:p,colorFormat:h,location:sj(d),values:[y],fieldsWithIdentifier:[].concat(R()(yM(c.values)),R()(yM(d.values)))},a.mapTile,{},cj(p,l.data,a.mapTile,n,i,r,o,s))}}({configs:d,property:t,baseOpacity:u,autoGradient:l,dataColorRelationships:n,docTheme:o,aggResult:e}),latLong:function(e,t,a,n,i,r,o){var s=e.find(function(e){return"scatter"===e.setting.name&&dj(e.setting.roles)});if(s){var l=s.setting.roles,u=l.size,c=l.color,d=l.long,p=l.lat,h=l.shape,y=l.location,g=[u,c,h].map(function(e){return{name:uj(e),display:sj(e),format:lj(e)}}),m=N()(g,3),f=m[0],v=m[1],b=m[2];return F()({autoDisplayUnit:s.autoDisplayUnit,size:f.display,sizeFormat:f.format,shape:b.display,shapeFormat:b.format,color:v.display,colorFormat:v.format,long:sj(d),lat:sj(p),location:sj(y),values:[f,v],fieldsWithIdentifier:[].concat(R()(yM(d.values)),R()(yM(p.values)),R()(yM(u.values)),R()(yM(c.values)),R()(yM(h.values)))},t.scatter,{},cj(v.display,s.data,t.scatter,a,n,i,r,o,"scatter"))}}(d,t,u,l,i,o,e)}};function hj(e,t,a){var n=aj(e);return{mapInfo:r.findMapInfo(n,e.mode),valueField:null,dimFields:t.location,filters:a}}function yj(e,t,a){var n,i=e.type,r=e.detailLevel,o=e.lineType,s=e.lineColor,l=e.lineWidth,u=e.polynomialDegree;if(e.type!==Cr){var c={type:(n=i)!==Cr?"".concat(n,"Trendline"):"",position:"Front",order:i===Sr?u:void 0,detailLevel:function(e,t){if(e===Hn&&0<t.getFlattenedPivotSettingItems(["trellisColumns","trellisRows"]).length)return Bn;return e}(r,a),style:{strokeWidth:l,stroke:s,strokeDasharray:o===Fn.Solid?"1,0":"5,3"}};t.overlays&&t.overlays.length?t.overlays.push(c):t.overlays=c}}var gj,mj,fj,vj,bj=function(e,t,a){if(function(e){switch(e){case H.ChartType.PercentStackColumn:case H.ChartType.PercentStackBar:case H.ChartType.PercentStackArea:case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.Rose:case H.ChartType.Sunburst:case H.ChartType.TreeMap:case H.ChartType.Composite:case H.ChartType.Funnel:case H.ChartType.Gauge:case H.ChartType.Indicator:case H.ChartType.KPI:return!1;default:return!0}}(t.chartType)){var n=t.options.property.trendLines[0];yj(n,e.plots[0].config,a)}return e},Cj=function(){function i(e,t){var n=this;I()(this,i),this.hasInitForMap=!1,this.getDetail=function(e,t){if(0===t)return null;if(!e)return{items:[],label:Ft("charts.tooltip.drillDetailNoFilter")};var a=e.columnNames.map(function(t){var e=n.pivotSettingHelper.getColumn(t),a=n.getDrillSetting()._rootItems.find(function(e){return e.name===t});return null!=a&&a.display&&(e.display=a.display),e});return Object.assign({label:1===a.length?a[0].display:""},function(e,a,t){var n=2<arguments.length&&void 0!==t?t:10;if(1<a.length){var i=function n(e,i,t,a,r){var o=2<arguments.length&&void 0!==t?t:10,s=3<arguments.length&&void 0!==a?a:[],l=4<arguments.length&&void 0!==r?r:[],u=i[0]&&i[0].formatValue||function(e){return e},c=l;return e.some(function(e){if(c.length===o)return!0;var t=s.concat(u(e.value));if(1<i.length){var a=i.slice(1);return n(e.children,a,o,t,c),!1}return c.push(t),!1}),c}(e,a,n),r=function a(e){var t=0<arguments.length&&void 0!==e?e:[];return 0===t.length?1:t.reduce(function(e,t){return e+a(t.children)},0)}(e);return{items:i.map(function(e){var t=e.map(function(e,t){return"".concat(a[t].display,"='").concat(e,"'")}).join(" AND ");return"[".concat(t,"]")}),hasEllipsis:n<r,total:r}}var o=a[0]&&a[0].formatValue||function(e){return e};return{items:e.slice(0,10).map(function(e){return o(e.value)}),hasEllipsis:10<e.length,total:e.length}}(e.range.items,a))},this.store=e,this.definition=t;var a=e.getTempStatus("drillState");a?(this.root=a.root,this.activeIndex=a.activeIndex,this.items=a.items,this.pivotSettingHelper=a.pivotSettingHelper):(this.root={label:Ft("charts.tooltip.drillRoot"),scenario:this.store.toJSON()},this.activeIndex=0,this.items=[this.root],this.pivotSettingHelper=null)}return D()(i,[{key:"setPivotSettingHelper",value:function(e){this.pivotSettingHelper=e}},{key:"doDrillDownBySelectionId",value:function(e,t){var a,n=this.store.activeDrillItemIndex(),i=this.store.getDrillSetting().type;i===H.DrillDownType.Default&&(i=H.DrillDownType.List);var r,o,s,l,u=this.store.toJSON(),c=this.definition.getDrillDataRoles(),d=(r=t,o=c,s=this.pivotSettingHelper,l=[],o.forEach(function(e){var t,a=s.getTinyProfile();null!==(t=a[e])&&void 0!==t&&t.values.length&&l.push(a[e].values[0].name)}),0===l.length?null:Bz(r,l).map(function(e){return Uz(e)})[0]),p=this.getDrillSetting(),h=p.items,y=p._rootType,g=p._rootItems,m=zK(u,c,{name:e},d,{type:i,items:h,_rootType:y,_rootItems:g},n+1);this.items.length=this.activeIndex+1;var f=g.find(function(e){return e.name===m.state.drillItemName}),v=this.pivotSettingHelper.getColumn(m.state.drillItemName),b=v.entityName?"[".concat(v.entityName,"].").concat(v.display):v.display;this.items.push({label:null!==(a=null==f?void 0:f.display)&&void 0!==a?a:b,scenario:m}),this.activeIndex=this.items.length-1,this.store.changeSnapShot(m)}},{key:"doDrillDownByDvInfo",value:function(e,t){var a,n=this.store.activeDrillItemIndex(),i=this.store.getDrillSetting().type;i===H.DrillDownType.Default&&(i=H.DrillDownType.List);var r=this.store.toJSON(),o=this.definition.getDrillDataRoles(),s=this.getDrillSetting(),l=s.items,u=s._rootType,c=s._rootItems,d=function(e,t){if(null==e||0===e.length)return null;var a=e.map(function(e){return e.filter(function(e){return t.includes(e.categoryName)})});return 0===a[0].length?null:{columnNames:Gz(a),range:Wz(a),rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:!1}}(t,o),p=zK(r,o,{name:e},d,{type:i,items:l,_rootType:u,_rootItems:c},n+1);this.items.length=this.activeIndex+1;var h=c.find(function(e){return e.name===p.state.drillItemName}),y=this.pivotSettingHelper.getColumn(p.state.drillItemName),g=y.entityName?"[".concat(y.entityName,"].").concat(y.display):y.display;this.items.push({label:null!==(a=null==h?void 0:h.display)&&void 0!==a?a:g,scenario:p}),this.activeIndex=this.items.length-1,this.store.changeSnapShot(p)}},{key:"trySetRootDisplayFromMapInfo",value:function(){if(!this.hasInitForMap){var e=this.store.getProperties().mapInfo,t=r.getCheckedNodeDisplay(e);t&&(this.root.label=t),this.hasInitForMap=!0}}},{key:"doDrillDownByMapInfo",value:function(e,t,a,n){this.trySetRootDisplayFromMapInfo();var i=this.store.activeDrillItemIndex(),r=this.store.getDrillSetting(),o=this.store.toJSON(),s=this.definition.getDrillDataRoles(),l=this.getDrillSetting().items,u=this.store.getPivot().pivotFilters,c=this.store.getProperties().mapInfo,d=this.pivotSettingHelper.getPivotSetting({withoutInvalid:!0,valuesOnly:!0,disableExclusive:!0}),p=y.getMapDataFromScenario(c,d,u);if(a&&"district"!==a.level&&"district"!==p.mapInfo.level&&l.length){var h=zK(o,s,{name:l[0].name,display:n,mapId:c.nodeId,geoInfo:a},t,{type:r.type,items:l},i+1);this.items.length=this.activeIndex+1,this.items.push({label:n,scenario:h}),this.activeIndex=this.items.length-1,this.store.changeSnapShot(h)}}},{key:"setActive",value:function(e){this.activeIndex=e,this.store.changeSnapShot(this.getSnapshot())}},{key:"clean",value:function(){this.items=[this.items[0]],this.activeIndex=0,this.store.changeSnapShot(this.getSnapshot()),this.store.clearCrossFilter()}},{key:"getDrillDownPath",value:function(){var r=this,o=!Jr.isMapChart(this.store.toJSON());return this.items.map(function(e,t){var a={label:e.label,active:t===r.activeIndex};if(o){var n=Us.drillItemName(e.scenario),i=Us.pivotFilters(e.scenario).find(function(e){return e.drillItemName===n});a.detail=r.getDetail(i,t)}return a})}},{key:"getDrillSetting",value:function(){var t=this,a=this.pivotSettingHelper,e=this.store.getDrillSetting(),n=e.items;if(e.type===H.DrillDownType.Default){var i=a.rawEntities.filter(function(e){return a.isValidEntityAsDimension(e.id)});n=i.length?i.flatMap(function(e){return a.getAllDimensions({withoutHierarchy:!0},e.id).map(function(e){return{name:e.name}})}):a.getAllDimensions({withoutHierarchy:!0}).map(function(e){return{name:e.name}})}var r=a.getUsedDimensionItems(!1,{withoutHiddenDataRoles:!0}).map(function(e){return e.name});return n=n.filter(function(e){return!t.pivotSettingHelper.getColumn(e.name).invalid&&!r.includes(e.name)}).filter(function(e){return a.isValidDimension(e.name)}),{type:e.type,items:n,_rootType:e._rootType,_rootItems:e._rootItems}}},{key:"getSnapshot",value:function(){return this.items[this.activeIndex].scenario}},{key:"destroy",value:function(){this.store.setTempStatus("drillState",{items:this.items,root:this.root,activeIndex:this.activeIndex,pivotSettingHelper:this.pivotSettingHelper})}}]),i}(),Tj=function(e){k()(n,e);var a=w()(n);function n(){var t;return I()(this,n),(t=a.call(this)).onLoadingStateChange=function(e){e?t.context.eventHub.fireLoadStart():t.context.eventHub.fireLoadComplete()},t.hostContainer=new hU({tag:"div",className:"layout-full wyn-visual-container"}),t.addChildren(t.hostContainer),t}return D()(n,[{key:"reset",value:function(){}},{key:"cleanSelection",value:function(){}},{key:"resize",value:function(){}},{key:"scheduleRefresh",value:function(){var e=this;this.context.suspendProcessor.isSuspended()?this.context.suspendProcessor.setTask(function(){e.refresh()}):this.refresh(),this.context.eventHub.fireUpdate()}},{key:"show",value:function(){this.hostContainer.setStyle({display:"flex"})}},{key:"hide",value:function(){this.hostContainer.setStyle({display:"none"})}}]),n}(mU),Sj=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},Dj=function(e){k()(a,e);var t=w()(a);function a(){var n;I()(this,a),(n=t.call(this)).pendingLoading=!1,n.initialized=!1,n.promiseFactory=new gx,n.timestamp=Date.now(),n.onMessageHandler=function(e){var t=e.data;if(t._isWyn&&t.__scenarioToken==="".concat(n.id,"-").concat(n.timestamp)){if(t.type===H.VisualCommandType.ReadyLoadFonts){var a=d$.reduxProxy.getStore().getScenario(n.id);return void d$.resourceManager.webFontManager.getUsedFonts(a).then(function(e){n.runVisualCommand(H.VisualCommandType.LoadFonts,e),d$.resourceManager.webFontManager.loadFonts(e.map(function(e){return e.id}))})}if(t.type===H.VisualCommandType.Initialized)return n.initialized=!0,n.defer.resolve(),void(n.defer=null);if(!n.initialized&&t.type!==H.VisualCommandType.Ready)return;n.onMessage(t)}};var e=new hU({tag:"iframe",className:"layout-full visual-sandbox"});return n.iframeHost=e,n.iframeRef=e.getRef(),n}return D()(a,[{key:"init",value:function(s){return Sj(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.id,a=s.onMessage,n=s.trusted,i=s.sandboxURL,this.id=t,this.onMessage=a,window.addEventListener("message",this.onMessageHandler),this.iframeRef.name="".concat(this.id,"-").concat(this.timestamp),this.iframeRef.src=i,this.iframeRef.onload=function(){o.pendingLoading=!1,o.onMessage({type:H.VisualCommandType.VisualEvent,payload:{type:H.VisualEventType.LoadComplete}})},n||this.iframeRef.setAttribute("sandbox","allow-scripts"),this.addChildren(this.iframeHost),this.onMessage({type:H.VisualCommandType.VisualEvent,payload:{type:H.VisualEventType.LoadStart}}),this.pendingLoading=!0,r=this.promiseFactory.defer(),this.defer=r,e.abrupt("return",r.promise);case 14:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){window.removeEventListener("message",this.onMessageHandler),this.pendingLoading&&(this.onMessage({type:H.VisualCommandType.VisualEvent,payload:{type:H.VisualEventType.LoadComplete}}),this.pendingLoading=!1)}},{key:"runVisualCommand",value:function(e,t){var a;e!==H.VisualCommandType.LoadFonts&&!this.initialized&&e!==H.VisualCommandType.Init||null===(a=this.iframeRef.contentWindow)||void 0===a||a.postMessage({type:e,payload:t,_isWyn:!0},"*")}}]),a}(mU),kj=function(e){k()(a,e);var t=w()(a);function a(){var r;I()(this,a),(r=t.call(this)).onMessageHandler=function(e){if(e.type===H.VisualCommandType.ShowTooltip){var t=r.hostContainer.getBoundingClientRect();e.payload.position.x-=t.left,e.payload.position.y-=t.top}else if(e.type===H.VisualCommandType.MoveTooltip){var a=r.hostContainer.getBoundingClientRect();e.payload.x-=a.left,e.payload.y-=a.top}else if(e.type===H.VisualCommandType.ShowContextMenu){var n=r.hostContainer.getBoundingClientRect();e.payload.position.x-=n.left,e.payload.position.y-=n.top}else if(e.type===H.VisualCommandType.ExecuteCommand){var i=e.payload;(Array.isArray(i)?i:[i]).forEach(function(e){if(e.name===H.Command.Drill){var t=r.hostContainer.getBoundingClientRect();e.payload.position.x-=t.left,e.payload.position.y-=t.top}})}r.onMessage(e)};var e=new hU({tag:"div",className:"layout-full visual-sandbox"});return r.host=e,r.addChildren(e),r}return D()(a,[{key:"reconnect",value:function(){var e;null!==(e=this.ins)&&void 0!==e&&e.destroy();var t=new wz(this.id,this.hostContainer);t.setMessageHandler(this.onMessageHandler),(this.ins=t).start()}},{key:"init",value:function(e){this.id=e.id,this.onMessage=e.onMessage;var t=this.host.getRef().attachShadow({mode:"open"});this.hostContainer=document.createElement("div"),this.hostContainer.style.width="100%",this.hostContainer.style.height="100%",t.appendChild(this.hostContainer),this.reconnect()}},{key:"willUnmount",value:function(){this.ins.destroy()}},{key:"runVisualCommand",value:function(e,t){this.ins.runCommand(e,t)}}]),a}(mU),wj=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},xj=function(e){k()(a,e);var t=w()(a);function a(){var T;I()(this,a),(T=t.call(this)).properties={},T.dataViews=[],T.sliceFilters=[],T.scale=1,T.dirtyState={properties:!1,dataViews:!1,sliceFilters:!1,scale:!1},T.onMessageHandler=function(e){var t,a=RB()(T),n=a.onPropertyChange,i=a.onVisualEvent,r=a.onShowTooltip,o=a.onHideTooltip,s=a.onMoveTooltip,l=a.onSelectionChange,u=a.onClick,c=a.language,d=a.onExecuteCommand,p=a.definition,h=a.onColorAssignmentConfigMappingChange,y=a.onSliceFiltersChange,g=a.edition,m=a.onShowContextMenu,f=a.onHideContextMenu,v=T.context.getEnv();switch(e.type){case H.VisualCommandType.Ready:return void T.visualRef.runVisualCommand(H.VisualCommandType.Init,{definition:p,language:c,edition:g,updateOptions:T.makeUpdateOptions(H.VisualUpdateType.FullyChange)});case H.VisualCommandType.SetProperty:return void n(e.payload.payloads);case H.VisualCommandType.VisualEvent:return void i(e.payload.type);case H.VisualCommandType.ShowTooltip:return void((v.viewer||v.focus)&&r(e.payload));case H.VisualCommandType.MoveTooltip:return void((v.viewer||v.focus)&&s(e.payload));case H.VisualCommandType.HideTooltip:return void((v.viewer||v.focus)&&o());case H.VisualCommandType.SelectionChange:return void(v.viewer&&l(e.payload));case H.VisualCommandType.Click:return void u();case H.VisualCommandType.ExecuteCommand:return void(d&&d(e.payload));case H.VisualCommandType.PreUpdateFeedback:var b=e.payload.colorAsignmentConfigMapping||{};return Object.keys(b).forEach(function(e){var t=b[e];t.type===H.ColorRelationType.MeasureName&&(t.values=t.columns.map(function(e){return e.id}))}),void h(b);case H.VisualCommandType.SetFilter:var C=null===(t=e.payload.filters)||void 0===t?void 0:t.map(function(e){return Ul(e,T.datasetId,Ll)});return void(y&&y(C));case H.VisualCommandType.ShowContextMenu:return void m(e.payload);case H.VisualCommandType.HideContextMenu:return void f()}};var e=new hU({tag:"div",className:"layout-full-flex"});return T.addChildren(e),T.container=e,T}return D()(a,[{key:"makeUpdateOptions",value:function(e){var t=this.dataViews,a=this.properties,n=this.docTheme,i=this.language,r=this.scale,o=this.sliceFilters,s=this.datasetId,l=this.container.getRef().getBoundingClientRect(),u=this.context.getEnv(),c=null==o?void 0:o.map(function(e){return Ul(e,s,Ml)});return{isMobile:u.mobile,isViewer:u.viewer,isEditing:u.editing,isFocus:u.focus,dataViews:t||[],properties:a,updateType:e,docTheme:n,language:i,scale:r,filters:c,viewport:{width:l.width,height:l.height,scale:r}}}},{key:"init",value:function(n){return wj(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.definition=n.definition,this.language=n.language,this.properties=n.properties,this.sliceFilters=n.sliceFilters,this.docTheme=n.docTheme,this.scale=n.scale,this.edition=n.edition,this.onPropertyChange=n.onPropertyChange,this.onVisualEvent=n.onVisualEvent,this.onShowTooltip=n.onShowTooltip,this.onMoveTooltip=n.onMoveTooltip,this.onHideTooltip=n.onHideTooltip,this.onSelectionChange=n.onSelectionChange,this.onClick=n.onClick,this.onExecuteCommand=n.onExecuteCommand,this.onColorAssignmentConfigMappingChange=n.onColorAssignmentConfigMappingChange,this.onSliceFiltersChange=n.onSliceFiltersChange,this.onShowContextMenu=n.onShowContextMenu,this.onHideContextMenu=n.onHideContextMenu,t=n.id,a=n.bootConfig,this.isSandbox=a.sandbox,this.isSandbox)return this.visualRef=new Dj,this.container.addChildren(this.visualRef),e.next=26,this.visualRef.init({id:t,onMessage:this.onMessageHandler,sandboxURL:a.sandboxURL,trusted:a.trusted});e.next=28;break;case 26:e.next=31;break;case 28:this.visualRef=new kj,this.container.addChildren(this.visualRef),this.visualRef.init({id:t,onMessage:this.onMessageHandler});case 31:case"end":return e.stop()}},e,this)}))}},{key:"repaint",value:function(){if(!this.isSandbox){var e=this.makeUpdateOptions(H.VisualUpdateType.PropertyChange);this.visualRef.runVisualCommand(H.VisualCommandType.Update,e)}}},{key:"render",value:function(){var t=this,a=0;if(Object.keys(this.dirtyState).forEach(function(e){t.dirtyState[e]&&a++}),0!==a){var e;1<a?e=H.VisualUpdateType.FilterChange:this.dirtyState.dataViews?e=H.VisualUpdateType.DataViewChange:this.dirtyState.properties?e=H.VisualUpdateType.PropertyChange:this.dirtyState.scale?e=H.VisualUpdateType.ScaleChange:this.dirtyState.sliceFilters&&(e=H.VisualUpdateType.FilterChange);var n=this.makeUpdateOptions(e);this.visualRef.runVisualCommand(H.VisualCommandType.Update,n),this.dirtyState={properties:!1,dataViews:!1,sliceFilters:!1,scale:!1}}}},{key:"setProperties",value:function(e){this.properties=e,this.dirtyState.properties=!0}},{key:"setDataViews",value:function(e){this.dataViews=e,this.dirtyState.dataViews=!0}},{key:"setSliceFilters",value:function(e){this.sliceFilters=e,this.dirtyState.sliceFilters=!0}},{key:"setScale",value:function(e){this.scale=e,this.dirtyState.scale=!0}},{key:"resize",value:function(){var e=this.makeUpdateOptions(H.VisualUpdateType.ViewportChange);this.visualRef.runVisualCommand(H.VisualCommandType.Update,e)}},{key:"updateColorAssignment",value:function(e){this.properties=e,this.dirtyState.dataViews=!0}},{key:"preUpdate",value:function(e){this.dataViews=e;var t=this.makeUpdateOptions(H.VisualUpdateType.DataViewChange);this.visualRef.runVisualCommand(H.VisualCommandType.PreUpdate,t.dataViews)}},{key:"cleanSelection",value:function(){this.visualRef.runVisualCommand(H.VisualCommandType.CleanSelection)}},{key:"dispatchActionEvent",value:function(e){this.visualRef.runVisualCommand(H.VisualCommandType.DispatchActionEvent,e)}},{key:"setDatasetId",value:function(e){this.datasetId=e}}]),a}(mU);(mj=gj=gj||{}).Expand="expand",mj.Collapse="collapse",(vj=fj=fj||{}).Expand="mdi mdi-chevron-down",vj.Collapse="mdi mdi-chevron-right";var Aj=function(e){k()(n,e);var a=w()(n);function n(t){var i;return I()(this,n),(i=a.call(this)).onClick=function(e){if(e.target.hasAttribute("data-status")){var a=e.target.getAttribute("data-status"),n=e.target.getAttribute("data-entity-index");i.entityItems=i.entityItems.map(function(e,t){return Number(n)===t&&(e.status=a===gj.Collapse?gj.Expand:gj.Collapse,e.statusIcon=a===gj.Collapse?fj.Expand:fj.Collapse),e}),i.render(i.entityItems)}else if(e.target.hasAttribute("data-attribute")){var t=e.target.getAttribute("data-attribute");i.config.onAttributeClick(t)}},i.config=t,i.entityItems=t.entities.map(function(e){return Object.assign(Object.assign({},e),{status:t.defaultExpand?gj.Expand:gj.Collapse,statusIcon:t.defaultExpand?fj.Expand:fj.Collapse})}),i.container=new hU({tag:"div",className:"dataset-schema-container"}),i.render(i.entityItems),i.container.addEventListener("click",i.onClick),i.addChildren(i.container),i}return D()(n,[{key:"render",value:function(e){this.container.setInnerHTML(n.Template({entityItems:e}))}}]),n}(mU);Aj.Template=AU.a.compile('\n    {{#each entityItems}}\n      <div class="wyn-entity-container wyn-{{this.status}}">\n        <i data-status="{{this.status}}" data-entity-index={{@index}} class="{{this.statusIcon}}"></i>\n        <div class="wyn-entity">{{this.name}}</div>\n        <div class="wyn-attributes">\n          {{#each this.attributes}}\n            <div class="wyn-attribute" data-attribute="{{this.name}}">{{this.display}}</div>\n          {{/each}}\n        </div>\n      </div>\n    {{/each}}\n  ');function Ij(a){var e="";return a.openMode===H.JumpToOpenMode.Dialog&&(e=["width","height"].reduce(function(e,t){return void 0!==a[t]&&e.push("".concat(t,"=").concat(a[t])),e},[]).join("&")),e}function Pj(){var l=this;I()(this,Pj),this.jumpToByDialogOrEmbedded=function(i,e,t){var r=i.width,o=i.height;d$.globalConfigManager.setState("pauseAutoSwitch",!0);function s(){d$.globalConfigManager.setState("pauseAutoSwitch",!1)}"dashboard"===i.type?MO(i.dashboardParameters||[],e,t).then(function(n){function e(e){var t=window.WynBi.createViewerLite(Object.assign(Object.assign({dp:n,dashboardId:i.dashboardDocId},d$.globalConfigManager.getInitConfig()),i.options)),a=document.createElement("div");return a.className="dashboard-container",e.getRef().appendChild(a),t.initialize({container:e.getRef()}).then(function(e){e.connect(a),e.refresh()},function(e){nu.log(e)}),t}i.openMode===H.JumpToOpenMode.Embedded?l.embeddedContainer=new az({contentRender:e,text:"".concat(Ft("dialogs.jumpToDocuments.backFrom")," ").concat(i.name)}):i.openMode===H.JumpToOpenMode.Dialog&&(l.modal=new tz({width:r,height:o,contentRender:e,onClosed:s}))}):zj(i,e,t).then(function(e){function t(e){var t=new hU({tag:"iframe",className:"dd-jump-to-iframe",style:{height:"100%",width:"100%","background-color":"white"}});return t.setAttribute("src",a),t.setAttribute("frameBorder","0"),t.setAttribute("scrolling","auto"),t.setAttribute("allowFullScreen",!0),t.setAttribute("referrerPolicy","no-referrer"),t.setAttribute("title",i.name),e.addChildren(t),t}var a=e.url;i.openMode===H.JumpToOpenMode.Embedded?l.embeddedContainer=new az({contentRender:t,text:"".concat(Ft("dialogs.jumpToDocuments.backFrom")," ").concat(i.name)}):i.openMode===H.JumpToOpenMode.Dialog&&(l.modal=new tz({width:r,height:o,contentRender:t,onClosed:s}))})},this.jumpTo=function(s,e,t,a){if(s.type===H.JumpToType.InnerURL)t.invokeSwitchPage(s.targetPageId);else switch(s.openMode){case H.JumpToOpenMode.NewWindow:!function(e){var t=e.scenarioId,a=e.jumpToDocument,n=e.infoData,i=e.pageContext;if(a.type===H.JumpToType.InnerURL)i.invokeSwitchPage(a.targetPageId);else{var r=F()({},a,{openMode:H.JumpToOpenMode.NewWindow});zj(r,t,n).then(function(e){var t=e.url;dl(t)})}}({scenarioId:e,jumpToDocument:s,pageContext:t,infoData:a});break;case H.JumpToOpenMode.Dialog:case H.JumpToOpenMode.Embedded:l.jumpToByDialogOrEmbedded(s,e,a);break;case H.JumpToOpenMode.Redirect:zj(s,e).then(function(e){var t=e.url,a=s.redirectArea,n=t;if(!Ou(t)){var i=window.location,r=i.protocol,o=i.host;n="".concat(r,"//").concat(o,"/").concat(t)}switch(a){case H.RedirectArea.HostPage:try{window.top.location=n}catch(e){nu.error(e),window.location=n}break;case H.RedirectArea.Dashboard:default:window.location=n}})}},this.destroy=function(){l.modal&&l.modal.destroy(),l.embeddedContainer&&l.embeddedContainer.destroy()}}function _j(s,l,u){return function(e){var t=N()(e,2),a=t[0],n=t[1];if(null!=u.find(function(e){return e.display===a}))return null;var i,r=s.find(function(e){return e.display===a}),o=n instanceof Date?_l(_e()(n)):n;(r=r||s.find(function(e){return e.name===a}))||(r=(r=l.getColumns().find(function(e){return e.display===a}))||l.getColumn(a));return r&&r.invalid?null:{field:r.name,value:Nu(o,r),originalValue:o,display:r.display,isValue:!((i=r).isValue&&i.method===H.AggregationMethod.None&&!Jr.isCustomMeasureValue(i))&&i.isValue,categoryName:r.categoryName}}}function Mj(e,t,a,n){function i(t){return o.findIndex(function(e){return e[0]===t})}var r=a.getHiddenDataRolesItems(),o=ae.toPairs(e);if([H.ChartType.Gauge,H.ChartType.Indicator,H.ChartType.KPI].includes(n)){var s=i(N_),l=i(E_);if(-1!==s){var u=a.getFlattenedPivotSettingItems(["value"]);if(u.length){var c=i(u[0].display);-1!==c&&(o[c][1]=o[s][1])}}if(-1!==l){var d=a.getFlattenedPivotSettingItems(["comparisonValue"]);if(d.length){var p=i(d[0].display);-1!==p&&(o[p][1]=o[l][1])}}}return(o=o.map(_j(t,a,r))).filter(function(e){return null!=e})}function Lj(e,t,a,n,i,r){function o(e){return!e.isValue||n&&a.includes(e.display)}var s;switch(i){case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.FloorPlan:case H.ChartType.Gauge:case H.ChartType.KPI:case H.ChartType.Indicator:s=e;break;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:var l=r.getFlattenedPivotSettingItems(["upper","lower"]);s=e.filter(function(e){return l.some(function(e){return null==t?void 0:t.includes(e.display)})||o(e)});break;default:s=e.filter(function(e){return e.display===t||o(e)})}return s}function Rj(e,t,a,n,i,r,o){var s=2<arguments.length&&void 0!==a&&a,l=3<arguments.length?n:void 0,u=4<arguments.length?i:void 0,c=5<arguments.length?r:void 0,d=6<arguments.length?o:void 0,p=t.valueDefinition||u,h=t.__tooltip__||[];if(!p){var y=d.getUsedValueItems(!1,{withoutHiddenDataRoles:!0});p=ae.compose(ae.propOr("","display"),ae.head)(y)}var g=ae.omit(["__tooltip__","__series__","depth","categorySortField","seriesSortField","trellisRowSortField","trellisColumnSortField","valueDefinition"],t),m=Mj(g,e,d,c);return m.sort(function(e,t){return!h.includes(e.display)&&h.includes(t.display)?-1:1}),m=Lj(m,p,h,l,c,d),s&&(m=m.filter(function(e){return!e.isValue})),m}function Vj(e,t,a){var n=t.filter(function(e){return"details"===e.categoryName}),i=n.slice(0,e),r=t.findIndex(function(e){return"details"===e.categoryName}),o=oh()(t,{$splice:[[r,n.length].concat(R()(i))]});return a&&(o=o.filter(function(e){return!e.isValue})),o}function Nj(s,l){return function(n,i,r,o){return n.selectedItems.map(function(e){var t=e[0],a=Rj(i,t,s,l,n.valueDefinition,o,r);return Number.isInteger(t.depth)&&(a=Vj(n.depth,a,s)),a})}}function Ej(n,e,t,a,i){var r,o,s=n.curItems[0];if(s&&Object.values(s).includes(Xz)){var l=ae.reduce(function(e,t){return ae.add(e,t[t.valueDefinition]||0)},0)(n.curItems);s[s.valueDefinition]=l,s.__leftValue__=l}a===H.ChartType.Composite&&n.multiValue&&(n.curItems.forEach(function(e){Number.isFinite(e[n.valueDefinition])&&(r=e)}),s=r||s),a!==H.ChartType.Sunburst&&a!==H.ChartType.TreeMap||(s[n.valueDefinition]=n.value,1<n.curItems.length&&null!==(o=s.__tooltip__)&&void 0!==o&&o.length&&s.__tooltip__.forEach(function(t){var a=[];n.curItems.forEach(function(e){null!=e[t]&&a.push(e[t])}),a.length&&(s[t]=a.reduce(function(e,t){return e+t},0))}));var u=Rj(e,s,!1,!0,n.valueDefinition,a,t);if(Number.isInteger(n.depth)&&(u=Vj(n.depth,u)),"__seriesTotalValue__"===n.valueDefinition){var c=n.curItems.find(function(e){return!!e.__seriesTotalValue__});if(c){var d=t.getPivotSettingProfile(),p=d.series.values;null!=p&&p.length&&(u=u.filter(function(t){return!p.some(function(e){return e.name===t.field})}));var h=d.values.options.valueFormat,y={display:c.__totalSeries__,value:ku(h,c.__seriesTotalValue__)};u.push(y)}}if(i){if(n.multiValue)return{};if(s.__series__){var g=s.__series__.split(",");u=g.map(function(t){return u.find(function(e){return e.value===t})})}}var m,f,v,b=(f=a,(v=(v=(m=u).find(function(e){return"category"===e.categoryName}))||(f===H.ChartType.TreeMap||f===H.ChartType.Sunburst?m.find(function(e){return"details"===e.categoryName}):f===H.ChartType.FloorPlan?m.find(function(e){return"area"===e.categoryName}):m.find(function(e){return"series"===e.categoryName})))||(v=m.find(function(e){return"trellisColumns"===e.categoryName}))||(v=m.find(function(e){return"trellisRows"===e.categoryName}))?v.value:"");return{fields:u,title:b}}var Fj=function(e){k()(s,e);var o=w()(s);function s(e){var t;I()(this,s),t=o.call(this);function n(t){return e.drillDownItems.find(function(e){return e.name===t.name})}var a=e.datasetSchemaHelper.getAllEntities(),i=a.reduce(function(e,t){var a=t.attributes.filter(n);return 0<a.length&&e.push(Object.assign(Object.assign({},t),{attributes:a})),e},[]).sort(function(e,t){return e.name.localeCompare(t.name)}),r=new Aj({entities:i,onAttributeClick:e.onAttributeClick,defaultExpand:e.defaultExpand});return t.addChildren(r),t}return s}(mU),Oj=function(){var n=uy()(regeneratorRuntime.mark(function e(t,a,n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lh(t.href,a,n,!0);case 2:return i=e.sent,e.abrupt("return",{url:i});case 4:case"end":return e.stop()}},e)}));return function(e,t,a){return n.apply(this,arguments)}}(),Hj={size:H.PageDisplayMode.Default,toolbar:H.Toolbar.Default,display:H.ReportDisplayMode.Default},Bj=function(){var a=uy()(regeneratorRuntime.mark(function e(t,a){var n,i,r,o,s,l,u,c,d,p=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2<p.length&&void 0!==p[2]?p[2]:[],i=ae.propOr([],"dashboardParameters",t),e.next=4,MO(i,a,n);case 4:return r=e.sent,o="".concat(H.PathName.Dashboard,"/").concat(t.dashboardDocId,"?dp=").concat(r),s=d$.globalConfigManager.get("commonQuery"),l=t.options||{},u=["pageNumber","size","toolbar"].reduce(function(e,t){var a=l[t];return"size"===t&&(a=fs[a]),a!==Hj[t]&&e.push("".concat(t,"=").concat(a)),e},[]).join("&"),t.openMode===H.JumpToOpenMode.Dialog&&(c=Ij(t))&&(u+="".concat(u?"&":"").concat(c)),o=[o,s,u].filter(function(e){return!!e}).join("&"),d=u.split("&").reduce(function(e,t){var a=t.split("="),n=N()(a,2),i=n[0],r=n[1];return void 0!==r&&(e[i]=r),e},{}),e.abrupt("return",{url:o,config:F()({dashboardId:t.dashboardDocId,dp:r},d$.globalConfigManager.getInitConfig(),{},d)});case 13:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}(),Uj=function(){var a=uy()(regeneratorRuntime.mark(function e(t,a){var n,i,r,o,s,l,u,c,d,p,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2<h.length&&void 0!==h[2]?h[2]:[],i={},r=ae.propOr([],"reportParameters",t),e.next=5,MO(r,a,n);case 5:return o=e.sent,i.documentId=t.reportDocId,i.dp=o,s="".concat(H.PathName.Report,"/").concat(t.reportDocId,"?dp=").concat(o),l=d$.globalConfigManager.get("commonQuery"),u=t.options||{},c=["display","size","toolbar"].reduce(function(e,t){var a=u[t];return"size"===t&&(a=fs[a]),a!==Hj[t]&&e.push("".concat(t,"=").concat(a)),e},[]).join("&"),t.openMode===H.JumpToOpenMode.Dialog&&(d=Ij(t))&&(c+="".concat(c?"&":"").concat(d)),l?s="".concat(s,"&").concat(l,"&").concat(c):c&&(s="".concat(s,"&").concat(c)),p=c.split("&").reduce(function(e,t){var a=t.split("="),n=N()(a,2),i=n[0],r=n[1];return void 0!==r&&(e[i]=r),e},{}),i=F()({},i,{},d$.globalConfigManager.getInitConfig(),{},p),e.abrupt("return",{url:s,config:i});case 17:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}(),zj=function(){var a=uy()(regeneratorRuntime.mark(function e(t,a){var n,i,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=2<r.length&&void 0!==r[2]?r[2]:[],e.t0=t.type,e.next=e.t0===H.JumpToType.OuterURL?4:e.t0===H.JumpToType.Dashboard?8:e.t0===H.JumpToType.Report?13:18;break;case 4:return e.next=6,Oj(t,a,n);case 6:return i=e.sent,e.abrupt("break",19);case 8:return e.next=10,Bj(t,a,n);case 10:return(i=e.sent).url=d$.accessService.attachBaseUrlAndToken(i.url),e.abrupt("break",19);case 13:return e.next=15,Uj(t,a,n);case 15:return(i=e.sent).url=d$.accessService.attachBaseUrlAndToken(i.url),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:return i.type=t.type,e.abrupt("return",i);case 21:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}(),Kj=a(69),jj=function(){function e(){var l=this;I()(this,e),this.getContactsAsync=function(e){return d$.httpResourceManager.get("DataMonitorContacts").fetch(e)},this.getChannelsAsync=function(){return d$.httpResourceManager.get("DataMonitorChannels").fetch()},this.getEmailSettingAsync=function(){return d$.httpResourceManager.get("DataMonitorEmailSetting").fetch()},this.getTimeZonesAsync=function(){return d$.httpResourceManager.get("DataMonitorTimeZones").fetch()},this.showAddDataMonitorDialog=function(a,n,i,r,o,s){d$.globalConfigManager.setState("pauseAutoSwitch",!0),l.dialog=new nz({contentRender:function(e){var t={documentId:i,aggregateModels:JSON.stringify([r]),filters:JSON.stringify(s),values:JSON.stringify(o)};return l.editor=new Kj.GCESDataMonitorEditor({dom:e.getRef(),tooltipContainer:d$.uiDelegatorManager.dropDownRoot,popupContainer:d$.uiDelegatorManager.actualRoot,lng:d$.globalConfigManager.get("lng"),localeResource:Ft("dataMonitor",{ns:H.LocaleNamespace.DashboardThird,returnObjects:!0}),dashboardId:a,name:n,query:t,onValidationStateChange:function(e){return l.onValidationStateChange(e)},onChange:l.onMonitorDataChange,getContactsAsync:l.getContactsAsync,getChannelsAsync:l.getChannelsAsync,getEmailSettingAsync:l.getEmailSettingAsync,getTimeZonesAsync:l.getTimeZonesAsync}),{destroy:function(){l.editor.destroy()}}},title:Ft("dialogs.dataMonitor.title"),onOK:function(){return l.onOKClick()},customClass:"add-data-monitor-dialog",onClosed:function(){return d$.globalConfigManager.setState("pauseAutoSwitch",!1)}}),l.dialog.setOKDisableState(!0)},this.onOKClick=function(){l.editor.showLoading();var e=d$.httpResourceManager.get("DataMonitoring"),t=l.monitorState;e.post(t).then(function(e){var t;e.success?(d$.uiDelegatorManager.notificationDelegator.showInfo({title:Ft("notifications.dataMonitorSaved")}),null!==(t=l.dialog)&&void 0!==t&&t.destroy()):d$.uiDelegatorManager.notificationDelegator.showError({title:Ft("error.saveDataMonitorFailed")})},function(e){d$.uiDelegatorManager.notificationDelegator.showError(Pd(e))}).finally(function(){var e;null!==(e=l.editor)&&void 0!==e&&e.hideLoading()})},this.onMonitorDataChange=function(e){l.monitorState=e},this.onValidationStateChange=function(e){var t;null!==(t=l.dialog)&&void 0!==t&&t.setOKDisableState(!e)},this.monitorState=null,this.dialog=null}return D()(e,[{key:"destroy",value:function(){this.dialog&&this.dialog.destroy()}}]),e}(),Wj=function(e,t,a,n,i){if(e){var r={curItems:e.model.items,valueDefinition:e.model.valueDefinition,depth:e.model.depth,selectedItems:e.selected,value:e.model.value,multiValue:e.multiValue},o={hitPoint:{x:e.event.x,y:e.event.y},selectedFields:[]};if(0<r.curItems.length){var s=Ej(r,t,a,n,i),l=s.fields,u=s.title;o.fields=l,o.title=u}return 0<r.selectedItems.length&&(o.selectedFields=Nj(!0,!1)(r,t,a,n),o.selectedFieldsWithMeasure=Nj(!1,!0)(r,t,a,n)),o}},Gj=function(e,n,i,r){var t=function(e,t){switch(t){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.RadialStackedBar:case H.ChartType.StackBarInPolar:case H.ChartType.BarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:case H.ChartType.Composite:if(null!=e&&e.category){var a=e.category.values[e.category.values.length-1];return a?a.format:"General"}return e.category.values;default:return"General"}}(i,r),o=function(e,t){switch(t){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.RadialStackedBar:case H.ChartType.StackBarInPolar:case H.ChartType.BarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:case H.ChartType.Composite:if(null!=e&&e.series&&1===e.series.values.length){var a=e.series.values[0];return a?a.format:"General"}return"General";default:return"General"}}(i,r);return{points:e.points.map(function(e){var t=e.detail;if(!t&&"__seriesTotalValue__"===e.valueDefinition){var a=ae.head(e.items);t=a&&a.__totalSeries__}return{color:e.color,columnName:ku(o,t),columnValue:function(e,t,a){switch(a){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.RadialStackedBar:case H.ChartType.StackBarInPolar:case H.ChartType.BarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:var n,i;if(1===(null===(n=t.values)||void 0===n?void 0:n.values.length)){var r,o=null===(r=t.values)||void 0===r?void 0:r.values[0].format;return ku(o,e.value)}if(1<(null===(i=t.values)||void 0===i?void 0:i.values.length)){var s=e.detail,l=t.values.values.find(function(e){return e.display===s});return l?ku(l.format,e.value):e.value}return null;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:var u,c;if(null!==(u=t.lower)&&void 0!==u&&u.values&&null!==(c=t.upper)&&void 0!==c&&c.values){var d=t.lower.values[0],p=t.upper.values[0],h=e.items[0]?e.items[0][d.display]:null,y=e.items[0]?e.items[0][p.display]:null;return"".concat(ku(p.format,h),", ").concat(ku(p.format,y))}return null;case H.ChartType.Composite:var g,m=e.valueDefinition;if("__leftValue__"===m){if(null!==(g=t.leftValues)&&void 0!==g&&g.values.length){var f=e.items.find(function(e){return null!=e.__leftValue__}),v=null==f?void 0:f.__meta__.valueDefinition,b=t.leftValues.values.find(function(e){return e.display===v});return ku((null==b?void 0:b.format)||"General",e.value)}}else if("__rightValue__"===m){var C;if(null!==(C=t.rightValues)&&void 0!==C&&C.values.length){var T=e.items.find(function(e){return null!=e.__rightValue__}),S=null==T?void 0:T.__meta__.valueDefinition,D=t.rightValues.values.find(function(e){return e.display===S});return ku((null==D?void 0:D.format)||"General",e.value)}}break;default:return null}}(e,i,r),isActive:e===n}}),category:ku(t,e.value)}},Yj=function(e){var t;if(e){var a=e.profile,n=e.data;if(t=[],a.value.values.length){var i=a.value.values[0];t.push({categoryName:"value",display:i.display,field:i.name,isValue:!0,originalValue:null==n?void 0:n[0][i.display],value:null==n?void 0:n[0][i.display]})}if(a.comparisonValue.values.length){var r=a.comparisonValue.values[0];t.push({categoryName:"comparisonValue",display:r.display,field:r.name,isValue:!0,originalValue:null==n?void 0:n[0][r.display],value:null==n?void 0:n[0][r.display]})}t=[t]}return t},qj=function(){function c(e){var m=this;I()(this,c),this.setState=function(e){m.state=e,m.scenario=m.state.store.toJSON()},this.getDefaultExpand=function(){var e;return(null===(e=m.state.pivotSettingHelper)||void 0===e?void 0:e.getDatasetType())!==H.DatasetType.AnalysisModel},this.getContextMenuPosition=function(e){var t={x:(null==e?void 0:e.x)||0,y:(null==e?void 0:e.y)||0};if(Jr.isVisual(m.scenario)){var a=m.state.offset;t={x:t.x+a.x,y:t.y+a.y}}return t},this.getInteractiveDimensionName=function(e){return e[d$.definitionManager.getDefinition(m.scenario).getDrillDataRoles().toString()][0].name},this.getLocationMapKeepExcludeFilter=function(e,t){var a=m.state.pivotSettingHelper.getPivotSetting({withoutInvalid:!0,valuesOnly:!0,disableExclusive:!0});return{columnNames:[m.getInteractiveDimensionName(a)],type:H.FilterType.EXACT,rule:H.FilterRule.GENERAL,range:{items:e.map(function(e){return{value:nj(e)}})},exclude:!t,editable:!1}},this.getLocationMapDrillFilter=function(e){var t=m.state.pivotSettingHelper.getPivotSetting({withoutInvalid:!0,valuesOnly:!0,disableExclusive:!0});return{columnNames:[m.getInteractiveDimensionName(t)],type:H.FilterType.EXACT,rule:H.FilterRule.GENERAL,range:{items:[{value:nj(e)}]},exclude:!1}},this.canKeepExclude=function(e){if(null==e)return!1;var t=m.scenario.scenarioType,a=Object(Ho.flatten)(e);switch(t){case H.ScenarioType.PivotChart:switch(m.scenario.chartType){case H.ChartType.PivotTable:return!!a.filter(function(e){return!e.isImage}).length;case H.ChartType.KpiMatrix:return!!a.length;case H.ChartType.Map:return e.length&&!m.state.isSelectMixedModels;default:return!!a.filter(function(e){return!e.isValue}).length}case H.ScenarioType.Visual:var n=d$.definitionManager.getDefinition(m.scenario),i=c.transformSelectionId(e);return n.isSupportFilter()&&i.length&&i.every(c.isValidSelectionId);default:return!1}},this.keepExclude=function(e,t){var a,n,i,r,o,s=m.props.onKeepOrExclude;Jr.isVisual(m.scenario)?i=zz(c.transformSelectionId(e),!t):i=Jr.isMapChart(m.scenario)&&!m.state.inLatLong?m.getLocationMapKeepExcludeFilter(e,t):(o=t,{columnNames:Gz(r=e),range:Wz(r),rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:!o,editable:!1});if(null!==(a=null==i?void 0:i.range)&&void 0!==a&&a.items){var l=Ol(i.range.items,i.columnNames.map(function(e){return{name:e}}),null===(n=m.scenario.pivot)||void 0===n?void 0:n.datasetId,Ll);i.range.items=l}s(i)},this.tryKeep=function(a){return new Promise(function(e,t){m.canKeepExclude(a)?(m.keepExclude(a,!0),e(H.InteractionMouseEventAction.Keep)):t("Cannot keep")})},this.tryExclude=function(a){return new Promise(function(e,t){m.canKeepExclude(a)?(m.keepExclude(a,!1),e(H.InteractionMouseEventAction.Exclude)):t("Cannot exclude")})},this.canDrill=function(){if(Jr.isMapChart(m.scenario)){var e=m.state,t=e.geo,a=e.selectedArea,n=e.inLatLong,i=e.pivotSettingHelper,r=e.pivotFilters,o=e.drillSetting,s=hj(m.props.mapInfo,i.getPivotSetting({withoutInvalid:!0,valuesOnly:!0,disableExclusive:!0}),r);return!n&&!!o.items.length&&t&&"district"!==t.level&&1===a.length&&"district"!==s.mapInfo.level}return!0},this.drillToItem=function(e,t){if(Jr.isMapChart(m.scenario)){var a=nj(e),n=m.getLocationMapDrillFilter(e);m.props.onMapDrillTo(null,n,e,a)}else if(Jr.isVisual(m.scenario)){var i=c.transformSelectionId(t);m.props.onDrillTo(e,i)}else m.props.onDrillTo(e,t)},this.getDrillItems=function(a,n){var e;if(!m.canDrill())return[];if(Jr.isMapChart(m.scenario))return[m.state.geo].filter(function(e){return e}).map(function(e){return{label:e.name,value:function(){m.drillToItem(e),n()}}});var t=m.state,i=t.pivotSettingHelper;return null===(e=t.drillSetting.items)||void 0===e?void 0:e.map(function(e){var t=i.getColumn(e.name);return{label:e.display?e.display:t.display,value:function(){m.drillToItem(e.name,a),n()}}})},this.tryDrill=function(u,c,d){return new Promise(function(t,e){var a=m.state,n=a.drillSetting,i=a.pivotSettingHelper,r=m.getDrillItems(u,t),o=n._rootType,s=n.items;if(0<r.length){if(Jr.isMapChart(m.scenario)||o===H.DrillDownType.Path)r[0].value(),t(H.InteractionMouseEventAction.DrillTo);else if(o===H.DrillDownType.List?d?-1<s.findIndex(function(e){return e.name===d})?(m.drillToItem(d,u),t(H.InteractionMouseEventAction.DrillTo)):e(rU.invalidDimension(d)):m.contextMenu.setItems(r):d?-1<s.findIndex(function(e){return e.name===d})?(m.drillToItem(d,u),t(H.InteractionMouseEventAction.DrillTo)):e(rU.invalidDimension(d)):m.contextMenu.setContent(new Fj({datasetSchemaHelper:i,drillDownItems:s,onAttributeClick:function(e){m.drillToItem(e,u),m.contextMenu.close(),t(H.InteractionMouseEventAction.DrillTo)},defaultExpand:m.getDefaultExpand()})),!d){var l=m.getContextMenuPosition(c);m.contextMenu.show(l.x,l.y)}}else e(rU.noDrillItem())})},this.getJumpItems=function(t,a){return m.state.store.getDrillThrough().map(function(e){return{value:function(){m.jumpToItem(e,t),a(H.InteractionMouseEventAction.JumpTo)},label:e.name}})},this.jumpToItem=function(e,t){var a=m.state,n=a.store,i=a.pageContext,r=a.pivotSettingHelper,o=a.scenarioModel,s=m.props.onFinishJumpTo,l=t;if(Jr.isVisual(m.scenario))l=Kz(c.transformSelectionId(t),m.state.pivotSettingHelper);else if(!l&&vK(m.scenario.chartType)&&0===r.getUsedDimensionItems().length){var u=null==o?void 0:o.getDataCache();l=Yj(u)}m.jumpToManager.jumpTo(e,n.id,i,l),s&&s()},this.tryJump=function(i,r){return new Promise(function(e,t){var a=m.getJumpItems(i,e);if(0<a.length)if(1===a.length)a[0].value();else{m.contextMenu.setItems(a);var n=m.getContextMenuPosition(r);m.contextMenu.show(n.x,n.y)}else t("No jump target")})},this.canAddMonitor=function(e){var t=m.state,a=t.pivotSettingHelper,n=t.scenarioModel;return!!n&&0<MK(e,n,a).values.length},this.addMonitor=function(e){var t,a,n=m.state,i=n.scenarioModel,r=n.pivotSettingHelper,o=m.scenario,s=d$.globalConfigManager.get("dashboardId");if(i){var l=i.dataView.getAggregationConfig(null===(t=o.pivot)||void 0===t?void 0:t.datasetId),u=MK(e,i,r),c=NK(l.aggregationModel,u,o),d=FK(c),p=u.values,h=p[0].fieldIdentifier.display||p[0].fieldIdentifier.attributeId,y="".concat(m.dashboardName,"_").concat(h);m.dataMonitorManager.showAddDataMonitorDialog(s,y,null===(a=o.pivot)||void 0===a?void 0:a.datasetId,c,p,d)}},this.showContextMenuActions=function(a,y,g){var e=m.props.contextMenuActions;if(e){var n=e;return m.canShowAddMonitorMenu()||(n=e.filter(function(e){return e!==H.InteractionMouseEventAction.AddMonitor})),new Promise(function(u){function c(e){return function(){m.keepExclude(y,e),u(e?H.InteractionMouseEventAction.Keep:H.InteractionMouseEventAction.Exclude)}}function d(){m.addMonitor(g)}var p=m.canKeepExclude(y),h=m.canAddMonitor(g),e=n.map(function(e){switch(e){case H.InteractionMouseEventAction.Keep:return{label:Ft("charts.tooltip.keep"),value:c(!0),icon:"icon-keep",disabled:!p};case H.InteractionMouseEventAction.Exclude:return{label:Ft("charts.tooltip.exclude"),value:c(!1),icon:"icon-exclude",disabled:!p};case H.InteractionMouseEventAction.DrillTo:var t=m.getDrillItems(y,u),a=m.state,n=a.drillSetting,i=n._rootType,r=n.items,o=a.pivotSettingHelper;if(Jr.isMapChart(m.scenario)||i===H.DrillDownType.Path)return{label:Ft("charts.tooltip.drill"),icon:"icon-enable-drill-down",value:function(){return t[0].value()},disabled:0===t.length};var s=i===H.DrillDownType.List?t:new Fj({datasetSchemaHelper:o,drillDownItems:r,onAttributeClick:function(e){m.drillToItem(e,y),m.contextMenu.close(),u(H.InteractionMouseEventAction.DrillTo)},defaultExpand:m.getDefaultExpand()});return{label:Ft("charts.tooltip.drill"),icon:"icon-enable-drill-down",children:s,disabled:0===t.length};case H.InteractionMouseEventAction.JumpTo:var l=m.getJumpItems(g,u);return{label:Ft("charts.tooltip.jump"),icon:"icon-link",children:l,disabled:0===l.length};case H.InteractionMouseEventAction.AddMonitor:return{label:Ft("charts.tooltip.addMonitor"),value:d,icon:"icon-data-monitoring",disabled:!h};default:return}}).filter(function(e){return e});if(e.length){m.contextMenu.setItems(e);var t=m.getContextMenuPosition(a);m.contextMenu.show(t.x,t.y)}})}},this.handleClickAction=function(n,i,r){return new Promise(function(e){var t,a=m.props.clickAction;switch(a){case H.InteractionMouseEventAction.Keep:t=m.tryKeep(i);break;case H.InteractionMouseEventAction.Exclude:t=m.tryExclude(i);break;case H.InteractionMouseEventAction.DrillTo:t=m.tryDrill(i,n);break;case H.InteractionMouseEventAction.JumpTo:t=m.tryJump(r,n);break;default:t=Promise.reject(a)}t.then(e).catch(function(e){nu.warn(e)})})},this.destroy=function(){m.jumpToManager&&m.jumpToManager.destroy(),m.dataMonitorManager&&m.dataMonitorManager.destroy()},this.props=e,this.jumpToManager=new Pj,this.dataMonitorManager=new jj,this.contextMenu=e.contextMenu,this.dashboardName=e.dashboardName}return D()(c,[{key:"getRootDrillDownType",value:function(){return this.state.drillSetting._rootType}},{key:"canShowAddMonitorMenu",value:function(){var e=Ao(),t=d$.dashboardVariableManager.getUserRoles(),a=d$.globalConfigManager.get("hasCreateDataMonitorLicense"),n=null==t?void 0:t.includes("create-data-monitoring"),i=d$.globalConfigManager.get("dashboardId"),r=null==i?void 0:i.startsWith("draft-");return!(!i||r||e||!n||!a)}}]),c}();qj.isValidSelectionId=function(e){return!!e&&Array.isArray(e.measures)&&null!==e.dimensions&&"object"===E()(e.dimensions)},qj.transformSelectionId=function(e){return(Array.isArray(e)?e:[e]).filter(function(e){return!!e})};var Jj=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},Xj=function(e){k()(a,e);var t=w()(a);function a(){var c;return I()(this,a),(c=t.call(this)).selectionIds=[],c.onShowTooltip=function(a){var n=[];a.selectionId&&Object.keys(a.selectionId.dimensions).forEach(function(e){var t=c.pivotSettingHelper.getColumn(e);n.push({label:t.display,value:a.selectionId.dimensions[e]})}),c.tooltip.show({position:c.calcTooltipPosition(a.position),title:a.title,fields:[].concat(R()(a.fields),n),selected:a.selected,menu:a.menu})},c.onMoveTooltip=function(e){c.tooltip.move(c.calcTooltipPosition(e))},c.onHideTooltip=function(){c.tooltip.hide()},c.setInteractionInfo=function(){var e,t=RB()(c),a=t.context,n=a.store,i=a.pageContext,r=t.drillSetting,o=t.pivotSettingHelper,s=c.hostContainer.getRef().getBoundingClientRect(),l={x:s.x,y:s.y},u=null===(e=i.pageModel)||void 0===e?void 0:e.getScenario(n.id);c.interactionManager.setState({store:n,pageContext:i,offset:l,drillSetting:r,pivotSettingHelper:o,scenarioModel:u})},c.onExecuteCommand=function(e){try{var t=e,a=Array.isArray(e);a||(t=[e]);var s=[],l=[];return t.forEach(function(e){e.payload||(e.payload={});var t,a=e.payload,n=a.selectionIds,i=void 0===n?[]:n,r=a.position;switch(c.setInteractionInfo(),e.name){case H.Command.Keep:t=c.interactionManager.tryKeep(i);break;case H.Command.Exclude:t=c.interactionManager.tryExclude(i);break;case H.Command.Drill:case H.Command.DrillDown:var o=e.payload.drillDimension;t=c.interactionManager.tryDrill(i,r,o);break;case H.Command.DrillUp:case H.Command.DrillReset:e.payload.target||(e.payload.target=c.context.store.getName()),s.push(d$.commandService.executeAsync(e));break;case H.Command.Jump:t=c.interactionManager.tryJump(i,r);break;default:l.push(e)}null!=t&&t.then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&c.cleanSelection()}).catch(function(e){nu.warn(e)})}),d$.commandService.execute(l),a?s:s.pop()}catch(e){console.error(e)}},c.onShowContextMenu=function(e){c.setInteractionInfo(),c.interactionManager.showContextMenuActions(e.position,c.selectionIds,c.selectionIds).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&c.cleanSelection()})},c.onHideContextMenu=function(){c.contextMenu.close()},c.onPropertyChange=function(e){e.forEach(function(e){var t=e.propertyName,a=e.value;c.context.store.setProperty(t,a)}),c.visual.setProperties(c.context.store.getProperties()),c.scheduleRefresh()},c.onVisualEvent=function(e,t){switch(e){case H.VisualEventType.RenderStart:c.context.eventHub.fireRender();break;case H.VisualEventType.RenderFinish:case H.VisualEventType.RenderError:c.context.eventHub.fireRendered();break;case H.VisualEventType.LoadStart:c.context.eventHub.fireLoadStart();break;case H.VisualEventType.LoadComplete:c.context.eventHub.fireLoadComplete()}},c.onJumpToHandler=function(e,t){c.setInteractionInfo(),c.interactionManager.jumpToItem(e,t)},c.onKeepExclude=function(e,t){c.setInteractionInfo(),c.interactionManager.keepExclude(e,t),c.cleanSelection()},c.reset=function(){c.tooltip.hide()},c.visual=new xj,c.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return c.cleanSelection()}}),c.hostContainer.addChildren(c.visual,c.contextMenu),c}return D()(a,[{key:"calcTooltipPosition",value:function(e){var t=this.hostContainer.getRef().getBoundingClientRect();return{x:t.x+e.x+3,y:t.y+e.y+3}}},{key:"getBootConfig",value:function(e,t,a,n,i,r){var o=d$.globalConfigManager.get("sandboxURL");o="".concat(o,"?externalJs=").concat(JSON.stringify(a),"&externalCss=").concat(JSON.stringify(n)),o=d$.accessService.attachBaseUrlAndToken(o);var s=r,l=i;return e&&t&&(o="".concat(o,"&isDevMode=1&devPort=").concat(t.port||3e3),l=s=!0),{sandboxURL:o,trusted:l,sandbox:s}}},{key:"listenDrillCommand",value:function(e,t){var r=this,a=t.onClearDrill,n=t.onActiveDrillItemChange,i=t.getDrillDownPath;e.on(H.Command.DrillDown,function(e,t,a){r.setInteractionInfo();var n=r.interactionManager.getRootDrillDownType();if(t||n===H.DrillDownType.Path){var i=r.selectionIds;r.interactionManager.tryDrill(i,e,t).then(function(){r.cleanSelection(),a.resolve()}).catch(a.reject)}else a.reject(rU.invalidDimension(t))}),e.on(H.Command.DrillUp,function(e,t){r.setInteractionInfo(),n(e),t.resolve()}),e.on(H.Command.DrillReset,function(e){var t=i();!t||t.length<=1?e.reject(rU.noDrillItem(H.Command.DrillReset)):(r.setInteractionInfo(),a(),e.resolve())})}},{key:"init",value:function(g){return Jj(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p,h,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.onClick,a=g.onColorAssignmentConfigMappingChange,n=g.onSelectionChange,i=g.onSliceFiltersChange,r=g.onKeepOrExclude,o=g.onDrillChange,s=this.context,l=s.store,u=s.definition,c=s.pageContext,d=l.getOptions(),p=d.contextMenuActions,this.interactionManager=new qj({onKeepOrExclude:r,onDrillTo:o,onFinishJumpTo:this.reset,contextMenu:this.contextMenu,contextMenuActions:p,dashboardName:l.getDashboardName()}),this.onSelectionChange=n,h=this.getBootConfig(!1,null,u.externalJs,u.externalCss,u.trusted,u.runInIframe),this.tooltip=new VU({jumpToItems:this.context.store.getDrillThrough().map(function(e){return{value:e,label:e.name}}),onJumpTo:this.onJumpToHandler,onDrillTo:o,onKeepExclude:this.onKeepExclude,DrillPanelContainer:Fj}),this.hostContainer.addChildren(this.tooltip),y=d$.globalConfigManager.get("edition"),e.next=12,this.visual.init({id:l.id,properties:l.getProperties(),sliceFilters:l.getSliceFilters(),docTheme:l.getDocTheme(),definition:u.toJSON(),language:c.getLanguage(),edition:y,bootConfig:h,scale:c.getScale(),onClick:t,onColorAssignmentConfigMappingChange:a,onSelectionChange:n,onSliceFiltersChange:i,onPropertyChange:this.onPropertyChange,onVisualEvent:this.onVisualEvent,onShowTooltip:this.onShowTooltip,onMoveTooltip:this.onMoveTooltip,onHideTooltip:this.onHideTooltip,onExecuteCommand:this.onExecuteCommand,onShowContextMenu:this.onShowContextMenu,onHideContextMenu:this.onHideContextMenu});case 12:case"end":return e.stop()}},e,this)}))}},{key:"setDrillSetting",value:function(e){this.drillSetting=e,this.context.store.toJSON().drillDown&&this.tooltip.setDrillSetting(e)}},{key:"setSelectionIds",value:function(e){this.selectionIds=e}},{key:"setDataViews",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:[];this.tooltip.setPivotSettingHelper(e),this.pivotSettingHelper=e,this.visual.setDataViews(a),this.visual.setDatasetId(null==e?void 0:e.getDatasetId()),this.scheduleRefresh()}},{key:"setSliceFilters",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this.visual.setSliceFilters(t),this.scheduleRefresh()}},{key:"cleanSelection",value:function(){this.visual.cleanSelection()}},{key:"preUpdate",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:[];this.tooltip.setPivotSettingHelper(e),this.pivotSettingHelper=e,this.visual.preUpdate(a)}},{key:"updateColorAssignment",value:function(e){this.visual.updateColorAssignment(e),this.scheduleRefresh()}},{key:"resize",value:function(){this.visual.resize()}},{key:"refresh",value:function(){this.visual.render()}},{key:"repaint",value:function(){var e;null!==(e=this.visual)&&void 0!==e&&e.repaint()}},{key:"doScenarioClick",value:function(){this.onHideTooltip(),this.cleanSelection(),this.onSelectionChange()}},{key:"willUnmount",value:function(){var e;null!==(e=this.interactionManager)&&void 0!==e&&e.destroy()}}]),a}(Tj),Qj=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},Zj=function(e){k()(o,e);var t=w()(o);function o(){var u;return I()(this,o),(u=t.call(this)).outerClickHandler=function(e){var t,a=u.context.store,n=a.getDashboardConfig().crossFilterMode;jz(e,a.id,n)&&null!==(t=u.container)&&void 0!==t&&t.doScenarioClick()},u.innerClickHandler=function(e){var t;e===u.context.store.id&&null!==(t=u.container)&&void 0!==t&&t.doScenarioClick()},u.visualClickHandler=function(){u.context.pageContext.pageModel.doOuterClick(u.id)},u.onSelectionChange=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(u.pivotSettingHelper){var t=u.context,a=t.store,n=t.pageContext,i=t.eventHub;u.container.setSelectionIds(e);var r=zz(e);if(i.fireSelectionChange(e.map(function(e){return e.dimensions}),u.pivotSettingHelper.getTinyProfile()),a.canScenarioTriggerCrossFilter())if(e.length)a.setCrossFilter(r)&&(u.context.pageContext.pageModel.triggerSelectionChange(u.context.store.id,Kz(e,u.pivotSettingHelper)),n.pageModel.doCrossFilter(u.id));else a.clearCrossFilter()&&(n.pageModel.doCrossFilter(u.id),u.context.pageContext.pageModel.triggerSelectionChange(u.context.store.id))}},u.onSliceFiltersChange=function(e){u.context.store.setSlicerFilter(e),u.container.setSliceFilters(e),u.context.pageContext.pageModel.doSlicerChange(u.id)},u.onColorAssignmentConfigMappingChange=function(r){var e=u.context,t=e.store,o=e.definition,s=t.getPivot(),l=t.getInheritJson();u.scenarioModel.setColorAssignmentConfigMapping(r),Object.keys(r).forEach(function(e){var t=r[e],a=o.getColorAssignmentByName(e);if(a){var n=t.columns.map(function(e){return e.id}),i=Bo.a.get(l.options.property,a.getPalettePath());d$.colorAssignmentManager.checkDataColorRelationshipsShouldUpdated(s.datasetId,t.type,n,t.values)&&d$.colorAssignmentManager.updateDataColorRelationships(s.datasetId,t.type,n,t.values,i)}}),u.updateColorAssignment(r)},u.onDrillToHandler=function(e,t){u.drillState.doDrillDownBySelectionId(e,t),u.breadcrumb.setDrillItems(u.drillState.getDrillDownPath()),u.refresh()},u.onClearDrill=function(){u.drillState.clean(),u.breadcrumb.setDrillItems(u.drillState.getDrillDownPath()),u.container.cleanSelection(),u.refresh()},u.onActiveDrillItemChange=function(e){u.drillState.setActive(e),u.breadcrumb.setDrillItems(u.drillState.getDrillDownPath()),u.container.cleanSelection(),u.refresh()},u.container=new Xj,u.breadcrumb=new MU({onClear:u.onClearDrill,onChange:u.onActiveDrillItemChange}),u.bodyHost.addChildren(u.breadcrumb,u.container),u}return D()(o,[{key:"onActionBarClick",value:function(e){C()(b()(o.prototype),"onActionBarClick",this).call(this,e),H.ActionMenuType.CleanSliceFilter===e&&this.onSliceFiltersChange([]),this.actionBarContainer.update()}},{key:"init",value:function(){var e=this,u=Object.create(null,{init:{get:function(){return C()(b()(o.prototype),"init",e)}}});return Qj(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.init.call(this),t=this.context,a=t.store,n=t.definition,i=t.pageContext,this.id=a.id,r=new Cj(a,n),this.breadcrumb.setDrillItems(r.getDrillDownPath()),this.scenarioTitle.init(a.getTitle(),i.getScale()),this.drillState=r,e.next=9,this.container.init({onClick:this.visualClickHandler,onColorAssignmentConfigMappingChange:this.onColorAssignmentConfigMappingChange,onSelectionChange:this.onSelectionChange,onSliceFiltersChange:n.isSupportSliceFilter()&&this.onSliceFiltersChange,onDrillChange:this.onDrillToHandler,onKeepOrExclude:this.onKeepOrExclude});case 9:o=I_,a.isSpreadSource()&&(o=c.SpreadSourceDecorator(o)),a.isMergedSource()&&(o=c.MergedSourceDecorator(o)),(s=new o(this.id)).on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),s.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),s.on(H.ScenarioEvent.Error,this.onAggError),s.on(H.ScenarioEvent.Repaint,function(){l.container.repaint()}),this.scenarioModel=s,i.pageModel.addScenario(s,!0),i.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),i.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler),this.container.listenDrillCommand(this.scenarioModel,{onClearDrill:this.onClearDrill,onActiveDrillItemChange:this.onActiveDrillItemChange,getDrillDownPath:function(){return l.drillState.getDrillDownPath()}});case 22:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){var e;C()(b()(o.prototype),"willUnmount",this).call(this),null!==(e=this.drillState)&&void 0!==e&&e.destroy();var t=this.context.pageContext;t.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),t.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler)}},{key:"refresh",value:function(){this.container.reset(),this.scenarioModel.refreshData()}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.reset(),this.container.resize()}},{key:"onAggChange",value:function(e,t){C()(b()(o.prototype),"onAggChange",this).call(this),this.pivotSettingHelper=t,this.drillState.setPivotSettingHelper(t),this.container.setDrillSetting(this.drillState.getDrillSetting()),this.scenarioTitle.updateTitle(t);var a=this.context,n=a.store,i=a.definition,r=n.getProperties();this.actionBarContainer.update(t),i.isColorAssignmentEnabled(r)?this.container.preUpdate(t,e):this.container.setDataViews(t,e)}},{key:"updateColorAssignment",value:function(r){var o=this,e=this.context,t=e.store,a=e.definition,s=t.getDocTheme(),l=t.getProperties(),u=t.getPivot(),c=l;a.getColorAssignmentProperties().forEach(function(e){var a=r[e.getAlias()],t=e.getValuePathOnProperty();if(a)if(e.getValueOnPath({options:{property:l}})){var n=a.columns.map(function(e){return e.id}),i=(d$.colorAssignmentManager.getDataColorRelationships(u.datasetId,a.type,n,s)||[]).reduce(function(e,t){return a.type===H.ColorRelationType.DimensionItem?e[t.dataPoint]=Nc(t.color,s):e[o.pivotSettingHelper.getDisplayByFieldId(t.dataPoint)]=t.color,e},{});Bo.a.set(c,t,i)}else Bo.a.set(c,t,!1);else Bo.a.set(c,t,!1)}),this.container.updateColorAssignment(l)}}]),o}(JK),$j={values:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},category:{values:[{name:"Col1",valueType:1}],options:{}},series:{values:[{name:"Col2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},eW={data:{data:[{Col2:"C12",Col1:"C1",Value1:91},{Col2:"C12",Col1:"C2",Value1:82},{Col2:"C12",Col1:"C3",Value1:150},{Col2:"C13",Col1:"C1",Value1:127},{Col2:"C13",Col1:"C2",Value1:134},{Col2:"C13",Col1:"C3",Value1:190},{Col2:"C14",Col1:"C1",Value1:148},{Col2:"C14",Col1:"C2",Value1:79},{Col2:"C14",Col1:"C3",Value1:123},{Col2:"C12",Col1:"C4",Value1:121},{Col2:"C13",Col1:"C4",Value1:175},{Col2:"C14",Col1:"C4",Value1:140}],sort:{Col1:{order:["C1","C2","C3","C4"],priority:0},Col2:{order:["C12","C13","C14"],priority:0}}},pivotSetting:$j,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:$j,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["category","series","trellisColumns","trellisRows"],valueRoles:["values"],groupingOrValueRoles:[]}},tW={values:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},series:{values:[{name:"Col2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},aW={data:{data:[{Col2:"C12",Col1:"C1",Value1:91},{Col2:"C12",Col1:"C2",Value1:82},{Col2:"C12",Col1:"C3",Value1:150},{Col2:"C13",Col1:"C1",Value1:127},{Col2:"C13",Col1:"C2",Value1:134},{Col2:"C13",Col1:"C3",Value1:190},{Col2:"C14",Col1:"C1",Value1:148},{Col2:"C14",Col1:"C2",Value1:79},{Col2:"C14",Col1:"C3",Value1:123},{Col2:"C12",Col1:"C4",Value1:121},{Col2:"C13",Col1:"C4",Value1:175},{Col2:"C14",Col1:"C4",Value1:140}],sort:{Col1:{order:["C1","C2","C3","C4"],priority:0},Col2:{order:["C12","C13","C14"],priority:0}},profile:{values:{values:["Value1"],options:{}},category:{values:["Col1"],options:{}},series:{values:["Col2"],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}}},pivotSetting:tW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:tW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["series","trellisColumns","trellisRows"],valueRoles:["values"],groupingOrValueRoles:[]}},nW={values:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},details:{values:[{name:"Col1",valueType:1},{name:"Col2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},iW={data:{data:[{Col2:"C12",Col1:"C1",Value1:91},{Col2:"C12",Col1:"C2",Value1:82},{Col2:"C12",Col1:"C3",Value1:150},{Col2:"C13",Col1:"C1",Value1:127},{Col2:"C13",Col1:"C2",Value1:134},{Col2:"C13",Col1:"C3",Value1:190},{Col2:"C14",Col1:"C1",Value1:148},{Col2:"C14",Col1:"C2",Value1:79},{Col2:"C14",Col1:"C3",Value1:123},{Col2:"C12",Col1:"C4",Value1:121},{Col2:"C13",Col1:"C4",Value1:175},{Col2:"C14",Col1:"C4",Value1:140}],sort:{Col1:{order:["C1","C2","C3","C4"],priority:0},Col2:{order:["C12","C13","C14"],priority:0}},profile:{values:{values:["Value1"],options:{}},details:{values:["Col1","Col2"],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}}},pivotSetting:nW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:nW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["details"],valueRoles:["values"],groupingOrValueRoles:[]}},rW={xAxis:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},yAxis:{values:[{idx:0,method:"none",name:"Value2",valueType:1}],options:{}},series:{values:[{name:"Col2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},oW={data:{data:[{Col2:"C11",Value1:179,Value2:74},{Col2:"C12",Value1:91,Value2:126},{Col2:"C11",Value1:82,Value2:125},{Col2:"C12",Value1:82,Value2:164},{Col2:"C11",Value1:65,Value2:111},{Col2:"C12",Value1:106,Value2:59},{Col2:"C11",Value1:181,Value2:123},{Col2:"C12",Value1:121,Value2:153},{Col2:"C11",Value1:58,Value2:64},{Col2:"C12",Value1:95,Value2:80}],sort:{Col2:{order:["C11","C12"],priority:0}},profile:{xAxis:{options:{},values:["Value1"]},yAxis:{options:{},values:["Value2"]},series:{options:{},values:["Col2"]},trellisColumns:{options:{},values:[]},trellisRows:{options:{},values:[]}}},pivotSetting:rW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:rW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["xAxis","yAxis","series","trellisColumns","trellisRows"],valueRoles:[],groupingOrValueRoles:[]}},sW={values:{values:[{idx:0,method:"none",name:"Value3",valueType:1}],options:{}},xAxis:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},yAxis:{values:[{idx:0,method:"none",name:"Value2",valueType:1}],options:{}},series:{values:[{name:"Col2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},lW={data:{data:[{Col2:"C11",Value1:565,Value2:497,Value3:565},{Col2:"C12",Value1:495,Value2:582,Value3:495},{Col2:"C13",Value1:629,Value2:716,Value3:629},{Col2:"C14",Value1:701,Value2:625,Value3:701}],sort:{Col2:{order:["C11","C12","C13","C14"],priority:0}}},pivotSetting:sW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:sW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["series","trellisColumns","trellisRows"],valueRoles:["values"],groupingOrValueRoles:["xAxis","yAxis"]}},uW={leftValues:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{valueChartType:"column"}},rightValues:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{valueChartType:"line"}},category:{values:[{name:"Col1",valueType:1}],options:{}},series:{values:[{name:"Col2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},cW={data:{data:{leftValues:{data:[{Col2:"C12",Col1:"C1",Value1:91},{Col2:"C12",Col1:"C2",Value1:82},{Col2:"C12",Col1:"C3",Value1:150},{Col2:"C13",Col1:"C1",Value1:127},{Col2:"C13",Col1:"C2",Value1:134},{Col2:"C13",Col1:"C3",Value1:190},{Col2:"C14",Col1:"C1",Value1:148},{Col2:"C14",Col1:"C2",Value1:79},{Col2:"C14",Col1:"C3",Value1:123},{Col2:"C12",Col1:"C4",Value1:121},{Col2:"C13",Col1:"C4",Value1:175},{Col2:"C14",Col1:"C4",Value1:140}],sort:{Col1:{order:["C1","C2","C3","C4"],priority:0},Col2:{order:["C12","C13","C14"],priority:0}}},rightValues:{data:[{Col2:"C12",Col1:"C1",Value1:91},{Col2:"C12",Col1:"C2",Value1:82},{Col2:"C12",Col1:"C3",Value1:150},{Col2:"C13",Col1:"C1",Value1:127},{Col2:"C13",Col1:"C2",Value1:134},{Col2:"C13",Col1:"C3",Value1:190},{Col2:"C14",Col1:"C1",Value1:148},{Col2:"C14",Col1:"C2",Value1:79},{Col2:"C14",Col1:"C3",Value1:123},{Col2:"C12",Col1:"C4",Value1:121},{Col2:"C13",Col1:"C4",Value1:175},{Col2:"C14",Col1:"C4",Value1:140}],sort:{Col1:{order:["C1","C2","C3","C4"],priority:0},Col2:{order:["C12","C13","C14"],priority:0}}}},sort:{Col1:{order:["C1","C2","C3","C4"],priority:0},Col2:{order:["C12","C13","C14"],priority:0}}},pivotSetting:uW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:uW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["series","category","trellisColumns","trellisRows"],valueRoles:["values"],groupingOrValueRoles:[]}},dW={value:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},comparisonValue:{values:[{idx:0,method:"none",name:"Value2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},pW={data:{data:[{Value1:1200,Value2:1e3}],sort:{}},pivotSetting:dW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:dW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["trellisColumns","trellisRows"],valueRoles:["values","comparisonValue"],groupingOrValueRoles:[]}},hW={values:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},location:{values:[{name:"Province",valueType:1}],options:{}}},yW={data:{data:[{Province:"",Value1:100},{Province:"",Value1:50},{Province:"",Value1:80},{Province:"",Value1:80},{Province:"",Value1:50},{Province:"",Value1:10},{Province:"",Value1:30},{Province:"",Value1:60},{Province:"",Value1:20},{Province:"",Value1:50},{Province:"",Value1:30},{Province:"",Value1:80},{Province:"",Value1:50},{Province:"",Value1:60},{Province:"",Value1:60},{Province:"",Value1:60},{Province:"",Value1:60},{Province:"",Value1:30},{Province:"",Value1:60}],sort:{},profile:{values:{options:{},values:["Value1"]},location:{options:{},values:["Province"]}}},pivotSetting:hW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:hW,groupingRoles:["location"],valueRoles:["values"],groupingOrValueRoles:[]}},gW={value:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},comparisonValue:{values:[{idx:0,method:"none",name:"Value2",valueType:1}],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},mW={data:{data:[{Value1:565,Value2:1e3}],sort:{}},pivotSetting:gW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:gW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["trellisColumns","trellisRows"],valueRoles:["values","comparisonValue"],groupingOrValueRoles:[]}},fW={area:{values:[{name:"AreaName",valueType:1}],options:{}},color:{values:[{idx:0,method:"none",name:"AreaName",valueType:1}],options:{}}},vW={data:{data:[{AreaName:"Lobby"},{AreaName:"Office"},{AreaName:"Conference Room"},{AreaName:"Entertainment"},{AreaName:"Other Room"}]},desc:{dataViewType:H.DataViewType.Plain,pivotSetting:fW,groupingRoles:["area"],valueRoles:["color"]},pivotSetting:fW,graphJson:{type:"Graph",elements:[{properties:{name:"Conference Room",centerAttr:"0.5,0.5",center:[152.38704299926758,187.10528564453125]},shapes:[{type:"rect",position:[56.86832000000001,172.68736],width:55.37792000000003,height:52.75648000000004},{type:"rect",position:[201.37520000000004,148.76672000000002],width:46.53055999999995,height:57.343999999999966}]},{properties:{name:"Office",centerAttr:"0.5,0.5",center:[114.7038345336914,246.25151824951172]},shapes:[{type:"rect",position:[57.196000000000026,226.09920000000002],width:55.05024000000002,height:27.525119999999987},{type:"rect",position:[128.95792000000003,226.09920000000002],width:43.25376,height:40.304640000000035}]},{properties:{name:"Lobby",centerAttr:"0.5,0.5",center:[233.37777709960938,114.72930908203125]},shapes:[{type:"path",value:"M 220.76132824577275 81.60437158433098 L 220.7613190144 108.0184274944 L 201.4339661824 108.0184274944 L 201.4339661824 147.8542491648 L 247.9269871616 147.8542491648 L 247.9269871616 108.447924224 L 265.3216047104 94.8114030592 L 250.718715904 81.604378624 L 220.76132824577275 81.60437158433098 z"}]},{properties:{name:"Other Room",centerAttr:"0.5,0.5",center:[148.49849319458008,67.48467063903809]},shapes:[{type:"path",value:"M200.57498,49.39211L200.57497,93.63029L220.54657,93.63029L220.54657,81.17488L250.71872,81.17488C238.7286,70.18692 221.04766,57.69572 200.57498,49.39212z"},{type:"path",value:"M112.3134,32.53437L112.31339,62.06228L53.79447,62.06228L46.27827,44.66766C68.07523,36.43564 88.90582,32.49858 112.3134,32.53437z"},{type:"path",value:"M 54.22396437943348 62.92126306547666 L 98.3547510784 62.813896704 L 98.3547510784 108.6626725888 L 74.3029342208 108.6626725888 L 54.22396437943348 62.92126306547666 z"},{type:"rect",position:[145.0625264883458,26.30666533599782],width:55.5124546221131,height:31.245888384980475},{type:"path",value:"M112.36579,32.53179L112.42077,79.56427L129.38589,79.56427L129.27852,32.53438C124.72299,32.42442 118.66508,32.31704 112.36579,32.53179z"},{type:"path",value:"M129.27852,32.53437L129.38589,79.56427L145.06252,79.56427L145.06252,34.25236C140.38674,33.40997 138.53102,33.06237 129.27852,32.53437z"},{type:"rect",position:[145.27727346263774,57.98205137423378],width:12.133283001683708,height:21.367462985266002}]},{properties:{name:"Entertainment",centerAttr:"0.5,0.5",center:[114.38097763061523,162.9880256652832]},shapes:[{type:"ellipse",center:[148.42211225967995,202.5717731777109],rx:23.265277996055087,ry:14.614527124339197},{type:"rect",position:[123.48492791059303,108.78975982344512],width:48.23449599999998,height:64.487424625},{type:"path",value:"M57.17675,109.38744L57.04253,172.604L112.20602,172.604L112.20602,118.64847L98.51581,118.64847L98.38159,108.9848L57.17675,109.38744z"}]}]},graphBBox:{x:0,y:0,width:280,height:290},imageSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEiCAMAAAAVsT11AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGxQTFRF////AAAA7+/vkJCQ39/fv7+/r6+vn5+fgICAYGBgQEBAMDAwICAgEBAQf39/cHBwUFBQz8/Pj4+PoKCgb29vqqqqX19f9PT0urq65eXl+vr6tbW19fX12tra5OTk2dnZ1dXV1NTUxMTE/v7+HQowcgAACx5JREFUeJztnQl7mzgQhoEYHxjXTnZdp067aeL//x+XSyBAg84RAs/3tDVgkMTb0Wh0GKKIRCKRSCQSiUQikUgkEolEIpFIJBKJRCKtR7Gx5i45sggMoNXfoKkIDCACA8gSTPLiqBz4SjbpdrffHw5ZdszzvHOWp2Ivy7LDYb/fbdNNUp9uByY5/nBRZlRtChyHLD8ptyqnY3bY76zAhM0lSXfnS2cZpzy7lEaxS9PXzWbT3XdS7KVpGpfmdMm6CyxyDpbLhkOSl///W1ZDWo3uuz2QvKaljZmDCZNLwSQ7NVXi8DYGwgSDgU5QVYBc0pdLzSS/FEimz0UDExqX9KU2lNPlLYWshBcWmDgOiEvycqig5IedxE464YExu8690vOxgnLeqRhKq3WDSdLKVIrqo2wpTCsGk+wqV5ufU5Or1wqmsZXsh7apNFonmPRcUXnT8ip9rRLMprIVCyrRSsFEWXy2TWKdYNI4t01inWCiY2zUFHFaKZiXOLNMYaVgkpOtyeCByfemIYQL7eODXQJoYMpxoMN8aJI4DrS5jtLDrGgu8d7qejwwRZw1J5o0PlmZDCaYedFkdiaDC2ZONJZBHjaYGdHkVi02PpgazWlv10gYaG8V5MnBwEs71FeBlGjyfyyKaSK7IE/LYoZguI32D5BMWsQ1uW3/RVP7+GJ+sS8wUbTLfbsaqyDPH5jkWE7s2EVdmjpYZOcNTDkB59vVpMorGIauMXnxBaaZmHz1W5+0gjyuyEVpPYHpJmx/nDwaTdEvUD+5K3JZWj9g+Inssj5lvoxGJ8hri1yV1guYwQR/2T55csI6I3mtf6lKawVGNcDbDSb4KyfsxWh0grymyM3/ohOLabYnTh2qMJqTl3WLGv2CusjMumcCUxnNxYPRFCajmktdZGbdzqqSYH9ahdH4aJ7Ug7x4Yk9wwKHFDI6VRnNG73Orj+QFAyaK3nz4YOUgr3+ez6o0Prbx4IOVg7xNzpOZ1WIK33jGr05ZvFU7sUdmZjBFdTphVyf1II8nM29VqksTn1BbJ40gjyMzu8UUBT8g9xA0gryOTABgih53EewhOhqNIK8jM39VKpXmqI7mrLHAavNv/ckbsei2Eu5uEiyLqRwN4lC5yXRtnE9Wb37AYPTrAIdgouQSx3gRjcF0bbyZIjPJRb8qyYTmgpWCvGGXYILMNBenFhNVHQTLxT6wslgeEYz6SiAZCRfXYKLXU3xEcsE7hRZ73IkEyMi4OGyVGm3QGieVIE/QuxaSkXJxbjGYZBSCPNGwA2u8efEDtcNB23FKbsAU/wNx/io/TV+FycjSlYzHaEi7Kl0nVZ/0Mz6hkJEHeQ7BDLalFnOdSo19eY4VWhB9vUqDvNDBlD0nDDLSIG/OqjSVWvclDhlpvyB4i8EiIwvyFgAGh4wsyBuA0VKkfi07KeGOqbRKtVDISII8GxvRl+kP9o+x+uCSqiRBnlcwhlySLD4pDu3rpDptMj7BGHIpewYYUd50kOcRjCGXFKuXvZlssf2BMeTyEsc/kYbGJ4M8b2AMuZwRHyQyGeR5AyPukktUut2d86K0yiYGlv0215rCcrtM2/gIfhcyGDS322qixQ4YDKLbZZoI8sIFg+l2mSaCvFDBILtdJvgH2YGCwXa7TAnYYocJBs3tGo8dOMmSHUpMs4nR3O4sYIZHuF+zaIPBcrvqBcEDw/+aRRuMkyJZpexsaHOYZe/XLASmVf/XLASGafBrlvpLwWiuSlouNTeY4a9ZGjBR9696Wk41N5jhr1meBcwm3V63aT8Cm1wD8xxgbu/pr3t0/5V+/JZlGfc2lgVGO9y7ffxptv7wZNYGRl8tl4LMuyTLZwKz4QcwOD/jFgzWUla+lApzwzpK/+N2fnWUXIKZWlRrpx4Y4RnGYLZ3bufezZw6BYNGBhHMFdhzCwaLzOItBosMIhgvPqYUChlEMD5apSYnBDLuwIyj//fPdvPzQ5xld7C3oQlGuBDbUq6aa1H0f/tgZD6xIl88OQrwxNH/7aOh9Y7VV8JTr5S39FrdwvBTLiD61+9dhwnm/W/0NxV8SgX5WXmW7cHeRmhgrsBfqaCWWZ5le7C3oQsG4SWBvVKmX9HXu+BTKiiWk2fZHuxtaILBeFlV38e8X9Pfgk+poOhfnmV7sLehBwblJV5uWqVZLQaFS+IGzJw+BoeLo0RnbJWC5gJG//hxTOBcgOjfxyxB2FzE0f9CZwlcG+G41rieJRCEcQhg8N/gaTQeMzGpL3wagnswRgvTtWQ0ggffKfA0BLOyzSqjMV/wToGnISwRjNEsAXSnQM1fJBiXFgN5xEWCcehjwJZikWAMWyWhOC5Ii2xHBUJEbjJLsMDFifoymSV4CjAmswTPAcZ4DZ6yFgtGOct4tGGelhMRGO8p62VJYAiMXpYEhsDoZUlgVgvmVoRs38C8rdrKo3WCuW3/3u9/tmIyamvVNMFMYg4HzHc18v8lnoV1CoatWhpcfo34BU3hgLlWw3LAvL1TMGzVkgBMt6ApHDD1eOVdZ4GnIRhg5VL/cDhg0q/y389v4ZdOwbBVSwIw3YKmcMDctp/3+5cP58tWLYl8TLugKRww0e37uoWWWeG0SlO7AYGZEoEBRGAArSuOMZQoMaddgoXFMe11boux/Dimvc5tMZYfx7TXuS3GCuIYdp3bYqynVSIw0HW2GQ9WGhKYRsMVLwHGMYbX2WULv9ftueMYwXvdRhvPGMdMvdcttDgGCuSh4zYFmnyvW2hxzKj/d50+blEg8Urm0cYgQ/HuqsAsa9iBwAwULphA4pjwwAQSx3hsldY5r9ReZ/7ElnXOKzFZPMtmpfNKTOZkltUq6cuYzDqXgXACyEgfQrPOhUO8xGSkD6FZFhjd5rqSkMwV+DvKsl+O0YZW8d3LNMCrJXqamPQhNM8ARiTpQ2ieFYxylv2Dow3ztJyIwEhSDgWM5p0G2iqJHkMxvmB41bLAGEk0SClfI7N+MH0uTYQLgmkj4NWDGdhLE+GCYNoIWALGwQImFzJPeViPmggXBNNGwGIwLld2uZBxyiP/0kS4IJg2Asa7GZcyLeXY7zYRLuxjWAS8LDC6zTX4wCLD5jo4hTJLEJwIDCACA4jAACIwgEKZiQxOM6yoIjCOs/QrAgOIwAAiMIAIDCACA4jAACIwgFwNKQYxHOlSrkqpkQyBQc4SVwQGEIEBRGAAhQbmUYhtVnvVZ/8M3bIZKTAwxV0zNI96uyXBgDz8kAkLTIOk2+QOPjOYh3intZ368KLAJC7A8Hfc3+7AcHULV27AaL16RwnMwHo6j7woMHqvJJKAeTxqC+l/8+idol9EbbkAo/mqJhswQ8eMJwdgdF9hJa1KIzDd/qORfil1ZT8eo/1qrwkw7d33GuVu/7EgMPqvPJNmySAMdrkg2AMaazD6rzybCvCYUUR1/eEboV7vYAFgnGbJHG/nhXkzeWIwkZ+mWEXBgQlFrsDQeAy7TrKPkKVfERhABAYQgQFEYACFBMbToKWanM1d62QJfLFcMFPp6GQJfAGDCQiYrggMIBQwj9EG2+QHbtRznkOOwDx6wwu9Ac3eNAE71c+glY3cWQw/BNN+E3Ujwu2476MesglcDqtSS+HRr0r1sSjyOSpjL8c+ZjB91J+55Qf5gpdLi+lZRf0NO95x8TbzZinHVWngPlq/259vC97zRm6dbzsU3n3DnzCcPwhbrprrtv0VrXzgVjywSqVbThwZd6zUuhbcqqHhN+0JbOPxTGD6CuSeg1MoxhCcCIxIS4j1SSQSiUQikUgkEolEIpFIJBKJ5Fv/A0OJycgR6e1oAAAAAElFTkSuQmCC"},bW={upper:{values:[{idx:0,method:"none",name:"Value2",valueType:1}],options:{}},lower:{values:[{idx:0,method:"none",name:"Value1",valueType:1}],options:{}},category:{values:[{name:"Col1",valueType:1}],options:{}},series:{values:[],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}},CW={data:{data:[{Col1:"C1",Value1:2,Value2:10},{Col1:"C1",Value1:4,Value2:12},{Col1:"C2",Value1:5,Value2:11},{Col1:"C2",Value1:5,Value2:16},{Col1:"C3",Value1:7,Value2:18},{Col1:"C3",Value1:7,Value2:19},{Col1:"C4",Value1:3,Value2:11},{Col1:"C4",Value1:3,Value2:12}],sort:{Col1:{order:["C1","C2","C3","C4"],priority:0}}},pivotSetting:bW,desc:{dataViewType:H.DataViewType.Plain,pivotSetting:bW,trellisRows:"trellisRows",trellisColumns:"trellisColumns",groupingRoles:["upper","lower","category","series","trellisColumns","trellisRows"],valueRoles:[],groupingOrValueRoles:[]}},TW={columns:{Value1:{name:"Value1",display:"Value1",dataType:"number",format:"General",category:1},Value2:{name:"Value2",display:"Value2",dataType:"number",format:"General",category:1},Value3:{name:"Value3",display:"Value3",dataType:"number",format:"General",category:1},Col1:{name:"Col1",display:"Col1",dataType:"string",format:"@",category:2},Col2:{name:"Col2",display:"Col2",dataType:"string",format:"@",category:2},Province:{name:"Province",display:"Province",dataType:"string",format:"@",category:2},AreaName:{name:"AreaName",display:"AreaName",dataType:"string",format:"@",category:2}}};function SW(e){switch(e){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.RadialStackedBar:case H.ChartType.BarInPolar:case H.ChartType.StackBarInPolar:case H.ChartType.Radar:case H.ChartType.FilledRadar:var t=cC.create(eW.desc,TW),a=t.getPivotSettingProfile();return{data:F()({},eW.data,{profile:a}),pivotSettingHelper:t};case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:var n=cC.create(CW.desc,TW),i=n.getPivotSettingProfile();return{data:F()({},CW.data,{profile:i}),pivotSettingHelper:n};case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.Rose:case H.ChartType.Funnel:var r=cC.create(aW.desc,TW),o=r.getPivotSettingProfile();return{data:F()({},aW.data,{profile:o}),pivotSettingHelper:r};case H.ChartType.Sunburst:case H.ChartType.TreeMap:var s=cC.create(iW.desc,TW),l=s.getPivotSettingProfile();return{data:F()({},iW.data,{profile:l}),pivotSettingHelper:s};case H.ChartType.DisaggregateScatter:var u=cC.create(oW.desc,TW),c=u.getPivotSettingProfile();return{data:F()({},oW.data,{profile:c}),pivotSettingHelper:u};case H.ChartType.Bubble:var d=cC.create(lW.desc,TW),p=d.getPivotSettingProfile();return{data:F()({},lW.data,{profile:p}),pivotSettingHelper:d};case H.ChartType.Composite:var h=cC.create(cW.desc,TW),y=h.getPivotSettingProfile();return{data:{data:{leftValues:F()({},cW.data.data.leftValues,{profile:y}),rightValues:F()({},cW.data.data.leftValues,{profile:y})},profile:y,sort:cW.data.sort},pivotSettingHelper:h};case H.ChartType.Map:var g=cC.create(yW.desc,TW),m=g.getPivotSettingProfile();return{data:F()({},yW.data,{profile:m}),pivotSettingHelper:g};case H.ChartType.Gauge:case H.ChartType.Indicator:var f=cC.create(mW.desc,TW),v=f.getPivotSettingProfile();return{data:F()({},mW.data,{profile:v}),pivotSettingHelper:f};case H.ChartType.KPI:var b=cC.create(pW.desc,TW),C=b.getPivotSettingProfile();return{data:F()({},pW.data,{profile:C}),pivotSettingHelper:b};case H.ChartType.FloorPlan:var T=cC.create(vW.desc,TW),S=T.getPivotSettingProfile();return{data:F()({},vW.data,{profile:S}),pivotSettingHelper:T}}}function DW(n,e){return e.map(function(t){var a={};return Object.keys(t).forEach(function(e){n.includes(e)?a[e]=null==t[e]?t[e]:new Date(t[e]):a[e]=t[e]}),a})}var kW=ci,wW=H.ChartType,xW=Fn,AW=[wW.Column,wW.Funnel,wW.StackColumn,wW.PercentStackColumn,wW.Bar,wW.StackBar,wW.PercentStackBar,wW.BarInPolar,wW.StackBarInPolar,wW.Pie,wW.Donut,wW.Rose,wW.RadialStackedBar,wW.Line,wW.Area,wW.StackArea,wW.PercentStackArea,wW.Radar,wW.FilledRadar,wW.Composite],IW=function(){function l(e,t,a,n){I()(this,l),this.chartType=e;var i=t.profile,r=t.sort,o=t.seriesTotalData,s=this._matchSchema(i);this.schema=s,this._hasSeriesTotal=!!o,this.property=n,this.isChartWithoutSeries=s.series&&0===s.series.length&&AW.includes(e),this.allUsedColumns=a,this.aggregatedData=t,this.sortTable=this._getSortTable(r,s)}return D()(l,[{key:"_matchSchema",value:function(e){var t=this.chartType,a=ae.map(function(e){return e&&Array.isArray(e.values)&&e.values.map(function(e){return e.display})||[]});switch(t){case wW.Pie:case wW.Donut:case wW.Rose:case wW.Funnel:return a({axis:[],series:e.series,values:e.values,values2:[],values3:[],trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip});case wW.Sunburst:case wW.TreeMap:return a({axis:e.details,series:[],values:e.values,values2:[],values3:[],trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip});case wW.DisaggregateScatter:return a({axis:[],series:e.series,values:[],values2:e.xAxis,values3:e.yAxis,trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip});case wW.Bubble:return a({axis:[],series:e.series,values:e.values,values2:e.xAxis,values3:e.yAxis,trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip});case wW.RangeColumn:case wW.RangeBar:case wW.RangeArea:return a({axis:e.category,series:e.series,values:e.lower,values2:e.upper,values3:[],trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip});default:return a({axis:e.category,series:e.series,values:e.values,values2:[],values3:[],trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip})}}},{key:"_getSortTable",value:function(a,e){return ae.mapObjIndexed(function(e,t){if(["axis","series","values2","values3","trellisColumns","trellisRows"].includes(t))return nl(a,e)},e)}},{key:"getSeriesData",value:function(e,i){var r=this.allUsedColumns;if(1!==e.length)return e.reduce(function(e,t,a){var n=r[t].formatValue(i[t]);return 0<a?"".concat(e,",").concat(n):"".concat(e).concat(n)},"");var t=e[0],a=r[t].formatValue(i[t]);return""===a?i[t]:a}},{key:"setMetaData",value:function(e,t,a,n){e.__meta__||(e.__meta__={}),e.__meta__.axis=t,e.__meta__[a]=n,e.__meta__.valueDefinition=a}},{key:"getSortFn",value:function(r){return function(i){[["axis","categorySortField"],["series","seriesSortField"],["values2","xAxisSortField"],["values3","yAxisSortField"],["trellisColumns","trellisColumnSortField"],["trellisRows","trellisRowSortField"]].forEach(function(e){var t=N()(e,2),a=t[0],n=t[1];r[a]&&(i[n]=r[a](i))})}}},{key:"buildDataItem",value:function(){var a=this,e=this.schema,t=this.aggregatedData,n=t.data,i=t.seriesTotalData,r=this.sortTable,o=this.property.seriesTotalDisplay,s=e.series,l=e.tooltip,u=e.values,c=!!i,d=this.getSortFn(r),p=n.map(function(e){var t=F()({},e);return t.__series__=a.getSeriesData(s,e),t.__tooltip__=l,c&&(t.__totalSeries__=o),d(t),t});if(c){var h=i.map(function(e){var t=F()({},e);return t.__totalSeries__=o,t.__tooltip__=l,t.__seriesTotalValue__=e[u[0]],t.__series__=p[0].__series__,d(t),delete t.seriesSortField,delete t[u[0]],t});return p.concat(h)}return p}},{key:"buildMutatedDataItem",value:function(){var i=this,e=this.schema,t=this.aggregatedData.data,a=this.sortTable,n=e.series,r=e.values,o=e.values2,s=e.values3,l=e.axis,u=e.trellisColumns,c=e.trellisRows,d=e.tooltip,p=[].concat(R()(r),R()(o),R()(s)),h=[].concat(R()(n),R()(l),R()(u),R()(c),R()(d)),y=[],g=this.getSortFn(a),m=ae.compose(ae.uniq,ae.concat(p),ae.map(ae.prop("display")),ae.pathOr([],["aggregatedData","profile","conditionalFormatValues","values"]))(this);return t.forEach(function(n){p.forEach(function(e){var t=n[e],a=h.reduce(function(e,t){return e[t]=n[t],e},{});a.__series__=e,g(a),a.__leftValue__=t,a.__tooltip__=d,m.forEach(function(e){return a[e]=n[e]}),i.setMetaData(a,kW.Left,e,t),y.push(a)})}),y}},{key:"buildDatas",value:function(){return this.isChartWithoutSeries?this.buildMutatedDataItem():this.buildDataItem()}},{key:"getType",value:function(e){var t="";switch(e){case H.ChartType.Column:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.Funnel:case H.ChartType.Bar:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.BarInPolar:case H.ChartType.StackBarInPolar:case H.ChartType.Pie:case H.ChartType.Sunburst:case H.ChartType.PieinPie:case H.ChartType.Donut:case H.ChartType.Rose:case H.ChartType.RadialStackedBar:case H.ChartType.Gauge:case H.ChartType.Indicator:t="Bar";break;case H.ChartType.Line:case H.ChartType.Radar:t="Line";break;case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.FilledRadar:case H.ChartType.RangeArea:t="Area";break;case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:t="Scatter";break;case H.ChartType.TreeMap:t="TreeMap";break;case H.ChartType.KPI:t="Text"}return t}},{key:"_getValueMethod",value:function(){var e=this.aggregatedData.profile;return e&&e.values&&e.values.values&&e.values.values.length?e.values.values[0].method:null}},{key:"getValues",value:function(){var t,e=this.chartType,a=this.schema,n=this.isChartWithoutSeries,i=[];switch(e){case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:var r=[],o=[],s=s_(a.values2&&a.values2[0]),l=s_(a.values3&&a.values3[0]);s&&(r.push(s),o.push({order:"Ascending",field:"xAxisSortField"})),l&&(r.push(l),o.push({order:"Descending",field:"yAxisSortField"})),i.push({field:r.join(","),sort:o});break;case H.ChartType.RangeColumn:case H.ChartType.RangeBar:case H.ChartType.RangeArea:var u=s_(a.values&&a.values[0]),c=s_(a.values2&&a.values2[0]);i.push({field:{lower:u,upper:c}});break;case H.ChartType.Gauge:case H.ChartType.Indicator:i=[{field:"range"}];break;default:t=this._getValueMethod()===H.AggregationMethod.List?__.Aggregate.List:void 0,i=n?[{field:"__leftValue__"}]:[].concat(R()(a.values),R()(a.values2),R()(a.values3)).map(function(e){return{field:s_(e)}})}return i.map(function(e){return F()({},e,{aggregate:t})})}},{key:"getCategory",value:function(){var e=this.chartType,t=this.schema.axis,a=this.allUsedColumns,n=this.property,i={},r=t.map(function(e){var t="".concat(s_(e),":").concat(s_(a[e].format));return xu({format:t,emptyString:n.emptyItemsString,nullString:n.nullItemsString})}).join(">");switch(r&&(i={field:r},0<t.length&&(i.sort={order:"Ascending",field:"categorySortField"})),e){case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.Rose:case H.ChartType.Donut:case H.ChartType.Sunburst:case H.ChartType.Pie:case H.ChartType.TreeMap:case H.ChartType.Gauge:case H.ChartType.Indicator:case H.ChartType.KPI:return{};default:return i}}},{key:"getColor",value:function(){var e=this.isChartWithoutSeries,t=this.schema,a=this.chartType,n=this.property,i={};a!==H.ChartType.Sunburst&&a!==H.ChartType.TreeMap||(i.field=this.getAxesDisplay(t.axis));var r=xu({format:"General",emptyString:s_(n.emptyItemsString),nullString:s_(n.nullItemsString)});return(e||0<t.series.length)&&(i.field="__series__:".concat(r)),i}},{key:"getLayout",value:function(){var e=this.schema,a=this.allUsedColumns,n=this.property;if(0<e.trellisColumns.length||0<e.trellisRows.length){var t=e.trellisColumns.map(function(e){var t="".concat(s_(e),":").concat(s_(a[e].format));return xu({format:t,emptyString:n.emptyItemsString,nullString:n.nullItemsString})}).join(">"),i=e.trellisRows.map(function(e){var t="".concat(s_(e),":").concat(s_(a[e].format));return xu({format:t,emptyString:n.emptyItemsString,nullString:n.nullItemsString})}).join(">"),r={type:"Trellis",field:"".concat(t,",").concat(i)};return 0<e.trellisRows.length&&(r.rowSort={order:"Ascending",field:"trellisRowSortField"}),0<e.trellisColumns.length&&(r.columnSort={order:"Ascending",field:"trellisColumnSortField"}),r}return{type:"Default"}}},{key:"getAxesDisplay",value:function(e){var t=this.allUsedColumns;return e.map(function(e){return"".concat(s_(e),":").concat(s_(t[e].format))}).join(">")}},{key:"getDetails",value:function(e,t){var a=this.schema.axis,n={field:"__series__",group:"Cluster"};switch(0<e.length&&Object.prototype.hasOwnProperty.call(e[0],"seriesSortField")&&(n.sort={order:"Ascending",field:"seriesSortField"}),t){case H.ChartType.StackColumn:case H.ChartType.Funnel:case H.ChartType.PercentStackColumn:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.Pie:case H.ChartType.PieinPie:case H.ChartType.Donut:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.RadialStackedBar:case H.ChartType.StackBarInPolar:n.group="Stack";break;case H.ChartType.Sunburst:n.group="Stack",n.field=this.getAxesDisplay(a),n.sort={order:"Ascending",field:"categorySortField"};break;case H.ChartType.TreeMap:n.field=this.getAxesDisplay(a);break;case H.ChartType.Gauge:n.field=M_,n.group="Stack";break;case H.ChartType.Indicator:n.field=R_,n.group="Stack"}return n}},{key:"getSize",value:function(e){var t=this.chartType,a=this.schema,n={};switch(t){case H.ChartType.Bubble:a.values[0]&&1<=e.length&&(n={field:s_(a.values[0])})}return n}},{key:"getStyle",value:function(e){var t={};switch(e){case H.ChartType.Area:case H.ChartType.PercentStackArea:case H.ChartType.StackArea:case H.ChartType.RangeArea:t={opacity:.6,strokeWidth:"".concat(this.property.lineWidth,", 0, 0, 0"),symbolStrokeWidth:this.property.lineWidth,symbolShape:this.property.symbolShape,symbolSize:this.property.symbolSize,strokeDasharray:this.property.lineType===xW.Dashed?"5,3":"1,0",symbolFill:this.property.symbolFill,symbolStroke:this.property.symbolStroke};break;case H.ChartType.FilledRadar:t={opacity:.6,strokeWidth:this.property.lineWidth,symbolStrokeWidth:this.property.lineWidth,symbolShape:this.property.symbolShape,symbolSize:this.property.symbolSize,strokeDasharray:this.property.lineType===xW.Dashed?"5,3":"1,0",symbolFill:this.property.symbolFill,symbolStroke:this.property.symbolStroke};break;case H.ChartType.Line:case H.ChartType.Radar:t={strokeWidth:this.property.lineWidth,symbolStrokeWidth:this.property.lineWidth,symbolShape:this.property.symbolShape,symbolSize:this.property.symbolSize,strokeDasharray:this.property.lineType===xW.Dashed?"5,3":"1,0",symbolFill:this.property.symbolFill,symbolStroke:this.property.symbolStroke};break;case H.ChartType.TreeMap:t={stroke:"white",strokeWidth:1};break;case H.ChartType.Bubble:t={symbolOpacity:.8}}return t}},{key:"getHoverStyle",value:function(){switch(this.chartType){case H.ChartType.Bubble:case H.ChartType.DisaggregateScatter:return{symbolOpacity:.6};case H.ChartType.Gauge:case H.ChartType.Indicator:return;case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.Radar:case H.ChartType.FilledRadar:return{opacity:.8,strokeWidth:1.5*this.property.lineWidth};case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.RangeArea:return{opacity:.8,strokeWidth:"".concat(1.5*this.property.lineWidth,", 0, 0, 0")};default:return{opacity:.8,strokeWidth:2}}}},{key:"needAnimation",value:function(e){if(d$.globalConfigManager.get("disableAnimation"))return!1;switch(e){case H.ChartType.Gauge:case H.ChartType.Indicator:case H.ChartType.RangeArea:return!1;default:return!0}}},{key:"getLoadAnimation",value:function(e){return this.needAnimation(e)?{mode:__.AnimationMode.All,duration:600,easing:"Linear",staggering:!1,startDelay:0}:void 0}},{key:"getUpdateAnimation",value:function(e){return this.needAnimation(e)?{mode:__.AnimationMode.All,duration:600,easing:"Linear"}:void 0}},{key:"getHoverAnimation",value:function(e){if(d$.globalConfigManager.get("disableAnimation"))return!1;switch(e){case H.ChartType.Gauge:case H.ChartType.Indicator:return!1;case H.ChartType.RangeArea:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.Radar:case H.ChartType.FilledRadar:return{scale:1.5};default:return!0}}},{key:"getValueField",value:function(){return this.isChartWithoutSeries?"__leftValue__":null}},{key:"buildPlots",value:function(e){var t=this.isChartWithoutSeries,a=this.chartType;return[{type:this.getType(a),name:"p1",encodings:{values:this.getValues(),category:this.getCategory(),text:[],color:this.getColor(),layout:this.getLayout(),details:this.getDetails(e,a),size:this.getSize(e),tooltip:[]},config:{style:this.getStyle(a),hoverStyle:this.getHoverStyle(),loadAnimation:this.getLoadAnimation(a),updateAnimation:this.getUpdateAnimation(a),hoverAnimation:this.getHoverAnimation(a),trellis:{style:{},textStyle:{},hoverStyle:{}},_valueField:this.getValueField(),_isConditionFormatNeedDetail:t}}]}},{key:"buildConfig",value:function(){return{}}},{key:"getValueFields",value:function(e){var a=this.allUsedColumns;return e.map(function(e){var t=a[e];return{display:t.display,name:t.name,format:t.format}})}},{key:"getSeriesAndValues",value:function(){var e=this.schema,t=e.values,a=e.values2,n=e.values3,i=e.series,r=this.isChartWithoutSeries,o=this.getValueFields([].concat(R()(t),R()(a),R()(n))),s=o,l=this.getValueFields(t),u=this.getValueFields(a),c=[],d=[],p=[],h=[];return r?(d=o,p=s.map(function(e){return e&&e.display}),h=c.map(function(e){return e&&e.display})):p=d=i,{_values:o,_series:d,_leftValues:o,_rightValues:c,_leftSeries:p,_rightSeries:h,_lower:l,_upper:u}}},{key:"getCategorys",value:function(){var e=this.schema.axis,a=this.allUsedColumns;return e.map(function(e){var t=a[e];return{name:t.name,display:t.display,format:t.format}})}},{key:"getSchema",value:function(){var e=this.getSeriesAndValues(),t=e._values,a=e._series,n=e._leftValues,i=e._rightValues,r=e._leftSeries,o=e._rightSeries;return{values:t,lower:e._lower,upper:e._upper,series:a,categorys:this.getCategorys(),rows:this.schema.trellisRows,columns:this.schema.trellisColumns,leftValues:n,rightValues:i,leftSeries:r,rightSeries:o,settingValues:t,transformedPivot:this.schema}}},{key:"getConfig",value:function(){var e=this.buildDatas();return{plots:this.buildPlots(e),config:this.buildConfig(),data:{name:"sample",dateFormats:!1,values:e}}}}]),l}(),PW=ci,_W=H.ChartType,MW=function(e){k()(s,e);var o=w()(s);function s(e,t,a,n,i){var r;return I()(this,s),(r=o.call(this,_W.Composite,e,t,i)).seriesAxis=r._getAxisSeries(n),r.leftAndRightData=a,r.leftChartType=e.profile.leftValues.options.valueChartType,r.rightChartType=e.profile.rightValues.options.valueChartType,r}return D()(s,[{key:"_matchSchema",value:function(e){return ae.map(function(e){return e&&Array.isArray(e.values)&&e.values.map(function(e){return e.display})||[]})({axis:e.category,series:e.series,values:e.leftValues,values2:e.rightValues,values3:[],trellisRows:e.trellisRows,trellisColumns:e.trellisColumns,tooltip:e.tooltip})}},{key:"_getAxisSeries",value:function(e){return e?"rightValues"===e?PW.Right:PW.Left:PW.Both}},{key:"buildMutatedDataItem",value:function(i){var r=this,e=i?this.leftAndRightData.rightValues:this.leftAndRightData.leftValues;if(!e)return[];var t=e.data,a=e.profile,n=this._matchSchema(a),o=n.series,s=n.values,l=n.values2,u=n.values3,c=n.axis,d=n.trellisColumns,p=n.trellisRows,h=n.tooltip,y=[].concat(R()(s),R()(l),R()(u)),g=[].concat(R()(o),R()(c),R()(d),R()(p),R()(h)),m=[],f=this.getSortFn(this.sortTable,this.chartType,n),v=ae.compose(ae.uniq,ae.concat(y),ae.map(ae.prop("display")),ae.pathOr([],["aggregatedData","profile","conditionalFormatValues","values"]))(this);return t.forEach(function(n){y.forEach(function(e){var t=n[e],a=g.reduce(function(e,t){return e[t]=n[t],e},{});f(a),i?(a.__rightValue__=t,r.setMetaData(a,PW.Right,e,t),r.isChartWithoutSeries||r.seriesAxis===ci.Left?a.__series2__=e:a.__series2__=r.getSeriesData(o,a)):(a.__leftValue__=t,a.__series__=e,r.setMetaData(a,PW.Left,e,t),r.isChartWithoutSeries||r.seriesAxis===ci.Right?a.__series__=e:a.__series__=r.getSeriesData(o,a)),v.forEach(function(e){return a[e]=n[e]}),a.__tooltip__=h,m.push(a)})}),m}},{key:"buildDatas",value:function(){var e=this.buildMutatedDataItem(),t=this.buildMutatedDataItem(!0),a=[].concat(R()(e),R()(t)),n=e.find(function(e){return 0===e.seriesSortField})||e[0],i=t.find(function(e){return 0===e.seriesSortField})||t[0],r=n&&n.__series__,o=i&&i.__series2__;return a.forEach(function(e){e.__series__||(e.__series__=r),e.__series2__||(e.__series2__=o)}),a}},{key:"getDetails",value:function(e,t,a){var n=C()(b()(s.prototype),"getDetails",this).call(this,e,t,a);return!this.seriesAxis||(this.seriesAxis===ci.Both||this.seriesAxis===ci.Left&&!a||this.seriesAxis===ci.Right&&a)||(n.sort=void 0),n.field=a?"__series2__":"__series__",n}},{key:"buildPlots",value:function(e){var t=this.isChartWithoutSeries,a=this.seriesAxis,n=this.leftChartType,i=this.rightChartType,r=this.property,o=xu({format:"General",emptyString:s_(r.emptyItemsString),nullString:s_(r.nullItemsString)});return[{type:this.getType(n),name:"p1",encodings:{values:[{field:"__leftValue__"}],category:this.getCategory(),text:[],color:{field:"__series__:".concat(o)},layout:this.getLayout(),details:this.getDetails(e,n),size:{},tooltip:[]},config:{style:this.getStyle(n),hoverStyle:this.getHoverStyle(),loadAnimation:this.getLoadAnimation(n),updateAnimation:this.getUpdateAnimation(n),hoverAnimation:this.getHoverAnimation(n),trellis:{style:{},textStyle:{},hoverStyle:{}},_valueField:"__leftValue__",_isConditionFormatNeedDetail:t||a===ci.Right}},{type:this.getType(i),name:"p2",encodings:{values:[{field:"__rightValue__"}],category:this.getCategory(),text:[],color:{field:"__series2__:".concat(o)},layout:this.getLayout(),details:this.getDetails(e,i,!0),size:{},tooltip:[]},config:{style:this.getStyle(i),hoverStyle:this.getHoverStyle(),loadAnimation:this.getLoadAnimation(i),updateAnimation:this.getUpdateAnimation(i),hoverAnimation:this.getHoverAnimation(i),trellis:{style:{},textStyle:{},hoverStyle:{}},_valueField:"__rightValue__",_isConditionFormatNeedDetail:t||a===ci.Left}}]}},{key:"getSeriesAndValues",value:function(){var e=this.schema,t=e.values,a=e.values2,n=e.values3,i=e.series,r=this.isChartWithoutSeries,o=this.seriesAxis,s=this.getValueFields([].concat(R()(t),R()(a),R()(n))),l=this.getValueFields(t),u=this.getValueFields(a),c=[],d=[],p=[];if(r)c=s,d=l.map(function(e){return e&&e.display}),p=u.map(function(e){return e&&e.display});else if(c=i,o===ci.Left){var h=a;d=R()(c),p=R()(h),c=[].concat(R()(c),R()(h))}else if(o===ci.Right){var y=t;d=R()(y),p=R()(c),c=[].concat(R()(y),R()(c))}else p=d=c;return{_values:s,_series:c,_leftValues:l,_rightValues:u,_leftSeries:d,_rightSeries:p}}},{key:"getSchema",value:function(){var e=C()(b()(s.prototype),"getSchema",this).call(this);return e.leftChartType=this.leftChartType,e.rightChartType=this.rightChartType,e.seriesAxis=this.seriesAxis,e}}]),s}(IW),LW=function(){function i(e,t,a){var n=this;I()(this,i),this.getSelectionMode=function(){return eM(n.property)},this.aggregatedData=e,this.property=t,this.pivotSettingHelper=a,this.chartType=null}return D()(i,[{key:"getSelectedStyle",value:function(){return{adorners:!1,opacity:1,symbolOpacity:1}}},{key:"getUnselectedStyle",value:function(){return{adorners:!1,opacity:.2,strokeWidth:0,symbolOpacity:.2,symbolStrokeWidth:0}}},{key:"getConfig",value:function(){return{plots:this.buildPlots(),config:this.buildConfig(),data:{name:"sample",dateFormats:!1,values:this.buildDatas()},chartType:this.chartType,expand:this.property.expand&&this.aggregatedData.data.length<=2e3,renderMethod:"Canvas"}}},{key:"buildDatas",value:function(){return{}}},{key:"buildPlots",value:function(){return[]}},{key:"buildConfig",value:function(){return{}}}]),i}(),RW=function(e){k()(r,e);var n=w()(r);function r(e,t){var i;I()(this,r),(i=n.call(this,e,t)).getValueFormat=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=RB()(i).aggregatedData.profile,a=s_(t.value.values[0].format);return e?c_(a,i.getDataLabelDisplayUnit(),i.aggregatedData,"value"):a},i.getTextTemplateFormat=function(){var e=RB()(i).aggregatedData.profile.value.values[0].format;return e=e&&e.replace(/(["])/g,'"$1'),c_(e,i.getDataLabelDisplayUnit(),i.aggregatedData,"value")},i.getDeltaLabelForegroundColor=function(){return i.property.conditionalFormatType!==Qi?"white":i.property.deltaLabelTextStyle.color},i.getSymbolShape=function(){return"Inverted Triangle"},i.showDeltaLabel=function(){if(i.property.showDeltaLabel){var e=i.property.comparisonSourceType;return e===Ui.CustomInput||e===Ui.Dataset&&i.comparisonKey}return!1},i.showDeltaPercentage=function(){return i.property.showDeltaPercentage},i.showDeltaSymbol=function(){return i.property.showDeltaSymbol},i.showDeltaValue=function(){return!0},i.getValueTemplate=function(){var e=i.property,t=e.valueSourceType,a=e.valueCustomInput,n=i.valueKey;return t===Ui.CustomInput?a:"current.parent.items[0].".concat(s_(n))},i.getComparionTemplate=function(){var e=i.property,t=e.comparisonSourceType,a=e.comparisonCustomInput;return t===Ui.CustomInput?a:"current.parent.items[0].".concat(s_(i.comparisonKey))},i.getDeltaValueTemplete=function(){var e=i.getValueTemplate(),t=i.getComparionTemplate(),a=i.getTextTemplateFormat();return"".concat(i.formatFunctionName,"(ABS(").concat(e,"-").concat(t,'), "').concat(a,'")')},i.getDeltaPercentageTemplate=function(){var e=i.getValueTemplate(),t=i.getComparionTemplate();return i.property.calculationMode===H.CalculationMode.Delta?'"(" & '.concat(i.formatFunctionName,"(ABS(").concat(e,"/").concat(t,' - 1),"0.00%") & ")"'):'"(" & '.concat(i.formatFunctionName,"(ABS(").concat(e,"/").concat(t,'),"0.00%") & ")"')},i.getDeltaTemplate=function(){var e="";return(i.showDeltaPercentage()||i.showDeltaValue())&&(e="= ",i.showDeltaValue()&&(e+=i.getDeltaValueTemplete()),i.showDeltaPercentage()&&(e+="".concat(i.showDeltaValue()?"&":"").concat(i.getDeltaPercentageTemplate()))),e},i.getPointPath=function(){return"$"},i.buildValueOverlay=function(){return null};var a=d$.applicationManager.namespace.split("-").join("_");return i.formatFunctionName="".concat(a,"_GCESFORMAT"),i.aggregatedData=i.overwriteAggregatedData(e,t),i.valueKey=i.aggregatedData.profile.value.values[0]&&i.aggregatedData.profile.value.values[0].display,i.comparisonKey=i.aggregatedData.profile.comparisonValue.values[0]&&i.aggregatedData.profile.comparisonValue.values[0].display,i.chartType=H.ChartType.KPI,i.groupName="OVERLAYGROUP",i}return D()(r,[{key:"overwriteAggregatedData",value:function(e,a){var t,n,i=a.valueSourceType===Ui.CustomInput,r=i||!e||!e.profile.value.values.length,o=a.comparisonSourceType===Ui.CustomInput;return r||o?(e?(n=Object(ae.clone)(e.profile),t=e.data.map(function(e){var t=F()({},e);return r&&(t[N_]=i?a.valueCustomInput:0),o&&(t[E_]=a.comparisonCustomInput),t}),r&&(e.profile.value.values[0]?(n.value.values[0].name=N_,n.value.values[0].display=N_):n.value.values.push({name:N_,display:N_,format:"General"})),o&&(e.profile.comparisonValue.values[0]?(n.comparisonValue.values[0].name=E_,n.comparisonValue.values[0].display=E_):n.comparisonValue.values.push({name:E_,display:E_,format:"General"}))):(t=[{}],(n={value:{values:[],options:{}},comparisonValue:{values:[],options:{}},trellisColumns:{values:[],options:{}},trellisRows:{values:[],options:{}}}).value.values.push({name:N_,display:N_,format:"General"}),t[0][N_]=i?a.valueCustomInput:0,o&&(n.comparisonValue.values.push({name:E_,display:E_,format:"General"}),t[0][E_]=a.comparisonCustomInput)),{data:t,profile:n}):e}},{key:"getRuleConditions",value:function(e){for(var t=this.property,a=t.rangeDotsAndColors,n=t.comparisonSourceType,i=t.comparisonCustomInput,r=[],o="".concat(e,".").concat(s_(this.valueKey)),s=n===Ui.CustomInput?"".concat(i):"".concat(e,".").concat(s_(this.comparisonKey)||s_(this.valueKey)),l=1;l<a.rangeDots.length;l++){var u="",c="";c=1===l?(u=a.rangeDotType===zi?"AND(".concat(s," >= 0, ").concat(o," >= ").concat(s," * ").concat(a.rangeDots[l]," / 100)"):"AND(".concat(s," >= 0, ").concat(o," >= ").concat(a.rangeDots[l],")"),a.rangeDotType===zi?"AND(".concat(s," < 0, ").concat(o," <= ").concat(s," * ").concat(a.rangeDots[l]," / 100)"):"AND(".concat(s," < 0, ").concat(o," <= ").concat(a.rangeDots[l],")")):l===a.rangeDots.length-1?(u=a.rangeDotType===zi?"AND(".concat(s," >= 0, ").concat(o," <= ").concat(s," * ").concat(a.rangeDots[l-1]," / 100)"):"AND(".concat(s," >= 0, ").concat(o," <= ").concat(a.rangeDots[l-1],")"),a.rangeDotType===zi?"AND(".concat(s," < 0, ").concat(o," >= ").concat(s," * ").concat(a.rangeDots[l-1]," / 100)"):"AND(".concat(s," < 0, ").concat(o," >= ").concat(a.rangeDots[l-1],")")):(u=a.rangeDotType===zi?"AND(".concat(s," >= 0, ").concat(o," < ").concat(s," * ").concat(a.rangeDots[l-1]," / 100, ").concat(o," > ").concat(s," * ").concat(a.rangeDots[l]," / 100)"):"AND(".concat(s," >= 0, ").concat(o," < ").concat(a.rangeDots[l-1],", ").concat(o," > ").concat(a.rangeDots[l],")"),a.rangeDotType===zi?"AND(".concat(s," < 0, ").concat(o," > ").concat(s," * ").concat(a.rangeDots[l-1]," / 100, ").concat(o," < ").concat(s," * ").concat(a.rangeDots[l]," / 100)"):"AND(".concat(s," < 0, ").concat(o," > ").concat(a.rangeDots[l-1],", ").concat(o," < ").concat(a.rangeDots[l],")")),r.push(u),r.push(c)}return r}},{key:"shouldSetFullBackground",value:function(){var e=this.property,t=this.aggregatedData.profile,a=e.rangeDotsAndColors,n=e.comparisonSourceType;return e.conditionalFormatType===$i&&(a.rangeDotType!==zi||n!==Ui.Dataset||t.comparisonValue.values.length)}},{key:"getDeltaRules",value:function(){var e=this.property,t=e.valueSourceType,a=e.comparisonSourceType,n=e.valueCustomInput,i=e.comparisonCustomInput,r=e.rangeDotsAndColors,o=e.conditionalFormatType,s=e.isMutativeReachedColor;if(o===$i||!1===s)return[];var l=t===Ui.CustomInput?n:"current.parent.items[0].".concat(s_(this.valueKey)),u=a===Ui.CustomInput?i:"current.parent.items[0].".concat(s_(this.comparisonKey)),c=[];if(this.showDeltaSymbol()){var d={condition:"(".concat(l,"-").concat(u,") > 0"),type:"OverlayItem",actions:[{properties:[{name:"symbol.shape",value:"Triangle"}]}]};c.push(d)}for(var p=this.getRuleConditions("current.parent.items[0]"),h=0;h<p.length;h++){var y=[],g=Number.parseInt(h/2,10);o===Qi?(y.push({name:"textStyle.color",value:r.rangeColors[g]}),this.showDeltaSymbol()&&y.push({name:"symbol.style.fill",value:r.rangeColors[g]})):o===Zi&&y.push({name:"style.fill",value:r.rangeColors[g]});var m={condition:p[h],type:"OverlayItem",actions:[{properties:y}]};c.push(m)}return c}},{key:"getSubTitleDisplay",value:function(){var e=this.property,t=e.showSubTitle,a=e.customSubTitle,n=e.valueSourceType;if(t){if(a)return a;if(n===Ui.CustomInput)return null;if(this.aggregatedData.profile.value.values[0].name!=="CustomValue".concat(zo,"Key"))return this.valueKey}return null}},{key:"_buildValueCustomUnit",value:function(){var e=this.property.valueCustomUnit;return e?{type:"Text",text:e,pointPath:this.getPointPath(),groupName:this.groupName,display:"Front",position:"Outside",vAlign:"Bottom",textStyle:F()({},i_(this.property.valueCustomUnitTextStyle),{fontSize:10,_valueCustomUnitFontSize:i_(this.property.valueCustomUnitTextStyle).fontSize,color:this.shouldSetFullBackground()?"white":i_(this.property.valueCustomUnitTextStyle).color}),placement:"Right",_overlayKey:er}:null}},{key:"_buildDeltaLabel",value:function(){return this.showDeltaLabel()?{type:"Text",text:this.getDeltaTemplate(),display:"Front",pointPath:this.getPointPath(),groupName:this.groupName,placement:"Bottom",position:"Outside",groupAlign:this.getHAlign(),symbol:this.showDeltaSymbol()?{shape:this.getSymbolShape(),style:{stroke:"none",fill:this.getDeltaLabelForegroundColor()},width:10,height:10}:void 0,textStyle:F()({},i_(this.property.deltaLabelTextStyle),{fontSize:10,_deltaLabelFontSize:i_(this.property.deltaLabelTextStyle).fontSize,color:this.getDeltaLabelForegroundColor()}),rules:this.getDeltaRules(),_overlayKey:tr}:null}},{key:"_buildSubTitleOverlay",value:function(){var e=this.getSubTitleDisplay();return e?{type:"Text",text:e,pointPath:this.getPointPath(),groupName:this.groupName,display:"Front",position:"Outside",groupAlign:this.getHAlign(),textStyle:F()({},i_(this.property.subTitleTextStyle),{fontSize:10,_subTitleFontSize:i_(this.property.subTitleTextStyle).fontSize,color:this.shouldSetFullBackground()?"white":i_(this.property.subTitleTextStyle).color}),placement:"Top",_overlayKey:ar}:null}},{key:"buildDisplayUnitOverlay",value:function(){var e=Su(this.getDataLabelDisplayUnit());return e?{type:"Text",text:e=Ft("charts.displayUnit.pattern",{unit:e}),pointPath:this.getPointPath(),groupName:this.groupName,display:"Front",position:"Outside",vAlign:"Middle",textStyle:F()({},i_(this.property.dataLabelTextStyle),{fontSize:10,_dataLabelFontSize:i_(this.property.dataLabelTextStyle).fontSize,color:this.shouldSetFullBackground()?"white":i_(this.property.dataLabelTextStyle).color}),placement:"Right",_overlayKey:nr}:null}},{key:"getVAlign",value:function(){return"Middle"}},{key:"getHAlign",value:function(){switch(this.property.contentHAlignment){case Da:return"Left";case ka:return"Center";case wa:return"Right";default:return"Center"}}},{key:"getStyle",value:function(){return{backgroundColor:""}}},{key:"_getFontStyle",value:function(e){switch(e){case yr:return __.FontStyle.Normal;case gr:return __.FontStyle.Italic;default:return __.FontStyle.Normal}}},{key:"_getFontWeight",value:function(e){switch(e){case H.FontWeight.Normal:return __.FontWeight.Normal;case H.FontWeight.Bold:return __.FontWeight.Bold;case H.FontWeight.Lighter:return"100";default:return __.FontWeight.Normal}}},{key:"getText",value:function(){return{textStyle:F()({},i_(this.property.dataLabelTextStyle),{fontSize:0,_dataLabelFontSize:i_(this.property.dataLabelTextStyle).fontSize,color:this.shouldSetFullBackground()?"white":i_(this.property.dataLabelTextStyle).color})}}},{key:"getValues",value:function(){return[{field:"".concat(s_(this.valueKey),":").concat(this.getValueFormat())}]}},{key:"getRules",value:function(){var e=this.property.rangeDotsAndColors;if(this.shouldSetFullBackground()){for(var t=[],a=this.getRuleConditions("current.items[0]"),n=0;n<a.length;n++){var i=Number.parseInt(n/2,10),r={condition:a[n],type:"DataPoint",actions:[{targetElement:"DataPoint",properties:[{name:"style.backgroundColor",value:e.rangeColors[i]}]}]};t.push(r)}return t}}},{key:"getDataLabelDisplayUnit",value:function(){var e=l_("value",this.aggregatedData);return this.property.dataLabelDisplayUnit!==H.DisplayUnit.Auto?this.property.dataLabelDisplayUnit:e}},{key:"getOverlays",value:function(){var e=[],t=this.buildValueOverlay(),a=this._buildValueCustomUnit(),n=this._buildDeltaLabel(),i=this._buildSubTitleOverlay();return t&&e.push(t),a&&e.push(a),n&&e.push(n),i&&e.push(i),e}},{key:"buildPlots",value:function(){return[{type:"Text",name:"p1",encodings:{values:this.getValues(),layout:this.getLayout()},config:{vAlign:this.getVAlign(),hAlign:this.getHAlign(),style:this.getStyle(),text:this.getText(),rules:this.getRules(),trellis:{style:{stroke:this.property.trellisBorderColor},textStyle:i_(this.property.trellisTextStyle),hoverStyle:{},includeAxesInCells:!0,includeEmptyCells:!0,padding:this.property.trellisPadding},overlays:this.getOverlays()}}]}},{key:"buildDatas",value:function(){var e=this.aggregatedData.data,a=this.getSortFn(this.sortTable);return e.map(function(e){var t=F()({},e);return a(t),t})}},{key:"buildConfig",value:function(){return{selectionMode:this.property.singleSelection?__.SelectionMode.Point:__.SelectionMode.Points,selectedTextStyle:{opacity:1},textStyle:i_(this.property.axisTextStyle),unselectedTextStyle:{opacity:.2}}}}]),r}(function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e,t)).sortTable=a._getSortTable(),a.trellisColumnCellsNum=a._getTrellisCellsNum("trellisColumns"),a.trellisRowCellsNum=a._getTrellisCellsNum("trellisRows"),a}return D()(i,[{key:"_getTrellisCellsNum",value:function(t){if(this.aggregatedData){var e=this.aggregatedData,a=e.data,n=e.profile;if(0<n[t].values.length){var i={};return a.forEach(function(a){var e=n[t].values.reduce(function(e,t){return"".concat(e,"_").concat(a[t.display])},"");i[e]||(i[e]=!0)}),Object.keys(i).length}}return 0}},{key:"_getSortTable",value:function(){if(this.aggregatedData){var t=this.aggregatedData.sort,e={trellisColumns:this.aggregatedData.profile.trellisColumns.values.map(function(e){return e&&e.display}),trellisRows:this.aggregatedData.profile.trellisRows.values.map(function(e){return e&&e.display})};return ae.mapObjIndexed(function(e){return nl(t,e)},e)}}},{key:"getSortFn",value:function(r){return r?function(i){[["trellisColumns","trellisColumnSortField"],["trellisRows","trellisRowSortField"]].forEach(function(e){var t=N()(e,2),a=t[0],n=t[1];r[a]&&(i[n]=r[a](i))})}:function(e){return e}}},{key:"getLayout",value:function(){var e=this.aggregatedData.profile,a=this.property;if(0<e.trellisColumns.values.length||0<e.trellisRows.values.length){var t=e.trellisColumns.values.map(function(e){var t="".concat(s_(e.display),":").concat(s_(e.format));return xu({format:t,emptyString:a.emptyItemsString,nullString:a.nullItemsString})}).join(">"),n=e.trellisRows.values.map(function(e){var t="".concat(s_(e.display),":").concat(s_(e.format));return xu({format:t,emptyString:a.emptyItemsString,nullString:a.nullItemsString})}).join(">"),i={type:"Trellis",field:"".concat(t,",").concat(n)};return 0<e.trellisRows.values.length&&(i.rowSort={order:"Ascending",field:"trellisRowSortField"}),0<e.trellisColumns.values.length&&(i.columnSort={order:"Ascending",field:"trellisColumnSortField"}),i}return{type:"Default"}}},{key:"getConfig",value:function(){var e=C()(b()(i.prototype),"getConfig",this).call(this);return F()({},e,{trellisColumnCellsNum:this.trellisColumnCellsNum,trellisRowCellsNum:this.trellisRowCellsNum})}}]),i}(LW)),VW=function(e){k()(n,e);var a=w()(n);function n(e,t){var u;return I()(this,n),(u=a.call(this,e,t))._buildPointerOverlay=function(){var e="current.parent.items[0].".concat(s_(u.valueKey));return u.property.gaugeAxisType===Ki&&(e+="/current.parent.items[0].".concat(s_(u.comparisonKey||u.valueKey))),{type:"Needle",display:"Front",start:"center",end:'="-0.5," & TEXT('.concat(e,', "")'),width:4.5,attachment:"PlotCoordinate",style:{stroke:"none",fill:u.property.pointerColor},_overlayKey:ir}},u._buildCalibrationOverlays=function(){var e=u.property,t=e.calibrationType,a=e.gaugeAxisType,n=e.valueAxisFormat,i=u._getAxesDisplayUnit(),r=[],o=u.property.rangeDotsAndColors.rangeDots.length;if(t===Bi&&0<o)for(var s=a===ji?c_(n,i,u.aggregatedData,"value"):"0%",l=0;l<o;l++)r.push({type:"Text",display:"Front",pointPath:"-0.5,0",position:"Inside",angle:0,placement:"Bottom",text:"= ".concat(u.formatFunctionName,"(current.parent.items[0].").concat(F_).concat(l,', "').concat(s,'")'),textStyle:F()({},i_(u.property.axisTextStyle)),rules:[{condition:"true",type:"OverlayItem",actions:[{properties:[{name:"coordinateValue.y",value:"= current.parent.items[0].".concat(F_).concat(l)}]}]}],_overlayKey:rr});return r},u._getYAxisFormat=function(){var e=u.property,t=e.valueAxisFormat,a=e.gaugeAxisType,n=u._getAxesDisplayUnit(),i=t;return a===Ki&&(i="0%"),c_(i,n,u.aggregatedData,"value")},u.shouldSetFullBackground=function(){return!1},u.showDeltaLabel=function(){return u.property.showDeltaLabel},u.showDeltaValue=function(){return u.property.showDeltaValue},u.getComparionTemplate=function(){var e=u.property,t=e.comparisonSourceType,a=e.comparisonCustomInput,n="current.parent.items[0].".concat(s_(u.comparisonKey));return u.comparisonKey||u.property.comparisonSourceType!==Ui.Dataset?t===Ui.CustomInput&&(n=a):n=u.getValueTemplate(),n},u.getPointPath=function(){return"center"},u.buildValueOverlay=function(){return{type:"Text",text:u.hasTrellis?"=".concat(u.formatFunctionName,"(current.parent.parent.parent.items[0].").concat(s_(u.valueKey),', "').concat(u.getTextTemplateFormat(),'")'):"=".concat(u.formatFunctionName,"(current.parent.items[0].").concat(s_(u.valueKey),', "').concat(u.getTextTemplateFormat(),'")'),display:"Front",pointPath:u.getPointPath(),groupName:u.groupName,angle:0,offset:"0, 0",position:"Center",groupAlign:u.getHAlign(),textStyle:F()({},i_(u.property.dataLabelTextStyle),{fontSize:10,_dataLabelFontSize:i_(u.property.dataLabelTextStyle).fontSize,overflow:__.TextOverflow.Wrap}),_overlayKey:or}},u.buildDisplayUnitOverlay=function(){return null},u.getPlugins=function(){if(u.hasTrellis)return[{type:"CoordinateSystemLayout",name:"Gauge"}]},u.chartType=H.ChartType.Gauge,u.hasTrellis=e&&e.profile&&(e.profile.trellisColumns.values.length||e.profile.trellisRows.values.length),u.graphOpacity=t.graphOpacity,u}return D()(n,[{key:"_getAxesDisplayUnit",value:function(){var e=l_("value",this.aggregatedData);return this.property.valueAxisDisplayUnit!==H.DisplayUnit.Auto?this.property.valueAxisDisplayUnit:e}},{key:"getHAlign",value:function(){return"Center"}},{key:"buildDatas",value:function(){for(var r=this,o=this.property,a=this.getSortFn(this.sortTable),s=this.aggregatedData.data.map(function(e){var t=F()({},e);return a(t),t}),l=[],e=function(n){var e=s[n][r.valueKey],t=r.comparisonKey?s[n][r.comparisonKey]:e;o.comparisonSourceType===Ui.CustomInput&&(t=o.comparisonCustomInput);var a=o_({value:e,comparisonValue:t},o),i={};a.realDots.forEach(function(e,t){i["".concat(F_).concat(t)]=e}),a.ranges.forEach(function(e,t){var a={};a[M_]="range_".concat(t),a[L_]=e,l.push(F()({},a,{},s[n],{},i))}),l.push(s[n])},t=0;t<s.length;t++)e(t);return l}},{key:"buildPlots",value:function(){var e=this.property;return[{type:"Bar",name:"p1",encodings:{values:[{field:L_}],layout:this.getLayout(),details:{field:M_,group:"Stack"}},config:{style:{},innerRadius:e.innerRadius/100,startAngle:e.startAngle,sweep:e.sweep,axisMode:"Radial",trellis:{style:{stroke:this.property.trellisBorderColor},textStyle:i_(this.property.trellisTextStyle),hoverStyle:{},includeAxesInCells:!0,includeEmptyCells:!0,padding:e.trellisPadding},overlays:[this._buildPointerOverlay()].concat(R()(this._buildCalibrationOverlays()),R()(this.getOverlays()))}}]}},{key:"buildConfig",value:function(){var t=this,e=this.property,a=e.rangeDotsAndColors.rangeColors;return{palette:[].concat(R()(ae.reverse(a)),R()(a),R()(ae.reverse(a)),R()(a)).map(function(e){return Lc(e,t.graphOpacity)}),bar:{width:.9},textStyle:F()({},i_(this.property.axisTextStyle)),selectionMode:this.property.singleSelection?__.SelectionMode.Point:__.SelectionMode.Points,selectedStyle:{adorners:!1,opacity:1,symbolOpacity:1},unselectedStyle:{adorners:!1,opacity:.2,strokeWidth:0,symbolOpacity:.2,symbolStrokeWidth:0},plotAreas:[{axes:[{plots:["p1"],type:"X",position:"None"},{plots:["p1"],type:"Y",title:"",format:this._getYAxisFormat(),position:e.calibrationType===Hi?"Far":"None",useActualMax:!0,useActualMin:!0}],plugins:this.getPlugins()}]}}}]),n}(RW),NW=Ui,EW=H.ChartType,FW=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e,t))._getIndicatorRanges=function(e,t){var a=[],n=e.value,i=e.comparisonValue,r=t.rangeDotsAndColors,o=t.gaugeAxisType,s=t.isMutativeReachedColor,l=r_(e,r,o),u=function(){if(s)return{min:l[0],max:ae.last(l)};var e=0<i?0:i,t=0<i?i:0;return t<n?t=n:n<e&&(e=n),{min:e,max:t}}(),c=u.min,d=u.max;if(s){for(var p=function(e,t){for(var a=e.value,n=e.comparisonValue,i=0,r=ae.reverse(t),o=r.length,s=1,l=o;s<l;s++)if(a>=r[s]){i=0<=n?s-1:o-s-1;break}return i}(e,l),h=0;h<r.rangeColors.length;h++){var y=p===h?n-c:0;a.push({range:y})}a.push({range:d-n})}else a.push({range:n-c}),a.push({range:d-n});return{ranges:a,max:d,min:c,realDots:l}},a.shouldSetFullBackground=function(){return!1},a.showDeltaPercentage=function(){return!0},a.showDeltaSymbol=function(){return!1},a.showDeltaValue=function(){return!1},a.getDeltaLabelForegroundColor=function(){return a.property.reachedColor},a.getDeltaPercentageTemplate=function(){var e=a.getValueTemplate(),t=a.getComparionTemplate();return a.comparisonKey||a.property.comparisonSourceType!==NW.Dataset||(t=e),"".concat(a.formatFunctionName,"(ABS(").concat(e,"/").concat(t,'),"0.00%")')},a.chartType=EW.Indicator,a.cornerRadius=t.cornerRadius,a.graphOpacity=t.graphOpacity,a}return D()(i,[{key:"buildDatas",value:function(){for(var a=this,i=this.property,n=this.getSortFn(this.sortTable),r=this.aggregatedData.data.map(function(e){var t=F()({},e);return n(t),t}),o=[],e=function(n){var e=r[n][a.valueKey],t=a.comparisonKey?r[n][a.comparisonKey]:e;i.comparisonSourceType===NW.CustomInput&&(t=i.comparisonCustomInput),a._getIndicatorRanges({value:e,comparisonValue:t},i).ranges.forEach(function(e,t){var a={};a[R_]="range_".concat(t),a[V_]=e.range,o.push(F()({},a,{},r[n]))}),o.push(r[n])},t=0;t<r.length;t++)e(t);return o}},{key:"buildPlots",value:function(){var e=this.property;return[{type:"Bar",name:"p1",encodings:{values:[{field:V_}],layout:this.getLayout(),details:{field:R_,group:"Stack"}},config:{style:{},innerRadius:e.innerRadius/100,startAngle:e.startAngle,sweep:e.sweep,axisMode:"Radial",trellis:{style:{stroke:this.property.trellisBorderColor},textStyle:i_(this.property.trellisTextStyle),hoverStyle:{},includeAxesInCells:!0,includeEmptyCells:!0,padding:e.trellisPadding},overlays:this.getOverlays()}}]}},{key:"buildConfig",value:function(){var t=this,e=this.property,a=e.reachedColor,n=e.unreachedColor,i=e.isMutativeReachedColor,r=e.rangeDotsAndColors.rangeColors,o=[];return i?o=r.map(function(e){return Lc(e,t.graphOpacity)}):o.push(Lc(a,this.graphOpacity)),o.push(Lc(n,this.graphOpacity)),{palette:o,bar:{borderRadius:"".concat(this.cornerRadius,"px"),width:1},selectionMode:this.property.singleSelection?__.SelectionMode.Point:__.SelectionMode.Points,selectedStyle:{adorners:!1,opacity:1,symbolOpacity:1},textStyle:i_(e.axisTextStyle),unselectedStyle:{adorners:!1,opacity:.2,strokeWidth:0,symbolOpacity:.2,symbolStrokeWidth:0},plotAreas:[{axes:[{plots:["p1"],type:"X",position:"None"},{plots:["p1"],type:"Y",title:"",position:"None",min:0,useActualMax:!0}],plugins:this.getPlugins()}]}}}]),i}(VW),OW=function(e){k()(r,e);var i=w()(r);function r(e,t,a,n){var l;return I()(this,r),(l=i.call(this,e,t,a)).getColorField=function(){return s_(l.aggregatedData.profile.color.values[0]&&l.aggregatedData.profile.color.values[0].display)},l.getAreaField=function(){return s_(l.aggregatedData.profile.area.values[0]&&l.aggregatedData.profile.area.values[0].display)},l.getTextField=function(){var e=[];return e.push({field:l.getAreaField()}),e.push({field:l.getColorField()}),e},l.getLabelTemplate=function(e){var t;if(!e)return"";var a=e.dataLabelArea,n=e.dataLabelColor,i=e.dataLabelDisplayUnit,r=null===(t=l.aggregatedData.profile.color)||void 0===t?void 0:t.values[0].format,o=c_(r,i,l.aggregatedData,"color"),s=l.aggregatedData.profile.area.values[0]&&l.aggregatedData.profile.area.values[0].format;return n&&!a?"{".concat(l.getColorField(),".value: ").concat(o,"}"):!n&&a?"{".concat(l.getAreaField(),".value: ").concat(s,"}"):n&&a?"{".concat(l.getAreaField(),".value: ").concat(s,"}, {").concat(l.getColorField(),".value: ").concat(o,"}"):""},l.getText=function(){return l.property.dataLabel?{overlappingLabels:S_(l.property),scope:"Default",template:l.getLabelTemplate(l.property)}:{scope:"Default",template:""}},l.getPlotConfigRules=function(){var e,t,a=fM(l.pivotSettingHelper),n=MM(l.pivotSettingHelper),i=[tl(null===(e=l.aggregatedData.profile.color)||void 0===e?void 0:e.values[0]),tl(null===(t=l.aggregatedData.profile.area)||void 0===t?void 0:t.values[0])];return l.property.conditionalFormat.filter(function(t){return n.find(function(e){return Bo.a.isEqual(e.field,t.field)})}).filter(function(e){return ae.any(ae.equals(e.fieldIdentifier))(i)}).map(function(t){return{condition:_M(t,ae.head(n.filter(function(e){return ae.equals(e.fieldIdentifier,t.fieldIdentifier)})).display,a),type:"DataPoint",actions:DM(H.ChartType.FloorPlan,t.extendsStyle,l.getLabelTemplate(t.extendsStyle.labelStyle))}})},l.buildLegend=function(){var e=l.property,t=e.legendPosition,a=e.legend,n=e.legendWrap,i=e.legendTextStyle;return{position:a?t:"None",titlePosition:rM(t),wrapping:n,padding:lM(t),orientation:tM(t),textStyle:Object.assign({},i_(i))}},l._getPalette=function(){var e=l.property,t=e.useLevelColor,a=e.gradientColor,n=e.graphOpacity,i=l.palette;l._enabledGradient()&&(i=t?oj(a,l._getLegendRanges().length,n):[Lc(a,0),Lc(a,n)]);return i},l._enabledGradient=function(){var e,t=l.property.usePalette,a=l.aggregatedData,n=a.data,i=null===(e=a.profile.color)||void 0===e?void 0:e.values[0].display,r=n.find(function(e){return null!=e[i]});return!t&&r&&"number"==typeof r[i]},l._getLegendRanges=function(){var e,t=l.property,a=t.gradientColorGroupNumber,n=t.useLevelColor,i=l.aggregatedData,r=i.data,o=i.profile;if(l._enabledGradient()&&n){var s=ij(r,null===(e=o.color)||void 0===e?void 0:e.values[0].display);return rj(a,s.max,s.min)}return null},l.chartType=H.ChartType.FloorPlan,l.palette=n,l}return D()(r,[{key:"buildPlots",value:function(){return[{type:"Map",encodings:{values:{field:this.getColorField()},color:{field:this.getColorField()},details:[{field:this.getAreaField()}],text:this.getTextField()},config:{plugins:[{type:"BackgroundImage",name:"Default",arguments:{src:vW.imageSrc}}],zoom:{enableMouseWheel:!0,enableMouseDoubleClick:!1},graphJson:vW.graphJson,viewport:[vW.graphBBox.x,vW.graphBBox.y,vW.graphBBox.width,vW.graphBBox.height],text:this.getText(),rules:this.getPlotConfigRules(),style:{stroke:this.property.areaBorderColor},textStyle:Object.assign({},i_(this.property.dataLabelTextStyle)),hoverStyle:{opacity:.8,strokeWidth:2},hoverAnimation:!0}}]}},{key:"buildLegends",value:function(){var e,t=this.property,a=t.showLegendName,n=t.legendPosition,i=t.legendWidth,r=t.legendHeight,o=t.legendAutoSize,s=t.legendVAlign,l=t.legendHAlign;return Object.assign(Object.assign(Object.assign({type:"Color",title:a?null===(e=this.aggregatedData.profile.color.values[0])||void 0===e?void 0:e.display:""},iM(n,i,r,o)),aM(s,l)),{gradient:{enabled:this._enabledGradient()},ranges:this._getLegendRanges()})}},{key:"buildConfig",value:function(){var e={legend:this.buildLegend(),legends:this.buildLegends()};return{selectionMode:this.getSelectionMode(),selectedStyle:this.getSelectedStyle(),unselectedStyle:this.getUnselectedStyle(),plotAreas:[e],palette:this._getPalette()}}},{key:"buildDatas",value:function(){return this.aggregatedData.data}},{key:"getConfig",value:function(){var e=C()(b()(r.prototype),"getConfig",this).call(this);return Object.assign(Object.assign({},e),{_automaticCarousel:this.property.automaticCarousel,_carouselInterval:this.property.carouselInterval})}}]),r}(LW),HW=H.ChartType,BW=["contentTextStyle","axisTextStyle","dataLabelTextStyle","legendTextStyle","subTitleTextStyle","valueCustomUnitTextStyle","deltaLabelTextStyle","valueAxisTextStyle","trellisTextStyle"];function UW(e,t,a,n,i,r){var o,s=5<arguments.length&&void 0!==r?r:1,l=e.chartType,u=function(e,t){if(null==e)return e;var a,n,i=e.data,r=e.profile,o=e.seriesTotalData,s=[];return Object.keys(r).forEach(function(e){r[e].values.forEach(function(e){Jr.isDate(e)&&Jr.isGroupingItem(e)&&s.push(e.display)})}),0<s.length?(a=t===HW.Composite?{leftValues:i.leftValues?F()({},i.leftValues,{data:DW(s,i.leftValues.data)}):i.leftValues,rightValues:i.rightValues?F()({},i.rightValues,{data:DW(s,i.rightValues.data)}):i.rightValues}:DW(s,i),o&&(n=DW(s,o)),F()({},e,{data:a,seriesTotalData:n})):e}(a,l),c=Xc(t,BW,s);if([HW.Gauge,HW.KPI,HW.Indicator].includes(l))return(o=new(l===HW.KPI?RW:l===HW.Gauge?VW:FW)(u,c)).getConfig();if(l===HW.FloorPlan)return(o=new OW(u,c,n,i)).getConfig();var d=n.getAllUsedColumnsDisplayMapping();if(l===HW.Composite){var p={profile:u.profile,sort:u.sort,data:[]};o=new MW(p,d,u.data,u.affectValue,c)}else{var h=Us.showTopN(e),y=Us.topN(e),g=u;try{h&&y&&(g=Jz(u,n,y,e.id))}catch(e){nu.error(e)}o=new IW(l,g,d,c)}return function(e,t,a,n,i,r,o){var s,l=n.getPivotSetting(),u=oh()(t,{pivot:{pivotSetting:{$set:l}}}),c=e.schema,d=c.seriesAxis,p=c.transformedPivot,h=c.leftChartType,y=c.rightChartType,g=u.options,m=u.chartType,f=p.values.length,v=p.values2.length,b=p.values3.length,C=p.series.length;if([H.ChartType.DisaggregateScatter,H.ChartType.Bubble].includes(u.chartType)&&(0===v||0===b))return{};var T=!1;if(u.chartType===H.ChartType.Composite){switch(d){case ci.Left:T=!(1<f+v||0<f);break;case ci.Right:T=!(1<f+v||0<v)}s=AM(e,F()({},g,{property:a}),{plotChartType:h,scenarioChartType:t.chartType},T,r),s=IM(s,{schema:e.schema,scenario:u,rightChartType:y,leftChartType:h,valuesCount:f,values2Count:v,aggregatedData:r})}else if(u.chartType===H.ChartType.Sunburst)s=AM(e,F()({},g,{property:a}),{plotChartType:m,scenarioChartType:t.chartType},T,r);else{if(u.drillState&&0<u.drillState.count)T=f<2;else if(u.chartType===H.ChartType.Bubble){g.property.showSizeBubble||(T=0===C)}else T=0===C&&f<2;s=AM(e,F()({},g,{property:a}),{plotChartType:m,scenarioChartType:t.chartType},T,r)}if(s=PM(r,e.schema,s,u,n,o),s=XK(s,u,n),s=bj(s,u,n),r.seriesTotalData){var S=a.seriesTotalColor,D=a.seriesTotalDisplay;if(null!=S){var k={data:D,color:S};i.push(k)}}s.config.palette=i,s._automaticCarousel=g.property.automaticCarousel,s._carouselInterval=g.property.carouselInterval;return s._modelDepth=function(){var e=ae.path(["profile","details","values"],r);if(H.ChartType.Sunburst===u.chartType){if(e&&1<e.length)return r.profile.details.values.length}else if(H.ChartType.TreeMap===u.chartType)return e&&e.length}(),s}({data:o.getConfig(),schema:o.getSchema()},e,c,n,i,u,s)}function zW(e,t,a,n,i,r){var o,s;if(e)if(t===_C.Map){if(a.mapTile.maintainColorAssignments){var l=zc(t,e,"mapTile");if(l){var u=l.columns,c=l.type;o=r.getDataColorRelationships(n.datasetId,c,u,i)}}if(a.scatter.maintainColorAssignments){var d=zc(t,e,"scatter");if(d){var p=d.columns,h=d.type;s=r.getDataColorRelationships(n.datasetId,h,p,i)}}}else if(a.maintainColorAssignments){var y=zc(t,e);if(y){var g=y.columns,m=y.type;o=r.getDataColorRelationships(n.datasetId,m,g,i)}}return{dataColorRelationships:o,dataColorRelationshipsForMapScatter:s}}function KW(e,t,a){var n=e,i=t===H.DisplayUnit.Auto?a:t;return t===H.DisplayUnit.Auto&&i!==H.DisplayUnit.None&&"General"===e&&(n="0.0"),[n,i].join(zo)}function jW(e){if(!e.dataLabel)return"";var t=e.dataLabelDisplayUnit,a=e.autoDisplayUnit,n=[];return e.dataLabelLocation&&e.location&&n.push("{".concat(s_(e.location),"}")),e.dataLabelSize&&e.size&&n.push("{sizeField.value:".concat(KW(e.sizeFormat,t,a),"}")),e.dataLabelColor&&e.color&&n.push("{colorField.value:".concat(KW(e.colorFormat,t,a),"}")),e.dataLabelShape&&e.shape&&n.push("{shapeField.value:".concat(KW(e.shapeFormat,t,a),"}")),n.join("\n")}var WW=function(e){k()(n,e);var a=w()(n);function n(e,t){var r;return I()(this,n),(r=a.call(this,e)).getColorRelationships=function(e){var t=r.data.chartType,a=r.context.property,n=r.data.pivot,i=r.context.docTheme;return zW(e,t,a,n,i,r.context.colorAssignmentManager)},r.context=t,r}return D()(n,[{key:"buildRes",value:function(e,t){var a=e,n=t,i=this.data.chartType,r=this.context.property,o=this.context.docTheme,s=!1;if(!a&&!this.hasCustomInput(r)){s=!0;var l=SW(i);n=l.pivotSettingHelper,a=l.data}n.setOption({nullString:r.nullItemsString,emptyString:r.emptyItemsString});var u=this.getColorRelationships(a).dataColorRelationships;return{aggregatedData:s?void 0:a,config:UW(Object.assign(Object.assign({},this.data),{options:Object.assign(Object.assign({},this.data.options),{property:r})}),r,a,n,tj(r,i,a,u,o),this.context.scale)}}},{key:"hasCustomInput",value:function(e){return e.valueSourceType===Ui.CustomInput||e.comparisonSourceType===Ui.CustomInput}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),n}(eO),GW="colorGradient",YW="bubble",qW="latLong";function JW(e){var t=e.legendPosition,a=e.legendWidth,n=e.legendHeight,i=e.legendAutoSize;return iM(t,a,n,i)}function XW(e){var t=e.legendVAlign,a=e.legendHAlign;return aM(t,a)}function QW(t){return function(e){return ae.compose(e,t)}}function ZW(a){return function(e){if(null==e)return e;var t=E()(e);return"function"===t?a(e):Array.isArray(e)?e.map(ZW(a)):"object"===t?ae.map(ZW(a),e):e}}function $W(e){var t=e.legendTextStyle;return i_(t)}function eG(e){return e.palette}function tG(n){var e=n.conditionalFormat,i=n.fieldsWithIdentifier,r=n.comparedValueFields,t=n.plotType,o=n.autoDisplayUnit,s=t!==GW;return e.filter(function(e){return ae.any(ae.equals(e.fieldIdentifier))(i.map(function(e){return e.fieldIdentifier}))}).map(function(t){var e="";if(t.extendsStyle.labelStyle){var a=F()({dataLabel:t.extendsStyle.labelStyle.showLabel,autoDisplayUnit:o,location:n.location,size:n.size,sizeFormat:n.sizeFormat,color:n.color,colorFormat:n.colorFormat,shape:n.shape,shapeFormat:n.shapeFormat},t.extendsStyle.labelStyle);e=jW(a)}return{condition:_M(t,ae.head(i.filter(function(e){return ae.equals(e.fieldIdentifier,t.fieldIdentifier)})).display,r),type:"DataPoint",actions:DM(H.ChartType.Map,t.extendsStyle,e,s)}})}function aG(e){var t=e.scatter.dataLabelTextStyle;return F()({},i_(t),{position:__.TextPosition.Center})}function nG(e){var t=e.location;return s_(t)}function iG(e){var t=e.color,a=e.colorFormat;return t&&"".concat(s_(t),":").concat(s_(a))}function rG(e){var t=e.shape,a=e.shapeFormat;return t&&"".concat(s_(t),":").concat(s_(a))}function oG(e){var t=e.size,a=e.sizeFormat;return t&&"".concat(s_(t),":").concat(s_(a))}function sG(e){var t=e.long,a=e.lat;return"".concat(s_(t),", ").concat(s_(a))}function lG(e){return F()({type:"Color",title:e.showLegendName?void 0:"",ranges:e.ranges,gradient:{enabled:!e.discrete}},JW(e),{},XW(e))}function uG(e){return F()({type:"Size"},JW(e),{},XW(e))}function cG(e){return F()({type:"Shape"},JW(e),{},XW(e))}function dG(e){var t=e.color,a=e.colorFormat;return t&&"".concat(t,":").concat(a)||"VALUESNAME"}function pG(e,t,a){return ae.compose(ae.set(ae.lensPath(["plots",1,"config","textStyle"]),a(aG)),ae.set(ae.lensPath(["plots",1,"config","rules"]),a(tG)),ae.over(ae.lensPath(["config","plotAreas",0,"legends"]),ae.append(a(lG))),ae.over(ae.lensPath(["config","plotAreas",0,"legends"]),ae.append(a(uG))),ae.over(ae.lensPath(["config","plotAreas",0,"legends"]),ae.append(a(cG))),ae.over(ae.lensPath(["config","plotAreas",0,"axes",0,"plots"]),ae.append(e)),ae.over(ae.lensPath(["plots"]),ae.append(t(e))))}function hG(n,e,t,a){var i=bG;n.colorGradient&&(i=TG(i)),n.bubble&&(i=SG(i)),n.latLong&&(i=DG(i)),n.common.comparedValueFields=t;var r=function e(t){if(null==t)return t;var a=E()(t);return"function"===a?e(t(n)):Array.isArray(t)?t.map(e):"object"===a?ae.map(e,t):t}(i);if(r=ae.set(ae.lensPath(["data"]),e,r),a){var o=[{type:"Path",display:"Front",path:"M 781.8926 692.3173 L 790.552 701.8426 L 800.4485 702.7086 L 819.0045 696.647 L 833.8492 688.8535 L 846.2198 688.8535 L 851.1681 697.5129 L 854.8793 688.8535 L 861.0646 688.8535 L 861.0646 687.9875 L 788.0779 687.9875 L 781.8926 692.3173 Z M 797.9744 707.9042 L 805.3968 706.1724 L 801.6856 714.8318 L 795.5003 716.5637 L 797.9744 707.9042 Z M 796.7373 727.8209 L 799.2115 735.6144 L 800.4485 735.6144 L 797.9744 727.8209 L 796.7373 727.8209 Z M 801.6856 746.8717 L 796.7373 753.7993 L 797.9744 753.7993 L 804.1597 746.8717 L 801.6856 746.8717 Z M 789.315 767.6544 L 791.7891 774.5819 L 793.0262 774.5819 L 791.7891 767.6544 L 789.315 767.6544 Z M 810.345 790.1689 L 817.7674 786.7051 L 819.0045 786.7051 L 812.8192 790.1689 L 810.345 790.1689 Z M 827.6639 775.4478 L 835.0863 765.0565 L 836.3233 765.0565 L 830.138 775.4478 L 827.6639 775.4478 Z M 841.2716 751.2014 L 844.9828 744.2739 L 847.4569 744.2739 L 843.7457 751.2014 L 841.2716 751.2014 Z M 844.9828 731.2847 L 844.9828 723.4912 L 847.4569 723.4912 L 847.4569 731.2847 L 844.9828 731.2847 Z M 846.2198 715.6977 L 849.931 709.6361 L 851.1681 709.6361 L 847.4569 715.6977 L 846.2198 715.6977 Z M 853.6422 703.5745 L 858.5905 696.647 L 859.8275 696.647 L 856.1163 703.5745 L 853.6422 703.5745 Z M 781.8926 692.3173 L 781.8926 803.158 L 861.0646 803.158 L 861.0646 687.9875 L 859.8275 687.9875 L 859.8275 802.2921 L 783.1297 802.2921 L 783.1297 692.3173 L 781.8926 692.3173 Z",location:[127.0975,26.9896],width:.13,height:.2,style:{fill:"transparent",stroke:n.common.regionalBorderColor,strokeWidth:.8}}];r=ae.set(ae.lensPath(["plots",0,"config","overlays"]),o,r)}return r}var yG=ZW(QW(function(e){return e.common})),gG=ZW(QW(function(e){return F()({},e.common,{},e.colorGradient,{plotType:GW})})),mG=ZW(QW(function(e){return F()({},e.common,{},e.bubble,{plotType:YW})})),fG=ZW(QW(function(e){return F()({},e.common,{},e.latLong,{plotType:qW})})),vG={position:__.TextPosition.Center,scope:"Default",template:jW,overlappingLabels:S_},bG=yG({plots:[{name:"p1",data:"mapData",type:"Map",config:{map:{projection:function(e){return e.projection},hAlign:"Center",style:{fill:"transparent",stroke:function(e){return e.regionalBorderColor}}},hoverStyle:{opacity:.8}}}],config:{textStyle:function(e){var t=e.contentTextStyle;return i_(t)},legend:{textStyle:$W},plotAreas:[{axes:[{plots:["p1"]}],legend:{position:function(e){var t=e.legend,a=e.legendPosition;return t?a:"None"},titlePosition:function(e){var t=e.showLegendName,a=e.legendPosition;return t?rM(a):"None"},wrapping:function(e){return e.legendWrap},orientation:function(e){var t=e.legendPosition;return tM(t)},hoverStyle:$W},legends:[]}],selectionMode:eM,selectedStyle:{adorners:!1,opacity:1,symbolOpacity:.8,strokeWidth:1},unselectedStyle:{adorners:!1,opacity:.2,symbolOpacity:.2,symbolStrokeWidth:0,strokeWidth:0},palette:eG},data:{name:"dvmap",dateFormats:!1},renderMethod:"Canvas"}),CG={details:[{field:nG}],text:[{field:nG},{field:iG}],values:[{field:iG}],color:{field:iG,aggregate:__.Aggregate.List}},TG=ae.compose(ae.set(ae.lensPath(["plots",0,"config","rules"]),gG(tG)),ae.set(ae.lensPath(["plots",0,"config","text"]),gG(vG)),ae.set(ae.lensPath(["plots",0,"encodings"]),gG(CG)),ae.set(ae.lensPath(["plots",0,"config","textStyle"]),gG(function(e){var t=e.mapTile.dataLabelTextStyle;return F()({},i_(t),{position:__.TextPosition.Center})})),ae.set(ae.lensPath(["plots",0,"config","palette"]),gG(eG)),ae.over(ae.lensPath(["config","plotAreas",0,"legends"]),ae.append(gG(lG)))),SG=pG("p2",function(e){return mG({name:e,data:"mapScatterData",type:"Scatter",encodings:{details:[{field:nG}],size:{field:oG},shape:{field:rG,aggregate:__.Aggregate.List},color:{field:dG,aggregate:__.Aggregate.List},text:[{field:nG},{field:oG},{field:iG},{field:rG}]},config:{style:{symbolOpacity:.8},hoverStyle:{symbolOpacity:.7},text:vG,palette:eG}})},mG),DG=pG("p3",function(e){return fG({name:e,data:"mapScatterData",type:"Scatter",encodings:{values:[{field:sG}],size:{field:oG},shape:{field:rG,aggregate:__.Aggregate.List},color:{field:dG,aggregate:__.Aggregate.List},text:[{field:nG},{field:oG},{field:iG},{field:rG}]},config:{style:{symbolOpacity:.8},hoverStyle:{symbolOpacity:.7},text:vG,palette:eG}})},fG);function kG(t,e){if(t.location){var a=e.find(function(e){return e.properties.name===t.location.identify||e.properties.NAME===t.location.identify});if(a)return a.properties}}function wG(e){var a=e.items?e.items[0]:{};return Object.keys(a).reduce(function(e,t){return e.push({display:t,value:a[t]}),e},[])}var xG=function(e){return e.location&&e.location.identify};function AG(e,t,a,n){var i=a.map(function(e){return kG(e,n)}).filter(function(e){return e}),r=kG(t,n),o=a.map(function(e){return xG(e)}).filter(function(e){return e}),s=!r;s=s&&a.length!==o.length;var l=!(!o.length||o.length===a.length);return{point:{x:e.originalEvent.clientX,y:e.originalEvent.clientY},data:wG(t),geo:r,selected:t.selected,selectedArea:i,selectedAreaWithMeasure:a.map(function(e){return wG(e)}),inLatLong:s,latLong:{latitude:t.__data&&t.__data.latitude,longitude:t.__data&&t.__data.longitude},isSelectMixedModels:l}}var IG=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},PG=function(e){k()(n,e);var a=w()(n);function n(e,t){var r;return I()(this,n),(r=a.call(this,e)).buildDvMapConfig=function(f,v){return IG(RB()(r),void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p,h,y,g,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.context.config||{},a=t.aggregatedData,n=this.getPivotSettingHelper(this.getDatasetId(),this.data),i=this.context.scale,r=this.context.property,o=this.context.docTheme,s=Xc(r,["legendTextStyle","mapTile.dataLabelTextStyle","scatter.dataLabelTextStyle"],i),l={textStyle:Jc("10px",i),docTheme:o,palette:[],pivotSettingHelper:n},u=this.getColorRelationships(a),c=u.dataColorRelationships,d=u.dataColorRelationshipsForMapScatter,p=pj(a,s,l,c,d),h=(a||[]).reduce(function(e,t){return t&&e.push({dateFormats:!1,values:t.data,name:t.profile&&"map"===t.profile.name?"mapData":"mapScatterData"}),e},[]),y=fM(this.getPivotSettingHelper(this.getDatasetId())),g=ae.assocPath(["common","projection"],f||"Mercator",p),m=hG(g,h,y,v),e.abrupt("return",m);case 15:case"end":return e.stop()}},e,this)}))},r.getColorRelationships=function(e){var t=r.data.chartType,a=r.context.property,n=r.data.pivot,i=r.context.docTheme;return zW(e,t,a,n,i,r.context.colorAssignmentManager)},r.context=t,r}return D()(n,[{key:"fetchAggregatedData",value:function(l,e){var u=1<arguments.length&&void 0!==e?e:{};return IG(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.sync(),null!=u&&u.context&&this.setContext(null==u?void 0:u.context),t=this.getSimplePivotSettings(l),a=this.getPivotSettingHelper(this.getDatasetId(),this.data),t.length&&a.isReady()){e.next=10;break}return this.notifyRefreshData(),this.cleanDataCache(),e.abrupt("return");case 10:return this.dataView.helpers=[],this.dataView.models=[],this.dataView.userParametersArr=[],this.dataView.filters=this.getGlobalFilters(this.data),this.dataView.customData=Us.customData(this.data),this.dataView.customAttributes=a.getCustomAttributes(),this.dataView.datasetId=l,t.forEach(function(e,t){if(e){var a=s.getDataViewHelper(s.getDatasetId(),e);a.hasSetting()?(s.dataView.helpers.push(a),s.dataView.models.push(s.getPivotModel(Object.assign(Object.assign({},s.data),{id:"".concat(s.data.id,"-").concat(t),originalId:s.data.id}),a)),s.dataView.userParametersArr.push(s.getUserParameters(Object.assign(Object.assign({},s.data),{id:"".concat(s.data.id,"-").concat(t),originalId:s.data.id}),a))):(s.dataView.helpers.push(null),s.dataView.models.push(null))}else s.dataView.helpers.push(null),s.dataView.models.push(null)}),this.preUpdate(),e.next=21,this.dataView.getDataViewAsync(l,u.sessionId,this.getDataViewOptions());case 21:(n=e.sent)&&(i=n,this.getDataViewOptions().withWrapper&&(i=n.filter(function(e){return e}).map(function(e){return Object.values(e)}).flat().filter(function(e){return e})),this.setDataCache(i)),this.postUpdate(),r=n?this.mergeResults(n):void 0,o={aggregatedData:r},this.context.config={aggregatedData:r},r&&this.notifyRefreshData(o,null,u);case 28:case"end":return e.stop()}},e,this)}))}}]),n}(nO),_G=function(e){k()(n,e);var a=w()(n);function n(e,t){var r;return I()(this,n),(r=a.call(this,e)).getColorRelationships=function(e){var t=r.data.chartType,a=r.context.property,n=r.data.pivot,i=r.context.docTheme;return zW(e,t,a,n,i,r.context.colorAssignmentManager)},r.context=t,r}return D()(n,[{key:"hasCustomInput",value:function(e){return e.valueSourceType===Ui.CustomInput||e.comparisonSourceType===Ui.CustomInput}},{key:"buildRes",value:function(e,t){var a=e,n=t,i=this.data.chartType,r=this.context.property,o=this.context.docTheme,s=!1;if(!a&&!this.hasCustomInput(r)){s=!0;var l=SW(i);n=l.pivotSettingHelper,a=l.data}n.setOption({nullString:r.nullItemsString,emptyString:r.emptyItemsString});var u=this.getColorRelationships(a).dataColorRelationships;return{aggregatedData:s?void 0:a,config:UW(Object.assign(Object.assign({},this.data),{options:Object.assign(Object.assign({},this.data.options),{property:r})}),r,a,n,tj(r,i,a,u,o),this.context.scale)}}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),n}(tO),MG=function(){function e(){I()(this,e)}return D()(e,[{key:"processEvent",value:function(e,t,a,n){if(t){var i=PK(e);null!=i&&i._isMap?this.doMapChartChanged(i,t,a,n):this.doNormalChartChanged(i,t,a,n)}}},{key:"doNormalChartChanged",value:function(e,t,a,n){var i=e.query("[selected=true]");if(i&&0<i.length){var r=wK(a,n,i,e.option.chartType);e._emitter.emit(uK,r)}else e._emitter.emit(uK)}},{key:"doMapChartChanged",value:function(e,t,a,n){var i,r=e.query("[selected=true]"),o=null===(i=e.option.plots[0])||void 0===i?void 0:i.config.map.geojson.features;e._emitter.emit(uK,AG(a,n,r,o))}},{key:"_plotArea",value:function(e){for(var t=e;t;){if(t.type===__.ElementType.PlotArea)return t;t=t.parent}return null}},{key:"_TrellisCell",value:function(e){for(var t=e;t;){if(t.type===__.ElementType.TrellisCell)return t;t=t.parent}return null}},{key:"_isComparisonChart",value:function(e){var t,a=null===(t=PK(e))||void 0===t?void 0:t.option.chartType;return!!["KPI","indicator","gauge"].includes(a)}}]),e}(),LG=__.models.ExcludingModelPrediction,RG=__.core.Point,VG=new LG(["DataPointLabel","ReferenceLineOverlayItem"]),NG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"_getDataPointUnderDataPointLabel",value:function(e,t,a){var n=new RG(e.x,e.y),i=a.hitTest(n,VG);return i&&i.model&&i.model.type===__.ElementType.DataPoint?i.model:null}},{key:"onClick",value:function(e,t){if(!t)return 0;if(t.type!==__.ElementType.DataPoint&&t.type!==__.ElementType.DataPointLabel&&t.type!==__.ElementType.ReferenceLineOverlayItem)return 0;var a=this._plotArea(t);if(null==a)return 0;if(this._isComparisonChart(a))return 0;if(t.type===__.ElementType.DataPointLabel||t.type===__.ElementType.ReferenceLineOverlayItem){var n=PK(a);if(!(t=this._getDataPointUnderDataPointLabel(e,t,n)))return 0}var i=t,r=a.parent.option;if(r){if(r.selectionMode===__.SelectionMode.Point){var o,s=!1,l=rI()(a.plotsPanes);try{for(l.s();!(o=l.n()).done;){var u,c=o.value,d=rI()(c.plots);try{for(d.s();!(u=d.n()).done;){var p,h=u.value,y=rI()(h.points);try{for(y.s();!(p=y.n()).done;){var g=p.value;g!==i&&g.selected?s=!(g.selected=!1):g!==i||g.selected||(s=g.selected=!0)}}catch(e){y.e(e)}finally{y.f()}}}catch(e){d.e(e)}finally{d.f()}}}catch(e){l.e(e)}finally{l.f()}return this.processEvent(a,s,e,t),s?1:0}if(r.selectionMode===__.SelectionMode.Points)return i.selected=!i.selected,this.processEvent(a,!0,e,t),1}return 0}}]),a}(MG),EG=function(){function e(){I()(this,e),this.name="PointSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new NG}}]),e}(),FG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"onClick",value:function(e,t){if(!t||t.type!==__.ElementType.Series)return 0;var a=this._plotArea(t);if(null==a)return 0;if(this._isComparisonChart(a))return 0;var n=a.parent.option;if(n&&n.selectionMode===__.SelectionMode.Points){var i=!t.selected;return t.selected=i,this.processEvent(a,!0,e,t),1}return 0}}]),a}(MG),OG=function(){function e(){I()(this,e),this.name="SeriesSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new FG}}]),e}(),HG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"onClick",value:function(e,t){if(!t||t.type!==__.ElementType.LegendItem&&t.type!==__.ElementType.LegendItemSymbol&&t.type!==__.ElementType.LegendItemLabel)return 0;var a=this._plotArea(t);if(!a)return 0;if(this._isComparisonChart(a))return 0;var n=t.type===__.ElementType.LegendItem?t:t.parent,i=a.parent.option;if(i&&i.selectionMode===__.SelectionMode.Points){var r=!n.selected;n.selected=r;var o,s=rI()(n.relatedModels());try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.type===__.ElementType.DataPoint){var u,c,d=l;(d.detail===n.title||d.name===n.title||void 0!==n.size||null!==(u=PK(a))&&void 0!==u&&u._isMap||"floorPlan"===(null===(c=PK(a))||void 0===c?void 0:c.option.chartType))&&(d.selected=r)}else if(l.type===__.ElementType.Series){l.selected=r}}}catch(e){s.e(e)}finally{s.f()}return this.processEvent(a,!0,e,t),1}return 0}}]),a}(MG),BG=function(){function e(){I()(this,e),this.name="LegendSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new HG}}]),e}(),UG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"onClick",value:function(e,t){if(!t||t.type!==__.ElementType.AxisLabel)return 0;if(t.parent.axisType!==__.AxisType.X)return 0;var a=this._plotArea(t);if(!a)return 0;if(this._isComparisonChart(a))return 0;var n=t,i=a.parent.option;if(i&&i.selectionMode===__.SelectionMode.Points){var r,o=n.relatedModels(),s=!Bo.a.every(o,["selected",!0]),l=rI()(o);try{for(l.s();!(r=l.n()).done;){r.value.selected=s}}catch(e){l.e(e)}finally{l.f()}return this.processEvent(a,!0,e,t),1}return 0}}]),a}(MG),zG=function(){function e(){I()(this,e),this.name="AxisLabelSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new UG}}]),e}(),KG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"onClick",value:function(e,t){if(!t||t.type!==__.ElementType.TrellisColumnHeader&&t.type!==__.ElementType.TrellisRowHeader)return 0;var a=this._plotArea(t);if(null==a)return 0;var n=t,i=a.parent.option;if(!i||i.selectionMode!==__.SelectionMode.Points&&i.selectionMode!==__.SelectionMode.Trellis)return 0;var r=!n.selected;n.selected=r;var o,s=rI()(n.relatedPlots());try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=rI()(u.points);try{for(c.s();!(l=c.n()).done;){l.value.selected=r}}catch(e){c.e(e)}finally{c.f()}}}catch(e){s.e(e)}finally{s.f()}return this.processEvent(a,!0,e,t),1}}]),a}(MG),jG=function(){function e(){I()(this,e),this.name="TrellisSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new KG}}]),e}(),WG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"onClick",value:function(e,t){if(!t||t.type!==__.ElementType.PlotArea&&t.type!==__.ElementType.Plot&&t.type!==__.ElementType.Trellis&&t.type!==__.ElementType.TrellisCell&&t.type!==__.ElementType.Axis)return 0;var a=this._plotArea(t);if(!a)return 0;if(this._isComparisonChart(a))return 0;var n,i=!1,r=rI()(a.legends);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(Array.isArray(o.items)){var s,l=rI()(o.items);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.selected&&(i=!(u.selected=!1))}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){r.e(e)}finally{r.f()}var c,d=rI()(a.plotsPanes);try{for(d.s();!(c=d.n()).done;){var p=c.value;if(p.type===__.ElementType.Trellis){var h,y=rI()(p.columnHeaders);try{for(y.s();!(h=y.n()).done;){var g=h.value;g.selected&&(i=!(g.selected=!1))}}catch(e){y.e(e)}finally{y.f()}var m,f=rI()(p.rowHeaders);try{for(f.s();!(m=f.n()).done;){var v=m.value;v.selected&&(i=!(v.selected=!1))}}catch(e){f.e(e)}finally{f.f()}}var b,C=rI()(p.plots);try{for(C.s();!(b=C.n()).done;){var T,S=b.value,D=rI()(S.points);try{for(D.s();!(T=D.n()).done;){var k=T.value;k.selected&&(i=!(k.selected=!1))}}catch(e){D.e(e)}finally{D.f()}}}catch(e){C.e(e)}finally{C.f()}}}catch(e){d.e(e)}finally{d.f()}return this.processEvent(a,i,e,t),i?1:0}}]),a}(MG),GG=function(){function e(){I()(this,e),this.name="CancelSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new WG}}]),e}(),YG=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"_doTrellisCellChanged",value:function(e,t,a,n){var i=!1;if(n){var r,o=rI()(e.plotsPanes);try{for(o.s();!(r=o.n()).done;){var s=r.value.ownerView;if(s.type===__.ElementType.TrellisCell)if(s!==t){var l,u=rI()(s.plots);try{for(u.s();!(l=u.n()).done;){var c,d=l.value,p=rI()(d.points);try{for(p.s();!(c=p.n()).done;){i=!(c.value.selected=!1)}}catch(e){p.e(e)}finally{p.f()}}}catch(e){u.e(e)}finally{u.f()}}else{var h,y=rI()(s.plots);try{for(y.s();!(h=y.n()).done;){var g,m=h.value,f=rI()(m.points);try{for(f.s();!(g=f.n()).done;){var v=g.value;v.selected=!v.selected,i=!0}}catch(e){f.e(e)}finally{f.f()}}}catch(e){y.e(e)}finally{y.f()}}}}catch(e){o.e(e)}finally{o.f()}this.processEvent(e,i,a,t)}else{var b,C=rI()(t.plots);try{for(C.s();!(b=C.n()).done;){var T,S=b.value,D=rI()(S.points);try{for(D.s();!(T=D.n()).done;){var k=T.value;k.selected=!k.selected,i=!0}}catch(e){D.e(e)}finally{D.f()}}}catch(e){C.e(e)}finally{C.f()}this.processEvent(e,i,a,t)}return i}},{key:"_doPlotAreaChanged",value:function(e,t){var a,n=!1,i=rI()(e.plotsPanes);try{for(i.s();!(a=i.n()).done;){var r,o=a.value,s=rI()(o.plots);try{for(s.s();!(r=s.n()).done;){var l,u=r.value,c=rI()(u.points);try{for(c.s();!(l=c.n()).done;){var d=l.value;d.selected=!d.selected,n=!0}}catch(e){c.e(e)}finally{c.f()}}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}return this.processEvent(e,n,t,e),n}},{key:"onClick",value:function(e,t){if(!t||t.type!==__.ElementType.Axis&&t.type!==__.ElementType.AxisLabel&&t.type!==__.ElementType.PlotArea&&t.type!==__.ElementType.TrellisCell&&t.type!==__.ElementType.DataPoint)return 0;var a=this._plotArea(t);if(!a)return 0;var n=a.parent.option.selectionMode===__.SelectionMode.Point;if(this._isComparisonChart(a)){if(t.type===__.ElementType.TrellisCell)return this._doTrellisCellChanged(a,t,e,n)?1:0;if(t.type===__.ElementType.PlotArea)return this._doPlotAreaChanged(a,e)?1:0;if(t.type===__.ElementType.Axis||t.type===__.ElementType.DataPoint||t.type===__.ElementType.DataPoint){var i=this._TrellisCell(t);return i?this._doTrellisCellChanged(a,i,e,n)?1:0:this._doPlotAreaChanged(a,e)?1:0}}return 0}}]),a}(MG),qG=function(){function e(){I()(this,e),this.name="ComparisonChartSelectionPlugin",this.type="ClickInteraction",this.priority=1}return D()(e,[{key:"buildClickInteraction",value:function(){return new YG}}]),e}(),JG=function(){function e(){I()(this,e),this.name="GCESViewSize",this.type="ViewSizePolicy",this.priority=10}return D()(e,[{key:"build",value:function(e){return e.type===__.ElementType.PlotsPane?this:null}},{key:"queryInterface",value:function(){return null}},{key:"_getCartesianCategory",value:function(e){var t=0,a=0,n=!1;if(null!=e&&e.type===__.ElementType.PlotsPane){var i=e,r=xK(i.plots);t=r.categoryCount,a=r.entryCount,n=i.plots[0].option.config.swapAxes}return{swapAxes:n,categoryCount:t,entryCount:a}}},{key:"_dvModel",value:function(e){return null==e?null:e.type===__.ElementType.Control?e:this._dvModel(e.parent)}},{key:"horizontalViewSize",value:function(e,t,a){var n,i;if(!(null===(n=PK(t))||void 0===n||null===(i=n.option)||void 0===i?void 0:i.expand))return e;var r=this._getCartesianCategory(t),o=r.categoryCount,s=r.entryCount,l=r.swapAxes;if(0<o&&0<s){var u=this._dvModel(t),c=AK(o,s),d=u.option.bar.width||c;e=l?1:Math.min(1,a*d/(o*s*16))}else e=Math.min(1,a/200);return e}},{key:"verticalViewSize",value:function(e,t,a){var n,i;if(!(null===(n=PK(t))||void 0===n||null===(i=n.option)||void 0===i?void 0:i.expand))return e;var r=this._getCartesianCategory(t),o=r.categoryCount,s=r.entryCount,l=r.swapAxes;if(0<o&&0<s){var u=this._dvModel(t),c=AK(o,s),d=u.option.bar.width||c;e=l?Math.min(1,a*d/(o*s*16)):1}else e=Math.min(1,a/200);return e}}]),e}(),XG=function(){function e(){I()(this,e),this.name="GCESBarWidth",this.type="BarWidthPolicy",this.priority=10}return D()(e,[{key:"build",value:function(){return this}},{key:"queryInterface",value:function(){return null}},{key:"_layoutModel",value:function(e){return null==e?null:e.type===__.ElementType.PlotsPane||e.type===__.ElementType.Trellis?e:this._layoutModel(e.parent)}},{key:"_dvModel",value:function(e){return null==e?null:e.type===__.ElementType.Control?e:this._dvModel(e.parent)}},{key:"_getCartesianCategory",value:function(e){var t=0,a=0,n=this._layoutModel(e);if(null!=n&&n.type===__.ElementType.Trellis)for(var i=n.cells,r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++){var s=xK(i[r][o].plots);s.categoryCount>t?(t=s.categoryCount,a=s.entryCount):s.categoryCount===t&&s.entryCount>a&&(a=s.entryCount)}else if(null!=n&&n.type===__.ElementType.PlotsPane){var l=xK(n.plots);t=l.categoryCount,a=l.entryCount}return{categoryCount:t,entryCount:a}}},{key:"barWidth",value:function(e,t){var a=this._getCartesianCategory(e),n=a.categoryCount,i=a.entryCount,r=this._dvModel(e),o=t;return 0<n&&0<i&&null!=r&&null==r.option.bar.width&&(o=AK(n,i),r.option.bar.width=o),o}}]),e}(),QG=function(){function e(){I()(this,e),this.name="GCESTrellisViewSize",this.type="ViewSizePolicy",this.priority=10}return D()(e,[{key:"build",value:function(e){if(e.type===__.ElementType.Trellis&&null!=e)return this;return null}},{key:"queryInterface",value:function(){return null}},{key:"_getCartesianCategory",value:function(e){var t=0,a=0,n=!1;if(null!=e&&e.type===__.ElementType.Trellis)for(var i=e.cells,r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++){var s=xK(i[r][o].plots);s.categoryCount>t?(t=s.categoryCount,a=s.entryCount,n=i[r][o].plots[0].option.config.swapAxes):s.categoryCount===t&&s.entryCount>a&&(a=s.entryCount,n=i[r][o].plots[0].option.config.swapAxes)}return{swapAxes:n,categoryCount:t,entryCount:a}}},{key:"_dvModel",value:function(e){return null==e?null:e.type===__.ElementType.Control?e:this._dvModel(e.parent)}},{key:"horizontalViewSize",value:function(e,t,a){var n,i;if(!(null===(n=PK(t))||void 0===n||null===(i=n.option)||void 0===i?void 0:i.expand))return e;var r=this._getCartesianCategory(t),o=r.categoryCount,s=r.entryCount,l=r.swapAxes;if(0<o&&0<s){var u=this._dvModel(t),c=AK(o,s),d=u.option.bar.width||c;l?e/=200/a:e=Math.min(1,a*d/(o*s*16))}else e/=200/a;return Math.min(1,e)}},{key:"verticalViewSize",value:function(e,t,a){var n,i;if(!(null===(n=PK(t))||void 0===n||null===(i=n.option)||void 0===i?void 0:i.expand))return e;var r=this._getCartesianCategory(t),o=r.categoryCount,s=r.entryCount,l=r.swapAxes;if(0<o&&0<s){var u=this._dvModel(t),c=AK(o,s),d=u.option.bar.width||c;l?e=Math.min(1,a*d/(o*s*16)):e/=200/a}else e/=200/a;return Math.min(1,e)}}]),e}(),ZG=function(){function e(){I()(this,e)}return D()(e,[{key:"format",value:function(e,t){if(e){var a=(e=(i=e)&&i.split(H_).map(function(e){return H_.test(e)?e.slice(1):e}).join("")).split(""),n=a.reduce(function(e,t){return-1!==t.indexOf(Ko)&&(e.emptyString=t.replace(Ko,"")),-1!==t.indexOf(jo)&&(e.nullString=t.replace(jo,"")),e},{});return wu(a[0],t,n)}var i;return ku(e,t)}},{key:"defaultFormat",value:function(e,t){switch(e){case __.core.DataType.Number:return t?"0.00%":"0.00";case __.core.DataType.Date:return kl();default:return"General"}}}]),e}(),$G=[new(function(){function e(){I()(this,e),this.name="GCESStringFormat",this.type="StringFormat",this.priority=10}return D()(e,[{key:"build",value:function(){return new ZG}}]),e}()),new XG,new JG,new QG,new EG,new OG,new BG,new zG,new jG,new GG,new qG];function eY(e){return e&&e.inLatLong}var tY=new __.models.ExcludingModelPrediction(["DataPointLabel"]),aY=function(){function r(e){var o=this;I()(this,r),this._getSelectedItems=function(){return o.dvInstance.query("[selected=true]")||[]},this._stopPropagationOnDvContainer=function(e){e.stopPropagation()},this._handleData=function(e){var t=o._getSelectedItems();return wK(e.event,e.model,t,o.dvInstance.option.chartType)},this._findDataPointUnderDataPointLabel=function(e){var t=o.dvInstance.hitTest(e.point,tY);return Zz(t)?{model:t.model,point:e.point,event:e.event}:null},this._isInCategory=function(e){var t=e.point,a=o.dvInstance.hitTest(e.point);if(null!=a){var n=eK(a.model);if(null!=n&&n.type===__.ElementType.PlotArea)if(null!=n.queryRelatedTooltipViewModel(t.x,t.y))return!0}return!1},this._getNewCategoryModel=function(e){var t=e.point,a=o.dvInstance.hitTest(e.point);if(null!=a){var n=eK(a.model);if(null!=n&&n.type===__.ElementType.PlotArea){var i=n.queryRelatedTooltipViewModel(t.x,t.y),r=null;return Zz(e)&&(r=e.model),{categoryModel:i,activePoint:r}}}return!1},this._checkCategoryModelChanged=function(e){return!o.lastCategoryModel||(!o.lastCategoryModel.categoryModel.contains(e.point)||(Zz(e)?e.model:null)!==o.lastCategoryModel.activePoint)},this._mouseleaveHandler=function(){o.lastModel=null,o.carouselIntervalId&&o._restartCarousel()},this._mouseenterHandler=function(){o.carouselIntervalId&&o._pausedCarousel()},this._blankClickHandler=function(){o.emitter.emit(tK)},this._getRealFontSize=function(e,t,a){return"auto"===e?a/t:e},this._getRadius=function(e){var t=o.container.getBoundingClientRect(),a=t.width,n=t.height,i=0<o.config.trellisColumnCellsNum?40:0;if(a-=0<o.config.trellisRowCellsNum?70:0,n-=i,a/=o.config.trellisColumnCellsNum||1,n/=o.config.trellisRowCellsNum||1,o.config.expand&&(a=Math.max(200,a),n=Math.max(200,n)),e){return Math.min(a,2*n)/2}return Math.min(a,n)/2},this._updateOverlayOffset=function(e){var t=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===or});t&&(t.offset="0, ".concat(e))},this._updateDataValueOverlay=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=o._getRadius(t),n=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===or});if(n){var i=o._getRealFontSize(n.textStyle._dataLabelFontSize,e,a);return n.textStyle.fontSize=i}return 0},this._updateCustomUnitOverlay=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=o._getRadius(t),n=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===er});if(n){var i=o._getRealFontSize(n.textStyle._valueCustomUnitFontSize,e,a);return n.textStyle.fontSize=i}return 0},this._updateDeltaLabelOverlay=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=o._getRadius(t),n=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===tr});if(n){var i=o._getRealFontSize(n.textStyle._deltaLabelFontSize,e,a);return n.textStyle.fontSize=i,n.symbol&&(n.symbol.width=ju(i)/1.2,n.symbol.height=ju(i)/1.2),i}return 0},this._updateSubTitleOverlay=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=o._getRadius(t),n=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===ar});if(n){var i=o._getRealFontSize(n.textStyle._subTitleFontSize,e,a);return n.textStyle.fontSize=i}return 0},this._updatePointerOverlay=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=o._getRadius(t),n=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===ir});n&&(n.width=a/e)},this._updateDataPointFontSize=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=o._getRadius(t),n=o._getRealFontSize(o.config.plots[0].config.text.textStyle._dataLabelFontSize,e,a);o.config.plots[0].config.text.textStyle.fontSize=n;var i=o.config.plots[0].config.overlays.find(function(e){return e._overlayKey===nr});i&&(i.textStyle.fontSize=n)},this._recalculateGaugeLabelSize=function(){o._updatePointerOverlay(50);var e=0;o._updateCustomUnitOverlay(10),o._updateDeltaLabelOverlay(10);var t=o._updateSubTitleOverlay(10);e+=1.5*parseFloat(t);var a=o._updateDataValueOverlay(6.5);e+=1.5*parseFloat(a)/2,o._updateOverlayOffset(e)},this._recalculateIndicatorLabelSize=function(){o._updateDataValueOverlay(4.5),o._updateCustomUnitOverlay(8),o._updateDeltaLabelOverlay(8),o._updateSubTitleOverlay(8)},this._recalculateKPILabelSize=function(){o._updateDataPointFontSize(3,!0),o._updateCustomUnitOverlay(4.5,!0),o._updateDeltaLabelOverlay(7,!0),o._updateSubTitleOverlay(7,!0)},this._loadDvInstance=function(e){try{o.dvInstance.load(e)}catch(e){}o.allowNextRenderedEvent=!0},this._refreshDvInstance=function(){try{o.dvInstance.refresh()}catch(e){}},this._renderEventHandler=function(){o.allowNextRenderedEvent&&(o.allowNextRenderedEvent=!1,o.emitter.emit(gK))},this.animationHandler=function(e,t,a,n){if(!o.carouselPausedFlag&&!o.hasSelected){var i=e[t],r=null==i?void 0:i.isVisible();__.FlexDV.runAnimation(i,"Highlight",{scale:a,easing:"Linear",duration:o.CarouselDuration,stay:(n-2*o.CarouselDuration)/2}),o._showLabel(i),r||o.dvInstance.invalidate(),setTimeout(function(){o._hideLabel(i),r||o.dvInstance.invalidate()},n),t=(t+1)%e.length}o.carouselIntervalId=setTimeout(function(){o.animationHandler(e,t,a,n)},n)};var t,a,n=new __.FlexDV(e);t=n,a=new __.plugins.PluginCollection,$G.forEach(function(e){return a.register(e)}),t.pluginCollection=a,n.rendered.addHandler(this._renderEventHandler);var i=new f.a;n._emitter=i,this.container=e,this.dvInstance=n,this.emitter=i,this.lastModel=null,this.bindEvent(),this.container.addEventListener("mouseleave",this._mouseleaveHandler),this.container.addEventListener("mouseenter",this._mouseenterHandler),this.container.addEventListener("click",this._stopPropagationOnDvContainer),this.pointerInShape=!1,this.carouselIntervalId=null,this.hasSelected=!1,this.carouselPausedFlag=!1,this.CarouselDuration=250,this.pointerInCategory=!1,this.lastCategoryModel=null,this.allowNextRenderedEvent=!1,i.on(uK,function(e){o.hasSelected=!!(e&&e.selected&&e.selected.length)})}return D()(r,[{key:"_doShapeMouseMove",value:function(e){if(e&&!vK(this.config.chartType)&&e.model!==this.lastModel){this.lastModel&&this.emitter.emit(nK);var t=this._handleData(e);this.emitter.emit(aK,t),this.lastModel=e.model,this.pointerInShape=!0}}},{key:"_doShapeClick",value:function(t){var a=this;setTimeout(function(){var e=a._handleData(t);a.emitter.emit(iK,e)})}},{key:"_handleCategoryData",value:function(e){var t=this._getNewCategoryModel(e),a=t.categoryModel,n=t.activePoint;if(a)return{hitPoint:{x:e.event.originalEvent.clientX,y:e.event.originalEvent.clientY},categoryModel:a,activePoint:n}}},{key:"_doCategoryMouseMove",value:function(e){if(e&&!vK(this.config.chartType)){if(this._checkCategoryModelChanged(e)){this.lastCategoryModel&&this.emitter.emit(yK),this.lastCategoryModel=this._getNewCategoryModel(e);var t=this._handleCategoryData(e);this.emitter.emit(hK,t)}this.pointerInCategory=!0}}},{key:"bindEvent",value:function(){var r=this;this.dvInstance.hitTested.addHandler(function(e,t){var a;if(t.event.originalEvent.stopPropagation(),r.config)if(t.event.action===__.MotionEvent.ACTION_CLICK){if(t.event.originalEvent.stopPropagation(),vK(r.config.chartType))r._doShapeClick(t);else if((a=t).model.type===__.ElementType.LegendItem||a.model.type===__.ElementType.LegendItemSymbol||a.model.type===__.ElementType.LegendItemLabel)setTimeout(function(){var e=r._handleData(t);r.emitter.emit(pK,e)});else if(fK(t))r.emitter.emit(tK);else if(Zz(t))r._doShapeClick(t);else if(t.model.type===__.ElementType.Series)setTimeout(function(){var e=r._handleData(t);r.emitter.emit(rK,e)});else if(t.model.type===__.ElementType.AxisLabel)setTimeout(function(){var e=r._handleData(t);r.emitter.emit(oK,e)});else if(t.model.type===__.ElementType.TrellisColumnHeader)setTimeout(function(){var e=r._handleData(t);r.emitter.emit(sK,e)});else if(t.model.type===__.ElementType.TrellisRowHeader)setTimeout(function(){var e=r._handleData(t);r.emitter.emit(lK,e)});else if($z(t)){var n=r._findDataPointUnderDataPointLabel(t);r._doShapeClick(n)}}else if(t.event.action===__.MotionEvent.ACTION_MOUSE_MOVE){if(Zz(t))r._doShapeMouseMove(t);else if($z(t)){var i=r._findDataPointUnderDataPointLabel(t);r._doShapeMouseMove(i)}else r.pointerInShape&&(r.emitter.emit(nK),r.lastModel=null,r.pointerInShape=!1);r._isInCategory(t)?r._doCategoryMouseMove(t):r.pointerInCategory&&(r.emitter.emit(yK),r.lastCategoryModel=null,r.pointerInCategory=!1),r.emitter.emit(dK,t)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"refresh",value:function(){this.config&&(this.config.chartType===H.ChartType.Gauge?(this._recalculateGaugeLabelSize(),this._loadDvInstance(this.config)):this.config.chartType===H.ChartType.Indicator?(this._recalculateIndicatorLabelSize(),this._loadDvInstance(this.config)):this.config.chartType===H.ChartType.KPI&&(this._recalculateKPILabelSize(),this._loadDvInstance(this.config)),this._refreshDvInstance())}},{key:"cleanSelection",value:function(){0<this._getSelectedItems().length&&(this.dvInstance.select([]),this.emitter.emit(uK))}},{key:"_hideAll",value:function(e){var t=this;e.forEach(function(e){t._hideLabel(e)})}},{key:"_hideLabel",value:function(e){if(e){var t=e.dataLabel;null!=t&&(t.visible=!1)}}},{key:"_showLabel",value:function(e){if(e){var t=e.dataLabel;null!=t&&(t.visible=!0)}}},{key:"_getAnimationScale",value:function(){var e=1;switch(this.dvInstance.option.chartType){case H.ChartType.Column:case H.ChartType.StackColumn:case H.ChartType.PercentStackColumn:case H.ChartType.Bar:case H.ChartType.StackBar:case H.ChartType.PercentStackBar:case H.ChartType.TreeMap:case H.ChartType.Pie:case H.ChartType.RangeColumn:case H.ChartType.RangeBar:e="10px";break;case H.ChartType.StackBarInPolar:case H.ChartType.BarInPolar:case H.ChartType.Line:case H.ChartType.Area:case H.ChartType.StackArea:case H.ChartType.PercentStackArea:case H.ChartType.Radar:case H.ChartType.FilledRadar:case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:case H.ChartType.Donut:case H.ChartType.RangeArea:e="5px";break;case H.ChartType.Composite:case H.ChartType.Rose:case H.ChartType.Sunburst:case H.ChartType.RadialStackedBar:e="8px";break;case H.ChartType.FloorPlan:e=1.2}return e}},{key:"startCarousel",value:function(e,t){var a=this;this.carouselIntervalId&&(this.stopCarousel(),this.hasSelected=!1);var n=t?this.dvInstance.query("[depth=".concat(t,"]")):this.dvInstance.query("[]");this._hideAll(n);var i=this._getAnimationScale();this.carouselIntervalId=setTimeout(function(){a.animationHandler(n,0,i,e)},e)}},{key:"_pausedCarousel",value:function(){this.carouselPausedFlag=!0}},{key:"_restartCarousel",value:function(){this.carouselPausedFlag=!1}},{key:"stopCarousel",value:function(){this.carouselIntervalId&&(clearTimeout(this.carouselIntervalId),this.carouselIntervalId=null)}},{key:"load",value:function(e,t){var r=this;this.config=e,this.config.chartType===H.ChartType.Gauge?this._recalculateGaugeLabelSize():this.config.chartType===H.ChartType.Indicator?this._recalculateIndicatorLabelSize():this.config.chartType===H.ChartType.KPI&&this._recalculateKPILabelSize(),this.lastModel=null;var a,n=this.dvInstance.query("[selected=true]");n.length&&([H.ChartType.Sunburst,H.ChartType.Bubble,H.ChartType.DisaggregateScatter].includes(this.config.chartType)?this.emitter.emit(uK):a=n.map(SK));if(this._loadDvInstance(e),t&&a&&a.length){var i=a.reduce(function(e,t){var a=t.queryStr,n=t.itemsId,i=r.dvInstance.query(a);return 1<i.length&&(i=i.filter(function(e){var t=e.items,a=TK(t,e.valueDefinition);return Bo.a.isEqual(a,n)})),e=e.concat(i)},[]);this.dvInstance.select(i);var o=this.dvInstance.query("[selected=true]"),s=kK(o,this.config.chartType);this.emitter.emit(mK,s)}this.emitter.emit(cK)}},{key:"dispose",value:function(){var t;t=this.dvInstance,$G.forEach(function(e){return t.pluginCollection.unregister(e)}),this.dvInstance.dispose(),this.emitter.removeAllListeners(),this.container.removeEventListener("mouseleave",this._mouseleaveHandler),this.container.removeEventListener("click",this._stopPropagationOnDvContainer),this.container.removeEventListener("mouseenter",this._mouseenterHandler),this.stopCarousel()}},{key:"getAllPlotViews",value:function(){for(var e=this.dvInstance.model,t=[],a=0;a<e.plotAreas.length;++a)for(var n=0;n<e.plotAreas[a].plotsPanes.length;++n)for(var i=0;i<e.plotAreas[a].plotsPanes[n].plots.length;++i)t.push(e.plotAreas[a].plotsPanes[n].plots[i]);return t}},{key:"reloadAnimation",value:function(){this.getAllPlotViews().forEach(function(e){__.FlexDV.runAnimation(e,"Loading")})}}]),r}(),nY=function(e){k()(n,e);var a=w()(n);function n(){var p;I()(this,n),(p=a.call(this)).isMock=!1,p.generateActualE=function(t){var e,a;try{var n=d$._legacyWynbi.scenarioOthersCacheMap[p.scenarioId],i=t;if(n){var s=n.dimensionName,l=n.valueName,u=n.keysSequence,c=n.aggForest,r=n.changeNumberToString,o=function a(n){n&&(Array.isArray(n)?n.forEach(a):"object"===E()(n)&&Object.keys(n).forEach(function(e){var t=n[e];e===s&&"string"==typeof t?n[e]=parseFloat(t):a(n[e])}))};if(ae.compose(ae.find(function(e){return ae.head(e)[s]===Xz}),ae.pathOr([],["selected"]))(t)){var d=ae.path(["selected"],t).reduce(function(e,t){var a=ae.head(t);if(a[s]!==Xz)return[].concat(R()(e),[t]);var n=ae.init(u).map(function(e){return a[e]}),i=ae.path(n,c),r=ae.toPairs(i).filter(function(e){return e[0]!==Xz}).map(function(e){return ae.head(e)===lx?[null].concat(R()(ae.tail(e))):e}),o=ae.compose(ae.map(ae.of),ae.addIndex(ae.map)(function(e,t){return ae.compose(ae.ifElse(ae.prop("__series__"),ae.assoc("__series__",r[t][0]),ae.identity),ae.assoc(l,r[t][1]),ae.assoc(s,r[t][0]))(e)}),ae.repeat(a),ae.prop("length"))(r);return[].concat(R()(e),R()(o))},[]);i=ae.assocPath(["selected"],d)(t)}r&&(o(null===(e=i.model)||void 0===e?void 0:e.items),o(null===(a=i.model)||void 0===a?void 0:a.item),o(i.selected))}return i}catch(e){return t}};var e=new hU({tag:"div",className:"layout-full-flex"}),t=new hU({tag:"div",className:"wyn-chart-overlay"});return p.addChildren(e,t),p.host=e,p.mockOverlay=t,p}return D()(n,[{key:"init",value:function(e){var t=this;this.handlers=e.handlers,this.keepSelection=e.keepSelection,this.host.addEventListener("mouseleave",function(){setTimeout(function(){t.handlers.onMouseLeave()})}),this.scenarioId=e.scenarioId}},{key:"didMount",value:function(){var e=new aY(this.host.getRef());this.chart=e,this.addHandler()}},{key:"willUnmount",value:function(){this.chart&&(this.chart.dispose(),this.chart=null)}},{key:"paint",value:function(){var e=this.keepSelection,t=this.dvData;if(t){this.context.eventHub.fireRender(),this.chart.load(t,e);var a=t._automaticCarousel,n=t._carouselInterval,i=t._modelDepth;a&&this.chart.startCarousel(1e3*n,i)}}},{key:"addHandler",value:function(){var t=this,e=this.chart;e.on(tK,function(){t.handlers.onBlankClick()}),e.on(iK,function(e){t.handlers.onShapeClick(t.generateActualE(e))}),e.on(rK,function(e){t.handlers.onShapeClick(t.generateActualE(e),!0)}),e.on(oK,function(e){t.handlers.onShapeClick(t.generateActualE(e))}),e.on(sK,function(e){t.handlers.onShapeClick(t.generateActualE(e))}),e.on(lK,function(e){t.handlers.onShapeClick(t.generateActualE(e))}),e.on(aK,function(e){t.handlers.onMouseEnter(e)}),e.on(nK,function(){t.handlers.onMouseLeave()}),e.on(uK,function(e){t.handlers.onSelectionChange(t.generateActualE(e))}),e.on(mK,function(e){t.handlers.onSyncSelection(t.generateActualE(e))}),e.on(cK,function(){t.handlers.onRePaint()}),e.on(dK,function(e){t.handlers.onMouseMove(e)}),e.on(pK,function(e){t.handlers.onShapeClick(t.generateActualE(e))}),e.on(hK,function(e){t.handlers.onMouseEnterCategory(e)}),e.on(yK,function(){t.handlers.onMouseLeaveCategory()}),e.on(gK,function(){t.context.eventHub.fireRendered()})}},{key:"refresh",value:function(){this.paint(),this.handlers.onChartUpdate(this.chart)}},{key:"cleanSelection",value:function(){this.chart.cleanSelection()}},{key:"setDvData",value:function(e){this.dvData=e}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}))}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}},{key:"repaint",value:function(){this.chart.refresh()}}]),n}(mU),iY=function(e){k()(a,e);var t=w()(a);function a(){var n;return I()(this,a),(n=t.apply(this,arguments)).isTooltipModalShown=!1,n.selectedInfo=null,n.onContextMenu=function(e){},n.onBlankClickHandler=function(){n._hideToolTipModal(),n.clearCrossFilter()},n.onMouseEnterHandler=function(e,t){var a=n._parseEventModel(e,t).info;n._showToolTip(a)},n.onMouseLeaveHandler=function(){n._hideToolTip()},n.onRePaintHandler=function(){n._hideAll()},n.clearAll=function(){var e;n._hideAll(),null!==(e=n.chart)&&void 0!==e&&e.cleanSelection(),n.clearCrossFilter()},n.outerClickHandler=function(e){var t=n.context.store,a=t.getDashboardConfig().crossFilterMode;jz(e,t.id,a)&&n.clearAll()},n.innerClickHandler=function(e){e===n.context.store.id&&n.clearAll()},n.clearCrossFilter=function(){var e=n.context,t=e.store,a=e.pageContext;n.selectedInfo=null,t.clearCrossFilter()&&a.pageModel.doCrossFilter(t.id)},n}return D()(a,[{key:"didMount",value:function(){var e=this.context.pageContext;e.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),e.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler),this.hostContainer.addEventListener("contextmenu",this.onContextMenu)}},{key:"willUnmount",value:function(){var e,t=this.context.pageContext;t.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),t.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler),this.hostContainer.removeEventListener("contextmenu",this.onContextMenu),null!==(e=this.interactionManager)&&void 0!==e&&e.destroy()}},{key:"_parseEventModel",value:function(e){return{info:e,isSelectedItem:!!e&&e.selected}}},{key:"_hideToolTipModal",value:function(){this.tooltip.hide()}},{key:"_showToolTipModal",value:function(e){var t,a={position:e.hitPoint,title:e.title,fields:null===(t=e.fields)||void 0===t?void 0:t.map(function(e){return{label:e.display,value:e.value}}),selected:e.selectedFields};this.isTooltipModalShown=!0,this.tooltip.show(a)}},{key:"_showToolTip",value:function(e){var t,a={position:e.hitPoint,title:e.title,fields:null===(t=e.fields)||void 0===t?void 0:t.map(function(e){return{label:e.display,value:e.value}})};this.tooltip.show(a)}},{key:"_hideToolTip",value:function(){this.isTooltipModalShown||this.tooltip.hide()}},{key:"_hideAll",value:function(){this.tooltip.hide()}},{key:"repaint",value:function(){var e;null!==(e=this.chart)&&void 0!==e&&e.repaint()}}]),a}(Tj),rY=function(e){k()(o,e);var r=w()(o);function o(){var t;I()(this,o),(t=r.call(this)).isMock=!1,t.addDvHandler=function(){var e=t.chart;e.on(tK,function(){return t.handlers.onBlankClick()}),e.on(iK,function(e){return t.handlers.onShapeClick(e)}),e.on(aK,function(e){return t.handlers.onMouseEnter(e)}),e.on(dK,function(e){t.handlers.onMouseMove(e)}),e.on(nK,function(){return t.handlers.onMouseLeave()}),e.on(uK,function(e){return t.handlers.onSelectionChange(e)}),e.on(cK,function(){return t.handlers.onRePaint()}),e.on(pK,function(e){return t.handlers.onShapeClick(e)}),e.on(gK,function(){t.context.eventHub.fireRendered()})},t.errorHandler=function(e){t.handlers.onToggleLoading(!1),e&&t.context.eventHub.fireFailed(e)};var e=new hU({tag:"div",className:"layout-full-flex"}),a=new hU({tag:"div",className:"wyn-chart-overlay"}),n=new hU({tag:"canvas",className:"wyn-chart-bg"}),i=new hU({tag:"div",className:"layout-full-flex"});return i.addChildren(e,a,n),t.addChildren(i),t.host=e,t.mockOverlay=a,t}return D()(o,[{key:"init",value:function(e){var t=new aY(this.host.getRef());this.chart=t,this.floorPlanId=e.floorPlanId,this.handlers=e.handlers,this._fetchFloorPlanJson(),this.renderChart(this.floorPlanData),this.addDvHandler()}},{key:"willUnmount",value:function(){this.chart.dispose(),this.floorPlanPromise&&this.floorPlanPromise.cancel()}},{key:"_fetchFloorPlanJson",value:function(){var t=this;this.floorPlanPromise&&this.floorPlanPromise.isPending()&&(this.floorPlanPromise.cancel(),this.handlers.onToggleLoading(!1));var e=this.floorPlanId;if(e){this.handlers.onToggleLoading(!0);var a=d$.httpResourceManager.get("FloorPlanDocument");this.floorPlanPromise=a.fetch(e).then(function(e){t.handlers.onToggleLoading(!1),t.floorPlanData=e.info,t.renderChart(e.info)},this.errorHandler)}}},{key:"renderChart",value:function(e){var t=this.dvData,a=this.floorPlanId;if(t){this.context.eventHub.fireRender();var n=t;if(a){if(!e)return;var i=ae.clone(t.plots[0]);e.graphJson&&(i.config.graphJson=e.graphJson,i.config.viewport=[e.graphBBox.x,e.graphBBox.y,e.graphBBox.width,e.graphBBox.height]),i.config.plugins[0].arguments={src:e.imageSrc},n=ae.assoc("plots",[i],t)}this.chart.load(n);var r=t._automaticCarousel,o=t._carouselInterval,s=t._modelDepth;r&&this.chart.startCarousel(1e3*o,s)}}},{key:"refresh",value:function(){this.renderChart(this.floorPlanData)}},{key:"cleanSelection",value:function(){this.chart.cleanSelection()}},{key:"setDvData",value:function(e){this.dvData=e}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}))}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}},{key:"repaint",value:function(){this.chart.refresh()}}]),o}(mU),oY=function(e){k()(a,e);var t=w()(a);function a(){var i;return I()(this,a),(i=t.call(this)).disabled=!1,i.getHierarchyState=function(){var e=RB()(i).hierarchyInfo;return e?{position:{left:e.rect.left,top:e.rect.top},display:1<e.level?"block":"none",expandDisplay:e.expandIndex<e.level-1?"inline-block":"none",collapseDisplay:0<e.expandIndex?"inline-block":"none"}:{display:"none",position:{left:0,top:0},expandDisplay:"inline-block",collapseDisplay:"inline-block"}},i.expandHierarchy=function(){var e=RB()(i),t=e.hierarchyInfo,a=e.onChangeHandler,n=t.expandIndex;n=Math.min(n+1,t.level-1),a(t,t.subDims[n].name)},i.collapseHierarchy=function(){var e=RB()(i),t=e.hierarchyInfo;(0,e.onChangeHandler)(t,t.subDims[0].name)},i.container=new hU({tag:"div",className:"wyn-hierarchy-container"}),i.collapseBtn=new hU({tag:"span",className:"mdi-minus mdi",title:Ft("charts.tooltip.collapseHierarchy"),onClick:i.collapseHierarchy,style:{display:"none"}}),i.expandBtn=new hU({tag:"span",className:"mdi-plus mdi",title:Ft("charts.tooltip.expandHierarchy"),onClick:i.expandHierarchy,style:{display:"none"}}),i.container.addChildren(i.collapseBtn,i.expandBtn),i.addChildren(i.container),i}return D()(a,[{key:"render",value:function(){var e=this.getHierarchyState(),t=e.position,a=e.display,n=e.expandDisplay,i=e.collapseDisplay;this.container.setStyle({left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),display:a}),this.collapseBtn.setStyle({display:i}),this.expandBtn.setStyle({display:n})}},{key:"setHierarchyInfo",value:function(e){this.hierarchyInfo=e,this.disabled||this.render()}},{key:"init",value:function(e){this.onChangeHandler=e}},{key:"setDisabled",value:function(e){(this.disabled=e)&&this.container.setStyle({display:"none"})}}]),a}(mU),sY=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},lY=function(e){k()(n,e);var t=w()(n);function n(){var f;return I()(this,n),(f=t.call(this)).data={},f._getPivotSettingFields=function(){var e=RB()(f).pivotSettingHelper,t=ae.map(function(e){return Object.assign(Object.assign({},e),{isValue:!0})},e.getUsedValueItems(!1,{withoutHiddenDataRoles:!0})),a=e.getUsedDimensionItems();return ae.concat(t,a)},f._parseCategoryEventModel=function(e){var t,a=e.hitPoint,n=e.categoryModel,i=e.activePoint,r=Gj(n,i,null===(t=f.data)||void 0===t?void 0:t.aggregatedData.profile,f.context.store.getDefinitionId());return{hitPoint:a,fields:r.points.map(function(e){return{display:e.columnName,value:e.columnValue}}),title:r.category}},f.onMouseEnterCategoryHandler=function(e){var t=f.context.store.getProperties().tooltipMode;if(!f.isTooltipModalShown){var a=f._parseCategoryEventModel(e);t===H.TooltipMode.Category&&C()(b()(n.prototype),"_showToolTip",RB()(f)).call(RB()(f),a)}},f.onMouseLeaveCategoryHandler=function(){f.isCategoryTooltipShown&&f.tooltip.hide()},f.onSelectionChangeHandler=function(e){var t=f._parseEventModel(e).info;f.context.eventHub.fireSelectionChange(f.makeSelection(t),f.pivotSettingHelper.getTinyProfile());var a=f.context.store.getProperties().clickAction;a!==H.InteractionMouseEventAction.ShowTooltip&&a!==H.InteractionMouseEventAction.None||(f.selectedInfo={selectedFields:null==t?void 0:t.selectedFields,selectedFieldsWithMeasure:null==t?void 0:t.selectedFieldsWithMeasure},t&&t.selectedFields&&0<t.selectedFields.length?f.onCrossFilter(t):f.clearCrossFilter(),f.context.pageContext.pageModel.triggerSelectionChange(f.context.store.id,null==t?void 0:t.selectedFieldsWithMeasure))},f.onSyncSelectionHandler=function(e){f.selectedInfo&&(f.selectedInfo.selectedFieldsWithMeasure=IK(e,f.selectedInfo.selectedFieldsWithMeasure))},f.getHierarchyHitInfo=function(e){var t,a,n=e&&e.model;if(n){var i=f.context.store.getDefinitionId();if(Jr.isRadialChart(i))return{type:f._getRoleNameByLegacy(i,"rows"),rect:{top:0,left:0}};if(n.type===__.ElementType.Legend||n.type===__.ElementType.LegendItem||n.type===__.ElementType.LegendTitle||n.type===__.ElementType.LegendItemSymbol||n.type===__.ElementType.LegendItemLabel){for(var r=n;r.type!==__.ElementType.Legend;)r=r.parent;var o=r.queryInterface("IShapeModel"),s=null===(t=null==o?void 0:o.shapes)||void 0===t?void 0:t[0];if(s)return{type:f._getRoleNameByLegacy(i,"columns"),rect:f._getRectByShape(s)}}else if(n.type===__.ElementType.Axis||n.type===__.ElementType.AxisTitle||n.type===__.ElementType.AxisLabel||n.type===__.ElementType.AxisUnitLabel){for(var l=n;l.type!==__.ElementType.Axis;)l=l.parent;if(Jr.isCartesianChart(i)){var u=l.queryInterface("IShapeModel"),c=null===(a=null==u?void 0:u.shapes)||void 0===a?void 0:a[0];if(c)return{type:f._getRoleNameByLegacy(i,"rows"),rect:f._getRectByShape(c)}}}else{if(n.type===__.ElementType.TrellisRowHeader){var d=n._trellisRowsView()._trellisView(),p=d._rectangle(),h=d.corner._rectangle();return{type:"trellisRows",rect:{left:h.left,top:h.top+h.height,width:h.width,height:p.height-h.height}}}if(n.type===__.ElementType.TrellisColumnHeader){var y=n._trellisColumnsView()._trellisView(),g=y._rectangle(),m=y.corner._rectangle();return{type:"trellisColumns",rect:{left:m.left+m.width,top:m.top,width:g.width-m.width,height:m.height}}}}}},f.getHierarchyInfo=function(e){var t=RB()(f).pivotSettingHelper.getPivotSetting({valuesOnly:!0})[e&&e.type];if(t&&0<t.length)for(var a=0;a<t.length;a++){var n=t[a];if(Jr.isHierarchy(n))return{type:e.type,rect:e.rect,index:a,expandIndex:n.expandIndex,level:n.subDims.length,subDims:n.subDims}}return null},f.onMouseOutHandler=function(){var e;null!==(e=f.chartHierarchy)&&void 0!==e&&e.setHierarchyInfo(null)},f.onMouseMoveHandler=function(e){var t,a;f._moveTooltip(null===(t=null==e?void 0:e.event)||void 0===t?void 0:t.originalEvent);var n=f.getHierarchyInfo(f.getHierarchyHitInfo(e));null!==(a=f.chartHierarchy)&&void 0!==a&&a.setHierarchyInfo(n),f.lastHitPoint=e?e.point:null},f.onChartUpdate=function(t){var a=RB()(f).lastHitPoint;a&&window.setTimeout(function(){var e=t.dvInstance.hitTest(a);e&&f.onMouseMoveHandler(f.getHierarchyHitInfo(e))},20)},f.setInteractionInfo=function(){var e,t=f.context,a=t.store,n=t.pageContext,i=f.hostContainer.getRef().getBoundingClientRect(),r={x:i.x,y:i.y},o=null===(e=n.pageModel)||void 0===e?void 0:e.getScenario(a.id);f.interactionManager.setState({store:a,pageContext:n,pivotSettingHelper:f.pivotSettingHelper,drillSetting:f.drillSetting,offset:r,scenarioModel:o})},f.onShapeClickHandler=function(e,t){var a=f._parseEventModel(e,t),n=a.info,i=a.isSelectedItem,r=f.context.store.getProperties().clickAction,o=n.selectedFields,s=n.selectedFieldsWithMeasure,l=n.hitPoint;r===H.InteractionMouseEventAction.ShowTooltip?i?f._showToolTipModal(n,!0):f._hideToolTipModal():null!=r&&r!==H.InteractionMouseEventAction.None&&(f.setInteractionInfo(),f.interactionManager.handleClickAction(l,o,s).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&f.cleanSelection()}))},f.onContextMenu=function(e){var t,a;e.preventDefault();var n=null===(t=f.selectedInfo)||void 0===t?void 0:t.selectedFields,i=null===(a=f.selectedInfo)||void 0===a?void 0:a.selectedFieldsWithMeasure;f.setInteractionInfo();var r={x:e.clientX,y:e.clientY};f.interactionManager.showContextMenuActions(r,n,i).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&f.cleanSelection()})},f.onToggleLoadingHandler=function(e){e?f.context.eventHub.fireLoadStart():f.context.eventHub.fireLoadComplete()},f.reset=function(){f.tooltip.hide()},f.textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),f.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return f.clearAll()}}),f.hostContainer.addChildren(f.textPanel,f.contextMenu),f}return D()(n,[{key:"didMount",value:function(){C()(b()(n.prototype),"didMount",this).call(this),this.hostContainer.addEventListener("mouseleave",this.onMouseOutHandler)}},{key:"willUnmount",value:function(){C()(b()(n.prototype),"willUnmount",this).call(this),this.hostContainer.removeEventListener("mouseleave",this.onMouseOutHandler)}},{key:"_parseEventModel",value:function(e,t){if(!e)return{};var a=this._getPivotSettingFields(),n=this.pivotSettingHelper;return{info:Wj(e,a,n,this.context.store.getDefinitionId(),t),isSelectedItem:!!e.selected.length}}},{key:"_showToolTip",value:function(e){var t=this.context.store.getProperties().tooltipMode;this.isTooltipModalShown||t===H.TooltipMode.DataPoint&&C()(b()(n.prototype),"_showToolTip",this).call(this,e)}},{key:"makeSelection",value:function(e){return null!=e&&e.selectedFieldsWithMeasure?e.selectedFieldsWithMeasure.map(function(e){return e.reduce(function(e,t){return e[t.display]=t.originalValue,e},{})}):[]}},{key:"onCrossFilter",value:function(e){var t=Yz(e),a=this.context,n=a.store,i=a.pageContext;n.setCrossFilter(t)&&i.pageModel.doCrossFilter(n.id)}},{key:"_getRoleNameByLegacy",value:function(e,t){var a;switch(e){case H.ChartType.Pie:case H.ChartType.Donut:case H.ChartType.Rose:case H.ChartType.Funnel:case H.ChartType.RadialStackedBar:case H.ChartType.DisaggregateScatter:case H.ChartType.Bubble:"rows"!==t&&(a="series");break;case H.ChartType.Sunburst:case H.ChartType.TreeMap:"rows"===t&&(a="details");break;case H.ChartType.Gauge:case H.ChartType.Indicator:case H.ChartType.KPI:break;default:a="rows"!==t?"series":"category"}return a}},{key:"_getRectByShape",value:function(e){if(e){var t=e.queryInterface("IRectangleShape"),a=t.center,n=t.size;return{left:a.x-.5*n.width,top:a.y-.5*n.height,width:n.width,height:n.height}}}},{key:"_moveTooltip",value:function(e){var t=this;e&&Ho.throttle(function(){t.tooltip.opened&&!t.isTooltipModalShown&&t.tooltip.move({x:e.clientX,y:e.clientY-10})},16)()}},{key:"hasCustomInput",value:function(e){return e.valueSourceType===Ui.CustomInput||e.comparisonSourceType===Ui.CustomInput}},{key:"getChartState",value:function(){var e,t,a,n,i=this.context.store,r=this.pivotSettingHelper,o=this.data,s=i.getDefinitionId(),l=i.getProperties(),u=!1,c=!(null!=o&&o.aggregatedData);return vK(s)?this.hasCustomInput(l)?c=!1:null!=r&&r.hasSetting()&&(u=!r.hasValueSetting({withoutHiddenDataRoles:!0})||(!(null!=o&&o.aggregatedData)||0===(null===(e=this.data)||void 0===e?void 0:e.aggregatedData.data.length))):null!=r&&r.hasSetting()&&(u=s===H.ChartType.Composite?!(null!=o&&o.aggregatedData)||0===(null===(t=this.data)||void 0===t?void 0:t.aggregatedData.data.leftValues.data.length)&&0===(null===(a=this.data)||void 0===a?void 0:a.aggregatedData.data.rightValues.data.length):!(null!=o&&o.aggregatedData)||0===(null===(n=this.data)||void 0===n?void 0:n.aggregatedData.data.length)),{isMock:c,isNoData:u}}},{key:"refresh",value:function(){var e;if(this.chart){var t=null===(e=this.data)||void 0===e?void 0:e.config,a=this.getChartState();a.isNoData?(this.textPanel.show(),this.chart.hide()):(this.textPanel.hide(),this.chart.show(),this.chart.useMockStyle(a.isMock),this.chart.setDvData(t),this.chart.refresh())}}},{key:"init",value:function(d){return sY(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.context.store,a=t.getProperties(),n=a.clickAction,i=t.getOptions(),r=i.contextMenuActions,this.interactionManager=new qj({onKeepOrExclude:d.onKeepOrExclude,onDrillTo:d.onDrillChange,onFinishJumpTo:this.reset,contextMenu:this.contextMenu,clickAction:n,contextMenuActions:r,dashboardName:t.getDashboardName()}),o=this.context.store.getDefinitionId(),s=o===H.ChartType.FloorPlan,this.chart=new(s?rY:nY),this.hostContainer.addChildren(this.chart),s?this.chart.init({handlers:{onShapeClick:this.onShapeClickHandler,onBlankClick:this.onBlankClickHandler,onSelectionChange:this.onSelectionChangeHandler,onMouseEnter:this.onMouseEnterHandler,onMouseMove:this.onMouseMoveHandler,onMouseLeave:this.onMouseLeaveHandler,onRePaint:this.onRePaintHandler,onToggleLoading:this.onToggleLoadingHandler},floorPlanId:this.context.store.getProperties().floorPlanId}):(this.chart.init({handlers:{onShapeClick:this.onShapeClickHandler,onBlankClick:this.onBlankClickHandler,onSelectionChange:this.onSelectionChangeHandler,onSyncSelection:this.onSyncSelectionHandler,onMouseEnter:this.onMouseEnterHandler,onMouseLeave:this.onMouseLeaveHandler,onRePaint:this.onRePaintHandler,onMouseMove:this.onMouseMoveHandler,onMouseEnterCategory:this.onMouseEnterCategoryHandler,onMouseLeaveCategory:this.onMouseLeaveCategoryHandler,onChartUpdate:this.onChartUpdate},keepSelection:!0,scenarioId:t.id}),this.chartHierarchy=new oY,this.hostContainer.addChildren(this.chartHierarchy),this.chartHierarchy.init(d.onHierarchyStateChange)),this.tooltip=new VU,this.tooltip.setOnClose(function(){c.isTooltipModalShown=!1,c.isCategoryTooltipShown=!1}),l=t.getProperties(),u=l.noData,this.textPanel.setTextStyle(u.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(u),this.hostContainer.addChildren(this.tooltip);case 15:case"end":return e.stop()}},e,this)}))}},{key:"setAggData",value:function(e,t){var a;this.pivotSettingHelper=e,this.data=t||{};var n=e.getUsedDimensionItems(!1,{withoutHierarchy:!1}).find(function(e){return Jr.isHierarchy(e)});null!==(a=this.chartHierarchy)&&void 0!==a&&a.setDisabled(!n),this.scheduleRefresh()}},{key:"resize",value:function(){this.textPanel.setScale(this.context.pageContext.getScale()),this.scheduleRefresh()}},{key:"cleanSelection",value:function(){this.chart.cleanSelection()}},{key:"setDrillSetting",value:function(e){this.drillSetting=e}},{key:"listenDrillCommand",value:function(e,t){var r=this,a=t.onClearDrill,n=t.onActiveDrillItemChange,i=t.getDrillDownPath;e.on(H.Command.DrillDown,function(e,t,a){var n;r.setInteractionInfo();var i=r.interactionManager.getRootDrillDownType();t||i===H.DrillDownType.Path?r.interactionManager.tryDrill(null===(n=r.selectedInfo)||void 0===n?void 0:n.selectedFields,e,t).then(function(){r.cleanSelection(),a.resolve()}).catch(a.reject):a.reject(rU.invalidDimension(t))}),e.on(H.Command.DrillUp,function(e,t){r.setInteractionInfo(),n(e),t.resolve()}),e.on(H.Command.DrillReset,function(e){var t=i();!t||t.length<=1?e.reject(rU.noDrillItem(H.Command.DrillReset)):(r.setInteractionInfo(),a(e),e.resolve())})}}]),n}(iY),uY=function(e){k()(r,e);var n=w()(r);function r(){var i;I()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(i=n.call.apply(n,[this].concat(t)))._handleData=function(e){var t,a=i._getSelectedItems(),n=null===(t=i.config.plots[0])||void 0===t?void 0:t.config.map.geojson.features;return AG(e.event,e.model,a,n)},i}return D()(r,[{key:"_recalculateBubbleSize",value:function(){var e=this.container.getBoundingClientRect(),t=e.width,a=e.height,n=Math.min(t,a);this.config.plots[1].config.style.symbolSize=n/70}},{key:"refresh",value:function(){if(this.config){if(2===this.config.plots.length){this._recalculateBubbleSize();var t=this.dvInstance.query("[selected=true]");t=t.map(function(e){return e.location.identify}),this.dvInstance.load(this.config),t.length&&this.dvInstance.model.plotAreas[0].plotsPanes[0].plots[1].points.forEach(function(e){t.includes(e.location.identify)&&(e.selected=!0)})}this.dvInstance.refresh()}}},{key:"load",value:function(t){var r=this;2===(this.config=t).plots.length&&this._recalculateBubbleSize(),this.lastModel=null;var a,e=this.dvInstance.query("[selected=true]");e.length&&(a=e.map(function(e){return 1===e.items.length?DK(e.items[0]):1<e.items.length?{queryStr:"[]",itemsId:e.location.identify}:{queryStr:"[]",itemsId:""}}).filter(function(e){return e}));try{this.dvInstance.load(t)}catch(e){nu.error(e),t.data.values=[],this.dvInstance.load(t)}!function(){if(a&&a.length){var e=a.reduce(function(e,t){var a=t.queryStr,n=t.itemsId,i=r.dvInstance.query(a);return i=i.filter(function(e){var t=e.items;return(e.location?e.location.identify:DK(t[0]).itemsId)===n}),e=e.concat(i)},[]);r.dvInstance.select(e)}}(),this.dvInstance._isMap=!0,this.emitter.emit(cK)}}]),r}(aY),cY=r.fetchGeoJson,dY=r.getOfflineData,pY=r.getDefaultMapHierarchyInfo,hY=function(e){k()(i,e);var n=w()(i);function i(){var t;I()(this,i),(t=n.call(this)).isMock=!1,t.errorHandler=function(e){t.handlers.onToggleLoading(!1),t.context.eventHub.fireFailed(e)};var e=new hU({tag:"div",className:"layout-full-flex"}),a=new hU({tag:"div",className:"wyn-chart-overlay"});return t.addChildren(e,a),t.host=e,t.mockOverlay=a,t}return D()(i,[{key:"init",value:function(e){var t=this;this.handlers=e.handlers;var a=new uY(this.host.getRef());a.on(tK,function(){return t.handlers.onBlankClick()}),a.on(iK,function(e){return t.handlers.onShapeClick(e)}),a.on(aK,function(e){return t.handlers.onMouseEnter(e)}),a.on(dK,function(e){t.handlers.onMouseMove(e)}),a.on(nK,function(){return t.handlers.onMouseLeave()}),a.on(uK,function(e){return t.handlers.onSelectionChange(e)}),a.on(cK,function(){return t.handlers.onRePaint()}),a.on(pK,function(e){return t.handlers.onShapeClick(e)}),this.chart=a,this.buildConfig=e.buildConfig,this.setMapInfo(e.mapInfo)}},{key:"willUnmount",value:function(){this.chart&&(this.chart.dispose(),this.chart=null,this.geoPromise&&this.geoPromise.cancel())}},{key:"isOnlineChinaMap",value:function(){return 1e5===this.nodeId&&this.mode===hr.Online}},{key:"renderChart",value:function(){var i=this,e=this.isOnlineChinaMap();this.geo&&(this.context.eventHub.fireRender(),this.buildConfig&&this.buildConfig.apply?this.buildConfig(this.geo.projection,e).then(function(e){var t,a,n=(t=e,a=i.geo.content,t=ae.set(ae.lensPath(["plots",0,"config","map","geojson"]),a,t));i.chart.load(n)}).finally(function(){i.context.eventHub.fireRendered()}):this.context.eventHub.fireRendered())}},{key:"_fetchGeoJson",value:function(){var n=this;this.geoPromise&&this.geoPromise.isPending()&&(this.geoPromise.cancel(),this.handlers.onToggleLoading(!1)),this.handlers.onToggleLoading(!0);var e=this.mode,t=this.nodeId;this.geoPromise=t?cY(t,e).then(function(e){n.handlers.onToggleLoading(!1);var t=n.isOnlineChinaMap();if(e&&t){var a=e.content.features.find(function(e){return 46e4===e.properties.adcode&&""===e.properties.name});a&&(a.geometry.coordinates=a.geometry.coordinates.filter(function(e){var t=e[0];return 10<t.length&&t.every(function(e){return 18<e[1]})}))}n.geo=e,n.renderChart()},this.errorHandler):dY(e).then(function(e){n.handlers.onToggleLoading(!1);var t=pY(e);t.hierarchyId&&t.nodeId},this.errorHandler)}},{key:"refresh",value:function(){this.renderChart()}},{key:"cleanSelection",value:function(){this.chart.cleanSelection()}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}))}},{key:"setMapInfo",value:function(e){var t=e.mode!==this.mode||e.nodeId!==this.nodeId;this.nodeId=e.nodeId,this.mode=e.mode,t&&this._fetchGeoJson()}},{key:"repaint",value:function(){this.chart.refresh()}}]),i}(mU),yY=function(e){k()(a,e);var t=w()(a);function a(){var g;return I()(this,a),(g=t.call(this))._isHiddenDataRoleItem=function(e,t){return null!=e.find(function(e){return e.display===t.display})},g._formatTooltipValue=function(e){var t=RB()(g).pivotSettingHelper,n=t.getUsedValueItems(!1,{withoutHiddenDataRoles:!0}),i=t.getUsedDimensionItems();return e.map(function(t){if(Number.isNaN(+t.value)){var e=n.concat(i).find(function(e){return e.display===t.display});if(e)return Object.assign(Object.assign({},t),{value:e.formatValue(t.value),originalValue:t.value,field:e.name})}else{var a=n.concat(i).find(function(e){return e.display===t.display});if(a)return Object.assign(Object.assign({},t),{value:Nu(t.value,a),originalValue:t.value,field:a.name})}return t})},g.onMouseMoveHandler=function(e){g._moveTooltip(e.event.originalEvent)},g._getSelectedFields=function(e){var t=g.pivotSettingHelper.getUsedDimensionItems(["lat","long"]).reduce(function(e,t){return e[t.display]=t,e},{});return e.selectedAreaWithMeasure.map(g._formatTooltipValue).map(function(e){return e.filter(function(e){return t[e.display]}).map(function(e){return{field:t[e.display].name,value:e.value,originalValue:e.value}})})},g._showToolTipModal=function(e){var t,a,n,i=e.geo,r={point:e.point,data:g._formatTooltipValue(e.data),geoInfo:i,selectedArea:e.selectedArea,selectedAreaWithMeasure:ae.map(g._formatTooltipValue,e.selectedAreaWithMeasure),inLatLong:e.inLatLong,isSelectMixedModels:e.isSelectMixedModels};n=eY(r)?(r.selectedFields=g._getSelectedFields(e),{position:r.point,fields:null===(t=r.data)||void 0===t?void 0:t.map(function(e){return{label:e.display,value:e.value}}),selected:r.selectedFields}):{position:r.point,fields:null===(a=r.data)||void 0===a?void 0:a.map(function(e){return{label:e.display,value:e.value}}),selected:r.selectedArea},g.isTooltipModalShown=!0,g.tooltip.show(n)},g.onSelectionChangeHandler=function(e){g.context.eventHub.fireSelectionChange(g.makeSelection(e),g.pivotSettingHelper.getTinyProfile());var t=g.context.store.getProperties().clickAction;t!==H.InteractionMouseEventAction.ShowTooltip&&t!==H.InteractionMouseEventAction.None||((g.selectedInfo=e)&&e.selectedArea&&0<e.selectedArea.length?g.onCrossFilter(e.selectedArea):eY(e)?g.onLatLongCrossFilter(e):g.clearCrossFilter(),g.context.pageContext.pageModel.triggerSelectionChange(g.context.store.id,null==e?void 0:e.selectedAreaWithMeasure))},g.setInteractionInfo=function(e){var t,a=null!=e?e:{},n=a.geo,i=a.inLatLong,r=a.selectedArea,o=a.isSelectMixedModels,s=RB()(g),l=s.context,u=l.store,c=l.pageContext,d=s.pivotSettingHelper,p=s.drillSetting,h=u.getProperties().pivotFilters,y=null===(t=c.pageModel)||void 0===t?void 0:t.getScenario(u.id);g.interactionManager.setState({store:u,pageContext:c,pivotSettingHelper:d,drillSetting:p,geo:n,inLatLong:i,selectedArea:r,isSelectMixedModels:o,pivotFilters:h,scenarioModel:y})},g.onShapeClickHandler=function(e,t){var a=g._parseEventModel(e,t),n=a.info,i=a.isSelectedItem,r=g.context.store.getProperties().clickAction,o=n.selectedArea,s=n.selectedAreaWithMeasure,l=n.inLatLong,u=n.point,c=l?g._getSelectedFields(n):o,d=s.map(g._formatTooltipValue);r===H.InteractionMouseEventAction.ShowTooltip?i?g._showToolTipModal(n):g._hideToolTipModal():null!=r&&r!==H.InteractionMouseEventAction.None&&(g.setInteractionInfo(n),g.interactionManager.handleClickAction(u,c,d).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&g.cleanSelection()}))},g.onContextMenu=function(e){var t;e.preventDefault();var a=g.selectedInfo,n=eY(a)?g._getSelectedFields(a):null==a?void 0:a.selectedArea,i=null===(t=null==a?void 0:a.selectedAreaWithMeasure)||void 0===t?void 0:t.map(g._formatTooltipValue);g.setInteractionInfo(a);var r={x:e.clientX,y:e.clientY};g.interactionManager.showContextMenuActions(r,n,i).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&g.cleanSelection()})},g._getInteractiveDimensionName=function(e){return e[g.context.definition.getDrillDataRoles()[0]][0].name},g.onCrossFilter=function(e){var t=RB()(g).pivotSettingHelper.getPivotSetting({withoutInvalid:!0,valuesOnly:!0,disableExclusive:!0}),a={columnNames:[g._getInteractiveDimensionName(t)],rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,range:{items:e.map(function(e){return{value:nj(e)}})},exclude:!1},n=g.context,i=n.store,r=n.pageContext;i.setCrossFilter(a)&&r.pageModel.doCrossFilter(i.id)},g.onLatLongCrossFilter=function(e){var t=g._getSelectedFields(e),a=Yz({selectedFields:t}),n=g.context,i=n.store,r=n.pageContext;i.setCrossFilter(a)&&r.pageModel.doCrossFilter(i.id)},g.reset=function(){g.tooltip.hide()},g.chart=new hY,g.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return g.clearAll()}}),g.hostContainer.addChildren(g.chart,g.contextMenu),g}return D()(a,[{key:"_parseEventModel",value:function(e){var t=this,a=this.pivotSettingHelper,n=a.getFlattenedPivotSettingItems(!1,{withoutHiddenDataRoles:!0}),i=a.getHiddenDataRolesItems();return{info:Object.assign(Object.assign({},e),{data:e.data.filter(function(e){return!t._isHiddenDataRoleItem(i,e)}),selectedAreaWithMeasure:e.selectedAreaWithMeasure.map(function(e){return e.filter(function(e){return!t._isHiddenDataRoleItem(i,e)}).map(function(t){var e;return Object.assign(Object.assign({},t),{field:null===(e=n.find(function(e){return e.display===t.display}))||void 0===e?void 0:e.name})})})}),isSelectedItem:!!e&&e.selected}}},{key:"_showToolTip",value:function(e){var t=this.context.store.getProperties().tooltipMode;if(!this.isTooltipModalShown&&t===H.TooltipMode.DataPoint){var a;a=e.geo?e.geo.name||e.geo.NAME:"";var n=this._formatTooltipValue(e.data),i={position:e.point,title:a,fields:null==n?void 0:n.map(function(e){return{label:e.display,value:e.value}})};this.tooltip.show(i)}}},{key:"_moveTooltip",value:function(e){var t=this;Ho.throttle(function(){t.tooltip.opened&&!t.isTooltipModalShown&&t.tooltip.move({x:e.clientX,y:e.clientY-20})},16)()}},{key:"makeSelection",value:function(e){return null!=e&&e.selectedAreaWithMeasure?e.selectedAreaWithMeasure.map(function(e){return e.reduce(function(e,t){return e[t.display]=t.value,e},{})}):[]}},{key:"refresh",value:function(){var e;if(this.chart){this.chart.useMockStyle(!(null!==(e=this.data)&&void 0!==e&&e.aggregatedData));var t=this.context.store.getProperties();this.chart.setMapInfo(t.mapInfo),this.chart.refresh()}}},{key:"init",value:function(e){var t=this,a=this.context.store,n=a.getProperties(),i=n.clickAction,r=n.mapInfo,o=a.getOptions().contextMenuActions;this.interactionManager=new qj({onKeepOrExclude:e.onKeepOrExclude,onFinishJumpTo:this.reset,onMapDrillTo:e.onDrillChange,contextMenu:this.contextMenu,clickAction:i,contextMenuActions:o,mapInfo:r,dashboardName:a.getDashboardName()}),this.chart.init({buildConfig:e.buildConfig,handlers:{onShapeClick:this.onShapeClickHandler,onBlankClick:this.onBlankClickHandler,onSelectionChange:this.onSelectionChangeHandler,onMouseEnter:this.onMouseEnterHandler,onMouseMove:this.onMouseMoveHandler,onMouseLeave:this.onMouseLeaveHandler,onRePaint:this.onRePaintHandler,onToggleLoading:this.onLoadingStateChange},mapInfo:r}),this.tooltip=new VU,this.tooltip.setOnClose(function(){t.isTooltipModalShown=!1}),this.hostContainer.addChildren(this.tooltip)}},{key:"cleanSelection",value:function(){this.chart.cleanSelection()}},{key:"setDrillSetting",value:function(e){this.drillSetting=e}},{key:"resize",value:function(){this.scheduleRefresh()}},{key:"setAggData",value:function(e,t){this.pivotSettingHelper=e,this.data=t,this.scheduleRefresh()}},{key:"listenDrillCommand",value:function(e,t){var i=this,a=t.onClearDrill,n=t.onActiveDrillItemChange,r=t.getDrillDownPath;e.on(H.Command.DrillDown,function(e,t,a){var n;i.setInteractionInfo(i.selectedInfo),i.selectedInfo?i.interactionManager.tryDrill(null===(n=i.selectedInfo)||void 0===n?void 0:n.selectedFields,e,t).then(function(){i.cleanSelection(),a.resolve()}).catch(a.reject):a.reject(rU.noSelectionItem())}),e.on(H.Command.DrillUp,function(e,t){i.setInteractionInfo(i.selectedInfo),n(e),t.resolve()}),e.on(H.Command.DrillReset,function(e){var t=r();!t||t.length<=1?e.reject(rU.noDrillItem(H.Command.DrillReset)):(i.setInteractionInfo(i.selectedInfo),a(),e.resolve())})}}]),a}(iY),gY=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},mY=function(e){k()(a,e);var t=w()(a);function a(){var i;return I()(this,a),(i=t.call(this)).onHierarchyStateChange=function(e,t){i.context.store.doHierarchyChange(e,t),i.container.cleanSelection(),i.refresh()},i.onDrillToHandler=function(e,t){i.drillState.doDrillDownByDvInfo(e,t),i.breadcrumb.setDrillItems(i.drillState.getDrillDownPath()),i.refresh()},i.onDrillToHandlerForMap=function(e,t,a,n){i.drillState.doDrillDownByMapInfo(e,t,a,n),i.breadcrumb.setDrillItems(i.drillState.getDrillDownPath()),i.refresh()},i.onClearDrill=function(){i.drillState.clean(),i.breadcrumb.setDrillItems(i.drillState.getDrillDownPath()),i.container.cleanSelection(),i.refresh()},i.onActiveDrillItemChange=function(e){i.drillState.setActive(e),i.breadcrumb.setDrillItems(i.drillState.getDrillDownPath()),i.container.cleanSelection(),i.refresh()},i.breadcrumb=new MU({onClear:i.onClearDrill,onChange:i.onActiveDrillItemChange}),i.bodyHost.addChildren(i.breadcrumb),i}return D()(a,[{key:"init",value:function(){var e=this,l=Object.create(null,{init:{get:function(){return C()(b()(a.prototype),"init",e)}}});return gY(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.init.call(this),t=this.context,a=t.store,n=t.pageContext,i=t.definition,this.id=a.id,(r=a.getDefinitionId())===H.ChartType.Map?(o=PG,this.container=new yY):(o=r===H.ChartType.Composite?_G:WW,this.container=new lY),a.isSpreadSource()&&(o=c.SpreadSourceDecorator(o)),a.isMergedSource()&&(o=c.MergedSourceDecorator(o)),r===H.ChartType.Map||H.ChartType.Composite,this.scenarioModel=new o(a.id,{property:this.context.store.getProperties(),docTheme:this.context.store.getDocTheme(),colorAssignmentManager:d$.colorAssignmentManager,scale:this.context.pageContext.getScale()}),this.bodyHost.addChildren(this.container),r===H.ChartType.Map?this.container.init({buildConfig:this.scenarioModel.buildDvMapConfig,onDrillChange:this.onDrillToHandlerForMap,onKeepOrExclude:this.onKeepOrExclude}):this.container.init({onDrillChange:this.onDrillToHandler,onHierarchyStateChange:this.onHierarchyStateChange,onKeepOrExclude:this.onKeepOrExclude}),this.scenarioModel.on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),this.scenarioModel.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),this.scenarioModel.on(H.ScenarioEvent.Repaint,function(){s.container.repaint()}),n.pageModel.addScenario(this.scenarioModel,!0),this.scenarioTitle.init(a.getTitle(),n.getScale()),this.drillState=new Cj(a,i),this.breadcrumb.setDrillItems(this.drillState.getDrillDownPath()),this.container.listenDrillCommand(this.scenarioModel,{getDrillDownPath:function(){return s.drillState.getDrillDownPath()},onClearDrill:this.onClearDrill,onActiveDrillItemChange:this.onActiveDrillItemChange});case 19:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){C()(b()(a.prototype),"willUnmount",this).call(this),this.drillState.destroy()}},{key:"refresh",value:function(){this.container.reset(),this.context.pageContext.pageModel.doScenarioRefresh(this.id)}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.reset(),this.container.resize()}},{key:"onAggChange",value:function(e,t){C()(b()(a.prototype),"onAggChange",this).call(this),this.pivotSettingHelper=t,this.drillState.setPivotSettingHelper(t),this.container.setDrillSetting(this.drillState.getDrillSetting()),this.scenarioTitle.updateTitle(t),this.container.setAggData(t,e,{},{}),this.actionBarContainer.update(t)}}]),a}(JK);mY.checkColorRelationshipUpdated=function(e,t){var a=e.getDefinitionId(),n=e.getProperties(),i=e.getPivot(),r=!1,o=!1;if(t)if(a===H.ChartType.Map){if(n.mapTile.maintainColorAssignments){var s=zc(a,t,"mapTile");if(s){var l=s.dataPoints,u=s.columns,c=s.type;r=d$.colorAssignmentManager.checkDataColorRelationshipsShouldUpdated(i.datasetId,c,u,l)}}if(n.scatter.maintainColorAssignments){var d=zc(a,t,"scatter");if(d){var p=d.dataPoints,h=d.columns,y=d.type;o=d$.colorAssignmentManager.checkDataColorRelationshipsShouldUpdated(i.datasetId,y,h,p)}}}else if(n.maintainColorAssignments){var g=zc(a,t);if(g){var m=g.dataPoints,f=g.columns,v=g.type;r=d$.colorAssignmentManager.checkDataColorRelationshipsShouldUpdated(i.datasetId,v,f,m)}}return r||o},mY.updateColorRelationship=function(e,t){var a=e.getDefinitionId(),n=e.getProperties(),i=e.getPivot();if(t)if(a===H.ChartType.Map){if(n.mapTile.maintainColorAssignments){var r=zc(a,t,"mapTile");if(r){var o=r.dataPoints,s=r.columns,l=r.type;d$.colorAssignmentManager.updateDataColorRelationships(i.datasetId,l,s,o,n.mapTile.paletteId)}}if(n.scatter.maintainColorAssignments){var u=zc(a,t,"scatter");if(u){var c=u.dataPoints,d=u.columns,p=u.type;d$.colorAssignmentManager.updateDataColorRelationships(i.datasetId,p,d,c,n.scatter.paletteId)}}}else if(n.maintainColorAssignments){var h=zc(a,t);if(h){var y=h.dataPoints,g=h.columns,m=h.type;d$.colorAssignmentManager.updateDataColorRelationships(i.datasetId,m,g,y,n.paletteId)}}};function fY(e,t,a,n,i){return F()({},a,{fontSize:_u(a.fontSize,t),color:Vc(a.color,e),backgroundColor:Vc(n,e),borderRadius:"".concat(i.borderRadius,"px"),padding:0<i.borderRadius?"0 0.2em":"0"})}function vY(t,a){Object.keys(a).forEach(function(e){t.style[e]=a[e]})}var bY,CY,TY=a(34),SY=a.n(TY),DY=(SY.a.import("delta"),function(e){k()(o,e);var i=w()(o);function o(){var r;I()(this,o),(r=i.call(this)).expressionState={},r.isContentRendered=!1,r.containerClickHandler=function(e){e.preventDefault(),e.stopPropagation();var t,a,n,i=(t=e.target,n=t.parentElement,t.hasAttribute("data-jumptodocuments")?a=t.dataset.jumptodocuments:n.hasAttribute("data-jumptodocuments")&&(a=n.dataset.jumptodocuments),a?JSON.parse(a):[]);r.onCustomLinkClick&&r.onCustomLinkClick(e,i)};var e=new hU({tag:"div",className:"quill-editor-container"}),t=new hU({tag:"div",className:"quill-editor-rc quill-editor-rc-viewer"}),a=new hU({tag:"div",className:"quill-editor-body",onClick:r.containerClickHandler}),n=new PU({className:"layout-full",content:a});return r.host=a,r.wrapper=t,r.scrollView=n,r.addChildren(e),e.addChildren(t),t.addChildren(n),r}return D()(o,[{key:"mergeExpressionData",value:function(e){this.expressionState=Object.assign(Object.assign({},this.expressionState),e)}},{key:"setExpressionData",value:function(e){this.mergeExpressionData(e),this.renderExpressionData(e)}},{key:"renderExpressionData",value:function(u){var c=this,d=this.context.store,e=d.getProperties(),p=e.noData,h=e.emptyItemsString,y=e.emptyItemsFont,g=e.contentTextStyle;Object.keys(u).forEach(function(e){var t,a=u[e],n=c.host.getRef().querySelector("[data-expression='".concat(e,"']"));if(n)if(""===a)n.textContent=h,y&&vY(n,y);else if(a===Ft("richText.expression.noData")&&p&&p.text)n.textContent=p.text.split("\n").join(""),p.textStyle&&vY(n,p.textStyle);else if(n.textContent=a,t=n,["color","fontFamily","fontSize","fontWeight","fontStyle"].forEach(function(e){t.style[e]="unset"}),"string"==typeof a)n.textContent=a;else if(""===a.text?(n.textContent=h,y&&!a.style&&vY(n,h)):n.textContent=a.text,a.style){var i=a.style,r=i.textStyle,o=i.backgroundColor,s=i.borderStyle,l=fY(d.getDocTheme(),g,r,o,s);Object.keys(l).forEach(function(e){return n.style[e]=l[e]})}})}},{key:"init",value:function(e){var t=e.properties,a=t.contentVerticalMiddle,n=t.hyperlinkUnderline,i=e.theme,r=e.content,o=e.expressionState,s=e.onCustomLinkClick,l=e.parseExpression;this.wrapper.addClassName("quill-editor-link-".concat(n)),this.onCustomLinkClick=s,a&&this.wrapper.addClassName("ql-content-vertical-middle"),this.quillInstance=new SY.a(this.host.getRef(),{modules:{toolbar:null},readOnly:!0}),this.quillInstance.scroll.__themeParser=function(e){return Vc(e,i)},this.quillInstance.scroll.__expressionParser=l,this.content=r,this.expressionState=o,this.updateUI(),this.scrollView.update()}},{key:"updateUI",value:function(){this.isContentRendered||(this.quillInstance.setContents(this.content.delta),this.isContentRendered=!0),this.renderExpressionData(this.expressionState)}},{key:"render",value:function(){this.context.eventHub.fireRender(),this.updateUI(),this.scrollView.update(),this.context.eventHub.fireRendered()}},{key:"resize",value:function(){this.scrollView.update()}}]),o}(mU)),kY=function(e){k()(a,e);var t=w()(a);function a(){var i;return I()(this,a),(i=t.call(this)).onCustomLinkClick=function(e,t){1===t.length?i.onJumpTo(t[0]):1<t.length&&(i.contextMenu.setItems(t.map(function(e){return{value:e,label:e.name}})),i.contextMenu.show(e.clientX,e.clientY))},i.onJumpTo=function(e){var t=i.context,a=t.store,n=t.pageContext;i.jumpToManager.jumpTo(e,a.id,n)},i.richText=new DY,i.jumpToManager=new Pj,i.hostContainer.addChildren(i.richText),i}return D()(a,[{key:"setExpressionData",value:function(e){this.richText.mergeExpressionData(e),this.scheduleRefresh()}},{key:"init",value:function(e){var t=this.context,a=t.store,n=t.pageContext,i=a.getAttribute("editorContent"),r=a.getProperties();this.hostContainer.setStyle(Object.assign(Object.assign({},r.contentTextStyle),{fontSize:Jc(r.contentTextStyle.fontSize,n.getScale()),fontWeight:Uu(r.contentTextStyle.fontWeight)})),this.richText.init({content:i,properties:r,expressionState:e.expressionState,theme:a.getDocTheme(),onCustomLinkClick:this.onCustomLinkClick,parseExpression:function(e){return d$.datasetManager.getDatasetColumnDisplay(e.datasetId,e.value)}}),this.contextMenu=new QU({onSelect:this.onJumpTo,backdrop:!0,maxHeight:300,maxWidth:200}),this.hostContainer.addChildren(this.contextMenu)}},{key:"refresh",value:function(){this.richText.render()}},{key:"render",value:function(){this.scheduleRefresh()}},{key:"resize",value:function(){this.richText.resize();var e=this.context,t=e.store,a=e.pageContext,n=t.getProperties();this.hostContainer.setStyle({fontSize:Jc(n.contentTextStyle.fontSize,a.getScale())})}},{key:"destroy",value:function(){C()(b()(a.prototype),"destroy",this).call(this),this.jumpToManager&&this.jumpToManager.destroy()}}]),a}(Tj),wY=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},xY=function(e){k()(n,e);var t=w()(n);function n(){var a;return I()(this,n),(a=t.call(this)).onExpressionStateChange=function(e){a.container.setExpressionData(e)},a.onAggError=function(e){var t=Pd(e);t.id=e.id||Bd.a.v1(),a.context.eventHub.fireError(t)},a.container=new kY,a.bodyHost.addChildren(a.container),a}return D()(n,[{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(n.prototype),"init",e)}}});return wY(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,i=a.getAttribute("editorContent"),this.scenarioModel=new RM(this.id,i),this.scenarioModel.on(RM.EventType.ExpressionStateWillChange,this.onExpressionStateChange),this.scenarioModel.on(RM.EventType.ExpressionStateChange,this.onExpressionStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),n.pageModel.addScenario(this.scenarioModel,!0),this.container.init({expressionState:this.scenarioModel.getInitExpressionData()});case 10:case"end":return e.stop()}},e,this)}))}},{key:"refresh",value:function(){this.scenarioModel.hasExpression()?(this.container.render(),this.scenarioModel.refreshData()):this.container.render()}},{key:"resize",value:function(){this.container.resize()}}]),n}(JK);(CY=bY=bY||{}).ValueCell="valueCell",CY.SubTotalRow="subTotalRow",CY.SubTotalColumn="subTotalColumn",CY.SubTotalBoth="subTotalBoth",CY.GrandTotalRow="grandTotalRow",CY.GrandTotalColumn="grandTotalColumn",CY.GrandTotalBoth="grandTotalBoth",CY.RowHeader="rowHeader",CY.ColumnHeader="columnHeader",CY.CornerHeader="cornerHeader",CY.RowHeaderSubTotal="rowHeaderSubTotal",CY.ColumnHeaderSubTotal="columnHeaderSubTotal",CY.RowHeaderGrandTotal="rowHeaderGrandTotal",CY.ColumnHeaderGrandTotal="columnHeaderGrandTotal";function AY(e){var t=e.sheet,a=e.reachEndCallback,n=e.frozeRow,i=e.scrollByPixel;nu.assert(void 0!==t);try{if(t&&!t._disposed){var r=t.getRowCount(Dl.a.Spread.Sheets.SheetArea.viewport),o=t.getViewportBottomRow(1);if((n?r-1:r)<=o+1)LY.find(function(e){return e===t})?i?t.scroll(1):t.showCell(o,0):(setTimeout(function(){a?a():t._disposed||t.showCell(0,0);var e=LY.findIndex(function(e){return e===t});LY.splice(e,1)},i?1500:2e3),LY.push(t));else if(i)t.scroll(1);else{var s=t.getViewportTopRow(1);t.showCell(s+1,0)}}}catch(e){}}function IY(e,t){var a={500:80,1e3:48,1500:16};return!(0<arguments.length&&void 0!==e)||e||(a={500:1500,1e3:1e3,1500:500}),a[1<arguments.length&&void 0!==t?t:ua]}function PY(e,t,a){return n=AY,i=e,r=t,o=a,u=!1,l=Date.now(),function e(){i-(Date.now()-l)<=0&&(n.apply(r,[o]),l=Date.now()),u||(s=requestAnimationFrame(e))}(),function(){cancelAnimationFrame(s),u=!0};var n,i,r,o,s,l,u}function _Y(e,t){function s(){return y===Ur?g?'VALUE(INDIRECT(ADDRESS(ROW(),{{A3}},3,1,"{{sheet1}}")))':'VALUE(INDIRECT(ADDRESS(ROW(),COLUMN(),1,FALSE,"{{sheet1}}"),FALSE))':"INDIRECT(ADDRESS(ROW(),{{A3}},3))"}function r(){return y===Ur?g?'INDIRECT(ADDRESS(ROW(),{{A3}},3,1,"{{sheet1}}"))':'INDIRECT(ADDRESS(ROW(),COLUMN(),1,FALSE,"{{sheet1}}"),FALSE)':"INDIRECT(ADDRESS(ROW(),{{A3}},3))"}function o(){return y===Ur?'"{{sheet1}}"!{{A1}}:{{A2}}':"{{A1}}:{{A2}}"}function a(e){var t;return(t={},V()(t,Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.duplicateRule,"COUNTIF(".concat(o(),",").concat(r(),") > 1")),V()(t,Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.uniqueRule,"COUNTIF(".concat(o(),",").concat(r(),") = 1")),t)[e]}var n,i,l,u,c,d,p,h=1<arguments.length&&void 0!==t?t:Number.MAX_SAFE_INTEGER,y=null===(n=e.condition)||void 0===n?void 0:n._type,g=e.appliedToRow,m="";switch(e.condition.ruleType){case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.cellValueRule:var f=e.condition.operator,v=e.condition;m=function(e,t,a){var n,i=1<arguments.length&&void 0!==t?t:0,r=2<arguments.length&&void 0!==a?a:0,o=Dl.a.Spread.Sheets.ConditionalFormatting.ComparisonOperators;return(n={},V()(n,o.between,"AND(".concat(s(),">=").concat(i,",").concat(s(),"<=").concat(r,")")),V()(n,o.notBetween,"NOT(AND(".concat(s(),">=").concat(i,",").concat(s(),"<=").concat(r,"))")),V()(n,o.equalsTo,"".concat(s(),"=").concat(i)),V()(n,o.notEqualsTo,"NOT(".concat(s(),"=").concat(i,")")),V()(n,o.greaterThan,"".concat(s(),">").concat(i)),V()(n,o.lessThan,"".concat(s(),"<").concat(i)),V()(n,o.greaterThanOrEqualsTo,"".concat(s(),">=").concat(i)),V()(n,o.lessThanOrEqualsTo,"".concat(s(),"<=").concat(i)),n)[e]}(f,v.value1,v.value2);break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.specificTextRule:m=function(e,t){var a,n=1<arguments.length&&void 0!==t?t:"",i=Dl.a.Spread.Sheets.ConditionalFormatting.TextComparisonOperators;return(a={},V()(a,i.contains,'ISNUMBER(SEARCH("'.concat(n,'",').concat(r(),"))")),V()(a,i.doesNotContain,'NOT(ISNUMBER(SEARCH("'.concat(n,'",').concat(r(),")))")),V()(a,i.beginsWith,"LEFT(".concat(r(),',LEN("').concat(n,'"))="').concat(n,'"')),V()(a,i.endsWith,"RIGHT(".concat(r(),',LEN("').concat(n,'"))="').concat(n,'"')),V()(a,xn,"".concat(r(),'="').concat(n,'"')),V()(a,An,"".concat(r(),'<>"').concat(n,'"')),a)[e]}(e.condition.operator,e.condition.text);break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.dateOccurringRule:var b=e.condition.type;c=b,p=Dl.a.Spread.Sheets.ConditionalFormatting.DateOccurringType,d={},V()(d,p.today,'DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss"))=DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))')),V()(d,p.yesterday,'DATEVALUE(TEXT(TODAY()-1,"MM/DD/YYYY HH:mm:ss"))=DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))')),V()(d,p.tomorrow,'DATEVALUE(TEXT(TODAY()+1,"MM/DD/YYYY HH:mm:ss"))=DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))')),V()(d,p.last7Days,"AND(DATEVALUE(TEXT(".concat(r(),',"MM/DD/YYYY HH:mm:ss"))>DATEVALUE(TEXT(TODAY()-7,"MM/DD/YYYY HH:mm:ss")),DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))<=DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))')),V()(d,p.thisMonth,'AND(MONTH(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=MONTH(DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(d,p.lastMonth,'AND(MONTH(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))-1=MONTH(DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(d,p.nextMonth,'AND(MONTH(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))+1=MONTH(DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(d,p.thisWeek,'AND(WEEKNUM(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=WEEKNUM(DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(d,p.lastWeek,'AND(WEEKNUM(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))-1=WEEKNUM(DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(d,p.nextWeek,'AND(WEEKNUM(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))+1=WEEKNUM(DATEVALUE(TEXT('.concat(r(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(TODAY(),"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(r(),',"MM/DD/YYYY HH:mm:ss"))))')),m=d[c];break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.top10Rule:var C=e.condition;m=function(e,t){var a,n=1<arguments.length&&void 0!==t?t:10,i=Dl.a.Spread.Sheets.ConditionalFormatting.Top10ConditionType,r=h<n?h:n;return(a={},V()(a,i.top,"".concat(s()," >= LARGE(").concat(o(),", ").concat(r,")")),V()(a,i.bottom,"".concat(s()," <= SMALL(").concat(o(),", ").concat(r,")")),a)[e]}(C.type,C.rank);break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.averageRule:var T=e.condition.type;i=T,u=Dl.a.Spread.Sheets.ConditionalFormatting.AverageConditionType,l={},V()(l,u.above,"".concat(s()," > AVERAGE(").concat(o(),")")),V()(l,u.below,"".concat(s()," < AVERAGE(").concat(o(),")")),V()(l,u.equalOrAbove,"".concat(s()," >= AVERAGE(").concat(o(),")")),V()(l,u.equalOrBelow,"".concat(s()," <= AVERAGE(").concat(o(),")")),V()(l,u.above1StdDev,"".concat(s()," > (AVERAGE(").concat(o(),") + STDEV.P(").concat(o(),"))")),V()(l,u.below1StdDev,"".concat(s()," < (AVERAGE(").concat(o(),") - STDEV.P(").concat(o(),"))")),V()(l,u.above2StdDev,"".concat(s()," > (AVERAGE(").concat(o(),") + 2 * STDEV.P(").concat(o(),"))")),V()(l,u.below2StdDev,"".concat(s()," < (AVERAGE(").concat(o(),") - 2 * STDEV.P(").concat(o(),"))")),V()(l,u.above3StdDev,"".concat(s()," > (AVERAGE(").concat(o(),") + 3 * STDEV.P(").concat(o(),"))")),V()(l,u.below3StdDev,"".concat(s()," < (AVERAGE(").concat(o(),") - 3 * STDEV.P(").concat(o(),"))")),m=l[i];break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.duplicateRule:m=a(Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.duplicateRule);break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.uniqueRule:m=a(Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.uniqueRule);break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.formulaRule:var S=e.condition.formula;"string"==typeof S&&Jr.isBlankFormula(S)&&(m=function(e){var t=0<arguments.length&&void 0!==e&&e,a="OR(ISBLANK(".concat(r(),"),TRIM(").concat(r(),')="")');return t||(a="NOT(OR(ISBLANK(".concat(r(),"),TRIM(").concat(r(),')=""))')),a}(S.startsWith("ISBLANK")))}return m=m&&"=IF(ISERROR(".concat(m||"","),FALSE,").concat(m||"",")"),{id:e.id,appliedToRow:!0,condition:{conditionRule:"NormalConditionRule",ruleType:Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.formulaRule,formula:m},style:e.style,fieldIdentifier:e.fieldIdentifier}}function MY(a){function e(){return a.appliedToRow?"INDIRECT(ADDRESS(ROW(),{{A3}},3))":"INDIRECT(ADDRESS(ROW(),COLUMN(),1,False),FALSE)"}var t,n,i,r,o,s,l,u,c,d,p,h="";switch(a.condition.ruleType){case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.cellValueRule:var y=a.condition.operator;s=y,u=Dl.a.Spread.Sheets.ConditionalFormatting.ComparisonOperators,c=a.condition,d=c.minIncluded,p=c.maxIncluded,l={},V()(l,u.between,"AND(".concat(e()).concat(d?">=":">").concat(b(),",").concat(e()).concat(p?"<=":"<").concat(C(),")")),V()(l,u.notBetween,"OR(".concat(e()).concat(d?"<":"<=").concat(b(),",").concat(e()).concat(p?">":">=").concat(C(),")")),V()(l,u.equalsTo,"".concat(e(),"=").concat(b())),V()(l,u.notEqualsTo,"NOT(".concat(e(),"=").concat(b(),")")),V()(l,u.greaterThan,"".concat(e(),">").concat(b())),V()(l,u.lessThan,"".concat(e(),"<").concat(b())),V()(l,u.greaterThanOrEqualsTo,"".concat(e(),">=").concat(b())),V()(l,u.lessThanOrEqualsTo,"".concat(e(),"<=").concat(b())),V()(l,dn,"".concat(e()," > AVERAGE({{range}})")),V()(l,pn,"".concat(e()," < AVERAGE({{range}})")),V()(l,hn,"".concat(e()," > MAX({{range}})")),V()(l,yn,"".concat(e()," < MIN({{range}})")),h=l[s];break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.specificTextRule:var g=a.condition.type;r=g,o={},V()(o,un,"ISNUMBER(SEARCH(".concat(v(),",").concat(e(),"))")),V()(o,gn,"NOT(ISNUMBER(SEARCH(".concat(v(),",").concat(e(),")))")),V()(o,sn,"LEFT(".concat(e(),",LEN(").concat(v(),"))=").concat(v())),V()(o,ln,"RIGHT(".concat(e(),",LEN(").concat(v(),"))=").concat(v())),V()(o,xn,"".concat(e(),"=").concat(v())),V()(o,An,"".concat(e(),"<>").concat(v())),h=o[r];break;case Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.dateOccurringRule:var m=a.condition.type;n=m,i={},V()(i,mn,"DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss"))=DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))')),V()(i,fn,"DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss"))+1=DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))')),V()(i,vn,"DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss"))-1=DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))')),V()(i,bn,"AND(DATEVALUE(TEXT(".concat(f(),',"MM/DD/YYYY HH:mm:ss"))-7<DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")),DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))>=DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))')),V()(i,Cn,"AND(MONTH(DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss")))=MONTH(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(i,Tn,"AND(MONTH(DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss")))+1=MONTH(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(i,Sn,"AND(MONTH(DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss")))-1=MONTH(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(i,Dn,"AND(WEEKNUM(DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss")))=WEEKNUM(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(i,kn,"AND(WEEKNUM(DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss")))+1=WEEKNUM(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))))')),V()(i,wn,"AND(WEEKNUM(DATEVALUE(TEXT(".concat(e(),',"MM/DD/YYYY HH:mm:ss")))-1=WEEKNUM(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))),YEAR(DATEVALUE(TEXT(').concat(e(),',"MM/DD/YYYY HH:mm:ss")))=YEAR(DATEVALUE(TEXT(').concat(f(),',"MM/DD/YYYY HH:mm:ss"))))')),h=i[n]||"=FALSE"}function f(){var e=a.appliedToRow,t=a.condition.value1;return Object(Ho.isString)(t)?"".concat(t):e?'INDIRECT(ADDRESS(ROW(),{{A3}},3,1,"{{sheet1}}"))':'INDIRECT(ADDRESS(ROW(),COLUMN(),1,FALSE,"{{sheet1}}"),FALSE)'}function v(){var e=a.appliedToRow,t=a.condition.value1;return Object(Ho.isString)(t)?"".concat(t):e?'INDIRECT(ADDRESS(ROW(),{{A3}},3,1,"{{sheet1}}"))':'INDIRECT(ADDRESS(ROW(),COLUMN(),1,FALSE,"{{sheet1}}"),FALSE)'}function b(){var e=a.appliedToRow,t=a.condition.value1;return isNaN(+t)?e?'VALUE(INDIRECT(ADDRESS(ROW(),{{A3}},3,1,"{{sheet1}}")))':'VALUE(INDIRECT(ADDRESS(ROW(),COLUMN(),1,FALSE,"{{sheet1}}"),FALSE))':"".concat(t)}function C(){var e=a.appliedToRow,t=a.condition.value2;return isNaN(+t)?e?'VALUE(INDIRECT(ADDRESS(ROW(),{{A3}},3,1,"{{sheet2}}")))':'VALUE(INDIRECT(ADDRESS(ROW(),COLUMN(),1,FALSE,"{{sheet2}}"),FALSE))':"".concat(t)}return h=h&&"=IF(ISERROR(".concat(h,"),FALSE,").concat(h,")"),{id:a.id,appliedToRow:!1,condition:{conditionRule:(null==a||null===(t=a.condition)||void 0===t?void 0:t.conditionRule)||"NormalConditionRule",ruleType:Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.formulaRule,formula:h},style:a.style,fieldIdentifier:a.fieldIdentifier}}var LY=[];function RY(e){for(var t="";0<e;e=parseInt("".concat((e-1)/26),10)){var a=(e-1)%26;t=String.fromCharCode(65+a)+t}return t}function VY(e,t,a,n,i,r,o){var s=6<arguments.length&&void 0!==o?o:{},l=RY(a),u=RY(i),c=Object(Ho.template)(e,{interpolate:/{{([\s\S]+?)}}/g}),d=F()({},s,{A1:"$".concat(l,"$").concat(t),A2:"$".concat(u,"$").concat(n)});Object(Ho.isNil)(r)||(d.A3=r);try{return c(d)}catch(e){return"=FALSE"}}function NY(e){var t,a,n,i,r,o,s,l=e.id,u=e.appliedToRow,c=e.condition,d=e.style,p=e.fieldIdentifier,h=e.extendsStyle,y=c.ruleType,g=c.range,m=void 0===g?{}:g,f=c.rule,v=m.caseSensitive,b=m.pattern,C=(a=h,i=(t=d).color,r=void 0===i?"":i,o=t.secondaryColor,s=void 0===o?"":o,a&&(n=a),F()({backColor:r,foreColor:s},n));return{id:l,appliedToRow:u,condition:(v?function(e,t,a){var n,i,r="INDIRECT(ADDRESS(ROW(),COLUMN(),3))",o=Hr,s=ca,l=a||Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.formulaRule;switch(e){case un:n='FIND("'.concat(t,'",').concat(r,")");break;case sn:n="EXACT(LEFT(".concat(r,',LEN("').concat(t,'")),"').concat(t,'")');break;case ln:n="EXACT(RIGHT(".concat(r,',LEN("').concat(t,'")),"').concat(t,'")');break;case cn:n="EXACT(".concat(r,',"').concat(t,'")')}return{operator:e,conditionRule:s,ruleType:l,formula:(i=n,Object(Ho.isNil)(i)||!Object(Ho.isString)(i)?"FALSE":"=IF(ISERROR(".concat(i,"),FALSE,").concat(i,")")),_type:o}}:function(e,t,a){var n,i=t||"",r=Hr,o=ca,s=a||Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.specificTextRule;switch(e){case un:n=Dl.a.Spread.Sheets.ConditionalFormatting.TextComparisonOperators.contains;break;case sn:n=Dl.a.Spread.Sheets.ConditionalFormatting.TextComparisonOperators.beginsWith;break;case ln:n=Dl.a.Spread.Sheets.ConditionalFormatting.TextComparisonOperators.endsWith;break;case cn:n=xn}return{operator:n,value1:"",value2:"",text:i,conditionRule:o,ruleType:s,_type:r}})(f,b,y),style:C,fieldIdentifier:p}}function EY(e){function t(e){return e&&Object(Ho.isObject)(e)?e:null!=e?isNaN(+e)?'"'.concat(e,'"'):+e:""}var a,n,i,r=e.condition.range,o={operator:e.condition.rule,value1:r&&""!==r.min?t(e.condition.range.min):"",value2:r&&""!==r.max?t(e.condition.range.max):""};void 0!==e.condition.ruleType&&(o.ruleType=e.condition.ruleType),o.operator!==an&&o.operator!==nn||(o.value1=""===o.value1?o.value2:o.value1,o.value2="");var s={condition:o,style:{backColor:(null===(a=e.style)||void 0===a?void 0:a.color)||"",foreColor:(null===(n=e.style)||void 0===n?void 0:n.secondaryColor)||""},fieldIdentifier:e.fieldIdentifier};e.extendsStyle&&(s.style=F()({},s.style,{},e.extendsStyle)),e.extends?s.condition=F()({},o,{},e.extends):(o.conditionRule=ca,o.ruleType=Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.cellValueRule);var l=-1<[Dl.a.Spread.Sheets.ConditionalFormatting.ComparisonOperators.between,Dl.a.Spread.Sheets.ConditionalFormatting.ComparisonOperators.notBetween].indexOf(e.condition.rule),u=null==e||null===(i=e.extends)||void 0===i?void 0:i._type;if(l&&!u){var c=e.condition.range.minIncluded||void 0===e.condition.range.minIncluded?">=":">",d=e.condition.range.maxIncluded||void 0===e.condition.range.maxIncluded?"<=":"<",p=e.condition.range.max<e.condition.range.min?e.condition.range.max:e.condition.range.min,h=e.condition.range.min>e.condition.range.max?e.condition.range.min:e.condition.range.max;e.condition.rule===Dl.a.Spread.Sheets.ConditionalFormatting.ComparisonOperators.between?s.condition.formula="=AND(VALUE(INDIRECT(ADDRESS(ROW(), COLUMN(), 4))) ".concat(c," ").concat(p,", VALUE(INDIRECT(ADDRESS(ROW(), COLUMN(), 4))) ").concat(d," ").concat(h,")"):s.condition.formula="=NOT(AND(VALUE(INDIRECT(ADDRESS(ROW(), COLUMN(), 4))) ".concat(c," ").concat(p,", VALUE(INDIRECT(ADDRESS(ROW(), COLUMN(), 4))) ").concat(d," ").concat(h,"))"),s.condition.ruleType=Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.formulaRule,s.condition.operator=null,s.condition.value1=null,s.condition.value2=null}return l&&u===Br&&(s.condition.minIncluded=e.condition.range.minIncluded,s.condition.maxIncluded=e.condition.range.maxIncluded),s.id=e.id,s.appliedToRow=e.appliedToRow,s}function FY(e,t){var a=e.getPivotSetting({valuesOnly:!0,withoutHierarchy:!0,withoutInvalid:!0});return t?a.columns:[].concat(R()(null==a?void 0:a.values),R()(null==a?void 0:a.rows),R()(null==a?void 0:a.trellisRows))}function OY(e,t,a,n){var i=2<arguments.length&&void 0!==a?a:[],s=3<arguments.length&&void 0!==n?n:{showRowNumber:!1};if(null==e||!e.isReady())return{conditionFormats:[],pivotSettingValues:[]};var l="columns"===t,u=FY(e,l),r=u.reduce(function(e,t){var a=tl(t);return e.find(function(e){return Object(Ho.isEqual)(e.identifier,a)})||e.push({identifier:a,display:t.display,originalValue:t}),e},[]);return{conditionFormats:i.reduce(function(n,i){var e,t,r=((e=i).extends||void 0===(null===(t=e.condition.range)||void 0===t?void 0:t.pattern)?EY:NY)(e),o=l?{columnName:i.fieldIdentifier.columnName}:i.fieldIdentifier;return u.forEach(function(e){var t,a=tl(e);Object(Ho.isEqual)(a,o)?n.push(F()({},r,{invalid:e.invalid})):null!==(t=i.fieldIdentifier)&&void 0!==t&&t.attached&&s.showRowNumber&&!n.find(function(e){return Object(Ho.isEqual)(e,r)})&&n.push(r)}),n},[]),pivotSettingValues:r}}function HY(e,t,a){var n=!(2<arguments.length&&void 0!==a)||a,i=e.getPivotSetting({withoutHierarchy:n});return{roleValues:e.getRoleValues([t],i),roleOptions:e.getRoleOptions([t])}}function BY(e,t,a){var n={pivotAlignment:[],globalAlignment:t};return n.pivotAlignment=a.reduce(function(n,i){return HY(e,i).roleValues.forEach(function(e){var t,a=null===(t=e.options)||void 0===t?void 0:t.alignment;n.push({name:e.name,idx:e.idx,value:a,rolePath:i})}),n},n.pivotAlignment),n}function UY(e,t){var r=[],a={};return t.reduce(function(e,t){return a[t]||(e.push(t),a[t]=!0),e},[]).forEach(function(i){HY(e,i).roleValues.forEach(function(e,t){var a,n=null===(a=e.options)||void 0===a?void 0:a.renderSetting;r.push({name:e.name,index:t,rolePath:i,value:n})})}),r}function zY(e){var t=e.getUsedValueItems(!1,{withoutHiddenDataRoles:!0}),a=e.getUsedDimensionItems();return[].concat(R()(t),R()(a))}function KY(e,a){return e.map(function(t){var e=a.find(function(e){return e.columnName===t.display});return!(e=e||a.find(function(e){return e.columnName===t.name}))||t.invalid?null:{columnName:t.display,columnValue:Nu(e.value,t),isImage:e.isImage}}).filter(function(e){return null!=e})}function jY(e,t){var a=e.getFlattenedPivotSettingItems(!1,{withoutHiddenDataRoles:!0});return t.map(function(e){return e.map(function(t){var e=a.find(function(e){return e.name===t.field});return F()({},t,{display:null==e?t.field:e.display})})})}function WY(e,t,a){return a>=e.length?(e[a]=void 0,e[a]=t):e.splice(a,0,t),e}function GY(e){return new Dl.a.Spread.Sheets.Workbook(e,{sheetCount:1})}var YY,qY,JY="first",XY="last",QY="all",ZY="before",$Y="after",eq="global",tq=function(){function e(){I()(this,e)}return D()(e,[{key:"getAlign",value:function(){return this._options.alignment!==H.TableAlignment.Default&&this._options.alignment?this._options.alignment:H.TableAlignment.Center}},{key:"insertTo",value:function(e,t){return e.next.push(t),{parent:e,child:t}}},{key:"appendTo",value:function(e,t){var a;return(a=e.next).push.apply(a,R()(t.next)),t.next=[e],{parent:t,child:e}}},{key:"_need2Insert",value:function(e,t,a){return e===JY&&0===t||e===XY&&0===a.next.length||e===QY}},{key:"_need2IncreaseRowNumber",value:function(){return!0}},{key:"_createRowNumberNode",value:function(e,t){return F()({},e,{value:t})}},{key:"_attachRowNumberGlobal",value:function(e,o,t,a){for(var s=this,l=2<arguments.length&&void 0!==t?t:JY,u=3<arguments.length&&void 0!==a?a:0,c=e,d=e.map(function(e){return e}),n=d.length,p=0,i=function(e){var a=d.shift();if(s._need2Insert(l,u,a)){var t=s._createRowNumberNode(a,s._need2IncreaseRowNumber(a)?++p:""),n=o(t,a),i=n.parent,r=n.child;a._parent&&(a._parent.next[a._idx]=i,delete a._parent,delete a._idx),0===u&&(c[e]=i),d.push.apply(d,R()(r.next.map(function(e,t){return F()({},e,{_parent:r,_idx:t})})))}else d.push.apply(d,R()(a.next.map(function(e,t){return F()({},e,{_idx:t,_parent:a})})))},r=0;r<n;r+=1)i(r);return l!==JY&&d.length&&this._attachRowNumberGlobal(d,o,l,u+1),c}},{key:"_attachRowNumberRegion",value:function(e,s,t,a){var l=this,u=2<arguments.length&&void 0!==t?t:JY,c=3<arguments.length&&void 0!==a?a:0,d=e;return e.forEach(function(e,t){var a=e;if(l._need2Insert(u,c,a)){var n=l._createRowNumberNode(e,l._need2IncreaseRowNumber(e)?t+1:""),i=s(n,e),r=i.parent,o=i.child;d[t]=r,a=o}u!==JY&&a.next.length&&(a.next=l._attachRowNumberRegion(a.next,s,u,c+1))}),d}},{key:"attachRowNumber",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this._options=F()({},this._options,{},t);var a=this._options,n=a.adjoin,i=a.insertPosition,r=a.countRule,o=n===ZY?this.insertTo:this.appendTo;return this._tableData.rowHeaders=r===eq?this._attachRowNumberGlobal(this._tableData.rowHeaders,o,i,0):this._attachRowNumberRegion(this._tableData.rowHeaders,o,i,0),this._tableData}}]),e}(),aq=function(e){k()(r,e);var i=w()(r);function r(e){var t,l;I()(this,r),(l=i.call(this)).getCellInfo=function(e,i,t){var a,n=l._tableData.cornerHeaders[i];if(null==n||null===(a=n.identifier)||void 0===a?void 0:a._attached)return F()({},n,{valueField:{fieldName:n.identifier.columnName},attached:!0,sortOrder:Un,alignment:l.getAlign(),valueFieldIdentifier:{columnName:n.identifier.columnName,method:H.AggregationMethod.None}});var r,o=l._tableData.cornerHeaders.filter(function(e){var t;return null===(t=e.identifier)||void 0===t?void 0:t._attached}).length;r=l._tableData.cornerHeaders.reduce(function(e,t,a){var n;return null!==(n=t.identifier)&&void 0!==n&&n._attached&&a<i&&--e,e},i),l._tableData.rowLevel-=o;var s=l._tableData.getCellInfo(e,r,t);return l._tableData.rowLevel+=o,s},l.getResizedColumnIndex=function(n){var e=l._tableData.cornerHeaders;if(n.attached)return[e.findIndex(function(e){var t,a;return(null===(t=e.identifier)||void 0===t?void 0:t._attached)&&(null===(a=e.identifier)||void 0===a?void 0:a.columnName)===n.columns[0]})];var t=e.filter(function(e){var t;return null===(t=e.identifier)||void 0===t?void 0:t._attached}).length;l._tableData.rowLevel-=t;var a=l._tableData.getResizedColumnIndex(n)[0];if(l._tableData.rowLevel+=t,a<e.length-t){var i=0;a=e.findIndex(function(e){var t;return(i+=null!==(t=e.identifier)&&void 0!==t&&t._attached?0:1)-1===a})}else a+=t;return nu.assert(-1<a),[a]},l.canEdit=function(e,t){return l._tableData.canEdit(e,t)};var a=e.data,n=e.datasetInfo;return l._tableData=F()({},a,{rowHeaders:Object(Ho.cloneDeep)(a.rowHeaders),cornerHeaders:Object(Ho.cloneDeep)(a.cornerHeaders),rowLevel:a.rowLevel,getCellInfo:a.getCellInfo.bind(a),getResizedColumnIndex:a.getResizedColumnIndex.bind(a),canEdit:a.canEdit.bind(a),getValueFields:null===(t=a.getValueFields)||void 0===t?void 0:t.bind(a)}),l._datasetInfo=Object(Ho.cloneDeep)(n),l._options={showRowNumber:!0,adjoin:"after",countRule:"global",insertPosition:"last"},l}return D()(r,[{key:"_need2IncreaseRowNumber",value:function(e){var t=e.type;return-1===[bY.RowHeaderSubTotal,bY.RowHeaderGrandTotal].indexOf(t)}},{key:"_createRowNumberNode",value:function(e,t){return{type:e.type,value:t,originalValue:t,next:[],_level:e._level}}},{key:"_updateUsedRowDimensions",value:function(e,t){this._datasetInfo.usedRowDimensions=WY(this._datasetInfo.usedRowDimensions,{name:e,isTrellis:!1},t)}},{key:"_updateRenderSetting",value:function(e,t){this._datasetInfo.renderSettingInfo=WY(this._datasetInfo.renderSettingInfo,{name:e,rolePath:"rows",value:H.ImageRenderSetting.Text},t)}},{key:"_updatePivotAlignmentInfo",value:function(e,t){this._datasetInfo.alignmentInfo.pivotAlignment=WY(this._datasetInfo.alignmentInfo.pivotAlignment,{name:e,value:this.getAlign(),rolePath:"rows"},t)}},{key:"_insertRowNumber2Corner",value:function(){var i=this,e=this._options,t=e.insertPosition,r=e.adjoin,a=this._tableData.cornerHeaders||[];switch(t){case JY:var n,o=r===ZY?0:1,s=null===(n=a[0])||void 0===n?void 0:n.value;WY(a,{type:"cornerHeader",value:"#",sortOrder:0,next:[],identifier:{columnName:s,_attached:!0}},o),this._tableData.rowLevel+=1,this._updateUsedRowDimensions("".concat(s,"_attached"),o),this._updateRenderSetting("".concat(s,"_attached"),o),this._updatePivotAlignmentInfo("".concat(s,"_attached"),o);break;case XY:var l,u=r===ZY?a.length-1:a.length,c=null===(l=a[a.length-1])||void 0===l?void 0:l.value;WY(a,{type:"cornerHeader",value:"#",sortOrder:0,next:[],identifier:{columnName:c,_attached:!0}},u),this._tableData.rowLevel+=1,this._updateUsedRowDimensions("".concat(c,"_attached"),u),this._updateRenderSetting("".concat(c,"_attached"),u),this._updatePivotAlignmentInfo("".concat(c,"_attached"),u);break;default:this._tableData.cornerHeaders=a.reduce(function(e,t){var a={type:"cornerHeader",value:"#",next:[],sortOrder:0,identifier:{columnName:t.value,_attached:!0}},n=r===ZY?[a,t]:[t,a];return e.push.apply(e,n),i._tableData.rowLevel+=1,e},[]),this._tableData.cornerHeaders.forEach(function(e,t){var a;null!==(a=e.identifier)&&void 0!==a&&a._attached&&(i._updateUsedRowDimensions("".concat(e.identifier.columnName,"_attached"),t),i._updateRenderSetting("".concat(e.identifier.columnName,"_attached"),t),i._updatePivotAlignmentInfo("".concat(e.identifier.columnName,"_attached"),t))})}}},{key:"attachRowNumber",value:function(e){return e.showRowNumber&&this._tableData.rowHeaders.length?(C()(b()(r.prototype),"attachRowNumber",this).call(this,e),this._insertRowNumber2Corner(),{data:F()({},this._tableData,{getCellInfo:this.getCellInfo,getResizedColumnIndex:this.getResizedColumnIndex,canEdit:this.canEdit}),datasetInfo:this._datasetInfo}):{data:this._tableData,datasetInfo:this._datasetInfo}}}]),r}(tq),nq=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),t=a.call(this),nu.time("cloneKPIMatrix"),t._tableData=F()({},e,{rowHeaders:Object(Ho.cloneDeep)(e.rowHeaders),colHeaders:Object(Ho.cloneDeep)(e.colHeaders)}),nu.timeEnd("cloneKPIMatrix"),t._options={showRowNumber:!0,adjoin:"after",countRule:"global",insertPosition:"last"},t}return D()(n,[{key:"_createRowNumberNode",value:function(e,t){return{value:t,display:t,next:[]}}},{key:"_insertRowNumber2ColHeaders",value:function(){var r=this,e=this._options,t=e.insertPosition,o=e.adjoin,a=this._tableData.colHeaders||[];switch(t){case JY:var n=a[0],i=n.name,s=o===ZY?0:1;WY(a,{display:"#",path:["rows"],name:i,options:{id:"".concat(n.options.id,"_attached"),pivotAlignment:this.getAlign()},_attached:!0,sortable:!1},s),this._tableData.rowHeaderWidth+=1;break;case XY:var l=a.filter(function(e){return"rows"===e.path[0]}),u=l[l.length-1],c=u.name,d=o===ZY?l.length-1:l.length;WY(a,{display:"#",path:["rows"],name:c,options:{id:"".concat(u.options.id,"_attached"),pivotAlignment:this.getAlign()},_attached:!0,sortable:!1},d),this._tableData.rowHeaderWidth+=1;break;default:var p=this._tableData.rowHeaderWidth;this._tableData.colHeaders=a.reduce(function(e,t,a){var n={display:"#",path:["rows"],name:t.name,options:{id:"".concat(t.options.id,"_attached"),pivotAlignment:r.getAlign()},_attached:!0,sortable:!1},i=[t];return a<p&&(i=o===ZY?[n,t]:[t,n],r._tableData.rowHeaderWidth+=1),e.push.apply(e,R()(i)),e},[])}}},{key:"attachRowNumber",value:function(e){return e.showRowNumber&&this._tableData.rowHeaders.length&&(C()(b()(n.prototype),"attachRowNumber",this).call(this,e),this._insertRowNumber2ColHeaders()),this._tableData}}]),n}(tq),iq=function(){function n(e){var t=e.tableData,a=e.datasetInfo;I()(this,n),nu.time("cloneDataTable"),this._datasetInfo=Object(Ho.cloneDeep)(a),this._tableData=Object(Ho.cloneDeep)(t),nu.timeEnd("cloneDataTable"),this._options={showRowNumber:!0,adjoin:"after",countRule:"global",insertPosition:"First",pageCapacity:200,activePageIndex:0}}return D()(n,[{key:"getAlign",value:function(){return this._options.alignment!==H.TableAlignment.Default&&this._options.alignment?this._options.alignment:H.TableAlignment.Center}},{key:"attachRowNumber",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(this._options=F()({},this._options,{},t),this._options.showRowNumber){var a=this._options,n=a.adjoin,i=a.countRule,r=a.pageCapacity,o=a.activePageIndex,s=i===eq?o*r:0,l=n===ZY?0:1;this._tableData.data=this._tableData.data.map(function(e,t){return WY(e,s+t+1,l)});var u=this._tableData.columns[0],c="".concat(u.columnId,"_attached");this._tableData.columns=WY(this._tableData.columns,{columnId:c,attributeId:c,subColumnType:0,_attached:!0},l),this._tableData.hiddenColumns=this._tableData.hiddenColumns.map(function(e){var t=e.index;return l<=t?F()({},e,{index:t+1}):e}),this._datasetInfo.columns=WY(this._datasetInfo.columns,{display:"#",name:c,_attached:!0},l),this._datasetInfo.alignmentInfo.pivotAlignment=WY(this._datasetInfo.alignmentInfo.pivotAlignment,{name:c,rolePath:"columns",value:this.getAlign()},l),this._datasetInfo.renderSettingInfo=WY(this._datasetInfo.renderSettingInfo,{name:c,rolePath:"columns",value:H.ImageRenderSetting.Text},l),this._datasetInfo.renderSettingInfo=this._datasetInfo.renderSettingInfo.map(function(e,t){return e.index=t,e})}return{tableData:this._tableData,datasetInfo:this._datasetInfo}}}]),n}(),rq=function(e){k()(u,e);var l=w()(u);function u(e){var o;I()(this,u);var t=e.iconSetType,a=e.index,n=e.ranges,i=e.formula,r=e.showIconOnly,s=void 0!==r&&r;return(o=l.call(this,t,n)).evaluate=function(t,a,n,e){var i=-1,r=Dl.a.Spread.Sheets.ConditionalFormatting.IconSetType.noIcons;if(t.getValue(a,n)!==e)return{iconSetType:r,iconIndex:i,showIconOnly:o._showIconOnly};Dl.a.Spread.Sheets.CalcEngine.evaluateFormula(t,o._formula,a,n)?(i=o._index,r=o._iconSetType):t.conditionalFormats.getRules(a,n).filter(function(e){return e instanceof u&&e!==RB()(o)}).forEach(function(e){Dl.a.Spread.Sheets.CalcEngine.evaluateFormula(t,e._formula,a,n)&&(i=e._index,r=e._iconSetType)});return{iconSetType:r,iconIndex:i,showIconOnly:o._showIconOnly}},o._iconSetType=t,o._index=a,o._formula=i,o._showIconOnly=s,o}return u}(Dl.a.Spread.Sheets.ConditionalFormatting.IconSetRule);GY.cache=[];function oq(e){return(t=e).innerHTML="",GY(t);var t}function sq(e){var t=Array.isArray(e)?e:[e];return t=t.map(function(e){return new Dl.a.Spread.Sheets.Range(e.row,e.col,e.rowCount,e.colCount)})}function lq(n,e,t){function a(e){return Bo.a.range(o).forEach(e)}var i=e.workSheet,r=e.tableHeight,o=e.columnCount,s=e.spreadHostDom,l=e.expand,u=e.scrollbarMode,c=e.queryMiniColWidth,d=e.autoFitMode,p=2<arguments.length&&void 0!==t&&t,h=i.parent,y=s&&s.offsetWidth||i&&i.getViewportWidth(1),g=s&&s.offsetHeight||i&&i.getViewportHeight(1),m=parseInt(g,10),f=m<r||u===vr,v=u===fr||u===br?0:22,b=u===fr||u===br?0:28,C=parseInt(y,10)-(f?v:0);if(!m||!C)return[];var T=[],S=p?C/o:0,D=Bo.a.range(o).map(function(e){return{col:e}});(function(e,d,t,a){var n=3<arguments.length&&void 0!==a?a:Fr;if(n!==Er)return e.commandManager().execute({cmd:"autoFitColumn",sheetName:d.name()||"Sheet1",columns:t,isRowHeader:!1,autoFitType:n===Fr?Dl.a.Spread.Sheets.AutoFitType.cellWithHeader:Dl.a.Spread.Sheets.AutoFitType.cell},!1),t.map(function(e){return{idx:e.col,width:d.getColumnVisible(e.col)?d.getColumnWidth(e.col,Dl.a.Spread.Sheets.SheetArea.colHeader):0}});var p=d.getRowCount(1);return t.map(function(e){var t=d.getColumnVisible(e.col),a=t?d.getColumnWidth():0,n={idx:e.col,width:a};if(!t)return n;for(var i=0;i<p;i+=1){var r=d.getCellType(i,e.col,1),o=d.getValue(i,e.col,1),s=d.getText(i,e.col,1),l=d.getStyle(i,e.col,1),u={row:i,col:e.col,sheetArea:1,sheet:d},c=void 0;try{c=r.getAutoFitWidth(o,s,l,1,u)}catch(e){c=d.getColumnWidth()}a=Math.max(c,a)}return n.width=a,n})})(h,i,D,d).forEach(function(e,t){var a=Math.max(Math.min(e.width,1e3),S,c(t));T[e.idx]=parseInt(a,10)});var k=Bo.a.sum(T),w=k/C;w<1&&(T=T.map(function(e){return parseInt(e/w,10)}),k=Bo.a.sum(T));var x=w;l||(x=Bo.a.sum(T)/C,a(function(e){var t=T[e]/x;T[e]=parseInt(t,10)}));var A=T.map(function(e,t){var a=n.getColHeaderInfo(t);return{columnWidth:e/k,tableWidth:k/C,details:F()({},a)}}),I=C-Bo.a.sum(T);return h.options.showHorizontalScrollbar=I<0,h.options.showVerticalScrollbar=h.options.showHorizontalScrollbar?m-b<r:f,a(function(e){i.setColumnWidth(e,T[e]+(e<I?1:0))}),[C,x,A]}var uq=function(e,t){var a,n,i=e,r=t||Dl.a.Spread.Sheets.designer.spread.getActiveSheet(),o=i.style(),s=Dl.a.Spread.Sheets.CalcEngine.formulaToExpression(r,i.formula());if(s.type===Dl.a.Spread.CalcEngine.ExpressionType.function){var l=s.functionName;if("ISBLANK"===l)a=1,n=3;else if("ISERROR"===l)a=1,n=5;else if("NOT"===l&&1===s.arguments.length){var u=s.arguments[0].functionName;"ISBLANK"===u?(a=1,n=4):"ISERROR"===u&&(a=1,n=6)}}return void 0===a&&(a=5),{ruleType:a,selectorIndex:n,style:o,formula:i.formula()}},cq=["backColor","foreColor","font","borderTop","borderLeft","borderBottom","borderRight","textDecoration","formatter"],dq=["normal","italic","bold","bold italic"],pq=(YY={},V()(YY,ca,function(e,n,t){var a=n.condition,i=a.ruleType,r=a.operator,o=a.value1,s=a.value2,l=a.text,u=a.formula,c=a.type,d=a.rank,p=new Dl.a.Spread.Sheets.Style;p.fromJSON(Object.keys(n.style).reduce(function(e,t){var a=n.style[t];return-1<cq.indexOf(t)&&a&&("font"===t&&-1<dq.indexOf(a)&&(a="".concat(a," 13px Arial")),e[t]=a),e},{}));var h=sq(t),y=i,g=r,m=o;i!==Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.specificTextRule||r!==xn&&r!==An||(y=Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.cellValueRule,g=r===xn?Za:$a,m=l);var f=new Dl.a.Spread.Sheets.ConditionalFormatting.NormalConditionRule(y,h,p,g,m,s,l,u,c,d);if(u){var v=uq(f,e).selectorIndex;0<=v?(b=h,C=v,T=p,S=e,Array.isArray(b)||(b=[b]),b.forEach(function(e){var t,a=Dl.a.Spread.Sheets.CalcEngine.rangeToFormula(e,0,0,Dl.a.Spread.Sheets.CalcEngine.RangeReferenceRelative.allAbsolute);switch(C){case 3:t="ISBLANK(".concat(a,")");break;case 4:t="NOT(ISBLANK(".concat(a,"))");break;case 5:t="ISERROR(".concat(a,")");break;case 6:t="NOT(ISERROR(".concat(a,"))")}var n=new Dl.a.Spread.Sheets.ConditionalFormatting.NormalConditionRule(Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.formulaRule,[e],T,null,null,null,null,"=".concat(t));S.conditionalFormats.addRule(n)})):e.conditionalFormats.addRule(f)}else{var b,C,T,S;e.conditionalFormats.addRule(f)}}),V()(YY,da,function(e,t,a){var n=t.condition,i=n.minType,r=n.minValue,o=n.maxType,s=n.maxValue,l=n.color,u=n.dataBarDirection,c=n.showBarOnly,d=n.showBorder,p=n.negativeBorderColor,h=n.negativeFillColor,y=n.useNegativeBorderColor,g=n.useNegativeFillColor,m=n.axisColor,f=n.axisPosition,v=n.borderColor,b=n.gradient,C=new Dl.a.Spread.Sheets.ConditionalFormatting.DataBarRule(i,r,o,s,l,sq(a));C.showBarOnly(c),C.dataBarDirection(u),C.showBorder(d),C.negativeBorderColor(p),C.negativeFillColor(h),C.useNegativeBorderColor(y),C.useNegativeFillColor(g),C.axisColor(m),C.axisPosition(f),C.borderColor(v),C.gradient(b),e.conditionalFormats.addRule(C)}),V()(YY,pa,function(e,t,a){var n=t.condition,i=n.minType,r=n.minValue,o=n.minColor,s=n.midType,l=n.midValue,u=n.midColor,c=n.maxType,d=n.maxValue,p=n.maxColor;e.conditionalFormats.add3ScaleRule(i,r,o,s,l,u,c,d,p,sq(a))}),V()(YY,ha,function(e,t,a){var n=t.condition,i=n.minType,r=n.minValue,o=n.minColor,s=n.maxType,l=n.maxValue,u=n.maxColor;e.conditionalFormats.add2ScaleRule(i,r,o,s,l,u,sq(a))}),V()(YY,ya,function(e,t,a){var n=t.condition,i=n.ruleType,r=n.minType,o=n.minValue,s=n.minColor,l=n.midType,u=n.midValue,c=n.midColor,d=n.maxType,p=n.maxValue,h=n.maxColor,y=new Dl.a.Spread.Sheets.ConditionalFormatting.ScaleRule(i,r,o,s,l,u,c,d,p,h,sq(a));e.conditionalFormats.addRule(y)}),V()(YY,ga,function(e,t,a){var n=new Dl.a.Spread.Sheets.ConditionalFormatting.IconSetRule;n.fromJSON(t.condition.iconSetRule),n.ranges(sq(a));for(var i=e.conditionalFormats,r=i.count()-1;0<=r;r--){var o=i.getRule(r);if(o instanceof Dl.a.Spread.Sheets.ConditionalFormatting.IconSetRule&&JSON.stringify(o.ranges())===JSON.stringify(n.ranges())){i.removeRule(o);break}}e.conditionalFormats.addRule(n)}),V()(YY,ma,function(e,t,a){if(t.style.icon){var n=t.condition.formula,i=t.style.icon,r=i.iconSetType,o=i.idx,s=new rq({ranges:sq(a),iconSetType:r,index:o,formula:n,showBarOnly:!1});e.conditionalFormats.addRule(s)}var l=JSON.parse(JSON.stringify(F()({},t.style,{icon:void 0})));Object.keys(l).length&&pq[ca](e,t,a)}),YY),hq="Material Design Icons",yq="function"==typeof Symbol&&Symbol.for,gq={New:"New",Edited:"Edited"},mq=(qY={},V()(qY,gq.New,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM1SURBVHgB7ZpNSxtBHMZnlxgjJMWWRo2gGBDEU8EcSuNn6KU3QXMRD8GLNz2odz+AehBBipBbLz0Gkh56KLSEHEpKaEMIoWlCai1KEvO6/p+QCSGK2SSzyS7kd3D/O85mn2dn52VnRmINFEWRTk9PV+i4IkmSnY5mpiNIU4k0ZekY8nq9IToq9XT8OT8/txWLxXeUwckMAImPj4+Pf9jc3LyV8eSNJB5Aa0OzJJ2cnLgoeIt/zM7OOhYWFtj09LSVHEpMR5TLZSWdTt/F4/FKKpX6gzQqiY8mvPM8k9PpNM3NzU0wHTI2NiZBW61WuyED9TRol1FheaaZmRkL0zmk8RmPoV1ubW3gkukcerWbMbTLzOAY3oBJTaZoNDp5dnb2OpPJvGADwG63X29tbX1ZXl7+3ymvqhKgHto9KPEgm80+pwf2Rk1eVSVQKBSaNWd7eztLT0hhGkDCpePjY3v7PZ9ClYHV1dWo3+9/hTgYDE4cHR2ZZFkW2uRS+363u7tb4edutzuq5jpVr5DH44m4XK6fiCORiBU3wg2ZILh4/DbOca+NjY0faq5V3Qrt7Ox808JEtVp9IB73Unt9V82oaBMQv7e317N40HU/IMqECPGgp46sXxOixIOee+JeTYgUD/oaSnRrQrR40PdYqGHiF+KnTGghHggZzJGQr60mLi4ucu15kCZaPBA2GoWJqampa8S5XO7B7+bz+XoaBmqixAOhw2n62Ch3ymOxWDrm6YbRB82wGRkYNiMDw2Zk4DFoDhOfqjU2AIQamJ+fv8IxHA7bLi8v/7EBmBBqYH19/TvNcP9F7PP5XjZMaDKDwRFqwGq1Vg4ODj45HI56STRMINbMhPA6QCbKh4eHwXYTpVJJk4ljTSrxYyYCgcAk0wDNmtF2ExxapLhiAtG0H4AJqhPBpaWlpNlsriwuLv5eW1uLMIGomlrsB5vNVt7f3//MNGLUEw8bLPKV+AmtvWra6YgAy608hnYs8mV5Ao1hbpnOwVoxj6EdJRDiCYlEQkomk/lWl3qB3g7ou4nFYs01BGiXGps8PEbaagCwX8Lr9b5HCSjYOIEEZhD4Zg9ob45PjLrd5h7gCBIKGQKZHQAAAABJRU5ErkJggg=="),V()(qY,gq.Edited,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKjSURBVHgB7ZrLihpBFIZPibeAhiTgFRQFQdyOixB9hmyyE9SNuOidD6A+hi7ETR4gmzzAZJFFIMFVmCCJiEiMYsKEGYhxWuw5Z7CH2QxW29VlN/gt7LI8UP9vdV26TzHYoWka63a7Z3g9Y4yF8OoFG4GablDTEq8DRVEGeNXu6umj3+8H1+v1GwxIgwNA8WOfz/euVqtdu+ifd5J4grTuNDPW6XTyWHhNP8Tj8VgqlYJIJBJAhwxshKqq2nw+/z8ejzez2ewX1WFPvHfTPa8HpdNpdyKReAI2xOPxMNK23W6v0MBdHWl30YDVg6LRqB9sDmp8qpdJu+vhbEMuwebgrX1fJu0ucDiON+DmCRoOh896vd7LxWLxAiQQCoUu6/X6p1wu93dfLFcP4ApdkCWeWC6Xz/EPe8UTy2VgtVr5QDK8bXIZKBaLQ5BMoVDgapPLQLVavcjn899BEtRWpVL5xhPLPQs1Go0vMkxQG9QWb7yhadRqE0bFE4bXAatMHCKeOGghE23iUPHEwSuxKBNmxBOmthJmTZgVT5jeC+1M/ACDiBBPCNnMoZDPRkyIEk8I242SiXA4fLkvjjZqosQTQrfT+LCh7ovx+/17Y4xweqA5NicDx+Zk4NicDBwboQaSyeQfkIxQA+Vy+Su+4f4NEhFqIBAIbFqt1odYLCatJ4SPATShttvtc1kmLBnEMk1YNgs9ZgKTFEJNWTqNkgkcE+fZbHbq9Xo3mUzmZ6lUugCBcL2dNkMwGFSbzeZHsIjTQnZsKMl3o3/B3KsGNofSrXqZtFOSb6lXYB72GmwO5Yr1MmmnHhjoFZPJhE2n038PXdoFvDtI39VoNNrodaSd7Q55VJ101ICg8xKKorylHtDo4ARVgEPQD3uQ9vvEtlOP29wCLgY8w+tFH4AAAAAASUVORK5CYII="),qY),fq={New:{value:void 0,isLoaded:!1},Edited:{value:void 0,isLoaded:!1}};Object.keys(gq).forEach(function(e){var t=new Image;t.onload=function(){fq[e].isLoaded=!0,fq[e].value=t},t.src=mq[e]});var vq={sort:yq?Symbol.for("cellType.sort"):"0x01",collapse:yq?Symbol.for("cellType.collapse"):"0x02",uiFilter:yq?Symbol.for("cellType.uiFilter"):"0x03"};function bq(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:gq.New;Dl.a.Spread.Sheets.CellTypes.Base.apply(this),this.$$type=vq.uiFilter,this._valueFont=e,this._fontSize=oc(e.fontSize)||"14px",this._icon=t}function Cq(e,t){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];Dl.a.Spread.Sheets.CellTypes.Base.apply(this),this.$$type=vq.sort,this.ctx=null,this._valueFont=e,this._fontSize=oc(e.fontSize)||"14px",this._iconColor=e.color,this._enableFilter=a,this._isHitOnUiFilter=!1,this._iconType=t||gq.New,this._cellRect=null,a&&(this._uiFilterCellType=new bq(e,this._iconType))}function Tq(e){Dl.a.Spread.Sheets.CellTypes.Base.apply(this),this._valueFont=e,this._fontSize=oc(e.fontSize)||"14px",this.ctx=null}(bq.prototype=new Dl.a.Spread.Sheets.CellTypes.Base).paintUiFilterIcon=function(e,t,a,n,i){e.save();var r=t+n-24,o=a+.5*Math.max(i-20,2)+1;e.drawImage(fq[this._icon].value,r,o,20,20),e.restore()},bq.prototype._hitOnUiFilter=function(e,t,a){var n=a.x+a.width-20,i=a.y+.5*Math.max(a.height-20,2)+1;return n<=e&&e<=20+n&&i<=t&&t<i+20},(Cq.prototype=new Dl.a.Spread.Sheets.CellTypes.Base).paintValue=function(e,t,a,n,i,r,o,s){var l;this._enableFilter&&(null!==(l=fq[this._iconType])&&void 0!==l&&l.isLoaded||this.paintValue(e,t,a,n,i,r,o,s));var u=s.sheet.getTag(s.row,s.col,s.sheetArea),c="";u.sortStatus===Kn?c="":u.sortStatus===zn&&(c="");var d=(this._enableFilter?24:0)+(u.sortStatus!==Un?Math.floor(parseFloat(this._fontSize)):0);e.save(),e.font="".concat(this._valueFont.fontStyle," ").concat(Uu(this._valueFont.fontWeight)," ").concat(this._valueFont.fontSize," ").concat(hq),e.fillStyle=this._iconColor,e.textBaseline="middle",e.fillText(c,a+i-d,n+.5*r),this._enableFilter&&this._uiFilterCellType.paintUiFilterIcon(e,a,n,i,r),e.restore(),o.font=Ku(this._valueFont),o.hAlign=Dl.a.Spread.Sheets.HorizontalAlign.center,Dl.a.Spread.Sheets.CellTypes.Base.prototype.paintValue.call(this,e,t,a,n,i-d,r,o,s)},Cq.prototype.getHitInfo=function(e,t,a,n,i){return this._isHitOnUiFilter=this._enableFilter&&this._uiFilterCellType._hitOnUiFilter(e,t,n)||!1,this._cellRect=n,{x:e,y:t,row:i.row,col:i.col,cellRect:n,sheetArea:i.sheetArea,isHitOnUiFilter:this._isHitOnUiFilter,ctx:this.ctx}},Cq.prototype.getAutoFitWidth=function(e,t,a,n,i){var r=Dl.a.Spread.Sheets.CellTypes.Base.prototype.getAutoFitWidth.call(this,e,t,a,n,i);return this._enableFilter&&(r+=22),r},Cq.prototype.getAutoFitHeight=function(e,t,a,n,i){return Dl.a.Spread.Sheets.CellTypes.Base.prototype.getAutoFitHeight.call(this,e,t,a,n,i)},Cq.prototype.isHitOnUiFilter=function(){return this._isHitOnUiFilter},Cq.prototype.getRect=function(){return this._cellRect},(Tq.prototype=new Dl.a.Spread.Sheets.CellTypes.Base).paintValue=function(e,t,a,n,i,r,o,s){o.font=Ku(this._valueFont),o.hAlign=Dl.a.Spread.Sheets.HorizontalAlign.center,Dl.a.Spread.Sheets.CellTypes.Base.prototype.paintValue.call(this,e,t,a,n,i,r,o,s)},Tq.prototype.getHitInfo=function(e,t,a,n,i){return{x:e,y:t,row:i.row,col:i.col,cellRect:n,sheetArea:i.sheetArea,ctx:this.ctx}},Tq.prototype.getAutoFitWidth=function(e,t,a,n,i){return Dl.a.Spread.Sheets.CellTypes.Base.prototype.getAutoFitWidth.call(this,e,t,a,n,i)},Tq.prototype.getAutoFitHeight=function(e,t,a,n,i){return Dl.a.Spread.Sheets.CellTypes.Base.prototype.getAutoFitHeight.call(this,e,t,a,n,i)};var Sq="@".concat(""),Dq=8;function kq(e,t){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;Dl.a.Spread.Sheets.CellTypes.Base.apply(this),this.$$type=vq.collapse,this._valueFont=e,this._fontSize=oc(e.fontSize)||"14px",this._color=e.color,this._fontWidth=void 0,this._fontHeight=void 0,this.nullItemsString=void 0,this.emptyItemsString=void 0,this._contextLineHeight=void 0,this._contextFontSize=void 0,this._bgStyle={},this._enableFilter=a,this._isHitOnExpandArea=!1,this._expandMode=zr.Show,this._isHitOnUiFilter=!1,this._cellRect=null,this._labelIndent=n*Dq,a&&(this._uiFilterCellType=new bq(e,t))}(kq.prototype=new Dl.a.Spread.Sheets.CellTypes.Base).paint=function(e,t,a,n,i,r,o,s){var l=s.sheet.getTag(s.row,s.col,s.sheetArea),u=this._expandMode===zr.Show||this._expandMode===zr.Auto&&l.show,c={x:a,width:i};if(l&&u){var d,p=l.collapse?"":"",h=Math.ceil(parseFloat(this._fontSize)/2),y=null===(d=o.font)||void 0===d?void 0:d.split(" "),g=N()(y,3),m=g[0],f=g[1],v=g[2];e.save(),e.font="".concat(m||this._valueFont.fontStyle," ").concat(f||Uu(this._valueFont.fontHeight)," ").concat(v||this._valueFont.fontSize," ").concat(hq),e.fillStyle=this._color,e.textAlign="left",e.textBaseline="middle";var b=Math.ceil(e.measureText(p).width),C=Math.ceil(1.4*parseFloat(this._fontSize,10));this._fontWidth=b,this._fontHeight=C,c={x:a+h+this._fontWidth+this._labelIndent,width:i-h-this._fontWidth-this._labelIndent},void 0===this._contextLineHeight&&(this._contextLineHeight=s.lineHeight),void 0===this._contextFontSize&&(this._contextFontSize=s.fontInfo.fontSize),o.backgroundImage&&(this._bgStyle.backgroundImage||(this._bgStyle={backgroundImage:o.backgroundImage,backgroundImageLayout:o.backgroundImageLayout}),delete o.backgroundImage,delete o.backgroundImageLayout),Dl.a.Spread.Sheets.CellTypes.Base.prototype.paint.call(this,e,Sq,a,n,i-c.width,r,o,s),Dl.a.Spread.Sheets.CellTypes.Base.prototype.paintValue.call(this,e,p,a+h+this._labelIndent,n,b,r,F()({},o,{hAlign:Dl.a.Spread.Sheets.HorizontalAlign.center,font:"".concat(this._valueFont.fontStyle," ").concat(Uu(this._valueFont.fontWeight)," ").concat(this._valueFont.fontSize," ").concat(hq)}),s),e.restore()}var T=0;return this._enableFilter&&(T=24,Dl.a.Spread.Sheets.CellTypes.Base.prototype.paint.call(this._uiFilterCellType,e,"",a+i-T,n,T,r,o,s),this._uiFilterCellType.paintUiFilterIcon(e,a,n,i,r)),Dl.a.Spread.Sheets.CellTypes.Base.prototype.paint.call(this,e,t,c.x,n,c.width-T+.5,r,F()({},o,{},this._bgStyle),s)},kq.prototype.getHitInfo=function(e,t,a,n,i){var r=this._fontWidth,o=this._fontHeight,s=8<this._contextFontSize?Math.floor((this._contextFontSize-8)/5+2):1,l=this._contextLineHeight/2-this._contextFontSize/2+s-1,u=n.height/2+.7-l+n.y;return this._cellRect=n,i?(this._isHitOnUiFilter=this._enableFilter&&this._uiFilterCellType._hitOnUiFilter(e,t,n)||!1,{x:e,y:t,fontWidth:r,fontHeight:o,row:i.row,col:i.col,cellRect:n,sheetArea:i.sheetArea,iconTop:u,isHitOnUiFilter:this._isHitOnUiFilter,isHitOnExpandArea:this._isHitOnExpandArea}):null},kq.prototype.getAutoFitWidth=function(e,t,a,n,i){return Dl.a.Spread.Sheets.CellTypes.Base.prototype.getAutoFitWidth.call(this,e,t,a,n,i)},kq.prototype.getAutoFitHeight=function(e,t,a,n,i){return Dl.a.Spread.Sheets.CellTypes.Base.prototype.getAutoFitHeight.call(this,e,t,a,n,i)},kq.prototype.processMouseUp=function(e){var t,a,n,i,r,o,s,l,u,c,d=e.sheet,p=e.row,h=e.col,y=e.sheetArea,g=Math.ceil(parseFloat(this._fontSize)/2),m=(t=e,a=g,n=this._labelIndent,i=t.cellRect,r=t.x,o=t.y,s=t.fontWidth,l=t.fontHeight,u=t.iconTop,(c=i.x+a+n)<=r+s/5&&r<c+s&&u<=o+l/2&&o<u+l/4);if(m){var f=d.getTag(p,h,y);f&&(f.collapse=!f.collapse,d.setTag(p,h,f,y)),d.clearSelection()}this._isHitOnExpandArea=m},kq.prototype.setExpandStatus=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:zr.Show;this._expandMode=e},kq.prototype.processMouseEnter=function(e){if(this._expandMode===zr.Auto){var t=e.row,a=e.col,n=e.sheetArea,i=e.sheet,r=i.getTag(t,a,n);r.show=!0,i.setTag(t,a,r,n),i.setRowVisible(t,i.getRowVisible(t))}},kq.prototype.processMouseLeave=function(e){if(this._expandMode===zr.Auto){var t=e.row,a=e.col,n=e.sheetArea,i=e.sheet,r=i.getTag(t,a,n);r.show=!1,i.setTag(t,a,r,n),i.setRowVisible(t,i.getRowVisible(t))}},kq.prototype.isHitOnCollapseIcon=function(){return this._isHitOnExpandArea},kq.prototype.isHitOnUiFilter=function(){return this._isHitOnUiFilter},kq.prototype.getRect=function(){return this._cellRect},kq.prototype.setEmptyString=function(e,t){this.nullItemsString=e,this.emptyItemsString=t},kq.prototype.format=function(e,t,a,n){if(null!=e&&""!==e)return e===Sq?"":Dl.a.Spread.Sheets.CellTypes.Base.prototype.format(e,t,a,n);var i="string"==typeof t?t:(null==t?void 0:t.formatStr)||"General";return wu(i,e,{nullString:this.nullItemsString,emptyString:this.emptyItemsString})};function wq(e,t,a){var n,i=(n={},V()(n,H.TableAlignment.Default,Dl.a.Spread.Sheets.HorizontalAlign.general),V()(n,H.TableAlignment.Left,Dl.a.Spread.Sheets.HorizontalAlign.left),V()(n,H.TableAlignment.Center,Dl.a.Spread.Sheets.HorizontalAlign.center),V()(n,H.TableAlignment.Right,Dl.a.Spread.Sheets.HorizontalAlign.right),n);return e&&e!==H.TableAlignment.Default?i[e]:t===H.TableAlignment.Default?"string"===a.dataType?Dl.a.Spread.Sheets.HorizontalAlign.left:Dl.a.Spread.Sheets.HorizontalAlign.right:i[t]}function xq(e,t){var a=t*e.tableWidth*e.columnWidth;return parseInt(a,10)}function Aq(e,t,a,n){var i=e&&e.offsetWidth||t&&t.getViewportWidth(1),r=e&&e.offsetHeight||t&&t.getViewportHeight(1),o=parseInt(r,10)<n||a===vr,s=a===fr||a===br?0:22;return parseInt(i,10)-(o?s:0)}function Iq(e,t,a,n){return{value:a.getValue(e,t,n),text:a.getText(e,t,n),cellStyle:a.getActualStyle(e,t,n),zoomFactor:1,context:{row:e,col:t,sheetArea:n,sheet:a}}}var Pq=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"format",value:function(e,t){var a="string"==typeof t?t:(null==t?void 0:t.formatStr)||"General";return wu(a,e,{nullString:this.nullItemsString,emptyString:this.emptyItemsString})}},{key:"setEmptyString",value:function(e,t){this.nullItemsString=e,this.emptyItemsString=t}}]),a}(Dl.a.Spread.Sheets.CellTypes.Base);function _q(e,t){Dl.a.Spread.Formatter.FormatterBase.apply(this,[e,t]),this.formatStr=e}_q.prototype.format=function(e){if(null==e)return e;var t=Bo.a.isBoolean(e)||isNaN(+e)?e:+e;return ku(this.formatStr,t)};function Mq(e,t,a){var n,i,r=(n=t,i=a.getBoundingClientRect(),{positionX:n.pageX-i.left,positionY:n.pageY-i.top}),o=r.positionX,s=r.positionY,l=e.hitTest(o,s);return(l.evt=t).target.classList.contains("gc-scroll-bar")&&(l.inScrollbar=!0),l}function Lq(a,e){var t=e.find(function(e){var t=e.details;return a.measure?"".concat(t.path)==="".concat(a.path)&&"".concat(t.columns)==="".concat(a.columns)&&t.measure.columnName===a.measure.columnName&&t.measure.aggregationMethod===a.measure.aggregationMethod:"".concat(t.path)==="".concat(a.path)&&"".concat(t.columns)==="".concat(a.columns)&&t.key===a.key&&"".concat(t.attached)==="".concat(a.attached)});return t=t||{columnWidth:1,tableWidth:1,details:Object.assign({},a)}}function Rq(e,t,a,n,i,r){var o,s,l,u,c,d,p,h,y,g,m,f,v,b,C,T,S=!(5<arguments.length&&void 0!==r)||r,D=n.layoutWidth,k=n.layoutScale,w=n.getColHeaderInfo(e);if(nu.assert(null!=D),nu.assert(null!=k),S)C=w,o=[{columnWidth:(T=function(e,t,a){var n=[];if(a){for(var i=a.getColumnWidth(e,1),r=a.getColumnCount(),o=0,s=0;s<r;s++)o+=a.getColumnWidth(s,1);var l=i/o,u=o/t;n.push(l),n.push(u)}return n}(e,D,i))[0],tableWidth:T[1],details:Object.assign({},C)}];else{var x=n.getColHeaderInfo(e+1),A=(v=x,{columnInfo:Lq(w,b=a),nextColumnInfo:Lq(v,b)}),I=A.columnInfo,P=A.nextColumnInfo,_=i.getColumnWidth(e,1),M=i.getColumnWidth(e+1,1);l=P,u=D,h=((d=_/(c=k))/(p=(t+M)/c)<1?d/p:.99)*p,y=(s=I).tableWidth||l.tableWidth,g=h/(u*y),m=l.tableWidth,f=(p-h)/(u*m),o=[{columnWidth:g,tableWidth:y,details:s.details},{columnWidth:f,tableWidth:m,details:l.details}]}return o}function Vq(e,t){var a=1<arguments.length&&void 0!==t?t:{};return ae.mergeDeepWithKey(function(e,t,a){return"backColor"===e&&"transparent"===t&&a||null==t?a:t},e,a)}function Nq(t){var e={colHeader:function(e){return Vq(e,t.whole)},firstDataStripe:function(e){return Vq(e,t.whole)},secondDataStripe:function(e){return Vq(e,t.whole)}};return ae.evolve(e,t)}function Eq(t){var e={corner:function(e){return Vq(e,t.whole)},rowHeader:function(e){return Vq(e,t.whole)}};return ae.evolve(e,Nq(t))}function Fq(e,t,a,n,i,r,o){o=o||{resetCollapse:!1,resetSortStatus:!1};for(var s=t;s<n;++s)for(var l=a;l<i;++l){var u=e.getTag(s,l,r)||{collapse:!1,sortStatus:Un};o.resetSortStatus&&(u.sortStatus=Un),o.resetCollapse&&(u.collapse=!1),e.setTag(s,l,u,r)}}function Oq(y,g,m,f,v,b,C){return function(e,t,a){var n,i,r,o=(b.sortOrder+1)%3,s=ri,l={};if(g===Dl.a.Spread.Sheets.SheetArea.colHeader){var u,c=y<f&&!C?[null===(u=e[y])||void 0===u?void 0:u.name]:e.map(function(e){return e.name});if(o===Un)i=v,r={},void 0===(n=c)&&(n=[]),Array.isArray(n)||(n=[n]),Object.keys(i).forEach(function(t){n.find(function(e){return e===t})||(r[t]=F()({},i[t]))}),t(l=r);else{var d=y<f?f:0,p=y<f?a.getColumnCount()-f:a.getColumnCount();if(!function(e,t,a){if(e){e.suspendEvent(),e.suspendPaint();for(var n=arguments.length,i=new Array(3<n?n-3:0),r=3;r<n;r++)i[r-3]=arguments[r];t.apply(a,i),e.resumePaint(),e.resumeEvent()}}(a.getParent(),Fq,this,a,0,d,m,p,g,{resetSortStatus:!0}),y<f){l=Object.keys(v).reduce(function(e,t){return v[t].type===s&&(e[t]=F()({},v[t])),e},l),(C?c:[c[0]]).forEach(function(e){l[e]={type:s,sortBy:null,order:o}})}else{var h=function(){var e;return{columns:b.relatedDimensionFieldList.map(function(e){return e.fieldName}),measure:b.valueFieldIdentifier,path:(null==(e=b.relatedDimensionFieldList)?void 0:e.map(function(e){return e.originalLookupValue}))||[]}};c.forEach(function(e){l[e]={type:li,sortBy:h(),order:o}})}t(l)}}}}var Hq,Bq,Uq,zq,Kq,jq,Wq=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).text=e,t}return D()(n,[{key:"paint",value:function(e,t,a,n,i,r,o,s){var l;return Dl.a.Spread.Sheets.CellTypes.Base.prototype.paint.call(this,e,null!==(l=this.text)&&void 0!==l?l:t,a,n,i,r,o,s)}}]),n}(Dl.a.Spread.Sheets.CellTypes.Base);(Bq=Hq=Hq||{}).Normal="Normal",Bq.Italic="Italic",(zq=Uq=Uq||{}).Normal="Normal",zq.Bold="Bold",zq.Light="Light",zq.Heavy="Bolder",(jq=Kq=Kq||{}).Corner="Corner",jq.ColHeader="ColHeader",jq.RowHeader="RowHeader",jq.FirstDataStripe="FirstDataStripe",jq.SecondDataStripe="SecondDataStripe",jq.Whole="Whole",jq.GrandTotals="GrandTotals",jq.SubTotals="SubTotals";var Gq={Top:1,Right:2,Bottom:3,Left:4,None:5},Yq={viewport:Dl.a.Spread.Sheets.SheetArea.viewport,colHeader:Dl.a.Spread.Sheets.SheetArea.colHeader,rowHeader:Dl.a.Spread.Sheets.SheetArea.rowHeader,corner:Dl.a.Spread.Sheets.SheetArea.corner};function qq(e,t,a,n,i,r,o){if(r)for(var s=e;s<e+a;s+=1)for(var l=t;l<t+n;l+=1){var u=r.getCell(s,l,i);u&&"function"==typeof o&&o(u)}}function Jq(e){return{corner_1_colHeader_1:Gq.Left,corner_0_colHeader_1:Gq.None,corner_1_rowHeader_1:Gq.Top,corner_0_rowHeader_1:Gq.None,rowHeader_1_data_1:Gq.Left,rowHeader_1_subTotal_1:Gq.Right,rowHeader_1_firstDataStripe_1:Gq.Left,rowHeader_1_secondDataStripe_1:Gq.Left,colHeader_1_data_1:Gq.Top,colHeader_1_firstDataStripe_1:Gq.Top,subTotals_1_colHeader_1_right:Gq.Right,subTotals_1_colHeader_1_left:Gq.Left,row_subTotals_1_data_1_right:Gq.Right,row_subTotals_1_data_1_left:Gq.Left,row_subTotals_1_data_1_bottom:Gq.Bottom,row_subTotals_1_data_1_top:Gq.Top,row_subTotals_1_firstDataStripe_1_right:Gq.Right,row_subTotals_1_firstDataStripe_1_left:Gq.Left,row_subTotals_1_firstDataStripe_1_bottom:Gq.Bottom,row_subTotals_1_firstDataStripe_1_top:Gq.Top,row_subTotals_1_secondDataStripe_1_right:Gq.Right,row_subTotals_1_secondDataStripe_1_left:Gq.Left,row_subTotals_1_secondDataStripe_1_bottom:Gq.Bottom,row_subTotals_1_secondDataStripe_1_top:Gq.Top,col_subTotals_1_grandTotals_1_bottom:Gq.Bottom,subTotals_1_rowHeader_1_bottom:Gq.Bottom,subTotals_1_rowHeader_1_top:Gq.Top,grandTotals_1_colHeader_1:Gq.Right,grandTotals_1_rowHeader_1:Gq.Bottom,row_grandTotals_1_data_1:Gq.Right,row_grandTotals_1_data_1_top:Gq.Top,row_grandTotals_1_data_1_bottom:Gq.Bottom,row_grandTotals_1_firstDataStripe_1:Gq.Right,row_grandTotals_1_firstDataStripe_1_bottom:Gq.Bottom,row_grandTotals_1_secondDataStripe_1:Gq.Right,row_grandTotals_1_secondDataStripe_1_bottom:Gq.Bottom,grandTotals_1_subTotals_1_right:Gq.Right,grandTotals_1_subTotals_1_bottom:Gq.Bottom}[e]}function Xq(e,t,a,n,i,r,o,s,l){var u=8<arguments.length&&void 0!==l?l:Dl.a.Spread.Sheets.LineStyle.empty;if(s&&t)switch(e){case Gq.Left:qq(a,n,i,r,o,s,function(e){e.borderLeft(new Dl.a.Spread.Sheets.LineBorder(t,u))});break;case Gq.Right:qq(a,n,i,r,o,s,function(e){e.borderRight(new Dl.a.Spread.Sheets.LineBorder(t,u))});break;case Gq.Top:qq(a,n,i,r,o,s,function(e){e.borderTop(new Dl.a.Spread.Sheets.LineBorder(t,u))});break;case Gq.Bottom:qq(a,n,i,r,o,s,function(e){e.borderBottom(new Dl.a.Spread.Sheets.LineBorder(t,u))})}}function Qq(e){var t=e.row,a=e.col,n=e.color;qq(t,a,e.rowCount,e.colCount,e.sheetArea,e.sheet,function(e){"string"==typeof n&&n&&e.borderLeft(new Dl.a.Spread.Sheets.LineBorder(n,Dl.a.Spread.Sheets.LineStyle.double))})}function Zq(e){var t=e.row,a=e.col,n=e.color;qq(t,a,e.rowCount,e.colCount,e.sheetArea,e.sheet,function(e){"string"==typeof n&&n&&e.borderTop(new Dl.a.Spread.Sheets.LineBorder(n,Dl.a.Spread.Sheets.LineStyle.double))})}function $q(e){var t=e.nextCell,a=e.previousCell,n=e.row,i=e.col,r=e.colHeader,o=e.subTotals,s=e.grandTotals,l=e.sheet;if(t&&t.type===bY.ColumnHeaderSubTotal){var u=Jq("subTotals_".concat(+!!o.border.color,"_colHeader_").concat(+!!r.border.color,"_right"));u&&(nu.assert(null!=u),nu.assert(u===Gq.Right),Xq(u,r.border.color,n,i,1,1,Yq.colHeader,l))}if(a&&a.type===bY.ColumnHeaderSubTotal){var c=Jq("subTotals_".concat(+!!o.border.color,"_colHeader_").concat(+!!r.border.color,"_left"));c&&(nu.assert(null!=c),nu.assert(c===Gq.Left),Xq(c,r.border.color,n,i,1,1,Yq.colHeader,l))}if(t&&t.type===bY.ColumnHeaderGrandTotal){var d=Jq("grandTotals_".concat(+!!s.border.color,"_colHeader_").concat(+!!r.border.color));d&&(nu.assert(null!=d),nu.assert(d===Gq.Right),Xq(d,r.border.color,n,i,1,1,Yq.colHeader,l))}}function eJ(e,t,a,n,i,r){var o=i.rowHeader,s=i.subTotals,l=i.grandTotals;if(a&&a.type===bY.RowHeaderSubTotal){var u=Jq("subTotals_".concat(+!!s.border.color,"_rowHeader_").concat(+!!o.border.color,"_top"));u&&nu.assert(u===Gq.Top),Xq(u,o.border.color,e,t,1,1,Yq.viewport,r)}if(n&&n.type===bY.RowHeaderSubTotal){var c=Jq("subTotals_".concat(+!!s.border.color,"_rowHeader_").concat(+!!o.border.color,"_bottom"));c&&nu.assert(c===Gq.Bottom),Xq(c,o.border.color,e,t,1,1,Yq.viewport,r)}if(n&&n.type===bY.RowHeaderGrandTotal){var d=Jq("grandTotals_".concat(+!!l.border.color,"_rowHeader_").concat(+!!o.border.color));d&&nu.assert(d===Gq.Bottom),Xq(d,o.border.color,e,t,1,1,Yq.viewport,r)}}function tJ(e,t,a,n,i,r,o,s){var l=o.firstDataStripe,u=o.secondDataStripe,c=o.whole,d=o.subTotals,p=(o.grandTotals,o.useAlternateRowStyle);if((null==n?void 0:n.type)===bY.SubTotalRow||(null==n?void 0:n.type)===bY.GrandTotalRow)if(p){var h=e%2==0?l.border.color:u.border.color,y=Jq(e%2==0?"row_subTotals_".concat(+!!d.border.color,"_firstDataStripe_").concat(+!!l.border.color,"_right"):"row_subTotals_".concat(+!!d.border.color,"_secondDataStripe_").concat(+!!u.border.color,"_right"));y&&nu.assert(y===Gq.Right),Xq(y,h,e,t,1,1,3,s)}else{var g=c.border.color,m=Jq("row_subTotals_".concat(+!!d.border.color,"_data_").concat(+!!c.border.color,"_right"));m&&nu.assert(m===Gq.Right),Xq(m,g,e,t,1,1,3,s)}if((null==a?void 0:a.type)===bY.SubTotalRow||(null==a?void 0:a.type)===bY.GrandTotalRow)if(p){var f=e%2==0?l.border.color:u.border.color,v=Jq(e%2==0?"row_subTotals_".concat(+!!d.border.color,"_firstDataStripe_").concat(+!!l.border.color,"_left"):"row_subTotals_".concat(+!!d.border.color,"_secondDataStripe_").concat(+!!u.border.color,"_left"));v&&nu.assert(v===Gq.Left),Xq(v,f,e,t,1,1,3,s)}else{var b=c.border.color,C=Jq("row_subTotals_".concat(+!!d.border.color,"_data_").concat(+!!c.border.color,"_left"));C&&nu.assert(C===Gq.Right),Xq(C,b,e,t,1,1,3,s)}if((null==r?void 0:r.type)===bY.SubTotalColumn||(null==r?void 0:r.type)===bY.GrandTotalColumn)if(p){var T=e%2==0?l.border.color:u.border.color,S=Jq(e%2==0?"row_subTotals_".concat(+!!d.border.color,"_firstDataStripe_").concat(+!!l.border.color,"_bottom"):"row_subTotals_".concat(+!!d.border.color,"_secondDataStripe_").concat(+!!u.border.color,"_bottom"));S&&nu.assert(S===Gq.Bottom),Xq(S,T,e,t,1,1,3,s)}else{var D=c.border.color,k=Jq("row_subTotals_".concat(+!!d.border.color,"_data_").concat(+!!c.border.color,"_bottom"));k&&nu.assert(k===Gq.Bottom),Xq(k,D,e,t,1,1,3,s)}if((null==i?void 0:i.type)===bY.SubTotalColumn||(null==i?void 0:i.type)===bY.GrandTotalColumn)if(p){var w=e%2==0?l.border.color:u.border.color,x=Jq(e%2==0?"row_subTotals_".concat(+!!d.border.color,"_firstDataStripe_").concat(+!!l.border.color,"_top"):"row_subTotals_".concat(+!!d.border.color,"_secondDataStripe_").concat(+!!u.border.color,"_top"));x&&nu.assert(x===Gq.Top),Xq(x,w,e,t,1,1,3,s)}else{var A=c.border.color,I=Jq("row_subTotals_".concat(+!!d.border.color,"_data_").concat(+!!c.border.color,"_top"));I&&nu.assert(I===Gq.Top),Xq(I,A,e,t,1,1,3,s)}}function aJ(e,t,a,n,i){var r=a.firstDataStripe,o=a.useAlternateRowStyle,s=i.getStyleName(e,t,Yq.viewport);o&&s===Kq.SecondDataStripe&&(Xq(Gq.Top,r.border.color,e,t,1,1,Yq.viewport,i),e!==n-1&&Xq(Gq.Bottom,r.border.color,e,t,1,1,Yq.viewport,i))}function nJ(e,t,a,n,i,r,o){var s=i.subTotals,l=i.grandTotals;6<arguments.length&&void 0!==o||Yq.viewport;if((null==a?void 0:a.type)===bY.GrandTotalRow){var u=s.border.color,c=Jq("grandTotals_".concat(+!!l.border.color,"_subTotals_").concat(+!!s.border.color,"_right"));c&&nu.assert(c===Gq.Right),Xq(c,u,e,t,1,1,3,r)}if((null==n?void 0:n.type)===bY.GrandTotalColumn||(null==n?void 0:n.type)===bY.RowHeaderGrandTotal){var d=s.border.color,p=Jq("grandTotals_".concat(+!!l.border.color,"_subTotals_").concat(+!!s.border.color,"_bottom"));p&&nu.assert(p===Gq.Bottom),Xq(p,d,e,t,1,1,3,r)}}function iJ(e,t,a,n){var i=a.corner,r=a.colHeader,o=Jq("corner_".concat(+!!i.border.color,"_colHeader_").concat(+!!r.border.color));if(o){nu.assert(null!=o);var s=Dl.a.Spread.Sheets.LineStyle.empty;o===Gq.None&&(o=Gq.Left,s=Dl.a.Spread.Sheets.LineStyle.double),nu.assert(o===Gq.Left),Xq(o,r.border.color,e,t,1,1,Yq.colHeader,n,s)}}function rJ(e,t,a,n){var i=a.corner,r=a.rowHeader,o=Jq("corner_".concat(+!!i.border.color,"_rowHeader_").concat(+!!r.border.color));if(o){nu.assert(null!=o);var s=Dl.a.Spread.Sheets.LineStyle.empty;o===Gq.None&&(o=Gq.Top,s=Dl.a.Spread.Sheets.LineStyle.double),Xq(o,r.border.color,e,t,1,1,Yq.viewport,n,s),nu.assert(o===Gq.Top)}}function oJ(e,t,a,n){var i=a.rowHeader,r=a.whole,o=a.firstDataStripe,s=a.secondDataStripe;if(a.useAlternateRowStyle){var l=e%2?s.border.color:o.border.color,u=Jq(e%2?"rowHeader_".concat(+!!i.border.color,"_secondDataStripe_").concat(+!!s.border.color):"rowHeader_".concat(+!!i.border.color,"_firstDataStripe_").concat(+!!o.border.color));u?(nu.assert(null!=u),nu.assert(u===Gq.Left),Xq(u,l,e,t,1,1,Yq.viewport,n)):!i.border.color&&l&&n.getCell(e,t).borderLeft(new Dl.a.Spread.Sheets.LineBorder(l,Dl.a.Spread.Sheets.LineStyle.double))}else{var c=r.border.color,d=Jq("rowHeader_".concat(+!!r.border.color,"_data_").concat(+!!r.border.color));d&&(nu.assert(null!=d),nu.assert(d===Gq.Left),Xq(d,c,e,t,1,1,Yq.viewport,n))}}function sJ(e,t,a,n){var i,r,o=a.colHeader,s=a.firstDataStripe,l=a.whole;(r=a.useAlternateRowStyle?(i=s.border.color,Jq("colHeader_".concat(+!!o.border.color,"_firstDataStripe_").concat(+!!s.border.color))):(i=l.border.color,Jq("colHeader_".concat(+!!o.border.color,"_data_").concat(+!!l.border.color))))?(nu.assert(null!=r),nu.assert(r===Gq.Top),Xq(r,i,e,t,1,1,Yq.viewport,n)):!o.border.color&&i&&n.getCell(e,t).borderTop(new Dl.a.Spread.Sheets.LineBorder(i,Dl.a.Spread.Sheets.LineStyle.double))}function lJ(e,t){var a=t.sheet.getParent().getHost();if(a){var n=a.querySelector('[gcuielement="gcEditingInput"]');n&&(n.style.color="#000",n.style.backgroundColor="#fff")}}function uJ(e,t){var a=t.sheet,n=t.row,i=t.col,r=t.editingText;if(!isNaN(+r)){var o=Dl.a.Spread.Sheets.DataValidation.createNumberValidator(Dl.a.Spread.Sheets.ConditionalFormatting.ComparisonOperators.between,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,!1);o.errorMessage("Invalid Message"),o.ignoreBlank(!1),a.setDataValidator(n,i,1,1,o,Dl.a.Spread.Sheets.SheetArea.viewport)}}function cJ(e,t){var a=t.row,n=t.col,i=t.sheet;if(i.isEditing()){var r=i.getSelections()[0],o=r&&r.row||i.getActiveRowIndex(),s=r&&r.col||i.getActiveColumnIndex();o===a&&s===n||i.endEdit(!1)}}function dJ(e){var t=0<arguments.length&&void 0!==e?e:{};return{color:t.color,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle}}var pJ,hJ,yJ=function(){function n(e,t,a){var d=this;I()(this,n),this.registerEventHandlers=function(t){null!=t&&(d._eventHandlers=t,Object.keys(t).forEach(function(e){d._host&&d._host.addEventListener(e,t[e])}))},this.unregisterEventHandlers=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];d._eventHandlers&&(0===e.length?Object.keys(d._eventHandlers).forEach(function(e){d._host&&d._host.removeEventListener(e,d._eventHandlers[e])}):e.forEach(function(e){d._eventHandlers[e]&&d._host&&d._host.removeEventListener(e,d._eventHandlers[e])}))},this.handleScrollbarInMouseEnter=function(){d._mouseEnter=!0,d._setScrollbar(d._options.scrollbarMode,!0)},this.handleScrollbarInMouseLeave=function(){d._mouseEnter=!1,d._options.scrollbarMode!==mr&&d._options.scrollbarMode!==br||d._updateScrollbarInfo(),d._setScrollbar(d._options.scrollbarMode)},this.handleColumnResized=function(e,t){d._options.scrollbarMode===br||d._options.scrollbarMode===mr?(function(e){for(var t=e.sheet,a=t.getParent(),n=t.getColumnCount(Dl.a.Spread.Sheets.SheetArea.colHeader),i=a.getHost().offsetWidth,r=0,o=0;o<n;++o)r+=t.getColumnWidth(o,Dl.a.Spread.Sheets.SheetArea.viewport);a.options.showHorizontalScrollbar=i<r}(t),d._updateScrollbarInfo()):d._setScrollbar(d._options.scrollbarMode,!0)},this.handleRowResized=function(e,t){d._options.scrollbarMode===br||d._options.scrollbarMode===mr?(function(e){for(var t=e.sheet,a=t.getParent(),n=t.getRowCount(Dl.a.Spread.Sheets.SheetArea.viewport),i=t.getRowCount(Dl.a.Spread.Sheets.SheetArea.colHeader),r=a.getHost().offsetHeight,o=0,s=0;s<i+n;++s)o+=s<i?t.getRowHeight(s,Dl.a.Spread.Sheets.SheetArea.colHeader):t.getRowHeight(s,Dl.a.Spread.Sheets.SheetArea.viewport);a.options.showVerticalScrollbar=r<o}(t),d._updateScrollbarInfo()):d._setScrollbar(d._options.scrollbarMode,!0)},this._updateScrollbarInfo=function(){d._showHorizontalScrollbar=d._spread.options.showHorizontalScrollbar,d._showVerticalScrollbar=d._spread.options.showVerticalScrollbar},this.getAlignmentInfo=function(e,t,a){return wq(e,t,a)},this._autoFitRowsHeight=function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3;(function(e,o,t,a,n){var s=2<arguments.length&&void 0!==t?t:3,i=3<arguments.length&&void 0!==a?a:0,l=4<arguments.length&&void 0!==n?n:0;return e.map(function(e,r){nu.assert(-1<r);var t=e.reduce(function(e,t){var a,n=o.getCellType(r,t,s),i=Iq(r,t,o,s);try{a=n.getAutoFitHeight(i.value,i.text,i.cellStyle,i.zoomFactor,i.context)}catch(e){a=o.getRowHeight()}return e=Math.max(e,l,a),Math.ceil(Math.min(e,1e3))},i);return{row:r,height:t}})})(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],d._sheet,n,e).forEach(function(e){var t=e.row,a=e.height;nu.assert(-1<t&&t<d._sheet.getRowCount()),d._sheet.setRowHeight(t,a,n)})},this.setColumnWidthAfterResized=function(e,t){var a=Aq(d._host,d._sheet,d._options.scrollbarMode,e),n=Bo.a.sum(t),i=n/a;d.autoFitColumnsInfo=[],d.layoutScale=i;function r(e,t){d.autoFitColumnsInfo[t]={columnWidth:e/n,tableWidth:n/a,details:d.getColHeaderInfo(t)}}if(d._options.expand)t.forEach(function(e,t){d._sheet.setColumnWidth(t,e),r(e,t)});else{var o=[];t.forEach(function(e,t){var a=parseInt(e/i,10);d._sheet.setColumnWidth(t,a),o.push(a)}),o.forEach(r),d.layoutScale=Bo.a.sum(o)/a;for(var s=d._sheet.getColumnCount(),l=a-Bo.a.sum(Bo.a.range(0,s).map(function(e){return d._sheet.getColumnWidth(e)})),u=0;1<l;){var c=d._sheet.getColumnWidth(u)+1;d._sheet.setColumnWidth(u,c),u=(u+1)%s,--l}}d._updateTableWidth(),d._spread.options.showHorizontalScrollbar=d._tableWidth>a},this._autoFitColumnsWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=!d._options.whole.enableWordWrap&&!d._options.colHeader.enableWordWrap;d._updateTableWidth(),d._updateTableHeight();var a=d._getColCount(),n=t?d._options.autoFitMode:!d._options.whole.enableWordWrap&&Or||!d._options.colHeader.enableWordWrap&&Er,i={expand:d._options.expand,scrollbarMode:d._options.scrollbarMode,workSheet:d._sheet,tableWidth:d._tableWidth,tableHeight:d._tableHeight,columnCount:a,spreadHostDom:d._host,queryMiniColWidth:d._getMinimumAutoFitColumnWidth.bind(d),autoFitMode:n},r=lq(d,i,e),o=N()(r,3),s=o[0],l=o[1],u=o[2];s&&l&&(d.layoutWidth=s,d.layoutScale=l,d.autoFitColumnsInfo=u)},this._getScenarioLayoutWidth=function(){d._updateTableHeight();var e=d._host&&d._host.offsetWidth||d._sheet&&d._sheet.getViewportWidth(1),t=d._host&&d._host.offsetHeight||d._sheet&&d._sheet.getViewportHeight(1),a=parseInt(t,10),n=d._tableHeight>a||d._options.scrollbarMode===vr,i=d._options.scrollbarMode===fr||d._options.scrollbarMode===br?0:22;return parseInt(e,10)-(n?i:0)},this.queryInteraction=function(e){var t={uiSort:!0,crossFilter:!0,tooltip:!0,quickFilter:!0};return e.attached&&(t={uiSort:!1,crossFilter:!1,tooltip:!1,quickFilter:!1}),t},this._clearConditionalFormat=function(){d._sheet.conditionalFormats.clearRule();for(var e=d._spread.getSheetCount(),t=[],a=0;a<e-1;a+=1){var n=d._spread.getSheet(a).name();null!=n&&n.startsWith("cf-")&&t.push(n)}t.forEach(function(e){var t=d._spread.getSheetIndex(e);d._spread.removeSheet(t)})},this._getRangeFormulaA1Style=function(e,a){var n=a.getRowCount()-1;return a.getColumnCount()<e.length&&a.setColumnCount(e.length),e.forEach(function(e,t){a.setFormula(n,t,e)}),"$A$".concat(1+n,":$").concat(RY(e.length),"$").concat(1+n)},this._clickOnTable=function(e){var t=Mq(d._sheet,e,d._host);if(t){var a=t.row,n=t.col;(Bo.a.isNil(a)||Bo.a.isNil(n))&&d._onBlankClickFns.forEach(function(e){return e()})}},this._host=e,this._data=t,this._options=a,this._sheet=null,this._spread=null,this._mouseEnter=!1,Dl.a.Spread.CalcEngine.Parser.numberDecimalSeparator=".",this._showVerticalScrollbar=!1,this._showHorizontalScrollbar=!1,this._eventHandlers={},this.autoFitColumnsInfo=[],this._suspendCount=0,this._onBlankClickFns=[],this._updateRowHeight(),this.init()}return D()(n,[{key:"_updateRowHeight",value:function(){var e=this._options,t=e.colHeader.textStyle,a=e.whole.textStyle,n=e.rowHeight;this._rowHeightOfHeader=ju(t.fontSize)*n,this._rowHeightOfViewport=ju(a.fontSize)*n}},{key:"refresh",value:function(){}},{key:"update",value:function(){}},{key:"clearSelection",value:function(e){var t=0<arguments.length&&void 0!==e?e:this._sheet;t&&(t.clearSelection(),t.parent.focus(!1))}},{key:"_setDefaultSpreadAndSheetOptions",value:function(){var t=this,a={showHorizontalScrollbar:!1,showVerticalScrollbar:!1,allowUserDragDrop:!1,allowUserDragFill:!1,showDragDropTip:!1,scrollbarMaxAlign:!0,scrollbarShowMax:!0,scrollIgnoreHidden:!0,hideSelection:!1,allowUserZoom:!1,allowContextMenu:!1,cutCopyIndicatorVisible:!1,scrollByPixel:this._options.scrollByPixel,autoFitType:this._options.expand?Dl.a.Spread.Sheets.AutoFitType.cellWithHeader:Dl.a.Spread.Sheets.AutoFitType.cell,allowUndo:!1,grayAreaBackColor:"transparent",backColor:"rgba(255,0,0,0)",newTabVisible:!1};nu.assert(void 0===Object.keys(a).find(function(e){return"tabStripVisible"===e}));var n={rowHeaderVisible:!1,allowCellOverflow:!1};this._spread.commandManager().setShortcutKey("",90,!0,!1,!1,!1),this._spread.commandManager().setShortcutKey("",89,!0,!1,!1,!1),Object.keys(a).forEach(function(e){return Bo.a.set(t._spread.options,e,a[e])}),Object.keys(n).forEach(function(e){return Bo.a.set(t._sheet.options,e,n[e])})}},{key:"init",value:function(){if("string"==typeof this._host&&(this._host=d$.uiDelegatorManager.querySelector("#".concat(this._host))),!(this._host instanceof HTMLElement))throw TypeError("Need host with element id or dom container");this._spread=oq(this._host),this._sheet=this._spread.getActiveSheet(),this.suspend(),this._spread.options.tabStripVisible=!1,this._setDefaultSpreadAndSheetOptions(),this._spread.commandManager().setShortcutKey("",86,!0,!1,!1,!1),this._spread.commandManager().setShortcutKey("",86,!1,!1,!1,!0),this._spread.commandManager().setShortcutKey("",88,!0,!1,!1,!1),this._spread.commandManager().setShortcutKey("",88,!1,!1,!1,!0),this._addEventHandlersToSheetInternal(),this.registerEventHandlers({mouseenter:this.handleScrollbarInMouseEnter,mouseleave:this.handleScrollbarInMouseLeave,click:this._clickOnTable}),this._sheet.clearSelection(),this.resume()}},{key:"dispose",value:function(){this._spread.destroy(),this._spread=null,this._sheet=null,this.unregisterEventHandlers(),this._host&&(this._host.removeEventListener("mouseenter",this.handleScrollbarInMouseEnter),this._host.removeEventListener("mouseleave",this.handleScrollbarInMouseLeave))}},{key:"setOptions",value:function(){}},{key:"updateStyle",value:function(){var e=this.getSheet(),t=this.getOptions(),a=t.whole.textStyle,n=t.colHeaderVisible;e.options.selectionBorderColor=a.color,n!==e.options.colHeaderVisible&&(e.options.colHeaderVisible=n)}},{key:"getConditionalFormats",value:function(){var e;return null===(e=this._data.datasetInfo)||void 0===e?void 0:e.conditionalFormats}},{key:"setConditionalFormat",value:function(e,t){try{!function(e,t,a){var n=t.condition.conditionRule;try{pq[n](e,t,a)}catch(e){nu.error(e)}}(this._spread.getActiveSheet(),e,t)}catch(e){nu.error(e)}}},{key:"addHandlersToWorksheet",value:function(e){this._addEventHandlersToSheetInternal(e)}},{key:"_addEventHandlersToSheetInternal",value:function(e){var t,a=this,n=e||(t={},V()(t,Dl.a.Spread.Sheets.Events.ColumnWidthChanged,[this.handleColumnResized]),V()(t,Dl.a.Spread.Sheets.Events.RowHeightChanged,[this.handleRowResized]),V()(t,Dl.a.Spread.Sheets.Events.TouchToolStripOpening,[function(e,t){t.handled=!0}]),t);Object.keys(n).forEach(function(t){Array.isArray(n[t])?n[t].forEach(function(e){a._sheet.bind(t,e)}):a._sheet.bind(t,n[t])})}},{key:"getSpread",value:function(){return this._spread}},{key:"getSheet",value:function(){return this._sheet}},{key:"getOptions",value:function(){return this._options}},{key:"scrollToFirstRow",value:function(){if(this.getSheet()&&0!==this.getSheet().getViewportTopRow(1)){var e=this.getSpread();e.options.scrollByPixel=!1,this.getSheet().showRow(0,0),e.options.scrollByPixel=this._options.scrollByPixel}}},{key:"_closeSmoothScroll",value:function(){this._spread.options.scrollByPixel=!1}},{key:"_resetScrollBehavior",value:function(){this._spread.options.scrollByPixel=this._options.scrollByPixel}},{key:"_setScrollbar",value:function(e,t){var a,n,i=1<arguments.length&&void 0!==t&&t,r={showVerticalScrollbar:this._showVerticalScrollbar,showHorizontalScrollbar:this._showHorizontalScrollbar};e!==br?(n=r,(a=e)===vr?(n.showVerticalScrollbar=!0,n.showHorizontalScrollbar=!0):a===fr&&(n.showVerticalScrollbar=!1,n.showHorizontalScrollbar=!1)):i?(r.showVerticalScrollbar=this._showVerticalScrollbar,r.showHorizontalScrollbar=this._showHorizontalScrollbar):(r.showVerticalScrollbar=!1,r.showHorizontalScrollbar=!1),this._spread.options.showVerticalScrollbar=r.showVerticalScrollbar,this._spread.options.showHorizontalScrollbar=this._options.showHorizontalScrollbarInForce||r.showHorizontalScrollbar,this.setScrollbarThumbBackColor(this._options.scrollbarThumbBackColor),this.setScrollbarTrackBackColor(this._options.scrollbarTrackBackColor)}},{key:"_reset2DefaultColWidthAndRowHeight",value:function(){var t=this;this.suspend();var a=this._rowHeightOfViewport,n=this._sheet.getColumnWidth();Bo.a.range(0,this._sheet.getRowCount(1)).forEach(function(e){t._sheet.setRowHeight(e,t._rowHeightOfHeader,1)}),Bo.a.range(0,this._sheet.getRowCount()).forEach(function(e){t._sheet.setRowHeight(e,a)}),Bo.a.range(0,this._sheet.getColumnCount(1)).forEach(function(e){t._sheet.setColumnWidth(e,n,1)}),Bo.a.range(0,this._sheet.getColumnCount()).forEach(function(e){t._sheet.setColumnWidth(e,n)}),this._updateTableHeight(),this._updateTableWidth(),this.resume()}},{key:"_calcColumnResizeInfo",value:function(e,t){var a=this;nu.assert(void 0!==t);var n=Bo.a.sum(e),i=n/t,r=e.map(function(e,t){return{columnWidth:e/n,tableWidth:i,details:a.getColHeaderInfo(t)}});this.layoutWidth=t,this.layoutScale=i,this.autoFitColumnsInfo=r,this._spread.options.showHorizontalScrollbar=this.layoutWidth<n}},{key:"_doAutoFit",value:function(e){var a=this,t=0<arguments.length&&void 0!==e&&e;if(this.suspend(),this._options.whole.enableWordWrap&&this._options.colHeader.enableWordWrap){var n=this._options.scrollbarMode===mr||this._options.scrollbarMode===vr?22:0,i=this._host.offsetWidth-n,r=this._sheet.getColumnCount(),o=Math.floor(i/r),s=0;this._options.expand?o=Math.max(Math.ceil(i/r),2*this._sheet.getColumnWidth()):o*r<i&&(s=i-o*r,o+=Math.floor(s/r),s=i-o*r);var l=[];Bo.a.range(0,this._sheet.getColumnCount()).forEach(function(e){var t=o+(1<s?1:0);a._sheet.setColumnWidth(e,t),l.push(t),--s}),this._calcColumnResizeInfo(l,i),this._autoFitRow()}else this._autoFitColumnsWidth(t),this._autoFitRow();this.resume()}},{key:"getDefaultFixedColumnInfo",value:function(){var e=parseInt(Math.max(Math.floor(this._getScenarioLayoutWidth()/this._getColCount()),2*this._sheet.getColumnWidth()),10);return Bo.a.range(0,this._getColCount()).map(function(){return e})}},{key:"suspend",value:function(){this._spread.suspendEvent(),this._spread.suspendPaint(),this._suspendCount+=1,this._closeSmoothScroll()}},{key:"resume",value:function(){this._spread&&(this._spread.resumeEvent(),this._spread.resumePaint(),--this._suspendCount,this._suspendCount<=0&&(this._resetScrollBehavior(),this.setScrollbarThumbBackColor(this._options.scrollbarThumbBackColor),this.setScrollbarTrackBackColor(this._options.scrollbarTrackBackColor)))}},{key:"_setRowHeight",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:Dl.a.Spread.Sheets.SheetArea.viewport,n=this._options.whole.textStyle.fontSize,i=this._options.rowHeight;a===Dl.a.Spread.Sheets.SheetArea.colHeader&&(n=this._options.colHeader.fontSize);var r=ju(n)*i;this._sheet.setRowHeight(e,r)}},{key:"_setTopDoubleBorder",value:function(e,t,a,n,i,r){Zq({row:e,col:t,rowCount:n,colCount:i,color:a,sheet:this._sheet,sheetArea:r})}},{key:"_setLeftMostDoubleBorder",value:function(e,t,a,n,i,r){Qq({row:e,col:t,rowCount:n,colCount:i,sheetArea:r,sheet:this._sheet,color:a})}},{key:"_getMinimumAutoFitColumnWidth",value:function(){return Number.MIN_SAFE_INTEGER}},{key:"_updateTableHeight",value:function(){nu.assert(null!=this._sheet);for(var e=0,t=this._sheet.getRowCount(1),a=0;a<t;a+=1)e+=this._sheet.getRowHeight(a,1);for(var n=this._sheet.getRowCount(),i=0;i<n;i+=1)e+=this._sheet.getRowHeight(i);this._tableHeight=e}},{key:"_updateTableWidth",value:function(){nu.assert(null!=this._sheet);for(var e=this._sheet.getColumnCount(),t=0,a=0;a<e;a+=1)t+=this._sheet.getColumnWidth(a);this._tableWidth=t}},{key:"_autoFitRow",value:function(){var n=this,e=Bo.a.range(0,this._sheet.getRowCount(1)).reduce(function(e,t){var a=[];return n._sheet.setRowHeight(t,n._rowHeightOfHeader,1),Bo.a.range(0,n._sheet.getColumnCount()).forEach(function(e){return a.push(e)}),e.push(a),e},[]);this._options.colHeader.enableWordWrap&&this._autoFitRowsHeight(e,this._rowHeightOfHeader,1);var t=Bo.a.range(0,this._sheet.getRowCount()).reduce(function(e,t){var a=[];return n._sheet.setRowHeight(t,n._rowHeightOfViewport),Bo.a.range(0,n._sheet.getColumnCount()).forEach(function(e){return a.push(e)}),e.push(a),e},[]);this._options.whole.enableWordWrap&&this._autoFitRowsHeight(t,this._rowHeightOfViewport),this._updateVerticalScrollbar()}},{key:"getViewportColumn",value:function(){var e=this._sheet.getViewportLeftColumn(1),t=this._sheet.getViewportRightColumn(1);return{left:e,right:t,colCount:t-e}}},{key:"getViewportRow",value:function(){var e=this._sheet.getViewportTopRow(1),t=this._sheet.getViewportBottomRow(1);return{top:e,bottom:t,rowCount:t-e+1}}},{key:"_updateVerticalScrollbar",value:function(){this._updateTableHeight();var e=this._host&&this._host.offsetHeight||this._sheet&&this._sheet.getViewportHeight(1),t=parseInt(e,10),a=this._options.scrollbarModee!==fr&&this._options.scrollbarMode!==br&&this._spread.options.showHorizontalScrollbar?28:0;this._spread.options.showVerticalScrollbar=this._spread.options.showHorizontalScrollbar?this._tableHeight>t-a:this._tableHeight>t}},{key:"renderImage2Cell",value:function(e){var t=e.row,a=e.col,n=e.renderSetting,i=e.value,r=e.sheetArea;nu.assert(n===H.ImageRenderSetting.ImageBinary||n===H.ImageRenderSetting.ImageURL);var o=i;n===H.ImageRenderSetting.ImageBinary&&(o=Pu(i)),this._sheet.getCell(t,a,r).backgroundImage(o),this._sheet.getCell(t,a,r).backgroundImageLayout(Dl.a.Spread.Sheets.ImageLayout.zoom)}},{key:"_getFilterDialogPosition",value:function(e){if(this._host){var t=this._host.getBoundingClientRect();return{left:e.x+t.left,top:e.y+e.height+t.top,type:"bottom"}}}},{key:"restoreScrollPosition",value:function(){this.scrollToFirstRow()}},{key:"hasSelections",value:function(){var e=this._sheet.getSelections();return 0<(null==e?void 0:e.length)}},{key:"setScrollbarThumbBackColor",value:function(e){if(e&&""!==e){var t=lc()(e);this._host.style.setProperty("--scrollbar-thumb-bg-color",e),this._host.style.setProperty("--scrollbar-thumb-border-color",t.darken(.3))}}},{key:"setScrollbarTrackBackColor",value:function(e){e&&""!==e&&this._host.style.setProperty("--scrollbar-track-bg-color",e)}},{key:"repaint",value:function(){this._spread.repaint()}},{key:"onBlankClicked",value:function(e){this._onBlankClickFns.push(e)}}]),n}(),gJ=function(){function d(e,t){var n=this,a=e.colHeader,i=e.firstDataStripe,r=e.secondDataStripe,o=e.corner,s=e.rowHeader,l=e.subTotals,u=e.grandTotals,c=e.whole;I()(this,d),this.setStyles=function(e,t){var a,n,i,r,o;e&&(e.wordWrap=t.enableWordWrap,e.backColor=t.backColor,e.foreColor=t.textStyle.color,e.font=Ku(t.textStyle),t.border&&(a=t.border,n=e,i=a.color,r=i?Dl.a.Spread.Sheets.LineStyle.thin:Dl.a.Spread.Sheets.LineStyle.empty,o=new Dl.a.Spread.Sheets.LineBorder(i||"transparent",r),n.borderTop=o,n.borderRight=o,n.borderBottom=o,n.borderLeft=o))},this.propertiesToStyle=function(e,t){if(e){var a=new Dl.a.Spread.Sheets.Style;n.setStyles(a,e),a.name=t,n.sheet.addNamedStyle(a)}},this.whole=c||{},this.colHeader=a,this.firstDataStripe=i,this.secondDataStripe=r,this.corner=o,this.rowHeader=s,this.subTotals=l,this.grandTotals=u,this.sheet=t,this.init()}return D()(d,[{key:"init",value:function(){this.propertiesToStyle(this.colHeader,Kq.ColHeader),this.propertiesToStyle(this.whole,Kq.Whole),this.propertiesToStyle(this.firstDataStripe,Kq.FirstDataStripe),this.propertiesToStyle(this.secondDataStripe,Kq.SecondDataStripe)}},{key:"getStyleName",value:function(e){return e}},{key:"update",value:function(e){var t=e.colHeader,a=e.firstDataStripe,n=e.secondDataStripe,i=e.whole;this.whole=i,this.colHeader=oh()(this.colHeader,{$set:t}),this.setStyles(this.sheet.getNamedStyle(Kq.ColHeader),this.colHeader),this.whole=oh()(this.whole,{$set:i}),this.setStyles(this.sheet.getNamedStyle(Kq.Whole),this.whole),this.firstDataStripe=oh()(this.firstDataStripe,{$set:a}),this.setStyles(this.sheet.getNamedStyle(Kq.FirstDataStripe),this.firstDataStripe),this.secondDataStripe=oh()(this.firstDataStripe,{$set:n}),this.setStyles(this.sheet.getNamedStyle(Kq.SecondDataStripe),this.secondDataStripe)}}]),d}(),mJ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(){C()(b()(a.prototype),"init",this).call(this),this.propertiesToStyle(this.corner,Kq.Corner),this.propertiesToStyle(this.rowHeader,Kq.RowHeader)}},{key:"update",value:function(e){C()(b()(a.prototype),"update",this).call(this,e),this.corner=oh()(this.corner,{$set:e.corner}),this.setStyles(this.sheet.getNamedStyle(Kq.Corner),this.corner),this.rowHeader=oh()(this.rowHeader,{$set:e.rowHeader}),this.setStyles(this.sheet.getNamedStyle(Kq.RowHeader),this.rowHeader)}}]),a}(gJ),fJ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(){C()(b()(a.prototype),"init",this).call(this),this.propertiesToStyle(this.subTotals,Kq.SubTotals),this.propertiesToStyle(this.grandTotals,Kq.GrandTotals)}},{key:"update",value:function(e){C()(b()(a.prototype),"update",this).call(this,e),this.subTotals=oh()(this.subTotals,{$set:e.subTotals}),this.setStyles(this.sheet.getNamedStyle(Kq.SubTotals),this.subTotals),this.grandTotals=oh()(this.grandTotals,{$set:e.grandTotals}),this.setStyles(this.sheet.getNamedStyle(Kq.GrandTotals),this.grandTotals)}}]),a}(mJ);(hJ=pJ=pJ||{})[hJ.corner=0]="corner",hJ[hJ.column=1]="column",hJ[hJ.row=2]="row",hJ[hJ.data=3]="data";function vJ(e){return!Ho.isEmpty(e)&&!e.attached}function bJ(e){return!Bo.a.isEmpty(e)&&!e.attached}function CJ(e,t){var a=t;return e.forEach(function(r){var e=a.findIndex(function(e){if("".concat(e.details.path)!=="".concat(r.details.path)||"".concat(e.details.columns)!=="".concat(r.details.columns))return!1;var t,a;if(e.details.measure&&r.details.measure){var n=e.details,i=e.details.measure.columnName===r.details.measure.columnName&&e.details.measure.aggregationMethod===r.details.measure.aggregationMethod&&e.details.measure.valueType===r.details.measure.valueType;return i&&r.details.measure.calculation?!!n.measure.calculation&&(t=n.measure.calculation,a=r.details.measure,!!t&&t.type===a.calculation.type&&t.method===a.calculation.method):i}return e.details.key===r.details.key&&e.details.attached===r.details.attached});-1<e?a[e]=r:a.push(r)}),a}function TJ(e){var t=e.getPivotSetting({withoutInvalid:!0,withoutHierarchy:!0,valuesOnly:!0}),a=t.trellisRows.concat(t.rows),n=t.trellisRows.length,i=[],r=e.getUsedDimensionItems();return a.forEach(function(t,e){var a=r.find(function(e){return e.name===t.name});a&&i.push({name:a.name,isTrellis:e<n})}),i}function SJ(e,t,a){var n,i,r=2<arguments.length&&void 0!==a?a:{},o=((i=new RJ(n=e,t)).build(n.matrix),i),s=TJ(t).map(function(e){return e.name}).reduce(function(e,t){return r[t]&&(e[t]=r[t]),e},{});return Object.keys(s).length&&o.sort(s),o}function DJ(e,t,a,n,i,r,o){return{datasetProfile:a.getDatasetProfile(),usedRowDimensions:TJ(a),usedColumnDimensions:(l=(s=a).getPivotSetting({withoutInvalid:!0,withoutHierarchy:!0,valuesOnly:!0}),u=l.trellisColumns.concat(l.columns),c=l.trellisColumns.length,d=[],p=s.getUsedDimensionItems(),u.forEach(function(t,e){var a=p.find(function(e){return e.name===t.name});a&&d.push({name:a.name,isTrellis:e<c})}),d),conditionalFormats:OY(a,"values",n,{showRowNumber:o}).conditionFormats,pivotId:e,customData:t,alignmentInfo:BY(a,i,["trellisRows","rows","values"]),renderSettingInfo:UY(a,["rows","columns"]),pivotFilterColumns:Ho.uniq(Ho.flatten(r.map(function(e){return e.columnNames})))};var s,l,u,c,d,p}function kJ(a,e,t,n){var i=t.data,r=e.name,o=e.index,s=e.colIndex,l=i.map(function(e){return e[o]}),u=l.length;a.setRowCount(u+1),a.setColumnCount(s+1),a.setValue(0,s,r,1),l.forEach(function(e,t){null!=e?a.setValue(t,s,e):"-"===n?a.setValue(t,s,n):a.setFormula(t,s,n)})}function wJ(){return wu.apply(void 0,arguments)}function xJ(e){if("string"!=typeof e)return"";if(e.startsWith("#"))return'"'.concat(e,'"');var t=Hs.docTheme(d$.reduxProxy.getState());return'"'.concat(Vc(e,t),'"')}function AJ(e){return null==e?"":e/100}function IJ(e,t){var a=e.headers,n=e.levels;if(!n.length)return[t];var r=[];return function t(e,a){var n=1<arguments.length&&void 0!==a?a:{};if(Array.isArray(e))return e.map(function(e){return t(e,n)});var i=n[e.label];if(!e.next||!e.next.length)return r.push(null!=i?i:[]);t(e.next,i)}(a,function t(e,a){if(!a.length)return e;var n=hP()(a),i=n[0],r=n.slice(1),o=Bo.a.groupBy(e,function(e){return e[i]});return ae.map(function(e){return t(e,r)},o)}(t,n)),r}var PJ,_J,MJ=function(){function t(e){I()(this,t),this._area=e,this.dataTable=[],this._spanItems=[],this._rowsInfo=[],this._columnsInfo=[],this._fieldsIndexesCache={}}return D()(t,[{key:"setStartInfo",value:function(e,t){this._startRow=e,this._startCol=t}},{key:"setValue",value:function(e,t,a){this._getNode(e,t,!0).value=a}},{key:"getValue",value:function(e,t){var a;return null===(a=this._getNode(e,t))||void 0===a?void 0:a.value}},{key:"setTag",value:function(e,t,a){this._getNode(e,t,!0).tag=a}},{key:"getTag",value:function(e,t){var a;return null===(a=this._getNode(e,t))||void 0===a?void 0:a.tag}},{key:"setStyle",value:function(e,t,a){this._getNode(e,t,!0).style=a}},{key:"setStyleProperty",value:function(e,t,a,n){(this._getNode(e,t,!0).style||{})[a]=n}},{key:"setStyleProperties",value:function(e,t,a){var n=this._getNode(e,t,!0);n.style||(n.style={}),n.style=Object.assign(Object.assign({},n.style),a)}},{key:"getStyle",value:function(e,t){var a;return null===(a=this._getNode(e,t))||void 0===a?void 0:a.style}},{key:"setRowCount",value:function(e){this._rowCount=e}},{key:"getRowCount",value:function(){return this._rowCount}},{key:"getColumnCount",value:function(){return this._colCount}},{key:"setColumnCount",value:function(e){this._colCount=e}},{key:"setType",value:function(e,t,a){this._getNode(e,t,!0)._type=a}},{key:"getType",value:function(e,t){var a;return null===(a=this._getNode(e,t))||void 0===a?void 0:a._type}},{key:"setOriginalInfo",value:function(e,t,a,n){var i=this._getNode(e,t,!0);i._originalRow=a,i._originalCol=n}},{key:"getOriginalInfo",value:function(e,t){var a,n,i=this._getNode(e,t);return{row:null!==(a=null==i?void 0:i._originalRow)&&void 0!==a?a:e,col:null!==(n=null==i?void 0:i._originalCol)&&void 0!==n?n:t}}},{key:"getFieldsIndexesCache",value:function(){return this._fieldsIndexesCache}},{key:"addFieldsIndexesCache",value:function(e,t,a,n,i,r,o){this._fieldsIndexesCache[e]||(this._fieldsIndexesCache[e]={}),this._fieldsIndexesCache[e][t]||(this._fieldsIndexesCache[e][t]={},this._fieldsIndexesCache[e][t].ranges=[],this._fieldsIndexesCache[e][t].roots=[]),this._fieldsIndexesCache[e][t].level=a,r?this._fieldsIndexesCache[e][t].ranges.unshift({row:n,col:i}):this._fieldsIndexesCache[e][t].ranges.push({row:n,col:i}),o&&this._fieldsIndexesCache[e][t].roots.push({row:n,col:i})}},{key:"addSpanItem",value:function(e,t,a,n,i){this._spanItems.push({row:e,col:t,rowCount:a,colCount:n,children:i})}},{key:"_getNode",value:function(e,t,a){if(!this.dataTable[e]){if(!a)return null;this.dataTable[e]=[]}if(!this.dataTable[e][t]){if(!a)return null;this.dataTable[e][t]={}}return this.dataTable[e][t]}},{key:"reset",value:function(){this.dataTable=[],this._rowCount=0,this._colCount=0,this._spanItems=[],this._rowsInfo=[],this._columnsInfo=[],this._fieldsIndexesCache={}}}]),t}(),LJ=function(){function e(){I()(this,e),this._models=[new MJ(0),new MJ(1),new MJ(2),new MJ(3)]}return D()(e,[{key:"getAllModels",value:function(){var e=N()(this._models,4);return{cornerModel:e[0],colModel:e[1],rowModel:e[2],contentModel:e[3]}}},{key:"getCornerModel",value:function(){return this._models[0]}},{key:"getColumnModel",value:function(){return this._models[1]}},{key:"getRowModel",value:function(){return this._models[2]}},{key:"getContentModel",value:function(){return this._models[3]}},{key:"getModelByKey",value:function(e){return"cornerHeaders"===e?this._models[0]:"colHeaders"===e?this._models[1]:"rowHeaders"===e?this._models[2]:this._models[3]}},{key:"getModel",value:function(e){return this._models[e]}},{key:"reset",value:function(){this._models.forEach(function(e){return e.reset()})}}]),e}(),RJ=function(){function a(e,t){var o=this;I()(this,a),this._customDatas=[],this._uiSortInfo={},this._rowHeaderLeafList=[],this._columnHeaderLeafList=[],this._rowHeaderLeafIndexDict={},this._columnHeaderLeafIndexDict={},this._valueFields=[],this._rowFields=[],this._columnFields=[],this._tooltipFields=[],this._valueFieldKeys=[],this._rowFieldKeys=[],this._columnFieldKeys=[],this._tooltipFieldKeys=[],this._valuesOrder=[],this.data=[],this.rowHeaders=[],this.columnHeaders=[],this.cornerHeaders=[],this.rowLevel=0,this.columnLevel=0,this._valueFormatList=[],this.noValues=!1,this._checkIsCustomValue=function(a,n,i,r){return 0!==o._customDatas.length&&null!=Bo.a.find(o._customDatas,function(t){if(r!==t.value)return!1;if(!ae.equals(tl(i.field),t.fieldIdentifier))return!1;var e=ae.compose(ae.all(function(e){return null!=ae.find(ae.equals(e),t.dimensions)}),ae.map(NJ));return!!e(a)&&!!e(n)})},this._getCornerHeaderLeafSortOrder=function(e){var t=o._uiSortInfo[e];return null==t||null!=t.sortBy?H.SortOrder.None:t.order},this._getColumnHeaderLeafSortOrder=function(e){var t=Bo.a.last(e),a=Bo.a.dropRight(e,1),n=ae.compose(ae.head,ae.values)(o._uiSortInfo);if(null==n||null==n.sortBy)return H.SortOrder.None;if(n.sortBy.measure&&!ae.equals(n.sortBy.measure,tl(t.field)))return H.SortOrder.None;if(a.length!==n.sortBy.columns.length)return H.SortOrder.None;for(var i=0;i<a.length;i++){var r=a[i];if(n.sortBy.columns[i]!==r.fieldName||n.sortBy.path[i]!==r.originalLookupValue)return H.SortOrder.None}return n.order},this._getRowHeaderLeaf=function(e){var t;return null!==(t=o._rowHeaderLeafList[e])&&void 0!==t?t:{headerType:bY.RowHeader,path:[],pathHashKey:""}},this._customDatas=ae.map(function(e){var t=ae.map(ae.pick(["columnName","entry"]),e.dimensions);return ae.assoc("dimensions",t,e)},e.customData||[]),this._generateValidFields(t,e),this.rowLevel=e.matrix.rows.levels.length,this.columnLevel=e.matrix.columns.levels.length,0===this.columnLevel?this.columnLevel=1:this._isMultiValueFields()&&(this.columnLevel+=1)}return D()(a,[{key:"_generateValidFields",value:function(t,e){var a,n,i=this,r=t.getPivotSetting({withoutHierarchy:!0,withoutInvalid:!0,withoutHiddenDataRoles:!0});this._valueFields=R()(r.values.values),this._rowFields=[].concat(R()(r.trellisRows.values),R()(r.rows.values)),this._columnFields=[].concat(R()(r.trellisColumns.values),R()(r.columns.values)),r.tooltip&&(this._tooltipFields=R()(r.tooltip.values)),this._valueFields.length||(this.noValues=!0,this._columnFields.length&&(this._valueFields=[{name:"$value$",display:"$value$",idx:0,formatValue:function(e){return e}}]));var o=this._valueFields.length+this._rowFields.length+this._columnFields.length;this._valueFieldKeys=Bo.a.map(this._valueFields,function(e){return e.display}),this._rowFieldKeys=Bo.a.map(this._rowFields,function(e){return e.display}),this._columnFieldKeys=Bo.a.map(this._columnFields,function(e){return e.display}),this._tooltipFieldKeys=Bo.a.map(this._tooltipFields,function(e){return e.display});var s=t.getPivotSetting({withoutHierarchy:!0,withoutInvalid:!0,withoutHiddenDataRoles:!1}),l=null===(n=Bo.a.flatten(null===(a=t.getHiddenDataRoles())||void 0===a?void 0:a.map(function(e){return t.getRoleValues([e],s)})))||void 0===n?void 0:n.filter(function(t){return!i._valueFields.find(function(e){return e.name===t.name})}),u=e.matrix.values.reduce(function(e,t){var a=Object.assign({},t);return Object.keys(a).forEach(function(t){l.find(function(e){return e.display===t})&&delete a[t]}),e.push(a),e},[]);this._valueFields.forEach(function(e){var t=Jr.isDate(e),a=Jr.isAttributeItem(e),n=t&&!a?"@":e.format;e.formatWithDisplayUnit=FJ(n,e.displayUnit,u,e.display,o)})}},{key:"build",value:function(e){this._buildCornerHeaders(e),this._buildRowHeaders(e),this._buildColumnHeaders(e),this._buildValueCells(e)}},{key:"_buildCornerHeaders",value:function(){if(0!==this.rowLevel)for(var e=0;e<this.rowLevel;e++){var t={type:bY.CornerHeader,value:this._rowFields[e].display,sortOrder:this._getCornerHeaderLeafSortOrder(this._rowFields[e].name),next:[]};this.cornerHeaders.push(t)}}},{key:"_buildRowHeaders",value:function(e){if(0!==this.rowLevel){for(var t=0,a=0;a<e.rows.headers.length;a++){var n=e.rows.headers[a],i=e.values,r=this._buildRowHeader(n,0,[],"",t,i);t=r._originalIndex+1,this.rowHeaders.push(r)}if(!this.noValues){var o=this._buildRowHeaderTotal(bY.RowHeaderGrandTotal,Ft("tables.grandTotal"),0,[],"",t);this.rowHeaders.push(o)}}else this._rowHeaderLeafIndexDict[""]=0}},{key:"_buildRowHeader",value:function(e,t,a,n,i,r){var o=this,s=i,l=e.column,u=e.label,c=Bo.a.find(this._rowFields,function(e){return e.display===l}),d=this._rowFieldKeys.filter(function(e){return e!==l}),p=a.every(function(e){return!d.includes(e.fieldDisplay)}),h=Bo.a.find(r,function(t){return t[l]===u&&(p?d.every(function(e){return void 0===t[e]}):a.every(function(e){return t[e.fieldDisplay]===e.originalLookupValue}))&&o._columnFieldKeys.every(function(e){return o._rowFieldKeys.includes(e)||void 0===t[e]})}),y=this._tooltipFields.map(function(e){return{fieldIdentifier:tl(e),value:null==h?void 0:h[e.display],display:e.display}}),g=Jr.isMeasure(c)||Jr.isSubDate(c),m=c.formatValue(u);g&&(isNaN(+m)||(m=+m));var f={fieldName:ae.prop("name",c),fieldDisplay:l,field:c,originalLookupValue:u,lookupValue:m,tooltips:y};a.push(f);for(var v=n+EJ(f.fieldDisplay,f.originalLookupValue),b={type:bY.RowHeader,value:f.originalLookupValue,format:f.field.format,next:[]},C=t+1,T=0;T<e.next.length;T++){var S=this._buildRowHeader(e.next[T],C,R()(a),v,s,r);s=S._originalIndex+1,b.next.push(S)}if(0===b.next.length&&(this._rowHeaderLeafList.push({path:R()(a),pathHashKey:v,headerType:b.type}),this._rowHeaderLeafIndexDict[v]=this._rowHeaderLeafList.length-1),!this.noValues&&1<=C&&C<this.rowLevel){var D=this._buildRowHeaderTotal(bY.RowHeaderSubTotal,Ft("tables.subTotal"),C,R()(a),v,s);s=D._originalIndex,b.next.push(D)}return b._originalIndex=s,b._level=t,b._pathHashKey=v,b}},{key:"_buildRowHeaderTotal",value:function(e,t,a,n,i,r){for(var o=2<arguments.length&&void 0!==a?a:0,s=3<arguments.length?n:void 0,l=4<arguments.length?i:void 0,u=5<arguments.length?r:void 0,c=this.rowLevel-o-1,d={type:e,value:t,_originalIndex:u,next:[],_level:o,_pathHashKey:l},p=d;0<c;){var h={type:e,value:"",_originalIndex:u,next:[],_level:o,_pathHashKey:l};p.next.push(h),p=h,c--}return this._rowHeaderLeafList.push({path:s,pathHashKey:l,headerType:d.type}),this._rowHeaderLeafIndexDict[l]=this._rowHeaderLeafList.length-1,d}},{key:"_buildColumnHeaders",value:function(e){if(0===e.columns.headers.length)this.columnHeaders=this._buildColumnHeaderWithValueFields(bY.ColumnHeader,[],"",0);else{for(var t=0,a=0;a<e.columns.headers.length;a++){var n=e.columns.headers[a],i=this._buildColumnHeader(n,0,[],"",t);t=i._originalIndex+1,this.columnHeaders.push(i)}if(!this.noValues){var r=this._buildColumnHeaderTotal(bY.ColumnHeaderGrandTotal,Ft("tables.grandTotal"),0,[],"",t);this.columnHeaders.push(r)}}}},{key:"_buildColumnHeader",value:function(e,t,a,n,i){var r,o,s=i,l=e.column,u=e.label,c=Bo.a.find(this._columnFields,function(e){return e.display===l}),d={fieldName:c.name,fieldDisplay:l,field:c,originalLookupValue:u,lookupValue:c.formatValue(u)};a.push(d);var p=n+EJ(d.fieldDisplay,d.originalLookupValue),h={type:bY.ColumnHeader,value:d.lookupValue,next:[]},y=t+1;if(0===e.next.length&&this._isMultiValueFields())h.next=this._buildColumnHeaderWithValueFields(bY.ColumnHeader,R()(a),p,s),s=Bo.a.last(h.next)._originalIndex;else{for(var g=0;g<e.next.length;g++){var m=this._buildColumnHeader(e.next[g],y,R()(a),p,s);s=m._originalIndex+1,h.next.push(m)}if(0===h.next.length){var f=this._buildColumnHeaderWithValueFields(bY.ColumnHeader,R()(a),p,s);h.sortOrder=null!==(o=null===(r=f[0])||void 0===r?void 0:r.sortOrder)&&void 0!==o?o:H.SortOrder.None}if(!this.noValues&&1<=y&&y<this.columnLevel){var v=this._buildColumnHeaderTotal(bY.ColumnHeaderSubTotal,Ft("tables.subTotal"),y,R()(a),p,s);s=v._originalIndex,h.next.push(v)}}return h._originalIndex=s,h}},{key:"_buildColumnHeaderTotal",value:function(i,e,t,a,n,r){var o,s,l,u,c=this,d=2<arguments.length&&void 0!==t?t:0,p=3<arguments.length?a:void 0,h=4<arguments.length?n:void 0,y=5<arguments.length?r:void 0,g={type:i,value:e,next:this._isMultiValueFields()||d+1<this.columnLevel?this._buildColumnHeaderWithValueFields(i,R()(p),h,y):[]};if(g.next.forEach(function(e){for(var t=c.columnLevel-d-2,a=e;0<t;){var n={type:i,value:"",_originalIndex:e._originalIndex,next:[],sortOrder:e.sortOrder};a.next.push(n),a=n,t--}}),0===g.next.length){var m=this._buildColumnHeaderWithValueFields(i,R()(p),h,y);g.sortOrder=null!==(s=null===(o=m[0])||void 0===o?void 0:o.sortOrder)&&void 0!==s?s:H.SortOrder.None}return g._originalIndex=null!==(u=null===(l=Bo.a.last(g.next))||void 0===l?void 0:l._originalIndex)&&void 0!==u?u:y,g}},{key:"_buildColumnHeaderWithValueFields",value:function(o,s,l,u){var c=this;return this._valueFields.map(function(e,t){var a={fieldName:e.name,fieldDisplay:e.display,field:e,originalLookupValue:e.display,lookupValue:e.display},n=l+a.fieldDisplay,i=[].concat(R()(s),[a]),r={path:i,headerType:o,pathHashKey:n,sortOrder:c._getColumnHeaderLeafSortOrder(i)};return c._columnHeaderLeafList.push(r),c._columnHeaderLeafIndexDict[n]=c._columnHeaderLeafList.length-1,{type:o,value:e.display,sortOrder:r.sortOrder,_originalIndex:u+t,next:[]}})}},{key:"_generateCellType",value:function(e,t){return e===bY.RowHeaderGrandTotal&&t===bY.ColumnHeaderGrandTotal?bY.GrandTotalBoth:e===bY.RowHeaderGrandTotal?bY.GrandTotalColumn:t===bY.ColumnHeaderGrandTotal?bY.GrandTotalRow:e===bY.RowHeaderSubTotal&&t===bY.ColumnHeaderSubTotal?bY.SubTotalBoth:e===bY.RowHeaderSubTotal?bY.SubTotalColumn:t===bY.ColumnHeaderSubTotal?bY.SubTotalRow:bY.ValueCell}},{key:"_buildValueCells",value:function(e){for(var t=this,a=Math.max(1,this._rowHeaderLeafList.length),n=0;n<a;n++){var i=Array(this._columnHeaderLeafList.length);this.data.push(i)}for(var r=0;r<e.values.length;r++){this._buildValueCell(e.values[r]).forEach(function(e){t.data[e.rowIndex][e.columnIndex]=e.value})}for(var o=0;o<a;o++)for(var s=this._getRowHeaderLeaf(o).headerType,l=0;l<this._columnHeaderLeafList.length;l++){var u=this._columnHeaderLeafList[l],c=u.headerType,d=Bo.a.last(u.path);null==this.data[o][l]&&(this.data[o][l]={type:this._generateCellType(s,c),value:"",format:d.field.formatWithDisplayUnit,originalValue:void 0,isCustomData:!1,_fieldName:d.fieldName})}}},{key:"_buildValueCell",value:function(n){var i=this,r=Bo.a.keys(Bo.a.pick(n,[].concat(R()(this._rowFieldKeys),R()(this._columnFieldKeys))));return this._valueFieldKeys.reduce(function(e,t){var a=i._generateCellList(n,r,t);return Bo.a.concat(e,a)},[])}},{key:"_generateCellList",value:function(a,e,t){for(var n=[],i=0;i<=this._rowFieldKeys.length;i++)for(var r=Bo.a.dropRight(this._rowFieldKeys,i),o=0;o<=this._columnFieldKeys.length;o++){var s=Bo.a.dropRight(this._columnFieldKeys,o),l=Bo.a.uniq(Bo.a.concat(r,s));if(l.length<e.length)break;if(l.length===e.length){var u=r.reduce(function(e,t){return e+EJ(t,a[t])},""),c=s.reduce(function(e,t){return e+EJ(t,a[t])},"")+t,d=this._rowHeaderLeafIndexDict[u],p=this._columnHeaderLeafIndexDict[c];if(null!=d&&null!=p){var h=this._getRowHeaderLeaf(d),y=this._columnHeaderLeafList[p],g=this._tooltipFields.map(function(e){return{fieldIdentifier:tl(e),value:a[e.display],display:e.display}});n.push({rowIndex:d,columnIndex:p,value:this._generateValueCell(h,y,a[t],g)})}}}return n}},{key:"_generateValueCell",value:function(e,t,a,n){var i=Bo.a.last(t.path);return{type:this._generateCellType(e.headerType,t.headerType),value:a,format:i.field.formatWithDisplayUnit,originalValue:a,isCustomData:this._checkIsCustomValue(e.path,Bo.a.dropRight(t.path,1),i,a),_fieldName:i.field.name,tooltips:n}}},{key:"sort",value:function(e){var t,a,n,i,r=this,o=this._uiSortInfo;if(this._uiSortInfo=null!=e?e:{},this._uiSortInfo=ae.mapObjIndexed(function(e,t){var a,n=null===(a=null==e?void 0:e.sortBy)||void 0===a?void 0:a.measure;if(null!=n){var i=ae.compose(ae.find(function(e){return e.columnName===n.name&&e.aggregationMethod===n.method}),ae.map(tl))(r._valueFields);if(i)return ae.assocPath(["sortBy","measure"],i,e)}return e},this._uiSortInfo),!ae.equals(this._uiSortInfo,o)&&!Object.values(this._uiSortInfo).every(function(e){return e.type===H.SortType.Auto})){for(var s=0;s<this.rowLevel;s++)this.cornerHeaders[s].sortOrder=this._getCornerHeaderLeafSortOrder(this._rowFields[s].name);var l=0;!function e(t){for(var a=0;a<t.length;a++){var n=t[a];if(n.next.length)e(n.next);else{var i=r._getColumnHeaderLeafSortOrder(r._columnHeaderLeafList[l].path);n.sortOrder=i,r._columnHeaderLeafList[l].sortOrder=i,l++}}}(this.columnHeaders);var u=null===(t=Object.values(this._uiSortInfo)[0])||void 0===t?void 0:t.sortBy,c=null!==(n=null===(a=Object.values(this._uiSortInfo)[0])||void 0===a?void 0:a.order)&&void 0!==n?n:H.SortOrder.None,d=this._columnHeaderLeafList.findIndex(function(e){if(u){var t=Bo.a.dropRight(e.path,1),a=Bo.a.last(e.path);return t.every(function(e,t){return e.fieldName===u.columns[t]&&e.originalLookupValue===u.path[t]})&&ae.equals(tl(a.field),u.measure)}return!1}),p=0;if(d<0&&c!==H.SortOrder.None)nu.warn("NOT found the column to sort!");else{var h=c!==H.SortOrder.None?this.data.map(function(e){var t;return null===(t=e[d])||void 0===t?void 0:t.originalValue}):[];!function a(e){e.forEach(function(e){var t;e.next.length?(a(e.next),e._value=null===(t=e.next[e.next.length-1])||void 0===t?void 0:t._value):(e._oldIndex=p,c!==H.SortOrder.None&&(e._value=h[p]),p+=1)})}(this.rowHeaders);var y=u.measure,g=null===(i=this._valueFields.find(function(e){return e.attributeId===(null==y?void 0:y.columnName)}))||void 0===i?void 0:i.dataType,m={};p=0;var f=Al({dataType:g,sortOrder:c});this.rowHeaders=function t(e){var a=e.sort(function(e,t){return c===H.SortOrder.None?e._originalIndex-t._originalIndex:e.type!==t.type&&e.type!==bY.RowHeader||null==e._value?1:f(e._value,t._value)});return a.forEach(function(e){e.next.length?e.next=t(e.next):(m[e._oldIndex]=p,p+=1)}),a}(this.rowHeaders);var v=[];this._rowHeaderLeafList=this._rowHeaderLeafList.reduce(function(e,t,a){var n=m[a];return e[n]=t,v[a]=n,e},[]),this.data=this.data.reduce(function(e,t,a){return e[v[a]]=t,e},[]),this._valuesOrder=v}}}},{key:"getSortedOrdersInfo",value:function(){return{rowHeaders:this.rowHeaders,rowHeaderLeafList:this._rowHeaderLeafList,valuesOrder:this._valuesOrder}}},{key:"getCellInfo",value:function(e,t){switch(this._getSheetArea(e,t)){case Dl.a.Spread.Sheets.SheetArea.rowHeader:return this._getRowHeaderCellInfo(e-this.columnLevel,t);case Dl.a.Spread.Sheets.SheetArea.colHeader:return this._getColumnHeaderCellInfo(e,t-this.rowLevel);case Dl.a.Spread.Sheets.SheetArea.corner:return this._getCornerHeaderCellInfo(e,t);case Dl.a.Spread.Sheets.SheetArea.viewport:default:return this._getValueCellInfo(e-this.columnLevel,t-this.rowLevel)}}},{key:"_getSheetArea",value:function(e,t){return e<this.columnLevel&&t<this.rowLevel?Dl.a.Spread.Sheets.SheetArea.corner:e>=this.columnLevel&&t>=this.rowLevel?Dl.a.Spread.Sheets.SheetArea.viewport:e>=this.columnLevel?Dl.a.Spread.Sheets.SheetArea.rowHeader:Dl.a.Spread.Sheets.SheetArea.colHeader}},{key:"_getValueCellInfo",value:function(e,t){var a,n;if(null==e||null==t)return null;if(e>=Math.max(1,this._rowHeaderLeafList.length)||t>=this._columnHeaderLeafList.length)return null;var i=this.data[e][t],r=this._getRowHeaderLeaf(e).path,o=Bo.a.dropRight(this._columnHeaderLeafList[t].path,1),s=Bo.a.last(this._columnHeaderLeafList[t].path);return{type:i.type,cellValue:s.field.formatValue(i.originalValue),cellOriginalValue:i.originalValue,valueField:{fieldName:s.fieldName,fieldDisplay:s.fieldDisplay,idx:s.field.idx,alignment:null===(n=null===(a=s.field)||void 0===a?void 0:a.options)||void 0===n?void 0:n.alignment},valueFieldIdentifier:tl(s.field),relatedDimensionFieldList:[].concat(R()(r),R()(o)),tooltips:i.tooltips}}},{key:"_getRowHeaderCellInfo",value:function(e,t){var a;if(null==e||null==t)return null;if(e>=this._rowHeaderLeafList.length||t>=this.rowLevel)return null;var n=this._getRowHeaderLeaf(e),i=ae.take(t+1,n.path),r=null===(a=ae.last(i))||void 0===a?void 0:a.tooltips;return{type:n.headerType,relatedDimensionFieldList:i,tooltips:r}}},{key:"_getColumnHeaderCellInfo",value:function(e,t){if(null==e||null==t)return null;if(e>=this.columnLevel||t>=this._columnHeaderLeafList.length)return null;var a=this._columnHeaderLeafList[t],n=Bo.a.dropRight(a.path,1),i=Bo.a.last(a.path),r={type:a.headerType,relatedDimensionFieldList:ae.take(e+1,n),sortOrder:a.sortOrder};return e===this.columnLevel-1?Object.assign(Object.assign({},r),{valueField:{fieldName:i.fieldName,fieldDisplay:i.fieldDisplay},valueFieldIdentifier:tl(i.field)}):r}},{key:"_getCornerHeaderCellInfo",value:function(e,t){if(null==e||null==t)return null;if(t>=this.rowLevel||e>=this.columnLevel)return null;var a=this._rowFields[t];return nu.assert(void 0!==a),{type:bY.CornerHeader,relatedDimensionFieldList:[],valueField:{fieldName:a.name,fieldDisplay:a.display},sortOrder:this._getCornerHeaderLeafSortOrder(a.name)}}},{key:"getResizedColumnIndex",value:function(a,e){var t=1<arguments.length&&void 0!==e?e:0,n=[];if(a.measure&&""!==a.measure.columnName)for(var i=0;i<this._columnHeaderLeafList.length;i++){var r=this._columnHeaderLeafList[i],o=Bo.a.dropRight(r.path,1),s=Bo.a.last(r.path);if(o.length===a.columns.length&&ae.equals(a.measure,tl(s.field))){for(var l=!0,u=function(t){if(null==ae.find(function(e){return e.fieldName===a.columns[t]&&e.originalLookupValue===a.path[t]},o))return l=!1,"break"},c=0;c<a.columns.length;c++){if("break"===u(c))break}l&&n.push(this.rowLevel+i+t)}}else{var d=ae.findIndex(ae.propEq("name",a.columns[0]),this._rowFields);0<=d&&n.push(d)}return n}},{key:"canEdit",value:function(e,t){return this.getCellInfo(e,t).type===bY.ValueCell}},{key:"_isMultiValueFields",value:function(){return 1<this._valueFields.length}},{key:"_toJson",value:function(){return{data:this.data,rowHeaders:this.rowHeaders,columnHeaders:this.columnHeaders,cornerHeaders:this.cornerHeaders,rowLevel:this.rowLevel,columnLevel:this.columnLevel}}}]),a}(),VJ=function(e){k()(n,e);var a=w()(n);function n(e,t){return I()(this,n),a.call(this,e,t)}return D()(n,[{key:"_generateValidFields",value:function(e){var t=e.getPivotSetting({withoutHierarchy:!0,withoutInvalid:!0});this._rowFields=[].concat(R()(t.trellisRows.values),R()(t.rows.values)),this._columnFields=[].concat(R()(t.trellisColumns.values),R()(t.columns.values)),t.tooltip&&(this._tooltipFields=R()(t.tooltip.values)),this._rowFieldKeys=Bo.a.map(this._rowFields,function(e){return e.display}),this._columnFieldKeys=Bo.a.map(this._columnFields,function(e){return e.display}),this._tooltipFieldKeys=Bo.a.map(this._tooltipFields,function(e){return e.display})}},{key:"buildByHiddenValueDataRole",value:function(e,t){var a,n=t.values,i=t.setForField,r=t.hiddenField;return(a=this._valueFields).push.apply(a,R()(n)),this._valueFieldKeys=Bo.a.map(this._valueFields,function(e){return e.display}),this._setForField=i,this._hiddenField=r,this.build(e),this}},{key:"getValueFields",value:function(){return{hiddenField:this._hiddenField,setForField:this._setForField,valueFields:this._valueFields}}},{key:"sort",value:function(e){if(e){var t=e.rowHeaders,a=e.rowHeadersLeafList,i=e.valuesOrder;t&&i&&(this.rowHeaders=t,this._rowHeaderLeafList=a,this.data=this.data.reduce(function(e,t,a){var n=i[a];return-1<n?e[n]=t:e.push(t),e},[]))}}}]),n}(RJ),NJ=function(e){return{columnName:e.fieldName,entry:e.originalLookupValue}},EJ=function(e,t){return JSON.stringify(V()({},e,"".concat(t)))},FJ=function(e,t,a,n,i){var r=e,o=t===H.DisplayUnit.Auto?OJ(a,n,i):t;return t===H.DisplayUnit.Auto&&o!==H.DisplayUnit.None&&"General"===e&&(r="0.0"),[r,o].join(zo)},OJ=function(e,t,a){var n=e.filter(function(e){return ae.keys(e).length===a}).map(function(e){return e[t]}).filter(function(e){return null!==e});return Au(n)},HJ=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e,t)).formatStr=e,a}return D()(i,[{key:"format",value:function(e){return null==e?e:ku(this.formatStr,e)}}]),i}(Dl.a.Spread.Formatter.FormatterBase),BJ=(PJ={},V()(PJ,bY.RowHeader,Kq.RowHeader),V()(PJ,bY.RowHeaderSubTotal,Kq.SubTotals),V()(PJ,bY.RowHeaderGrandTotal,Kq.GrandTotals),PJ),UJ=(_J={},V()(_J,bY.ValueCell,Kq.Whole),V()(_J,bY.SubTotalRow,Kq.SubTotals),V()(_J,bY.SubTotalColumn,Kq.SubTotals),V()(_J,bY.GrandTotalRow,Kq.GrandTotals),V()(_J,bY.GrandTotalColumn,Kq.GrandTotals),V()(_J,bY.GrandTotalBoth,Kq.GrandTotals),V()(_J,bY.SubTotalBoth,Kq.SubTotals),_J),zJ=function(){function e(){I()(this,e)}return D()(e,null,[{key:"getFilterIcon",value:function(e,t,a,n){var i,r,o,s=this.getCellInfo(e,t,a,n),l=null===(i=e.pivotFieldModel)||void 0===i?void 0:i.pivotFilterColumns;if(!l||!vJ(s))return gq.New;var u=null===(r=s.relatedDimensionFieldList[t])||void 0===r?void 0:r.fieldName;return u=u||(null===(o=s.valueField)||void 0===o?void 0:o.fieldName),-1<l.indexOf(u)?gq.Edited:gq.New}},{key:"getCellInfo",value:function(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:3,r=e.colLevel,o=e.pivotDataModel,s=a,l=t;3===i&&(l=t+r);try{return o.getCellInfo(l,s,i)}catch(e){return{}}}},{key:"getChildrenLength",value:function(e,t,a,n){var i=this.getCellInfo(e,a,n);return null!=i&&i.attached?Ho.reduce(t.next,function(e,t){var a;return e+((null===(a=t.next)||void 0===a?void 0:a.length)||0)},0):t.next.length}},{key:"hasUiFilter",value:function(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:1,r=this.getCellInfo(e,t,a,i);return!(!e.pivotFieldModel||!vJ(r))&&(e.options.enableUiFilter&&(null==r?void 0:r.type)===bY.ColumnHeader&&t<e.pivotFieldModel.usedColumnDimensions.length||e.options.enableUiFilter&&(null==r?void 0:r.type)===bY.CornerHeader)}},{key:"getCellType",value:function(e,t,a,n,i){var r=this.hasUiFilter(e,a,n,i),o=this.getFilterIcon(e,a,n,i);return e.options.isUiSortEnabled?new Cq(t,o,r):new Tq(t)}},{key:"getImageFromUrl",value:function(e,t){return e!==H.ImageRenderSetting.ImageBinary?t:Pu(t)}},{key:"getRenderSetting",value:function(e,t,a){var n;if(e){var i=null===(n=e.filter(function(e){return!!e}).find(function(e){return e.name===t.name&&e.rolePath===a}))||void 0===n?void 0:n.value;if(void 0!==i)return i}return H.ImageRenderSetting.Text}},{key:"isLastLevelRowHeaderStyle",value:function(e,t){var a,n,i,r,o=e.pivotDataModel,s=e.options,l=o.cornerHeaders[t],u=o.cornerHeaders.length,c=Ho.last(o.cornerHeaders);return!(!s.rowHeader.showRowNumber||t!==u-2)&&(null!==(a=l.identifier)&&void 0!==a&&a._attached?null===(n=l.identifier)||void 0===n?void 0:n.columnName:l.value)===(null!==(i=c.identifier)&&void 0!==i&&i._attached?null===(r=c.identifier)||void 0===r?void 0:r.columnName:c.value)}},{key:"getDataStripeNameStyle",value:function(e,t){var a=e.options.useAlternateRowStyle;return nu.assert(-1<t),a?t%2==0?Kq.FirstDataStripe:Kq.SecondDataStripe:Kq.Whole}},{key:"getLastLevelRowHeaderNameStyle",value:function(e,n,t){var a=e.options,i=a.subTotalsVisible,r=a.treatLastRowHeaderAsData,o=a.useAlternateRowStyle,s=BJ[t];if(nu.assert(void 0!==s),s===Kq.RowHeader&&r){var l=0;if(!i){var u=[];e.rowModel._rowsInfo.forEach(function(e,t){e.isSubtotal&&u.push(t)}),l=u.reduce(function(e,t){var a=e;return a+=t<n?1:0},0)}s=o?this.getDataStripeNameStyle(e,n-l):Kq.Whole}return s}},{key:"initModelNodeTag",value:function(e,t,a){var n=e.getTag(t,a);n=n||{sortStatus:H.SortOrder.None,collapse:!1},e.setTag(t,a,n)}},{key:"updateColumnHeaderAreasViewModel",value:function(T){var S=this,e=T.pivotDataModel,n=T.colLevel,D=T.colModel,k=T.rowLevel,w=T.options,t=T.cornerModel,x=T.pivotFieldModel;if(0!==e.columnHeaders.length){var a=e.columnHeaders,i=n;D.setRowCount(i),t.setRowCount(i);!function v(e,t,a){var b=2<arguments.length&&void 0!==a?a:0,C=t;if(nu.assert(b<n),b!==n)return e.forEach(function(e){var t,a,n=C,i=e.type,r=e._pathHashKey,o=e.value;D._columnsInfo[n]={_pathHashKey:r},i===bY.ColumnHeaderGrandTotal?(w.colGrandTotalVisible||(D._columnsInfo[n].isHidden=!0),D._columnsInfo[n].isGrandTotal=!0,D.setType(b,n,i),a=Kq.GrandTotals):(a=Kq.ColHeader,i===bY.ColumnHeaderSubTotal&&(w.subTotalsVisible||(D._columnsInfo[n].isHidden=!0),D._columnsInfo[n].isSubtotal=!0,D.setType(b,n,i)),i===bY.ColumnHeader&&D.setType(b,n,i)),S.initModelNodeTag(D,b,n),D.setOriginalInfo(b,n,b,n+k);var s=w.colHeader.enableWordWrap;D.setStyleProperties(b,n,{hAlign:1,wordWrap:s,styleName:a});var l=H.ImageRenderSetting.Text;if(x){var u=x.usedColumnDimensions[b];l=S.getRenderSetting(x.renderSettingInfo,{name:null==u?void 0:u.name},"columns")}if(l===H.ImageRenderSetting.Text||i!==bY.ColumnHeader)D.setValue(b,n,o);else{D.setValue(b,n,"");var c=S.getImageFromUrl(l,o);D.setStyleProperties(b,n,{backgroundImage:c}),D._rowsInfo[b]||(D._rowsInfo[b]={}),D._columnsInfo[n].isImageColumn=!0,D._rowsInfo[b].isImageRow=!0}if(0<e.next.length){var d=(C=v(e.next,C,b+1))-n;if(1<d){D.addSpanItem(b,n,1,d,e.next.length);for(var p=n+1;p<n+d;p+=1)D.setStyleProperties(b,p,{styleName:a})}else D.setStyleProperties(b,n,{cellType:new Tq(w.colHeader.textStyle)})}else{var h=S.getCellType(T,w.colHeader.textStyle,b,n+k,1),y=D.getTag(b,n);y=y||{sortStatus:H.SortOrder.None,collapse:!1};var g=e.sortOrder;D.setStyleProperties(b,n,{cellType:h}),D.setTag(b,n,Object.assign(Object.assign({},y),{sortStatus:g}));var m=S.getCellInfo(T,b,n+k);if(vJ(m)){var f=null===(t=m.valueField)||void 0===t?void 0:t.alignment;D._columnsInfo[n].hAlign={value:f,dataType:"value"}}C+=1}}),C}(a,0);var r=D._columnsInfo.length;D.setColumnCount(r)}}},{key:"updateCornerAreasViewModel",value:function(f){var v=this,e=f.pivotDataModel,b=f.options,C=f.colLevel,T=f.cornerModel,S=f.pivotFieldModel,t=f.cornerHeaders;(t=t||e.cornerHeaders).forEach(function(e,t){var a,n,i,r,o,s,l;T._columnsInfo[t]={},null!==(a=e.identifier)&&void 0!==a&&a._attached&&(T._columnsInfo[t].isAttach=!0),T.setValue(0,t,e.value),T.setOriginalInfo(0,t,0,t);for(var u=0;u<C;u+=1)T.setStyleProperties(u,t,{styleName:Kq.Corner});v.initModelNodeTag(T,0,t),1<C&&T.addSpanItem(0,t,C,1);var c=v.getCellType(f,b.corner.textStyle,0,t,1);null!==(n=e.identifier)&&void 0!==n&&n._attached&&(c=new Tq(b.corner.textStyle)),T.setStyleProperties(0,t,{cellType:c});var d=T.getTag(0,t),p=null===(i=v.getCellInfo(f,0,t,1))||void 0===i?void 0:i.sortOrder;d=d||{sortStatus:H.SortOrder.None,collapse:!1},p=p||H.SortOrder.None,d.sortStatus=p,T.setTag(0,t,Object.assign(Object.assign({},d),{sortStatus:p}));var h=v.getCellInfo(f,0,t),y=h.relatedDimensionFieldList;if(S){var g=null===(r=S.usedRowDimensions[t])||void 0===r?void 0:r.name,m=null===(l=null===(s=null===(o=null==y?void 0:y.find(function(e){return e.fieldName===g}))||void 0===o?void 0:o.field)||void 0===s?void 0:s.options)||void 0===l?void 0:l.alignment;h.attached&&(m=h.alignment),T._columnsInfo[t].hAlign={value:m,dataType:"string"}}})}},{key:"addRowMergeItems",value:function(m,f){var v=this,b=f.rowModel,e=f.options,C=e.subTotalsVisible,T=e.rowHeader,S=e.expandStatus,D=e.emptyItemsString,k=e.nullItemsString;b._spanItems.forEach(function(e){var a=0,n=e.row,t=e.col,i=e.rowCount,r=e.colCount,o=e.children;b._rowsInfo.forEach(function(e,t){e.isSubtotal&&!C&&n<t&&t<n+i&&(a=1)});var s=1<o-a,l=i-a,u=r;m._mergeCellsRecord.rowHeaders.push(Object.assign(Object.assign({},e),{mergeRow:l,mergeCol:u}));var c=b.getOriginalInfo(n,t),d=v.getCellInfo(f,c.row,c.col);if(!(null==d?void 0:d.attached)){var p=new kq(T.textStyle);p.setEmptyString(k,D),p.setExpandStatus(s?S:zr.Hide),b.setStyleProperties(n,t,{cellType:p})}for(var h=b.getValue(n,t),y=n+1;y<n+i;y+=1)for(var g=t;g<t+r;g+=1)b.setValue(y,g,h)})}},{key:"addColumnMergeItems",value:function(y,g){var m=this,f=g.colModel,v=g.cornerModel,e=g.options,b=e.subTotalsVisible,C=e.colHeader,T=e.expandStatus;f._spanItems.forEach(function(e){var t=e.row,a=e.col,n=e.rowCount,i=e.colCount,r=e.children,o=0;f._columnsInfo.forEach(function(e,t){e.isSubtotal&&!b&&a<t&&t<a+i&&(o=1)});var s=n,l=i-o;y._mergeCellsRecord.colHeaders.push(Object.assign(Object.assign({},e),{col:v._colCount+a,mergeRow:s,mergeCol:l}));var u=1<r-o,c=f.getOriginalInfo(t,a),d=m.hasUiFilter(g,c.row,c.col,1),p=m.getFilterIcon(g,c.row,c.col,1),h=new kq(C.textStyle,p,d);h.setExpandStatus(u?T:zr.Hide),f.setStyleProperties(t,a,{cellType:h})}),this.updateCornerMergeItems(y,g)}},{key:"_extendOptions",value:function(e){if(!e)return{};var t=e.grandTotals,a=e.subTotals.display,n=Ka,i=ja,r=a!==Ua,o=t.display===za||t.display===i,s=t.display===za||t.display===n;return Object.assign(Object.assign({},e),{subTotalsPosition:a,subTotalsVisible:r,rowGrandTotalVisible:s,colGrandTotalVisible:o})}},{key:"_buildContext",value:function(e){if(e)return this._buildContextBase(e._data,e._dataViewModel,e._dataProfile,e._options)}},{key:"_buildContextBase",value:function(e,t,a,n){if(e&&t&&n){var i=e.rowLevel,r=e.columnLevel,o=t.getAllModels(),s=o.cornerModel,l=o.rowModel,u=o.colModel,c=o.contentModel;return{rowLevel:i,colLevel:r,cornerModel:s,options:this._extendOptions(n),rowModel:l,colModel:u,contentModel:c,pivotDataModel:e,pivotFieldModel:a}}}},{key:"destroyContext",value:function(e){e.cornerHeaders=null}},{key:"render",value:function(e){var t=this._buildContext(e);t&&(this.updateColumnHeaderAreasViewModel(t),this.updateRowHeaderAndContentAreasViewModel(t),this.updateCornerAreasViewModel(t),this.addRowMergeItems(e,t),this.addColumnMergeItems(e,t),e.updatePivotTableRange(),this.destroyContext(t))}},{key:"customRender",value:function(e,t,a){var n=this._buildContextBase(e,t,null,a);n&&(this.updateColumnHeaderAreasViewModel(n),this.updateRowHeaderAndContentAreasViewModel(n),this.destroyContext(n))}}]),e}(),KJ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,null,[{key:"updateCornerMergeItems",value:function(n,e){e.cornerModel._spanItems.forEach(function(e){var t=e.rowCount,a=e.colCount;n._mergeCellsRecord.cornerHeaders.push(Object.assign(Object.assign({},e),{mergeRow:t,mergeCol:a}))})}},{key:"updateRowHeaderAndContentAreasViewModel",value:function(k){var w=this,c=k.pivotDataModel,d=k.rowLevel,x=k.colLevel,e=k.cornerModel,A=k.rowModel,I=k.options,p=k.contentModel,P=k.pivotFieldModel,t=c.rowHeaders;A.setColumnCount(d),e.setColumnCount(d);!function T(e,t,a){var S=2<arguments.length&&void 0!==a?a:0,D=t;return e.forEach(function(e){var t,a,r=D,n=e.type,i=e.value,o=e.format,s=e._pathHashKey;if(A._rowsInfo[r]={_pathHashKey:s},n===bY.RowHeaderGrandTotal&&(I.rowGrandTotalVisible||(A._rowsInfo[r].isHidden=!0),A._rowsInfo[r].isGrandTotal=!0,A.setType(r,S,n)),n===bY.RowHeaderSubTotal&&(I.subTotalsVisible||(A._rowsInfo[r].isHidden=!0),A._rowsInfo[r].isSubtotal=!0,A.setType(r,S,n)),n===bY.RowHeader&&A.setType(r,S,n),e.next.length){D=T(e.next,D,S+1),a=BJ[n],w.isLastLevelRowHeaderStyle(k,S)&&(a=w.getLastLevelRowHeaderNameStyle(k,r,n)),nu.assert(void 0!==a),A.setStyleProperties(r,S,{styleName:a});var l=D-r;if(1<l){w.initModelNodeTag(A,r,S),A.addSpanItem(r,S,l,1,w.getChildrenLength(k,e,r,S+1));for(var u=r+1;u<r+l;u+=1)A.setStyleProperties(u,S,{styleName:a})}}else a=w.getLastLevelRowHeaderNameStyle(k,r,e.type),nu.assert(void 0!==a),A.setStyleProperties(r,S,{styleName:a}),D+=1;A._rowsInfo[r]._level=S;var c=yk.Text;if(P){var d=P.usedRowDimensions[S];c=w.getRenderSetting(P.renderSettingInfo,{name:null==d?void 0:d.name},"rows")}A.setOriginalInfo(r,S,r+x,S);var p=w.getCellInfo(k,r,S);if(p&&!p.attached){var h;if(!p.attached){var y=null==p?void 0:p.relatedDimensionFieldList,g=p.type===bY.RowHeaderSubTotal;y&&y.length&&(h=Ho.last(y),y.forEach(function(e){var t;if(e){var a=null===(t=null==e?void 0:e.field)||void 0===t?void 0:t.attributeId,n=null==e?void 0:e.lookupValue,i=e.fieldName===h.fieldName&&!g;a&&n&&A.addFieldsIndexesCache(a,n,S,r,S,!0,i)}}))}h&&(A._rowsInfo[r].fieldName=null===(t=null==h?void 0:h.field)||void 0===t?void 0:t.attributeId,A._rowsInfo[r].lookupValue=null==h?void 0:h.lookupValue)}if(c===yk.Text||n!==bY.RowHeader){A.setValue(r,S,i);var m=A.getStyle(r,S)||{};if(m.formatter=new HJ(o),(null==i||""===i)&&e.type===bY.RowHeader){var f=I.nullItemsString,v=I.emptyItemsString,b=new Pq;b.setEmptyString(f,v),m.cellType=b}A.setStyle(r,S,m)}else{var C=w.getImageFromUrl(c,e.value);A.setStyleProperties(r,S,{backgroundImage:C}),A._rowsInfo[r].isImageRow=!0,A._columnsInfo[S]={isImageColumn:!0}}}),D}(t,0);var a=A._rowsInfo.length;A.setRowCount(a);var n=0!==a?a:c.data.length;p.setRowCount(n),p.setColumnCount(c.data[0].length);for(var i=function(n){var e=c.data[n]||[],t=0;if(!I.subTotalsVisible){var a=[];A._rowsInfo.forEach(function(e,t){e.isSubtotal&&a.push(t)}),t=a.reduce(function(e,t){var a=e;return a+=t<n?1:0},0)}for(var i=w.getDataStripeNameStyle(k,n-t),r=0;r<e.length;r+=1){var o=e[r];if(o){var s=UJ[o.type];s===Kq.Whole&&(s=i),p.setValue(n,r,o.originalValue),p.setStyleProperties(n,r,{styleName:s}),p.setOriginalInfo(n,r,n+x,r+d);var l=p.getStyle(n,r),u=o.format;u&&(l.formatter=new _q(u),p.setStyleProperties(n,r,l)),o.isCustomData&&I.customDataHighlight&&(l.foreColor=I.overwriteCell.foreColor,l.backColor=I.overwriteCell.backColor,p.setStyleProperties(n,r,l)),(o.type===bY.ValueCell||o.type===bY.SubTotalColumn&&I.subTotalsVisible||o.type===bY.GrandTotalColumn&&I.colGrandTotalVisible||o.type===bY.GrandTotalRow&&I.rowGrandTotalVisible)&&p.setType(n,r,o.type)}}},r=0;r<n;r+=1)i(r)}}]),a}(zJ),jJ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,null,[{key:"_getIndentCellStyle",value:function(e,t){return void 0===e||Number.isNaN(e)||e<0?0:e*t}},{key:"_getExtendIndent",value:function(e){var t=oc(e)||"14px";return(7+Math.ceil(parseFloat(t)/2)+parseFloat(t))/8}},{key:"_updateContextCornerHeaders",value:function(e){var t=e.pivotDataModel.cornerHeaders,a=e.options.rowHeader,n=a.showRowNumber,i=a.rowNumberAdjoin,r=t.filter(function(e){var t;return!(null!==(t=e.identifier)&&void 0!==t&&t._attached)}).map(function(e){return{sortOrder:0,type:bY.CornerHeader,value:"",next:[],_rootNode:e}}).slice(0,1);if(n){var o=t.filter(function(e){var t;return null===(t=e.identifier)||void 0===t?void 0:t._attached})[0];o&&(i===ZY&&r.unshift(o),i===$Y&&r.push(o))}e.cornerHeaders=r}},{key:"updateCornerMergeItems",value:function(e,t){var a=t.cornerHeaders,n=t.cornerModel,i=t.colLevel,r=n._colCount;if(t.options.rowHeader.showRowNumber){var o=a.findIndex(function(e){var t;return null===(t=e.identifier)||void 0===t?void 0:t._attached});if(-1===o)return;0===o?(e._mergeCellsRecord.cornerHeaders.push({row:0,col:0,rowCount:i,colCount:1}),e._mergeCellsRecord.cornerHeaders.push({row:0,col:1,rowCount:i,colCount:r-1})):(e._mergeCellsRecord.cornerHeaders.push({row:0,col:0,rowCount:i,colCount:r-1}),e._mergeCellsRecord.cornerHeaders.push({row:0,col:r-1,rowCount:i,colCount:1}))}else e._mergeCellsRecord.cornerHeaders.push({row:0,col:0,rowCount:i,colCount:r})}},{key:"addRowMergeItems",value:function(e,t){var a,l=this,u=t.rowModel,n=t.cornerModel,o=t.colModel,i=t.options,s=i.subTotalsPosition,c=i.rowHeader,d=i.expandStatus,p=i.labelIndent,h=i.emptyItemsString,y=i.nullItemsString,g=[],m=n._columnsInfo.findIndex(function(e){return e.isAttach});u._rowsInfo.forEach(function(e,t){var a=0,n=u._colCount;e.isTitleRow&&s!==Ha&&g.push({row:t,col:n,rowCount:1,colCount:o._colCount}),c.showRowNumber&&(0===m&&(a=1),--n);var i=u.getStyle(t,a),r=u.getValue(t,a);g.push({row:t,col:a,rowCount:1,colCount:n}),Ho.range(a+1,a+n).forEach(function(e){u.setStyle(t,e,i),u.setValue(t,e,r)})}),(a=e._mergeCellsRecord.rowHeaders).push.apply(a,g),u._spanItems.forEach(function(e){var t;if(!c.showRowNumber||e.col!==m){var a=e.row,n=e.col,i=u._rowsInfo[a].isTitleRow;if(n!==m){var r=null!==(t=u._rowsInfo[e.row]._level)&&void 0!==t?t:0,o=l._getIndentCellStyle(r,p),s=new kq(c.textStyle,null,!1,o);s.setEmptyString(y,h),s.setExpandStatus(i?d:zr.Hide),u.setStyleProperties(a,n,{cellType:s})}}})}},{key:"updateRowHeaderAndContentAreasViewModel",value:function(A){var I,P,_,M,L,R,V=this,i=A.pivotDataModel,N=A.rowModel,e=A.cornerModel,E=A.options,F=A.rowLevel,O=A.colLevel,H=A.pivotFieldModel,c=A.contentModel,d=E.subTotalsVisible,B=E.subTotalsPosition,p=E.rowGrandTotalVisible,h=E.colGrandTotalVisible,t=E.rowHeader,U=t.rowNumberAdjoin,z=t.showRowNumber,K=t.rowNumberPosition;this._updateContextCornerHeaders(A),e.setColumnCount(A.cornerHeaders.length),N.setColumnCount(e._colCount);function j(e){return 0===e.next.length||e.next.every(function(e){return void 0===e._originalIndex&&0===e.next.length})}var W=[];0<i.rowHeaders.length&&Ho.forEachRight(i.rowHeaders,function(e){return W.push(e)});var G=i._rowHeaderLeafIndexDict||{},Y=i._valuesOrder||{},q=-1;z&&("before"===U&&(q=0),"after"===U&&(q=A.cornerHeaders.findIndex(function(e){var t;return null===(t=e.identifier)||void 0===t?void 0:t._attached})));for(var J=[],X=-1,Q=0,a=function(){var e=W.pop(),t=e.type,a=e.format,r=e._level,n=e._originalIndex,i=e._pathHashKey,o=e.value;if(B===Ha&&e.type===bY.RowHeaderSubTotal)return"continue";z?((-1===X||U===$Y&&void 0!==n)&&(X+=1),Q=void 0===n&&t!==bY.RowHeaderGrandTotal&&t!==bY.RowHeaderSubTotal?q:"before"===U?1:0):X+=1,N._rowsInfo[X]||(N._rowsInfo[X]={}),t===bY.RowHeader&&N.setType(X,Q,t),t===bY.RowHeaderSubTotal&&(E.subTotalsVisible||(N._rowsInfo[X].isHidden=!0),N.setType(X,Q,t),N._rowsInfo[X].isSubtotal=!0),t===bY.RowHeaderGrandTotal&&(E.rowGrandTotalVisible||(N._rowsInfo[X].isHidden=!0),N.setType(X,Q,t),N._rowsInfo[X].isGrandTotal=!0);var s=V.getLastLevelRowHeaderNameStyle(A,X,t);0<e.next.length&&(V.initModelNodeTag(N,X,Q),(t===bY.RowHeader||t===bY.RowHeaderGrandTotal&&""===o||t===bY.RowHeaderSubTotal&&""===o)&&(N.addSpanItem(X,Q,e.next.length,1,e.next.length),Ho.forEachRight(e.next,function(e){return W.push(e)}))),void 0!==i&&(N._rowsInfo[X]._pathHashKey=i),void 0===n||t!==bY.RowHeader||j(e)||(N._rowsInfo[X].isTitleRow=!0),-1!==q&&Q===q||(N._rowsInfo[X]._level=r);var l=Y[G[i]],u=r;void 0===l&&(l=null!==(I=G[i])&&void 0!==I?I:X),z&&("before"===U&&("first"===K&&(u=void 0===n&&t!==bY.RowHeaderGrandTotal&&t!==bY.RowHeaderSubTotal?r:r+1),"last"===K&&(u=void 0===n&&t!==bY.RowHeaderGrandTotal&&t!==bY.RowHeaderSubTotal||r<F-2?r:r+1),"all"===K&&(u=void 0===n&&t!==bY.RowHeaderGrandTotal&&t!==bY.RowHeaderSubTotal?2*r:2*r+1)),"after"===U&&("first"===K&&(u=(void 0!==n||t===bY.RowHeaderGrandTotal||t===bY.RowHeaderSubTotal)&&0===r?r:r+1),"last"===K&&(u=void 0===n&&t!==bY.RowHeaderGrandTotal&&t!==bY.RowHeaderSubTotal?r+1:r),"all"===K&&(u=void 0===n&&t!==bY.RowHeaderGrandTotal&&t!==bY.RowHeaderSubTotal?2*r+1:2*r))),N.setStyleProperties(X,Q,{styleName:s}),N.setOriginalInfo(X,Q,l+O,u);var c=V.getCellInfo(A,l,u),d=yk.Text,p=void 0;if(H&&i){var h=H.usedRowDimensions[u];if(d=V.getRenderSetting(H.renderSettingInfo,{name:null==h?void 0:h.name},"rows"),c&&!c.attached){var y=c.relatedDimensionFieldList,g=c.type===bY.RowHeaderSubTotal;y&&y.length&&(p=Ho.last(y),y.forEach(function(e){var t;if(e){var a=null===(t=null==e?void 0:e.field)||void 0===t?void 0:t.attributeId,n=null==e?void 0:e.lookupValue,i=e.fieldName===p.fieldName&&!g;a&&n&&N.addFieldsIndexesCache(a,n,r,X,Q,!1,i)}}));var m=null===(M=null===(_=null===(P=null==y?void 0:y.find(function(e){return e.fieldName===(null==h?void 0:h.name)}))||void 0===P?void 0:P.field)||void 0===_?void 0:_.options)||void 0===M?void 0:M.alignment;N._rowsInfo[X].hAlign={value:m,dataType:"string"}}p&&(N._rowsInfo[X].fieldName=null===(L=null==p?void 0:p.field)||void 0===L?void 0:L.attributeId,N._rowsInfo[X].lookupValue=null==p?void 0:p.lookupValue)}var f=N.getStyle(X,Q)||{};if(d===yk.Text||t!==bY.RowHeader){if(void 0===n&&t===bY.RowHeader&&void 0!==e.originalValue){J[r]=o,N.setValue(X,Q,o);var v=J.slice(0,r+1).filter(function(e){return""!==e}).join(".");f.cellType=new Wq(v)}else{if(t===bY.RowHeaderSubTotal){var b=null==p?void 0:p.lookupValue;b&&(o="".concat(b," ").concat(o))}N.setValue(X,Q,o)}if(f.formatter=new HJ(a),t===bY.RowHeaderSubTotal){var C=V._getIndentCellStyle(r-1,E.labelIndent);0===C&&(C=1),f.textIndent=C}else if(j(e)||E.expandStatus!==zr.Show){var T=null!==(R=V._getIndentCellStyle(r,E.labelIndent))&&void 0!==R?R:0;if(E.expandStatus===zr.Show&&1<F){var S=E.rowHeader.textStyle.fontSize;E.treatLastRowHeaderAsData&&("FirstDataStripe"===s&&(S=E.firstDataStripe.textStyle.fontSize),"SecondDataStripe"===s&&(S=E.secondDataStripe.textStyle.fontSize)),T+=V._getExtendIndent(S)}0===T&&(T=1),f.textIndent=T}if((null==o||""===o)&&t===bY.RowHeader){var D=E.nullItemsString,k=E.emptyItemsString,w=new Pq;w.setEmptyString(D,k),f.cellType=w}}else{var x=V.getImageFromUrl(d,o);f.backgroundImage=x,N._rowsInfo[X].isImageRow=!0}N.setStyleProperties(X,Q,f),-1!==q&&(f.hAlign=0,f.textIndent=1,N.setStyleProperties(X,q,Ho.omit(f,["cellType"]))),z&&U===ZY&&void 0!==n&&(X+=1)};0<W.length;)a();var n=X+1;z&&U===ZY&&--n,N.setRowCount(n);var r=n;0===n&&(r=i.data.length),c.setRowCount(r),c.setColumnCount(i.data[0].length),0===N._rowsInfo.length&&(N._rowsInfo=Ho.range(0,r).map(function(e){return{}}));var o=-1;N._rowsInfo.forEach(function(e,s){var t,a,n,l=(t=e._pathHashKey,void 0!==(n=null!==(a=Y[G[t]])&&void 0!==a?a:G[t])?n:++o);if(-1<l&&l<i.data.length){var u=i.data[l];if(e.isTitleRow&&B!==Ha)return void Ho.range(0,u.length).forEach(function(e){return c.setOriginalInfo(s,e,l+O,e+F)});Ho.range(0,u.length).forEach(function(e){var t=u[e];if(t){var a=UJ[t.type];if(a===Kq.Whole){var n=0;if(!d){var i=[];N._rowsInfo.forEach(function(e,t){e.isSubtotal&&i.push(t)}),n=i.reduce(function(e,t){var a=e;return a+=t<s?1:0},0)}a=V.getDataStripeNameStyle(A,s-n)}c.setValue(s,e,t.originalValue),c.setStyleProperties(s,e,{styleName:a}),c.setOriginalInfo(s,e,l+O,e+F);var r=c.getStyle(s,e),o=t.format;o&&(r.formatter=new _q(o),c.setStyleProperties(s,e,r)),t.isCustomData&&E.customDataHighlight&&(r.foreColor=E.overwriteCell.foreColor,r.backColor=E.overwriteCell.backColor,c.setStyleProperties(s,e,r)),(t.type===bY.ValueCell||t.type===bY.SubTotalColumn&&d||t.type===bY.GrandTotalColumn&&h||t.type===bY.GrandTotalRow&&p)&&c.setType(s,e,t.type)}})}}),0===N._rowCount&&(N._rowsInfo=[])}}]),a}(zJ),WJ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"_setSheetDefaultStyle",value:function(){var e=this._sheet,t=e.getDefaultStyle();t.textIndent=1,t.vAlign=Dl.a.Spread.Sheets.VerticalAlign.center,e.setDefaultStyle(t),e.setDefaultStyle(t,1)}},{key:"init",value:function(){if(nu.time("InitToPaint"),yJ.prototype.init.call(this),this._expandOrCollapseCell=this._expandOrCollapseCell.bind(this),this._spread){var e,t,a;this.suspend(),this._setSheetDefaultStyle(),this._sheet.selectionUnit(Dl.a.Spread.Sheets.SelectionUnit.cell),this._sheet.selectionPolicy(Dl.a.Spread.Sheets.SelectionPolicy.range),this._theme=new fJ(this._options,this._sheet),this._dataViewModel=new LJ,this._pivotTableRange={row:0,col:0},this._totalsIndex={rowHeaderTotals:(e={},V()(e,bY.RowHeaderSubTotal,new Set),V()(e,bY.RowHeaderGrandTotal,new Set),e),colHeaderTotals:(t={},V()(t,bY.ColumnHeaderSubTotal,new Set),V()(t,bY.ColumnHeaderGrandTotal,new Set),t)},this._imageColumnsIdxs=[],this._imageRowIdxsInColHeader=[],this._mergeCellsRecord={rowHeaders:[],colHeaders:[],cornerHeaders:[]},this._hiddenData=[],this._hiddenDataViewModel=new LJ,this.update(this._data),this.setOptions(this._options),this.updateConditionalFormats(this._dataProfile.conditionalFormats);var n=(a={},V()(a,Dl.a.Spread.Sheets.Events.EditStarted,[lJ]),V()(a,Dl.a.Spread.Sheets.Events.EditChange,[lJ]),V()(a,Dl.a.Spread.Sheets.Events.EditEnding,[uJ]),V()(a,Dl.a.Spread.Sheets.Events.ValidationError,function(e,t){t.validator.showErrorMessage()&&(t.validator.errorMessage()?t.validationResult=Dl.a.Spread.Sheets.DataValidation.DataValidationResult.discard:t.validationResult=Dl.a.Spread.Sheets.DataValidation.DataValidationResult.forceApply)}),V()(a,Dl.a.Spread.Sheets.Events.CellClick,[cJ]),a);this._handleCellExpandAndCollapse(),this._addEventHandlersToSheetInternal(n),this.resume()}}},{key:"_showScrollBarOrNot",value:function(){if(this._sheet){var e=this._sheet.getParent(),t=e.getHost(),a=t.offsetWidth||this._sheet.getViewportWidth(1),n=t.offsetHeight||this._sheet.getViewportHeight(1),i=this._getTableWidth(),r=this._getTableHeight();this._options.scrollbarMode===mr||this._options.scrollbarMode===br?(e.options.showHorizontalScrollbar=a<i,e.options.showVerticalScrollbar=n<r):this._options.scrollbarMode===vr?(e.options.showHorizontalScrollbar=!0,e.options.showVerticalScrollbar=!0):(e.options.showHorizontalScrollbar=!1,e.options.showVerticalScrollbar=!1)}}},{key:"_expandOrCollapseCell",value:function(e){var i=this,t=this._spread.getHost(),a=Mq(this._sheet,e,t).cellTypeHitInfo;if(a){var n=a.isHitOnExpandArea,r=a.row,o=a.col,s=a.sheetArea;if(n){var l=this._sheet.getCellType(r,o,s),u=this.getRowHeaderLevel();if(this.suspend(),l instanceof Dl.a.Spread.Sheets.CellTypes.Base){if(s===Dl.a.Spread.Sheets.SheetArea.viewport){var c=this._options.subTotals.display!==Ba;if(this._layoutType===Kr){var d=this._mergeCellsRecord.rowHeaders.find(function(e){return e.row===r&&e.col===o});if(d){var p=d.rowCount-1,h=this._sheet.getTag(r,o);if(h){for(var y=!h.collapse,g=o+1,m=r;m<r+p-1;++m)for(var f=g;f<u-1;++f)this._sheet.setTag(m,f,{collapse:!1});var v=-1;if(c)for(var b=r+p-1;r<=b;--b)this._sheet.setRowVisible(b,!0),this._totalsIndex.rowHeaderTotals[bY.RowHeaderSubTotal].has(b)||-1!==v||(v=b);for(;p;){var C=r+p-1;--p,this._sheet.setRowVisible(C,y,Dl.a.Spread.Sheets.SheetArea.viewport);var T=this._totalsIndex.rowHeaderTotals[bY.RowHeaderSubTotal].has(C);c&&(T?this._sheet.setRowVisible(C,!1,Dl.a.Spread.Sheets.SheetArea.viewport):C!==v||y||this._sheet.setRowVisible(C,!0,Dl.a.Spread.Sheets.SheetArea.viewport))}if(y){var S=this._sheet.getViewportTopRow(1);r<S&&this._sheet.showRow(r,Dl.a.Spread.Sheets.VerticalPosition.top)}this._showScrollBarOrNot()}}}else{var D=this._dataViewModel.getAllModels(),k=D.rowModel,w=D.colModel,x=k._rowsInfo[r],A=function(e){if(i._options.subTotals.display!==Ha){x.collapse=!1,i._sheet.clear(e,w._startCol,1,w._colCount,3,Dl.a.Spread.Sheets.StorageType.data),i._mergeCells(e,w._startCol,1,w._colCount);var t=i._sheet.getStyle(e,0)||new Dl.a.Spread.Sheets.Style,a=new Dl.a.Spread.Sheets.Style;a=Bo.a.merge(a,Bo.a.pick(t,["backColor","borderTop","borderBottom"]));for(var n=w._startCol;n<w._startCol+w._colCount;n++)i._sheet.setStyle(e,n,a);i._sheet.getRange(e,0,1,k._colCount).borderRight(void 0)}};if(x){var I=x.fieldName,P=x.lookupValue,_=(k._fieldsIndexesCache[I]||{})[P];if(null==_||!_.ranges)return;x.collapse=!0;var M=this._sheet.getTag(r,o);if(M){for(var L=!M.collapse,R=1;R<_.ranges.length;R++){var V=_.ranges[R];this._sheet.setTag(V.row,V.col,{collapse:!1});var N=k._rowsInfo[V.row];if(N.isHidden||this._sheet.setRowVisible(V.row,L,Dl.a.Spread.Sheets.SheetArea.viewport),Bo.a.isEqual(N._pathHashKey,x._pathHashKey)&&!L){this._removeCells(r,w._startCol,1,w._colCount),this._sheet.getRange(r,0,1,k._colCount).borderRight(this._sheet.getStyle(V.row,w._startCol).borderRight);for(var E=w._startCol;E<w._startCol+w._colCount;E++)this._sheet.setValue(r,E,this._sheet.getValue(V.row,E)),this._sheet.setStyle(r,E,this._sheet.getStyle(V.row,E))}L&&N.isTitleRow&&A(V.row)}if(L){A(r);var F=this._sheet.getViewportTopRow(1);r<F&&this._sheet.showRow(r,Dl.a.Spread.Sheets.VerticalPosition.top)}this._showScrollBarOrNot()}}}}else if(s===Dl.a.Spread.Sheets.SheetArea.colHeader){var O=this._options.subTotals.display===Ua,H=Dl.a.Spread.Sheets.SheetArea.colHeader,B=this._mergeCellsRecord.colHeaders.find(function(e){return e.row===r&&e.col===o||e.row===r&&e.col+e.colCount-1===o});if(B){var U=B.colCount-1,z=this._sheet.getTag(B.row,B.col,s),K=!0;z&&(K=!z.collapse);var j=this.getColHeaderLevel();if(2<j)for(var W=B.row+1;W<j-1;++W)for(var G=parseInt(B.col,10);G<parseInt(B.col,10)+U;++G){var Y=this._sheet.getTag(W,G,H)||{collapse:!1,sortStatus:Un};Y.collapse=!1,this._sheet.setTag(W,G,Y,Dl.a.Spread.Sheets.SheetArea.colHeader)}var q=-1;if(O)for(var J=B.col+U-1;J>=B.col;--J)this._sheet.setColumnVisible(J,!0,Dl.a.Spread.Sheets.SheetArea.colHeader),this._totalsIndex.colHeaderTotals[bY.ColumnHeaderSubTotal].has(J)||-1===q&&(q=J);for(;U;){var X=parseInt(B.col,10)+U-1,Q=this._totalsIndex.colHeaderTotals[bY.ColumnHeaderSubTotal].has(X);this._sheet.setColumnVisible(X,K,Dl.a.Spread.Sheets.SheetArea.colHeader),O&&(Q?this._sheet.setColumnVisible(X,!1,Dl.a.Spread.Sheets.SheetArea.colHeader):X===q&&this._sheet.setColumnVisible(X,!0,Dl.a.Spread.Sheets.SheetArea.colHeader)),--U}if(K)this._sheet.getViewportLeftColumn(1)>B.col&&this._sheet.showColumn(B.col,Dl.a.Spread.Sheets.HorizontalPosition.left)}}this._showScrollBarOrNot()}this.resume()}}}},{key:"_handleCellExpandAndCollapse",value:function(){var e=this;this._options.expandStatus!==zr.Auto&&this._options.expandStatus!==zr.Show||this.registerEventHandlers({click:function(){return e._expandOrCollapseCell.apply(e,arguments)}})}},{key:"_removeCells",value:function(e,t,a,n,i){var r=this,o=this._sheet.getSpans(new Dl.a.Spread.Sheets.Range(e,t,a,n),i);(1<a||1<n)&&o.forEach(function(e){return r._sheet.removeSpan(e.row,e.col,i)})}},{key:"_mergeCells",value:function(e,t,a,n,i){nu.assert(void 0!==this._sheet),(1<a||1<n)&&(this._removeCells(e,t,a,n,i),this._sheet.addSpan(e,t,a,n,i))}},{key:"_hasUiFilter",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:1,i=this._dataProfile.usedColumnDimensions,r=this.getCellInfo(e,t,n);if(bJ(r)){var o=r.type;return this._options.enableUiFilter&&o===bY.ColumnHeader&&e<i.length||this._options.enableUiFilter&&o===bY.CornerHeader}return!1}},{key:"_getCellType",value:function(e,t,a,n){var i=this._hasUiFilter(t,a,n),r=this._getFilterIcon(t,a,n);return this._options.isUiSortEnabled?new Cq(e,r,i):new Tq(e)}},{key:"_paintCorner",value:function(){var m=this,e=this._data.cornerHeaders,f=this._data.columnLevel,v=this._dataProfile.usedRowDimensions;e.forEach(function(e,t){var a,n,i,r,o;m._sheet.setValue(0,t,e.value,Dl.a.Spread.Sheets.SheetArea.colHeader),m._setRowHeight(0,Dl.a.Spread.Sheets.SheetArea.colHeader);for(var s=0;s<f;s+=1)m._sheet.setStyleName(s,t,Kq.Corner,Dl.a.Spread.Sheets.SheetArea.colHeader);m._initCellTag(0,t,1),1<f&&(m._mergeCells(0,t,f,1,Dl.a.Spread.Sheets.SheetArea.colHeader),m._mergeCellsRecord.cornerHeaders.push({row:0,col:t}));var l=m._getCellType(m._options.corner.textStyle,0,t,1);m._sheet.setCellType(0,t,l,Dl.a.Spread.Sheets.SheetArea.colHeader);var u=m._sheet.getTag(0,t,1)||{sortStatus:Un,collapse:!1},c=(null===(a=m.getCellInfo(0,t,1))||void 0===a?void 0:a.sortOrder)||Un;u.sortStatus=c,m._sheet.setTag(0,t,u,1);var d=m._options.corner.border.color;m._setTopDoubleBorder(0,t,d,1,1,Dl.a.Spread.Sheets.SheetArea.colHeader),0===t&&m._setLeftMostDoubleBorder(0,t,d,f,1,Dl.a.Spread.Sheets.SheetArea.colHeader);var p=m.getCellInfo(0,t),h=p.relatedDimensionFieldList,y=null===(n=v[t])||void 0===n?void 0:n.name,g=null==h||null===(i=h.find(function(e){return e.fieldName===y}))||void 0===i||null===(r=i.field)||void 0===r||null===(o=r.options)||void 0===o?void 0:o.alignment;p.attached&&(g=p.alignment),m._setAlignment({value:g,dataType:"string"},t)}),this._options.frozenGroup?(this._sheet.frozenColumnCount(e.length),this._sheet.options.frozenlineColor="transparent"):this._sheet.frozenColumnCount(0)}},{key:"_initCellTag",value:function(e,t,a){if(!this._sheet.getTag(e,t,a)){var n={sortStatus:Un,collapse:!1};this._sheet.setTag(e,t,n,a)}}},{key:"_handleSharedBorderInColumnHeaders",value:function(e){for(var t=this.getRowHeaderLevel(),a=0;a<e.length;a+=1)for(var n=e[a],i=t;i<t+n.length;i+=1){var r=n[i];if(r){i===t&&0<t&&iJ(a,i,{corner:this._options.corner,colHeader:this._options.colHeader},this._sheet);var o=n[i+1],s=n[i-1];(null==r?void 0:r.type)===bY.ColumnHeader?$q({nextCell:o,previousCell:s,row:a,col:i,colHeader:this._options.colHeader,subTotals:this._options.subTotals,grandTotals:this._options.grandTotals,sheet:this._sheet}):(null==r?void 0:r.type)===bY.ColumnHeaderSubTotal&&(null==o?void 0:o.type)===bY.ColumnHeaderGrandTotal&&nJ(a,i,o,void 0,this._options,this._sheet),0===a&&Zq({row:a,col:i,color:(null==r?void 0:r.type)===bY.ColumnHeaderGrandTotal?this._options.grandTotals.border.color:this._options.colHeader.border.color,rowCount:1,colCount:1,sheetArea:1,sheet:this._sheet}),0===i&&Qq({row:a,col:i,color:this._options.colHeader.border.color,rowCount:1,colCount:1,sheetArea:1,sheet:this._sheet})}}}},{key:"_getTotalsVisible",value:function(){var e=this._options,t=e.subTotals,a=e.grandTotals,n=t.display===Ba,i=a.display===ja||a.display===za;return{subTotalVisible:n,rowGrandTotalVisible:a.display===Ka||a.display===za,colGrandTotalVisible:i}}},{key:"_getRenderSetting",value:function(t,a){var e;nu.assert(!0===["rows","columns"].includes(a));var n=null===(e=this._dataProfile.renderSettingInfo.filter(function(e){return!!e}).find(function(e){return e.name===t.name&&e.rolePath===a}))||void 0===e?void 0:e.value;return void 0===n?H.ImageRenderSetting.Text:n}},{key:"_setAlignment",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:-1,i=this._dataProfile.alignmentInfo,r=wq(e.value||H.TableAlignment.Default,i.globalAlignment,e),o=this._sheet.getStyle(n,t)||new Dl.a.Spread.Sheets.Style;o.hAlign=r,this._sheet.setStyle(n,t,o)}},{key:"_paintColumnHeader",value:function(){var y=this,e=this._data.columnHeaders,t=this._data.rowLevel,a=this._data.columnLevel,g=[],n=this._getTotalsVisible(),m=n.subTotalVisible,f=n.colGrandTotalVisible,v=this._dataProfile.usedColumnDimensions;!function d(e,p,t){var h=2<arguments.length&&void 0!==t?t:0;if(nu.assert(h<a),h!==a)return e.forEach(function(e){var t=p,a=e.type===bY.ColumnHeaderGrandTotal;g[h]||(g[h]=[]),(m&&e.type===bY.ColumnHeaderSubTotal||f&&e.type===bY.ColumnHeaderGrandTotal||e.type===bY.ColumnHeader)&&(g[h][t]={type:e.type}),a?y._sheet.setStyleName(h,t,Kq.GrandTotals,1):y._sheet.setStyleName(h,t,Kq.ColHeader,1),y._initCellTag(h,t,1);var n=y._sheet.getStyle(h,t,1)||new Dl.a.Spread.Sheets.Style;n.hAlign=Dl.a.Spread.Sheets.HorizontalAlign.center,n.wordWrap=y._options.colHeader.enableWordWrap,y._sheet.setStyle(h,t,n,1);var i=v[h],r=y._getRenderSetting({name:null==i?void 0:i.name},"columns");if(r===H.ImageRenderSetting.Text||e.type!==bY.ColumnHeader?y._sheet.setValue(h,t,e.value,1):(y._sheet.setValue(h,t,"",1),y.renderImage2Cell({row:h,col:t,renderSetting:r,value:e.value,sheetArea:1}),y._imageRowIdxsInColHeader.push(h),y._imageColumnsIdxs.push(t)),e.next.length){var o=(p=d(e.next,p,h+1))-t;1<o?y._mergeCellsRecord.colHeaders.push({row:h,col:t,rowCount:1,colCount:o,children:e.next.length}):y._sheet.setCellType(h,t,new Tq(y._options.colHeader.textStyle),1)}else{var s=y._getCellType(y._options.colHeader.textStyle,h,t,1);y._sheet.setCellType(h,t,s,1);var l=y._sheet.getTag(h,t,1)||{sortStatus:Un,collapse:!1};l.sortStatus=e.sortOrder,y._sheet.setTag(h,t,l,1),y._totalsIndex.colHeaderTotals[null==e?void 0:e.type]&&y._totalsIndex.colHeaderTotals[e.type].add(t);var u=y.getCellInfo(h,t);if(bJ(u)){var c=u.valueField.alignment;y._setAlignment({value:c,dataType:"value"},t)}p+=1}}),p}(e,t,0),this._handleSharedBorderInColumnHeaders(g)}},{key:"_getDataStripeNameStyle",value:function(e){var t=this._options.useAlternateRowStyle;return nu.assert(-1<e),t?e%2==0?Kq.FirstDataStripe:Kq.SecondDataStripe:Kq.Whole}},{key:"_getLastLevelRowHeaderNameStyle",value:function(a,e){var t,n=(t={},V()(t,bY.RowHeader,Kq.RowHeader),V()(t,bY.RowHeaderSubTotal,Kq.SubTotals),V()(t,bY.RowHeaderGrandTotal,Kq.GrandTotals),t)[e];if(nu.assert(void 0!==n),n===Kq.RowHeader){var i=this._options,r=i.treatLastRowHeaderAsData,o=i.useAlternateRowStyle;if(r){var s=0;this._getTotalsVisible().subTotalVisible||(s=R()(this._totalsIndex.rowHeaderTotals[bY.RowHeaderSubTotal]).reduce(function(e,t){return e+=t<a?1:0},0)),n=o?this._getDataStripeNameStyle(a-s):Kq.Whole}}return n}},{key:"_handleSharedBorderInRowHeaders",value:function(u){var c=this;u.forEach(function(e,t){for(var a=0;a<e.length;a+=1){var n=e[a];if(n){var i=c._options.treatLastRowHeaderAsData,r=a===c.getRowHeaderLevel()-1;if(0===t)if(r&&i){var o=c._options.corner.border.color?c._options.corner.border.color:c._options.firstDataStripe.border.color;o&&c._sheet.getCell(t,a).borderTop(new Dl.a.Spread.Sheets.LineBorder(o,Dl.a.Spread.Sheets.LineStyle.thin))}else rJ(t,a,{corner:c._options.corner,rowHeader:c._options.rowHeader},c._sheet);var s=u[t-1]&&u[t-1][a],l=u[t+1]&&u[t+1][a];(null==n?void 0:n.type)===bY.RowHeader?r&&i?(aJ(t,a,c._options,c._getRowCount(),c._sheet),0<a&&oJ(t,a,c._options,c._sheet)):eJ(t,a,s,l,c._options,c._sheet):(null==n?void 0:n.type)===bY.RowHeaderSubTotal&&(null==l?void 0:l.type)===bY.RowHeaderGrandTotal&&nJ(t,a,void 0,l,c._options,c._sheet)}}})}},{key:"_paintRowHeader",value:function(){var S=this,e=this._data.rowHeaders,D=[],t=this._getTotalsVisible(),k=t.subTotalVisible,w=t.rowGrandTotalVisible;!function b(e,C,t){var T=2<arguments.length&&void 0!==t?t:0;return e.forEach(function(e){var t,a,n,i,r,o=C;if(D[o]||(D[o]=[]),(e.type===bY.RowHeaderSubTotal&&k||e.type===bY.RowHeaderGrandTotal&&w||e.type===bY.RowHeader)&&(D[o][T]={type:e.type}),e.next.length){var s;C=b(e.next,C,T+1),t=(s={},V()(s,bY.RowHeader,Kq.RowHeader),V()(s,bY.RowHeaderSubTotal,Kq.SubTotals),V()(s,bY.RowHeaderGrandTotal,Kq.GrandTotals),s)[e.type],S._isLastLevelRowHeaderStyle(T)&&(t=S._getLastLevelRowHeaderNameStyle(o,e.type)),nu.assert(void 0!==t),S._sheet.setStyleName(o,T,t);var l=C-o;if(1<l){S._initCellTag(o,T),S._mergeCellsRecord.rowHeaders.push({row:o,col:T,rowCount:l,colCount:1,children:(a=e,n=o,i=T+1,null!=(r=S.getCellInfo(n,i))&&r.attached?Bo.a.reduce(a.next,function(e,t){var a;return e+((null===(a=t.next)||void 0===a?void 0:a.length)||0)},0):a.next.length)});for(var u=o+1;u<o+l;u+=1)S._sheet.setStyleName(u,T,t)}}else S._totalsIndex.rowHeaderTotals[e.type]&&S._totalsIndex.rowHeaderTotals[e.type].add(o),t=S._getLastLevelRowHeaderNameStyle(o,e.type),nu.assert(void 0!==t),S._sheet.setStyleName(o,T,t),C+=1;var c=e.type===bY.RowHeaderGrandTotal?S._options.grandTotals.border.color:S._options.treatLastRowHeaderAsData?o%2==0?S._options.firstDataStripe.border.color:S._options.secondDataStripe.border.color:S._options.rowHeader.border.color;0===T&&c&&Qq({row:o,col:0,color:c,rowCount:1,colCount:1,sheet:S._sheet});var d=S._dataProfile.usedRowDimensions[T],p=S._getRenderSetting({name:null==d?void 0:d.name},"rows");if(p===H.ImageRenderSetting.Text||e.type!==bY.RowHeader){var h=e.value;S._sheet.setValue(o,T,h);var y=S._sheet.getStyle(o,T);if(S._sheet.setStyle(o,T,y),(null==h||""===h)&&e.type===bY.RowHeader){var g=S._options,m=g.nullItemsString,f=g.emptyItemsString,v=new Pq;v.setEmptyString(m,f),S._sheet.setCellType(o,T,v)}}else S.renderImage2Cell({row:o,col:T,renderSetting:p,value:e.value}),S._imageColumnsIdxs.push(T)}),C}(e,0),this._handleSharedBorderInRowHeaders(D)}},{key:"_handleSharedBorderInData",value:function(l){var u=this,c=this._data.rowLevel;l.forEach(function(e,t){for(var a=c;a<e.length;a+=1){var n=e[a],i=e[a+1],r=e[a-1],o=l[t-1]&&l[t-1][a],s=l[t+1]&&l[t+1][a];(null==n?void 0:n.type)===bY.ValueCell?((null==s?void 0:s.type)===bY.ValueCell&&aJ(t,a,u._options,u._getRowCount(),u._sheet),a===c&&0<c&&oJ(t,a,u._options,u._sheet),tJ(t,a,r,i,o,s,u._options,u._sheet),0===a&&Qq({row:t,col:a,color:t%2==0?u._options.firstDataStripe.border.color:u._options.secondDataStripe.border.color,rowCount:1,colCount:1,sheet:u._sheet})):(null==n?void 0:n.type)===bY.SubTotalColumn&&nJ(t,a,i,s,u._options,u._sheet)}})}},{key:"_paintData",value:function(){for(var e,u=this,c=this._data.data,t=c.length,d=this._data.rowLevel,p=[],h=(e={},V()(e,bY.ValueCell,Kq.Whole),V()(e,bY.SubTotalRow,Kq.SubTotals),V()(e,bY.SubTotalColumn,Kq.SubTotals),V()(e,bY.GrandTotalRow,Kq.GrandTotals),V()(e,bY.GrandTotalColumn,Kq.GrandTotals),V()(e,bY.GrandTotalBoth,Kq.GrandTotals),V()(e,bY.SubTotalBoth,Kq.SubTotals),e),a=this._getTotalsVisible(),y=a.subTotalVisible,g=a.rowGrandTotalVisible,m=a.colGrandTotalVisible,n=function(e){for(var a=e,t=c[e]||[],n=0;n<t.length;n+=1){var i=t[n];if(i){var r=h[i.type];if(r===Kq.Whole){var o=0;y||(o=R()(u._totalsIndex.rowHeaderTotals[bY.RowHeaderSubTotal]).reduce(function(e,t){return e+=t<a?1:0},0)),r=u._getDataStripeNameStyle(a-o)}u._sheet.setValue(a,n+d,i.originalValue),u._sheet.setStyleName(a,n+d,r);var s=u._sheet.getStyle(a,n+d),l=i.format;l&&(s.formatter=new _q(l),u._sheet.setStyle(a,n+d,s)),i.isCustomData&&u._options.customDataHighlight&&(s.foreColor=u._options.overwriteCell.foreColor,s.backColor=u._options.overwriteCell.backColor,u._sheet.setStyle(a,n+d,s)),p[a]||(p[a]=[]),(i.type===bY.ValueCell||i.type===bY.SubTotalColumn&&y||i.type===bY.GrandTotalColumn&&m||i.type===bY.GrandTotalRow&&g)&&(p[a][n+d]={type:i.type})}}},i=0;i<t;i+=1)n(i);this._handleSharedBorderInData(p)}},{key:"isClickOnBlank",value:function(e,t,a){var n=this._pivotTableRange;if(1===a)return!1;if(e<0||e>n.row+n.rowCount||t<0||t>n.col+n.colCount)return!0;var i=this._dataViewModel.getRowModel(),r=i._rowsInfo[e],o=r.isTitleRow,s=r.collapse;return o&&!s&&t>=i._startCol+i._colCount}},{key:"_getSheetAreaViewModel",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:3,n=this._pivotTableRange;if(e<n.col||e>n.col+n.colCount)return null;var i=N()(this._dataViewModel._models,4),r=i[0],o=i[1],s=i[2],l=i[3];if(1===a){if(e<o._startCol)return r;if(e>=o._startCol)return o}return e<l._startCol?s:l}},{key:"getCellInfo",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:3,i=this._getSheetAreaViewModel(t,n);if(!i)return{};var r=e-i._startRow,o=t-i._startCol,s=i.getOriginalInfo(r,o);if(s){r=s.row,o=s.col;try{return this._data.getCellInfo(r,o,n)}catch(e){return{}}}return{}}},{key:"_getRowCount",value:function(){return this._pivotTableRange.rowCount-this._pivotTableRange.row}},{key:"_getColCount",value:function(){return this._pivotTableRange.colCount-this._pivotTableRange.col}},{key:"clear",value:function(){var e,t,i=this;this.clearUiSortInfo();function a(e,t,a){var n=i._sheet.getSpan(e,t,a);n&&i._sheet.removeSpan(n.row,n.col,a)}var n=this._pivotTableRange,r=n.row,o=n.col,s=n.rowCount,l=void 0===s?0:s,u=n.colCount,c=void 0===u?0:u,d=this._sheet.getRowCount(1),p=this._sheet.getColumnCount(1);this._sheet.clear(r,o,l,c,3,Dl.a.Spread.Sheets.StorageType.data|Dl.a.Spread.Sheets.StorageType.style|Dl.a.Spread.Sheets.StorageType.tag),this._sheet.clear(0,0,d,p,1,Dl.a.Spread.Sheets.StorageType.data|Dl.a.Spread.Sheets.StorageType.style|Dl.a.Spread.Sheets.StorageType.tag),this._mergeCellsRecord.rowHeaders.forEach(function(e){a(e.row,e.col);for(var t=e.row;t<e.row+e.rowCount;t+=1)i._sheet.setRowVisible(t,!0,Dl.a.Spread.Sheets.SheetArea.viewport)}),this._mergeCellsRecord.colHeaders.forEach(function(e){a(e.row,e.col,1);for(var t=e.col;t<e.col+e.colCount;t+=1)i._sheet.setColumnVisible(t,!0,Dl.a.Spread.Sheets.SheetArea.colHeader)}),this._mergeCellsRecord.cornerHeaders.forEach(function(e){a(e.row,e.col,1);for(var t=e.row;t<e.row+e.rowCount;t+=1)i._sheet.setRowVisible(t,!0,Dl.a.Spread.Sheets.SheetArea.colHeader)});for(var h=r;h<l;h+=1)this._sheet.setRowVisible(h,!0);for(var y=o;y<c;y+=1)this._sheet.setColumnVisible(y,!0);this._mergeCellsRecord={rowHeaders:[],colHeaders:[],cornerHeaders:[]},this._totalsIndex={rowHeaderTotals:(e={},V()(e,bY.RowHeaderSubTotal,new Set),V()(e,bY.RowHeaderGrandTotal,new Set),e),colHeaderTotals:(t={},V()(t,bY.ColumnHeaderSubTotal,new Set),V()(t,bY.ColumnHeaderGrandTotal,new Set),t)},this._imageRowIdxsInColHeader=[],this._imageColumnsIdxs=[],this._sheet.frozenColumnCount(0)}},{key:"paint",value:function(){if(nu.time("paint"),this._spread)switch(this._dataViewModel.reset(),this._pivotTableRange&&this.clear(),this._layoutType){case Kr:KJ.render(this);break;case jr:jJ.render(this)}}},{key:"updatePivotTableRange",value:function(){var e=N()(this._dataViewModel._models,4),t=e[0],a=e[1],n=e[2],i=e[3];this._pivotTableRange.rowCount=n._rowCount,this._pivotTableRange.colCount=t._colCount+a._colCount,0===n._rowCount&&(this._pivotTableRange.rowCount=i._rowCount),t.setStartInfo(0,0),n.setStartInfo(0,0),a.setStartInfo(0,t._colCount),i.setStartInfo(0,n._colCount),this._sheet.suspendPaint(),this._sheet.suspendCalcService();var r=a._rowCount||+!!t._colCount;this._sheet.setRowCount(r,Dl.a.Spread.Sheets.SheetArea.colHeader),this._sheet.setRowCount(this._pivotTableRange.rowCount),this._sheet.setColumnCount(this._pivotTableRange.colCount),this._updateMergeItems(),this._renderPivotViewModelToPage(),this._updateRowAndColumnStyle(),this._updateSubTotalsAndGrandTotals(),this.resize(),this.updateConditionalFormats(this._dataProfile.conditionalFormats),this.updateStyle(),this.restoreScrollPosition(),this._sheet.resumePaint(),this._sheet.resumeCalcService()}},{key:"_addCellTypeMapping",value:function(e,t,a,n){e[t]||(e[t]=[]),e[t][a]={type:n}}},{key:"_updateCornerHeaderBorderStyle",value:function(){for(var e=this._dataViewModel.getCornerModel(),t=this._options.corner.border.color,a=0;a<e._colCount;a++)this._setRowHeight(0,Dl.a.Spread.Sheets.SheetArea.colHeader),this._setTopDoubleBorder(0,a,t,1,1,Dl.a.Spread.Sheets.SheetArea.colHeader),0===a&&this._setLeftMostDoubleBorder(0,a,t,this._getRowCount(1),1,Dl.a.Spread.Sheets.SheetArea.colHeader)}},{key:"_updateColumnHeadersBorderStyle",value:function(){function i(t,a){Bo.a.range(0,o._rowCount).forEach(function(e){r._addCellTypeMapping(n,e,t,a)})}var r=this,n=[],o=this._dataViewModel.getColumnModel(),s=this._options.colHeader.border.color;o._columnsInfo.forEach(function(e,t){var a=t+o._startCol;if(r._setTopDoubleBorder(0,a,s,1,1,Dl.a.Spread.Sheets.SheetArea.colHeader),e.hAlign){var n=r._sheet.getStyle(-1,a)||new Dl.a.Spread.Sheets.Style;n.hAlign=e.hAlign,r._sheet.setStyle(-1,a,n)}e.isSubtotal||e.isGrandTotal||i(a,bY.ColumnHeader),e.isSubtotal&&!e.isHidden&&i(a,bY.ColumnHeaderSubTotal),e.isGrandTotal&&!e.isHidden&&i(a,bY.ColumnHeaderGrandTotal)}),this._handleSharedBorderInColumnHeaders(n)}},{key:"_updateRowHeadersBorderStyle",value:function(){function r(t,a){Bo.a.range(0,s._colCount).forEach(function(e){o._addCellTypeMapping(n,t,e,a)})}var o=this,n=[],s=this._dataViewModel.getRowModel(),l=this._dataViewModel.getColumnModel();s._rowsInfo.forEach(function(e,t){var a,n=t+s._startRow;if(e.isTitleRow&&"top"!==o._options.subTotals.display){var i=o._sheet.getStyle(n,0)||new Dl.a.Spread.Sheets.Style;o._sheet.getRange(n,0,1,s._colCount).borderRight(void 0),o._sheet.getRange(n,l._startCol,1,l._colCount).borderTop(i.borderTop).borderBottom(i.borderBottom).borderRight(i.borderLeft).backColor(i.backColor)}e.isSubtotal||e.isGrandTotal||(a=o._options.rowHeader.border.color,r(n,bY.RowHeader)),e.isSubtotal&&!e.isHidden&&(a=o._options.rowHeader.border.color,r(n,bY.RowHeaderSubTotal)),e.isGrandTotal&&!e.isHidden&&(a=o._options.grandTotals.border.color,r(n,bY.RowHeaderGrandTotal)),(1<s._colCount||!o._options.treatLastRowHeaderAsData)&&a&&Qq({row:n,col:0,color:a,rowCount:1,colCount:1,sheet:o._sheet})}),this._options.treatLastRowHeaderAsData&&this._layoutType!==Kr||this._handleSharedBorderInRowHeaders(n)}},{key:"_updateDataBorderStyle",value:function(){for(var n=this,i=[],e=function(e,t,a){n._addCellTypeMapping(i,e,t,a)},t=this._dataViewModel.getAllModels(),a=t.rowModel,r=t.colModel,o=t.contentModel,s=0;s<a._rowsInfo.length;s++)for(var l=s+a._startRow,u=a._rowsInfo[s],c=0;c<r._columnsInfo.length;c++){var d=c+r._startCol,p=r._columnsInfo[c],h=o.getType(s,c);h===bY.ValueCell&&e(l,d,bY.ValueCell),h===bY.SubTotalColumn&&p.isSubtotal&&!p.isHidden&&e(l,d,bY.SubTotalColumn),h===bY.GrandTotalRow&&u.isGrandTotal&&!u.isHidden&&e(l,d,bY.GrandTotalRow),h===bY.GrandTotalColumn&&p.isGrandTotal&&!p.isHidden&&e(l,d,bY.GrandTotalColumn)}for(var y=0;y<o._rowCount;y++){var g=y+o._startRow;if(0===a._colCount||1===a._colCount&&this._options.treatLastRowHeaderAsData){var m=void 0;(m=g%2==0?this._options.firstDataStripe.border.color:this._options.secondDataStripe.border.color)&&Qq({row:g,col:0,color:m,rowCount:1,colCount:1,sheet:this._sheet})}}this._handleSharedBorderInData(i)}},{key:"_updateAlign",value:function(){var a=this,e=this._dataViewModel.getAllModels(),t=e.cornerModel,n=e.colModel,i=e.rowModel;this._layoutType===Kr?t._columnsInfo.forEach(function(e,t){null!=e&&e.hAlign&&a._setAlignment(e.hAlign,t)}):i._rowsInfo.forEach(function(e,t){null!=e&&e.hAlign&&a._setAlignment(e.hAlign,0,t)}),n._columnsInfo.forEach(function(e,t){null!=e&&e.hAlign&&a._setAlignment(e.hAlign,t+n._startCol)})}},{key:"_updateRowAndColumnStyle",value:function(){this._spread&&(this._updateCornerHeaderBorderStyle(),this._updateColumnHeadersBorderStyle(),this._updateRowHeadersBorderStyle(),this._updateDataBorderStyle(),this._updateAlign(),this._options.frozenGroup?(this._sheet.frozenColumnCount(this._dataViewModel.getCornerModel()._colCount),this._sheet.options.frozenlineColor="transparent"):this._sheet.frozenColumnCount(0))}},{key:"_updateRowSubTotalsAndGrandTotals",value:function(){for(var e=this._dataViewModel.getRowModel(),t=0;t<e._rowsInfo.length;t++){var a=e._rowsInfo[t];a.isSubtotal&&(a.isHidden&&this._sheet.setRowVisible(t+e._startRow,!1),this._totalsIndex.rowHeaderTotals[bY.RowHeaderSubTotal].add(t+e._startRow)),a.isGrandTotal&&this._totalsIndex.rowHeaderTotals[bY.RowHeaderGrandTotal].add(t+e._startRow),a.isImageRow&&this._imageColumnsIdxs.push(t+e._startRow)}}},{key:"_updateColumnSubTotalsAndGrandTotals",value:function(){for(var e=this._dataViewModel.getColumnModel(),t=0;t<e._columnsInfo.length;t++){var a=e._columnsInfo[t];a.isSubtotal&&(a.isHidden&&this._sheet.setColumnVisible(t+e._startCol,!1),this._totalsIndex.colHeaderTotals[bY.ColumnHeaderSubTotal].add(t+e._startCol)),a.isGrandTotal&&this._totalsIndex.colHeaderTotals[bY.ColumnHeaderGrandTotal].add(t+e._startCol),a.isImageColumn&&this._imageColumnsIdxs.push(t+e._startCol)}for(var n=0;n<e._rowsInfo.length;n++){var i;null!==(i=e._rowsInfo[n])&&void 0!==i&&i.isImageRow&&this._imageRowIdxsInColHeader.push(n)}}},{key:"_updateSubTotalsAndGrandTotals",value:function(){this._spread&&(this._updateRowSubTotalsAndGrandTotals(),this._updateColumnSubTotalsAndGrandTotals(),this._showOrHiddenGrandTotals())}},{key:"_updateMergeItems",value:function(){var o=this;this._spread&&Object.keys(this._mergeCellsRecord).forEach(function(e){var t=o._mergeCellsRecord[e];if(t.length){var r="rowHeaders"===e?3:1;t.forEach(function(e){var t,a,n=null!==(t=e.mergeRow)&&void 0!==t?t:e.rowCount,i=null!==(a=e.mergeCol)&&void 0!==a?a:e.colCount;o._mergeCells(e.row,e.col,n,i,r)})}})}},{key:"_renderPivotViewModelToPage",value:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:{};if(this._spread){var i=n.withoutStyle,r=n.withoutTag,o=e,s=t;e||(o=this._sheet),t||(s=this._dataViewModel);for(var l=s._models,u=0;u<l.length;u++)for(var c=l[u].dataTable,d=u<2?Dl.a.Spread.Sheets.SheetArea.colHeader:Dl.a.Spread.Sheets.SheetArea.viewport,p=0;p<c.length;p++){var h=c[p];if(h)for(var y=p+l[u]._startRow,g=0;g<h.length;g++){var m=h[g],f=g+l[u]._startCol;if(m&&(o.setValue(y,f,m.value,d),!r&&m.tag&&o.setTag(y,f,m.tag,d),!i&&m.style)){var v=m.style.styleName;v&&o.setStyleName(y,f,v,d);var b=o.getStyle(y,f,d)||new Dl.a.Spread.Sheets.Style,C=Bo.a.merge(b,Bo.a.omit(m.style,["cellType","styleName","backgroundImage"]));o.setStyle(y,f,C,d);var T=m.style.cellType,S=m.style.backgroundImage;T&&o.setCellType(y,f,T,d),S&&(o.getCell(y,f,d).backgroundImage(S),o.getCell(y,f,d).backgroundImageLayout(Dl.a.Spread.Sheets.ImageLayout.zoom))}}}}}},{key:"_renderShadowPivotTable",value:function(e,t){switch(this._hiddenDataViewModel.reset(),this._layoutType){case Kr:KJ.customRender(t,this._hiddenDataViewModel,this._options);break;case jr:jJ.customRender(t,this._hiddenDataViewModel,this._options)}var a=this._hiddenDataViewModel.getAllModels(),n=a.cornerModel,i=a.rowModel,r=a.colModel,o=a.contentModel;n.setStartInfo(0,0),i.setStartInfo(0,0),r.setStartInfo(0,n._colCount),o.setStartInfo(0,i._colCount),e.suspendPaint(),e.suspendCalcService(),e.setRowCount(r._rowCount,Dl.a.Spread.Sheets.SheetArea.colHeader),e.setRowCount(this._pivotTableRange.rowCount),e.setColumnCount(this._pivotTableRange.colCount),this._renderPivotViewModelToPage(e,this._hiddenDataViewModel,{withoutTag:!0,withoutStyle:!0}),e.resumePaint(),e.resumeCalcService()}},{key:"_getPivotValueRanges",value:function(o){function r(i,r){var e=s._mergeCellsRecord.rowHeaders.find(function(e){var t=e.row,a=e.col,n=e.rowCount;return t<=i&&i<t+n&&r===a});return e?e.rowCount:1}var e,t,a,n,s=this,i=this._dataViewModel.getAllModels(),l=i.rowModel,u=i.contentModel,c=i.cornerModel,d=l._rowCount,p=[],h=!!o.fieldIdentifier.aggregationMethod,y=3===(null==o||null===(e=o.condition)||void 0===e?void 0:e.ruleType)&&(null==o||null===(t=o.condition)||void 0===t||null===(a=t.formula)||void 0===a?void 0:a.match(/ISBLANK/gi));if(null!==(n=o.fieldIdentifier)&&void 0!==n&&n.attached){var g=c._columnsInfo.reduce(function(e,t,a){return null!=t&&t.isAttach&&e.push(a),e},[]),m=0;p=g.reduce(function(e,t){for(var a=0;a<d;){if(0<s._sheet.getValue(a,t)){var n=e[e.length-1],i=n&&n[n.length-1];i&&i.row+m===a?n.push({row:a,col:t,rowCount:1,colCount:1}):e.push([{row:a,col:t,rowCount:1,colCount:1}])}a+=m=r(a,t)}return e},[])}else if(h)u.dataTable.forEach(function(e,r){e&&e.forEach(function(e,t){var a;if((null==e?void 0:e._type)===bY.ValueCell){var n=t+u._startCol,i=null===(a=s.getCellInfo(r,n,3))||void 0===a?void 0:a.valueFieldIdentifier;if(Bo.a.isEqual(o.fieldIdentifier,i))(!Bo.a.isNil(s._sheet.getValue(r,n))||y)&&p.push({row:r,col:n,rowCount:1,colCount:1})}})});else{var f,v=null===(f=o.fieldIdentifier)||void 0===f?void 0:f.columnName,b=l._fieldsIndexesCache[v];if(b)Object.values(b).filter(function(e){return e.ranges}).flatMap(function(e){return e.roots}).forEach(function(e){p.push(F()({},e,{rowCount:1,colCount:1}))})}return p}},{key:"_convertComparisonConditionalFormat",value:function(e,t){function a(o){var e=i._spread.getSheetCount(),t=new Dl.a.Spread.Sheets.Worksheet;i._spread.addSheet(e,t),t.name("cf-".concat(t.name()));var a=i._spread.getSheet(e);return nu.assert(void 0!==a),[a,i._hiddenData.find(function(e){var t=e.getValueFields(),a=t.hiddenField,n=t.setForField,i=tl(a),r=tl(n);return Bo.a.isEqual(o,i)&&Bo.a.isEqual(d,r)})]}function n(e){return"object"===E()(e)}var i=this,r=1<arguments.length&&void 0!==t?t:[],o=MY(e),s=e.condition,l=s.value1,u=s.value2,c=s.operator,d=e.fieldIdentifier,p=o.condition.formula,h=Bo.a.template(p,{interpolate:/{{([\s\S]+?)}}/g}),y=!1,g=[mn,fn,vn,bn,Cn,Tn,Sn,Dn,kn,wn];if(c<dn||-1<[un,sn,ln,gn].indexOf(c)||-1<g.indexOf(c)){var m,f,v=-1<(null===(m=o.condition)||void 0===m?void 0:m.formula.indexOf("{{sheet1}}")),b=-1<(null===(f=o.condition)||void 0===f?void 0:f.formula.indexOf("{{sheet2}}")),C={};if(v){var T=a(l),S=N()(T,2),D=S[0],k=S[1];y=n(l)&&!k,this._renderShadowPivotTable(D,k),C={sheet1:D.name()}}if(b){var w=a(u),x=N()(w,2),A=x[0],I=x[1];y=n(u)&&!I,this._renderShadowPivotTable(A,I),C=F()({},C,{sheet2:A.name()})}Object.keys(C).length&&(o.condition.formula=y?"=FALSE":h(C))}if(dn<=c&&c<=yn){var P=a(l),_=N()(P,2),M=_[0],L=_[1];this._renderShadowPivotTable(M,L);var R=r.map(function(e){var t=e.row,a=e.col;return"INDIRECT(ADDRESS(".concat(t+1,",").concat(a+1,',1,FALSE,"').concat(M.name(),'"),FALSE)')}),V=this._getRangeFormulaA1Style(R,M);R.length&&(o.condition.formula=h({range:'"'.concat(M.name(),'"!').concat(V)}))}return o}},{key:"_convertAnotherFieldConditionalFormat",value:function(e,t){var n=this,a=1<arguments.length&&void 0!==t?t:[],i=_Y(e,a.length),r=e.condition.targetField,s=e.fieldIdentifier,o=-1<i.condition.formula.indexOf('"{{sheet1}}"!{{A1}}:{{A2}}'),l=function(o){var e=n._spread.getSheetCount(),t=new Dl.a.Spread.Sheets.Worksheet;n._spread.addSheet(e,t),t.name("cf-".concat(t.name()));var a=n._spread.getSheet(e);return nu.assert(void 0!==a),[a,n._hiddenData.find(function(e){var t=e.getValueFields(),a=t.hiddenField,n=t.setForField,i=tl(a),r=tl(n);return Bo.a.isEqual(o,i)&&Bo.a.isEqual(s,r)})]}(r),u=N()(l,2),c=u[0],d=u[1];if(this._renderShadowPivotTable(c,d),o){var p=a.map(function(e){var t=e.row,a=e.col;return"INDIRECT(ADDRESS(".concat(t+1,",").concat(a+1,',1,0,"').concat(c.name(),'"),FALSE)')}),h=this._getRangeFormulaA1Style(p,c);i.condition.formula=i.condition.formula.replace(/"{{sheet1}}"!{{A1}}:{{A2}}/g,'"'.concat(c.name(),'"!').concat(h))}return!d?i.condition.formula="=FALSE":(i.condition.formula=i.condition.formula.replace(/"{{sheet1}}"/g,'"'.concat(c.name(),'"')),i.condition.formula=i.condition.formula.replace(/{{A3}}/g,"COLUMN()")),i}},{key:"updateConditionalFormats",value:function(e){var l=this;this._clearConditionalFormat(),e.length&&e.forEach(function(t){var e,a,n=l._getPivotValueRanges(t);if(n.length)if(null!==(e=t.fieldIdentifier)&&void 0!==e&&e.attached)if(l._options.rowHeader.rowNumberCountRule===eq){var i=n.reduce(function(a,e){return e.forEach(function(e){var t=e.col;a[t]||(a[t]=[]),a[t].push(e)}),a},{});Object.values(i).forEach(function(e){return l.setConditionalFormat(t,e)})}else n.forEach(function(e){return l.setConditionalFormat(t,e)});else switch(null===(a=t.condition)||void 0===a?void 0:a._type){case Br:var r=l._convertComparisonConditionalFormat(t,n);l.setConditionalFormat(r,n);break;case Ur:var o=l._convertAnotherFieldConditionalFormat(t,n);l.setConditionalFormat(o,n);break;default:var s=function(e){var t=F()({},e),a=e.condition,n=a.formula;if(3===a.ruleType&&n.includes("ISBLANK")){var i=n.replace(/ISBLANK\(\$A\$1\)/g,'OR(ISBLANK(INDIRECT(ADDRESS(ROW(),COLUMN()))),TRIM(INDIRECT(ADDRESS(ROW(),COLUMN())))="")');t=F()({},t,{condition:F()({},t.condition,{formula:i})})}return t}(t);l.setConditionalFormat(s,n)}})}},{key:"addHandlersToWorksheet",value:function(e){this._addEventHandlersToSheetInternal(e)}},{key:"resize",value:function(){var e=this._options.fixedColumnsWidthInfo;this._reset2DefaultColWidthAndRowHeight(),null!=e&&e.length?(this._applyColumnsWidth(),this._autoFitRow()):this._doAutoFit(),this._updateScrollbarInfo(),this._setScrollbar(this._options.scrollbarMode,this._mouseEnter)}},{key:"_getTableHeight",value:function(){for(var e=this._sheet,t=0,a=this._getRowCount(),n=this.getColHeaderLevel(),i=0;i<n;++i)t+=e.getRowHeight(i,1);for(var r=0;r<a;++r){this._sheet.getRowVisible(r)&&(t+=e.getRowHeight(r,3))}return t}},{key:"_getTableWidth",value:function(){for(var e=this._sheet,t=0,a=this._getColCount(),n=0;n<a;++n){this._sheet.getColumnVisible(n)&&(t+=e.getColumnWidth(n,3))}return t}},{key:"_applyColumnsWidth",value:function(){var a=this;this._updateTableHeight(),this._updateTableWidth(),this.layoutWidth=this._getScenarioLayoutWidth();var e=this._options.fixedColumnsWidthInfo,n=this.getDefaultFixedColumnInfo();e.forEach(function(e){var t=a._getResizedColIndex(e.details)[0];-1<t&&(n[t]=xq(e,a.layoutWidth))}),this.setColumnWidthAfterResized(this._tableHeight,n)}},{key:"_getResizedColIndex",value:function(e){var t=0,a=this.getRowHeaderLevel();return this._layoutType!==Kr&&1<a&&(t=-1*(a-1)),this._data.getResizedColumnIndex(e,t)||[]}},{key:"update",value:function(e){var t=this._sheet.getSelections()[0];if(t){var a=t.row,n=t.col;this._oldSelection=this.getCellInfo(a,n)}e&&(this._data=e.data,this._dataProfile=e.datasetInfo)}},{key:"refresh",value:function(e){if(this.suspend(),this._spread){if(e&&this.update(e),this.paint(),this._oldSelection&&0<Object.keys(this._oldSelection).length){var t=this._getPosWithCellInfo(this._oldSelection),a=t.row,n=t.col;-1<a&&-1<n?this._sheet.setSelection(a,n,1,1):this.clearSelection(),this._oldSelection=void 0}this._spread.refresh(),this.resume()}}},{key:"getOptionsHandlers",value:function(){return this._inspectorHandlers}},{key:"dispose",value:function(){yJ.prototype.dispose.call(this)}},{key:"setOptions",value:function(e){e&&(this._options=e,this._layoutType=this._options.layoutType,this._theme.update(this._options),this._options.scrollByPixel!==this._spread.options.scrollByPixel&&(this._spread.options.scrollByPixel=this._options.scrollByPixel)),this._sheet.options.gridline.color=this._options.rowHeader.border.color,this._updateRowHeight()}},{key:"expandSheet",value:function(){}},{key:"addOverwriteData",value:function(e){var t,a=e.row,n=e.col,i=e.value,r=this._dataProfile.customData,o=this.getCellInfo(a,n);nu.assert(o.type===bY.ValueCell);var s=r&&r.slice()||[],l={fieldIdentifier:null==o?void 0:o.valueFieldIdentifier,dimensions:null==o||null===(t=o.relatedDimensionFieldList)||void 0===t?void 0:t.map(function(e){return{columnName:e.fieldName,entry:e.originalLookupValue}}),value:i},u=s.findIndex(function(e){return Bo.a.isEqual(e.fieldIdentifier,l.fieldIdentifier)&&Bo.a.isEqual(e.dimensions,l.dimensions)});return-1<u?s.splice(u,1,l):s.push(l),s}},{key:"getRowHeaderLevel",value:function(){return this._data.rowLevel}},{key:"getRowHeaderLevelWithoutAttach",value:function(){return this._data.cornerHeaders.filter(function(e){return!(null!=(t=e)&&null!==(a=t.identifier)&&void 0!==a&&a._attached);var t,a}).length}},{key:"getRowHeaderColumnCount",value:function(){return this._dataViewModel.getRowModel()._colCount}},{key:"getColHeaderLevel",value:function(){return this._data.columnLevel}},{key:"isAttachCol",value:function(e){var t;return null===(t=this._dataViewModel.getCornerModel()._columnsInfo[e])||void 0===t?void 0:t.isAttach}},{key:"clearUiSortInfo",value:function(){var e=this._dataViewModel.getRowModel()._colCount,t=this.getColHeaderLevel(),a=this._getColCount()-e;this.suspend();for(var n=0;n<t;++n)for(var i=0;i<e;++i){var r=this._sheet.getTag(n,i,1);r&&r.sortStatus!==Un&&(r.sortStatus=Un,this._sheet.setTag(n,i,r))}for(var o=t-1,s=0;s<a;++s){var l=s+e,u=this._sheet.getTag(o,l,1);u&&u.sortStatus!==Un&&(u.sortStatus=Un,this._sheet.setTag(o,l,u,1))}this.resume()}},{key:"isCellEditable",value:function(e,t){var a=this.getCellInfo(e,t);return-1<[bY.ValueCell,bY.SubTotalColumn,bY.SubTotalRow,bY.GrandTotalColumn,bY.GrandTotalRow,bY.GrandTotalBoth].indexOf(a.type)}},{key:"getColHeaderInfo",value:function(e){var t=this._dataViewModel.getCornerModel(),a=this.getCellInfo(this._data.columnLevel-1,e,1),n={path:[],columns:[]};return Bo.a.isEmpty(a)||(e<t._colCount?(n.columns=[a.valueField.fieldName],a.attached&&(n.attached=!0)):(n=a.relatedDimensionFieldList.reduce(function(e,t){return e.columns.push(t.fieldName),e.path.push(t.originalLookupValue),e},n)).measure=a.valueFieldIdentifier),n}},{key:"_showOrHiddenGrandTotals",value:function(){function e(t){i._totalsIndex.colHeaderTotals[bY.ColumnHeaderGrandTotal].forEach(function(e){i._sheet.setColumnVisible(e,t)})}function t(e){var t=0<arguments.length&&void 0!==e&&e;i._totalsIndex.rowHeaderTotals[bY.RowHeaderGrandTotal].forEach(function(e){i._sheet.setRowVisible(e,t)})}function a(){r.frozen===Ga&&(i._sheet.frozenTrailingRowCount(0),i._sheet.frozenTrailingColumnCount(o)),r.frozen===qa&&(i._sheet.frozenTrailingRowCount(1),i._sheet.frozenTrailingColumnCount(o)),r.frozen===Ja&&(i._sheet.frozenTrailingRowCount(0),i._sheet.frozenTrailingColumnCount(0))}function n(){r.frozen===Ya&&(i._sheet.frozenTrailingRowCount(1),i._sheet.frozenTrailingColumnCount(0)),r.frozen===qa&&(i._sheet.frozenTrailingRowCount(1),i._sheet.frozenTrailingColumnCount(o)),r.frozen===Ja&&(i._sheet.frozenTrailingRowCount(0),i._sheet.frozenTrailingColumnCount(0))}var i=this,r=this._options.grandTotals,o=this._totalsIndex.colHeaderTotals[bY.ColumnHeaderGrandTotal].size;switch(r.display){case Wa:t(!1),e(!1);break;case Ka:e(!0),t(!1),a();break;case ja:t(!0),e(!1),n();break;default:t(!0),e(!0),n(),a()}}},{key:"_getMinimumAutoFitColumnWidth",value:function(e){return-1<this._imageColumnsIdxs.indexOf(e)?75:Number.MIN_SAFE_INTEGER}},{key:"_isImageRowInColHeader",value:function(e){return-1<this._imageRowIdxsInColHeader.indexOf(e)}},{key:"_getImageRowsIdxs",value:function(){return this._imageRowIdxsInColHeader}},{key:"_getPosWithCellInfo",value:function(e){var t=e.relatedDimensionFieldList,a=e.valueFieldIdentifier;if(bJ(e))for(var n=this._pivotTableRange,i=n.row,r=n.col,o=n.rowCount,s=void 0===o?0:o,l=n.colCount,u=void 0===l?0:l,c=i;c<s;c+=1)for(var d=r;d<u;d+=1){var p=this.getCellInfo(c,d,3);if(bJ(p)){var h=p.valueFieldIdentifier,y=p.relatedDimensionFieldList,g=Bo.a.isEqual(h,a),m=function(e){return{fieldName:e.fieldName,originalLookupValue:e.originalLookupValue}},f=Bo.a.isEqual(t.map(m),y.map(m));if(g&&f)return{row:c,col:d}}}return{row:-1,col:-1}}},{key:"_autoFitRow",value:function(){var n=this;if(this._imageColumnsIdxs.length?this._rowHeightOfViewport=Math.max(this._rowHeightOfViewport,75):this._updateRowHeight(),Bo.a.range(this._sheet.getRowCount()).forEach(function(e){n._sheet.setRowHeight(e,n._rowHeightOfViewport)}),this._options.colHeader.enableWordWrap){var e=Bo.a.range(this._sheet.getRowCount(1)).reduce(function(e){var t=[];return Bo.a.range(0,n._getColCount()).forEach(function(e){n._sheet.getColumnVisible(e)&&t.push(e)}),e.push(t),e},[]);this._autoFitRowsHeight(e,this._rowHeightOfHeader,1)}var i=this._dataViewModel.getRowModel();if(this._options.whole.enableWordWrap){var t=Bo.a.range(this._sheet.getRowCount()).reduce(function(e,t){var a=[];return n._sheet.getRowVisible(t)&&(Bo.a.range(0,i._colCount).forEach(function(e){return a.push(e)}),e.push(a)),e},[]);this._autoFitRowsHeight(t,this._rowHeightOfViewport)}for(var a=0;a<this._sheet.getRowCount();a+=1){if(this._totalsIndex.rowHeaderTotals[bY.RowHeaderSubTotal].has(a)||this._totalsIndex.rowHeaderTotals[bY.RowHeaderGrandTotal].has(a)){var r=this._sheet.getCellType(a,i._colCount-1),o=Iq(a,i._colCount-1,this._sheet,3),s=r.getAutoFitHeight(o.value,o.text,o.cellStyle,o.zoomFactor,o.context);this._sheet.setRowHeight(a,Math.max(s,this._rowHeightOfHeader))}}Bo.a.range(this._sheet.getRowCount(1)).forEach(function(e){n._isImageRowInColHeader(e)&&n._sheet.getRowHeight(e,1)<75&&n._sheet.setRowHeight(e,75,1)}),this._updateVerticalScrollbar()}},{key:"isImageColumn",value:function(e){return-1<this._imageColumnsIdxs.indexOf(e)}},{key:"_getFilterIcon",value:function(e,t,a){var n=this.getCellInfo(e,t,a);if(bJ(n)){var i,r=this._dataProfile.pivotFilterColumns,o=n.relatedDimensionFieldList,s=n.valueField;return-1<r.indexOf((null===(i=o[e])||void 0===i?void 0:i.fieldName)||(null==s?void 0:s.fieldName))?gq.Edited:gq.New}return gq.New}},{key:"_isLastLevelRowHeaderStyle",value:function(e){var t,a,n,i,r=this._data.cornerHeaders[e],o=this._data.cornerHeaders.length,s=Bo.a.last(this._data.cornerHeaders);return!(!this._options.rowHeader.showRowNumber||e!==o-2)&&(null!==(t=r.identifier)&&void 0!==t&&t._attached?null===(a=r.identifier)||void 0===a?void 0:a.columnName:r.value)===(null!==(n=s.identifier)&&void 0!==n&&n._attached?null===(i=s.identifier)||void 0===i?void 0:i.columnName:s.value)}},{key:"setHiddenData",value:function(e){this._hiddenData=e}}]),a}(yJ),GJ=function(){function t(e){var A=this;I()(this,t),this.instance=null,this.workBook=null,this.workSheet=null,this.sortInfo={},this._editNullCellWithDuplicatedDimension=!1,this.dirtyState={data:!1,options:!1,enableAutoScroll:!1,expand:!1,sortInfo:!1,fixedColumnsWidthInfo:!1,hiddenPivotTableDatas:!1},this.onWorkSheetValueChanged=function(e){var t,a,n=arguments.length<=1?void 0:arguments[1],i=n.row,r=n.col,o=n.newValue,s=n.oldValue,l=A.instance;if(l)if(A._editNullCellWithDuplicatedDimension)A.workSheet.setValue(i,r,null),A._editNullCellWithDuplicatedDimension=!1;else{var u=A.instance.getCellInfo(i,r),c=null===(t=A.data.data._valueFields)||void 0===t?void 0:t.find(function(e){return Bo.a.isEqual(tl(e.originalItem),u.valueFieldIdentifier)}),d=Jr.isDate(c),p=function(e){var t=+e;if(d){var a=Pl(e);t=a.isValid()?_l(a):null}else isNaN(t)&&(t=null);return t},h={row:i,col:r,rowCount:1,colCount:1,value:p(o)},y=null!==h.value;if(null===p(s)&&y)return;if(!y)return void A.workSheet.setValue(h.row,h.col,s);if("boolean"!=typeof h.value&&void 0!==h.value){var g=l.addOverwriteData(h);if(g){var m=A.workSheet.getViewportLeftColumn(1);null!==(a=A.onCustomDataChange)&&void 0!==a&&a.call(A,g),A.workSheet.showColumn(m,Dl.a.Spread.Sheets.HorizontalPosition.left)}else A.workSheet.setValue(h.row,h.col,h.value)}}},this.resetDirtyState=function(){A.dirtyState={data:!1,options:!1,enableAutoScroll:!1,expand:!1,sortInfo:!1,fixedColumnsWidthInfo:!1,hiddenPivotTableDatas:!1}},this._disableAutoScroll=function(){A.cancelAutoScroll&&A.cancelAutoScroll()},this.onMouseLeave=function(){var e,t,a;if(A.enableAutoScroll){var n=A.options,i=(a=10*Ai[(t=n).grandTotals.display]+Ai[t.grandTotals.frozen],-1<[10*yi.ColumnOnly+yi.LockRow,10*yi.All+yi.LockRow,10*yi.ColumnOnly+yi.LockRowAndColumn,10*yi.All+yi.LockRowAndColumn].indexOf(a));null!==(e=A.cancelAutoScroll)&&void 0!==e&&e.call(A),A.instance.hasSelections()?A.cancelAutoScroll=null:A.cancelAutoScroll=PY(IY(A.options.scrollByPixel,A.options.autoScroll.speed),A,{sheet:A.workSheet,frozeRow:i,scrollByPixel:A.options.scrollByPixel})}},this.onColumnWidthChanged=function(e,t){var a,n=t.colList,i=t.sheet,r=n[0];if(!A.disableFixedColumnWidth){var o=Rq(r,A._columnWidthBeforeChange,A.instance.autoFitColumnsInfo,A.instance,i,A.options.expand);null!==(a=A.columnWidthChanged)&&void 0!==a&&a.call(A,o,A.instance.autoFitColumnsInfo)}},this.onColumnWidthChanging=function(e,t){var a=t.colList,n=t.sheet;A._columnWidthBeforeChange=n.getColumnWidth(a[0]);var i=a[0]===n.getColumnCount()-1;!A.options.expand&&i&&(t.cancel=!0)},this.getSelectedFields=function(c,d){return A.workSheet.getSelections().map(function(e){return{row:e.row+e.rowCount-1,col:e.col}}).reduce(function(e,t){var a=t.row,n=t.col,i=A.instance.getCellInfo(a,n),r=i.relatedDimensionFieldList,o=i.tooltips;if(i.attached)return e;var s=r.reduce(function(e,t){return e.push({originalValue:t.originalLookupValue,value:t.lookupValue,field:t.fieldName,isImage:i.isImage}),e},[]);if(d&&o&&s.push.apply(s,R()(o.filter(function(e){return void 0!==e.value}).map(function(e){var t=e.value;return{originalValue:t,value:t,field:e.fieldIdentifier.columnName}}))),c)return e.push(s),e;var l=i.valueFieldIdentifier;if(void 0!==l){var u=A.workSheet.getValue(a,n);s.push({originalValue:u,value:u,field:l.columnName,isImage:!1})}return e.push(s),e},[])},this._cellClick=function(e,t){var a=t.row,n=t.col,i=t.sheetArea;void 0!==a&&void 0!==n||A._onBlankClick(),A.instance.isClickOnBlank(a,n,i)&&A._onBlankClick();var r=A.workSheet.getCellType(a,n,i);if(!(r instanceof kq&&r.isHitOnCollapseIcon()))if(i!==Dl.a.Spread.Sheets.SheetArea.colHeader){if(!A.options.needAddEditAbility){var o=A.instance.getCellInfo(a,n),s=o.valueFieldIdentifier,l=o.relatedDimensionFieldList,u=o.tooltips,c=o.cellValue;if(!A.instance.queryInteraction(o).tooltip)return;var d=l.map(function(e){return{columnName:e.fieldName,value:e.lookupValue,isImage:e.isImage}});void 0!==s&&d.push({columnName:s.columnName,value:c}),u&&d.push.apply(d,R()(u.filter(function(e){return void 0!==e.value}).map(function(e){return{columnName:e.display,value:e.value}})));var p=A.getSelectedFields(!0,!1),h=A.getSelectedFields(!1,!0),y=A._host.getBoundingClientRect(),g=A.workSheet.getCellRect(a,n),m={x:y.left+g.x+g.width/2,y:y.top+Math.max(g.y,0)};A.onCellClickHandler(d,p,h,m)}}else A._clickOnColHeader(t)},this._startAutoScroll=function(){var e,t=A.options;null!==(e=A.cancelAutoScroll)&&void 0!==e&&e.call(A),A.cancelAutoScroll=PY(IY(t.scrollByPixel,t.autoScroll.speed),A,{sheet:A.workSheet,frozeRow:!1,scrollByPixel:t.scrollByPixel}),A.instance.registerEventHandlers({mouseleave:A.onMouseLeave,mousemove:A._disableAutoScroll})},this._removeAutoScroll=function(){var e;null!==(e=A.cancelAutoScroll)&&void 0!==e&&e.call(A),A.instance.unregisterEventHandlers(["mouseleave","mousemove"])},this._onBlankClick=function(){A.clearSelection(),A.onBlankClick(),A.enableTriggerCrossFilter&&A.onCrossFilter({})},this._clickOnColHeader=function(e){var t,a,n,i,r=e.row,o=e.col,s=e.sheetArea;if(void 0===r||void 0===o)return A.clearSelection(),A.onBlankClick(),void(A.enableTriggerCrossFilter&&A.onCrossFilter({}));if(!A.instance.isAttachCol(o)){var l=A.workSheet.getCellType(r,o,s),u=A.workSheet.getCell(r,o,s),c=A.workSheet.getSpans(u,s).find(function(e){return o>=e.col&&o<e.col+e.colCount});c&&(l=A.workSheet.getCellType(c.row,c.col,s));var d=A.instance.getCellInfo(r,o,s);if(l.isHitOnUiFilter&&l.isHitOnUiFilter()){var p=l.getRect();if(p){var h=A.instance._getFilterDialogPosition(p),y=d.relatedDimensionFieldList,g=d.valueField;if(null!=y&&y.length){var m=y[r]||"";null!==(t=A.showUiFilterDialog)&&void 0!==t&&t.call(A,h,m.fieldName)}else null!==(a=A.showUiFilterDialog)&&void 0!==a&&a.call(A,h,(null==g?void 0:g.fieldName)||"")}}else{if(l instanceof Cq){var f,v=A.instance.queryInteraction(d).uiSort,b=A.instance.isImageColumn(o);if(!v||b)return;var C=A.workSheet.getViewportLeftColumn(1),T=A.instance.getRowHeaderLevelWithoutAttach(),S=A.instance.getRowHeaderColumnCount(),D=A.instance.getColHeaderLevel(),k=null===(i=null===(n=d.valueFieldIdentifier)||void 0===n?void 0:n.calculation)||void 0===i?void 0:i.type,w=void 0!==(f={},V()(f,bY.SubTotalColumn,di),V()(f,bY.GrandTotalColumn,pi),f)[null==d?void 0:d.type];if(k)if([H.AggregationValueCalculationType.Running,H.AggregationValueCalculationType.Moving].includes(k)||w)return;var x=c&&c.colCount===T;Oq(o,s,D,S,A.sortInfo,d,x)(A.data.datasetInfo.usedRowDimensions,A.sortListener,A.workSheet),A.workSheet.showColumn(C,Dl.a.Spread.Sheets.HorizontalPosition.left)}}}},this.sortListener=function(e){A.onUiSortChanged(e)},this._host=e.dom,this.onCustomDataChange=e.onCustomDataChange,this.onUiSortChanged=e.onUiSortChanged,this.onCellClickHandler=e.onCellClick,this.onBlankClick=e.onBlankClick,this.columnWidthChanged=e.onColumnWidthChanged,this.onCrossFilter=e.onCrossFilter,this.showUiFilterDialog=e.onShowUiFilterDialog,this.setData(e.data),this.setOptions(e.options),this.setSortInfo(e.sortInfo),this.setCustomData(e.customData),this.setEnableAutoScroll(e.enableAutoScroll),this.setDisableFixedColumnWidth(e.disableFixedColumnWidth),this.setEnableTriggerCrossFilter(e.enableTriggerCrossFilter),this.setHiddenPivotTableDatas(e.hiddenPivotTableDatas),this.init()}return D()(t,[{key:"setHiddenPivotTableDatas",value:function(e){this.hiddenPivotTableDatas=e,this.dirtyState.hiddenPivotTableDatas=!0}},{key:"init",value:function(){var l=this,n=this.data,u=this.options,i=this.enableTriggerCrossFilter,r=this.hiddenPivotTableDatas;!function(){var e;l.instance=new WJ(l._host,n,u),l.instance.onBlankClicked(l._onBlankClick),l.workBook=l.instance.getSpread(),l.workSheet=l.instance.getSheet(),null!=r&&r.length&&l.instance.setHiddenData(r);var t,a=(e={},V()(e,Dl.a.Spread.Sheets.Events.ColumnWidthChanged,l.onColumnWidthChanged),V()(e,Dl.a.Spread.Sheets.Events.ColumnWidthChanging,l.onColumnWidthChanging),V()(e,Dl.a.Spread.Sheets.Events.EditStarting,function(e,t){var a,n=t.row,i=t.col,r=l.instance.getCellInfo(n,i),o=null===(a=l.data.data._valueFields)||void 0===a?void 0:a.find(function(e){return Bo.a.isEqual(tl(e.originalItem),r.valueFieldIdentifier)}),s=Jr.isNumber(o)||!Jr.isAttributeItem(o);!s&&Jr.isAttributeItem(o)&&(s=Jr.isDate(o)),l.instance.isCellEditable(n,i)&&u.needAddEditAbility&&s||(t.cancel=!0)}),V()(e,Dl.a.Spread.Sheets.Events.SelectionChanging,function(e,t){if(t.newSelections.find(function(e){return-1===e.row}))if(t.oldSelections.length){var a=t.oldSelections[0],n=a.row,i=a.col;-1<n?t.sheet.setSelection(n,i,1,1):l.clearSelection()}else l.clearSelection()}),V()(e,Dl.a.Spread.Sheets.Events.CellClick,l._cellClick),e);(i&&(a=Object.assign(Object.assign({},a),V()({},Dl.a.Spread.Sheets.Events.SelectionChanged,function(e,t){if(t.newSelections.find(function(e){return-1!==e.col&&-1!==e.row})){var a=l.getSelectedFields(!0,!1)[0];a&&a.length&&l.onCrossFilter({selectedFields:[a.filter(function(e){return!e.isImage})]})}}))),u.needAddEditAbility)?a=Object.assign(Object.assign({},a),(t={},V()(t,Dl.a.Spread.Sheets.Events.EditEnding,function(e,t){var a=t.row,n=t.col,i=l.workSheet.getValue(a,n),r=l.instance.getCellInfo(a,n),o=Bo.a.map(r.relatedDimensionFieldList,"fieldName"),s=o.length!==Bo.a.uniq(o).length;null==i&&s&&(l._editNullCellWithDuplicatedDimension=!0)}),V()(t,Dl.a.Spread.Sheets.Events.ValueChanged,l.onWorkSheetValueChanged),t)):l.workSheet.unbind(Dl.a.Spread.Sheets.Events.CellDoubleClick);l.instance.addHandlersToWorksheet(a),l.instance.registerEventHandlers({click:function(e){return e.stopPropagation()}}),l.enableAutoScroll?l._startAutoScroll():l.cancelAutoScroll&&l._removeAutoScroll(),l.clearSelection(),l.instance.refresh(),l.instance.resume()}(),this.resetDirtyState()}},{key:"refresh",value:function(){var e=this.data,t=this.options,a=this.enableAutoScroll,n=e.datasetInfo.validPivotSetting,i=this.dirtyState.options,r=this.dirtyState.data,o=this.dirtyState.hiddenPivotTableDatas,s=!1,l=i||r,u=!1;if(l){if(i&&(this.instance.setOptions(t),this.dirtyState.expand&&(u=!0),this.dirtyState.enableAutoScroll&&(a?this._startAutoScroll():this._removeAutoScroll())),r){if(u=!0,s=!Bo.a.isEmpty(this.lastSortInfo)&&Bo.a.isEmpty(this.sortInfo),Bo.a.isEmpty(this.customData)&&!Bo.a.isEmpty(this.lastCustomData))this.instance.getContext().customData=[];this.instance.update(e)}o&&this.instance.setHiddenData(this.hiddenPivotTableDatas)}l&&!function(e){if(ae.isEmpty(e))return!0;for(var t=ae.keys(e),a=0;a<t.length;++a){var n=t[a];if(!ae.isEmpty(e[n]))return!1}return!0}(n)&&(u&&this.instance.expandSheet(),s&&this.instance.clearUiSortInfo()),l&&(this.instance.suspend(),this.dirtyState.fixedColumnsWidthInfo&&!r?this.instance.resize():this.instance.refresh(),this.instance.resume()),l&&a&&!this.instance.hasSelections()&&this.instance.scrollToFirstRow(),this.dirtyState={data:!1,options:!1,enableAutoScroll:!1,expand:!1,sortInfo:!1,fixedColumnsWidthInfo:!1,hiddenPivotTableDatas:!1}}},{key:"setOptions",value:function(e){var t,a;this.dirtyState.options=!0,this.dirtyState.fixedColumnsWidthInfo=e.fixedColumnsWidthInfo!==(null===(t=this.options)||void 0===t?void 0:t.fixedColumnsWidthInfo),this.dirtyState.expand=e.expand!==(null===(a=this.options)||void 0===a?void 0:a.expand),this.options=e}},{key:"setData",value:function(e){this.data=e,this.dirtyState.data=!0}},{key:"setSortInfo",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.lastSortInfo=this.sortInfo||t,this.sortInfo=t,this.dirtyState.sortInfo=!0}},{key:"setCustomData",value:function(e){this.lastCustomData=this.customData||e,this.customData=e}},{key:"setEnableAutoScroll",value:function(e){this.enableAutoScroll!==e&&(this.dirtyState.enableAutoScroll=!0,this.enableAutoScroll=e)}},{key:"setDisableFixedColumnWidth",value:function(e){this.disableFixedColumnWidth=e}},{key:"setEnableTriggerCrossFilter",value:function(e){this.enableTriggerCrossFilter=e}},{key:"suspendScroll",value:function(){this.enableAutoScroll&&(this._removeAutoScroll(),this.instance.scrollToFirstRow())}},{key:"resumeScroll",value:function(){this.enableAutoScroll&&this._startAutoScroll()}},{key:"clearSelection",value:function(){this.instance.clearSelection()}},{key:"cleanCrossFilter",value:function(){this.workSheet.getSelections().length&&(this.clearSelection(),this.enableAutoScroll&&!this.cancelAutoScroll&&this.onMouseLeave(),this.onBlankClick())}},{key:"destroy",value:function(){this.cancelAutoScroll&&this.cancelAutoScroll(),this.instance.dispose()}},{key:"resize",value:function(){this.instance.suspend(),this.instance.resize(),this.workBook.refresh(),this.instance.resume()}},{key:"repaint",value:function(){this.instance.repaint()}}]),t}(),YJ=function(e){k()(i,e);var n=w()(i);function i(){var e;I()(this,i),(e=n.call(this)).isMock=!1;var t=new hU({tag:"div",className:"layout-full-flex"}),a=new hU({tag:"div",className:"wyn-chart-overlay"});return e.addChildren(t,a),e.host=t,e.mockOverlay=a,e}return D()(i,[{key:"init",value:function(e){var n=this,t=e.onUiSortChanged,a=e.onCellClick,i=e.onBlankClick,r=e.onCrossFilter,o=e.options,s=e.data,l=e.hiddenPivotTableDatas,u=e.enableAutoScroll,c=this.context.store.getPivot();this.instance=new GJ({dom:this.host.getRef(),options:o,data:s,sortInfo:c.uiSortInfo,disableFixedColumnWidth:!1,onUiSortChanged:t,onCellClick:a,onBlankClick:i,onCrossFilter:r,enableTriggerCrossFilter:!0,enableAutoScroll:u,hiddenPivotTableDatas:l,onColumnWidthChanged:function(e,t){var a=CJ(e,t);n.context.store.setAttribute("fixedColumnsWidthInfo",a)}})}},{key:"willUnmount",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.destroy()}},{key:"cleanSelection",value:function(){this.instance.clearSelection()}},{key:"setTableData",value:function(e,t,a,n){this.instance.setData(e),this.instance.setOptions(a),this.instance.setSortInfo(n),this.instance.setHiddenPivotTableDatas(t)}},{key:"refresh",value:function(){var e;this.context.eventHub.fireRender(),null!==(e=this.instance)&&void 0!==e&&e.refresh(),this.context.eventHub.fireRendered()}},{key:"repaint",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.repaint()}},{key:"resize",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.resize()}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}))}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}}]),i}(mU),qJ=function(e){k()(a,e);var t=w()(a);function a(){var d;return I()(this,a),(d=t.call(this)).initialized=!1,d.showTooltipModal=function(e,t){if(e.show){var a={position:e.position,fields:t.clickSelectedFields.reduce(function(e,t){return t.isImage||e.push({label:t.columnName,value:t.columnValue}),e},[]),selected:t.selectedFieldsWithMeasure,hideSelectedCount:!0};d.tooltip.show(a)}},d.onBlankClick=function(){d.selectedInfo=null,d.tooltip.hide(),d.context.pageContext.pageModel.triggerSelectionChange(d.context.store.id)},d.setInteractionInfo=function(){var e=d.context,t=e.store,a=e.pageContext;d.interactionManager.setState({store:t,pageContext:a,pivotSettingHelper:d.pivotSettingHelper})},d.cleanCrossFilter=function(){d.selectedInfo=null,d.cleanSelection(),d.onCrossFilter()},d.onCellClick=function(e,t,a,n){var i,r=RB()(d).pivotSettingHelper,o=zY(r),s=null===(i=KY(o,e))||void 0===i?void 0:i.filter(function(e){return!e.isImage}),l=d.context.store.getProperties().clickAction,u={position:n,show:l===H.InteractionMouseEventAction.ShowTooltip&&0<t.length},c={clickSelectedFields:s,selectedFields:t,selectedFieldsWithMeasure:jY(r,a)};l===H.InteractionMouseEventAction.ShowTooltip||l===H.InteractionMouseEventAction.None?(d.showTooltipModal(u,c),d.selectedInfo=c,d.context.pageContext.pageModel.triggerSelectionChange(d.context.store.id,c.selectedFieldsWithMeasure)):(d.setInteractionInfo(),d.interactionManager.handleClickAction(n,t,c.selectedFieldsWithMeasure).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&d.cleanCrossFilter()}))},d.onContextMenu=function(e){var t,a;e.preventDefault();var n=null===(t=d.selectedInfo)||void 0===t?void 0:t.selectedFields,i=null===(a=d.selectedInfo)||void 0===a?void 0:a.selectedFieldsWithMeasure;d.setInteractionInfo();var r={x:e.clientX,y:e.clientY};d.interactionManager.showContextMenuActions(r,n,i).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&d.cleanCrossFilter()})},d.reset=function(){d.tooltip.hide()},d.textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),d.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return d.cleanCrossFilter()}}),d.hostContainer.addChildren(d.textPanel,d.contextMenu),d}return D()(a,[{key:"didMount",value:function(){this.hostContainer.addEventListener("contextmenu",this.onContextMenu)}},{key:"willUnmount",value:function(){var e;null!==(e=this.interactionManager)&&void 0!==e&&e.destroy(),this.hostContainer.removeEventListener("contextmenu",this.onContextMenu)}},{key:"init",value:function(e){var t=this.context.store,a=t.getProperties().clickAction,n=t.getOptions().contextMenuActions;this.interactionManager=new qj({onKeepOrExclude:e.onKeepOrExclude,onFinishJumpTo:this.reset,contextMenu:this.contextMenu,clickAction:a,contextMenuActions:n}),this.onUiSortChanged=e.onUiSortChanged,this.onCrossFilter=e.onCrossFilter,this.table=new YJ,this.table.hide(),this.tooltip=new VU,this.hostContainer.addChildren(this.table,this.tooltip),this.table.useMockStyle(!0);var i=t.getProperties().noData;this.textPanel.setTextStyle(i.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(i)}},{key:"refresh",value:function(){var e,t,a,n,i,r;if(this.table){var o=this.context.store,s=!(null!==(e=this.data)&&void 0!==e&&e.aggregatedData);if((null===(t=this.pivotSettingHelper)||void 0===t?void 0:t.hasSetting())&&(s||!(null!==(r=null===(i=null===(n=null===(a=this.data)||void 0===a?void 0:a.aggregatedData)||void 0===n?void 0:n.matrix)||void 0===i?void 0:i.values)&&void 0!==r&&r.length)))this.textPanel.show(),this.table.hide();else{this.textPanel.hide(),this.table.show();var l=o.getProperties(),u=!d$.globalConfigManager.get("disableAutoScroll")&&!this.context.getEnv().focus&&l.autoScroll.enable,c=this.data,d=c.data,p=c.options,h=c.hiddenData;if(this.table.useMockStyle(s),!this.initialized)return this.table.init({onUiSortChanged:this.onUiSortChanged,onCellClick:this.onCellClick,onBlankClick:this.onBlankClick,onCrossFilter:this.onCrossFilter,options:p,data:d,hiddenPivotTableDatas:h,enableAutoScroll:u}),void(this.initialized=!0);this.table.setTableData(d,h,p,u),this.table.refresh()}}}},{key:"repaint",value:function(){var e;null!==(e=this.table)&&void 0!==e&&e.repaint()}},{key:"setAggData",value:function(e,t){this.pivotSettingHelper=e,this.data=t,this.scheduleRefresh()}},{key:"resize",value:function(){this.textPanel.setScale(this.context.pageContext.getScale()),this.refresh()}},{key:"cleanSelection",value:function(){this.tooltip.hide(),this.table.cleanSelection()}}]),a}(Tj),JJ={value_1_row_1_col_2:{data:[[{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"3000",originalValue:3e3,isImage:!1,isCustomData:!1,format:"0.00"}],[{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"3000",originalValue:3e3,isImage:!1,isCustomData:!1,format:"0.00"}],[{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:void 0,originalValue:void 0,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.ValueCell,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.SubTotalRow,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"3000",originalValue:3e3,isImage:!1,isCustomData:!1,format:"0.00"}],[{type:bY.GrandTotalColumn,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"2000",originalValue:2e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"3000",originalValue:3e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"2000",originalValue:2e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"3000",originalValue:3e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"1000",originalValue:1e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"2000",originalValue:2e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalColumn,value:"3000",originalValue:3e3,isImage:!1,isCustomData:!1,format:"0.00"},{type:bY.GrandTotalBoth,value:"9000",originalValue:9e3,isImage:!1,isCustomData:!1,format:"0.00"}]],rowLevel:1,columnLevel:2,rowHeaders:[{type:bY.RowHeader,value:"Items4",isImage:!1,next:[]},{type:bY.RowHeader,value:"Items5",isImage:!1,next:[]},{type:bY.RowHeader,value:"Items6",isImage:!1,next:[]},{type:bY.RowHeaderGrandTotal,value:"Grand Total",isImage:!1,next:[]}],columnHeaders:[{type:bY.ColumnHeader,value:"Items7",isImage:!1,next:[{type:bY.ColumnHeader,value:"abc1",isImage:!1,next:[]},{type:bY.ColumnHeader,value:"abc2",isImage:!1,next:[]},{type:bY.SubTotalRow,value:"Total",isImage:!1,next:[]}]},{type:bY.ColumnHeader,value:"Items8",isImage:!1,next:[{type:bY.ColumnHeader,value:"abc1",isImage:!1,next:[]},{type:bY.ColumnHeader,value:"abc2",isImage:!1,next:[]},{type:bY.SubTotalRow,value:"Total",isImage:!1,next:[]}]},{type:bY.ColumnHeader,value:"Items9",isImage:!1,next:[{type:bY.ColumnHeader,value:"abc1",isImage:!1,next:[]},{type:bY.ColumnHeader,value:"abc2",isImage:!1,next:[]},{type:bY.SubTotalRow,value:"Total",isImage:!1,next:[]}]},{type:bY.ColumnHeaderGrandTotal,value:"Grand Total",isImage:!1,next:[{type:bY.ColumnHeaderGrandTotal,value:"Data",isImage:!1,next:[]}]}],cornerHeaders:[{type:bY.CornerHeader,value:"Item3",isImage:!1,next:[]}],getCellInfo:function(){return{}},canEdit:function(){return!1},getResizedColumnIndex:function(){return[-1]},getValueFields:function(){return[]},getSortedOrdersInfo:function(){}}},XJ=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e))._attachRowNumber=function(e,t){var a={showRowNumber:t.showRowNumber,adjoin:t.rowNumberAdjoin,countRule:t.rowNumberCountRule,insertPosition:t.rowNumberPosition,alignment:2<arguments.length&&void 0!==arguments[2]?arguments[2]:H.TableAlignment.Center},n=new aq(e).attachRowNumber(a);return{data:n.data,datasetInfo:n.datasetInfo}},a._buildTableData=function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:H.TableAlignment.Default,r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],o=7<arguments.length&&void 0!==arguments[7]&&arguments[7];return{data:SJ(t,a,5<arguments.length?arguments[5]:void 0),datasetInfo:DJ(e,t.customData,a,n,i,r,o)}},a.context=t,a}return D()(i,[{key:"makeOptions",value:function(){var t,e,a=this.context,n=a.isUiSortEnabled,i=a.appViewState,r=this.context.property,o=this.context.scale,s=Xc(r,["whole.textStyle","colHeader.textStyle","firstDataStripe.textStyle","secondDataStripe.textStyle","corner.textStyle","rowHeader.textStyle","subTotals.textStyle","grandTotals.textStyle"],o),l=(t=s,e={subTotals:function(e){return Vq(e,t.whole)},grandTotals:function(e){return Vq(e,t.whole)}},ae.evolve(e,Eq(t))),u=i!==H.AppViewMode.Designer&&this.context.viewerType===H.DashboardViewerType.Standard&&r.enableUiFilter;return Object.assign(Object.assign({},l),{needAddEditAbility:i===H.AppViewMode.Designer,isUiSortEnabled:n,fixedColumnsWidthInfo:this.data.fixedColumnsWidthInfo,colHeaderVisible:i===H.AppViewMode.Designer||r.colHeaderVisible,enableUiFilter:u})}},{key:"makeTableData",value:function(e,t){var a,n=this.data.pivot,i=this.context.property,r=t.clone(),o=i.nullItemsString,s=i.emptyItemsString;return r.setOption({nullString:o,emptyString:s}),e?this._buildTableData(this.id,e,r,i.conditionalFormat,i.alignment,n.uiSortInfo,n.pivotFilters,null===(a=i.rowHeader)||void 0===a?void 0:a.showRowNumber):{data:JJ.value_1_row_1_col_2,datasetInfo:{usedRowDimensions:[],usedColumnDimensions:[],conditionalFormats:[],pivotId:"",customData:[],alignmentInfo:{pivotAlignment:[],globalAlignment:H.TableAlignment.Default},renderSettingInfo:[],pivotFilterColumns:Ho.uniq(Ho.flatten(n.pivotFilters.map(function(e){return e.columnNames})))}}}},{key:"makeHiddenTableData",value:function(e,t,a){var n=this.context.property;return t?function(a,n,e,t){var i=3<arguments.length&&void 0!==t?t:[],y=n.getHiddenDataRolesItems(),r=e.filter(function(e){var t,a=null===(t=e.extends)||void 0===t?void 0:t._type;return a===Br||a===Ur}),g=n.getUsedValueItems(void 0,{withoutHiddenDataRoles:!0});return r.reduce(function(e,t){var a=t.extends,n=a._type,i=a.targetField,r=t.condition.range,o=r.min,s=r.max,l=t.fieldIdentifier,u=g.findIndex(function(e){return Ho.isEqual(tl(e),l)}),c=g[u];if(-1===u||!c)return e;if(n===Br){if("object"===E()(o)){var d=y.find(function(e){return Ho.isEqual(tl(e),o)});e.push({setForField:c,hiddenField:d,replaceIdx:u})}if("object"===E()(s)){var p=y.find(function(e){return Ho.isEqual(tl(e),s)});e.push({setForField:c,hiddenField:p,replaceIdx:u})}}if(n===Ur){var h=y.find(function(e){return Ho.isEqual(tl(e),i)});e.push({setForField:c,hiddenField:h,replaceIdx:u})}return e},[]).map(function(e){var t=e.setForField,a=e.hiddenField,n=e.replaceIdx,i=g.findIndex(function(e){return Ho.isEqual(tl(a),tl(e))}),r=R()(g);if(-1<i){var o=r[n];r[n]=a,r[i]=o}else r[n]=a;return{values:r,setForField:t,hiddenField:a}}).map(function(e){var t=new VJ(a,n);return e.hiddenField&&t.buildByHiddenValueDataRole(a.matrix,e),t.sort(i),t})}(t,a,n.conditionalFormat,e):[]}},{key:"buildRes",value:function(e,t){var n=this,i=this.context.property,r=this.makeTableData(e,t),a=this.makeOptions(),o=r.data.getSortedOrdersInfo(),s=this._attachRowNumber(r,i.rowHeader,a.alignment),l=this.makeHiddenTableData(o,e,t);return l.length&&(l=l.reduce(function(e,t){var a=n._attachRowNumber(Object.assign(Object.assign({},r),{data:t}),i.rowHeader).data;return e.push(a),e},[])),{aggregatedData:e,data:s,options:a,hiddenData:l}}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),i}(eO),QJ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},ZJ=function(e){k()(n,e);var t=w()(n);function n(){var r;return I()(this,n),(r=t.apply(this,arguments)).outerClickHandler=function(e){var t=r.context.store,a=t.getDashboardConfig().crossFilterMode;jz(e,t.id,a)&&r.clearCrossFilter()},r.innerClickHandler=function(e){e===r.context.store.id&&r.clearCrossFilter()},r.onUiSortChanged=function(e){Object.keys(e).length?r.context.store.setUiSortInfo(e):r.context.store.setUiSortInfo({}),r.refresh()},r.onCrossFilter=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=r.context,n=a.store,i=a.pageContext;Object.keys(t).length?(e=Yz(t),!n.canScenarioTriggerCrossFilter()||n.setCrossFilter(e)&&i.pageModel.doCrossFilter(n.id)):r.clearCrossFilter();r.context.eventHub.fireSelectionChange(Vu(e),r.pivotSettingHelper.getTinyProfile())},r.clearCrossFilter=function(){var e=r.context,t=e.store,a=e.pageContext;t.clearCrossFilter()&&(r.container.cleanSelection(),a.pageModel.doCrossFilter(t.id))},r}return D()(n,[{key:"init",value:function(){var e=this,o=Object.create(null,{init:{get:function(){return C()(b()(n.prototype),"init",e)}}});return QJ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,i=XJ,a.isMergedSource()&&(i=c.MergedSourceDecorator(i)),this.scenarioModel=new i(a.id,{viewerType:H.DashboardViewerType.Lite,property:this.context.store.getProperties(),scale:this.context.pageContext.getScale(),isUiSortEnabled:!0,appViewState:H.AppViewMode.Viewer}),this.scenarioModel.on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),this.scenarioModel.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),this.scenarioModel.on(H.ScenarioEvent.Repaint,function(){r.container.repaint()}),n.pageModel.addScenario(this.scenarioModel,!0),this.scenarioTitle.init(a.getTitle(),n.getScale()),this.container=new qJ,this.bodyHost.addChildren(this.container),this.container.init({onUiSortChanged:this.onUiSortChanged,onCrossFilter:this.onCrossFilter,onKeepOrExclude:this.onKeepOrExclude}),n.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),n.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler);case 17:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){C()(b()(n.prototype),"willUnmount",this).call(this);var e=this.context.pageContext;e.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),e.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler)}},{key:"onAggChange",value:function(e,t){C()(b()(n.prototype),"onAggChange",this).call(this);var a=this.context.store.getProperties();t.setOption({nullString:a.nullItemsString,emptyString:a.emptyItemsString}),this.pivotSettingHelper=t,this.scenarioTitle.updateTitle(t),this.container.setAggData(t,e),this.container.reset(),this.actionBarContainer.update(t)}},{key:"refresh",value:function(){this.context.pageContext.pageModel.doScenarioRefresh(this.id)}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.reset(),this.container.resize()}}]),n}(JK),$J="=ERROR.TYPE(-1)",eX=function(e){k()(i,e);var n=w()(i);function i(e,t,a){var u;return I()(this,i),(u=n.call(this,e,t,a))._getEntireRowConditionalFormat=function(t,e){var a,n,i=["{{A1}}:{{A2}}","{A3}"].every(function(e){return-1<t.indexOf(e)}),r=-1<t.indexOf("{{A3}}"),o=t;if(i){var s={row:1,col:e+1},l={row:u._sheet.getRowCount(),col:e+1};o=VY(t,s.row,s.col,l.row,l.col,e+1)}else r&&(a=t,n=e+1,o=Object(Ho.template)(a,{interpolate:/{{([\s\S]+?)}}/g})({A3:n}));return o},u.setBorder=function(){sJ(0,-1,u._options,u._sheet);for(var e=1;e<u._options.pageCapacity;e+=2)aJ(e,-1,u._options,u._options.pageCapacity,u._sheet)},u._getMinimumAutoFitColumnWidth=function(e){var t,a=null===(t=Object.values(u._columnsInfo)[e])||void 0===t?void 0:t._renderSetting;return nu.assert(void 0!==a),a===H.ImageRenderSetting.ImageURL||a===H.ImageRenderSetting.ImageBinary?75:Number.MIN_SAFE_INTEGER},u._columnsInfo=[],u.mappingPivotSetting2ActualData={},u._dataBindingTable={},u}return D()(i,[{key:"init",value:function(){C()(b()(i.prototype),"init",this).call(this),this._spread&&(this.suspend(),this._sheet.unbind(Dl.a.Spread.Sheets.Events.CellDoubleClick),this._sheet.options.isProtected=!0,this._sheet.options.protectionOptions={allowResizeColumns:!0},this._sheet.selectionUnit(Dl.a.Spread.Sheets.SelectionUnit.row),this._sheet.selectionPolicy(Dl.a.Spread.Sheets.SelectionPolicy.single),this._theme=new gJ(this._options,this._sheet),this.setOptions(),this.resume())}},{key:"_convertComparisonConditionalFormat",value:function(e,t){function a(){var e=i._spread.getSheetCount(),t=new Dl.a.Spread.Sheets.Worksheet;return i._spread.addSheet(e,t),t.name("cf-".concat(t.name())),t}var n,i=this,r=1<arguments.length&&void 0!==t?t:[],o=MY(e),s=e.condition,l=s.value1,u=s.value2,c=s.operator,d=e.fieldIdentifier.columnName,p=e.appliedToRow,h=o.condition.formula,y=Bo.a.template(h,{interpolate:/{{([\s\S]+?)}}/g}),g=this._data.data.hiddenColumns,m=this._columnsInfo.findIndex(function(e){return e.name===d});"table_row_number"===d&&null!==(n=this._columnsInfo[0])&&void 0!==n&&n._attached&&(m=0);var f={};p&&(f.A3=m+1);var v=[mn,fn,vn,bn,Cn,Tn,Sn,Dn,kn,wn];if(c<dn||-1<[un,sn,ln,gn,xn,An].indexOf(c)||-1<v.indexOf(c)){var b,C,T,S,D=-1<(null===(b=o.condition)||void 0===b||null===(C=b.formula)||void 0===C?void 0:C.indexOf("{{sheet1}}")),k=-1<(null===(T=o.condition)||void 0===T||null===(S=T.formula)||void 0===S?void 0:S.indexOf("{{sheet2}}")),w=l&&g.find(function(e){return e.name===l.columnName})||u&&g.find(function(e){return e.name===u.columnName});if(D&&w){var x=l&&g.find(function(e){return e.name===l.columnName})||{},A=F()({},x,{colIndex:m}),I=a();kJ(I,A,this._data.data,$J),f=F()({},f,{sheet1:I.name()})}if(k&&w){var P=a(),_=g.find(function(e){return e.name===u.columnName})||{},M=F()({},_,{colIndex:m});kJ(P,M,this._data.data),f=F()({},f,{sheet2:P.name()})}}if(dn<=c&&c<=yn){var L=a(),R=F()({},g.find(function(e){return e.name===l.columnName}),{colIndex:m});kJ(L,R,this._data.data,$J);var V=r.filter(function(e){return e.col===m}).map(function(e){var t=e.row,a=e.col;return"INDIRECT(ADDRESS(".concat(t+1,",").concat(a+1,',1,FALSE,"').concat(L.name(),'"),FALSE)')}),N=this._getRangeFormulaA1Style(V,L);V.length&&(f=F()({},f,{range:'"'.concat(L.name(),'"!').concat(N)}))}if(Object.keys(f).length)try{o.condition.formula=y(f)}catch(e){o.condition.formula="=FALSE"}else{var E=function(e){return Bo.a.isObject(e)};(E(l)||E(u))&&(o.condition.formula="=FALSE")}return o}},{key:"_convertAnotherFieldConditionalFormat",value:function(e,t){var a,n=this,i=1<arguments.length&&void 0!==t?t:[],r=e.fieldIdentifier.columnName,o=e.appliedToRow,s=e.condition.ruleType,l=e.condition.targetField,u=_Y(e,i.length),c=u.condition.formula,d=Bo.a.template(c,{interpolate:/{{([\s\S]+?)}}/g}),p=this._data.data.hiddenColumns,h=this._columnsInfo.findIndex(function(e){return e.name===r});"table_row_number"===r&&null!==(a=this._columnsInfo[0])&&void 0!==a&&a._attached&&(h=0);var y,g,m=p.find(function(e){return e.name===l.columnName}),f=["{{A1}}:{{A2}}"].every(function(e){return-1<c.indexOf(e)}),v=f?"-":$J;if(s!==Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.duplicateRule&&s!==Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.uniqueRule&&s!==Dl.a.Spread.Sheets.ConditionalFormatting.RuleType.specificTextRule||(v=$J),this._isBlankCondition(e)&&(v=null),m){var b=F()({},m,{colIndex:h}),C=(y=n._spread.getSheetCount(),g=new Dl.a.Spread.Sheets.Worksheet,n._spread.addSheet(y,g),g.name("cf-".concat(g.name())),g);kJ(C,b,this._data.data,v);var T={sheet1:C.name()};if(f){var S={row:1,col:h+1},D={row:this._sheet.getRowCount(),col:h+1};u.condition.formula=VY(c,S.row,S.col,D.row,D.col,h+1,T)}else{T.A3=o?h+1:h;try{u.condition.formula=d(T)}catch(e){u.condition.formula="=FALSE"}}}return u}},{key:"_isBlankCondition",value:function(e){var t,a,n=0<arguments.length&&void 0!==e?e:{};return 3===(null===(t=n.condition)||void 0===t?void 0:t.ruleType)&&Jr.isBlankFormula(null===(a=n.condition)||void 0===a?void 0:a.formula)}},{key:"updateConditionalFormats",value:function(e){function b(e){return Bo.a.isNil(e)||e===a||e===n}var C=this,t=this._options,a=t.nullItemsString,n=t.emptyItemsString;this._clearConditionalFormat(),e.length&&e.forEach(function(n){var e,i=C._columnsInfo.findIndex(function(e){var t,a;return e.name===(null==n||null===(t=n.fieldIdentifier)||void 0===t?void 0:t.columnName)||e._attached===(null==n||null===(a=n.fieldIdentifier)||void 0===a?void 0:a.attached)}),r=C._isBlankCondition(n),t=n.appliedToRow,a=[],o=null===(e=n.condition)||void 0===e?void 0:e._type;if(t)Bo.a.range(0,C._sheet.getRowCount()).forEach(function(t){return Bo.a.range(0,C._getColCount()).forEach(function(e){a.push({row:t,col:e,rowCount:1,colCount:1})})}),a=a.reduce(function(e,t){var a=C._sheet.getValue(t.row,i);return b(a)&&!r||e.push(t),e},[]);else for(var s=0;s<C._columnsInfo.rowCount;s+=1){var l=C._sheet.getValue(s,i);b(l)&&!r||a.push({row:s,col:i,rowCount:1,colCount:1})}switch(o){case Br:var u=C._convertComparisonConditionalFormat(n,a);C.setConditionalFormat(F()({},u,{condition:F()({},u.condition,{formula:t?C._getEntireRowConditionalFormat(u.condition.formula,i):u.condition.formula})}),a);break;case Ur:var c=C._data.data.hiddenColumns,d=n.condition.targetField;if(c.find(function(e){return e.name===d.columnName})){var p=C._convertAnotherFieldConditionalFormat(n,a);C.setConditionalFormat(p,a)}break;default:var h=n,y=C._sheet;if(r||t){var g;h=_Y(F()({},n,{condition:F()({},n.condition,{_type:Ur})}),a.length);var m=C._spread.getSheetCount();y=new Dl.a.Spread.Sheets.Worksheet,C._spread.addSheet(m,y),y.name("cf-".concat(y.name()));for(var f=C._columnsInfo.find(function(e){var t,a;return e.name===(null==n||null===(t=n.fieldIdentifier)||void 0===t?void 0:t.columnName)||e._attached===(null==n||null===(a=n.fieldIdentifier)||void 0===a?void 0:a.attached)}),v=0;v<C._dataBindingTable.length;v+=1)y.setValue(v,i,C._dataBindingTable[v][null==f?void 0:f.name]);h.condition.formula=null===(g=h.condition.formula)||void 0===g?void 0:g.replace(/{{sheet1}}/g,y.name())}t?C.setConditionalFormat(F()({},h,{condition:F()({},h.condition,{formula:C._getEntireRowConditionalFormat(h.condition.formula,i)})}),a):C.setConditionalFormat(h,a)}})}},{key:"paint",value:function(){var l=this;if(0<this._dataBindingTable.length&&this._spread){var e,t=this._data.datasetInfo,u=t.columnSortInfos,c=t.alignmentInfo,d=dJ(null===(e=this._options.colHeader)||void 0===e?void 0:e.textStyle);this.suspend(),this._sheet.setDataSource(this._dataBindingTable),this._sheet.bindColumns(this._columnsInfo),-1<this._oldSelectionRowIdx&&(this._sheet.setSelection(this._oldSelectionRowIdx,-1,1,1),this._sheet.showRow(this._oldSelectionRowIdx,1),this._oldSelectionRowIdx=void 0);var p=this._data.datasetInfo.pivotFilterColumns;this._data.datasetInfo.columns.forEach(function(t,e){var a,n;l._sheet.setStyleName(0,e,Kq.ColHeader,Dl.a.Spread.Sheets.SheetArea.colHeader);var i=-1<p.indexOf(t.name)?gq.Edited:gq.New;t._attached?l._sheet.setCellType(0,e,new Tq(d),Dl.a.Spread.Sheets.SheetArea.colHeader):l._sheet.setCellType(0,e,new Cq(d,i,l._options.enableUiFilter),Dl.a.Spread.Sheets.SheetArea.colHeader);var r=l._sheet.getStyle(-1,e)||new Dl.a.Spread.Sheets.Style,o=c.pivotAlignment.filter(function(e){return e}).find(function(e){return e.name===t.name&&"columns"===e.rolePath});r.hAlign=l.getAlignmentInfo(o&&o.value,c.globalAlignment,t),l._sheet.setStyle(-1,e,r);var s={sortStatus:null!==(a=null==u||null===(n=u[t.name])||void 0===n?void 0:n.sortOrder)&&void 0!==a?a:Un};l._sheet.setTag(0,e,s,Dl.a.Spread.Sheets.SheetArea.colHeader)});var a=this._data.data.columns;this._sheet.setColumnCount(a.length);for(var n=0;n<this._columnsInfo.rowCount;++n){var i=Kq.Whole,r=this._options.whole.border.color;this._options.useAlternateRowStyle&&(r=n%2==0?(i=Kq.FirstDataStripe,this._options.firstDataStripe.border.color):(i=Kq.SecondDataStripe,this._options.secondDataStripe.border.color));for(var o=0;o<a.length;++o)if(this._sheet.setStyleName(n,o,i),0===o&&(r?this._sheet.getCell(n,o).borderLeft(new Dl.a.Spread.Sheets.LineBorder(r,Dl.a.Spread.Sheets.LineStyle.double)):this._sheet.getCell(n,o).borderLeft(new Dl.a.Spread.Sheets.LineBorder(r,Dl.a.Spread.Sheets.LineStyle.empty))),0===n){var s=Dl.a.Spread.Sheets.SheetArea.colHeader,h=this._options.colHeader.border.color?Dl.a.Spread.Sheets.LineStyle.double:Dl.a.Spread.Sheets.LineStyle.empty;0===o&&this._sheet.getCell(n,o,s).borderLeft(new Dl.a.Spread.Sheets.LineBorder(this._options.colHeader.border.color,h)),this._sheet.getCell(n,o,s).borderTop(new Dl.a.Spread.Sheets.LineBorder(this._options.colHeader.border.color,h))}}this.setBorder();try{this.updateConditionalFormats(this._data.datasetInfo.conditionalFormats)}catch(e){nu.error(e)}this.resize(),this.updateStyle(),this.restoreScrollPosition(),this.resume()}}},{key:"_paintImageCells",value:function(){var s=this;this._columnsInfo.forEach(function(i,r){var o=i.name;s._dataBindingTable.forEach(function(e,t){var a=e[o];if(i._renderSetting!==H.ImageRenderSetting.Text)a&&s.renderImage2Cell({row:t,col:r,renderSetting:i._renderSetting,value:a});else{var n=s._sheet.getStyle(t,r);n&&n.backgroundImage&&(n.backgroundImage="",s._sheet.setStyle(t,r,n))}})})}},{key:"update",value:function(s){var l=this;if(s&&this._spread){this._data=s,this.suspend(),this._columnsInfo=[];var e=this._data.datasetInfo,t=e.columns,a=e.tooltip,u=e.renderSettingInfo,r=[].concat(R()(t),R()(a)).map(function(a,t){var e,n="number"===a.dataType,i=a.format;n&&(i=Iu(a.format,a.displayUnit,s.data.data.map(function(e){return e[t]})));var r=(null===(e=u.find(function(e){return e.name===a.name&&t===e.index&&"columns"===e.rolePath}))||void 0===e?void 0:e.value)||H.ImageRenderSetting.Text,o={displayName:a.display,name:a.name,formatter:{format:function(e){return ku(i,e)}},isMeasure:Jr.isMeasure(a),value:function(e){if(r!==H.ImageRenderSetting.Text)return"";var t=e[a.name];return null==t||""===t?wu("General",t,{nullString:l._options.nullItemsString,emptyString:l._options.emptyItemsString}):t},_renderSetting:r,_attached:!!a._attached};return l._columnsInfo[t]=o,a}),n=this._sheet.getSelections()[0],i="";n&&-1<n.row&&(i=JSON.stringify(this._dataBindingTable[n.row]),this.clearSelection());var o=[].concat(R()(this._data.data.columns),R()(this._data.data.tooltip));r.forEach(function(t){var e=o.findIndex(function(e){return(null==e?void 0:e.attributeId)===t.name});void 0!==e&&(l.mappingPivotSetting2ActualData[t.name]=e)});var c=this._data.data.data;this._dataBindingTable=c.map(function(n){var i={};return r.forEach(function(e){var t=e.name,a=l.mappingPivotSetting2ActualData[e.name];i[t]=n[a]}),i}),n&&(this._oldSelectionRowIdx=this._dataBindingTable.findIndex(function(e){return JSON.stringify(e)===i})),this._columnsInfo.rowCount=c.length,this.scrollToFirstRow()}this.resume()}},{key:"refresh",value:function(e){this._spread&&(e===this._data&&!Bo.a.isEmpty(this.mappingPivotSetting2ActualData)||(this.update(e),this._updateRowHeight()),this.paint(),this.setStyle())}},{key:"getPageCount",value:function(){var e=1;if(this._data){var t=this._options,a=t.pageCapacity,n=t.inMobile;this._showPaginate=0<a&&a<this._data.data.totalRowCount&&!n,this._showPaginate&&(e=Math.ceil(this._data.totalRowCount/this._options.pageCapacity)),1===e&&(this._showPaginate=!1)}return e}},{key:"setRowHeight",value:function(){for(var e=this._sheet.getRowCount(),t=this._columnsInfo.some(function(e){return e._renderSetting!==H.ImageRenderSetting.Text}),a=0;a<e;a++){var n=t?Math.max(75,this._rowHeightOfViewport):this._rowHeightOfViewport;this._sheet.setRowHeight(a,n,Dl.a.Spread.Sheets.SheetArea.viewport)}}},{key:"setStyle",value:function(){var e=this._sheet.getDefaultStyle(),t=this._sheet.getDefaultStyle(Dl.a.Spread.Sheets.SheetArea.colHeader);e.vAlign=Dl.a.Spread.Sheets.VerticalAlign.center,e.textIndent=1,t.vAlign=Dl.a.Spread.Sheets.VerticalAlign.center,this._sheet.setDefaultStyle(e,Dl.a.Spread.Sheets.SheetArea.viewport),this._sheet.setDefaultStyle(t,Dl.a.Spread.Sheets.SheetArea.colHeader),this._paintImageCells(),this.getPageCount()}},{key:"mapColDetailsToIndex",value:function(t){return this._columnsInfo&&this._columnsInfo.findIndex(function(e){return e.name===t.columns[0]})}},{key:"_getColCount",value:function(){return this._data&&this._data.data.columns.length||0}},{key:"resize",value:function(){var e=this._options.fixedColumnsWidthInfo;this._columnsInfo.some(function(e){return e._renderSetting!==H.ImageRenderSetting.Text})&&(this._rowHeightOfViewport=Math.max(this._rowHeightOfViewport,75)),null!=e&&e.length?(this._applyColumnsWidth(),this._autoFitRow()):this._doAutoFit(),this._updateScrollbarInfo(),this._setScrollbar(this._options.scrollbarMode,this._mouseEnter)}},{key:"_applyColumnsWidth",value:function(){var a=this;if(this.layoutWidth=this._getScenarioLayoutWidth(),void 0===this.layoutScale&&(this.layoutScale=1),0<this._options.fixedColumnsWidthInfo.length){var n=this.getDefaultFixedColumnInfo();this._options.fixedColumnsWidthInfo.forEach(function(e){var t=a.mapColDetailsToIndex(e.details);-1<t&&(n[t]=xq(e,a.layoutWidth))}),this.setColumnWidthAfterResized(this._tableWidth,n)}}},{key:"setOptions",value:function(e){e&&(this._options=F()({},this._options,{},e),this._theme.update(this._options),this._options.scrollByPixel!==this._spread.options.scrollByPixel&&(this._spread.options.scrollByPixel=this._options.scrollByPixel),this._updateRowHeight())}},{key:"dispose",value:function(){C()(b()(i.prototype),"dispose",this).call(this),this._columnsInfo=null,this.mappingPivotSetting2ActualData=null,this._dataBindingTable=null,this._rowHeightChangeInfo=null}},{key:"getMapOfPivotSetting2Data",value:function(){return this.mappingPivotSetting2ActualData}},{key:"getColHeaderInfo",value:function(e){var t=this._columnsInfo&&this._columnsInfo[e],a={columns:[],key:""};return t&&(a.columns[0]=t.name,a.key=t.name,t._attached&&(t.attached=!0)),a}},{key:"getCellInfo",value:function(e,t){var a=this._columnsInfo[t],n=a.name,i=a.isMeasure,r=a._renderSetting!==H.ImageRenderSetting.Text,o=a.attached;return{columnName:n,entry:this._dataBindingTable[e][n],isMeasure:i,isImage:r,attached:o}}}]),i}(yJ),tX=function(){function a(e){var b=this;I()(this,a),this._dataTableInstance=null,this.workBook=null,this.workSheet=null,this._autoPageTurningTimer=null,this.dirtyState={data:!1,options:!1,datasetInfo:!1,enableAutoScroll:!1},this.resetDirtyState=function(){b.dirtyState={data:!1,options:!1,datasetInfo:!1,enableAutoScroll:!1}},this.sortListener=function(e){var t=e.columnIdIndex,a=e.sortOrder;if(b.allowSorting){var n=b.onUiSortChanged,i=b.data,r=b.datasetInfo,o=b._dataTableInstance.getMapOfPivotSetting2Data(),s=r.columns[t].name;if(i){var l=i.columns[o[s]],u=r.columnSortInfos;u=null===a?Bo.a.omit(u,[l.attributeId]):Object.assign(Object.assign({},u),V()({},l.attributeId,{sortOrder:a})),n(Object.assign({},u))}}},this.getPageCount=function(){var e=b.data,t=b.options;return a.getPageCount(e,t)},this._disableAutoScroll=function(){b.cancelAutoScroll&&(b.cancelAutoScroll(),b._autoPageTurningTimer=clearTimeout(b._autoPageTurningTimer))},this.onMouseLeave=function(){var e;if(b.enableAutoScroll){var t=b.options;null!==(e=b.cancelAutoScroll)&&void 0!==e&&e.call(b),b._dataTableInstance.hasSelections()?b.cancelAutoScroll=null:b.cancelAutoScroll=PY(IY(t.scrollByPixel,t.autoScroll.speed),b,{sheet:b.workSheet,frozeRow:!1,scrollByPixel:t.scrollByPixel,reachEndCallback:function(){b._endRowCallback(b.getPageCount())}})}},this.onColumnWidthChanging=function(e,t){var a=t.colList,n=t.sheet;b._columnWidthBeforeChange=n.getColumnWidth(a[0]);var i=a[0]===n.getColumnCount()-1;!b.options.expand&&i&&(t.cancel=!0)},this.onColumnWidthChanged=function(e,t){var a,n=t.colList,i=t.sheet,r=n[0],o=Rq(r,b._columnWidthBeforeChange,b._dataTableInstance.autoFitColumnsInfo,b._dataTableInstance,i,b.options.expand);null!==(a=b.columnWidthChanged)&&void 0!==a&&a.call(b,o,b._dataTableInstance.autoFitColumnsInfo)},this.getSelectedFields=function(p,h){var e=b.datasetInfo,y=e.columns,n=e.tooltip;return[b.workSheet.getSelections().reduce(function(e,t){for(var a=0;a<y.length+n.length;a+=1)e.push({row:t.row,col:a});return e},[]).reduce(function(e,t){var a=t.row,n=t.col,i=b._dataTableInstance.getCellInfo(a,n),r=i.columnName,o=i.entry,s=i.isMeasure,l=i.isImage,u=b._dataTableInstance.queryInteraction(i),c=u.crossFilter,d=u.tooltip;if(c||d){if(!h&&n>y.length)return e;s&&p||e.push({originalValue:o,value:o,field:r,isImage:l})}return e},[])]},this._clickOnColHeader=function(e){var t,a,n=e.row,i=e.col,r=e.sheetArea,o=e.sheet;if(r===Dl.a.Spread.Sheets.SheetArea.colHeader){var s=b._dataTableInstance.getCellInfo(n,i),l=b._dataTableInstance.queryInteraction(s).uiSort,u=o.getCellType(n,i,r);if(!l||s.isImage)return;if(u.isHitOnUiFilter()){var c=u.getRect();if(c){var d=b._dataTableInstance._getFilterDialogPosition(c);null!==(t=b.showUiFilterDialog)&&void 0!==t&&t.call(b,d,s.columnName)}return}var p=b.datasetInfo,h=p.columns[i],y=p.columnSortInfos,g=y&&y[h.name]?(y[h.name].sortOrder+1)%3:zn;g===Un&&(g=null);var m=b.workSheet.getViewportLeftColumn(1);b.sortListener({columnIdIndex:i,sortOrder:g}),b.workSheet.showColumn(m,Dl.a.Spread.Sheets.HorizontalPosition.left)}null!==(a=b.onClickSpread)&&void 0!==a&&a.call(b)},this._onBlankClick=function(){b.clearSelection(),b.onBlankClick(),b.enableTriggerCrossFilter&&b.onCrossFilter({})},this._onCellClick=function(e,t){var a=t.row,n=t.col,i=t.sheetArea;void 0!==a&&void 0!==n||b._onBlankClick();var r=b.datasetInfo,o=r.columns,s=r.tooltip;if(i!==Dl.a.Spread.Sheets.SheetArea.colHeader){for(var l=[],u=0;u<o.length+s.length;u+=1){var c=b._dataTableInstance.getCellInfo(a,u),d=c.columnName,p=c.entry,h=c.isImage;l.push({columnName:d,value:p,isImage:h})}l=Bo.a.uniqWith(l,Bo.a.isEqual);var y=Bo.a.uniqWith(b.getSelectedFields(!0,!1),Bo.a.isEqual),g=Bo.a.uniqWith(b.getSelectedFields(!1,!0),Bo.a.isEqual),m=b._host.getBoundingClientRect(),f=b.workSheet.getCellRect(a,n),v={x:m.left+f.x+f.width/2,y:m.top+Math.max(f.y,0)};b.onCellClickHandler(l,y,g,v)}else b._clickOnColHeader(t)},this._endRowCallback=function(e){if(b.workSheet){var t=b.reachEndCallback;b.cancelAutoScroll&&b.options.autoScroll.autoPageTurning&&(b.cancelAutoScroll(),b.cancelAutoScroll=null),b._autoPageTurningTimer||(b._autoPageTurningTimer=setTimeout(function(){t(e),b._autoPageTurningTimer=null},1040)),b.options.autoScroll.autoPageTurning||b.workSheet.showRow(0)}},this._startAutoScroll=function(){var e;null!==(e=b.cancelAutoScroll)&&void 0!==e&&e.call(b),b.cancelAutoScroll=PY(IY(b.options.scrollByPixel,b.options.autoScroll.speed),b,{sheet:b.workSheet,frozeRow:!1,scrollByPixel:b.options.scrollByPixel,reachEndCallback:function(){b._endRowCallback(b.getPageCount())}}),b._dataTableInstance.registerEventHandlers({mouseleave:b.onMouseLeave,mousemove:b._disableAutoScroll})},this._removeAutoScroll=function(){b._dataTableInstance.unregisterEventHandlers(["mouseleave","mousemove"]),b.cancelAutoScroll&&b.cancelAutoScroll()},this._host=e.dom,this.onUiSortChanged=e.onUiSortChanged,this.onCellClickHandler=e.onCellClick,this.onBlankClick=e.onBlankClick,this.columnWidthChanged=e.onColumnWidthChanged,this.onCrossFilter=e.onCrossFilter,this.showUiFilterDialog=e.onShowUiFilterDialog,this.reachEndCallback=e.onReachEnd,this.onClickSpread=e.onClickSpread,this.setAllowSorting(!!e.allowSorting),this.setData(e.data),this.setOptions(e.options),this.setDatasetInfo(e.datasetInfo),this.setEnableAutoScroll(e.enableAutoScroll),this.setEnableTriggerCrossFilter(e.enableTriggerCrossFilter),this.init()}return D()(a,[{key:"init",value:function(){var e,r=this,t=this.data,a=this.datasetInfo,n=this.options,i=this.enableAutoScroll;this._dataTableInstance=new eX(this._host,{data:t,datasetInfo:a},n),this._dataTableInstance.onBlankClicked(this._onBlankClick),this.workBook=this._dataTableInstance.getSpread(),this.workSheet=this._dataTableInstance.getSheet();var o=(e={},V()(e,Dl.a.Spread.Sheets.Events.ColumnWidthChanged,this.onColumnWidthChanged),V()(e,Dl.a.Spread.Sheets.Events.ColumnWidthChanging,this.onColumnWidthChanging),V()(e,Dl.a.Spread.Sheets.Events.SelectionChanging,function(e,t){if(t.newSelections.find(function(e){return-1===e.row}))if(t.oldSelections.length){var a=t.oldSelections[0],n=a.row,i=a.col;-1<n?t.sheet.setSelection(n,i,1,1):r.clearSelection()}else r.clearSelection()}),V()(e,Dl.a.Spread.Sheets.Events.CellClick,this._onCellClick),e);this.enableTriggerCrossFilter&&(o=Object.assign(Object.assign({},o),V()({},Dl.a.Spread.Sheets.Events.SelectionChanged,function(e,t){if(t.newSelections.find(function(e){return-1!==e.row})){var a=[r.getSelectedFields(!0)[0].filter(function(e){return!e.isImage})];r.onCrossFilter({selectedFields:a})}}))),i?this._startAutoScroll():this.cancelAutoScroll&&this._removeAutoScroll(),this._dataTableInstance.registerEventHandlers({click:function(e){return e.stopPropagation()}}),this._dataTableInstance.addHandlersToWorksheet(o),this._dataTableInstance.refresh({data:t,datasetInfo:a}),this.resetDirtyState()}},{key:"refresh",value:function(){var e=this,t=this.data,a=this.options,n=this.enableAutoScroll,i=this.dirtyState,r=this.datasetInfo,o=i.data||i.options||i.datasetInfo;if((i.data||i.datasetInfo)&&this._dataTableInstance.update({datasetInfo:r,data:t}),i.options&&(i.enableAutoScroll&&(n?this._startAutoScroll():this._removeAutoScroll()),this._dataTableInstance.setOptions(a)),i.data&&n&&!this.cancelAutoScroll&&a.autoScroll.autoPageTurning){var s=IY(a.scrollByPixel,a.autoScroll.speed),l={sheet:this.workSheet,frozeRow:!1,scrollByPixel:a.scrollByPixel,reachEndCallback:function(){e._endRowCallback(e.getPageCount())}};this.cancelAutoScroll=PY(s,this,l)}o&&(this._dataTableInstance.refresh(),n&&!this._dataTableInstance.hasSelections()&&this._dataTableInstance.scrollToFirstRow()),this.dirtyState={data:!1,options:!1,datasetInfo:!1,enableAutoScroll:!1}}},{key:"setOptions",value:function(e){this.dirtyState.options=!0,this.options=e}},{key:"setData",value:function(e){this.data=e,this.dirtyState.data=!0}},{key:"setDatasetInfo",value:function(e){this.datasetInfo=e,this.dirtyState.datasetInfo=!0}},{key:"setEnableAutoScroll",value:function(e){this.enableAutoScroll!==e&&(this.dirtyState.enableAutoScroll=!0,this.enableAutoScroll=e)}},{key:"setEnableTriggerCrossFilter",value:function(e){this.enableTriggerCrossFilter=e}},{key:"setAllowSorting",value:function(e){this.allowSorting=e}},{key:"suspendScroll",value:function(){this.enableAutoScroll&&(this._removeAutoScroll(),this._dataTableInstance.scrollToFirstRow())}},{key:"resumeScroll",value:function(){this.enableAutoScroll&&this._startAutoScroll()}},{key:"clearSelection",value:function(){this._dataTableInstance.clearSelection()}},{key:"cleanCrossFilter",value:function(){this._dataTableInstance.hasSelections()&&(this.clearSelection(),this.onMouseLeave(),this.onBlankClick())}},{key:"destroy",value:function(){this.cancelAutoScroll&&this.cancelAutoScroll(),this.workSheet=null,this._dataTableInstance.dispose()}},{key:"resize",value:function(){this._dataTableInstance.suspend(),this._dataTableInstance.resize(),this.workBook.refresh(),this._dataTableInstance.resume()}},{key:"repaint",value:function(){this._dataTableInstance.repaint()}}],[{key:"getPageCount",value:function(e,t){var a=1;e&&0<t.pageCapacity&&t.pageCapacity<e.totalRowCount&&(a=Math.ceil(e.totalRowCount/t.pageCapacity));return a}}]),a}(),aX=function(e){k()(i,e);var n=w()(i);function i(){var e;I()(this,i),(e=n.call(this)).isMock=!1,e.showPagination=function(){};var t=new hU({tag:"div",className:"layout-full-flex"}),a=new hU({tag:"div",className:"wyn-chart-overlay"});return e.addChildren(t,a),e.host=t,e.mockOverlay=a,e}return D()(i,[{key:"init",value:function(e){var n=this,t=e.onUiSortChanged,a=e.onCellClick,i=e.onBlankClick,r=e.onCrossFilter,o=e.reachEndCallback,s=e.onPageChange,l=e.options,u=e.data,c=e.datasetInfo,d=e.showPagination,p=e.allowSorting,h=e.enableAutoScroll;this.showPagination=d,this.instance=new tX({dom:this.host.getRef(),options:l,data:u,datasetInfo:c,onUiSortChanged:t,allowSorting:p,onCellClick:a,onBlankClick:i,onCrossFilter:r,enableTriggerCrossFilter:!0,enableAutoScroll:h,onReachEnd:o,onClickSpread:function(){return n.pagination.blur()},onColumnWidthChanged:function(e,t){var a=CJ(e,t);n.context.store.setAttribute("fixedColumnsWidthInfo",a)}}),this.pagination=new zU({className:"wyn-data-table-pagination",onChange:function(e){return s(e-1)}}),this.addChildren(this.pagination)}},{key:"willUnmount",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.destroy()}},{key:"cleanSelection",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.cleanCrossFilter()}},{key:"setTableData",value:function(e,t,a,n){var i,r,o,s,l;null!==(i=this.instance)&&void 0!==i&&i.setData(e),null!==(r=this.instance)&&void 0!==r&&r.setOptions(t),null!==(o=this.instance)&&void 0!==o&&o.setEnableAutoScroll(a),null!==(s=this.instance)&&void 0!==s&&s.setDatasetInfo(n);var u=tX.getPageCount(e,t);1<u?(this.pagination.show(),this.pagination.setValue(t.pageNumber+1,u),this.showPagination(!0)):(this.pagination.hide(),this.showPagination(!1)),null!==(l=this.instance)&&void 0!==l&&l.resize()}},{key:"refresh",value:function(){var e;this.context.eventHub.fireRender(),null!==(e=this.instance)&&void 0!==e&&e.refresh(),this.context.eventHub.fireRendered()}},{key:"repaint",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.repaint()}},{key:"resize",value:function(e){var t,a;null!==(t=this.instance)&&void 0!==t&&t.resize(),null!==(a=this.instance)&&void 0!==a&&a.setOptions(e),this.refresh()}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}),e?this.pagination.disable():this.pagination.enable())}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){var e;null!==(e=this.pagination)&&void 0!==e&&e.hide(),this.host.setStyle({display:"none"})}}]),i}(mU),nX=function(e){k()(a,e);var t=w()(a);function a(){var c;return I()(this,a),(c=t.call(this)).activePageIndex=0,c.initialized=!1,c.autoPageTurning=function(e){var t=c.context.store.getProperties(),a=RB()(c),n=a.onActivePageChange,i=(a.data||{}).aggregatedData,r=c.activePageIndex;t.autoScroll.autoPageTurning&&((r+1===e||i.totalRowCount<t.pageCapacity)&&(r=-1),n((r+1)%e))},c.showTooltipModal=function(e,t){if(e.show){var a={position:e.position,fields:t.clickSelectedFields.reduce(function(e,t){return t.isImage||e.push({label:t.columnName,value:t.columnValue}),e},[]),selected:t.selectedFieldsWithMeasure,hideSelectedCount:!0};c.tooltip.show(a)}},c.onBlankClick=function(){c.selectedInfo=null,c.tooltip.hide(),c.context.pageContext.pageModel.triggerSelectionChange(c.context.store.id)},c.setInteractionInfo=function(){var e=c.context,t=e.store,a=e.pageContext;c.interactionManager.setState({store:t,pageContext:a,pivotSettingHelper:c.pivotSettingHelper})},c.cleanCrossFilter=function(){c.selectedInfo=null,c.cleanSelection(),c.onCrossFilter()},c.onCellClick=function(e,t,a,n){var i=RB()(c).pivotSettingHelper,r=zY(i),o=KY(r,e.filter(function(e){return!e.isImage})),s=c.context.store.getProperties().clickAction,l={position:n,show:s===H.InteractionMouseEventAction.ShowTooltip&&0<t.length},u={clickSelectedFields:o,selectedFields:t,selectedFieldsWithMeasure:jY(i,a)};s===H.InteractionMouseEventAction.ShowTooltip||s===H.InteractionMouseEventAction.None?(c.showTooltipModal(l,u),c.selectedInfo=u,c.context.pageContext.pageModel.triggerSelectionChange(c.context.store.id,u.selectedFieldsWithMeasure)):(c.setInteractionInfo(),c.interactionManager.handleClickAction(n,t,u.selectedFieldsWithMeasure).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&c.cleanCrossFilter()}))},c.onContextMenu=function(e){var t,a;e.preventDefault();var n=null===(t=c.selectedInfo)||void 0===t?void 0:t.selectedFields,i=null===(a=c.selectedInfo)||void 0===a?void 0:a.selectedFieldsWithMeasure;c.setInteractionInfo();var r={x:e.clientX,y:e.clientY};c.interactionManager.showContextMenuActions(r,n,i).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&c.cleanCrossFilter()})},c.reset=function(){c.tooltip.hide()},c._showPagination=function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0]?c.hostContainer.addClassName("wyn-pb-10"):c.hostContainer.removeClassName("wyn-pb-10")},c.textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),c.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return c.cleanCrossFilter()}}),c.hostContainer.addChildren(c.textPanel,c.contextMenu),c._showPagination(),c}return D()(a,[{key:"didMount",value:function(){this.hostContainer.addEventListener("contextmenu",this.onContextMenu)}},{key:"willUnmount",value:function(){var e;null!==(e=this.interactionManager)&&void 0!==e&&e.destroy(),this.hostContainer.removeEventListener("contextmenu",this.onContextMenu)}},{key:"init",value:function(e){var t=this.context.store,a=t.getProperties().clickAction,n=t.getOptions().contextMenuActions;this.interactionManager=new qj({onFinishJumpTo:this.reset,contextMenu:this.contextMenu,clickAction:a,contextMenuActions:n}),this.onCrossFilter=e.onCrossFilter,this.onUiSortChanged=e.onUiSortChanged,this.allowSorting=this.context.store.getProperties().allowSorting,this.table=new aX,this.table.hide(),this.hostContainer.addChildren(this.table),this.onActivePageChange=e.onActivePageChange,this.tooltip=new VU,this.hostContainer.addChildren(this.tooltip);var i=t.getProperties().noData;this.textPanel.setTextStyle(i.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(i)}},{key:"refresh",value:function(){if(this.table){var e=this.context.store,t=this.data,a=this.pivotSettingHelper,n=t||{},i=n.aggregatedData,r=n.config,o=r.tableData,s=r.datasetInfo,l=r.options,u=this._hasValidData(i),c=!i;if(a.hasSetting()&&!u)this.textPanel.show(),this.table.hide();else{this.textPanel.hide(),this.table.show();var d=e.getProperties(),p=!d$.globalConfigManager.get("disableAutoScroll")&&!this.context.getEnv().focus&&d.autoScroll.enable;if(!this.initialized)return this.table.init({onUiSortChanged:this.onUiSortChanged,allowSorting:this.allowSorting,onCellClick:this.onCellClick,onBlankClick:this.onBlankClick,onCrossFilter:this.onCrossFilter,options:l,data:o,datasetInfo:s,enableAutoScroll:p,reachEndCallback:this.autoPageTurning,onPageChange:this.onActivePageChange,showPagination:this._showPagination}),this.table.useMockStyle(c),this.hostContainer.setStyle(l.whole.textStyle),this.table.setTableData(o,l,p,s),void(this.initialized=!0);this.table.useMockStyle(c),this.table.setTableData(o,l,p,s),this.table.refresh()}}}},{key:"repaint",value:function(){var e;null!==(e=this.table)&&void 0!==e&&e.repaint()}},{key:"_hasValidData",value:function(e){return e&&e.data&&e.data.length}},{key:"makeOptions",value:function(){var e=this.activePageIndex,t=this.context,a=this.context.store.getProperties(),n=this.context.pageContext.getScale(),i=Xc(a,["whole.textStyle","colHeader.textStyle","firstDataStripe.textStyle","secondDataStripe.textStyle"],n),r=Nq(i);return Object.assign(Object.assign({inMobile:!1},r),{pageNumber:e,fixedColumnsWidthInfo:t.store.getAttribute("fixedColumnsWidthInfo"),colHeaderVisible:a.colHeaderVisible,enableUiFilter:!1})}},{key:"setAggData",value:function(e,t,a){this.activePageIndex=a,this.pivotSettingHelper=e,this.data=t,this.scheduleRefresh()}},{key:"resize",value:function(){this.textPanel.setScale(this.context.pageContext.getScale());var e=this.makeOptions();this.hostContainer.setStyle(e.whole.textStyle),this.table.resize(e)}},{key:"cleanSelection",value:function(){this.table.cleanSelection()}}]),a}(Tj),iX=Bo.a.memoize(function(){for(var e={columns:[],tooltip:[],data:[],totalRowCount:100,hiddenColumns:[]},t=0;t<5;t+=1)e.columns.push({columnId:"Item".concat(t+1),subColumnType:0,attributeId:"Item".concat(t+1)});for(var a=0;a<e.totalRowCount;a+=1)e.data.push([" "," "," "," "," "]);return e}),rX=Bo.a.memoize(function(e){var t=[{display:"Item1",name:"Item1",dataType:"number",format:"General",formatValue:function(e){return e}},{display:"Item2",name:"Item2",dataType:"number",format:"General",formatValue:function(e){return e}},{display:"Item3",name:"Item3",dataType:"number",format:"General",formatValue:function(e){return e}},{display:"Item4",name:"Item4",dataType:"number",format:"General",formatValue:function(e){return e}},{display:"Item5",name:"Item5",dataType:"number",format:"General",formatValue:function(e){return e}}];return{tooltip:[],columns:t,columnSortInfo:!1,conditionalFormats:[],pivotSortInfo:{},validPivotSetting:t,pivotId:e,datasetProfile:{},alignmentInfo:{pivotAlignment:["Default","Default","Default","Default","Default"],globalAlignment:"Default"},renderSettingInfo:[{name:"Item1",index:0,value:0,rolePath:"columns"},{name:"Item2",index:1,value:0,rolePath:"columns"},{name:"Item3",index:2,value:0,rolePath:"columns"},{name:"Item4",index:3,value:0,rolePath:"columns"},{name:"Item5",index:4,value:0,rolePath:"columns"}],pivotFilterColumns:[]}}),oX=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},sX=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e))._attachRowNumber=function(e,t,a){var n=a.alignment,i=a.pageCapacity,r=a.whole,o=r.showRowNumber,s=r.rowNumberPosition,l=r.rowNumberCountRule,u=r.rowNumberAdjoin;if(o){var c={showRowNumber:o,adjoin:u,insertPosition:s,countRule:l,pageCapacity:i,activePageIndex:t,alignment:n},d=new iq(e).attachRowNumber(c);return{tableData:d.tableData,datasetInfo:d.datasetInfo}}return e},a.context=t,a}return D()(i,[{key:"_getDatasetInfo",value:function(e){var t,a=this.context.property,n=this.data.pivot,i=e.getUsedDimensionItems(["columns"]),r=e.getUsedDimensionItems(["tooltip"]),o=e.getPivotSetting({withoutInvalid:!0,valuesOnly:!0});return{tooltip:r,columns:i,columnSortInfos:n.uiSortInfo,conditionalFormats:OY(e,"columns",a.conditionalFormat,{showRowNumber:null===(t=a.whole)||void 0===t?void 0:t.showRowNumber}).conditionFormats,pivotSortInfo:n.uiSortInfo,validPivotSetting:o,pivotId:this.id,datasetProfile:e.getDatasetProfile(),alignmentInfo:BY(e,a.alignment,["columns"]),renderSettingInfo:UY(e,["columns"]),pivotFilterColumns:Ho.uniq(Ho.flatten(n.pivotFilters.map(function(e){return e.columnNames})))}}},{key:"_getTableData",value:function(e,t){var n=e.columns,a=t.getUsedDimensionItems(["columns"]),i=t.getUsedDimensionItems(["conditionalFormatValues"]).map(function(e){return e.name}).reduce(function(e,t){var a=n.findIndex(function(e){return e.attributeId===t});return-1<a&&e.push({index:a,name:t}),e},[]),r=n.slice(0,a.length),o=n.slice(a.length);return Object.assign(Object.assign({},e),{hiddenColumns:i,columns:r,tooltip:o})}},{key:"makeTableData",value:function(e,t){return e?{tableData:this._getTableData(e,t),datasetInfo:this._getDatasetInfo(t)}:{tableData:iX(),datasetInfo:rX(this.id)}}},{key:"buildRes",value:function(e,t){var a=this.context.property,n=this.makeOptions(),i=t.clone(),r=a.nullItemsString,o=a.emptyItemsString;i.setOption({nullString:r,emptyString:o});var s=this.makeTableData(e,i),l=this._attachRowNumber(s,this.context.activePageIndex,a);return{aggregatedData:e,config:{tableData:l.tableData,datasetInfo:l.datasetInfo,options:n}}}},{key:"makeOptions",value:function(){var e=this.context.activePageIndex,t=this.context.property,a=this.context.scale,n=Xc(t,["whole.textStyle","colHeader.textStyle","firstDataStripe.textStyle","secondDataStripe.textStyle"],a),i=Nq(n),r=this.context.appViewState!==H.AppViewMode.Designer&&this.context.viewerType===H.DashboardViewerType.Standard&&t.enableUiFilter;return Object.assign(Object.assign({inMobile:!1},i),{pageNumber:e,fixedColumnsWidthInfo:this.data.fixedColumnsWidthInfo,colHeaderVisible:t.colHeaderVisible,enableUiFilter:r})}},{key:"fetchAggregatedData",value:function(l,u){return oX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(null!=u&&u.context&&this.setContext(null==u?void 0:u.context),t=this.getSimplePivotSetting(l),a=u&&u.sessionId,n=u&&u.pageNumber||0,this.context.activePageIndex=n,i=this.getDataViewHelper(l,t),t&&i.hasSetting()&&i.isReady()){e.next=14;break}return this.cleanDataCache(),r=this.buildRes(void 0,i),this.postUpdate(),this.notifyRefreshMockDataAsync(r,i),e.abrupt("return");case 14:return this.sync(),this.dataView.helper=i,this.dataView.model=this.getRawModel(Object.assign(Object.assign({},this.data),{pageNumber:n}),i),this.dataView.userParameters=this.getUserParameters(Object.assign(Object.assign({},this.data),{pageNumber:n}),i),this.dataView.filters=this.getGlobalFilters(this.data),this.dataView.customAttributes=i.getCustomAttributes(),this.dataView.datasetId=l,this.preUpdate(),e.next=24,this.dataView.getDataViewAsync(l,a);case 24:(o=e.sent)&&this.setDataCache(o),this.postUpdate(),s=this.buildRes(o,i),o&&this.notifyRefresh(s,i,{pageNumber:n});case 29:case"end":return e.stop()}},e,this)}))}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),i}(FM),lX=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},uX=function(e){k()(u,e);var t=w()(u);function u(){var r;return I()(this,u),(r=t.apply(this,arguments)).activePageNumber=0,r.outerClickHandler=function(e){var t=r.context.store,a=t.getDashboardConfig().crossFilterMode;jz(e,t.id,a)&&r.clearCrossFilter()},r.innerClickHandler=function(e){e===r.context.store.id&&r.clearCrossFilter()},r.onActivePageChange=function(e){r.activePageNumber=e,r.refresh()},r.onUiSortChanged=function(e){Object.keys(e).length?r.context.store.setUiSortInfo(e):r.context.store.setUiSortInfo({}),r.refresh()},r.onCrossFilter=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=r.context,n=a.store,i=a.pageContext;Object.keys(t).length?(e=Yz(t),!n.canScenarioTriggerCrossFilter()||n.setCrossFilter(e)&&i.pageModel.doCrossFilter(n.id)):r.clearCrossFilter();r.context.eventHub.fireSelectionChange(Vu(e),r.pivotSettingHelper.getTinyProfile())},r.clearCrossFilter=function(){var e=r.context,t=e.store,a=e.pageContext;t.clearCrossFilter()&&(r.container.cleanSelection(),a.pageModel.doCrossFilter(t.id))},r}return D()(u,[{key:"init",value:function(){var e=this,o=Object.create(null,{init:{get:function(){return C()(b()(u.prototype),"init",e)}}});return lX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,i=sX,a.isSpreadSource()&&(i=c.SpreadSourceDecorator(i)),this.scenarioModel=new i(this.id,{viewerType:H.DashboardViewerType.Lite,appViewState:H.AppViewMode.Viewer,property:this.context.store.getProperties(),scale:this.context.pageContext.getScale(),activePageIndex:this.activePageNumber}),this.scenarioModel.on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),this.scenarioModel.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),this.scenarioModel.on(H.ScenarioEvent.Repaint,function(){r.container.repaint()}),n.pageModel.addScenario(this.scenarioModel,!0),this.scenarioTitle.init(a.getTitle(),n.getScale()),this.container=new nX,this.bodyHost.addChildren(this.container),this.container.init({onUiSortChanged:this.onUiSortChanged,onCrossFilter:this.onCrossFilter,onActivePageChange:this.onActivePageChange}),n.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),n.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler);case 17:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){C()(b()(u.prototype),"willUnmount",this).call(this);var e=this.context.pageContext;e.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),e.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler)}},{key:"onAggChange",value:function(e,t,a,n){var i=3<arguments.length&&void 0!==n?n:{pageNumber:0};C()(b()(u.prototype),"onAggChange",this).call(this),this.pivotSettingHelper=t,this.scenarioTitle.updateTitle(t);var r=this.context.store.getProperties(),o=r.nullItemsString,s=r.emptyItemsString,l=t.clone();l.setOption({nullString:o,emptyString:s}),this.container.setAggData(l,e,i.pageNumber),this.container.reset()}},{key:"refresh",value:function(){this.scenarioModel.refreshData({pageNumber:this.activePageNumber})}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.reset(),this.container.resize()}}]),u}(JK),cX=a(70),dX={data:a.n(cX).a,profile:{}},pX={lineWithDot:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};return"=LINESPARKLINE(".concat(e,', 1,,,"{seriesColor:').concat(a.graphColor,",showMarkers:true,markersColor:").concat(a.graphColor,'}")')},line:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};return"=LINESPARKLINE(".concat(e,', 1,,,"{seriesColor:').concat(a.graphColor,'}")')},column:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};return"=COLUMNSPARKLINE(".concat(e,', 1,,,"{seriesColor:').concat(a.graphColor,'}")')},winloss:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};return"=WINLOSSSPARKLINE(".concat(e,', 1,,,"{seriesColor:').concat(a.graphColor,'}")')},area:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};return"=AREASPARKLINE(".concat(e,',,,,,"').concat(a.graphColor,'","').concat(a.graphColor,'")')},bullet:function(e,t,a){var n=2<arguments.length&&void 0!==a?a:{};return"=BULLETSPARKLINE(".concat(100*e,",100,").concat(n.maxi,",").concat(n.good,",").concat(n.bad,",").concat(100*t,",").concat(n.tickunit,",,,").concat(xJ(n.measureColor),",").concat(xJ(n.targetColor),",").concat(xJ(n.maxiColor),",").concat(xJ(n.goodColor),",").concat(xJ(n.badColor),",").concat(xJ(n.forecastColor),",true,").concat(AJ(n.barSize),")")},hBar:function(a,e){var n=1<arguments.length&&void 0!==e?e:{};return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"=HBARSPARKLINE(".concat(a,"/MAX(-MIN(").concat(e,"), MAX(").concat(e,')), "').concat(t.graphColor,'", false, ').concat(AJ(n.barSize),")")}},pareto:function(i,e){var r=1<arguments.length&&void 0!==e?e:{};return function(e){var t,a,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"=PARETOSPARKLINE(".concat(e,", ROW(),{").concat((t=n.graphColor,a=i,ae.repeat('"'.concat(t,'"'),a).join(",")),"},").concat(AJ(r.target),",,,2,,").concat(xJ(r.targetColor),',"transparent",').concat(xJ(n.textColor),",").concat(AJ(r.barSize),")")}}};function hX(x,A,I,r){function P(e,t,a){var n=2<arguments.length&&void 0!==a&&a,i=null==t?void 0:t[e.display];return null!=i&&n?wJ(e.format,i,r):i}var _="General";if(x.name===sr){var e=x.roles.value.values[0],t=e.format,a=e.displayUnit,n=e.display,i=I.map(function(e){var t;return null===(t=null==e?void 0:e[0])||void 0===t?void 0:t[n]}).filter(function(e){return null!=e});_=Iu(t,a,i)}function M(e){return null==e?null:{name:e.name,display:e.display,dataPropName:e.dataPropName}}return I.map(function(e){var t=[],a="Unimplemented value type!";switch(x.name){case sr:case lr:case ur:var n=x.roles.value.values[0],i=x.name===sr;i&&(n.format=_);var r=P(n,e[0],i),o=P(n,e[0]);a={type:sr,data:[r],originalData:[o],valueField:M(n)};var s=x.options.parameters;switch(x.name){case lr:a.formula=pX.pareto(I.length,s);break;case ur:a.formula=pX.hBar(r,s)}break;case cr:var l,u,c,d,p=x.roles,h=p.bulletActual,y=p.bulletTarget,g=p.bulletForecast,m=x.options.parameters,f={};h.values.length?(l=P(h.values[0],e[0]),f=Object.assign(Object.assign({},h.values[0]),{dataPropName:"actual"})):l=0,c=y.values.length?(u=P(y.values[0],e[0]),Object.assign(Object.assign({},y.values[0]),{dataPropName:"target"})):(u=l,{actualField:f,dataPropName:"target"});var v={};g.values.length?(d=P(g.values[0],e[0]),v=Object.assign(Object.assign({},g.values[0]),{dataPropName:"forecast"})):d=0;var b=isFinite(l/u)?l/u:0,C=isFinite(d/u)?d/u:0;a={type:x.name,formula:pX.bullet(b,C,m),values:{actual:l,target:u,forecast:d},fields:ae.compose(ae.map(M),ae.filter(function(e){return e.name}))([f,c,v])};break;case dr:var T,S=x.roles.chartValue.values[0],D=x.options.type,k=(e?IJ(A,e):[]).map(function(e){var t;return P(S,null!==(t=null==e?void 0:e[0])&&void 0!==t?t:{})});k.length&&(T=pX[D]),"line"===D&&1===(null==e?void 0:e.length)&&(T=pX.lineWithDot),a={type:x.name,data:k,formula:T};break;case pr:var w=x.roles.image.values[0];a={type:x.name,data:P(w,e[0]),renderSetting:(null==x?void 0:x.options.renderSetting)||1}}return t.push(a),t})}function yX(e){var t=Bo.a.orderBy(e,["sortPriority"],["desc"]),a=function a(e){if(e.every(function(e){return 0===e.length}))return[];var n=Bo.a.unionWith.apply(Bo.a,R()(e).concat([function(e,t){return e.label===t.label&&Bo.a.isEqual(e.next,t.next)}]));return Bo.a.unionBy.apply(Bo.a,R()(e).concat(["label"])).map(function(t){var e=n.filter(function(e){return e.label===t.label}).map(function(e){return e.next});return Object.assign(Object.assign({},t),{next:a(e)})})}(t.map(function(e){return e.headers}));return Object.assign(Object.assign({},t[0]),{headers:a})}var gX=QI(function(e){if(e){var a,i=e.matrix,t=e.profile,r=e.formatOption,n=t[0].roles.rows,o=function t(a,e){var n=1<arguments.length&&void 0!==e?e:[];return Array.isArray(n)?n.map(function(e){return t(a,e)}):Object.assign({next:t(a,n.next)},a(n))}(function(e){var t=e.label,a=e.column;return{value:t,display:wJ(n.values.find(function(e){return e.display===a}).format,t,r)}},i.rows.headers),s=function(e){if(!e.length)return[];return function a(e,t,n){var i=2<arguments.length&&void 0!==n?n:[],r=(1<arguments.length&&void 0!==t?t:[]).concat(e.label);return e.next.length?e.next.reduce(function(e,t){return a(t,r,e)},i):(i.push(r),i)}({next:e,value:[],label:[]})}(i.rows.headers),l=n.values.length,u=((a=n).values.length?a.values.map(function(e,t){return{display:e.display,name:e.name,path:["rows"],dataType:e.dataType,originalOptions:a.options,options:{id:a.options.id,columnWidth:(a.options.columnWidths||{})[t],tableWidth:(a.options.tableWidths||{})[t],pivotAlignment:e.options.alignment,renderSetting:e.options.renderSetting},sortInfo:{targets:[e.name],type:ri},sortable:!0}}):[]).concat(t.map(function(e,t){return function(e,t){var a=e.roles.rows.values,n={options:e.options,path:["collection","groups",t]};if(e.name===sr){var i=e.roles.value.values[0];return Object.assign(Object.assign({},n),{display:Ft(e.options.display)||i.display,sortable:!Jr.isCalculation(i),dataType:"number",options:Object.assign(Object.assign({},n.options),{pivotAlignment:i.options.alignment}),sortInfo:{targets:a.map(function(e){return e.name}),type:li,sortBy:{measure:{name:i.name,method:i.method,valueType:i.valueType}}}})}if(e.name===pr){var r=e.roles.image.values[0];n.options.renderSetting=r.options.renderSetting}return Object.assign(Object.assign({},n),{display:Ft(e.options.display)||e.name,sortable:!1})}(e,t)})),c=i.values.map(function(e){return IJ(i.rows,e)}),d=t.reduce(function(e,t,a){var n=hX(t,i.columns[a],c[a],r);return e?Bo.a.zipWith(e,n,Bo.a.concat):n},null);return{rowHeaders:o,rowHeaderList:s,rowHeaderWidth:l,colHeaders:u,rowColumns:n.values.map(function(e){return e.name}),data:d}}});function mX(e,t,a,n,i){i.setStyleName(e,t,n,a)}function fX(a){var n=new Image;return new ed.Promise(function(e,t){n.onload=function(){return e(a)},n.onerror=t,n.src=a})}var vX=ae.compose(gX,function(e,n,t){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!Array.isArray(e))return e;var i=e.filter(function(e){return e});if(i.length){if(n){var r=i.find(function(e){var t,a;return e.profile.name===sr&&void 0!==(null===(a=null===(t=e.matrix.values)||void 0===t?void 0:t[0])||void 0===a?void 0:a[n])});r&&function(e,r,t){var o=2<arguments.length&&void 0!==t&&t;e.rows.headers=function a(e,n){if(!e.length)return e;var i=e[0].column;return e.map(function(t){var e=n.filter(function(e){return e[i]===t.label});return Object.assign(Object.assign({},t),{_order:e.reduce(function(e,t){return e+t[r]},0),next:a(t.next,e)})}).sort(function(e,t){return o?e._order-t._order:t._order-e._order})}(e.rows.headers,e.values),e.rows.sortPriority=e.rows.levels.length}(r.matrix,n,t===H.SortOrder.Ascending)}return{matrix:{rows:yX(i.map(function(e){return e.matrix.rows})),columns:i.map(function(e){return e.matrix.columns}),values:i.map(function(e){return e.matrix.values})},profile:i.map(function(e){return e.profile}),formatOption:a}}}),bX=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},CX=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e))._attachRowNumber=function(e,t){var a=t.alignment,n=t.rowHeader||{},i=n.showRowNumber;if(i){var r={showRowNumber:i,adjoin:n.rowNumberAdjoin,countRule:n.rowNumberCountRule,insertPosition:n.rowNumberPosition,alignment:a};return new nq(e).attachRowNumber(r)}return e},a.context=t,a}return D()(i,[{key:"makeOptions",value:function(){var e=this.context.scale,t=this.context.property,a=Xc(t,["whole.textStyle","colHeader.textStyle","firstDataStripe.textStyle","secondDataStripe.textStyle","corner.textStyle","rowHeader.textStyle"],e),n=Eq(a),i=this.context.appViewState!==H.AppViewMode.Designer&&this.context.viewerType===H.DashboardViewerType.Standard&&t.enableUiFilter;return Object.assign(Object.assign({},n),{needAddEditAbility:!1,fixedColumnsWidthInfo:this.data.fixedColumnsWidthInfo,colHeaderVisible:t.colHeaderVisible,enableUiFilter:i})}},{key:"fetchAggregatedData",value:function(D,e){var k,w=1<arguments.length&&void 0!==e?e:{};return bX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p,h,y,g,m,f,v,b,C,T,S=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(null!=w&&w.context&&this.setContext(null==w?void 0:w.context),this.sync(),t=this.getSimplePivotSettings(D),a=this.getPivotSettingHelper(this.getDatasetId(),this.data),t.length&&a.isReady()){e.next=14;break}return this.cleanDataCache(),n=vX(dX.data),i=this.makeOptions(),r={isMock:!0,d:n,options:i},this.postUpdate(),this.notifyRefreshData(r,null,w),e.abrupt("return");case 14:return this.dataView.helpers=[],this.dataView.models=[],this.dataView.userParametersArr=[],this.dataView.filters=this.getGlobalFilters(this.data),this.dataView.customData=Us.customData(this.data),this.dataView.customAttributes=a.getCustomAttributes(),this.dataView.datasetId=D,t.forEach(function(e,t){if(e){var a=S.getDataViewHelper(S.getDatasetId(),e);a.hasSetting()?(S.dataView.helpers.push(a),S.dataView.models.push(S.getPivotModel(Object.assign(Object.assign({},S.data),{id:"".concat(S.data.id,"-").concat(t),originalId:S.data.id}),a)),S.dataView.userParametersArr.push(S.getUserParameters(Object.assign(Object.assign({},S.data),{id:"".concat(S.data.id,"-").concat(t),originalId:S.data.id}),a))):(S.dataView.helpers.push(null),S.dataView.models.push(null))}else S.dataView.helpers.push(null),S.dataView.models.push(null)}),this.preUpdate(),e.next=25,this.dataView.getDataViewAsync(D,w.sessionId,this.getDataViewOptions());case 25:if(!(o=e.sent)){e.next=32;break}s=o,this.getDataViewOptions().withWrapper&&(s=o.filter(function(e){return e}).map(function(e){return Object.values(e)}).flat().filter(function(e){return e})),this.setDataCache(s),e.next=38;break;case 32:return l=vX(dX.data),u=this.makeOptions(),c={isMock:!0,d:l,options:u},this.postUpdate(),this.notifyRefreshData(c,null,w),e.abrupt("return");case 38:d=this.mergeResults(o),p=this.data.pivot,h=this.context.property,y=a.getUsedValueItems(),g={nullString:h.nullItemsString,emptyString:h.emptyItemsString},a.setOption(g),m=Object.values(p.uiSortInfo||{}).filter(function(e){return e.type===H.SortType.Group}),f=m.map(function(t){return y.find(function(e){return e.name===t.sortBy.measure.name&&e.method===t.sortBy.measure.method})}).filter(function(e){return e}).map(function(e){return null==e?void 0:e.display}),v=vX(d,f[0],null===(k=m[0])||void 0===k?void 0:k.order,g),b=this._attachRowNumber(v,h),C=this.makeOptions(),T={isMock:!1,d:b,options:C},this.postUpdate(),this.notifyRefreshData(T,a,w);case 52:case"end":return e.stop()}},e,this)}))}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),i}(nO),TX=function(e){k()(r,e);var i=w()(r);function r(){var t;I()(this,r);for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(t=i.call.apply(i,[this].concat(a)))._getMinimumAutoFitColumnWidth=function(e){return-1<t._imageColumnsIndex.indexOf(e)?75:Number.MIN_SAFE_INTEGER},t}return D()(r,[{key:"init",value:function(){C()(b()(r.prototype),"init",this).call(this),this.suspend(),this._theme=new mJ(this._options,this._sheet),this.resume(),this._imageColumnsIndex=[]}},{key:"setSharedBorder",value:function(){var e=this._data,a=e.colHeaders,t=e.data,n=e.rowHeaderWidth,i=[t.length,t[0].length+n],r=i[0],o=i[1],s=this.getSheet(),l=a.findIndex(function(e,t){return!("rows"!==e.path[0]||!a[t+1]||"rows"===a[t+1].path[0])});iJ(0,l+1,this._options,s);for(var u=0;u<=l;u+=1)rJ(0,u,this._options,s);for(var c=0;c<r;c+=1)oJ(c,l+1,this._options,s);for(var d=l+1;d<o;d+=1)sJ(0,d,this._options,s);for(var p=1;p<r;p+=2)for(var h=l+1;h<o;h+=1)aJ(p,h,this._options,r,s)}},{key:"setStyle",value:function(e,t,a){var n=this.getSheet(),i=this.getSpread(),r=this.getOptions(),o=r.rowHeader,s=r.frozenGroup;i.options.hideSelection=!1;var l=n.getDefaultStyle();l.vAlign=Dl.a.Spread.Sheets.VerticalAlign.center,l.textIndent=1,n.setDefaultStyle(l,Dl.a.Spread.Sheets.SheetArea.viewport),Bo.a.range(e).forEach(function(e){o.border.color?n.getCell(e,0,Dl.a.Spread.Sheets.SheetArea.viewport).borderLeft(new Dl.a.Spread.Sheets.LineBorder(o.border.color,Dl.a.Spread.Sheets.LineStyle.double)):n.getCell(e,0,Dl.a.Spread.Sheets.SheetArea.viewport).borderLeft(new Dl.a.Spread.Sheets.LineBorder(o.border.color,Dl.a.Spread.Sheets.LineStyle.empty))});var u=n.getDefaultStyle(Dl.a.Spread.Sheets.SheetArea.colHeader);u.vAlign=Dl.a.Spread.Sheets.VerticalAlign.center,n.setDefaultStyle(u,Dl.a.Spread.Sheets.SheetArea.colHeader),s?(n.frozenColumnCount(a),n.options.frozenlineColor="transparent"):n.frozenColumnCount(0),n.setColumnCount(t),n.setRowCount(e),this.updateStyle()}},{key:"setAlignment",value:function(e,t){var a=this.getSheet(),n=this.getDataRolesInfo(e);if(n){var i=this.getOptions().alignment||H.TableAlignment.Default,r=this.getAlignmentInfo(n.options.pivotAlignment,i,n);a.getCell(t,e,Dl.a.Spread.Sheets.SheetArea.viewport).hAlign(r)}}},{key:"_renderImageCell",value:function(e,t,a,n,i){this._imageColumnsIndex.push(t),this.renderImage2Cell({row:e,col:t,renderSetting:n,value:a,sheetArea:i})}},{key:"bind",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this._listenerMap=t}},{key:"addListeners",value:function(){var t=this,a=this.getSheet();Object.keys(this._listenerMap||{}).forEach(function(e){a.bind(e,t._listenerMap[e])})}},{key:"setAfterPaint",value:function(e){this._afterPaint=e}},{key:"afterPaint",value:function(){this._afterPaint&&(this._afterPaint(),this._afterPaint=null)}},{key:"getColHeaderInfo",value:function(e){var t=this.getDataRolesInfo(e),a={key:""};return t&&(a.key=t.options.id,"rows"===t.path[0]&&(a.columns=[t.name],t._attached&&(a.attached=!0))),a}},{key:"getDataRolesInfo",value:function(e){var t=this._data.colHeaders;if(0<=e&&e<t.length)return t[e]}},{key:"mapColDetailsToIndex",value:function(t){return this._options.fixedColumnsWidthInfo.find(function(e){return"".concat(e.details.columns)==="".concat(t.columns)&&"".concat(e.details.key)==="".concat(t.key)&&e.details.attached===t.attached})}},{key:"paintColHeaders",value:function(l){var u=this,c=this.getSheet(),e=this._options,d=e.sortInfo,p=e.corner,h=e.colHeader,y=e.pivotFilterColumns,g=Object.values(d||{});Bo.a.range(l.length).forEach(function(e){var t,a,n=l[e];c.setValue(0,e,n.display,Dl.a.Spread.Sheets.SheetArea.colHeader),"rows"===n.path[0]?(c.setStyleName(0,e,Kq.Corner,Dl.a.Spread.Sheets.SheetArea.colHeader),p.border.color?c.getCell(0,e,Dl.a.Spread.Sheets.SheetArea.colHeader).borderTop(new Dl.a.Spread.Sheets.LineBorder(p.border.color,Dl.a.Spread.Sheets.LineStyle.double)):c.getCell(0,e,Dl.a.Spread.Sheets.SheetArea.colHeader).borderTop(new Dl.a.Spread.Sheets.LineBorder(p.border.color,Dl.a.Spread.Sheets.LineStyle.empty)),0===e&&(p.border.color?c.getCell(0,e,Dl.a.Spread.Sheets.SheetArea.colHeader).borderLeft(new Dl.a.Spread.Sheets.LineBorder(p.border.color,Dl.a.Spread.Sheets.LineStyle.double)):c.getCell(0,e,Dl.a.Spread.Sheets.SheetArea.colHeader).borderLeft(new Dl.a.Spread.Sheets.LineBorder(p.border.color,Dl.a.Spread.Sheets.LineStyle.empty)))):(c.setStyleName(0,e,Kq.ColHeader,Dl.a.Spread.Sheets.SheetArea.colHeader),h.border.color?c.getCell(0,e,Dl.a.Spread.Sheets.SheetArea.colHeader).borderTop(new Dl.a.Spread.Sheets.LineBorder(h.border.color,Dl.a.Spread.Sheets.LineStyle.double)):c.getCell(0,e,Dl.a.Spread.Sheets.SheetArea.colHeader).borderTop(new Dl.a.Spread.Sheets.LineBorder(h.border.color,Dl.a.Spread.Sheets.LineStyle.empty)));var i="rows"===n.path[0]?dJ(null===(t=u._options.corner)||void 0===t?void 0:t.textStyle):dJ(null===(a=u._options.colHeader)||void 0===a?void 0:a.textStyle);if(n.sortable){var r=-1<y.indexOf(n.name)?gq.Edited:gq.New;c.setCellType(0,e,new Cq(i,r,u._options.enableUiFilter&&"rows"===n.path[0]),Dl.a.Spread.Sheets.SheetArea.colHeader);var o=function(t){if(d){if(t.name){var e=d[t.name];return e&&!e.sortBy?e:void 0}return g.find(function(e){return Bo.a.isEqual(e.sortBy,t.sortInfo.sortBy)})}}(n),s=o?{sortStatus:o.order}:{sortStatus:Un};c.setTag(0,e,s,Dl.a.Spread.Sheets.SheetArea.colHeader)}else c.setCellType(0,e,new Tq(i),Dl.a.Spread.Sheets.SheetArea.colHeader)})}},{key:"_isLastLevelRowHeaderStyle",value:function(e,t){if(0===e.next.length)return!0;var a=this._data.rowHeaderWidth,n=this._data.colHeaders.slice(0,a);if(this._options.rowHeader.showRowNumber){var i=Bo.a.last(n);if(t===a-2){var r=n[t];return(null==r?void 0:r.name)===i.name}}return!1}},{key:"paintRowHeaders",value:function(e){var p=this;if(Array.isArray(e)&&e.length){var h=this.getSheet();!function t(e,a,n){var i=function e(t,a){return a.next.length?a.next.reduce(e,t):t+1}(0,n);if(n.next){if(-1<a){for(var r=e;r<e+i;r+=1){if(p._isLastLevelRowHeaderStyle(n,a)&&p._options.treatLastRowHeaderAsData){var o=Kq.Whole;p._options.useAlternateRowStyle&&(o=e%2==0?Kq.FirstDataStripe:Kq.SecondDataStripe),mX(e,a,Dl.a.Spread.Sheets.SheetArea.viewport,o,h)}else mX(r,a,Dl.a.Spread.Sheets.SheetArea.viewport,Kq.RowHeader,h);0===a&&p._options.rowHeader.border.color&&h.getCell(r,a).borderLeft(new Dl.a.Spread.Sheets.LineBorder(p._options.rowHeader.border.color,Dl.a.Spread.Sheets.LineStyle.double))}h.addSpan(e,a,i,1,Dl.a.Spread.Sheets.SheetArea.viewport)}var s=e;n.next.forEach(function(e){s+=t(s,a+1,e)})}var l=n.display;if(l){var u=p.getDataRolesInfo(a);if(u){var c,d=(null===(c=u.options)||void 0===c?void 0:c.renderSetting)||H.ImageRenderSetting.Text;d===H.ImageRenderSetting.Text?h.setValue(e,a,l):p._renderImageCell(e,a,l,d)}}return p.setAlignment(a,e),i}(0,-1,{next:e})}}},{key:"setData",value:function(c,e){var d=this,p=e.rowCount,h=e.baseColIdx,a=e.baseRowIdx,y=e.reset,t=this.getOptions(),n=t.graphColorPreference,i=t.whole,g=t.firstDataStripe,m=t.secondDataStripe,f=t.useAlternateRowStyle,r=i.textStyle.color,v=this.getSheet(),b={graphColor:n,textColor:r};c.forEach(function(e,t){var u=a+t;e.forEach(function(e,t){if(e){var a=h+t;f?(b.textColor=u%2==0?g.textStyle.color:m.textStyle.color,mX(u,a,Dl.a.Spread.Sheets.SheetArea.viewport,u%2==0?Kq.FirstDataStripe:Kq.SecondDataStripe,v)):mX(u,a,Dl.a.Spread.Sheets.SheetArea.viewport,Kq.Whole,v);var n=function(e,t){e&&(t&&(e=e(t,b)),v.setFormula(u,a,e))};switch(e.type){case cr:return n(e.formula);case dr:var i=d.getHiddenSourceName(t);y&&d.setSparklineData(c,t);var r="".concat(i,"!A").concat(u+1,":").concat(RY(e.data.length)).concat(u+1);return n(e.formula,r);case sr:case lr:case ur:var o=d.getHiddenSourceName(t);y&&d.setSparklineData(c,t);var s="".concat(o,"!A1:A").concat(p),l=e.data[0];e.formula&&null!=l?n(e.formula,s):v.setValue(u,a,l),d.setAlignment(a,u);break;case pr:d._renderImageCell(u,a,e.data,e.renderSetting)}}})})}},{key:"paintAll",value:function(e){var t=this.getSpread(),a=this.getSheet();if(t){var n=this._data,i=n.colHeaders,r=n.rowHeaders,o=n.rowHeaderWidth,s=n.data;a.selectionUnit(Dl.a.Spread.Sheets.SelectionUnit.row),a.selectionPolicy(Dl.a.Spread.Sheets.SelectionPolicy.single),this.suspend();var l=[s.length,s[0].length+o],u=l[0],c=l[1];this.setStyle(u,c,o),this.paintColHeaders(i),this.paintRowHeaders(r),this.setData(s,{rowCount:u,baseColIdx:o,baseRowIdx:0,reset:!0}),this.setSharedBorder(),a.options.isProtected=!0,a.options.protectionOptions={allowSelectLockedCells:!0,allowResizeColumns:!0},e(a),this.addListeners(),this.afterPaint(),this.resize(),this.clearSelection(),this.resume()}}},{key:"paint",value:function(e){var t=this.getSpread(),a=this.getSheet(),n=this._data,i=n.colHeaders,r=n.rowHeaders,o=n.rowHeaderWidth,s=n.data;if(t){this.suspend();var l=[s.length,s[0].length+o],u=l[0],c=l[1];this._theme.update(this._options),this.setStyle(u,c,o),this.paintColHeaders(i),this.paintRowHeaders(r),this.setData(s,{rowCount:u,baseColIdx:o,baseRowIdx:0,reset:!1}),this.setSharedBorder(),e(a),this.clearSelection(),this.afterPaint(),this.resize(),this.resume()}}},{key:"clear",value:function(){var e=this.getSpread();e.clearSheets(),e.addSheet(),this._sheet=e.getActiveSheet(),this._theme=new mJ(this._options,this._sheet),this._imageColumnsIndex=[],this._setDefaultSpreadAndSheetOptions()}},{key:"refresh",value:function(e,t){var a=this;if(this.getSpread()){var n=e&&e!==this._data,i=this._sheet.getSelections()[0];if(i){var r,o=this._data.rowHeaderList;this._oldSelectionStr=null===(r=o[i.row])||void 0===r?void 0:r.join()}e&&(this._data=e),t&&(this._options=t,this._updateRowHeight());for(var s=arguments.length,l=new Array(2<s?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];if(n?(this.clear(),this._updateRowHeight(),this.paintAll.apply(this,l)):this.paint.apply(this,l),this._options.scrollByPixel!==this._spread.options.scrollByPixel&&(this._spread.options.scrollByPixel=this._options.scrollByPixel),this._oldSelectionStr){var c=this._data.rowHeaderList.findIndex(function(e){return e.join()===a._oldSelectionStr});-1<c?(this._sheet.setSelection(c,-1,1,1),this._sheet.showRow(c,1)):this.clearSelection(),this._oldSelectionStr=void 0}}}},{key:"resize",value:function(){var e;this.suspend();var t=this._options.fixedColumnsWidthInfo;null!==(e=this._imageColumnsIndex)&&void 0!==e&&e.length?this._rowHeightOfViewport=Math.max(this._rowHeightOfViewport,75):this._updateRowHeight(),null!=t&&t.length?(this._applyColumnsWidth(),this._autoFitRow()):this._doAutoFit(!0),this._updateScrollbarInfo(),this._setScrollbar(this._options.scrollbarMode,this._mouseEnter),this._spread.refresh(),this.resume()}},{key:"_getColCount",value:function(){var e=this._data,t=e.rowHeaderWidth;return e.data[0].length+t}},{key:"_applyColumnsWidth",value:function(){var a=this,e=this._getColCount();if(this.layoutWidth=this._getScenarioLayoutWidth(),void 0===this.layoutScale&&(this.layoutScale=1),0<this._options.fixedColumnsWidthInfo.length){var n=this.getDefaultFixedColumnInfo();Bo.a.range(e).forEach(function(e){var t=a.mapColDetailsToIndex(a.getColHeaderInfo(e));t&&(n[e]=xq(t,a.layoutWidth))}),this.setColumnWidthAfterResized(this._tableHeight,n)}}},{key:"getHiddenSourceName",value:function(e){return"hidden".concat(e)}},{key:"setSparklineData",value:function(e,t){var a=this.getHiddenSourceName(t),n=this.getSpread(),i=n.getSheetFromName(a);if(!i){n.addSheet(1,new Dl.a.Spread.Sheets.Worksheet(a)),(i=n.getSheetFromName(a)).autoGenerateColumns=!0;var r=e.map(function(e){return e[t].data});i.suspendPaint(),i.setDataSource(r),i.resumePaint()}}}]),r}(yJ),SX=function(){function t(e){var C=this;I()(this,t),this.instance=null,this.dirtyState={data:!1,options:!1},this.resetDirtyState=function(){C.dirtyState={data:!1,options:!1}},this.getRowDimFields=function(a,e){var n=a.colHeaders.filter(function(e){return!e._attached});return e.map(function(e,t){return{originalValue:e,value:e,field:a.rowColumns[t],display:n[t].display,isImage:n[t].options.renderSetting!==H.ImageRenderSetting.Text}})},this.getColDimFields=function(r,e){return e.reduce(function(e,t,a){var n=t.type,i=a+r.rowHeaderWidth;switch(n){case sr:case lr:case ur:e.push({originalValue:t.originalData[0],value:t.data[0],display:r.colHeaders[i].display});break;case cr:e.push({originalValue:t.values.actual,value:t.values.actual,display:r.colHeaders[i].display+Ft("dataBindingPanel.mainValue")},{originalValue:t.values.target,value:t.values.target,display:r.colHeaders[i].display+Ft("dataBindingPanel.comparisonValue")},{originalValue:t.values.forecast,value:t.values.forecast,display:r.colHeaders[i].display+Ft("dataBindingPanel.forecastValue")})}return e},[])},this.getSelectedFields=function(r){var a=C.data;return C.instance._sheet.getSelections().filter(function(e){return 0<=e.row}).reduce(function(e,t){return e.concat(ae.range(t.row,t.row+t.rowCount))},[]).map(function(e){var t=0<a.rowHeaderList.length?a.rowHeaderList[e]:[],i=C.getRowDimFields(a,t);return(0<a.data.length?a.data[e]:[]).reduce(function(e,t){if(r)switch(t.type){case sr:case lr:case ur:case cr:e.push(R()(i))}else switch(t.type){case sr:case lr:case ur:var a={field:t.valueField.name,display:t.valueField.display,value:ae.head(t.data),originalValue:ae.head(t.originalData)};e.push([].concat(R()(i),[a]));break;case cr:var n=t.fields.map(function(e){return{field:e.name,display:e.display,value:t.values[e.dataPropName],originalValue:t.values[e.dataPropName]}});e.push([].concat(R()(i),R()(n)))}return e},[])}).map(function(e){return Bo.a.isArray(e)&&e.length&&Bo.a.isArray(e[0])?ae.compose(ae.uniqBy(ae.prop("display")),ae.flatten)(e):e})},this.onCellClick=function(e,t){var a=C.data,n=t.row,i=t.col,r=t.sheetArea;if(void 0!==n&&void 0!==i)if(r!==Dl.a.Spread.Sheets.SheetArea.colHeader){var o=0<a.rowHeaderList.length?a.rowHeaderList[n]:[],s=0<a.data.length?a.data[n]:[],l=C.getRowDimFields(a,o),u=C.getColDimFields(a,s),c=[].concat(R()(l),R()(u)).map(function(e){return{columnName:e.display||e.field,columnValue:e.value,isImage:e.isImage}}),d=C.getSelectedFields(!0),p=C.getSelectedFields(!1),h=C._host.getBoundingClientRect(),y=C.instance.getSheet().getCellRect(n,i),g={x:h.left+y.x+y.width/2,y:h.top+Math.max(y.y,0)};C.onCellClickHandler(c,d,p,g)}else C.onBlankClick()},this.sortManager=function(e){var t;e.preventDefault(),e.stopPropagation();var a=C.instance.getSheet(),n=C.instance.getSpread().getHost(),i=Mq(a,e,n),r=i.cellTypeHitInfo;if(r){a.endEdit(!1);var o=r.isHitOnUiFilter,s=r.row,l=r.col,u=r.sheetArea,c=r.cellRect;if(a.getCellType(s,l,u).$$type===vq.sort){var d=C.instance.getDataRolesInfo(l),p=d.sortInfo,h=d.options.renderSetting,y=d.name,g=void 0!==h&&h!==H.ImageRenderSetting.Text;if(o){var m=C.instance._getFilterDialogPosition(c);return void(null!==(t=C.showUiFilterDialog)&&void 0!==t&&t.call(C,m,y))}if(g)return;var f=((a.getTag(s,l,u).sortStatus||0)+1)%3;C.onUiSortChanged(p,f)}}else{var v=i.row,b=i.col;(null==v||null==b)&&(a.endEdit(!1),C.clearSelection(),C.onBlankClick(),C.onRowSelectionChanged(null,!1))}},this.handleCrossFilter=function(t){C.enableTriggerCrossFilter&&t.bind(Dl.a.Spread.Sheets.Events.SelectionChanged,function(){var e=t.getSelections().filter(function(e){return 0<=e.row}).reduce(function(e,t){return e.concat(ae.range(t.row,t.row+t.rowCount))},[]);C.onRowSelectionChanged(e,!!e.length)})},this.enableAutoScroll=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=C.options,a=t.autoScroll,n=t.scrollByPixel;C._disabledAutoScroll(!0);var i=C.instance;i.hasSelections()?C.cancelAutoScroll=null:C.cancelAutoScroll=PY(IY(n,a.speed),C,{sheet:C.instance.getSheet(),frozeRow:!1,scrollByPixel:n}),e&&i.registerEventHandlers({mousemove:function(){return C._disabledAutoScroll()},mouseleave:function(){return C.enableAutoScroll()}})},this._disabledAutoScroll=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(C.cancelAutoScroll){if(C.cancelAutoScroll(),!e)return;C.instance.unregisterEventHandlers(["mouseleave","mousemove"])}},this._host=e.dom,this.onUiSortChanged=e.onUiSortChanged,this.onCellClickHandler=e.onCellClick,this.onBlankClick=e.onBlankClick,this.columnWidthChanged=e.onColumnWidthChanged,this.onRowSelectionChanged=e.onRowSelectionChanged,this.showUiFilterDialog=e.onShowUiFilterDialog,this.setData(e.data),this.setOptions(e.options),this.setSortInfo(e.sortInfo),this.setPivotFilterColumns(e.pivotFilterColumns),this.setDisableAutoScroll(e.disableAutoScroll),this.setEnableTriggerCrossFilter(e.enableTriggerCrossFilter),this.init()}return D()(t,[{key:"destroy",value:function(){this.cancelAutoScroll&&this.cancelAutoScroll(),this.instance.dispose()}},{key:"resize",value:function(){this.instance.resize()}},{key:"init",value:function(){var e,s=this,t=this.data,a=this.options,n=this.disableAutoScroll,i=this.sortInfo,r=this.pivotFilterColumns;this.instance=new TX(this._host,t,Object.assign(Object.assign({},a),{sortInfo:i,pivotFilterColumns:r})),!n&&a.autoScroll.enable&&this.enableAutoScroll(!0),this.instance.bind((e={},V()(e,Dl.a.Spread.Sheets.Events.ColumnWidthChanging,function(e,t){var a,n;s._columnWidthBeforeChange=(a=t.sheet,n=t.colList[0],a.getColumnWidth(n,Dl.a.Spread.Sheets.SheetArea.viewport));var i=t.colList[0]===t.sheet.getColumnCount()-1;!s.options.expand&&i&&(t.cancel=!0)}),V()(e,Dl.a.Spread.Sheets.Events.ColumnWidthChanged,function(e,t){var a,n=t.colList,i=t.sheet,r=n[0],o=Rq(r,s._columnWidthBeforeChange,s.instance.autoFitColumnsInfo,s.instance,i,s.options.expand);null!==(a=s.columnWidthChanged)&&void 0!==a&&a.call(s,o,s.instance.autoFitColumnsInfo)}),V()(e,Dl.a.Spread.Sheets.Events.SelectionChanging,function(e,t){if(t.newSelections.find(function(e){return-1===e.col&&-1===e.row}))if(t.oldSelections.length){var a=t.oldSelections[0],n=a.row,i=a.col;-1<n?t.sheet.setSelection(n,i,1,1):s.clearSelection()}else s.clearSelection()}),V()(e,Dl.a.Spread.Sheets.Events.CellClick,this.onCellClick),e)),this.instance.paintAll(this.handleCrossFilter),this.instance.registerEventHandlers({click:this.sortManager}),this.resetDirtyState()}},{key:"clearSelection",value:function(){this.instance.clearSelection(),this.onBlankClick(),this.disableAutoScroll||!this.options.autoScroll.enable||this.cancelAutoScroll||this.enableAutoScroll()}},{key:"setOptions",value:function(e){this.dirtyState.options=!0,this.options=e}},{key:"setData",value:function(e){this.data=e,this.dirtyState.data=!0}},{key:"setSortInfo",value:function(e){this.sortInfo=e}},{key:"setPivotFilterColumns",value:function(e){this.pivotFilterColumns=e}},{key:"setDisableAutoScroll",value:function(e){this.disableAutoScroll=e}},{key:"setEnableTriggerCrossFilter",value:function(e){this.enableTriggerCrossFilter=e}},{key:"refresh",value:function(){var e=this.data,t=this.options,a=this.sortInfo,n=this.pivotFilterColumns,i=this.disableAutoScroll;(this.dirtyState.data||this.dirtyState.options)&&(this.instance.refresh(e,Object.assign(Object.assign({},t),{sortInfo:a,pivotFilterColumns:n}),this.handleCrossFilter),!i&&t.autoScroll.enable&&this.enableAutoScroll(!0)),this.resetDirtyState()}},{key:"repaint",value:function(){this.instance.repaint()}}]),t}(),DX=function(e){k()(i,e);var n=w()(i);function i(){var e;I()(this,i),(e=n.call(this)).isMock=!1;var t=new hU({tag:"div",className:"layout-full-flex"}),a=new hU({tag:"div",className:"wyn-chart-overlay"});return e.addChildren(t,a),e.host=t,e.mockOverlay=a,e}return D()(i,[{key:"init",value:function(e){var n=this,t=e.data,a=e.options,i=e.disableAutoScroll,r=e.sortInfo,o=e.pivotFilterColumns,s=e.onUiSortChanged,l=e.onBlankClick,u=e.onRowSelectionChanged,c=e.onCellClick;this.instance=new SX({dom:this.host.getRef(),onUiSortChanged:s,onCellClick:c,onBlankClick:l,onRowSelectionChanged:u,data:t,options:a,sortInfo:r,pivotFilterColumns:o,disableAutoScroll:i,enableTriggerCrossFilter:!0,onColumnWidthChanged:function(e,t){var a=CJ(e,t);n.context.store.setAttribute("fixedColumnsWidthInfo",a)}})}},{key:"willUnmount",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.destroy()}},{key:"cleanSelection",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.clearSelection()}},{key:"setTableData",value:function(e,t,a,n){var i,r,o,s;null!==(i=this.instance)&&void 0!==i&&i.setData(e),null!==(r=this.instance)&&void 0!==r&&r.setOptions(t),null!==(o=this.instance)&&void 0!==o&&o.setDisableAutoScroll(a),null!==(s=this.instance)&&void 0!==s&&s.setSortInfo(n)}},{key:"refresh",value:function(){var e;this.context.eventHub.fireRender(),null!==(e=this.instance)&&void 0!==e&&e.refresh(),this.context.eventHub.fireRendered()}},{key:"repaint",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.repaint()}},{key:"resize",value:function(e){var t,a;null!==(t=this.instance)&&void 0!==t&&t.resize(),null!==(a=this.instance)&&void 0!==a&&a.setOptions(e),this.refresh()}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}))}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}}]),i}(mU),kX=function(e){k()(a,e);var t=w()(a);function a(){var c;return I()(this,a),(c=t.call(this)).initialized=!1,c.onRowSelectionChanged=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=RB()(c),n=a.onCrossFilter,i=a.onCleanCrossFilter,r=a.data,o=null==r?void 0:r.d;if(null!=o&&o.data)if(t){if(!o.rowHeaderList.length)return;var s=o.rowColumns.filter(function(e,t){var a;return(null===(a=o.colHeaders[t])||void 0===a?void 0:a.options.renderSetting)===H.ImageRenderSetting.Text}),l=o.colHeaders.reduce(function(e,t,a){return t.options.renderSetting!==H.ImageRenderSetting.Text&&e.push(a),e},[]);n(s,e.map(function(e){return o.rowHeaderList[e].filter(function(e,t){return-1===l.indexOf(t)})}))}else i()},c.onSortChanged=function(e,t){var a=Object.assign(Object.assign({},e),{order:t});c.onUiSortChanged(function(t){if(t&&t.order!==Un){var a={};return t.targets&&t.targets.forEach(function(e){return a[e]={sortBy:t.sortBy,type:t.type,order:t.order}}),a}}(a))},c.showTooltipModal=function(e,t){if(e.show){var a={position:e.position,fields:t.clickSelectedFields.reduce(function(e,t){return t.isImage||e.push({label:t.columnName,value:t.columnValue}),e},[]),selected:t.selectedFieldsWithMeasure,hideSelectedCount:!0};c.tooltip.show(a)}},c.onBlankClick=function(){c.selectedInfo=null,c.tooltip.hide(),c.context.pageContext.pageModel.triggerSelectionChange(c.context.store.id)},c.setInteractionInfo=function(){var e=c.context,t=e.store,a=e.pageContext;c.interactionManager.setState({store:t,pageContext:a,pivotSettingHelper:c.pivotSettingHelper})},c.cleanCrossFilter=function(){c.selectedInfo=null,c.cleanSelection(),c.onCleanCrossFilter()},c.onCellClick=function(e,t,a,n){var i,r,o=c.context.store.getProperties().clickAction,s={position:n,show:o===H.InteractionMouseEventAction.ShowTooltip&&0<t.length},l=zY(c.pivotSettingHelper),u={clickSelectedFields:null===(r=l,i=e.map(function(t){var e=r.find(function(e){return e.display===t.columnName});return e?F()({},t,{columnValue:Nu(t.columnValue,e)}):t}))||void 0===i?void 0:i.filter(function(e){return!e.isImage}),selectedFields:[t[0].filter(function(e){return!e.isImage})],selectedFieldsWithMeasure:a};o===H.InteractionMouseEventAction.ShowTooltip||o===H.InteractionMouseEventAction.None?(c.showTooltipModal(s,u),c.selectedInfo=u,c.context.pageContext.pageModel.triggerSelectionChange(c.context.store.id,u.selectedFieldsWithMeasure)):(c.setInteractionInfo(),c.interactionManager.handleClickAction(n,t,u.selectedFieldsWithMeasure).then(function(e){e===H.InteractionMouseEventAction.JumpTo&&c.cleanCrossFilter()}))},c.onContextMenu=function(e){var t,a;e.preventDefault();var n=null===(t=c.selectedInfo)||void 0===t?void 0:t.selectedFields,i=null===(a=c.selectedInfo)||void 0===a?void 0:a.selectedFieldsWithMeasure;c.setInteractionInfo();var r={x:e.clientX,y:e.clientY};c.interactionManager.showContextMenuActions(r,n,i).then(function(e){e===H.InteractionMouseEventAction.JumpTo&&c.cleanCrossFilter()})},c.reset=function(){c.tooltip.hide()},c.textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),c.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return c.cleanCrossFilter()}}),c.hostContainer.addChildren(c.textPanel,c.contextMenu),c}return D()(a,[{key:"didMount",value:function(){this.hostContainer.addEventListener("contextmenu",this.onContextMenu)}},{key:"willUnmount",value:function(){var e;null!==(e=this.interactionManager)&&void 0!==e&&e.destroy(),this.hostContainer.removeEventListener("contextmenu",this.onContextMenu)}},{key:"repaint",value:function(){var e;null!==(e=this.table)&&void 0!==e&&e.repaint()}},{key:"makeOptions",value:function(){var e=this.context,t=e.pageContext.getScale(),a=e.store.getProperties(),n=Xc(a,["whole.textStyle","colHeader.textStyle","firstDataStripe.textStyle","secondDataStripe.textStyle","corner.textStyle","rowHeader.textStyle"],t),i=Eq(n);return Object.assign(Object.assign({},i),{needAddEditAbility:!1,fixedColumnsWidthInfo:e.store.getAttribute("fixedColumnsWidthInfo"),colHeaderVisible:a.colHeaderVisible,enableUiFilter:!1})}},{key:"getData",value:function(){return{data:this.data}}},{key:"refresh",value:function(){if(this.table){var e=this.context.store,t=this.getData().data;if(!(t&&t.d&&t.d.data&&t.d.data.length))this.textPanel.show(),this.table.hide();else{this.textPanel.hide(),this.table.show();var a=e.getProperties(),n=e.getPivot(),i=Ho.uniq(Ho.flatten(n.pivotFilters.map(function(e){return e.columnNames}))),r=!d$.globalConfigManager.get("disableAutoScroll")&&!this.context.getEnv().focus&&a.autoScroll.enable,o=t.d,s=t.options;if(this.table.useMockStyle(t.isMock),!this.initialized)return this.table.init({data:o,disableAutoScroll:!r,options:s,pivotFilterColumns:i,sortInfo:n.uiSortInfo,onUiSortChanged:this.onSortChanged,onCellClick:this.onCellClick,onBlankClick:this.onBlankClick,onRowSelectionChanged:this.onRowSelectionChanged}),void(this.initialized=!0);this.table.setTableData(o,s,!r,n.uiSortInfo),this.table.refresh()}}}},{key:"init",value:function(e){var t=this.context.store,a=t.getProperties().clickAction,n=t.getOptions().contextMenuActions;this.interactionManager=new qj({onKeepOrExclude:e.onKeepOrExclude,onFinishJumpTo:this.reset,contextMenu:this.contextMenu,clickAction:a,contextMenuActions:n}),this.onCrossFilter=e.onCrossFilter,this.onCleanCrossFilter=e.onCleanCrossFilter,this.onUiSortChanged=e.onUiSortChanged,this.table=new DX,this.table.hide(),this.tooltip=new VU,this.hostContainer.addChildren(this.table,this.tooltip);var i=this.makeOptions();this.table.useMockStyle(!0),this.hostContainer.setStyle(i.whole.textStyle);var r=t.getProperties().noData;this.textPanel.setTextStyle(r.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(r)}},{key:"setAggData",value:function(e,t){this.pivotSettingHelper=e,this.data=t,this.scheduleRefresh()}},{key:"resize",value:function(){this.textPanel.setScale(this.context.pageContext.getScale());var e=this.makeOptions();this.table.resize(e),this.hostContainer.setStyle(e.whole.textStyle)}},{key:"cleanSelection",value:function(){this.table.cleanSelection()}}]),a}(Tj),wX=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},xX=function(e){k()(a,e);var t=w()(a);function a(){var s;return I()(this,a),(s=t.apply(this,arguments)).onUiSortChanged=function(e){e?s.context.store.setUiSortInfo(e):s.context.store.setUiSortInfo({}),s.refresh()},s.onCrossFilter=function(a,e){var t=s.context,n=t.store,i=t.pageContext,r=e.map(function(e){return e.map(function(e,t){return{originalValue:e,value:e,field:a[t]}})}),o=Yz({selectedFields:r});n.canScenarioTriggerCrossFilter()&&n.setCrossFilter(o)&&i.pageModel.doCrossFilter(n.id);s.context.eventHub.fireSelectionChange(Vu(o),s.pivotSettingHelper.getTinyProfile())},s.clearCrossFilter=function(){var e=s.context,t=e.store,a=e.pageContext;t.clearCrossFilter()&&(s.container.cleanSelection(),a.pageModel.doCrossFilter(t.id))},s.outerClickHandler=function(e){var t=s.context.store,a=t.getDashboardConfig().crossFilterMode;jz(e,t.id,a)&&s.clearCrossFilter()},s.innerClickHandler=function(e){e===s.context.store.id&&s.clearCrossFilter()},s}return D()(a,[{key:"onAggChange",value:function(e,t){C()(b()(a.prototype),"onAggChange",this).call(this),this.pivotSettingHelper=t,this.scenarioTitle.updateTitle(t),this.container.setAggData(t,e),this.container.reset(),this.actionBarContainer.update(t)}},{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(a.prototype),"init",e)}}});return wX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,this.scenarioModel=new CX(this.id,{viewerType:H.DashboardViewerType.Lite,appViewState:H.AppViewMode.Viewer,property:this.context.store.getProperties(),scale:this.context.pageContext.getScale()}),this.scenarioModel.on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),this.scenarioModel.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),this.scenarioModel.on(H.ScenarioEvent.Repaint,function(){i.container.repaint()}),n.pageModel.addScenario(this.scenarioModel,!0),this.scenarioTitle.init(a.getTitle(),n.getScale()),this.container=new kX,this.bodyHost.addChildren(this.container),this.container.init({onUiSortChanged:this.onUiSortChanged,onCrossFilter:this.onCrossFilter,onCleanCrossFilter:this.clearCrossFilter,onKeepOrExclude:this.onKeepOrExclude}),n.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),n.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler);case 15:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){C()(b()(a.prototype),"willUnmount",this).call(this);var e=this.context.pageContext;e.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),e.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler)}},{key:"refresh",value:function(){this.scenarioModel.refreshData()}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.reset(),this.container.resize()}}]),a}(JK),AX=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"buildRes",value:function(e,t){var a,n,i,r,o=null;if(e){var s=t.getPivotSetting().imageSource,l=null===(a=ae.head(null==s?void 0:s.values))||void 0===a?void 0:a.display,u=null!==(i=null===(n=ae.head(null==s?void 0:s.values))||void 0===n?void 0:n.options.renderSetting)&&void 0!==i?i:yk.ImageURL;o=null===(r=ae.head(e.data))||void 0===r?void 0:r[l],u===yk.ImageBinary&&(o=Pu(o))}return{url:o,aggregatedData:e}}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),a}(eO),IX=function(e){k()(n,e);var a=w()(n);function n(){var e;I()(this,n),(e=a.call(this)).isSrcDirty=!1;var t=new hU({tag:"div",className:"layout-full-flex"});return e.addChildren(t),e.host=t,e}return D()(n,[{key:"renderImg",value:function(e){var t=ae.merge($y(this.properties.imageSetting),{backgroundImage:"url(".concat(e,")")});this.host.setStyle(t)}},{key:"refresh",value:function(){var e,a=this;if(this.isSrcDirty){null!==(e=this.imgLoaderQ)&&void 0!==e&&e.cancel();var t=(this.src||this.defaultSrc).toString();if(t){var n=d$.accessService.attachBaseUrlAndToken(t);this.context.eventHub.fireLoadStart(),this.context.eventHub.fireRender(),this.imgLoaderQ=fX(n).then(function(e){a.renderImg(e)},function(){a.renderImg("")}).finally(function(){var e,t;null!==(e=a.context.eventHub)&&void 0!==e&&e.fireRendered(),null!==(t=a.context.eventHub)&&void 0!==t&&t.fireLoadComplete()})}}}},{key:"hasValidSrc",value:function(){return!!this.src||!!this.defaultSrc}},{key:"init",value:function(e){this.properties=e.properties,this.defaultSrc=this.properties.imageSetting.id,this.src=e.src,this.host.addEventListener("click",e.onClick)}},{key:"setSrc",value:function(e){this.isSrcDirty=this.src!==e,this.src=e}},{key:"willUnmount",value:function(){var e;null!==(e=this.imgLoaderQ)&&void 0!==e&&e.cancel()}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}},{key:"enableLinkSetting",value:function(){this.host.setStyle({cursor:"pointer"})}},{key:"disableLinkSetting",value:function(){this.host.setStyle({cursor:"default"})}}]),n}(mU),PX=function(e){k()(a,e);var t=w()(a);function a(){var i;return I()(this,a),(i=t.call(this)).onClickHandler=function(e){e.stopPropagation();var t=i.context.store.getDrillThrough();1===t.length?i.onJumpTo(t[0]):1<t.length&&i.contextMenu.show(e.clientX,e.clientY)},i.onJumpTo=function(e){var t=i.context,a=t.store,n=t.pageContext;i.jumpToManager.jumpTo(e,a.id,n)},i.textPanel=new OU({text:Ft("error.noImageInRunTime"),className:"wyn-chart-text-panel wyn-placeholder",onClick:i.onClickHandler}),i.jumpToManager=new Pj,i.hostContainer.addChildren(i.textPanel),i}return D()(a,[{key:"init",value:function(){this.picture=new IX;var e=this.context.store.getDrillThrough();e.length?this.picture.enableLinkSetting():this.picture.disableLinkSetting(),this.contextMenu=new QU({items:e.map(function(e){return{value:e,label:e.name}}),onSelect:this.onJumpTo,backdrop:!0,maxHeight:300,maxWidth:200});var t=this.context.store.getProperties();this.picture.init({properties:t,onClick:this.onClickHandler}),this.hostContainer.addChildren(this.picture,this.contextMenu),this.textPanel.setTextStyle(t.contentTextStyle,.9*this.context.pageContext.getScale())}},{key:"resize",value:function(){this.textPanel.setScale(.9*this.context.pageContext.getScale())}},{key:"setUrl",value:function(e){this.url=e,this.scheduleRefresh()}},{key:"refresh",value:function(){this.picture&&(this.picture.setSrc(this.url),!this.picture.hasValidSrc()?(this.textPanel.show(),this.picture.hide()):(this.textPanel.hide(),this.picture.show(),this.picture.refresh()))}},{key:"destroy",value:function(){C()(b()(a.prototype),"destroy",this).call(this),this.jumpToManager&&this.jumpToManager.destroy()}}]),a}(Tj),_X=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},MX=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).container=new PX,e.bodyHost.addChildren(e.container),e}return D()(a,[{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(a.prototype),"init",e)}}});return _X(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,this.container.init(),(i=new AX(this.id)).on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),i.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),i.on(H.ScenarioEvent.Error,this.onAggError),this.scenarioModel=i,n.pageModel.addScenario(i,!0);case 10:case"end":return e.stop()}},e,this)}))}},{key:"refresh",value:function(){this.scenarioModel.refreshData()}},{key:"resize",value:function(){this.container.resize()}},{key:"shouldRefresh",value:function(){var e,t,a,n=null!==(e=this.scenarioModel.getUsedDatasetIds())&&void 0!==e?e:[],i=null!==(t=this.scenarioModel.getUsedParameters())&&void 0!==t?t:[],r=null!==(a=this.scenarioModel.getVariableDependencies())&&void 0!==a?a:[];return Bo.a.isEmpty(n)&&Bo.a.isEmpty(i)&&Bo.a.isEmpty(r)}},{key:"onAggChange",value:function(e){C()(b()(a.prototype),"onAggChange",this).call(this),this.container.setUrl(null==e?void 0:e.url)}}]),a}(JK),LX=function(e){k()(l,e);var t=w()(l);function l(){var s;I()(this,l),(s=t.call(this)).messageHandler=function(e){var t=RB()(s),a=t.token,n=t.onClick,i=t.data,r=t.onCrossFilter,o=e.data;if(o.__scenarioToken===a)switch(o.type){case l.EventType.Ready:return void(i&&s.sendMessage(l.EventType.Update,i));case l.EventType.Click:n(e);break;case l.EventType.CrossFilter:r(o.payload);break;case l.EventType.SyncOptions:}};var e=new hU({tag:"div",className:"layout-full-flex"});return s.addChildren(e),s.host=e,s}return D()(l,[{key:"init",value:function(e){this.token=this.context.store.id,this.instance=new GU({name:this.token,srcDoc:e.srcdoc}),this.host.addChildren(this.instance),this.setSrc(e.src),window.addEventListener("message",this.messageHandler),this.onClick=e.onClick,this.onCrossFilter=e.onCrossFilter}},{key:"setData",value:function(e){this.data=e}},{key:"cleanSelection",value:function(){this.sendMessage(l.EventType.CleanSelection)}},{key:"willUnmount",value:function(){window.removeEventListener("message",this.messageHandler)}},{key:"sendMessage",value:function(e,t){var a={payload:t,type:e};this.instance.sendMessage(JSON.stringify(a),"*")}},{key:"_encodeURI",value:function(e){var t=decodeURI(e);return t=encodeURI(t)}},{key:"setSrc",value:function(e){var t=this.srcdoc,a={src:"",sandbox:"allow-scripts allow-forms allow-same-origin allow-downloads",srcDoc:""};t?(a.srcDoc=t,a.sandbox=""):a.src=e,a.src=this._encodeURI(a.src),this.instance.update(a)}},{key:"refresh",value:function(){this.sendMessage(l.EventType.Update,this.data)}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}}]),l}(mU);LX.EventType={Ready:"ready",Click:"click",CrossFilter:"crossfilter",CleanSelection:"cleanselection",Update:"update",SyncOptions:"syncoptions"};function RX(e){switch(e){case H.SlicerType.TreeSlicer:return[{value:"abc1",children:[{value:"abc1_1",children:null}]},{value:"abc2",children:[{value:"abc2_1",children:null}]},{value:"abc3",children:[{value:"abc1_1",children:null}]},{value:"abc4",children:[{value:"abc4_1",children:null}]},{value:"abc5",children:[{value:"abc5_1",children:null}]}];case H.SlicerType.LabelSlicer:return[{value:"abc1",children:null},{value:"abc2",children:null},{value:"abc3",children:null},{value:"abc4",children:null},{value:"abc5",children:null}];case H.SlicerType.RelativeDateSlicer:return[{lastDateNumber:2,nextDateNumber:2,anchorDate:"2018-06-20T12:09:51.016Z",useAnchorDate:!1,dateRelativeType:"last",dateUnit:"year",text:""},{lastDateNumber:2,nextDateNumber:2,anchorDate:"2018-06-20T12:09:51.016Z",useAnchorDate:!1,dateRelativeType:"next",dateUnit:"year",text:""},{lastDateNumber:3,nextDateNumber:2,anchorDate:"2018-06-20T12:09:51.016Z",useAnchorDate:!1,dateRelativeType:"lastN",dateUnit:"year",text:""}];default:return[]}}function VX(e){switch(e){case H.SlicerType.TreeSlicer:return[{formatValue:function(e){return e},name:"column1"},{formatValue:function(e){return e},name:"column2"}];case H.SlicerType.LabelSlicer:return[{formatValue:function(e){return e},name:"column1"}];default:return[]}}var NX,EX,FX,OX,HX,BX,UX,zX=function(e){k()(a,e);var t=w()(a);function a(){var i;return I()(this,a),(i=t.call(this)).onCrossFilterHandler=function(e){var t=RB()(i).pivotSettingHelper;if(e.settings.length){var a=t.getAllUsedColumnsDisplayMapping(),n={columnNames:e.columnNames.map(function(e){return a[e].name}),range:{items:function a(e){return e.map(function(e){var t={value:e.columnValue};return e.children&&e.children.length&&(t.children=a(e.children)),t})}(e.settings)},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:!1};i.onCrossFilter(n)}else i.onCrossFilter()},i.onClickHandler=function(){i.context.pageContext.pageModel.doOuterClick(i.context.store.id)},i.outerClickHandler=function(e){var t=i.context.store,a=t.getDashboardConfig().crossFilterMode;jz(e,t.id,a)&&i.cleanSelection()},i.innerClickHandler=function(e){e===i.context.store.id&&i.onCrossFilter()},i.textPanel=new OU({text:Ft("webContent.emptyInRunTime"),className:"wyn-chart-text-panel wyn-placeholder"}),i.instance=new LX,i.hostContainer.addChildren(i.textPanel,i.instance),i}return D()(a,[{key:"init",value:function(e){this.onCrossFilter=e.onCrossFilter;var t=this.context.store.getProperties(),a=t.srcdoc;this.instance.init({src:this._makeUrl(e.src),srcdoc:a,onClick:this.onClickHandler,onCrossFilter:this.onCrossFilterHandler}),this.textPanel.setTextStyle(t.contentTextStyle,.9*this.context.pageContext.getScale());var n=this.context.pageContext;n.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),n.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler)}},{key:"resize",value:function(){this.textPanel.setScale(.9*this.context.pageContext.getScale())}},{key:"_makeUrl",value:function(e){var t=this.context.store.getProperties(),a=t.template,n=t.enableToken,i="";return a?i=d$.accessService.attachBaseUrlAndToken(a):e&&(i=e,n&&(i=d$.accessService.attachBaseUrlAndToken(i))),i}},{key:"setSrc",value:function(e){var t=this._makeUrl(e);this.instance.setSrc(t)}},{key:"setData",value:function(e,t){this.aggregatedData=e,this.pivotSettingHelper=t,this.scheduleRefresh()}},{key:"refresh",value:function(){if(this.instance){var e=this._makeWebContentData();this.instance.setData(e);var t=this.context.store.getProperties();!t.src&&!t.template&&!t.srcdoc?(this.textPanel.show(),this.instance.hide()):(this.textPanel.hide(),this.instance.show(),this.instance.refresh())}}},{key:"_makeOptions",value:function(e){var t={};if(!e)return t;try{t=JSON.parse(e)}catch(e){}return t}},{key:"_makeWebContentData",value:function(){var e=this.aggregatedData,t=this.context.store.getProperties().customSetting;return e?{aggregation:{data:e.data,values:e.profile.values.values.map(function(e){return e.display}),dimensions:e.profile.dimensions.values.map(function(e){return e.display}),series:e.profile.series.values.map(function(e){return e.display})},options:this._makeOptions(t)}:{aggregation:{data:[],values:[],dimensions:[],series:[]},options:this._makeOptions(t)}}},{key:"cleanSelection",value:function(){this.instance.cleanSelection()}},{key:"willUnmount",value:function(){var e=this.context.pageContext;e.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),e.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler)}}]),a}(Tj),KX=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},jX=function(e){k()(a,e);var t=w()(a);function a(){var i;return I()(this,a),(i=t.call(this)).onCrossFilterHandler=function(e){var t=i.context,a=t.store,n=t.pageContext;i.context.eventHub.fireSelectionChange(Vu(e),i.pivotSettingHelper.getTinyProfile()),a.canScenarioTriggerCrossFilter()&&(e?a.setCrossFilter(e)&&n.pageModel.doCrossFilter(i.id):a.clearCrossFilter()&&n.pageModel.doCrossFilter(i.id))},i.container=new zX,i.bodyHost.addChildren(i.container),i}return D()(a,[{key:"getActualSrc",value:function(){return KX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.context.store.getProperties(),a="",t.src)return this.onLoadingStateChange(!0),e.prev=4,e.next=7,lh(t.src,this.context.store.id,[],!0);e.next=15;break;case 7:a=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.prev=12,this.onLoadingStateChange(!1),e.finish(12);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this,[[4,10,12,15]])}))}},{key:"syncActualSrc",value:function(){return KX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getActualSrc();case 2:t=e.sent,this.container.setSrc(t);case 4:case"end":return e.stop()}},e,this)}))}},{key:"init",value:function(){var e=this,s=Object.create(null,{init:{get:function(){return C()(b()(a.prototype),"init",e)}}});return KX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,e.next=5,this.getActualSrc();case 5:i=e.sent,this.container.init({src:i,onCrossFilter:this.onCrossFilterHandler}),this.scenarioTitle.init(a.getTitle(),n.getScale()),(r=new aO(this.id)).on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),r.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),r.on(H.ScenarioEvent.Error,this.onAggError),r.on(H.ScenarioEvent.RefreshVariable,function(){o.syncActualSrc()}),this.scenarioModel=r,n.pageModel.addScenario(r,!0);case 15:case"end":return e.stop()}},e,this)}))}},{key:"onAggChange",value:function(e,t){C()(b()(a.prototype),"onAggChange",this).call(this),this.pivotSettingHelper=t,this.scenarioTitle.updateTitle(t),this.container.setData(e,t),this.syncActualSrc()}},{key:"willUnmount",value:function(){C()(b()(a.prototype),"willUnmount",this).call(this)}},{key:"refresh",value:function(){this.scenarioModel.refreshData()}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.resize()}}]),a}(JK),WX=function(e,t,a,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":E()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(o=(r<3?i(o):3<r?i(t,a,o):i(t,a))||o);return 3<r&&o&&Object.defineProperty(t,a,o),o},GX=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},YX=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e)).getRealSliceFilter=function(e,t,a,n){if(null==a)return a;var i=t.getUsedDimensionItems().map(function(e){return e.name}),r=eu({rule:H.FilterRule.GENERAL,range:{items:a.values},columnNames:i});return n===Yn&&(r=cu(r)),oh()(a,{values:{$set:r.items},isParameterValue:{$set:Vl(a.values)}})},a.context=t,a}return D()(i,[{key:"makeItems",value:function(e,t,a,n){var i=this.context.property,r=ae.head(n),o=Oy(t),s=Oy(a),l=Bo.a.map(e,function(e){var t=xl(e.value);return{value:e.value,display:e.display,inAffectedList:null!=o[t],selected:null!=s[t],formatValueFn:r.formatValue}});return pC(l,i.showNullItems,i.showEmptyStringItems)}},{key:"makeSlicerItems",value:function(e,t,a){if(!e){var n=RX(H.SlicerType.LabelSlicer),i=VX(H.SlicerType.LabelSlicer);return this.makeItems(n,n,[],i)}var r=e.completeData,o=e.affectedData,s=a.getUsedDimensionItems();return this.makeItems(r.data,o.data,(null==t?void 0:t.values)||[],s)}},{key:"buildRes",value:function(e,t){var a,n=t.clone(),i=this.context.property,r=i.nullItemsString,o=i.emptyItemsString;n.setOption({nullString:r,emptyString:o});var s=this.data.options.sliceFilters&&this.data.options.sliceFilters[0],l=this.getRealSliceFilter(this.context.appViewState,n,s,this.context.property.selectionMode),u=null===(a=null==l?void 0:l.target)||void 0===a?void 0:a.map(function(e){return{name:e.column}}),c=(null==l?void 0:l.filterType)===H.VisualFilterType.Tree?Object.assign(Object.assign({},l),{values:l.isParameterValue?Hl(l.values,u,n.getDatasetId()):Ol(l.values,u,n.getDatasetId(),Ml)}):l,d=this.makeSlicerItems(e,c,n);return{sliceFilter:this.context.appViewState===H.AppViewMode.Designer?s:c,aggregatedData:e,items:d}}},{key:"fetchAggregatedData",value:function(e,t){var y=1<arguments.length&&void 0!==t?t:{};return GX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.sync(),null!=y&&y.context&&this.setContext(null==y?void 0:y.context),t=this.getDatasetId(),a=this.getSimplePivotSettings(t),n=this.getDataViewHelper(this.getDatasetId(),a[0]),a.length&&n.isReady()){e.next=12;break}return i=this.buildRes(void 0,n),this.notifyRefreshData(i,n,y),this.cleanDataCache(),e.abrupt("return");case 12:if(n.hasSetting()){e.next=16;break}return r=this.buildRes(void 0,n),this.notifyRefreshData(r,n,y),e.abrupt("return");case 16:if(o=this.updateDataViews(this.data,n,null==y?void 0:y.aggregateRequestType),s=N()(o,2),l=s[0],u=s[1],this.preUpdate(),c=this.completeDataCache,d=this.affectedDataCache,l)return e.next=23,this.fetchDataViewAsync(l,t,y.sessionId);e.next=27;break;case 23:c=e.sent,this.completeDataCache=c,this.updateSliceFilters(),null===d&&(d=c);case 27:if(u)return e.next=30,this.fetchDataViewAsync(u,t,y.sessionId);e.next=32;break;case 30:d=e.sent,this.affectedDataCache=d;case 32:this.postUpdate(),c&&d&&(p={completeData:c,affectedData:d},h=this.buildRes(p,n),this.notifyRefreshData(h,n,y));case 34:case"end":return e.stop()}},e,this)}))}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getUsedDatasetIds();if(!this.shouldRefreshData(a))return this.postUpdate(),void this.fetchAggregatedData(a,e);this.fetchSchema(a).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}},{key:"refreshSlicerFilter",value:function(){var h;return GX(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getDatasetId(),a=this.getSimplePivotSettings(t),n=this.getDataViewHelper(this.getDatasetId(),a[0]),i=n.clone(),r=this.context.property,o=r.nullItemsString,s=r.emptyItemsString,i.setOption({nullString:o,emptyString:s}),l=this.data.options.sliceFilters&&this.data.options.sliceFilters[0],u=this.getRealSliceFilter(this.context.appViewState,i,l,this.context.property.selectionMode),c=null===(h=null==u?void 0:u.target)||void 0===h?void 0:h.map(function(e){return{name:e.column}}),d=(null==u?void 0:u.filterType)===H.VisualFilterType.Tree?Object.assign(Object.assign({},u),{values:u.isParameterValue?Hl(u.values,c,i.getDatasetId()):Ol(u.values,c,i.getDatasetId(),Ml)}):u,p={sliceFilter:this.context.appViewState===H.AppViewMode.Designer?l:d},this.emitRefreshSlicerFilterEvent(p.sliceFilter);case 12:case"end":return e.stop()}},e,this)}))}}]),i}(HM),qX=YX=WX([OF],YX),JX=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),e.hostContainer.addChildren(e.textPanel),e}return D()(a,[{key:"setData",value:function(e,t,a){var n;if(this.data=e,this.pivotSettingHelper=t,(null==a?void 0:a.filterType)===H.VisualFilterType.Tree){var i=null==t?void 0:t.getDatasetId(),r=null===(n=null==a?void 0:a.target)||void 0===n?void 0:n.map(function(e){return{name:e.column}}),o=a.isParameterValue?Hl(a.values,r,i):Ol(a.values,r,i,Ml);this.sliceFilter=Object.assign(Object.assign({},a),{values:o})}else this.sliceFilter=a;this.scheduleRefresh()}},{key:"setSlicerFilter",value:function(e){this.sliceFilter=e,this.container.setFilter(e)}},{key:"renderProperty",value:function(){}},{key:"resize",value:function(){this.container.resize()}}]),a}(Tj);(EX=NX=NX||{}).Horizontal="Horizontal",EX.Vertical="Vertical",(OX=FX=FX||{}).Label="Label",OX.List="List",OX.Button="Button Group",(BX=HX=HX||{})[BX.Left=1]="Left",BX[BX.Center=2]="Center",BX[BX.Right=3]="Right";var XX={items:[],values:[],direction:NX.Horizontal,alignment:HX.Left,wordWrap:!1,autoWidth:!1,isMultiSelect:!1,onSelect:function(){return{}},segmentCount:100,docTheme:{colors:{}},options:{}},QX={display:Ft("dialogs.filter.selectAll"),value:"$all",styleClassName:"label-slicer-item wyn-h-8"},ZX=(UX={},V()(UX,HX.Left,"wyn-justify-start"),V()(UX,HX.Center,"center"),V()(UX,HX.Right,"right"),UX),$X=function(e){k()(m,e);var g=w()(m);function m(e){var s;I()(this,m),(s=g.call(this))._renderCursor=0,s.onSelect=function(e){e.stopPropagation();var t=s._config.onSelect,a=e.target;if(a.hasAttribute("data-index")&&t){var n=a&&+a.getAttribute("data-index");if(-1<n){var i=s._config.items[n];if(i){var r=i.value,o=s._config.values.indexOf(r);-1===o?r===QX.value?s._config.values.length===s._config.items.length-1?(s._config.values=[],s._config.exclude=!1):(s._config.values=[],s._config.exclude=!0):s._config.values.push(r):(s._config.values.splice(o,1),0===s._config.values.length&&(s._config.exclude=!1)),s._config.isMultiSelect||(s._config.values=-1<o?s._config.values.reduce(function(e,t){return t===r&&e.push(t),e},[]):[r]),t(s._config.values,s._config.exclude)}}}},s.loadMore=function(){var e=s._config.segmentCount;s._renderCursor=s._renderCursor+e,s.renderPartial()};var t=e.docTheme.colors.Hyperlink,a=e.options;document.querySelector(".wyn-dashboard-viewer-lite").style.setProperty("--active-item-color",t),s._config=Object.assign(Object.assign({},XX),e),s._config.isMultiSelect&&s._config.items.unshift(QX);var n=s._config,i=n.id,r=n.direction,o=n.wordWrap,l=n.alignment,u=r===NX.Vertical?"vertical":"horizontal",c="no-wrap",d=ZX[HX.Left];r===NX.Horizontal&&(c=o?"wrap":(d=ZX[l],"no-wrap"));var p=new hU({tag:"div",className:"label-slicer-wrapper wyn-w-full wyn-h-full wyn-whitespace-nowrap  ".concat(c," ").concat(d)});s._container=new hU({tag:"div",className:"label-slicer-viewer ".concat(u," wyn-flex-grow"),id:i});var h=new hU({tag:"div",className:"label-slicer-viewer-scrollContainer ".concat(u)});h.addChildren(s._container),p.addChildren(h),s._wrapper=p,s._scrollContainer=h,s._loadMore=new hU({tag:"div",className:"next-N wyn-flex label-slicer-item",innerHTML:"<span>".concat(Ft("slicers.showMore"),"</span>")});var y=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"});return s._textPanel=y,s.addChildren(s._textPanel),s.addChildren(p),s.loadMore(),s._container.addEventListener("click",s.onSelect),s._loadMore.addEventListener("click",s.loadMore),Zy(a?{options:Object.assign(Object.assign({},a),{slicerStyle:e.style}),node:p.getRef(),docTheme:e.docTheme}:{options:{slicerStyle:e.style},node:p.getRef(),docTheme:e.docTheme}),s}return D()(m,[{key:"setNodataStyle",value:function(e,t){e&&(this._textPanel.setTextStyle(e.textStyle,t),this._textPanel.seNoData(e))}},{key:"setItems",value:function(e){var t,a=0<arguments.length&&void 0!==e?e:[];this._renderCursor=0,a.length?(this._config.items=a,this._config.isMultiSelect&&this._config.items.unshift(QX),this._lastSearchText?this.search(this._lastSearchText):this.loadMore(),this._textPanel.hide(),this._wrapper.setStyle({display:"block"})):(this._container.setInnerHTML(""),this._textPanel.show(),this._wrapper.setStyle({display:"none"})),null!==(t=this.scrollbar)&&void 0!==t&&t.update()}},{key:"_setActive",value:function(t,e){var a=this._container.getRef();if(a){var n=this._config.items.findIndex(function(e){return e.value===t}),i=a.querySelector('div[data-index="'.concat(n,'"]'));i&&(e?i.classList.add("active"):i.classList.remove("active"))}}},{key:"setValues",value:function(e){var n=this,i=(this._config.values=e).length===this._config.items.length-1&&this._config.isMultiSelect?[QX.value].concat(R()(e)):e;this._config.items.forEach(function(e){var t=e.value,a=-1<i.indexOf(t);n._setActive(t,a)})}},{key:"setAllValues",value:function(a){var n=this;this._config.values=a?this._config.items.filter(function(e){return e.value!==QX.value}).map(function(e){return e.value}):[],this._config.items.forEach(function(e){var t=e.value;n._setActive(t,a)})}},{key:"setExclude",value:function(e){this._config.exclude=e}},{key:"refresh",value:function(e){e&&(this._config=Object.assign(Object.assign({},this._config),e)),this._render()}},{key:"search",value:function(e){if(this._lastSearchText=e){var i=new RegExp(e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),"gi"),r=function(e){return!(i.test(e.display)||(t=e.value,QX.value===t));var t};this._config.items=this._config.items.map(function(e,t){var a=r(e);if(a)return Object.assign(Object.assign({},e),{hidden:a});var n=e.display;return Object.assign(Object.assign({},e),{hidden:a,highlight:n.replace(i,function(e){return m.HighlightTextTemplateCompile({text:e,index:t})}),display:n})}),this._renderCursor=this._config.items.length-1}else this._config.items=this._config.items.map(function(e){return Object.assign(Object.assign({},e),{hidden:!1,highlight:""})}),this._renderCursor=0;return this.loadMore(),this._config.items.filter(function(e){return!e.hidden&&e.value!==QX.value}).map(function(e){return e.value})}},{key:"_createItem",value:function(e,t){if(e){var a=e.styleClassName;return e.hidden&&(a+=" wyn-hidden"),m.ItemTemplateCompile(Object.assign(Object.assign({},e),{index:t,styleClassName:a,tooltip:e.display,display:e.highlight?e.highlight:e.display}))}return""}},{key:"_render",value:function(e){var a=this,t=e||this._config.items,n=t.filter(function(e){return!e.hidden});if(this._config.isMultiSelect?1===n.length:0===n.length)this._wrapper.setStyle({display:"none"}),this._textPanel.show();else{this._wrapper.setStyle({display:"block"}),this._textPanel.hide();var i=t.map(function(e,t){return a._createItem(e,t)});this._container.setInnerHTML(i.join(""))}this.setValues(this._config.values)}},{key:"renderPartial",value:function(){var e,t,a=this._config.isMultiSelect;this._render(this._config.items.slice(0,this._renderCursor+(a?1:0)).filter(function(e){return e})),0<this._config.items.length-this._renderCursor&&null!==(e=this._container.getRef())&&void 0!==e&&e.append(this._loadMore.getRef()),null!==(t=this.scrollbar)&&void 0!==t&&t.update()}},{key:"didMountOnRoot",value:function(){this.scrollbar=new dp.a(this._scrollContainer.getRef(),{minScrollbarLength:30})}},{key:"willUnmount",value:function(){this.scrollbar.destroy()}}]),m}(gU);$X.HighlightTextTemplateCompile=AU.a.compile('<strong class="highlight" data-index="{{index}}">{{text}}</strong>'),$X.ItemTemplateCompile=AU.a.compile('\n    {{~#if styleClassName~}}\n      <div class="label-item {{styleClassName}}" data="{{value}}" data-index="{{index}}" title="{{tooltip}}">\n        <span data-index="{{index}}">{{{display}}}</span>\n      </div>\n    {{~else~}}\n      <div class="label-item wyn-flex wyn-flex-align-center wyn-justify-center wyn-flex-no-shrink wyn-h-8 wyn-center-text wyn-justify-center" data="{{value}}" data-index="{{index}}" title="{{tooltip}}">\n        <span data-index="{{index}}">{{{display}}}</span>\n      </div>\n    {{~/if~}}\n  ');var eQ=$X,tQ=function(e){k()(s,e);var o=w()(s);function s(){var r,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];I()(this,s),(r=o.call(this)).isMock=!1,r.showTitle=!1,r.setInternalBorder=function(e){var t=r.context.store,a=null==t?void 0:t.getProperties(),n=a.internalBorderColor,i=a.internalBorderSize;e&&(n||i)&&(e.setProperty("--internal-border-color",n),e.setProperty("--internal-border-width","".concat(i,"px")))};var t=new hU({tag:"div",className:"layout-full-flex"}),a=new hU({tag:"div",className:"wyn-chart-overlay"}),n=new hU({tag:"div",className:"wyn-label-slicer-body"}),i=new hU({tag:"div",className:"wyn-label-slicer-header"});return t.addChildren(i,n),r.addChildren(t,a),r.host=t,r.mockOverlay=a,r.header=i,r.body=n,r.scenarioTitle=new GK,r.forceHideTitle=e,n.addChildren(r.scenarioTitle),r}return D()(s,[{key:"init",value:function(e){var t;this.onFilterChange=e.onFilterChange;var a=this.context,n=a.store,i=a.pageContext,r=n.getProperties();this.showTitle=r.titlePosition===Jn.Left&&!this.forceHideTitle,this.showTitle&&(this.body.addClassName("inline-slicer"),this.scenarioTitle.init(n.getTitle(),i.getScale())),this.renderFontSize(),this.useMockStyle(!0);var o=null===(t=this.host)||void 0===t?void 0:t.getRef().style;this.setInternalBorder(o)}},{key:"renderFontSize",value:function(){var e=this.context,t=e.store,a=e.pageContext,n=t.getProperties();this.host.setStyle(Object.assign(Object.assign({},n.contentTextStyle),{fontSize:Jc(n.contentTextStyle.fontSize,a.getScale()),fontWeight:Uu(n.contentTextStyle.fontWeight)}))}},{key:"useMockStyle",value:function(e){e!==this.isMock&&(this.isMock=e,this.host.setStyle({opacity:e?.5:1}),this.mockOverlay.setStyle({display:e?"block":"none"}))}},{key:"resize",value:function(){this.showTitle&&this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.renderFontSize()}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}}]),s}(mU),aQ=function(e){k()(s,e);var t=w()(s);function s(){var a;return I()(this,s),(a=t.apply(this,arguments)).lastSearchResult=[],a.onSelectionChange=function(e,t){a.filter.setValues(e.map(function(e){return{value:e}})),null!=t&&a.filter.setExclude(t),a.onFilterChange(a.filter.toJSON())},a}return D()(s,[{key:"getInitConfig",value:function(){var e=this.context,t=e.store,a=e.pageContext,n=t.getProperties(),i=t.getDocTheme(),r=a.getScale();return{items:[],values:[],exclude:!1,direction:n.orientation,style:n.slicerStyle,wordWrap:n.isWrap,autoWidth:n.widthAdaptive,alignment:n.slicerItemsAlignment,onSelect:this.onSelectionChange,isMultiSelect:n.selectionMode===qn,docTheme:i,options:Object.assign(Object.assign({},n),{scale:r})}}},{key:"makeItems",value:function(e){return e.reduce(function(e,t){return t.inAffectedList&&e.push({display:t.display||t.formatValueFn(t.value),value:t.value,styleClassName:"label-slicer-item"}),e},[])}},{key:"init",value:function(e){var t=this,a=this.context.store.getProperties();C()(b()(s.prototype),"init",this).call(this,e),this.searchBox=new YU({onChange:function(e){t.lastSearchResult=t._labelSlicer.search(e)},onCheck:function(){t.lastSearchResult&&0<t.lastSearchResult.length&&(a.selectionMode===qn?t.onSelectionChange(t.lastSearchResult):t.onSelectionChange(t.lastSearchResult.slice(0,1)))},placeholder:a.searchPlaceholder}),this.header.addChildren(this.searchBox),this.renderProperty("showSearchbox");var n=this.getInitConfig();this._labelSlicer=new eQ(n),this.body.addChildren(this._labelSlicer);var i=n.options,r=i.noData,o=i.scale;this._labelSlicer.setNodataStyle(r,o)}},{key:"setData",value:function(e,t,a,n){this.filter=new Ob([t]),this.context.eventHub.fireRender();var i=this.makeItems(e);this._labelSlicer.setItems(i),this.setFilter(a),this.scenarioTitle.updateTitle(n),this.context.eventHub.fireRendered()}},{key:"setFilter",value:function(e){e?this.filter.fromJSON(e):this.filter.setValues([]);var t=this.filter.getValues();if(0===(null==t?void 0:t.length)){var a=this.filter.getExclude();this._labelSlicer.setAllValues(a)}else this._labelSlicer.setValues(t.map(function(e){return e.value}));this._labelSlicer.setExclude(this.filter.getExclude())}},{key:"renderProperty",value:function(e){var t,a=this.context.store.getProperties();switch(e){case"showSearchbox":return void(a.allowSearch&&a.showSearchbox?(this.searchBox.show(),this.body.addClassName("wyn-label-slicer-body-with-search")):(this.searchBox.hide(),null!==(t=this._labelSlicer)&&void 0!==t&&t.search(""),this.body.removeClassName("wyn-label-slicer-body-with-search")))}}}]),s}(tQ),nQ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(e){this.container=new aQ,this.container.hide(),this.hostContainer.addChildren(this.container),this.container.init({onFilterChange:e.onSliceFiltersChange});var t=this.context.store.getProperties().noData;this.textPanel.setTextStyle(t.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(t)}},{key:"refresh",value:function(){var e,t=this.data,a=this.sliceFilter,n=this.pivotSettingHelper,i=this.context.store.getProperties(),r=i.sortOrder,o=null==t?void 0:t.items,s=null===(e=null==t?void 0:t.aggregatedData)||void 0===e?void 0:e.affectedData.profile.columns.values[0],l=dC([s],r)[0];o=ae.sort(l,o),this.container.show(),this.container.useMockStyle(!(null!=t&&t.aggregatedData)),o&&o.length||i.selectionMode!==Yn?(this.textPanel.hide(),this.container.show()):(this.textPanel.show(),this.container.hide()),this.container.setData(o,s,a,n)}},{key:"renderProperty",value:function(e){"sortOrder"!==e?this.container.renderProperty(e):this.scheduleRefresh()}}]),a}(JX),iQ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},rQ=function(e){k()(o,e);var t=w()(o);function o(){var c;return I()(this,o),(c=t.apply(this,arguments)).showTitle=!1,c.onSliceFiltersChange=function(e){var t,a=e?Object.assign({},e):null;if((null==a?void 0:a.filterType)===H.VisualFilterType.Tree){var n=c.pivotSettingHelper.getDatasetId(),i=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.map(function(e){return{name:e.column}});a.values=Ol(a.values,i,n,Ll)}c.context.store.setSlicerFilter(a?[a]:[]),c.container.setSlicerFilter(e),c.context.pageContext.pageModel.doSlicerChange(c.id),c.actionBarContainer.update()},c.onOrderClick=function(){var e=c.context.store,t=function(e){switch(e){case zn:return{nextSortOrder:Kn,tooltip:"common.asc",icon:"icon-ascending"};case Kn:return{nextSortOrder:Un,tooltip:"common.desc",icon:"icon-descending"};case Un:default:return{nextSortOrder:zn,tooltip:"common.noSort",icon:"icon-sort"}}}(e.getProperties().sortOrder);e.setProperty("sortOrder",t.nextSortOrder),c.container.renderProperty("sortOrder")},c._getRealSliceFilter=function(){var e,t=RB()(c),a=t.pivotSettingHelper,n=t.context,i=n.store.getSliceFilters()[0],r=n.store.getProperties();if(null==i)return i;var o=Vl(i.values),s=(null!==(e=d$.cacheManager.get(H.CacheType.ActiveFilter,c.scenarioModel.id))&&void 0!==e?e:[])[0];if(void 0!==s)return Object.assign(Object.assign({},s),{isParameterValue:o});var l=a.getUsedDimensionItems().map(function(e){return e.name}),u=eu({rule:H.FilterRule.GENERAL,range:{items:i.values},columnNames:l});return r===Yn&&(u=cu(u)),s=Object.assign(Object.assign({},i),{values:u.items,isParameterValue:o})},c}return D()(o,[{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(o.prototype),"init",e)}}});return iQ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,e.next=5,this.prepareSlicer();case 5:this.scenarioModel.on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),this.scenarioModel.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),this.context.pageContext.pageModel.addScenario(this.scenarioModel,!0),i=a.getProperties(),this.showTitle=i.titlePosition===Jn.Top,this.showTitle&&this.scenarioTitle.init(a.getTitle(),n.getScale());case 12:case"end":return e.stop()}},e,this)}))}},{key:"onAggChange",value:function(e,t){C()(b()(o.prototype),"onAggChange",this).call(this);var a=this.context.store.getProperties(),n=t.clone();n.setOption({nullString:a.nullItemsString,emptyString:a.emptyItemsString}),this.pivotSettingHelper=n,this.scenarioTitle.updateTitle(n);var i=this._getRealSliceFilter();this.container.setData(e,n,i),this.container.resize(),this.actionBarContainer.update(n)}},{key:"refresh",value:function(){this.context.pageContext.pageModel.doScenarioRefresh(this.id)}},{key:"onActionBarClick",value:function(e){var t=this.context,a=t.store,n=t.pageContext;switch(e){case H.ActionMenuType.CleanSliceFilter:a.setSlicerFilter([]),n.pageModel.doSlicerChange(this.id),this.container.setSlicerFilter(null);break;case H.ActionMenuType.SlicerSearch:var i=a.getProperties().showSearchbox;a.setProperty("showSearchbox",!i),this.container.renderProperty("showSearchbox");break;case H.ActionMenuType.SlicerSort:this.onOrderClick();break;default:return}this.actionBarContainer.update()}},{key:"resize",value:function(){this.container.resize(),this.showTitle&&this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale())}}]),o}(JK),oQ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},sQ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"prepareSlicer",value:function(){return oQ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.container=new nQ,this.bodyHost.addChildren(this.container),e.next=4,this.container.init({onSliceFiltersChange:this.onSliceFiltersChange,onOrderClick:this.onOrderClick});case 4:this.scenarioModel=new qX(this.id,{property:this.context.store.getProperties(),appViewState:iS.Viewer});case 5:case"end":return e.stop()}},e,this)}))}}]),a}(rQ),lQ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"makeSlicerItems",value:function(e,t,a){if(!e){var n=RX(H.SlicerType.TreeSlicer),i=VX(H.SlicerType.TreeSlicer);return this.makeItems(n,n,[],i)}var r,o=e.completeData,s=e.affectedData,l=!!o.profile.id||!!o.profile.hierarchy;return r=o.profile.display&&0<o.profile.display.values.length?a.getUsedValueItems():o.profile.id?a.getFlattenedPivotSettingItems(["id"]):o.profile.hierarchy?a.getFlattenedPivotSettingItems(["hierarchy"]):a.getUsedDimensionItems(),this.makeItems(o.data,s.data,null==t?void 0:t.values,r,l)}},{key:"makeItems",value:function(e,t,a,n,i){var r,o=4<arguments.length&&void 0!==i&&i,s=o?(r=[],function t(e){e.forEach(function(e){r.push(Object.assign(Object.assign({},e),{children:[]})),Ey(e)&&t(e.children)})}(t),r):t;return By(e,s,n,o)}}]),a}(qX),uQ=new WeakMap,cQ=function(e){var t=uQ.get(e);return t||(t={},uQ.set(e,t)),t},dQ=[],pQ=!1,hQ=function(){function t(e){I()(this,t),cQ(this).items=[],cQ(this).expansions=[{id:null,children:e.totalRootItems,offset:0,expansions:[]}],cQ(this).onItemRender=e.onItemRender,cQ(this).itemHeight=e.itemHeight,cQ(this).onDataFetch=e.onDataFetch,cQ(this).parent=e.parent,cQ(this).scrollbarClass=e.scrollbarClass||"",cQ(this).smoothScrolling=e.smoothScrolling||!1,cQ(this).diffMode=e.diffMode||"hard",cQ(this).autoWidth=e.autoWidth||!1,this.redraw=this.redraw.bind(this),window.addEventListener("resize",this.redraw),function(){var a=this,n={x:0,y:0};cQ(this).el=document.createElement("div"),cQ(this).el.setAttribute("class","VirtualScrollingTree");var e='<div class="VirtualScrollingTree-content"></div>';cQ(this).el.innerHTML="\n         ".concat(cQ(this).smoothScrolling?"":e,'\n         <div class="VirtualScrollingTree-scrollbar ').concat(cQ(this).scrollbarClass,'">\n             ').concat(cQ(this).smoothScrolling?e:"",'\n             <div class="VirtualScrollingTree-scrollbarContent"></div>\n         </div>\n     ').replace(/\n\s+/g,""),cQ(this).view={content:cQ(this).el.querySelector(".VirtualScrollingTree-content"),scrollbar:cQ(this).el.querySelector(".VirtualScrollingTree-scrollbar"),scrollbarContent:cQ(this).el.querySelector(".VirtualScrollingTree-scrollbarContent")},cQ(this).smoothScrolling||cQ(this).view.content.addEventListener("wheel",function(e){cQ(a).view.scrollbar.scrollTop+=e.deltaY},!0);function t(e){var t={x:0,y:0};t.x=n.x-e.touches[0].pageX,t.y=n.y-e.touches[0].pageY,cQ(a).view.scrollbar.scrollTop+=t.y,n.x=e.touches[0].pageX,n.y=e.touches[0].pageY}cQ(this).view.content.addEventListener("touchstart",function(e){n.x=e.touches[0].pageX,n.y=e.touches[0].pageY,pQ=!0,cQ(a).view.content.addEventListener("touchmove",t,!0)},!0),cQ(this).view.content.addEventListener("touchend",function(e){for(cQ(a).view.content.removeEventListener("touchmove",t,!0);dQ.length;)dQ.pop().remove();pQ=!1},!0);var i=0;cQ(this).view.scrollbar.addEventListener("scroll",function(e){if(!cQ(a).scrollLocked){var t=parseInt(cQ(a).view.scrollbar.scrollTop/cQ(a).itemHeight);i!==t&&(i=t,cQ(a).smoothScrolling&&(cQ(a).view.content.style.transform="translateY(".concat(t*cQ(a).itemHeight,"px)")),gQ.call(a))}},!0),cQ(this).parent.appendChild(cQ(this).el)}.call(this),this.redraw()}return D()(t,[{key:"redraw",value:function(){gQ.call(this)}},{key:"expand",value:function(e){if(!CQ.call(this,e.parent))throw new Error("Parent "+e.parent+" must be expanded to expand "+e.id);CQ.call(this,e.id)||(SQ.call(this,e),gQ.call(this))}},{key:"collapse",value:function(e){if(!CQ.call(this,e.parent))throw new Error("Parent "+e.parent+" must be expanded to collapse "+e.id);CQ.call(this,e.id)&&(TQ.call(this,e),gQ.call(this))}},{key:"scrollIntoView",value:function(t,e){var a=1<arguments.length&&void 0!==e?e:{align:"start"};if(!CQ.call(this,t.parent))throw new Error("Parent "+t.parent+" must be expanded to scroll "+t.id+" into the view");var n,i=bQ.call(this,t.parent),r=i.expansions.filter(function(e){return e.offset<t.offset}).pop();n=r?r._end+t.offset-r.offset:i._start+t.offset,"end"===a.align&&(n-=Math.floor(cQ(this).parent.offsetHeight/cQ(this).itemHeight)-1),cQ(this).view.scrollbar.scrollTop=n*cQ(this).itemHeight}},{key:"destroy",value:function(){window.removeEventListener("resize",this.redraw),cQ(this).el.remove()}}]),t}();function yQ(e){var t=Math.floor(cQ(this).parent.offsetHeight/cQ(this).itemHeight);cQ(this).view.scrollbar.style.height=t*cQ(this).itemHeight+"px",cQ(this).view.scrollbarContent.style.height=e*cQ(this).itemHeight+"px";var a=e<t?0:function(){var e=document.createElement("div");e.style.overflowY="scroll",e.setAttribute("class",cQ(this).scrollbarClass),e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var a=100-Math.floor(t.getBoundingClientRect().width);return document.body.removeChild(e),a}.call(this);cQ(this).smoothScrolling?(cQ(this).view.scrollbar.style.width="100%",cQ(this).view.content.style.width="calc(100% - 1px)"):(cQ(this).autoWidth?cQ(this).view.content.style.width="calc(100% - 1px)":cQ(this).view.content.style.width=Math.floor(cQ(this).el.getBoundingClientRect().width)-a-1+"px",cQ(this).view.scrollbar.style.width=a+1+"px",cQ(this).view.content.style.height=t*cQ(this).itemHeight+"px")}function gQ(){var e=Math.ceil(cQ(this).parent.offsetHeight/cQ(this).itemHeight),t=Math.floor(cQ(this).view.scrollbar.scrollTop/cQ(this).itemHeight),a=function(l,u){var c=[];cQ(this).expansions;(function(){!function e(t){t.sort(function(e,t){return e.offset-t.offset});for(var a=0;a<t.length;a++)e(t[a].expansions)}(cQ(this).expansions)}).call(this),function(){!function r(o,s,l){o.forEach(function(e,t){var a;e._level=l;var n=o[t-1];a=n?n._end+1+(e.offset-n.offset):s+1+e.offset,e._start=a;var i=e.children;vQ(e.expansions,function(e){i+=e.children}),e._end=e._start+i-1,r(e.expansions,e._start,l+1)})}(cQ(this).expansions,-1,0)}.call(this);function d(e,t,a,n){return!(a<e&&n<e||t<a&&t<n)}return function o(e,s){e.forEach(function(e){if(d(l,l+u,e._start,e._end)){var t=Math.max(l,e._start);var a=Math.min(l+u-1,e._end);var n=Math.max(0,Math.min(a-t+1,u));if(s){s.limit-=n;if(l>e._start){var i=e._end-e._start+1-n;if(i>0){s.offset-=i}}}var r={parent:e.id,offset:l>e._start?l-e._start:0,limit:Math.min(n,u)};c.push(r);o(e.expansions,r)}else if(l>e._end&&s){s.offset-=e._end-e._start+1}})}(cQ(this).expansions),c}.call(this,t,e);cQ(this).request=a,cQ(this).onDataFetch(a,function(e){var i=this,r=[];e=JSON.parse(JSON.stringify(e));var t=0;vQ(cQ(this).expansions,function(e){t+=e.children}),yQ.call(this,t);for(var a=0;a<e.length;a++)for(var n=0;n<e[a].items.length;n++){var o=e[a].items[n];o.original=JSON.parse(JSON.stringify(o)),o.offset=cQ(this).request[a].offset+n,o.parent=e[a].parent}if(e.forEach(function(t){var e=r.findIndex(function(e){return e.id===t.parent});r=-1<e?r.slice(0,e+1).concat(t.items).concat(r.slice(e+1)):t.items.concat(r)}),0===cQ(this).items.length||"hard"===cQ(this).diffMode){for(;cQ(this).items.length;)if(pQ){var s=cQ(this).items.pop();s.el.style.display="none",dQ.push(s.el)}else cQ(this).items.pop().el.remove();r.forEach(function(e){var t=fQ.call(i,e);cQ(i).view.content.appendChild(t.el),cQ(i).items.push(t)})}else if("soft"===cQ(this).diffMode){var l=[],u=[];cQ(this).items.forEach(function(e,t){for(var a=!1,n=0;n<r.length;n++)if(r[n].id===e.id){mQ.call(i,e.el,r[n],!0),u.push(n),a=!0;break}a||l.push(t)});var c=cQ(this).view.scrollbar.scrollTop;cQ(this).scrollLocked=!0;for(var d=l.length-1;0<=d;d--){var p=l[d];cQ(this).items[p].el.remove(),cQ(this).items.splice(p,1)}for(var h=0;h<r.length;h++)if(-1===u.indexOf(h)){var y=fQ.call(this,r[h]);cQ(this).view.content.insertBefore(y.el,cQ(this).view.content.children[h]),cQ(this).items.splice(h,0,y)}cQ(this).view.scrollbar.scrollTop=c,cQ(this).scrollLocked=!1}}.bind(this))}function mQ(e,t,a){var n=this;cQ(this).onItemRender(e,F()({},t.original,{expanded:CQ.call(this,t.id),indent:function(e){return bQ.call(this,e.parent,cQ(this).expansions)._level}.call(this,t),toggle:function(){CQ.call(n,t.id)?TQ.call(n,t):SQ.call(n,t),gQ.call(n)}}),a)}function fQ(e){var t=document.createElement("div");return t.setAttribute("class","VirtualScrollingTree-item"),mQ.call(this,t,e),{id:e.id,el:t}}function vQ(e,a){!function t(e){e.forEach(function(e){a(e),t(e.expansions)})}(e)}function bQ(t){var a;return vQ(cQ(this).expansions,function(e){e.id===t&&(a=e)}),a}function CQ(e){return void 0!==bQ.call(this,e)}function TQ(t){var e=bQ.call(this,t.parent).expansions,a=e.findIndex(function(e){return e.id===t.id});e.splice(a,1)}function SQ(e){(e=JSON.parse(JSON.stringify(e))).expansions||(e.expansions=[]),bQ.call(this,e.parent).expansions.push(e)}var DQ="vTree-Check-ALL",kQ=function(e){k()(x,e);var a=w()(x);function x(e){var w,t;return I()(this,x),(w=a.call(this)).textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),w.emptyPageShown=!1,w.isSelectById=!1,w._onDataFetch=function(e,t){var a,n;t(e.reduce(function(e,t){var a=w._getCurrentVisualChildren(t.parent);return e.push({parent:t.parent,items:a.splice(t.offset,t.limit)}),e},[])),null!==(a=w.scrollbarY)&&void 0!==a&&a.update(),null!==(n=w.scrollbarX)&&void 0!==n&&n.update()},w._getNodeIconClassName=function(e){var t=e.hasChild,a=e.expanded;return t?a?"node-icon icon-move-down":"node-icon icon-right-arrow":""},w._onItemRender=function(e,t,a){var n=t.index,i=t.indent,r=t.expanded?"expanded":"collapsed",o=t.visible&&w._data[n];if(o){var s=o.checkedForRender,l=0===o.children,u=0===e.children.length,c=function(e){e&&(e.indeterminate=2===s)},d=l||w._config.isMultiSelect?w.getCheckIcon(s):"",p="mdi node-checkbox-icon";d&&(p+=" ".concat(d));var h=0;w._config.isMultiSelect&&l&&(h=1);var y=w._getNodeIconClassName(o),g="".concat(1.5*i+h,"em");if(u){var m="\n          height: ".concat(w._config.rowHeight,"px;\n          line-height: 1;\n          font-size: 1em;\n          padding-left: ").concat(g,";\n        "),f=RB()(w)._searchText,v=t.display;if(f){var b=new RegExp(f.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),"gi");v=null==v?void 0:v.replace(b,function(e){return'<b class="highlight">'.concat(e,"</b>")})}e.innerHTML=x.MultiSelectionItemTemplate(Object.assign(Object.assign({},t),{status:r,checked:!1,label:v,checkboxIcon:p,expandIcon:y,style:m}));var C=e.querySelector(".expand-collapse");C&&w.addEventListener(C,"click",function(e){w._onExpandButtonClick(t.index),t.toggle()});var T=e.querySelector(".checkbox");if(T){var S=T.querySelector("input");S&&(c(S),w.addEventListener(S,"click",function(e){return e.stopPropagation()})),w.addEventListener(T,"click",function(e){e.stopPropagation(),w._onCheck(t)})}o.expanded&&(t.expanded||t.toggle())}else{c(e.querySelector(".checkbox input"));var D=e.querySelector(".checkbox span");D&&(D.className="check-mark ".concat(p));var k=e.querySelector(".expand-collapse");k&&(k.className="expand-collapse ".concat(y))}}},w._onExpandButtonClick=function(e){var t=w._data,a=e,n=t[a],i=!n.expanded;if(n.nodeInstance.expanded=i,w._data[a].expanded=i){(function(a,n){var e=Ay(a,n);if(-1===e)return[];var t=n+1,i=Bo.a.slice(a,t,e+1);return Bo.a.filter(i,function(e){var t=xy(a,e);return t.index===n||t.expanded})})(t,a).map(function(e){return e.visibleByExpanded=!0,[e.index,1,e]}).forEach(function(e){w._data.splice(e[0],e[1],e[2])})}else{var r=Ay(t,a),o=a+1;if(0<=r-o)t.slice(o,r+1).map(function(e){return e.visibleByExpanded=!1,[e.index,1,e]}).forEach(function(e){w._data.splice(e[0],e[1],e[2])})}},w._generateCheckedAllNode=function(){return{key:DQ,display:Ft("dialogs.filter.selectAll"),value:null,checked:0===w._values.length?Ty.Unchecked:Ty.Indeterminate,expanded:!1,visible:w._config.isMultiSelect,children:[],inAffectedTree:!0}},w.setIsSelectById=function(e){return w.isSelectById=e},w.getIdList=function(){if(w.isSelectById){var e=w._data.filter(function(e){return e.checked!==Ty.Unchecked}),r=[].concat(R()(e),R()(w._renderItems)).reduce(function(e,t){var a=t.key;return t.hasChild&&!t.expanded&&e.push(a),t.hasChild||e.push(a),e},[]).filter(function(e){return e!==DQ}),o=[];return w._treeNodes.forEach(function(e){return function t(a,e){if(a){var n=1<arguments.length&&void 0!==e&&e;if(n)o.push(a.id);else if(void 0!==a.id&&r.includes(a.key)){o.push(a.id);var i=w._data.findIndex(function(e){return e.key===a.key});-1<i&&w._updateTreeView(i,Ty.Checked),n=!0}a.children&&a.children.forEach(function(e){return t(e,n)})}}(e)}),o}},w._config=e,w._treeNodes=w.getTreeViewNode(w._config.nodes),w._values=w._config.values,w.flattenNodes(),w._container=new hU({tag:"div",className:"wyn-w-full wyn-h-full wyn-relative"}),w.addChildren(w._container),w._container.addChildren(w.textPanel),null!==(t=w._container.getRef())&&void 0!==t&&t.style.setProperty("--tree-item-height","".concat(w._config.rowHeight,"px")),w}return D()(x,[{key:"getTreeViewNode",value:function(e){return function a(e){return e.map(function(e){var t=Object.assign(Object.assign({},e),{expanded:!1,visible:e.inAffectedTree,children:e.children?e.children:[]});return t.children&&t.children.length&&(t.children=a(t.children)),t})}(e)}},{key:"search",value:function(e){var t=this;this._lastSearchText=e,this._searchText=e,this._treeNodes=""===e?function a(e){return null==e?void 0:e.map(function(e){var t=F()({},e);return t.children=t.children?a(t.children):null,t.expanded=!1,t})}(Hy(this._treeNodes,e)):Hy(this._treeNodes,e),this.flattenNodes();var a=this._config.isMultiSelect?1===this._renderItems.length:0===this._renderItems.length;if(a?this.emptyPageShown||(this._container.addClassName("VirtualScrollingTree-hide"),this.textPanel.show(),this.emptyPageShown=!0):(this.dispose(),this._attachVST(),this.emptyPageShown&&(this.emptyPageShown=!1,this._container.removeClassName("VirtualScrollingTree-hide"),this.textPanel.hide())),this._vst.redraw(),!a)return this._renderItems.reduce(function(e,t){var a=t.key;return t.hasChild&&!t.expanded&&e.push(a),t.hasChild||e.push(a),e},[]).filter(function(e){return e!==DQ}).map(function(e){return t._getNodePath(t._treeNodes,e.split("_"))}).concat(this._values)}},{key:"flattenNodes",value:function(){var e=this._treeNodes;this._config.isMultiSelect&&(e=[this._generateCheckedAllNode()].concat(R()(e)));function a(e){return void 0===e.visible||e.visible}var t=function(e,t,a,n){for(var i=!(1<arguments.length&&void 0!==t)||t,r=2<arguments.length&&void 0!==a?a:[],o=3<arguments.length&&void 0!==n&&n,s=null==ae.head(r)?e:ae.sort(ae.head(r),e),l=ae.reverse(s).map(function(e){return ky(i,e)}),u=[],c=[],d={},p=function(){var t=l.pop();if(t.index=c.length,c.push(t),d[t.key]=t.index,t.visible&&i&&wy(u,t),t.hasChild){var e=0<r.length?r[0]:null;o||(e=t.level+1<r.length?r[t.level+1]:null);for(var a=(null==e?t.nodeInstance.children:ae.sort(e,t.nodeInstance.children)).map(function(e){return ky(i,e,t)}),n=a.length-1;0<=n;n--)l.push(a[n])}else t.checkedForRender=t.checked};0!==l.length;)p();return i&&wy(u),c._dict=d,c}(e,this._config.isMultiSelect);if(this._data=t.map(function(e){var t;return Object.assign(Object.assign({},e),{id:e.key,children:(null===(t=e.nodeInstance.children)||void 0===t?void 0:t.filter(a).length)||0})}),this._renderItems=this._data.filter(a),this._config.isMultiSelect){var n,i=this._renderItems[0];n=this._renderItems.slice(1).every(function(e){return e.checked===Ty.Unchecked})?Ty.Unchecked:this._renderItems.slice(1).every(function(e){return e.checked===Ty.Checked})?Ty.Checked:Ty.Indeterminate,i.checked=n,i.checkedForRender=n}var r=t._dict;this._data._dict=r,this._renderItems._dict=r}},{key:"_getCurrentVisualChildren",value:function(t){return this._renderItems.filter(function(e){return e.parent===t})}},{key:"getCheckIcon",value:function(e){if(this._config.isMultiSelect)switch(e){case Ty.Unchecked:return"mdi-checkbox-blank-outline";case Ty.Checked:return"mdi-checkbox-marked";case Ty.Indeterminate:return"mdi-checkbox-intermediate";default:return"mdi-checkbox-blank-outline"}switch(e){case Ty.Unchecked:return"mdi-radiobox-blank";case Ty.Checked:return"mdi-radiobox-marked";default:return"mdi-radiobox-blank"}}},{key:"_updateTreeView",value:function(e,t){var a=this,n=1<arguments.length&&void 0!==t?t:Ty.Checked,i=this._data,r=this._config.isMultiSelect,o=this._data[e];if(o){if(r){My(i,o,n,!r).forEach(function(e){delete e.nodeInstance.checkedForRender,a._data.splice(e.index,1,Object.assign(Object.assign({},e),{checked:e.nodeInstance.checked,checkedForRender:e.nodeInstance.checkedForRender}))})}else{var s=i.find(function(e){return e.checked});if(s===o)return void(o.nodeInstance.checked=o.checked);o.nodeInstance.checked=n;var l=[[o.index,1,Object.assign(Object.assign({},o),{checked:n,checkedForRender:n})]];s&&(s.nodeInstance.checked=0,l.push([s.index,1,Object.assign(Object.assign({},s),{checked:0,checkedForRender:0})])),l.forEach(function(e){a._data.splice(e[0],e[1],e[2])})}this.flattenNodes()}}},{key:"_setScrollStyle",value:function(){var e=this._config,t=e.thumbColor,a=e.trackColor,n=this._container.getRef();t&&n&&(n.style.setProperty("--scrollbar-thumb-bg-color",t),n.style.setProperty("--scrollbar-thumb-border-color",t),n.style.setProperty("--scrollbar-track-bg-color",a))}},{key:"_attachVST",value:function(){var e={parent:this._container.getRef(),totalRootItems:this._treeNodes.length+(this._config.isMultiSelect?1:0),itemHeight:this._config.rowHeight,onItemRender:this._onItemRender,onDataFetch:this._onDataFetch,diffMode:"hard",autoWidth:!0};this._vst=new hQ(e);var t=this._container.getRef(),a=t.querySelector(".VirtualScrollingTree-scrollbar");a.classList.add("wyn-scrollbar"),this.scrollbarY=new dp.a(a,{suppressScrollX:!0,minScrollbarLength:30});var n=t.querySelector(".VirtualScrollingTree-content");n.classList.add("wyn-scrollbar"),this.scrollbarX=new dp.a(n,{suppressScrollY:!0,minScrollbarLength:30})}},{key:"didMountOnRoot",value:function(){this._attachVST(),this.setValues(this._values),this._setScrollStyle()}},{key:"_getExpandTree",value:function(e){var n=this;return e.reduce(function(e,t){if(t.expanded){var a={key:t.key,expanded:t.expanded,children:n._getExpandTree(t.children)};e.push(a)}return e},[])}},{key:"_setExpandState",value:function(e,a){var n=this;return null!=a&&a.length&&e?e.map(function(t){var e=a.find(function(e){return e.key===t.key});return e?Object.assign(Object.assign({},t),{children:n._setExpandState(t.children,e.children),expanded:e.expanded}):t}):e}},{key:"setItems",value:function(e,t){var a=1<arguments.length&&void 0!==t&&t;if(e){this._config.nodes=e;var n=a?this._getExpandTree(this._treeNodes):[];this._treeNodes=this.getTreeViewNode(e),n.length&&(this._treeNodes=this._setExpandState(this._treeNodes,n)),this._lastSearchText?this.search(this._lastSearchText):(this.dispose(),this.flattenNodes(),this._attachVST())}}},{key:"_clearCheckedNodes",value:function(){!function t(e){e.forEach(function(e){e.checked=Ty.Unchecked,e.children&&e.children.length&&t(e.children)})}(this._treeNodes)}},{key:"setValues",value:function(e){var a=this;if(0===e.length)return this._values=e,this._clearCheckedNodes(),this.flattenNodes(),void this._vst.redraw();var t=e.map(function(e){return function e(t,a){if(t){var n=a.shift(),i=t.find(function(e){return e.value===n});return 0===a.length&&i?i:i&&e(i.children,a)}}(a._treeNodes,e.slice())}).filter(function(e){return e}).map(function(t){return a._data.findIndex(function(e){return e.id===t.key})});0<t.length&&(this._values=e,this._clearCheckedNodes(),t.forEach(function(e){return a._updateTreeView(e)})),this._vst.redraw()}},{key:"setAllValues",value:function(){var a=this,e=this._treeNodes.map(function(t){return a._data.findIndex(function(e){return e.id===t.key})});0<e.length&&(this._values=this._treeNodes.map(function(e){return e.value}),this._clearCheckedNodes(),e.forEach(function(e){return a._updateTreeView(e)})),this._vst.redraw()}},{key:"_getNodePath",value:function(e,t){for(var a=0;a<e.length;a+=1){var n=e[a],i=n.key,r=n.value;if(i.split("_").pop()===t[0])return 1===t.length?[r]:(t.shift(),[r].concat(this._getNodePath(n.children,t)))}}},{key:"_onCheck",value:function(e){var l=this,t=e.id,a=this._config.onCheck,n=this._data.findIndex(function(e){return e.key===t});if(t!==DQ){if(-1<n){var i=this._data[n].checked===Ty.Checked?Ty.Unchecked:Ty.Checked;this._updateTreeView(n,i)}var r,o=function e(t,a){for(var n=1<arguments.length&&void 0!==a&&a,i=[],r=0;r<t.length;r+=1){var o=t[r],s=o.children||[];if(l._config.isMultiSelect&&o.checked===Ty.Indeterminate)s.every(function(e){return e.checked!==Ty.Unchecked})&&i.push(o.key),i=i.concat(e(o.children));l._config.isMultiSelect||s.length&&(i=i.concat(e(o.children))),o.checked===Ty.Checked&&(i.push(o.key),o.children&&n&&(i=i.concat(e(o.children))))}return i}(this._treeNodes,this.isSelectById).map(function(e){return l._getNodePath(l._treeNodes,e.split("_"))});if(this.isSelectById){var s=[];return this._treeNodes.forEach(function(e){return function t(e){e&&(void 0!==e.id&&1===e.checked&&s.push(e.id),e.children&&e.children.forEach(function(e){return t(e)}))}(e)}),void(a&&a(o,s))}0===(null==o?void 0:o.length)&&(r=!1),a&&a(o,null,r)}else if(this._data[n].checked===Ty.Checked)a&&a([],null,!1);else if(this.isSelectById){var u=this._treeNodes.map(function(e){return[e.value]});a&&a(u)}else a&&a([],null,!0)}},{key:"dispose",value:function(){var e,t;this._vst.destroy(),null!==(e=this.scrollbarX)&&void 0!==e&&e.destroy(),null!==(t=this.scrollbarY)&&void 0!==t&&t.destroy()}},{key:"willUnmount",value:function(){this.dispose()}},{key:"setRowHeight",value:function(e){var t;this._config.rowHeight=Math.ceil(e),null!==(t=this._container.getRef())&&void 0!==t&&t.style.setProperty("--tree-item-height","".concat(this._config.rowHeight,"px")),this.dispose(),this._attachVST(),this._vst.redraw()}},{key:"refresh",value:function(){var e,t;this._vst.redraw(),null!==(e=this.scrollbarX)&&void 0!==e&&e.update(),null!==(t=this.scrollbarY)&&void 0!==t&&t.update()}},{key:"setNodataStyle",value:function(e,t){e&&(this.textPanel.setTextStyle(e.textStyle,t),this.textPanel.seNoData(e))}}]),x}(gU);kQ.MultiSelectionItemTemplate=AU.a.compile('\n  <div class="wyn-flex wyn-flex-row wyn-flex-align-center" style="{{style}}">\n    {{#if expandIcon }}\n      <span class="expand-collapse {{expandIcon}}"></span>\n    {{/if}}\n  <label class="checkbox">\n    <span class="check-mark {{checkboxIcon}}"/>\n    <input type="checkbox"/>\n  </label>\n    <span class="tree-node-label wyn-flex wyn-h-full wyn-flex-align-center">{{{label}}}</span>\n</div>'),kQ.SingleSelectionItemTemplate=AU.a.compile('\n  <div class="wyn-flex wyn-flex-row wyn-flex-align-center" style="{{style}}">\n  {{#if children }}\n    {{#if expandIcon }}\n      <span class="expand-collapse {{expandIcon}}"></span>\n    {{/if}}\n    <span class="tree-node-label wyn-flex wyn-h-full wyn-flex-align-center">{{{label}}}</span>\n  {{else }}\n    <label class="checkbox">\n      <span class="check-mark {{checkboxIcon}}"/>\n      <input type="checkbox"/>\n      </label>\n    <span class="tree-node-label wyn-flex wyn-h-full wyn-flex-align-center">{{{label}}}</span>\n  {{/if}}\n</div>\n  ');var wQ=kQ,xQ=function(e){k()(l,e);var t=w()(l);function l(){var i;return I()(this,l),(i=t.apply(this,arguments)).originFilterValues=[],i.onSelectionChange=function(e,t,a){null!=a&&i.filter.setExclude(a),i.filter.fromMatrix(e);var n=i.filter.toJSON();i.isSelectById&&(i.originFilterValues=n.values,t&&(n.values=t.map(function(e){return{value:e}}))),i.onFilterChange(n)},i}return D()(l,[{key:"getRowHeight",value:function(){var e=this.context,t=e.store,a=e.pageContext,n=t.getProperties();return 1.5*ju(n.contentTextStyle.fontSize)*a.getScale()}},{key:"getInitConfig",value:function(){var e=this.context,t=e.store,a=e.pageContext,n=t.getProperties(),i=a.getScale();return{nodes:[],values:[],onCheck:this.onSelectionChange,isMultiSelect:n.selectionMode===qn,rowHeight:this.getRowHeight(),thumbColor:n.scrollbarThumbBackColor,trackColor:n.scrollbarTrackBackColor,options:Object.assign(Object.assign({},n),{scale:i})}}},{key:"init",value:function(e){var a=this;C()(b()(l.prototype),"init",this).call(this,e);var t=this.getInitConfig();this._treeViewer=new wQ(t),this.body.addChildren(this._treeViewer);var n=this.context.store.getProperties(),i=new YU({onChange:function(e){a.lastSearchResult=a._treeViewer.search(e)},onCheck:function(){if(a.lastSearchResult&&a.lastSearchResult.length){var e=n.selectionMode===qn,t=a._treeViewer.getIdList();e?a.onSelectionChange(a.lastSearchResult,t):a.onSelectionChange(a.lastSearchResult.slice(0,1),t)}},placeholder:n.searchPlaceholder});this._searchBox=i,n.allowSearch?(this._searchBox.show(),this.body.addClassName("wyn-label-slicer-body-with-search")):(this._searchBox.hide(),this.body.removeClassName("wyn-label-slicer-body-with-search")),this.host.addClassName("wyn-tree-slicer-border","wyn-p-1","wyn-flex-direction-column"),this.header.addChildren(i);var r=t.options,o=r.noData,s=r.scale;this._treeViewer.setNodataStyle(o,s)}},{key:"setData",value:function(e,t,a,n,i,r){var o=this.context.store.getProperties();this.filter=new Ob(t),this.context.eventHub.fireRender();var s=pC(e,o.showNullItems,o.showEmptyStringItems);this._treeViewer.setItems(s,null==r?void 0:r.keepExpand),this.setFilter(a),this.context.eventHub.fireRendered(),this._treeViewer.setIsSelectById(i),this.isSelectById=i}},{key:"setFilter",value:function(e){e?this.filter.fromJSON(e):this.filter.setValues([]);var t=this.filter.toMatrix();null==e||!e.exclude||null!=t&&t.length?this._treeViewer.setValues(t):this._treeViewer.setAllValues()}},{key:"resize",value:function(){C()(b()(l.prototype),"resize",this).call(this),this._treeViewer.setRowHeight(this.getRowHeight())}},{key:"refreshTree",value:function(){this._treeViewer.refresh()}},{key:"search",value:function(e){this._searchBox.setValue(e),this.lastSearchResult=this._treeViewer.search(e)}}]),l}(tQ),AQ=function(e){k()(n,e);var a=w()(n);function n(){var t;return I()(this,n),(t=a.apply(this,arguments)).onSliceFiltersChange=function(e){t.onSliceFiltersChangeHandler(e)},t}return D()(n,[{key:"init",value:function(e){this.container=new xQ,this.container.hide(),this.hostContainer.addChildren(this.container),this.onSliceFiltersChangeHandler=e.onSliceFiltersChange,this.container.init({onFilterChange:this.onSliceFiltersChange,onOrderClick:e.onOrderClick});var t=this.context.store.getProperties().noData;this.textPanel.setTextStyle(t.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(t)}},{key:"updateSelectionState",value:function(e){var t,a=this.data,n=this.sliceFilter,i=!(null===(t=null==a?void 0:a.aggregatedData)||void 0===t||!t.completeData.profile.display);return function u(e,t,a,n){var i=0<arguments.length&&void 0!==e?e:[],c=1<arguments.length&&void 0!==t?t:[],d=2<arguments.length&&void 0!==a?a:{},p=3<arguments.length&&void 0!==n&&n,h={};return c.forEach(function(e){return h[xl(e.value)]=e}),ae.map(function(e){var t=e,a=h[e.nodeKey],n=a?1:0;if(1===d.checked&&(n=1),p&&t.checked!==n&&(t=ae.assoc("checked",n,t)),Ey(e)){var i;i=!a||p||Ey(a)?u(t.children,p?c:a&&a.children,t,p):u(t.children,t.children),Ry(i,e.children)||(t=ae.assoc("children",i,t));var r=!1,o=!0,s=e.visible,l=e.inAffectedTree;t.children.forEach(function(e){r=r||0!==e.checked,o=o&&1===e.checked,s=s||e.visible,l=l||e.inAffectedTree}),n=r?o?1:2:0,t.visible!==s&&(t=ae.assoc("visible",s,t)),t.inAffectedTree!==l&&(t=ae.assoc("inAffectedTree",l,t))}return t.checked!==n&&(t=ae.assoc("checked",n,t)),t},i)}(e,null==n?void 0:n.values,{},i)}},{key:"refresh",value:function(){var e,t=this.data,a=this.sliceFilter,n=this.pivotSettingHelper,i=this.context.store.getProperties().sortOrder,r=null==t?void 0:t.items;r=this.updateSelectionState(r);var o=[],s=[];if(null!=t&&t.aggregatedData){var l=null==t?void 0:t.aggregatedData.affectedData.profile;o=Qc(l),s=l.display&&0<l.display.values.length?l.display.values:o}r=function a(n,e,t){var i=2<arguments.length&&void 0!==t?t:0;if(n){var r=e.map(function(e){var t;return null!==(t=e.children)&&void 0!==t&&t.length?F()({},e,{children:a(n,e.children,i+1)}):e});return n[i]?ae.sort(n[i],r):r}return e}(dC(s,i),r),this.container.show(),this.container.useMockStyle(!(null!=t&&t.aggregatedData));var u={keepExpand:this._keepExpand};this.setNoDataLayout(!r||!r.length),this.container.setData(r,o,a,n,!(null===(e=null==t?void 0:t.aggregatedData)||void 0===e||!e.completeData.profile.display),u),this._keepExpand=!1}},{key:"renderProperty",value:function(e){if("sortOrder"===e)return this._keepExpand=!0,void this.scheduleRefresh()}},{key:"setNoDataLayout",value:function(e){!(0<arguments.length&&void 0!==e)||e?(this.textPanel.show(),this.container.hide()):(this.textPanel.hide(),this.container.show())}}]),n}(JX),IQ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},PQ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"prepareSlicer",value:function(){return IQ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.container=new AQ,this.bodyHost.addChildren(this.container),e.next=4,this.container.init({onSliceFiltersChange:this.onSliceFiltersChange,onOrderClick:this.onOrderClick});case 4:this.scenarioModel=new lQ(this.id,{property:this.context.store.getProperties(),appViewState:iS.Viewer});case 5:case"end":return e.stop()}},e,this)}))}}]),a}(rQ),_Q=a(35),MQ=a.n(_Q);function LQ(b,C){return function(e){k()(v,e);var f=w()(v);function v(e){var t,a;I()(this,v),(t=f.call(this)).portal=new vU(d$.uiDelegatorManager.dropDownRoot),t.onChanges=[];var n=e.parameterValue,i=e.formatValueFn,r=void 0===i?function(e){return e}:i,o=e.onParameterChange,s=e.value,l=e.showParameter,u=void 0===l||l,c=e.renderEditorWhenShowParameterValue,d=void 0!==c&&c;Vl(s)||(t.oldValue=s);var p=d$.reduxProxy.getStore().getParameters().filter(function(e){return a=C,n=(t=e).outputDataType||t.dataType,!a||ae.contains(n,a);var t,a,n});if(t.container=new hU({tag:"div",className:"wyn-parameter-container wyn-flex wyn-flex-align-center wyn-h-8 ".concat(null!==(a=e.customCSS)&&void 0!==a?a:"")}),t.editor=new b(e),t.onChanges.push(function(e){Vl(e)&&!d?t.editor.hide():t.editor.show()}),t.container.addChildren(t.editor),u&&p.length){var h=[{label:Ft("editors.parameterWrapper.useCustomValue"),value:null}].concat(R()(p.map(function(e){return{label:e.prompt,value:(t=e.name,"".concat(El).concat(t,".Value"))};var t}))),y=new hU({tag:"div",className:"wyn-parameter-text wyn-flex-1 wyn-h-full wyn-leading-loose wyn-border-1 wyn-px-2"}),g=new _U({items:h,onSelect:function(e){o(null!=e?e:t.oldValue)},backdrop:!0,width:198,backdropCustomCSS:"wyn-backdrop-popup-layer"});t.portal.addChildren(g);var m=new hU({tag:"button",className:"wyn-parameter-button mdi wyn-w-8 wyn-h-8 wyn-h-full wyn-border-1 wyn-cursor-pointer"});m.addEventListener("click",function(e){e.preventDefault(),g.toggle(m.getRef().getBoundingClientRect())}),t.onChanges.push(function(e){Vl(e)?(g.setValue(e),d||(y.removeClassName("wyn-hidden"),y.setText(r(Kl(e)))),m.removeClassName("mdi-square-edit-outline"),m.addClassName("mdi-tune")):(g.setValue(null),y.addClassName("wyn-hidden"),m.removeClassName("mdi-tune"),m.addClassName("mdi-square-edit-outline"))}),t.container.addChildren(y,m,t.portal)}return t.addChildren(t.container),t.onChanges.forEach(function(e){return e(n)}),t}return D()(v,[{key:"setState",value:function(e){var i=this;Object.entries(e).forEach(function(e){var t=N()(e,2),a=t[0],n=t[1];switch(a){case"parameterValue":i.onChanges.forEach(function(e){return e(n)});break;case"value":Vl(n)||(i.oldValue=n)}}),this.editor.setState(e)}},{key:"addClassName",value:function(){var e;(e=this.container).addClassName.apply(e,arguments)}},{key:"removeClassName",value:function(e){this.container.removeClassName(e)}}]),v}(gU)}MQ.a.registerLocale({months:_e.a.localeData().months(),shortMonths:_e.a.localeData().monthsShort(),shortDays:_e.a.localeData().weekdaysMin(),quarters:Xt.quarters,current:Xt.current,weekStart:_e.a.localeData().firstDayOfWeek(),yearTitle:Xt.yearTitle,yearMonthTitle:Xt.yearMonthTitle});function RQ(e){var t=e.options,a=t.sliceFilters,n=t.property.items,i=(null==a?void 0:a.length)&&a[0];if(i){var r=i.payload.selectedIndex;return null!=n&&n.length&&-1!==r?mC(i.target,n[r]):void 0}}function VQ(e,t,a){var n=document.createElement(e);return t&&(n.className=t),a&&2===a.length&&n.setAttribute("data-".concat(a[0]),a[1]),n}function NQ(e,t,a){for(var n=t.split(" "),i=0,r=n.length;i<r;i++)e.addEventListener(n[i],a)}var EQ,FQ,OQ=LQ(function(e){k()(h,e);var p=w()(h);function h(e){var r;I()(this,h),(r=p.call(this)).props=e,r.formatValue=function(e){var t=r.props,a=t.dateMode,n=t.format,i=void 0===n?Ft("slicers.dateRangeSlicer.dataFormat.".concat(a)):n;return null!==e?pu(i)(new Date(e)):""},r.setState=function(e){r.datePickerBase.setState(e)};var t=e.dateMode,a=e.minValue,n=e.maxValue,i=e.customCSS,o=void 0===i?"":i,s=e.value,l=e.allowClear,u=void 0===l||l,c=e.onChange,d=e.placeholder;return r.container=new hU({tag:"div",className:"wyn-date-picker ".concat(o)}),r.datePickerBase=new MQ.a({container:r.container.getRef(),dateMode:t,value:s,onChange:c,formatValue:r.formatValue,minValue:a,maxValue:n,placeholder:d,allowClear:u,popupHost:d$.uiDelegatorManager.dropDownRoot,popupContainer:d$.uiDelegatorManager.actualRoot,popupCustomCss:"wyn-calendar-container"}),r.addChildren(r.container),r}return D()(h,[{key:"willUnmount",value:function(){this.datePickerBase.destroy()}},{key:"show",value:function(){this.datePickerBase.show()}},{key:"hide",value:function(){this.datePickerBase.hide()}}]),h}(gU),[H.ParameterDataType.DateTime]),HQ={min:null,max:null,minIncluded:!0,maxIncluded:!1},BQ=function(e){k()(n,e);var a=w()(n);function n(e){var y;I()(this,n),(y=a.call(this)).props=e,y.onChange=function(t){return function(e){y.props.onChange(Object.assign(Object.assign({},y.range),V()({},t,e)))}},y.convertToTime=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=Kl(e,!0);if("string"!=typeof a)return null;var n=Pl(a);if(t){var i=Fl(e),r=i.isParameterValue,o=i.value;if(r){var s=d$.parameterManager.getParameterDataTypeFull(o);s===H.ParameterDataTypeFull.Date?n=n.add(1,"d"):s===H.ParameterDataTypeFull.DateTime&&(n=n.add(1,"s"))}n=n.subtract(1,"s")}return n.isValid()?n.valueOf():null},y.convertToDateString=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(null==e)return null;var a=y.props.dateMode,n=t?_e()(e).endOf(a).add(1,"s"):_e()(e).startOf(a);return _l(n)},y.convertParameter=function(e){return Fl(e).isParameterValue?e:null},y.formatValue=function(e){var t=y.props.format;return null===e?"":new pu(t)(new Date(e))},y.renderBasic=function(){var e=y.props,t=e.dateMode,a=e.format,n=e.value.min,i=e.showParameter,r=e.datePlaceholder,o=e.allowClear,s=void 0===o||o,l=new hU({tag:"div",className:"date-picker-container basic"});return y.basic=new OQ({dateMode:t,value:y.convertToTime(n),parameterValue:y.convertParameter(n),onChange:function(e){return y.onChange("min")(y.convertToDateString(e))},onParameterChange:y.onChange("min"),format:a,placeholder:null!=r?r:Ft("slicers.dateRangeSlicer.placeholder.dateDefault"),formatValueFn:y.formatValue,showParameter:i,allowClear:s,renderEditorWhenShowParameterValue:!0}),l.addChildren(y.basic),l},y.renderRange=function(){var e=y.props,t=e.dateMode,a=e.format,n=e.value,i=n.min,r=n.max,o=e.showParameter,s=e.startPlaceholder,l=e.endPlaceholder,u=e.allowClear,c=y.convertToTime(i),d=y.convertToTime(r,!0);y.start=new OQ({dateMode:t,value:c,parameterValue:y.convertParameter(i),maxValue:d,onChange:function(e){return y.onChange("min")(y.convertToDateString(e))},onParameterChange:y.onChange("min"),format:a,placeholder:null!=s?s:Ft("slicers.dateRangeSlicer.placeholder.startDefault"),formatValueFn:y.formatValue,showParameter:o,allowClear:u,renderEditorWhenShowParameterValue:!0}),y.end=new OQ({dateMode:t,value:d,parameterValue:y.convertParameter(r),minValue:c,onChange:function(e){return y.onChange("max")(y.convertToDateString(e,!0))},onParameterChange:y.onChange("max"),format:a,placeholder:null!=l?l:Ft("slicers.dateRangeSlicer.placeholder.endDefault"),formatValueFn:y.formatValue,showParameter:o,allowClear:u,renderEditorWhenShowParameterValue:!0});var p=new hU({tag:"div",innerHTML:"&nbsp~&nbsp"}),h=new hU({tag:"div",className:"date-picker-container start-end"});return h.addChildren(y.start,p,y.end),h},y.setValue=function(e){var t=y.props.rangeMode,a=e.min,n=e.max;if(y.range=e,t===H.RangeMode.Basic)y.basic.setState({value:y.convertToTime(a),parameterValue:y.convertParameter(a)});else{var i=y.convertToTime(a),r=y.convertToTime(n,!0);y.start.setState({value:i,parameterValue:y.convertParameter(a),maxValue:r}),y.end.setState({value:r,parameterValue:y.convertParameter(n),minValue:i})}},y.container=new hU({tag:"div",className:"date-range-editor"}),y.range=e.value;var t=e.rangeMode;return y.container.addChildren(t===H.RangeMode.Basic?y.renderBasic():y.renderRange()),y.addChildren(y.container),y}return n}(gU),UQ="number-editor wyn-flex wyn-flex-row wyn-flex-no-wrap",zQ="number-input wyn-border-0 wyn-w-8 wyn-focus:outline-0 wyn-center-text",KQ="wyn-relative wyn-w-8 wyn-h-full wyn-border-0 wyn-focus:outline-0 wyn-center-text",jQ=LQ(function(e){k()(v,e);var f=w()(v);function v(e){var s,t=e.step,a=void 0===t?1:t,n=e.type,i=void 0===n?"integer":n,r=e.onChange,o=void 0===r?function(){}:r,l=e.min,u=void 0===l?-1/0:l,c=e.max,d=void 0===c?1/0:c,p=e.value,h=void 0===p?1:p,y=e.customCSS,g=void 0===y?"":y;I()(this,v),(s=f.call(this))._onValidate=Object(Ho.debounce)(function(){var e,t,a,n,i=s._input.getRef();if(i){var r=+i.value;s._validateValue(r)?null!==(n=null===(a=s._container.getRef())||void 0===a?void 0:a.classList)&&void 0!==n&&n.remove("error"):null!==(t=null===(e=s._container.getRef())||void 0===e?void 0:e.classList)&&void 0!==t&&t.add("error")}},50),s._validateValue=function(e){var t,a,n,i,r,o;return s._config.validate?s._config.validate(e):"integer"===s._config.type?(i=s._config.min,r=s._config.max,"number"==typeof(o=e)&&+o.toFixed()===o&&i<=o&&o<r):(t=s._config.min,a=s._config.max,"number"==typeof(n=e)&&t<=n&&a<n)},s._onChange=function(){var e,t,a=s._input.getRef();if(a){var n=+a.value;if(s._validateValue(n)){var i=s._decBtn.getRef();n===s._config.min?i&&(i.disabled=!0):i.disabled=!1;var r=s._incBtn.getRef();n===s._config.max?r&&(r.disabled=!0):r.disabled=!1,s._config.onChange(n)}else a.value="".concat(s._config.value),null!==(t=null===(e=s._container.getRef())||void 0===e?void 0:e.classList)&&void 0!==t&&t.remove("error")}},s._config={step:a,type:i,onChange:o,min:u,max:d,value:h,customCSS:g},s._container=new hU({tag:"div",className:"".concat(UQ," ").concat(g)}),s._incBtn=new hU({tag:"button",className:"inc icon-zoom-in ".concat(KQ)}),s._input=new hU({tag:"input",className:zQ});var m=s._input.getRef();return m&&(m.value=s._config.value),s._input.addEventListener("change",s._onChange),s._decBtn=new hU({tag:"button",className:"dec icon-zoom-out ".concat(KQ)}),s._container.addChildren(s._decBtn,s._input,s._incBtn),s._input.addEventListener("input",function(e){e.stopPropagation(),e.preventDefault(),s._onValidate()}),s._input.addEventListener("change",function(e){e.stopPropagation(),e.preventDefault(),s._onChange()}),s._decBtn.addEventListener("click",function(e){e.stopPropagation();var t=s._input.getRef();t.value="".concat(t.value-s._config.step),s._onChange()}),s._incBtn.addEventListener("click",function(e){e.stopPropagation();var t=s._input.getRef();t.value="".concat(+t.value+s._config.step),s._onChange()}),s.addChildren(s._container),s}return D()(v,[{key:"value",value:function(e){var t=this._input.getRef(),a=this._validateValue(e);t&&a&&(t.value="".concat(e))}},{key:"show",value:function(){this._container.removeClassName("wyn-hidden")}},{key:"hide",value:function(){this._container.addClassName("wyn-hidden")}},{key:"setState",value:function(e){var i=this;Object.entries(e).forEach(function(e){var t=N()(e,2),a=t[0],n=t[1];switch(a){case"value":i.value(n)}})}}]),v}(gU),[H.ParameterDataType.Integer]),WQ=QI(function(e){var t=Object.values(H.DateUnit),a=t.map(function(e){return{label:bu(e),value:e}}),n=Rl(e),i=t.slice(0,t.indexOf(n)+1);return a.filter(function(e){var t=e.value;return i.includes(t)})}),GQ={lastDateNumber:2,nextDateNumber:2,dateRelativeType:H.DateRelativeType.This,dateUnit:H.DateUnit.Year,useAnchorDate:!1,anchorDate:"",useOffset:!1,offsetNumber:0,display:""},YQ=function(e){k()(a,e);var t=w()(a);function a(e){var p;return I()(this,a),(p=t.call(this)).props=e,p.onChanges=[],p.portal=new vU(d$.uiDelegatorManager.dropDownRoot),p.onValueChange=function(t){return function(e){p.range[t]=e,"useAnchorDate"===t&&e&&(p.range.anchorDate=_l(_e()())),p.props.onChange(p.range)}},p.convertParameter=function(e){return Fl(e).isParameterValue?e.toString():null},p.renderUnit=function(){var e=new hU({tag:"div",className:"unit-container wyn-flex"}),t=new hU({tag:"label",className:"unit-label",textContent:Ft("dialogs.filter.dateUnit")}),a=new hU({tag:"button",innerHTML:"<span>".concat(bu(p.range.dateUnit),"</span>"),className:"unit-btn wyn-flex wyn-flex-align-center wyn-cursor-pointer mdi mdi-chevron-down"}),n=new _U({items:WQ(p.props.dateMode),onSelect:p.onValueChange("dateUnit"),value:p.range.dateUnit,backdrop:!0,customCSS:"date-unit-dropdown",backdropCustomCSS:"wyn-backdrop-popup-layer"});n.on("close",function(){a.removeClassName("mdi-chevron-up"),a.addClassName("mdi-chevron-down")}),n.on("open",function(){a.removeClassName("mdi-chevron-down"),a.addClassName("mdi-chevron-up")}),p.portal.addChildren(n),a.addEventListener("click",function(e){e.preventDefault(),n.toggle(a.getRef().getBoundingClientRect())}),e.addChildren(t,a,p.portal),p.onChanges.push(function(e){var t=e.dateUnit;a.getRef().querySelector("span").innerText=bu(t),n.setValue(t)}),p.container.addChildren(e)},p.renderTypeItems=function(){var o=p.props.dateMode,e=p.range,s=e.dateUnit,c=e.lastDateNumber,d=e.nextDateNumber,t=[[H.DateRelativeType.Last,H.DateRelativeType.This,H.DateRelativeType.Next],[H.DateRelativeType.LastN,H.DateRelativeType.NextN,H.DateRelativeType.ToDate]],a=new hU({tag:"div",className:"relative-type-container wyn-flex"}),n=t.map(function(e,t){var a=new hU({tag:"div",className:"relative-type"}),n=e.map(function(e){var i,t,r,a=new hU({tag:"div",className:"relative-type-item wyn-flex"});return a.addChildren.apply(a,[(t=Cu(s,!1)(i=e),r=new hU({tag:"label",innerHTML:"<span class='display wyn-leading-normal'>".concat(t,"</span><input class='radio' type='radio' /><span class='check-mark wyn-w-1.5 wyn-h-1.5 wyn-block' />"),className:"wyn-flex wyn-flex-2 wyn-flex-align-center ".concat(i," after wyn-leading-loose wyn-mb-0.25 wyn-cursor-pointer"),onClick:function(){p.onValueChange("dateRelativeType")(i)}}),p.onChanges.push(function(e){var t=e.dateRelativeType,a=e.dateUnit,n=o!==H.DateMode.DateTime;i===H.DateRelativeType.ToDate&&(n&&a===H.DateUnit.Day||!n&&a===H.DateUnit.Second)?r.addClassName("wyn-hidden"):r.removeClassName("wyn-hidden"),r.getRef().querySelector("input.radio").checked=i===t,r.getRef().querySelector(".display").innerText=Cu(a,!1)(i)}),r)].concat(R()(function(o){var s=o===H.DateRelativeType.LastN,e=o===H.DateRelativeType.NextN;if(s||e){var t=s?c:d,a=s?"lastDateNumber":"nextDateNumber",l=new jQ({value:t,parameterValue:p.convertParameter(t),onChange:p.onValueChange(a),onParameterChange:p.onValueChange(a),customCSS:o,min:1}),u=new hU({tag:"label",className:"wyn-px-2"});return p.onChanges.push(function(e){var t=e.lastDateNumber,a=e.nextDateNumber,n=e.dateRelativeType,i=e.dateUnit,r=s?t:a;l.setState({value:r,parameterValue:p.convertParameter(r)}),n===o?(l.removeClassName("disabled"),u.removeClassName("disabled")):(l.addClassName("disabled"),u.addClassName("disabled")),u.setText(bu(i))}),[l,u]}return[]}(e)))),a});return a.addChildren.apply(a,R()(n)),a});a.addChildren.apply(a,R()(n)),p.container.addChildren(a)},p.renderAnchorDate=function(){function e(e){var t=e;Fl(e).isParameterValue||(t=_l(Pl(e))),p.onValueChange("anchorDate")(t)}function r(e){var t=Kl(e,!0);if("string"!=typeof t)return null;var a=Pl(t);return a.isValid()?a.valueOf():null}var t=new hU({tag:"div",className:"anchor-date-container wyn-flex"}),o=new hU({tag:"label",innerHTML:'<span class="check-box mdi"></span><span>'.concat(Ft("editors.relativeDateEditor.anchorRelativeTo"),"</span>"),className:"wyn-flex-2 wyn-cursor-pointer wyn-flex wyn-flex-align-center",onClick:function(){p.onValueChange("useAnchorDate")(!p.range.useAnchorDate)}}),a=p.range.anchorDate,s=new OQ({dateMode:H.DateMode.DateTime,value:r(a),parameterValue:a,onChange:e,onParameterChange:e,format:Ft("slicers.dateRangeSlicer.dataFormat.second"),placeholder:Ft("slicers.dateRangeSlicer.placeholder.dateDefault"),allowClear:!1,renderEditorWhenShowParameterValue:!0});p.onChanges.push(function(e){var t,a=e.anchorDate,n=e.useAnchorDate,i=null===(t=o.getRef())||void 0===t?void 0:t.querySelector(".check-box");n?(s.removeClassName("wyn-hidden"),i.classList.remove("mdi-checkbox-blank-outline"),i.classList.add("mdi-checkbox-marked")):(s.addClassName("wyn-hidden"),i.classList.remove("mdi-checkbox-marked"),i.classList.add("mdi-checkbox-blank-outline")),s.setState({value:r(a),parameterValue:a})}),t.addChildren(o,s),p.container.addChildren(t)},p.renderOffset=function(){var e=p.range.offsetNumber,t=new hU({tag:"div",className:"offset-container wyn-flex"}),o=new hU({tag:"label",innerHTML:'<span class="check-box mdi"></span><span>'.concat(Ft("editors.relativeDateEditor.offset.addOffset"),"</span>"),className:"wyn-flex-2 wyn-cursor-pointer wyn-flex wyn-flex-align-center",onClick:function(){p.onValueChange("useOffset")(!p.range.useOffset)}}),s=new jQ({value:e,parameterValue:p.convertParameter(e),onChange:p.onValueChange("offsetNumber"),onParameterChange:p.onValueChange("offsetNumber")}),l=new hU({tag:"label",className:"wyn-px-2"});p.onChanges.push(function(e){var t,a=e.useOffset,n=e.dateUnit,i=e.offsetNumber,r=null===(t=o.getRef())||void 0===t?void 0:t.querySelector(".check-box");a?(s.removeClassName("wyn-hidden"),l.removeClassName("wyn-hidden"),r.classList.remove("mdi-checkbox-blank-outline"),r.classList.add("mdi-checkbox-marked")):(s.addClassName("wyn-hidden"),l.addClassName("wyn-hidden"),r.classList.remove("mdi-checkbox-marked"),r.classList.add("mdi-checkbox-blank-outline")),s.setState({value:i,parameterValue:p.convertParameter(i)}),l.setText(bu(n))}),t.addChildren(o,s,l),p.container.addChildren(t)},p.renderActualRange=function(){var d=new hU({tag:"label",className:"relative-date-range"});p.onChanges.push(function(e){var t,a,n,i,r,o,s,l,u,c;d.setText((t=e,a=eu({rule:H.FilterRule.RELATIVE_DATE,range:t}),n=ry(a),i=n.min,r=n.max,o=t.dateUnit,s=t.dateRelativeType,l=[H.DateUnit.Hour,H.DateUnit.Minute,H.DateUnit.Second].includes(o)||o===H.DateUnit.Day&&s===H.DateRelativeType.ToDate?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD",u=null==i?"":_e()(i).format(l),c=null==r?"":_e()(r).subtract(1,"s").format(l),"".concat(u," ~ ").concat(c)))}),p.container.addChildren(d)},p.setValue=function(e){p.range=Object.assign({},e),p.onChanges.forEach(function(e){return e(p.range)})},p.range=Object.assign({},e.value),p.container=new hU({tag:"div",className:"relative-date-editor"}),p.renderUnit(),p.renderTypeItems(),p.renderAnchorDate(),p.renderOffset(),p.renderActualRange(),p.addChildren(p.container),p.onChanges.forEach(function(e){return e(p.range)}),p}return D()(a,[{key:"hide",value:function(){this.container.addClassName("wyn-hidden")}},{key:"show",value:function(){this.container.removeClassName("wyn-hidden")}}]),a}(gU),qQ=function(e){k()(S,e);var T=w()(S);function S(e){var i;I()(this,S),(i=T.call(this)).props=e,i.onStateChange=[],i.getQuickRange=function(e,t){return t===H.DateRangeType.Quick?e:null},i.setCustomRange=function(e,t){var a,n;i.customRange=t===H.DateRangeType.Relative?e:(a=i.props.dateMode,n=a===H.DateMode.DateTime?H.DateUnit.Day:Rl(a),Object.assign(Object.assign({},GQ),{dateUnit:n}))},i.getValidQuickRanges=QI(function(e){return e.reduce(function(e,t){var a=eu({rule:H.FilterRule.RELATIVE_DATE,range:t}),n=a.dateRelativeType,i=a.lastDateNumber,r=a.nextDateNumber,o=a.useOffset,s=a.offsetNumber;return"lastN"===n&&(!Bo.a.isNumber(i)||i<1)||"nextN"===n&&(!Bo.a.isNumber(r)||r<1)||o&&!Bo.a.isNumber(s)?e:e.concat(a)},[])}),i.onChange=function(t){return function(e){t===H.DateRangeType.Quick?(i.props.onChange(t)(+e),i.onToggle(!1)):i.setState({type:t,value:e})}};var t=e.quickRanges,a=e.disableCustomRange,n=e.value,r=e.type,o=e.dateMode;i.expand=r===H.DateRangeType.Relative;var s=i.getValidQuickRanges(t),l=new hU({tag:"div",className:"quick-range-container"}),u=new hU({tag:"button",className:"mdi mdi-calendar-range-outline",onClick:function(e){e.preventDefault(),i.onToggle()}}),c=new _U({onSelect:i.onChange(H.DateRangeType.Quick),backdrop:!0,customCSS:"quick-range-menu-container ".concat(e.disableCustomRange?"disable-custom":""),width:e.disableCustomRange?200:390}),d=new vU(d$.uiDelegatorManager.dropDownRoot);d.addChildren(c),l.addChildren(u,d),i.onToggle=function(e){void 0===e?c.toggle(u.getRef().getBoundingClientRect()):e?c.show(u.getRef().getBoundingClientRect()):c.close()};var p=i.getQuickRange(n,r);if(i.setCustomRange(n,r),a)c.setItems(s.map(function(e,t){return{value:t,label:Tu(e)}})),c.setValue(p),i.onStateChange.push(function(e){var t=e.value,a=e.type;c.setValue(i.getQuickRange(t,a))});else{var h=new hU({tag:"div",className:"quick-range-title",textContent:Ft("slicers.dateRangeSlicer.quickRanges.title")}),y=new hU({tag:"div",className:"quick-range-list ".concat(0<s.length?"":"empty")});if(0<s.length){var g=s.map(function(e,t){var a=Tu(e),n=new hU({tag:"button",textContent:a,title:a,onClick:function(){i.onChange(H.DateRangeType.Quick)(t)},className:p===t?"wyn-popup-active":""});return i.onStateChange.push(function(e){i.getQuickRange(e.value,e.type)===t?n.addClassName("wyn-popup-active"):n.removeClassName("wyn-popup-active")}),n}),m=new PU({content:g,className:"layout-full"});y.addChildren(m)}else y.setText(Ft("slicers.dateRangeSlicer.quickRanges.empty"));var f=new hU({tag:"div",className:"custom-range-title"}),v=new hU({tag:"div",className:"mdi mdi-chevron-down",onClick:function(){i.onExpand(!i.expand),i.onToggle(!0)}});f.addChildren(new hU({tag:"div",textContent:Ft("slicers.dateRangeSlicer.quickRanges.custom")}),v);var b=new YQ({value:i.customRange,onChange:i.onChange(H.DateRangeType.Relative),dateMode:o});i.onStateChange.push(function(e){i.setCustomRange(e.value,e.type),b.setValue(i.customRange)});var C=new hU({tag:"div",className:"quick-range-custom-ok-container"});C.addChildren(new hU({tag:"button",className:"wyn-border-0 wyn-popup-active wyn-cursor-pointer",textContent:Ft("slicers.dateRangeSlicer.ok"),onClick:function(){e.onChange(H.DateRangeType.Relative)(i.customRange),i.onToggle(!1)}})),c.setContent(h,y,f,b,C),i.onExpand=function(e){e?(b.show(),C.removeClassName("wyn-hidden"),v.removeClassName("mdi-chevron-down"),v.addClassName("mdi-chevron-up")):(b.hide(),C.addClassName("wyn-hidden"),v.removeClassName("mdi-chevron-up"),v.addClassName("mdi-chevron-down")),i.expand=e}}return i.addChildren(l),i}return D()(S,[{key:"setState",value:function(t){var e;this.onStateChange.forEach(function(e){return e(t)}),null!==(e=this.onExpand)&&void 0!==e&&e.call(this,t.type===H.DateRangeType.Relative)}}]),S}(gU),JQ=function(e){k()(f,e);var t=w()(f);function f(){var i;return I()(this,f),(i=t.apply(this,arguments)).convertFilterToRange=QI(function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0,n=t.type,i=void 0===n?H.DateRangeType.Static:n,r=t.range,o=void 0===r?HQ:r;if(i===H.DateRangeType.Static)e=o;else{var s=i===H.DateRangeType.Relative?o:a[o];if(s){var l=eu({rule:H.FilterRule.RELATIVE_DATE,range:s});e=ry(l)}else e=HQ}return e}),i.onChange=function(n){return function(e){var t=i.pivotSettingHelper.getUsedDimensionItems()[0],a=yC(t,{range:e,type:n});i.onFilterChange(a[0])}},i}return D()(f,[{key:"init",value:function(e){var t,a;C()(b()(f.prototype),"init",this).call(this,e),this.onFilterChange=e.onFilterChange;var n,i=this.context.store.getProperties(),r=i.dateMode,o=i.rangeMode,s=i.dataFormat,l=i.showQuickRanges,u=i.quickRanges,c=i.datePlaceholder,d=i.startPlaceholder,p=i.endPlaceholder,h=i.allowClear,y=this.context.store.getOptions().hiddenActions;d$.globalConfigManager.get("inSingleScenarioMode")?n=(null!==(a=null===(t=d$.globalConfigManager.get("actions"))||void 0===t?void 0:t.split(","))&&void 0!==a?a:[]).includes("_slicerSelectParameter".toLowerCase()):n=!y.includes("_slicerSelectParameter");var g=new hU({tag:"div",className:"date-range-slicer"});this.dateRangeEditor=new BQ({value:HQ,dateMode:r,rangeMode:o,format:s,onChange:this.onChange(H.DateRangeType.Static),showParameter:n,datePlaceholder:c,startPlaceholder:d,endPlaceholder:p,allowClear:h}),g.addChildren(this.dateRangeEditor);var m=Ao(navigator.userAgent);o===H.RangeMode.StartEnd&&l&&(!m||0<u.length)&&(this.quickRangeDropdown=new qQ({value:null,type:H.DateRangeType.Static,quickRanges:u,onChange:this.onChange,dateMode:r,disableCustomRange:m}),g.addChildren(this.quickRangeDropdown)),this.body.addChildren(g)}},{key:"update",value:function(e,t){this.pivotSettingHelper=t,this.scenarioTitle.updateTitle(t),this.setFilter(e)}},{key:"setData",value:function(){}},{key:"setFilter",value:function(e){var t,a,n,i=this.context.store.getProperties(),r=i.defaultValue,o=i.quickRanges,s=null===(t=null!=e?e:r)||void 0===t?void 0:t.payload,l=this.convertFilterToRange(s,o,this.pivotSettingHelper);this.dateRangeEditor.setValue(l),null!==(a=this.quickRangeDropdown)&&void 0!==a&&a.setState({value:null==s?void 0:s.range,type:null!==(n=null==s?void 0:s.type)&&void 0!==n?n:H.DateRangeType.Static})}}]),f}(tQ),XQ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(e){this.container=new JQ,this.container.hide(),this.hostContainer.addChildren(this.container),this.container.init({onFilterChange:e.onSliceFiltersChange}),this.container.useMockStyle(!0)}},{key:"refresh",value:function(){this.container.show(),this.container.useMockStyle(!this.pivotSettingHelper.hasSetting()),this.container.update(this.sliceFilter,this.pivotSettingHelper)}}]),a}(JX),QQ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},ZQ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"prepareSlicer",value:function(){return QQ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.container=new XQ,this.bodyHost.addChildren(this.container),e.next=4,this.container.init({onSliceFiltersChange:this.onSliceFiltersChange});case 4:this.scenarioModel=new ZF(this.id),d$.dashboardManager.getDynamicManager().registerDynamicQuery(this.id,fC);case 7:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){C()(b()(a.prototype),"willUnmount",this).call(this),d$.dashboardManager.getDynamicManager().unRegisterDynamicQuery(this.id)}}]),a}(rQ),$Q=function(e){k()(u,e);var t=w()(u);function u(){var a;return I()(this,u),(a=t.call(this)).isMobile=Ao(),a.toggleDropdown=function(e){e.stopPropagation();var t=a.textAreaWrapper.getRef().getBoundingClientRect();a.dropdown.toggle(t,{width:t.width,height:300*a.context.pageContext.getScale()}),a.treeSlicer.refreshTree()},a.outerClickHandler=function(e){e!==a.context.store.id&&a.dropdown.hide()},a.innerClickHandler=function(e){e===a.context.store.id&&a.dropdown.hide()},a.textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),a.body.addChildren(a.textPanel),a}return D()(u,[{key:"init",value:function(e){var t=this;C()(b()(u.prototype),"init",this).call(this,e);var a=this.context.store.getProperties(),n=a.contentTextStyle,i=a.noData,r=lc()(n.color).isLight()?"#333":"#f1f1f1";this.textPanel.setTextStyle(i.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(i),this.dropdown=new qU({backdrop:!1,className:"wyn-combox-slicer-container wyn-mt-0.25",onClose:function(){t.treeSlicer.search("")},style:{"background-color":r}}),this.addChildren(this.dropdown);var o=new hU({tag:"div",className:"wyn-combox-slicer-editor wyn-cursor-pointer wyn-w-full",onClick:this.toggleDropdown}),s=new hU({tag:"div",className:"wyn-combox-slicer-inner"}),l=new hU({tag:"a",className:"wyn-combox-slicer-btn mdi mdi-chevron-down"});o.addChildren(s,l),this.textAreaWrapper=o,this.textArea=s,this.body.addChildren(o),this.treeSlicer=new xQ(!0),this.dropdown.setContents(this.treeSlicer),this.treeSlicer.init({onFilterChange:this.onFilterChange,onOrderClick:e.onOrderClick}),this.setInternalBorder(this.dropdown.getDomRef().style)}},{key:"renderFilter",value:function(){var e,t,a,n,i,r=this.context.store.getProperties().placeholder;i=this.isSelectById?Uy(r,null!==(t=null===(e=this.treeSlicer)||void 0===e?void 0:e.originFilterValues)&&void 0!==t?t:[],this.columns,this.isSelectById):Uy(r,null!==(n=null===(a=this.filterJson)||void 0===a?void 0:a.values)&&void 0!==n?n:[],this.columns,this.isSelectById),this.textArea.setText(i),this.textArea.setTitle(i)}},{key:"setFilter",value:function(e){null==(this.filterJson=e)&&this.isSelectById&&(this.treeSlicer.originFilterValues=[]),this.renderFilter(),this.treeSlicer.setFilter(e)}},{key:"setData",value:function(e,t,a,n,i,r){this.scenarioTitle.updateTitle(n),this.columns=t.map(function(e){return n.getColumn(e.name)}),this.filterJson=a,this.renderFilter(),this.treeSlicer.setData(e,t,a,n,i,r),this.isSelectById=i,e&&e.length?(this.textPanel.hide(),this.textAreaWrapper.setStyle({display:"block"})):(this.textPanel.show(),this.textAreaWrapper.setStyle({display:"none"}))}},{key:"resize",value:function(){C()(b()(u.prototype),"resize",this).call(this),this.isMobile||this.dropdown.hide(),this.treeSlicer.resize()}},{key:"useMockStyle",value:function(e){var t;C()(b()(u.prototype),"useMockStyle",this).call(this,e),null!==(t=this.treeSlicer)&&void 0!==t&&t.useMockStyle(e)}},{key:"didMount",value:function(){this.context.pageContext.pageModel.on(zT.OuterClick,this.outerClickHandler),this.context.pageContext.pageModel.on(zT.InnerClick,this.innerClickHandler)}},{key:"willUnmount",value:function(){var e=this.context.pageContext;e.pageModel.off(zT.OuterClick,this.outerClickHandler),e.pageModel.off(zT.InnerClick,this.innerClickHandler)}}]),u}(tQ),eZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(e){this.container=new $Q,this.container.hide(),this.hostContainer.addChildren(this.container),this.onSliceFiltersChangeHandler=e.onSliceFiltersChange,this.container.init({onFilterChange:this.onSliceFiltersChange,onOrderClick:e.onOrderClick})}},{key:"setNoDataLayout",value:function(){this.textPanel.hide(),this.container.show()}}]),a}(AQ),tZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},aZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"prepareSlicer",value:function(){return tZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.container=new eZ,this.bodyHost.addChildren(this.container),e.next=4,this.container.init({onSliceFiltersChange:this.onSliceFiltersChange,onOrderClick:this.onOrderClick});case 4:this.scenarioModel=new lQ(this.id,{property:this.context.store.getProperties(),appViewState:iS.Viewer});case 5:case"end":return e.stop()}},e,this)}))}}]),a}(rQ),nZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},iZ=function(e){k()(i,e);var n=w()(i);function i(e,t){var a;return I()(this,i),(a=n.call(this,e)).context=t,a}return D()(i,[{key:"buildRes",value:function(e){var t,a,n,i,r=null===(t=this.context)||void 0===t?void 0:t.property,o=this.data.options.sliceFilters&&this.data.options.sliceFilters[0],s=(null==r?void 0:r.items)||[],l=null!=(null===(a=null===o||void 0===o?void 0:o.payload)||void 0===a?void 0:a.selectedIndex)?null===(n=null===o||void 0===o?void 0:o.payload)||void 0===n?void 0:n.selectedIndex:-1,u=e.hasDimensionSetting();return{items:this.makeSlicerItems(null===(i=this.context)||void 0===i?void 0:i.appViewState,s,l,o,u)}}},{key:"fetchAggregatedData",value:function(r,o){return nZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReady()){e.next=2;break}return e.abrupt("return");case 2:if(null!=o&&o.context&&this.setContext(null==o?void 0:o.context),t=this.getSimplePivotSettings(r),a=this.getDataViewHelper(this.getDatasetId(),t[0]),t.length&&a.isReady()){e.next=9;break}return n=this.buildRes(a),this.notifyRefreshData(n,a),e.abrupt("return");case 9:i=this.buildRes(a),this.notifyRefreshData(i,a);case 11:case"end":return e.stop()}},e,this)}))}},{key:"makeSlicerItems",value:function(e,t,a,n,i){var r,o=e===H.AppViewMode.Designer,s=null!=n?a:-1,l=[];i?l=o?t:(r=t,eu({rule:H.FilterRule.SLICER_RELATIVE_DATE,range:{items:r}}).items).filter(function(e){var t=e.dateRelativeType,a=e.lastDateNumber,n=e.nextDateNumber,i=e.useOffset,r=e.offsetNumber;return!("lastN"===t&&(!Bo.a.isNumber(a)||a<1))&&(!("nextN"===t&&(!Bo.a.isNumber(n)||n<1))&&!(i&&!Bo.a.isNumber(r)))}):l=RX(H.SlicerType.RelativeDateSlicer);return l.map(function(e,t){return{value:e,visible:!0,selected:t===s,display:Tu(e)}})}},{key:"refreshData",value:function(e){var t=this;if(this.isReady()){this.sync();var a=this.getDatasetId();if(!a)return this.postUpdate(),void this.fetchAggregatedData(a,e);this.preUpdate(),this._datasetSchemaResource.fetch(this.getDatasetId()).then(function(){return t.postUpdate(),t.fetchAggregatedData(a,e),null}).catch(function(e){t.postUpdate(),t.onRequestError(e)})}}}]),i}(ZF),rZ=function(e){k()(a,e);var t=w()(a);function a(){var o;return I()(this,a),(o=t.apply(this,arguments)).onSelectionChange=function(e){if(e.length){var t=RB()(o).pivotSettingHelper,a=e[0],n=t.getUsedDimensionItems(),i={selectedIndex:a},r=yC((null==n?void 0:n.length)&&n[0],i);o.onFilterChange(r[0])}else o.onFilterChange(null)},o}return D()(a,[{key:"getInitConfig",value:function(){var e=this.context.store,t=e.getProperties(),a=e.getDocTheme(),n=this.context.pageContext.getScale();return{items:[],values:[],direction:t.orientation,style:t.slicerStyle,wordWrap:t.isWrap,autoWidth:t.widthAdaptive,alignment:t.slicerItemsAlignment,onSelect:this.onSelectionChange,isMultiSelect:!1,docTheme:a,options:Object.assign(Object.assign({},t),{scale:n})}}},{key:"makeItems",value:function(e){return e.reduce(function(e,t,a){return e.push({display:t.display,value:a,styleClassName:"label-slicer-item relative-date-label-style"}),e},[])}},{key:"init",value:function(e){C()(b()(a.prototype),"init",this).call(this,e);var t=this.getInitConfig();this._labelSlicer=new eQ(t),this.body.addChildren(this._labelSlicer)}},{key:"setData",value:function(e,t,a){this.pivotSettingHelper=a;var n=this.makeItems(e);this.context.eventHub.fireRender(),this._labelSlicer.setItems(n),this.setFilter(t),this.scenarioTitle.updateTitle(a),this.context.eventHub.fireRendered()}},{key:"setFilter",value:function(e){e?this._labelSlicer.setValues([e.payload.selectedIndex]):this._labelSlicer.setValues([])}}]),a}(tQ),oZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(e){this.container=new rZ,this.container.hide(),this.hostContainer.addChildren(this.container),this.container.init({onFilterChange:e.onSliceFiltersChange})}},{key:"refresh",value:function(){var e=this.data,t=this.sliceFilter,a=this.pivotSettingHelper,n=null==e?void 0:e.items;this.container.show(),this.container.useMockStyle(!a.hasDimensionSetting()),this.container.setData(n,t,a)}}]),a}(JX),sZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},lZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"prepareSlicer",value:function(){return sZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.container=new oZ,this.bodyHost.addChildren(this.container),e.next=4,this.container.init({onSliceFiltersChange:this.onSliceFiltersChange});case 4:this.scenarioModel=new iZ(this.id,{property:this.context.store.getProperties(),appViewState:iS.Viewer}),d$.dashboardManager.getDynamicManager().registerDynamicQuery(this.id,RQ);case 7:case"end":return e.stop()}},e,this)}))}},{key:"willUnmount",value:function(){C()(b()(a.prototype),"willUnmount",this).call(this),d$.dashboardManager.getDynamicManager().unRegisterDynamicQuery(this.id)}}]),a}(rQ),uZ=function(){function e(t){var l=this;I()(this,e),this._isInInfinityRange=function(e){var t=l.conf.values;return{isInNegativeInfinityRange:e<Math.ceil(t.length*(5/110)),isInInfinityRange:l.conf.values.length-Math.floor(t.length*(5/110))<e}},this._getValueIndex=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=l.conf.values,n=a.indexOf(e),i={value:a.get(n),index:n};if(!t){var r=l._isInInfinityRange(i.index),o=r.isInNegativeInfinityRange,s=r.isInInfinityRange;o&&(i.index=0),s&&(i.index=l.conf.values.length-1)}return i},this.input=null,this.inputDisplay=null,this.slider=null,this.sliderWidth=0,this.sliderLeft=0,this.pointerWidth=0,this.pointerR=null,this.pointerL=null,this.activePointer=null,this.selected=null,this.scale=null,this.step=0,this.tipL=null,this.tipR=null,this.timeout=null,this.valRange=!1,this._minMarkIdx=-1,this._maxMaekIdx=-1,this.values={start:null,end:null},this.conf={target:null,values:null,set:null,range:!0,width:null,scale:!0,labels:!0,tooltip:!0,step:null,disabled:!1,onChange:null,actualMin:{value:null,display:"Min"},actualMax:{value:null,display:"Max"},negativeInfinityTip:"-Infinity",infinityTip:"Infinity"},this.cls={container:"rs-container",background:"rs-bg",selected:"rs-selected",pointer:"rs-pointer",scale:"rs-scale relative",noscale:"rs-noscale",tip:"rs-tooltip",mark:"rs-mark"},Object.keys(this.conf).forEach(function(e){t.hasOwnProperty(e)&&(l.conf[e]=t[e])}),this.init()}return D()(e,[{key:"init",value:function(){return"object"===E()(this.conf.target)?this.input=this.conf.target:this.input=document.getElementById(this.conf.target.replace("#","")),this.inputDisplay=getComputedStyle(this.input,null).display,this.input.style.display="none",this.valRange=!(this.conf.values instanceof Array),!this.valRange||this.conf.values.hasOwnProperty("min")&&this.conf.values.hasOwnProperty("max")?this.createSlider():console.log("Missing min or max value...")}},{key:"createSlider",value:function(){this.slider=VQ("div",this.cls.container),this.slider.innerHTML='<div class="rs-bg"></div>',this.selected=VQ("div",this.cls.selected),this.pointerL=VQ("div",this.cls.pointer,["dir","left"]),this.scale=VQ("div",this.cls.scale);var e=d$.uiDelegatorManager.dropDownRoot;return this.conf.tooltip&&(this.tipL=VQ("div",this.cls.tip),this.tipR=VQ("div",this.cls.tip),e.appendChild(this.tipL)),this.slider.appendChild(this.selected),this.slider.appendChild(this.scale),this.slider.appendChild(this.pointerL),this.conf.range&&(this.pointerR=VQ("div",this.cls.pointer,["dir","right"]),this.conf.tooltip&&e.appendChild(this.tipR),this.slider.appendChild(this.pointerR)),this.input.parentNode.insertBefore(this.slider,this.input.nextSibling),this.conf.width&&(this.slider.style.width="".concat(parseInt(this.conf.width,10),"px")),this.sliderLeft=this.slider.getBoundingClientRect().left,this.sliderWidth=this.slider.clientWidth,this.pointerWidth=this.pointerL.clientWidth,this.conf.scale||this.slider.classList.add(this.cls.noscale),this.setInitialValues()}},{key:"setInitialValues",value:function(){if(this.disabled(this.conf.disabled),this.valRange&&(this.conf.values=function(t){var e=t.values,a=e.min,n=e.max,i=n-a;if(!t.step)return[a,n];var r=hl(t.step),o=Math.floor(i/t.step);return{indexOf:function(e){if(e===a)return 0;if(e===n)return o-1;var t=e-a;return parseInt(Math.ceil(t/i*o),10)},forEachIndex:function(e){for(var t=1;t<o;t++)e(t)},get:function(e){return 0===e?a:e===o-1?n:+Number.parseFloat(a+e*t.step).toFixed(r)},length:o}}(this.conf)),this.values.start=0,this.values.end=this.conf.range?this.conf.values.length-1:0,this.conf.set&&this.conf.set.length&&(t=this.conf,a=t.set,n=t.values,i=t.range,a&&!(a.length<1)&&n.includes(a[0])&&(!i||!(a.length<2)&&n.includes(a[1])))){var e=this.conf.set;this.conf.range?(this.values.start=this.conf.values.indexOf(e[0]),this.values.end=this.conf.set[1]?this.conf.values.indexOf(e[1]):null):this.values.end=this.conf.values.indexOf(e[0])}var t,a,n,i;return this.createScale()}},{key:"createScale",value:function(){var c=this;this.step=this.sliderWidth/(this.conf.values.length-1);function e(e){var s=!(0<arguments.length&&void 0!==e)||e,t=VQ("span",s?"rs-mark-left":"rs-mark-right"),a=c.conf,l=a.actualMin,u=a.actualMax;t.addEventListener("click",function(e){e.stopPropagation();var t=c.getValue().split(","),a=N()(t,2),n=a[0],i=a[1],r=s?l.value:parseFloat(n),o=s?parseFloat(i):u.value;c.setValues(r,o),c.conf.onChange("".concat(r,",").concat(o))}),t.classList.add(c.cls.mark);var n=VQ("ins");t.appendChild(n),c.scale.appendChild(t),t.style.position="absolute",t.style.left="".concat(s?c.sliderWidth*(5/110):c.sliderWidth*(105/110),"px");var i=s?c.conf.actualMin.display:c.conf.actualMax.display;n.innerHTML=i,n.style.marginLeft="".concat(-(n.clientWidth-t.clientWidth)/2,"px"),n.title=s?c.conf.actualMin.value:c.conf.actualMax.value}return e(),e(!1),this.addEvents()}},{key:"updateScale",value:function(){this.step=this.sliderWidth/(this.conf.values.length-1);for(var e=this.slider.querySelectorAll("span"),t=0,a=e.length;t<a;t++){var n=e[t].classList.contains("rs-mark-left"),i=e[t].classList.contains("rs-mark-right");if(n){e[t].style.left="".concat(this.sliderWidth*(5/110),"px");var r=e[t].querySelector("ins");r&&(r.style.marginLeft="".concat(-(r.clientWidth-e[t].clientWidth)/2,"px"))}if(i){e[t].style.left="".concat(this.sliderWidth*(105/110),"px");var o=e[t].querySelector("ins");o&&(o.style.marginLeft="".concat(-(o.clientWidth-e[t].clientWidth)/2,"px"))}}var s=this.input.value.split(","),l=N()(s,2),u=l[0],c=l[1];this.setValues(u,c)}},{key:"addEvents",value:function(){var t=this,e=this.slider.querySelectorAll(".".concat(this.cls.pointer)),a=this.slider.querySelector(".rs-bg"),n=this.slider.querySelector(".rs-selected");NQ(document,"mousemove touchmove",this.move.bind(this)),NQ(document,"mouseup touchend touchcancel",this.drop.bind(this));for(var i=0,r=e.length;i<r;i++)NQ(e[i],"mousedown touchstart",this.drag.bind(this));[a,n].forEach(function(e){return NQ(e,"click",t.onClickPiece.bind(t))});function o(e){"left"===e?t.tipL.style.display="block":t.tipR.style.display="block"}function s(e){"left"===e?t.tipL.style.display="none":t.tipR.style.display="none"}NQ(this.pointerL,"mouseenter",function(){o("left")}),NQ(this.pointerR,"mouseenter",function(){o("right")}),NQ(this.pointerL,"mouseleave",function(){s("left")}),NQ(this.pointerR,"mouseleave",function(){s("right")}),this.setValues()}},{key:"drag",value:function(e){if(e.preventDefault(),!this.conf.disabled){var t=e.target.getAttribute("data-dir");return"left"===t&&(this.activePointer=this.pointerL),"right"===t&&(this.activePointer=this.pointerR),this.slider.classList.add("sliding")}}},{key:"move",value:function(e){var t=e.type,a=e.touches,n=e.pageX;if(this.activePointer&&!this.conf.disabled){var i=("touchmove"===t?a[0].clientX:n)-this.sliderLeft-this.pointerWidth/2;(i=Math.round(i/this.step))<=0&&(i=0),i>this.conf.values.length-1&&(i=this.conf.values.length-1);var r=this.activePointer===this.pointerL,o=this.activePointer===this.pointerR;if(this.conf.range){var s=this._isInInfinityRange(i),l=s.isInInfinityRange,u=s.isInNegativeInfinityRange;r&&(u&&(i=0),this.values.start=i),o&&(l&&(i=this.conf.values.length-1),this.values.end=i)}else this.values.end=i;var c=r?this.conf.values.get(this.values.start):void 0,d=o?this.conf.values.get(this.values.end):void 0,p=null!=c?c:this.conf.values.get(this.values.start),h=null!=d?d:this.conf.values.get(this.values.end),y=this.conf,g=y.actualMin,m=y.actualMax;p<=h&&p<=m.value&&h>=g.value&&(this.setValues(c,d),this.onChange())}}},{key:"drop",value:function(){this.activePointer=null}},{key:"setValues",value:function(e,t){function a(e){var t=o.conf,a=t.actualMin,n=t.actualMax,i=parseFloat(e)===a.value,r=parseFloat(e)===n.value;return i||r}var o=this,n=this.conf.range?"start":"end",i=void 0===e?this.conf.values.get(this.values.start):e,r=void 0===t?this.conf.values.get(this.values.end):t,s=this._getValueIndex(i,a(e)).index;void 0!==e&&-1<s&&(this.values[n]=s);var l=this._getValueIndex(r,a(t)).index;void 0!==t&&-1<l&&(this.values.end=l),this.conf.range&&this.values.start>this.values.end&&(this.values.start=this.values.end),this.pointerL.style.left="".concat(this.values[n]*this.step,"px");var u=this.pointerL.getBoundingClientRect(),c=u.x,d=u.y;if(this.tipL.style.left="".concat(c,"px"),this.tipL.style.top="".concat(d,"px"),this.conf.range){if(this.conf.tooltip){var p=this.conf.values.get(this.values.start)===i?this.conf.values.get(this.values.start):i,h=this.conf.values.get(this.values.end)===r?this.conf.values.get(this.values.end):r;this.tipL.innerHTML=p<this.conf.actualMin.value?"".concat(this.conf.negativeInfinityTip):"".concat(p),this.tipR.innerHTML=h>this.conf.actualMax.value?"".concat(this.conf.infinityTip):"".concat(h)}var y="".concat(void 0===e?this.conf.values.get(this.values.start):e),g="".concat(void 0===t?this.conf.values.get(this.values.end):t);this.input.value="".concat(y,",").concat(g),this.pointerR.style.left="".concat(this.values.end*this.step,"px");var m=this.pointerR.getBoundingClientRect(),f=m.x,v=m.y;this.tipR.style.left="".concat(f,"px"),this.tipR.style.top="".concat(v,"px")}else this.conf.tooltip&&(this.tipL.innerHTML=this.conf.values.get(this.values.end)),this.input.value=this.conf.values.get(this.values.end);this.values.end>this.conf.values.length-1&&(this.values.end=this.conf.values.length-1),this.values.start<0&&(this.values.start=0);var b=(this.values.end-this.values.start)*this.step>this.sliderWidth?this.sliderWidth:(this.values.end-this.values.start)*this.step;this.selected.style.width="".concat(b,"px"),this.selected.style.left="".concat(this.values.start*this.step,"px")}},{key:"onClickPiece",value:function(e){var t=e.clientX;if(!this.conf.disabled){var a=Math.round((t-this.sliderLeft)/this.step);if(a>this.conf.values.length-1&&(a=this.conf.values.length-1),a<0&&(a=0),this.conf.range){var n=this._isInInfinityRange(a),i=n.isInInfinityRange,r=n.isInNegativeInfinityRange;a-this.values.start<=this.values.end-a?(r&&(a=0),this.values.start=a):(i&&(a=this.conf.values.length-1),this.values.end=a),this.slider.classList.remove("sliding"),this.setValues(this.conf.values.get(this.values.start),this.conf.values.get(this.values.end)),this.onChange()}}}},{key:"onChange",value:function(){if(this.timeout&&clearTimeout(this.timeout),this.conf.onChange&&"function"==typeof this.conf.onChange)return this.conf.onChange(this.input.value)}},{key:"onResize",value:function(){return this.sliderLeft=this.slider.getBoundingClientRect().left,this.sliderWidth=this.slider.clientWidth,this.updateScale()}},{key:"disabled",value:function(e){this.conf.disabled=e,this.slider.classList[e?"add":"remove"]("disabled")}},{key:"getValue",value:function(){return this.input.value}},{key:"destroy",value:function(){this.input.style.display=this.inputDisplay,this.slider.remove();var e=d$.uiDelegatorManager.dropDownRoot;null!=e&&e.removeChild(this.tipL),null!=e&&e.removeChild(this.tipR)}}]),e}(),cZ=function(e){k()(d,e);var c=w()(d);function d(e){var h,t,a,n,i;I()(this,d),(h=c.call(this))._negativeInfinity=-1/0,h._Infinity=1/0,h._onValueChanged=function(){h._config.onChange&&h._config.onChange({min:{value:h._config.inputValue.min===-1/0?null:+h._config.inputValue.min,included:h._config.minIncluded},max:{value:h._config.inputValue.max===1/0?null:+h._config.inputValue.max,included:h._config.maxIncluded}})},h._onMinInputChanged=function(e){e.stopPropagation();var t=+e.target.value,a=h._config.inputValue.min,n=h._config.inputValue.max;t>h._config.inputValue.max?(a=h._config.inputValue.max,n=t):a=t,h.setValues({min:a,max:n}),h._onValueChanged()},h._onMinIncludedChanged=function(e){e.stopPropagation(),h._config.minIncluded=!h._config.minIncluded;var t=h._container.getRef();t&&(h._config.minIncluded?t.classList.add("left-included"):t.classList.remove("left-included")),h._onValueChanged()},h._onMaxInputChanged=function(e){e.stopPropagation();var t=+e.target.value,a=h._config.inputValue.min,n=h._config.inputValue.max;t<a?(n=h._config.inputValue.min,a=t):n=t,h.setValues({min:a,max:n}),h._onValueChanged()},h._onMaxIncludedChanged=function(e){e.stopPropagation(),h._config.maxIncluded=!h._config.maxIncluded;var t=h._container.getRef();t&&(h._config.maxIncluded?t.classList.add("right-included"):t.classList.remove("right-included")),h._onValueChanged()},h._createInputValues=function(){function e(e){var t=e.input,a=t.className,n=t.value,i=e.button,r=i.className,o=i.display,s=new hU({tag:"input",className:a}),l=s.getRef();return l&&(l.value=n),[s,new hU({tag:"button",className:r,textContent:o})]}h._minInputContainer=new hU({tag:"div",className:"wyn-flex wyn-flex-row wyn-flex-no-wrap"});var t="wyn-w-32 wyn-focus:border-0 wyn-focus:outline-0 wyn-rounded wyn-p-1 wyn-h-8",a="wyn-w-8 wyn-mx-0.25 wyn-rounded wyn-focus:outline-0 wyn-flex-grow-0 wyn-h-8",n=e({input:{className:"min-input ".concat(t),value:h._config.inputValue.min},button:{className:"min-included ".concat(a)}}),i=N()(n,2),r=i[0],o=i[1];h._minInput=r,h._minIncludedBtn=o,h._minInputContainer.addChildren(h._minInput,h._minIncludedBtn),h._minInput.addEventListener("change",h._onMinInputChanged),h._minIncludedBtn.addEventListener("click",h._onMinIncludedChanged),h._maxInputContainer=new hU({tag:"div",className:"wyn-flex wyn-flex-row wyn-flex-no-wrap"});var s=e({input:{className:"max-input ".concat(t),value:h._config.inputValue.max},button:{className:"max-included ".concat(a)}}),l=N()(s,2),u=l[0],c=l[1];h._maxInput=u,h._maxIncludedBtn=c,h._maxInputContainer.addChildren(h._maxInput,h._maxIncludedBtn),h._maxInput.addEventListener("change",h._onMaxInputChanged),h._maxIncludedBtn.addEventListener("click",h._onMaxIncludedChanged);var d=new hU({tag:"div",className:"wyn-center-text wyn-h-8"}),p=new hU({tag:"span",textContent:Ft("slicers.value"),style:{lineHeight:"2em"}});d.addChildren(p),h._inputValuesContainer.addChildren(h._minInputContainer,d,h._maxInputContainer),h._container.addChildren(h._inputValuesContainer)},h._createRange=function(){h._rangeContainer=new hU({tag:"div",className:"range wyn-px-2",style:{paddingTop:"0.8em"}}),h._input=new hU({tag:"input",didMountOnRoot:function(e){var t=h._config,a=t.range,n=a.min,i=a.max,r=t.left,o=t.right,s=h._getStep();h._rs=new uZ({target:e,values:{min:n,max:i},actualMin:{value:r,display:Ft("common.min")},actualMax:{value:o,display:Ft("common.max")},step:s,range:!0,onChange:h._onRangeValueChanged,negativeInfinityTip:Ft("common.negativeInfinity"),infinityTip:Ft("infinity")})}}),h._rangeContainer.addChildren(h._input),h._container.addChildren(h._rangeContainer)},h._setRangeValue=function(e,t){h._config.range.min=e<h._negativeInfinity||void 0===e?h._negativeInfinity:e,h._config.range.max=t>h._Infinity||void 0===t?h._Infinity:t,h._rs&&h._rs.setValues(h._config.range.min,h._config.range.max)},h._onRangeValueChanged=Object(Ho.debounce)(function(e){var t=e.split(","),a=N()(t,2),n=+a[0],i=+a[1],r=n===h._negativeInfinity,o=i===h._Infinity;h._config.range.min=n,h._config.range.max=i;var s=h._config.inputValue.min,l=h._config.inputValue.max;if(n!==s||i!==l){if(r||o){var u=s<h._config.left;r?u||(h._config.inputValue.min=-1/0):h._config.inputValue.min=n;var c=l>h._config.right;o?c||(h._config.inputValue.max=1/0):h._config.inputValue.max=i}else n!==h._negativeInfinity&&(h._config.inputValue.min=n),i!==h._Infinity&&(h._config.inputValue.max=i);h._syncInputValueUI(),h._onValueChanged()}},200);var r=e.min,o=e.max,s=.05*(o-r);h._negativeInfinity=r-s,h._Infinity=o+s,h._config={left:r,right:o,minIncluded:e.minIncluded,maxIncluded:e.maxIncluded,inputValue:{min:r,max:o},range:{min:h._negativeInfinity,max:h._Infinity},onChange:e.onChange,type:e.slicerType},h._scrollViewContainer=new hU({tag:"div",className:"wyn-w-full"}),h._container=new hU({tag:"div",className:"data-range-slicer-viewer wyn-flex wyn-flex-col wyn-w-full ".concat(h._config.minIncluded?"left-included":""," ").concat(h._config.maxIncluded?"right-included":"")}),h._inputValuesContainer=new hU({tag:"div",className:"range-value-input wyn-flex-align-center wyn-flex wyn-flex-row wyn-w-full wyn-mb-1"}),e.slicerType!==Zn&&e.slicerType!==ei||h._createInputValues(),e.slicerType!==$n&&e.slicerType!==ei||h._createRange();var l=e.parseColor&&e.parseColor("=Theme.Colors!Accent1");l&&(null!==(t=h._container.getRef())&&void 0!==t&&t.style.setProperty("--rs-tracker-bg-color",l),null!==(a=h._container.getRef())&&void 0!==a&&a.style.setProperty("--rs-pointer-included-bg-color",l));var u=e.parseColor&&e.parseColor("=Theme.Colors(4,3)");return u&&(null!==(n=h._container.getRef())&&void 0!==n&&n.style.setProperty("--rs-rail-bg-color",u),null!==(i=h._container.getRef())&&void 0!==i&&i.style.setProperty("--rs-pointer-excluded-bg-color",u)),h._scrollViewContainer.addChildren(h._container),h.addChildren(h._scrollViewContainer),h}return D()(d,[{key:"setValues",value:function(e){var t=e.min,a=e.max,n=e.minIncluded,i=e.maxIncluded;if(void 0!==n){this._config.minIncluded=n;var r=this._container.getRef();r&&(this._config.minIncluded?r.classList.add("left-included"):r.classList.remove("left-included"))}if(void 0===i){this._config.maxIncluded=i;var o=this._container.getRef();o&&(this._config.maxIncluded?o.classList.add("right-included"):o.classList.remove("right-included"))}if(null==t&&(t=-1/0),null==a&&(a=1/0),!(a<t)){var s=!1;t!==this._config.inputValue.min&&(this._config.inputValue.min=t,s=!0),a!==this._config.inputValue.max&&(this._config.inputValue.max=a,s=!0),s&&(this._syncInputValueUI(),this._setRangeValue(this._config.inputValue.min,this._config.inputValue.max))}}},{key:"_syncInputValueUI",value:function(){var e,t,a=this._config.inputValue.min===-1/0?null:"".concat(this._config.inputValue.min),n=this._config.inputValue.max===1/0?null:"".concat(this._config.inputValue.max),i=null===(e=this._minInput)||void 0===e?void 0:e.getRef();i&&null===(i.value=a)&&(i.placeholder=Ft("common.negativeInfinity"));var r=null===(t=this._maxInput)||void 0===t?void 0:t.getRef();r&&null===(r.value=n)&&(r.placeholder=Ft("common.infinity"))}},{key:"_getStep",value:function(){var e=this._config.range,t=e.min,a=e.max,n=wl(a-t),i=wl(n/100);return 1<i?1:wl(Math.pow(10,-hl(i)))}},{key:"setRange",value:function(e,t){if(t<e){var a=e;e=t,t=a}var n=.05*(t-e);if(this._negativeInfinity!==e-n||this._Infinity!==t+n)if(this._negativeInfinity=e-n,this._Infinity=t+n,this._config.left=e,this._config.right=t,this._config.range.min=this._negativeInfinity,this._config.range.max=this._Infinity,this._config.type===$n||this._config.type===ei){var i=this._config,r=i.range,o=r.min,s=r.max,l=i.left,u=i.right,c=this._getStep(),d=this._input.getRef();this._rs.destroy(),this._rs=new uZ({target:d,values:{min:o,max:s},actualMin:{value:l,display:Ft("common.min")},actualMax:{value:u,display:Ft("common.max")},step:c,range:!0,negativeInfinityTip:Ft("common.negativeInfinity"),infinityTip:Ft("common.infinity"),onChange:this._onRangeValueChanged});var p=this._config.inputValue.min<this._negativeInfinity?this._negativeInfinity:this._config.inputValue.min,h=this._config.inputValue.max>this._Infinity?this._Infinity:this._config.inputValue.max;p===this._config.inputValue.min&&h===this._config.inputValue.max||this._rs.setValues(p,h)}else this._syncInputValueUI()}},{key:"resize",value:function(){var e;null!==(e=this._rs)&&void 0!==e&&e.onResize()}},{key:"didMountOnRoot",value:function(){this.scrollbar=new dp.a(this._scrollViewContainer.getRef(),{minScrollbarLength:30})}},{key:"willUnmount",value:function(){this.scrollbar.destroy(),this._rs&&this._rs.destroy()}}]),d}(gU),dZ=function(e){k()(a,e);var t=w()(a);function a(){var o;return I()(this,a),(o=t.apply(this,arguments)).onChange=function(e){var t=RB()(o),a=t.filterJson,n=t.aggData,i=null==n?void 0:n.profile.columns.values[0];if(i){var r=a;r=hC(r,i,"min",e.min.value),r=hC(r,i,"max",e.max.value),r=hC(r,i,"minIncluded",e.min.included),r=hC(r,i,"maxIncluded",e.max.included),o.onFilterChange(r)}},o}return D()(a,[{key:"getInitConfig",value:function(){var e=this.context.store,t=e.getProperties(),a=e.getDocTheme();return{min:0,max:100,minIncluded:!0,maxIncluded:!0,onChange:this.onChange,slicerType:t.slicerStyle,parseColor:function(e){return Vc(e,a)}}}},{key:"init",value:function(e){C()(b()(a.prototype),"init",this).call(this,e);var t=this.getInitConfig();this.slicer=new cZ(t),this.body.setStyle({height:"100%","align-items":"normal"}),this.body.addChildren(this.slicer)}},{key:"setData",value:function(e,t,a){this.aggData=e,this.context.eventHub.fireRender(),this.setRange(),this.setFilter(t),this.scenarioTitle.updateTitle(a),this.context.eventHub.fireRendered()}},{key:"setRange",value:function(){var e,t;if(this.aggData){var a=this.aggData;e=a.min,t=a.max}else e=0,t=100;this.slicer.setRange(e,t)}},{key:"setFilter",value:function(e){this.filterJson=e;var t,a,n=(a={min:null,max:null,minIncluded:!0,maxIncluded:!0},(t=e)&&t.conditions.forEach(function(e){switch(e.operator){case H.AdvancedFilterOperator.GreaterThan:a.min=e.value,a.minIncluded=!1;break;case H.AdvancedFilterOperator.GreaterThanOrEqual:a.min=e.value,a.minIncluded=!0;break;case H.AdvancedFilterOperator.LessThan:a.max=e.value,a.maxIncluded=!1;break;case H.AdvancedFilterOperator.LessThanOrEqual:a.max=e.value,a.maxIncluded=!0}}),a);this.slicer.setValues(n)}},{key:"resize",value:function(){C()(b()(a.prototype),"resize",this).call(this),this.slicer.resize()}}]),a}(tQ),pZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(e){this.container=new dZ,this.container.hide(),this.hostContainer.addChildren(this.container),this.container.init({onFilterChange:e.onSliceFiltersChange})}},{key:"refresh",value:function(){var e=this.data,t=this.sliceFilter,a=this.pivotSettingHelper;this.container.show(),this.container.useMockStyle(!e),this.container.setData(e,t,a)}}]),a}(JX),hZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},yZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"prepareSlicer",value:function(){return hZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.container=new pZ,this.bodyHost.addChildren(this.container),e.next=4,this.container.init({onSliceFiltersChange:this.onSliceFiltersChange});case 4:this.scenarioModel=new XF(this.id);case 5:case"end":return e.stop()}},e,this)}))}}]),a}(rQ),gZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"isEmbedded",value:function(){return!0}},{key:"getUsedParameters",value:function(){return[]}},{key:"getCrossFilters",value:function(){return[]}},{key:"getDependencies",value:function(e,t){return{usedParameters:[],usedVariables:[],dependencies:[],crossFilter:[]}}}]),a}(eO),mZ=function(e){k()(i,e);var n=w()(i);function i(){var t;I()(this,i),(t=n.call(this)).updateParameters=function(){var e=t.properties.contentSetting;(void 0===e?{}:e).parameters&&d$.embeddedDashboardManager.updateParameters(t.renderId,null,!0)};var e=new hU({tag:"div",className:"layout-full embedded-dashboard-container"}),a=new hU({tag:"div",className:"layout-full embedded-dashboard-container-sub"});return e.addChildren(a),t.addChildren(e),t.host=e,t.dashboardHost=a,t}return D()(i,[{key:"refresh",value:function(){this.renderId&&(d$.embeddedDashboardManager.removeSubDashboard(this.renderId),this.renderSubDashboard())}},{key:"renderSubDashboard",value:function(e){var a=this,t=this.properties.contentSetting,n=void 0===t?{}:t,i=n.docId,r=n.pageNumber,o=d$.globalConfigManager.getInitConfig(),s=o.lng,l=o.baseUrl,u=o.token,c=window.WynBi.createViewerLite({dashboardId:i,token:u,baseUrl:l,lng:s,pageNumber:r,isTrial:!1});c.initialize({container:this.host.getRef(),__injectData:{uiDelegatorManager:d$.uiDelegatorManager,useInjectUiDelegatorManager:!0}}).then(function(e){a.updateParameters();var t=a.dashboardHost.getRef();null!=e&&e.connect(t),null!=e&&e.refresh()},function(){}),d$.embeddedDashboardManager.addSubDashboard(this.renderId,c,this.scenarioId,this.pageId)}},{key:"init",value:function(e){var t;this.properties=e.properties,this.scenarioId=e.scenarioId,this.pageId=e.pageId,this.properties.contentSetting&&this.properties.contentSetting.docId&&(this.renderId="".concat(this.scenarioId).concat(null===(t=this.properties.contentSetting)||void 0===t?void 0:t.docId),this.renderSubDashboard(!0))}},{key:"willUnmount",value:function(){this.renderId&&d$.embeddedDashboardManager.removeSubDashboard(this.renderId)}}]),i}(mU),fZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(){this.embeddedDashboard=new mZ;var e=this.context.store.getProperties(),t=this.context.store.id,a=this.context.pageContext.getId();this.embeddedDashboard.init({properties:e,scenarioId:t,pageId:a}),this.hostContainer.addChildren(this.embeddedDashboard)}},{key:"refresh",value:function(){this.embeddedDashboard.refresh()}}]),a}(Tj),vZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},bZ=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).embeddedDashboardContainer=new fZ,e.bodyHost.addChildren(e.embeddedDashboardContainer),e}return D()(a,[{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(a.prototype),"init",e)}}});return vZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,i=new gZ(this.id),this.scenarioModel=i,n.pageModel.addScenario(i,!0),this.embeddedDashboardContainer.init();case 7:case"end":return e.stop()}},e,this)}))}},{key:"refresh",value:function(){}}]),a}(JK),CZ=function(e){k()(a,e);var t=w()(a);function a(){var y;I()(this,a),(y=t.call(this)).getUrl=function(){var e=y.properties.contentSetting||{},t=e.pageSizeMode,a=e.pageDisplayMode,n=e.docId,i=e.showToolbar,r=y.getDp(),o={},s=Fk.Size,l=Fk.Display,u=Fk.Dp,c=Fk.Toolbar;if(t&&t!==Lk.Default&&(o[s]=t),a&&a!==Vk.Default&&(o[l]=a),i&&i!==iw.Default&&(o[c]=i),r&&(o[u]=r),!n)return"";var d=d$.globalConfigManager.getInitConfig(),p=Object.assign(Object.assign({},d),o),h=new URL("".concat(d$.accessService.getUrl()).concat(kk.Report,"/").concat(n));return Object.keys(p).forEach(function(e){var t=p[e];"dp"===e&&(t=decodeURIComponent(t)),h.searchParams.append(e,t)}),h.href},y.dpUrlChangeHandler=function(e){e.subDocId===y.renderId&&y.refresh()};var e=new hU({tag:"iframe",className:"layout-full embedded-report-container"});return y.iframeRef=e.getRef(),y.addChildren(e),y}return D()(a,[{key:"getDp",value:function(){var e=this.renderId;return d$.embeddedReportManager.getDpBySubDocId(e)}},{key:"refresh",value:function(){this.renderId&&(this.iframeRef.src=this.getUrl())}},{key:"renderSubReport",value:function(){var e=this.getUrl();this.iframeRef.src=e,d$.embeddedReportManager.addSubReport(this.renderId,this.scenarioId),d$.embeddedReportManager.onDpUrlChanged(this.dpUrlChangeHandler)}},{key:"init",value:function(e){var t;this.properties=e.properties,this.scenarioId=e.scenarioId,this.properties.contentSetting&&this.properties.contentSetting.docId&&(this.renderId="".concat(this.scenarioId).concat(null===(t=this.properties.contentSetting)||void 0===t?void 0:t.docId),this.renderSubReport())}},{key:"willUnmount",value:function(){this.renderId&&(d$.embeddedReportManager.removeSubReport(this.renderId,this.dpUrlChangeHandler),this.iframeRef.src="")}}]),a}(mU),TZ=function(e){k()(a,e);var t=w()(a);function a(){return I()(this,a),t.apply(this,arguments)}return D()(a,[{key:"init",value:function(){this.embeddedReport=new CZ;var e=this.context.store.getProperties(),t=this.context.store.id;this.embeddedReport.init({properties:e,scenarioId:t}),this.hostContainer.addChildren(this.embeddedReport)}},{key:"resize",value:function(){this.refresh()}},{key:"refresh",value:function(){this.embeddedReport.refresh()}}]),a}(Tj),SZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},DZ=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.call(this)).embeddedReportContainer=new TZ,e.bodyHost.addChildren(e.embeddedReportContainer),e}return D()(a,[{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(a.prototype),"init",e)}}});return SZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.init.call(this),t=this.context,a=t.store,n=t.pageContext,this.id=a.id,i=new gZ(this.id),this.scenarioModel=i,n.pageModel.addScenario(i,!0),this.embeddedReportContainer.init();case 7:case"end":return e.stop()}},e,this)}))}},{key:"refresh",value:function(){this.scenarioModel.refreshData()}},{key:"resize",value:function(){this.embeddedReportContainer.resize()}}]),a}(JK);(FQ=EQ=EQ||{}).SelectionChanged="selectionChange",FQ.Render="render",FQ.Rendered="rendered",FQ.Destroy="destroy",FQ.MouseEnter="mouseEnter",FQ.MouseMove="mouseMove",FQ.MouseLeave="mouseLeave",FQ.CardItemClick="cardItemClick",FQ.ClearCache="clearCache",FQ.RenderFailed="renderFailed";var kZ,wZ,xZ,AZ,IZ,PZ=function(e){k()(r,e);var i=w()(r);function r(e,t,a){var p;I()(this,r),(p=i.call(this)).initDomEvent=function(){p.uiDashboardDom.addEventListener("click",p.onDashboardDomClick),p.uiDashboardDom.addEventListener("click",p.onDashboardDomClickWithHandle,!0),p.uiDashboardDom.addEventListener("mouseenter",p.onDashboardDomMouseEnter)},p.renderLite=function(){var e,t;if(ae.isEmpty(p.props.cardTemplateScenarios))p.emit(EQ.Rendered);else{var a=p.generateDocData(p.props.index,p.props.categoryValue,p.props.cardTemplatePageOptions,p.props.cardTemplateScenarios,p.props.cardTemplateOptions,p.props.interactionMode),n=d$.globalConfigManager.getInitConfig(),i=n.lng,r=n.defaultLng,o=n.baseUrl,s=n.token,l=n.theme,u=n.edition,c=d$.globalConfigManager.get("dashboardId");p.liteApp=window.WynBi.createViewerLite({dashboardId:c,lng:i,defaultLng:r,baseUrl:o,token:s,theme:l,edition:u,hasCreateDataMonitorLicense:d$.globalConfigManager.get("hasCreateDataMonitorLicense"),disableAutoScroll:d$.globalConfigManager.get("disableAutoScroll")||!!p.props.isDashboardDesigner||!!p.props.isFocused,__isBuildInApp:!0,isTrial:!1,disableAutoSwitchPage:!0,disableNotification:!0,__hideNav:!0,__notNeedFetchConfig:!0});var d=d$.reduxProxy.getState();null!==(t=null===(e=p.liteApp.initialize({container:p.uiDashboardDom,document:a,__injectData:{isMobile:p.props.isMobile,parentStore:d$.reduxProxy.getStore(),getParentDocDataStateFn:ko,httpResourceManager:d$.httpResourceManager,dashboardVariableManager:d$.dashboardVariableManager,parameterManager:d$.parameterManager,definitionManager:d$.definitionManager,uiDelegatorManager:d$.uiDelegatorManager,useInjectUiDelegatorManager:d$.reduxProxy.isLite,amapLoader:d$.amapLoader,datasetInfoList:Hs.datasetInfoList(d),injectedGlobalFilters:p.props.cardGlobalFilters?p.props.cardGlobalFilters:void 0}}))||void 0===e?void 0:e.then(function(e){if(p.uiDashboardDom.parentElement){var t=e.pages[0];(p.uiPage=t).scenarios.forEach(function(e){return p.processSubScenario(t,e)}),t.containers.forEach(function(e){return e.children.forEach(function(e){return p.processSubScenario(t,e)})}),t.connect(p.uiPageDom),t.on("rendered",function(){p.emit(EQ.Rendered)}),t.refresh()}}))&&void 0!==t&&t.catch(function(e){nu.error(e),p.emit(EQ.RenderFailed)})}},p.processSubScenario=function(i,r){r.on("selectionChange",function(e,t,a,n){p.onSubScenarioSelectionChanged(i,r,a,n)})},p.generateDocData=QI(function(e,t,a,n,i,r){var o,s=d$.reduxProxy.getState(),l=Hs.docData(s),u={id:"tempPage",options:ae.mergeDeepRight(ps,{page:null!=a?a:{}}),state:{selected:!0},optionsDirtyState:{}},c=ae.assocPath(["pageIdList"],[u.id],l.dashboard);return c=ae.assocPath(["options","page","backgroundColor"],void 0,c),c=ae.assocPath(["options","page","backgroundImage"],cs.page.backgroundImage,c),{dashboard:c=ae.assocPath(["options","dashboard","pivotFilters"],p.generateGlobalFilter(p.props.pivotSettingHelper,e,t),c),pages:V()({},u.id,u),scenarios:ae.clone(ae.mapObjIndexed(p.generateScenario(u,r),null!=n?n:{})),profiles:l.profiles,docTheme:null!==(o=l.docTheme)&&void 0!==o?o:Hs.docTheme(s),languageResource:Hs.languageResource(s)}}),p.generateScenario=ae.curry(function(e,t,a){var n=ae.assocPath(["pageId"],e.id,a);return n=ae.assocPath(["state","isInCardTemplate"],!0,n),t===H.CardInteractionMode.CardItem&&(n=ae.assocPath(["options","property","tooltipMode"],H.TooltipMode.None,n),n=ae.assocPath(["options","property","clickAction"],H.InteractionMouseEventAction.None,n),n=ae.assocPath(["options","contextMenuActions"],[],n)),n}),p.generateGlobalFilter=function(a,e,t){var n=ae.pick(a.getUsedDimensionItems().map(function(e){return e.display}),t);return ae.compose(ae.values,ae.mapObjIndexed(function(e,t){return{datasetId:"6263f98c-1bac-439b-bee0-01a71f349e4f",type:10,rule:"general",exclude:!1,conditionRule:6,columnNames:[a.getPivotSettingItemByDisplay(t).name],range:{items:[{value:e}]},editable:!0}}))(n)},p.getCardItemHitTestInfo=function(e){var t=p.props,a=t.index,n=t.pivotSettingHelper,i=t.categoryValue;return{event:e,index:a,cardItemValue:p.convertCategoryValueToSelectedCategoryValue(n,i)}},p.onDashboardDomMouseEnter=function(e){p.uiDashboardDom.addEventListener("mouseleave",p.onDashboardDomMouseLeave),p.uiDashboardDom.addEventListener("mousemove",p.onDashboardDomMouseMove,!0),p.isHover=!0,p.renderActualStyle(),p.emit(EQ.MouseEnter,p.getCardItemHitTestInfo(e))},p.onDashboardDomMouseLeave=function(e){p.uiDashboardDom.removeEventListener("mouseleave",p.onDashboardDomMouseLeave),p.uiDashboardDom.removeEventListener("mousemove",p.onDashboardDomMouseMove),p.isHover=!1,p.renderActualStyle(),p.emit(EQ.MouseLeave,p.getCardItemHitTestInfo(e))},p.onDashboardDomMouseMove=function(e){p.emit(EQ.MouseMove,p.getCardItemHitTestInfo(e))},p.onDashboardDomClick=function(e){e.stopPropagation()},p.onDashboardDomClickWithHandle=function(i){nu.log("1. onDashboardDomClickWithHandle: ".concat(p.props.index)),setTimeout(function(){return setTimeout(function(){var e=p.props,t=e.pivotSettingHelper,a=e.categoryValue,n=p.convertCategoryValueToSelectedCategoryValue(t,a);p.selectCardItem(p.props.index,n),nu.log("1.----\x3e onDashboardDomClickWithHandle: ".concat(p.props.index," == invoke resume()")),p.infoEx.selectionManager.resume(),p.emit(EQ.CardItemClick,p.getCardItemHitTestInfo(i))})})},p.onSubScenarioSelectionChanged=function(e,t,a,n){nu.log("2. onSubScenarioSelectionChanged: ".concat(p.props.index));var i=p.props.pivotSettingHelper,r=uC.create(t.store.getPivot().pivotSetting,i.getDatasetSchema(),i.getDatasetProfile()),o=ae.map(function(e){return p.convertCategoryValueToSelectedCategoryValue(r,e)},a),s=p.props.categoryValue,l=p.convertCategoryValueToSelectedCategoryValue(i,s);p.selectCardItem(p.props.index,l,o.length?t.store.id:void 0,o),nu.log("2.    onSubScenarioSelectionChanged: ".concat(p.props.index," == invoke suspend()")),p.infoEx.selectionManager.suspend()},p.convertCategoryValueToSelectedCategoryValue=function(r,o){return ae.compose(ae.reduce(function(e,t){var a=r.getPivotSettingItemByDisplay(t);if(a){var n=o[t],i={categoryName:"category",field:a.name,display:a.display,originalValue:n,value:a.formatValue(n),isAggValueItem:Jb(a)};return ae.assoc(a.display,i,e)}return e},{}),ae.keys)(o)},p.selectCardItem=function(e,t,a,n){void 0===e&&nu.error("CardItem.selectCardItem(): cardItemIndex can NOT be undefined."),nu.log("selectCardItem():",JSON.stringify(e),"; subScenarioValues:",n?n.length:void 0),p.infoEx.selectionManager.selectItem(e,{cardItemIndex:e,cardItemValue:t,subScenarioId:a,subScenarioValues:n})},p.uiDashboardDom=e,p.props=t,p.infoEx=a;var n={class:"ui-page",key:t.index};p.uiPageDom=document.createElement("div"),rp(p.uiPageDom,n);return p.uiDashboardDom.appendChild(p.uiPageDom),ip(p.uiPageDom,{width:"100%",height:"100%"}),p.initDomEvent(),p}return D()(r,[{key:"destroy",value:function(){var e;this.emit(EQ.Destroy),this.uiDashboardDom.removeEventListener("click",this.onDashboardDomClick),this.uiDashboardDom.removeEventListener("click",this.onDashboardDomClickWithHandle,!0),this.uiDashboardDom.removeEventListener("mouseenter",this.onDashboardDomMouseEnter),this.removeAllListeners(),null!==(e=this.liteApp)&&void 0!==e&&e.destroy(),this.liteApp=null}},{key:"getRef",value:function(){return this.uiDashboardDom}},{key:"getProps",value:function(){return this.props}},{key:"setProps",value:function(e){var t=this.props;this.props=e,t.isSelected!==e.isSelected&&(this.renderActualStyle(),e.isSelected||this.clearSelection())}},{key:"renderActualStyle",value:function(){var e,t,a,n=!1,i=this.props.cardTemplateOptions,r=i.regularStyle,o=i.selectedStyle,s=i.hoverStyle;this.props.isSelected?(a=o,n=!0):a=this.isHover?s:r;var l={backgroundColor:"",backgroundImage:"",backgroundSize:"",backgroundRepeat:"",backgroundPosition:""};null!==(e=a.backgroundImage)&&void 0!==e&&e.id?l=Object.assign(Object.assign({},l),{backgroundImage:'url("'.concat(null===(t=a.backgroundImage)||void 0===t?void 0:t.id,'"'),backgroundSize:H.ImageDisplayMode.Stretched,backgroundRepeat:H.ImageRepeat.NoRepeat,backgroundPosition:"".concat(H.VAlign.Center," ").concat(H.HAlign.Center)}):a.backgroundGradient?l=Object.assign(Object.assign({},l),{backgroundColor:"",backgroundImage:a.backgroundGradient,backgroundSize:H.ImageDisplayMode.Stretched,backgroundRepeat:H.ImageRepeat.NoRepeat,backgroundPosition:"".concat(H.VAlign.Center," ").concat(H.HAlign.Center)}):a.backgroundColor&&(l=Object.assign(Object.assign({},l),{backgroundColor:a.backgroundColor}));var u=Object.assign({borderStyle:"solid",borderWidth:a.borderThickness,borderColor:a.borderColor},l);ip(this.uiDashboardDom,u),n?this.uiDashboardDom.classList.add("selected"):this.uiDashboardDom.classList.remove("selected")}},{key:"render",value:function(){this.emit(EQ.Render);var e=this.props.cardTemplateOptions,t=e.margin,a=e.padding,n=e.borderRadius,i={borderTopLeftRadius:n.left,borderTopRightRadius:n.top,borderBottomLeftRadius:n.right,borderBottomRightRadius:n.bottom,marginLeft:t.left,marginTop:t.top,marginRight:t.right,marginBottom:t.bottom,paddingLeft:a.left,paddingTop:a.top,paddingRight:a.right,paddingBottom:a.bottom};ip(this.uiDashboardDom,i),this.renderActualStyle(),this.renderLite()}},{key:"clearSelection",value:function(){var e;null!==(e=this.uiPage)&&void 0!==e&&e._clearSelection()}}]),r}(f.a.EventEmitter),_Z=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this))._suspendFlag=!1,t._store=[],t._selectionMode=e,t}return D()(n,[{key:"selectItem",value:function(e,t){if(this.canSelect())switch(this._selectionMode){case H.SlicerSelectionMode.Single:return void this.selectItemWithSingle(e,t);case H.SlicerSelectionMode.Multiple:return void this.selectItemWithMultiple(e,t)}}},{key:"getAllSelectedItems",value:function(){return ae.filter(function(e){return e},this._store)}},{key:"getSelectedItem",value:function(e){return this._store[e]}},{key:"isItemSelected",value:function(e){return!!this._store[e]}},{key:"clear",value:function(){this._suspendFlag=!1,nu.log("clear all selected cardItems.");var e=this.getSelectedItemIndexList();this._store=[],e.length&&this.onSelectionChanged(e)}},{key:"destroy",value:function(){this.removeAllListeners(),this._store=[]}},{key:"suspend",value:function(){this._suspendFlag=!0}},{key:"resume",value:function(){this._suspendFlag=!1}},{key:"canSelect",value:function(){return!this._suspendFlag}},{key:"onSelectionChanged",value:function(e){this.emit(EQ.SelectionChanged,e)}},{key:"selectItemWithSingle",value:function(e,t){if(void 0===t&&nu.error("SelectionMode.Single: itemValue not support undefined."),this._store[e]!==t&&!Ho.isEqual(this._store[e],t)){var a=this.getSelectedItemIndexList();this.clearInternal(),this._store[e]=t,this.onSelectionChanged(ae.uniq([].concat(R()(a),[e])))}}},{key:"selectItemWithMultiple",value:function(e,t){void 0===t&&nu.error("SelectionMode.Multiple: itemValue not support undefined."),!this._store[e]||t.subScenarioValues&&t.subScenarioValues.length?this._store[e]=t:this._store[e]=void 0,this.onSelectionChanged([e])}},{key:"clearInternal",value:function(){this._store=[]}},{key:"getSelectedItemIndexList",value:function(){for(var e=[],t=0;t<this._store.length;t++)this._store[t]&&e.push(t);return e}}]),n}(f.a.EventEmitter),MZ=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,a),a},LZ=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};(IZ=AZ=AZ||{})[IZ.RemoveSmallKey=0]="RemoveSmallKey",IZ[IZ.RemoveBigKey=1]="RemoveBigKey",IZ[IZ.SpecificKey=2]="SpecificKey";var RZ=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;I()(this,t),kZ.set(this,void 0),wZ.set(this,void 0),xZ.set(this,void 0),MZ(this,kZ,e),MZ(this,wZ,[]),MZ(this,xZ,new Map)}return D()(t,[{key:"setMaxCount",value:function(e){if(e<LZ(this,kZ))for(;LZ(this,wZ).length>e;)this.removeCacheInternal(AZ.RemoveBigKey);MZ(this,kZ,e)}},{key:"setCache",value:function(e,t){if(LZ(this,wZ).length+1>LZ(this,kZ)){for(var a=!1,n=0;n<LZ(this,wZ).length;n++){var i=LZ(this,wZ)[n];if(Math.abs(i-e)>=LZ(this,kZ)){this.removeCacheInternal(AZ.SpecificKey,i),a=!0;break}}if(!a){var r=AZ.RemoveSmallKey;e<LZ(this,wZ)[0]&&(r=AZ.RemoveBigKey),this.removeCacheInternal(r)}}LZ(this,xZ).set(e,t),LZ(this,wZ).push(e),MZ(this,wZ,Ho.sortBy(LZ(this,wZ)))}},{key:"getCache",value:function(e){return LZ(this,xZ).get(e)}},{key:"removeCache",value:function(e){this.removeCacheInternal(AZ.SpecificKey,e)}},{key:"getAllCaches",value:function(){var t=[];return LZ(this,xZ).forEach(function(e){return t.push(e)}),t}},{key:"clear",value:function(){LZ(this,xZ).forEach(function(e){return e.destroy()}),LZ(this,xZ).clear(),MZ(this,wZ,[])}},{key:"count",value:function(){return LZ(this,xZ).size}},{key:"clearRedundantCache",value:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:[];R()(LZ(this,xZ).keys()).forEach(function(e){a.includes(e)||t.removeCache(e)})}},{key:"removeCacheInternal",value:function(e,t){var a;switch(e){case AZ.RemoveBigKey:a=LZ(this,wZ).pop();break;case AZ.RemoveSmallKey:a=LZ(this,wZ).shift();break;case AZ.SpecificKey:var n=LZ(this,wZ).indexOf(t);LZ(this,wZ).splice(n,1),a=t}if(void 0!==a){var i=LZ(this,xZ).get(a);i&&(LZ(this,xZ).delete(a),i.destroy())}}}]),t}();kZ=new WeakMap,wZ=new WeakMap,xZ=new WeakMap;function VZ(e){return ae.compose(ae.map(ae.prop("field")),ae.values,ae.filter(function(e){return!e.isAggValueItem}))(e)}function NZ(e){if(e.length){var t=ae.compose(ae.map(ae.values),ae.map(ae.prop("cardItemValue")))(e);return{selectedFields:ae.map(ae.filter(function(e){return!e.isAggValueItem}),t),selectedFieldsWithMeasure:t}}}function EZ(e,t){var a,n,i=NZ(t),r=ae.values(e.cardItemValue);return{info:{hitPoint:{x:e.event.clientX,y:e.event.clientY},fields:r,selectedFields:null!==(a=null==i?void 0:i.selectedFields)&&void 0!==a?a:[],selectedFieldsWithMeasure:null!==(n=null==i?void 0:i.selectedFieldsWithMeasure)&&void 0!==n?n:[]},isSelectedItem:t&&0<t.length}}function FZ(e,t){var a;if(e){var n=e.matrix.rows.headers.reduce(function(e,t){var a=function a(e,t){var n=Object.assign({},e);n[t.column]=t.label;return null==t.next||0===t.next.length?[n]:t.next.reduce(function(e,t){return e.concat(a(n,t))},[])}({},t);return[].concat(R()(e),R()(a))},[]);if(!t.getAllMeasures().length)return n;var i=ae.keys(null!==(a=n[0])&&void 0!==a?a:{}),r=e.matrix.values;return n.map(function(t){return Ho.find(r,function(e){return Ho.isEqual(t,Ho.pick(e,i))})})}}var OZ=function(e){k()(o,e);var r=w()(o);function o(e,t){var g;I()(this,o),(g=r.call(this)).state={categoryValueList:void 0},g._itemRenderStateManager=new Map,g.setState=function(e,t){var a=ae.mergeRight(g.state,e),n=g.shouldComponentUpdate(g.props,a);g.state=a,n&&g.render(),"function"==typeof t&&t()},g.render=Ho.debounce(function(){var e;if(g.virtualizedGrid){for(g.virtualizedGrid.destroy();null!==(e=g.cardItemsHostContainer)&&void 0!==e&&e.firstChild;)g.cardItemsHostContainer.firstChild.remove();g.clearCache()}if(g.state.categoryValueList&&g.state.categoryValueList.length){var t=g.getCardItemsLayoutInfo(),a=t.maxItemsCountInView;null!=g.props.cacheLines&&-1<=g.props.cacheLines&&(a=-1===g.props.cacheLines?g.props.categoryValueList.length:Math.max(g.props.cacheLines*g.props.cardTemplateOptions.itemCountPerLine)),g._cacheManager.setMaxCount(a);var n=Object.assign(Object.assign({},t),{id:"vg-".concat(g.props.scenarioId),cellRenderer:g.renderCardItem,onSectionRendered:g.onGridSectionRendered,onDisplayChildrenChange:g.onGridDisplayChildrenChange});g.virtualizedGrid=new Tp(g.cardItemsHostContainer,n)}}),g.getItemCountPerLine=function(){return g.props.isMobile?1:g.props.cardTemplateOptions.itemCountPerLine},g.getCardItemIndex=function(e,t){var a=g.getItemCountPerLine();return g.props.cardTemplateOptions.flowDirection===H.CardFlowDirection.Z_Mode?t*a+e:e*a+t},g.calcScenarioMobileAutoLayout=function(){var e=g.props,t=e.cardTemplateScenarios,a=e.isMobile,n=e.cardTemplatePageOptions;if(a&&n.mobileAutoLayout){var i=d$.reduxProxy.getState(),r=Hs.dashboard(i),o=ks.margin(r);g._mobileAutoLayoutMap=Ru(o,ae.values(t))}},g.getCardTemplateRatio=function(){var e=g.props,t=e.cardTemplateScenarios,a=e.isMobile,n=e.cardTemplatePageOptions;if(!t||ae.isEmpty(t))return 1;var i=ae.compose(qu,ae.map(function(e){return a?n.mobileAutoLayout?g._mobileAutoLayoutMap[e.id]:e.mobileLayout:e.layout}),ae.values)(t);return i.width/i.height},g.renderCardItem=function(e){var t=g.props.cardTemplateOptions,a=t.enablePagination,n=t.itemCountPerPage,i=g.getCardItemCount(),r=a?Math.min(n,i):g.getCardItemCount(),o=g.getCardItemIndex(e.columnIndex,e.rowIndex);if(!(r<=o)){var s=g._cacheManager.getCache(o);if(s)return s.getRef();var l={class:np("dd-card-item","ui-dashboard"),key:e.key},u=document.createElement("div");rp(u,l);var c=g.props.cardTemplateOptions.margin,d=Object.assign(Object.assign(Object.assign({},e.style),{overflow:"hidden"}),{width:e.style.width-c.left-c.right,height:e.style.height-c.top-c.bottom});ip(u,d);var p=g.state.categoryValueList[o],h=!g.props.onlyRenderFirstCardItemContent||0===e.columnIndex&&0===e.rowIndex;s=new PZ(u,{index:o,categoryValue:p,cardTemplatePageOptions:g.props.cardTemplatePageOptions,cardTemplateScenarios:h?g.props.cardTemplateScenarios:{},cardTemplateOptions:g.props.cardTemplateOptions,pivotSettingHelper:g.props.pivotSettingHelper,isSelected:g._selectionManager.isItemSelected(o),interactionMode:g.props.interactionMode,isMobile:g.props.isMobile,isFocused:g.props.isFocused,isDashboardDesigner:g.props.isDashboardDesigner,cardGlobalFilters:g.props.cardGlobalFilters},{selectionManager:g._selectionManager});var y=g._cacheManager.getCache(o);return y&&y.destroy(),g._cacheManager.setCache(o,s),s.on(EQ.MouseEnter,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return g.emit.apply(g,[EQ.MouseEnter].concat(t))}),s.on(EQ.MouseLeave,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return g.emit.apply(g,[EQ.MouseLeave].concat(t))}),s.on(EQ.MouseMove,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return g.emit.apply(g,[EQ.MouseMove].concat(t))}),s.on(EQ.Render,function(){return g._itemRenderStateManager[o]=EQ.Render}),s.on(EQ.Rendered,function(){return g.onCardItemRendered(o)}),s.on(EQ.Destroy,function(){return g._itemRenderStateManager.delete(o)}),s.on(EQ.CardItemClick,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return g.emit.apply(g,[EQ.CardItemClick].concat(t))}),s.on(EQ.RenderFailed,function(){return g._cacheManager.removeCache(o)}),s.render(),u}},g.onGridDisplayChildrenChange=function(e){var t=ae.map(function(e){return g.getCardItemIndex(e.columnIndex,e.rowIndex)},e);g._cacheManager.clearRedundantCache(t)},g.onGridSectionRendered=function(e){g._renderedSection=e,g.emit(EQ.Render)},g.onCardItemRendered=function(e){g._itemRenderStateManager[e]=EQ.Rendered;var t=!0;if(g._renderedSection)for(var a=g._renderedSection.rowStartIndex;a<=g._renderedSection.rowStopIndex&&t;a++)for(var n=g._renderedSection.columnStartIndex;n<=g._renderedSection.columnStopIndex;n++){var i=g.getCardItemIndex(n,a);if(g._itemRenderStateManager[i]===EQ.Render){t=!1;break}}t&&g.emit(EQ.Rendered)},g.onSelectionManagerChanged=function(e){g._selectionManager.suspend(),e.forEach(function(e){var t=g._cacheManager.getCache(e),a=g._selectionManager.isItemSelected(e);null!=t&&t.setProps(Object.assign(Object.assign({},t.getProps()),{isSelected:a}))}),g._selectionManager.resume();var t=g._selectionManager.getAllSelectedItems();g.emit(EQ.SelectionChanged,t)},g.getRenderCategoryValueList=QI(function(e,t,a,n){var i=n;if(e&&null!=n){var r=a*t;i=ae.slice(r,r+t,n)}return i}),g.cardItemsHostContainer=e,g.props=t,g.calcScenarioMobileAutoLayout();var a=g.props.cardTemplateOptions,n=a.enablePagination,i=a.itemCountPerPage;return g.state={categoryValueList:g.getRenderCategoryValueList(n,i,g.props.currentCardPageIndex,g.props.categoryValueList)},g._selectionManager=new _Z(t.selectionMode),g._selectionManager.addListener(EQ.SelectionChanged,g.onSelectionManagerChanged),g._cacheManager=new RZ,g}return D()(o,[{key:"destroy",value:function(){this.removeAllListeners(),this._selectionManager.destroy(),this._itemRenderStateManager.clear(),null!=this.virtualizedGrid&&(this._cacheManager.clear(),this.virtualizedGrid.destroy())}},{key:"getProps",value:function(){return this.props}},{key:"setProps",value:function(e){var t=e.cardTemplateOptions,a=t.enablePagination,n=t.itemCountPerPage;this.setState({categoryValueList:this.getRenderCategoryValueList(a,n,e.currentCardPageIndex,e.categoryValueList)});var i=ae.mergeRight(this.props,e),r=this.shouldComponentUpdate(i,this.state);this.props=i,this.calcScenarioMobileAutoLayout(),r&&this.render()}},{key:"shouldComponentUpdate",value:function(e,t){return 0===this._cacheManager.count()||(!Ho.isEqual(this.props.cardTemplateOptions,e.cardTemplateOptions)||(!Ho.isEqual(this.props.textStyle,e.textStyle)||(!Ho.isEqual(this.props.categoryValueList,e.categoryValueList)||(!Ho.isEqual(this.props.cardGlobalFilters,e.cardGlobalFilters)||(!Ho.isEqual(this.props.paletteValues,e.paletteValues)||!Ho.isEqual(t,this.state))))))}},{key:"forceUpdate",value:function(){this.render()}},{key:"clearCache",value:function(){this._cacheManager.clear(),this.emit(EQ.ClearCache)}},{key:"getCardItemCount",value:function(){return this.state.categoryValueList.length}},{key:"getCardItemsLayoutInfo",value:function(){var e=this.props.cardTemplateOptions,t=e.enablePagination,a=e.flowDirection,n=e.itemCountPerPage,i=e.cardItemSize,r=this.getItemCountPerLine(),o=this.props.cardTemplateOptions.layoutMode;this.props.isMobile&&(o=H.CardLayoutMode.Auto);var s=t?n:this.getCardItemCount(),l=Math.ceil(s/r),u=this.cardItemsHostContainer.getBoundingClientRect(),c=u.width,d=u.height,p=this.getCardTemplateRatio(),h=0,y=0,g=a===H.CardFlowDirection.Z_Mode?r:l,m=a===H.CardFlowDirection.Z_Mode?l:r,f=a===H.CardFlowDirection.Z_Mode?0:1,v=H.CardFlowDirection.Z_Mode?1:0;switch(o){case H.CardLayoutMode.Auto:a===H.CardFlowDirection.Z_Mode?y=(h=c/r)/p:h=(y=d/r)*p;break;case H.CardLayoutMode.Distributed:y=a===H.CardFlowDirection.Z_Mode?(h=c/r,d/l):(h=c/l,d/r);break;case H.CardLayoutMode.FixedSize:h=i.width,y=i.height}return{width:c,height:d,columnWidth:h,rowHeight:y,columnCount:g,rowCount:m,overscanColumnCount:f,overscanRowCount:v,lineCount:l,maxItemsCountInView:Math.min(g,Math.floor(c/h)+2+f)*Math.min(m,Math.floor(d/y)+2+v)}}},{key:"cleanSelection",value:function(){ae.forEach(function(e){return e.clearSelection()},this._cacheManager.getAllCaches()),this._selectionManager.clear()}},{key:"getSelection",value:function(){return this._selectionManager.getAllSelectedItems()}}],[{key:"getPageCount",value:function(e,t){return e&&t?Math.ceil(e.length/t):0}}]),o}(f.a.EventEmitter),HZ=function(e){var a=VZ(e[0].cardItemValue),t=e.map(function(e){var t;return BZ(0,(t=e.cardItemValue,ae.compose(ae.reduce(function(e,t){return ae.assoc(t.field,t,e)},{}),ae.values,ae.filter(function(e){return!e.isAggValueItem}))(t)),a)});return{columnNames:a,range:{items:t},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:!1}},BZ=function e(t,a,n){if(n[t]){var i=e(t+1,a,n);return{value:a[n[t]].originalValue,children:i?[i]:void 0}}},UZ=function(e,t){for(var a,n=e,i=1;i<=t&&void 0!==(n=null===(a=n.children)||void 0===a?void 0:a[0]);i++);return n},zZ=function(e){k()(a,e);var t=w()(a);function a(){var o;return I()(this,a),(o=t.call(this)).currentCardPageIndex=0,o.renderCardItems=function(){var e=o.generateCardProps(),t=e.categoryValueList,a=e.cardTemplateOptions,n=a.enablePagination,i=a.itemCountPerPage;if(n){var r=OZ.getPageCount(t,i);o.currentCardPageIndex>=r&&(o.currentCardPageIndex=0,e.currentCardPageIndex=0)}o.card.setProps(e)},o.renderPagination=function(){if(o.props.cardTemplateOptions.enablePagination){var e=OZ.getPageCount(o.props.categoryValueList,o.props.cardTemplateOptions.itemCountPerPage);o.pagination.setValue(o.currentCardPageIndex+1,e)}},o.onPageIndexChanged=function(e){o.handlers.onPageIndexChanged(e),o.card.clearCache(),o.currentCardPageIndex=e-1,o.card.setProps(o.generateCardProps()),o.refresh()},o.host=new hU({tag:"div",className:"card-container"}),o.cardItemsHost=new hU({tag:"div",className:"card-content"}),o.host.addChildren(o.cardItemsHost),o.pagination=new zU({className:"card-pagination",onChange:o.onPageIndexChanged}),o.host.addChildren(o.pagination),o.addChildren(o.host),o}return D()(a,[{key:"init",value:function(e){this.handlers=e.handlers,(this.props=e).cardTemplateOptions.enablePagination?this.cardItemsHost.addClassName("with-pagination"):this.cardItemsHost.removeClassName("with-pagination"),this.card||(this.card=new OZ(this.cardItemsHost.getRef(),this.generateCardProps()),this.addHandler())}},{key:"willUnmount",value:function(){this.card&&(this.card.destroy(),this.card=void 0)}},{key:"getRef",value:function(){return this.host.getRef()}},{key:"addHandler",value:function(){var n=this;this.card.on(EQ.SelectionChanged,function(e){var t,a;null!==(a=null===(t=n.handlers)||void 0===t?void 0:t.onSelectionChange)&&void 0!==a&&a.call(t,e)}),this.card.on(EQ.MouseEnter,function(e){var t,a;null!==(a=null===(t=n.handlers)||void 0===t?void 0:t.onMouseEnter)&&void 0!==a&&a.call(t,e)}),this.card.on(EQ.MouseLeave,function(e){var t,a;null!==(a=null===(t=n.handlers)||void 0===t?void 0:t.onMouseLeave)&&void 0!==a&&a.call(t,e)}),this.card.on(EQ.MouseMove,function(e){var t,a;null!==(a=null===(t=n.handlers)||void 0===t?void 0:t.onMouseMove)&&void 0!==a&&a.call(t,e)}),this.card.on(EQ.CardItemClick,function(e){var t,a;null!==(a=null===(t=n.handlers)||void 0===t?void 0:t.onCardItemClick)&&void 0!==a&&a.call(t,e)}),this.card.on(EQ.ClearCache,function(){var e;null!==(e=n.handlers)&&void 0!==e&&e.onClearCache()}),this.card.on(EQ.Render,function(){n.context.eventHub.fireRender()}),this.card.on(EQ.Rendered,function(){n.context.eventHub.fireRendered()})}},{key:"show",value:function(){this.host.setStyle({display:"block"})}},{key:"hide",value:function(){this.host.setStyle({display:"none"})}},{key:"refresh",value:function(){this.renderCardItems(),this.renderPagination()}},{key:"repaint",value:function(){this.card.forceUpdate(),this.renderPagination()}},{key:"setProps",value:function(e){var t=ae.mergeRight(this.props,e);this.props=t}},{key:"clearCache",value:function(){var e;null!==(e=this.card)&&void 0!==e&&e.clearCache()}},{key:"cleanSelection",value:function(){this.card.cleanSelection()}},{key:"getSelection",value:function(){return this.card.getSelection()}},{key:"generateCardProps",value:function(){return Object.assign(Object.assign({},this.props),{currentCardPageIndex:this.currentCardPageIndex})}}]),a}(mU),KZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},jZ=function(e){k()(a,e);var t=w()(a);function a(){var u;return I()(this,a),(u=t.call(this)).isTooltipModalShown=!1,u.setInteractionInfo=function(){var e=u.context,t=e.store,a=e.pageContext,n=u.hostContainer.getRef().getBoundingClientRect(),i={x:n.x,y:n.y};u.interactionManager.setState({store:t,pageContext:a,pivotSettingHelper:u.pivotSettingHelper,drillSetting:u.drillSetting,offset:i})},u.getInteractionMode=function(){return u.context.store.getProperties().cardInteractionMode||H.CardInteractionMode.CardItem},u.onContextMenu=function(e){var t,a;if(u.getInteractionMode()!==H.CardInteractionMode.SubScenario){e.preventDefault();var n=null===(t=u.selectedInfo)||void 0===t?void 0:t.selectedFields,i=null===(a=u.selectedInfo)||void 0===a?void 0:a.selectedFieldsWithMeasure;u.setInteractionInfo();var r={x:e.clientX,y:e.clientY};u.interactionManager.showContextMenuActions(r,n,i).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&u.cleanSelection()})}},u.cardContainerClickHandle=function(){u.clearCrossFilter()},u.outerClickHandler=function(e){var t=u.context.store.getDashboardConfig().crossFilterMode;jz(e,u.scenarioId,t)&&u.clearAll()},u.innerClickHandler=function(e){e===u.scenarioId&&u.clearAll()},u.onMouseEnter=function(e){if(u.getInteractionMode()!==H.CardInteractionMode.SubScenario){var t=EZ(e,u.cardLite.getSelection()).info;u._showToolTip(t)}},u.onMouseLeave=function(){u.getInteractionMode()!==H.CardInteractionMode.SubScenario&&u._hideToolTip()},u.onMouseMove=function(e){u.getInteractionMode()!==H.CardInteractionMode.SubScenario&&u._moveTooltip(e.event)},u.onCardItemClick=function(e){if(u.getInteractionMode()!==H.CardInteractionMode.SubScenario){var t=EZ(e,u.cardLite.getSelection()),a=t.info,n=t.isSelectedItem,i=u.context.store.getProperties().clickAction;if(i===H.InteractionMouseEventAction.ShowTooltip)n?u._showToolTipModal(a):u._hideToolTipModal();else if(null!=i&&i!==H.InteractionMouseEventAction.None){var r=a.hitPoint,o=NZ(u.cardLite.getSelection()),s=o.selectedFields,l=o.selectedFieldsWithMeasure;u.setInteractionInfo(),u.interactionManager.handleClickAction(r,s,l).then(function(e){e!==H.InteractionMouseEventAction.JumpTo&&u.cleanSelection()})}}},u.onPageIndexChanged=function(e){u.clearAll()},u.makeSelection=function(e){return ae.map(function(e){return ae.compose(ae.reduce(function(e,t){return ae.assoc(t.display,t.originalValue,e)},{}),ae.values)(e.cardItemValue)},e)},u.onSelectionChange=function(e){var t;u.context.eventHub.fireSelectionChange(u.makeSelection(e),u.pivotSettingHelper.getTinyProfile());var a=u.context.store.getProperties().clickAction;if(a===H.InteractionMouseEventAction.ShowTooltip||a===H.InteractionMouseEventAction.None){u.updateSelectedInfo(e);var n=function(e,s,t){if(e.length)return t?e.map(function(e){var t,a=VZ(e.cardItemValue),n=BZ(0,e.cardItemValue,a),i=[];e.subScenarioId&&null!==(t=s[e.subScenarioId])&&void 0!==t&&t.options.enableCrossFilter&&(i=e.subScenarioValues||[]);var r=ae.map(function(e){return BZ(0,e,VZ(e))},i),o=UZ(n,a.length-1);return o.children=ae.concat(o.children||[],r),{columnNames:ae.compose(ae.uniq,ae.reduce(function(e,t){return ae.concat(e,VZ(t))},[]),ae.concat([e.cardItemValue]))(i),range:{items:[n]},rule:H.FilterRule.GENERAL,type:H.FilterType.EXACT,exclude:!1}})[0]:HZ(e)}(e,u.context.store.getCardTemplateScenarios());n?u.setCrossFilter(n):u.clearCrossFilter(),u.context.pageContext.pageModel.triggerSelectionChange(u.context.store.id,null===(t=u.selectedInfo)||void 0===t?void 0:t.selectedFieldsWithMeasure)}},u.onClearCache=function(){u._hideAll()},u.reset=function(){u.tooltip.hide()},u.generateCardProps=function(){var e,t=(e={scenarioId:u.scenarioId,pageModel:u.pageModel,contextMenu:u.contextMenu,pivotSettingHelper:u.pivotSettingHelper,cardTemplatePageOptions:u.context.store.getCardTemplatePageOptions(),cardTemplateScenarios:u.context.store.getCardTemplateScenarios(),cardTemplateOptions:u.context.store.getCardTemplateOptions(),textStyle:u.context.store.getProperties().textStyle,selectionMode:u.context.store.getProperties().selectionMode,interactionMode:u.getInteractionMode(),isMobile:u.context.pageContext.getIsMobile(),isFocused:u.context.getEnv().focus},ae.filter(xo,e));return Object.assign(Object.assign({},t),{categoryValueList:u.categoryValueList,cardGlobalFilters:u.cardGlobalFilters})},u.textPanel=new OU({text:Ft("error.noData"),className:"wyn-chart-text-panel"}),u.contextMenu=new QU({maxHeight:240,maxWidth:200,onSelect:function(e){return null==e?void 0:e()},onBackdropClick:function(){return u.clearAll()}}),u.hostContainer.addChildren(u.textPanel,u.contextMenu),u}return D()(a,[{key:"init",value:function(u){return KZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.context.store,a=t.getProperties(),n=a.clickAction,i=t.getOptions(),r=i.contextMenuActions,this.scenarioId=u.scenarioId,this.pageModel=u.pageModel,this.categoryValueList=[],this.interactionManager=new qj({onKeepOrExclude:u.onKeepOrExclude,onDrillTo:u.onDrillChange,onFinishJumpTo:this.reset,contextMenu:this.contextMenu,clickAction:n,contextMenuActions:r}),this.cardLite=new zZ,this.cardLite.hide(),this.hostContainer.addChildren(this.cardLite),this.cardLite.init(Object.assign(Object.assign({},this.generateCardProps()),{handlers:{onPageIndexChanged:this.onPageIndexChanged,onSelectionChange:this.onSelectionChange,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onCardItemClick:this.onCardItemClick,onClearCache:this.onClearCache}})),this.tooltip=new VU,this.tooltip.setOnClose(function(){l.isTooltipModalShown=!1}),o=t.getProperties(),s=o.noData,this.textPanel.setTextStyle(s.textStyle,this.context.pageContext.getScale()),this.textPanel.seNoData(s),this.hostContainer.addChildren(this.tooltip),this.initEvents();case 18:case"end":return e.stop()}},e,this)}))}},{key:"initEvents",value:function(){var e=this.context.pageContext;e.pageModel.on(H.PageEvent.OuterClick,this.outerClickHandler),e.pageModel.on(H.PageEvent.InnerClick,this.innerClickHandler),this.cardLite.getRef().addEventListener("click",this.cardContainerClickHandle),this.cardLite.getRef().addEventListener("contextmenu",this.onContextMenu)}},{key:"willUnmount",value:function(){var e,t=this.context.pageContext;t.pageModel.off(H.PageEvent.OuterClick,this.outerClickHandler),t.pageModel.off(H.PageEvent.InnerClick,this.innerClickHandler),this.cardLite.getRef().removeEventListener("click",this.cardContainerClickHandle),this.cardLite.getRef().removeEventListener("contextmenu",this.onContextMenu),null!==(e=this.interactionManager)&&void 0!==e&&e.destroy()}},{key:"setDrillSetting",value:function(e){this.drillSetting=e}},{key:"setCrossFilter",value:function(e){var t=this.context,a=t.store,n=t.pageContext;a.setCrossFilter(e)&&n.pageModel.doCrossFilter(this.scenarioId)}},{key:"clearCrossFilter",value:function(){this.selectedInfo=void 0;var e=this.context,t=e.store,a=e.pageContext;t.clearCrossFilter()&&a.pageModel.doCrossFilter(this.scenarioId)}},{key:"updateSelectedInfo",value:function(e){this.selectedInfo=NZ(e)}},{key:"clearAll",value:function(){this._hideAll(),this.cleanSelection(),this.clearCrossFilter()}},{key:"_hideAll",value:function(){this.tooltip.hide()}},{key:"cleanSelection",value:function(){this.selectedInfo=void 0,this.cardLite.cleanSelection()}},{key:"_showToolTip",value:function(e){var t;if(!this.isTooltipModalShown&&this.context.store.getProperties().tooltipMode===H.TooltipMode.DataPoint){var a={position:e.hitPoint,fields:null===(t=e.fields)||void 0===t?void 0:t.map(function(e){return{label:e.display,value:e.value}})};this.tooltip.show(a)}}},{key:"_hideToolTip",value:function(){this.isTooltipModalShown||this.tooltip.hide()}},{key:"_showToolTipModal",value:function(e){var t,a={position:e.hitPoint,title:e.title,fields:null===(t=e.fields)||void 0===t?void 0:t.map(function(e){return{label:e.display,value:e.value}}),selected:e.selectedFields};this.isTooltipModalShown=!0,this.tooltip.show(a)}},{key:"_hideToolTipModal",value:function(){this.tooltip.hide()}},{key:"_moveTooltip",value:function(e){var t=this;e&&Ho.throttle(function(){t.tooltip.opened&&!t.isTooltipModalShown&&t.tooltip.move({x:e.clientX,y:e.clientY-20})},16)()}},{key:"getCardBindingDataState",value:function(){var e=this.categoryValueList,t=void 0===e,a=!1;return this.pivotSettingHelper.hasSetting()&&(a=e&&0===e.length),{isMock:t,isNoData:a}}},{key:"refresh",value:function(){if(this.cardLite){var e=this.getCardBindingDataState(),t=e.isMock,a=e.isNoData;t?(this.textPanel.hide(),this.cardLite.hide()):a?(this.textPanel.show(),this.cardLite.hide()):(this.textPanel.hide(),this.cardLite.show(),this.cardLite.setProps(this.generateCardProps()),this.cardLite.refresh())}}},{key:"setAggData",value:function(e,t,a,n){var i;this.pivotSettingHelper=e,this.categoryValueList=t,Ho.isEqual(this.cardGlobalFilters,a)||(this.cardGlobalFilters=a),null!=n&&n.isForceUpdateCardItemDataset&&null!==(i=this.cardLite)&&void 0!==i&&i.clearCache(),this.scheduleRefresh()}},{key:"repaint",value:function(){this.cardLite.repaint()}},{key:"resize",value:function(){this.cardLite.clearCache(),this.textPanel.setScale(this.context.pageContext.getScale()),this.scheduleRefresh()}},{key:"listenDrillCommand",value:function(e,t){var r=this,a=t.onClearDrill,n=t.onActiveDrillItemChange,i=t.getDrillDownPath;e.on(H.Command.DrillDown,function(e,t,a){var n;r.setInteractionInfo();var i=r.interactionManager.getRootDrillDownType();t||i===H.DrillDownType.Path?r.interactionManager.tryDrill(null===(n=r.selectedInfo)||void 0===n?void 0:n.selectedFields,e,t).then(function(){r.cleanSelection(),a.resolve()}).catch(a.reject):a.reject(rU.invalidDimension(t))}),e.on(H.Command.DrillUp,function(e,t){r.setInteractionInfo(),n(e),t.resolve()}),e.on(H.Command.DrillReset,function(e){var t=i();!t||t.length<=1?e.reject(rU.noDrillItem(H.Command.DrillReset)):(r.setInteractionInfo(),a(e),e.resolve())})}}]),a}(Tj),WZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},GZ=function(e){k()(o,e);var t=w()(o);function o(){var a;return I()(this,o),(a=t.call(this)).getCategoryValueList=QI(FZ),a.onDrillToHandler=function(e,t){a.drillState.doDrillDownByDvInfo(e,t),a.breadcrumb.setDrillItems(a.drillState.getDrillDownPath()),a.refresh()},a.onClearDrill=function(){a.drillState.clean(),a.breadcrumb.setDrillItems(a.drillState.getDrillDownPath()),a.container.cleanSelection(),a.refresh()},a.onActiveDrillItemChange=function(e){a.drillState.setActive(e),a.breadcrumb.setDrillItems(a.drillState.getDrillDownPath()),a.container.cleanSelection(),a.refresh()},a.breadcrumb=new MU({onClear:a.onClearDrill,onChange:a.onActiveDrillItemChange}),a.bodyHost.addChildren(a.breadcrumb),a}return D()(o,[{key:"init",value:function(){var e=this,r=Object.create(null,{init:{get:function(){return C()(b()(o.prototype),"init",e)}}});return WZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.init.call(this),this.container=new jZ,t=this.context,a=t.store,n=t.pageContext,this.id=a.id,this.scenarioModel=new iO(a.id,{property:this.context.store.getProperties(),docTheme:this.context.store.getDocTheme(),colorAssignmentManager:d$.colorAssignmentManager,scale:this.context.pageContext.getScale()}),this.scenarioModel.on(H.ScenarioEvent.RefreshData,this.onAggChange.bind(this)),this.scenarioModel.on(H.ScenarioEvent.LoadingStateChange,this.onLoadingStateChange),this.scenarioModel.on(H.ScenarioEvent.Error,this.onAggError),this.scenarioModel.on(H.ScenarioEvent.Repaint,function(){i.container.repaint()}),n.pageModel.addScenario(this.scenarioModel,!0),this.bodyHost.addChildren(this.container),this.container.init({scenarioId:a.id,pageModel:n.pageModel,scenarioModel:this.scenarioModel,onDrillChange:this.onDrillToHandler,onKeepOrExclude:this.onKeepOrExclude}),this.scenarioTitle.init(a.getTitle(),n.getScale()),this.initDrill();case 14:case"end":return e.stop()}},e,this)}))}},{key:"initDrill",value:function(){var e=this,t=this.context,a=t.store,n=t.definition;this.drillState=new Cj(a,n),this.breadcrumb.setDrillItems(this.drillState.getDrillDownPath()),this.container.listenDrillCommand(this.scenarioModel,{getDrillDownPath:function(){return e.drillState.getDrillDownPath()},onClearDrill:this.onClearDrill,onActiveDrillItemChange:this.onActiveDrillItemChange})}},{key:"refresh",value:function(){this.container.reset(),this.context.pageContext.pageModel.doScenarioRefresh(this.id)}},{key:"resize",value:function(){this.scenarioTitle.setTitleStyle(this.context.store.getTitle(),this.context.pageContext.getScale()),this.container.reset(),this.container.resize()}},{key:"onAggChange",value:function(e,t,a,n){C()(b()(o.prototype),"onAggChange",this).call(this);var i=null==e?void 0:e.aggregatedData;this.drillState.setPivotSettingHelper(t),this.container.setDrillSetting(this.drillState.getDrillSetting()),this.scenarioTitle.updateTitle(t);var r=this.getCategoryValueList(i,t);this.container.setAggData(t,r,this.scenarioModel.generateGlobalFiltersForCardItem(),n),this.actionBarContainer.update(t)}}]),o}(JK),YZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},qZ=function(e){k()(a,e);var t=w()(a);function a(e){var i;return I()(this,a),(i=t.call(this)).ready=!1,i.initializing=!1,i.onClickHandler=function(e){e.stopPropagation(),i.context.pageContext.pageModel.doInnerClick(i.store.id)},i.onLoadStart=function(){i.loader.show()},i.onLoadComplete=function(){i.loader.hide()},i.setScrollStyle=function(){var e=RB()(i).store.getProperties(),t=e.scrollbarThumbBackColor,a=e.scrollbarTrackBackColor,n=i.wrapper.getRef();t&&(n.style.setProperty("--scrollbar-thumb-bg-color",t),n.style.setProperty("--scrollbar-thumb-border-color",t)),a&&n.style.setProperty("--scrollbar-track-bg-color",a)},i.store=e,i.loader=new LU,i.wrapper=new hU({tag:"div",className:"wyn-scenario",onClick:i.onClickHandler}),i.backgroundLayer=new wU,i.dataProvider=a.makeContainerDataProvider(e),i.wrapper.addChildren(i.loader,i.backgroundLayer,i.dataProvider),i.addChildren(i.wrapper),i}return D()(a,[{key:"init",value:function(){this.context.eventHub.on(xz.LoadStart,this.onLoadStart),this.context.eventHub.on(xz.LoadComplete,this.onLoadComplete)}},{key:"willUnmount",value:function(){this.context.eventHub.off(xz.LoadStart,this.onLoadStart),this.context.eventHub.off(xz.LoadComplete,this.onLoadComplete),this.store.reset()}},{key:"prepareScenario",value:function(){return YZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.destroyed)return e.abrupt("return");e.next=2;break;case 2:if(t=this.store,a=t.toJSON(),this.context.eventHub.fireBeforeMount(),d$.definitionManager.isDefinitionLoaded(a)){e.next=17;break}return this.loader.show(),e.prev=8,e.next=11,d$.definitionManager.loadVisual(t.getDefinitionId(),t.isSpreadSource());case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),e.t0&&d$.uiDelegatorManager.notificationDelegator.showError(Pd(e.t0));case 16:this.loader.hide();case 17:if(this.destroyed)return e.abrupt("return");e.next=19;break;case 19:if(n=d$.definitionManager.getDefinition(a),t.init(n),this.dataProvider.setContext({definition:n,store:t}),i=t.getDocTheme(),r=t.getImageList(),o=t.getAppearance(),this.mounted){e.next=27;break}return e.abrupt("return");case 27:return this.wrapper.setStyle(Object.assign(Object.assign({},o.textStyle),{fontSize:Jc(o.textStyle.fontSize,this.context.pageContext.getScale()),fontWeight:Uu(o.textStyle.fontWeight),padding:"".concat(o.padding.top,"px ").concat(o.padding.right,"px ").concat(o.padding.bottom,"px ").concat(o.padding.left,"px")})),this.setScrollStyle(),this.backgroundLayer.setStyle(o,i,r),e.next=32,this.dataProvider.init();case 32:this.dataProvider.showActions(),this.ready=!0,this.context.eventHub.fireMounted();case 35:case"end":return e.stop()}},e,this,[[8,13]])}))}},{key:"refresh",value:function(e){var t=0<arguments.length&&void 0!==e&&e;return YZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dataProvider||this.initializing)return e.abrupt("return");e.next=2;break;case 2:if(this.ready){e.next=9;break}return this.initializing=!0,e.next=6,this.prepareScenario();case 6:this.initializing=!1,e.next=10;break;case 9:this.resize();case 10:this.dataProvider.tryRefresh(t);case 11:case"end":return e.stop()}},e,this)}))}},{key:"resize",value:function(){if(this.ready&&this.dataProvider){this.dataProvider.resize();var e=this.store.getAppearance();this.wrapper.setStyle({fontSize:Jc(e.textStyle.fontSize,this.context.pageContext.getScale())})}}},{key:"getTitle",value:function(){return this.dataProvider.getTitle()}}],[{key:"makeContainerDataProvider",value:function(e){switch(e.getScenarioType()){case H.ScenarioType.Visual:return new Zj;case H.ScenarioType.PivotChart:switch(e.getDefinitionId()){case H.ChartType.PivotTable:return new ZJ;case H.ChartType.DataTable:return new uX;case H.ChartType.KpiMatrix:return new xX;case H.ChartType.WebContent:return new jX;case H.ChartType.Card:return new GZ;default:return new mY}case H.ScenarioType.RichEditor:return new xY;case H.ScenarioType.Picture:return new MX;case H.ScenarioType.Slicer:switch(e.getDefinitionId()){case H.SlicerType.LabelSlicer:return new sQ;case H.SlicerType.TreeSlicer:return new PQ;case H.SlicerType.DateRangeSlicer:return new ZQ;case H.SlicerType.ComboBoxSlicer:return new aZ;case H.SlicerType.RelativeDateSlicer:return new lZ;case H.SlicerType.DataRangeSlicer:return new yZ;default:return null}case H.ScenarioType.EmbeddedDashboard:return new bZ;case H.ScenarioType.EmbeddedReport:return new DZ;default:return null}}}]),a}(mU),JZ=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})},XZ=function(e){k()(r,e);var i=w()(r);function r(e){var t;I()(this,r),(t=i.call(this)).store=e;var a=new vU(d$.uiDelegatorManager.dropDownRoot);t.container=new hU({tag:"div",className:"wyn-scenario-focus"});var n=new wU;return n.setStyle(Object.assign(Object.assign({},e.getPageGlobalConfig()),{backgroundImage:void 0}),e.getDocTheme(),e.getImageList()),t.container.addChildren(n),a.addChildren(t.container),t.addChildren(a),t}return D()(r,[{key:"init",value:function(){this.inner=new qZ(this.store),this.container.addChildren(this.inner),this.inner.init(),d$.appEventHub.emit(H.AppEvent.ScenarioFocusChange,!0)}},{key:"willUnmount",value:function(){d$.appEventHub.emit(H.AppEvent.ScenarioFocusChange,!1)}},{key:"refresh",value:function(e){var t=0<arguments.length&&void 0!==e&&e;return JZ(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.inner.refresh(t);case 2:case"end":return e.stop()}},e,this)}))}},{key:"resize",value:function(){this.inner.resize()}},{key:"getTitle",value:function(){return this.inner.getTitle()}}]),r}(mU),QZ=function(e){k()(n,e);var a=w()(n);function n(){var e;I()(this,n),(e=a.call(this)).title="";var t=new hU({tag:"span"});return e.headWrapper=t,e.addChildren(t),e}return D()(n,[{key:"apply",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:1,i=2<arguments.length&&void 0!==a?a:1;this.headWrapper.setText(e.text),this.title=e.text,this.headWrapper.setStyle(Object.assign(Object.assign({},e.textStyle),{fontSize:Jc(e.textStyle.fontSize,i),fontWeight:Uu(e.textStyle.fontWeight),height:"".concat(e.height*n,"px"),lineHeight:"".concat(e.height*n,"px"),textAlign:e.hAlign,display:e.visible?"block":"none"}))}},{key:"getTitle",value:function(){return this.title}}]),n}(gU),ZZ=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this)).wrapper=new hU({tag:"div",className:"layout-full",style:{borderStyle:"solid",borderColor:e.tabStrip.border.color}}),t.tabSize=e.items.length,t.tab=new BU({items:e.items,onSelect:e.onSelect,tabStyle:{width:e.tabStrip.width},disableBtn:!e.tabStrip.showMenuIcon}),t.wrapper.addChildren(t.tab),t.addChildren(t.wrapper),"bottom"===e.tabStrip.position?t.wrapper.setStyle({borderWidth:"1px 0 0 0"}):t.wrapper.setStyle({borderWidth:"0 0 1px 0"}),t}return D()(n,[{key:"setActive",value:function(e){this.tab.setActive(e)}},{key:"apply",value:function(e,t,a){var n=1<arguments.length&&void 0!==t?t:1,i=2<arguments.length&&void 0!==a?a:1,r=e.heightMode===Nr.Fixed?1:n;this.wrapper.setStyle(Object.assign(Object.assign({},e.textStyle),{fontSize:Jc(e.textStyle.fontSize,i),fontWeight:Uu(e.textStyle.fontWeight),height:"".concat(e.height*r,"px"),lineHeight:"".concat(e.height*r,"px"),textAlign:e.alignment,backgroundColor:e.backgroundColor,display:e.visible?"block":"none"}))}},{key:"setCustomStyle",value:function(e,t,a,n){var i,r,o=2<arguments.length&&void 0!==a?a:1,s=3<arguments.length&&void 0!==n?n:1;this.tab.addClassName("wyn-tab-container-header"),Zy({options:Object.assign(Object.assign({},e),{collapseBorder:!0,optionMargin:e.gap,optionPadding:{},optionWidth:e.width.value,widthAdaptive:e.width.mode!==Vr.Fixed,orientation:Xn,textAlign:function(e){switch(e){case"left":return Da;case"center":return ka;case"right":return wa;default:return Da}}(e.textAlignment),optionHeight:e.height-e.backgroundPadding.top-e.backgroundPadding.bottom,regular:Object.assign(Object.assign({},e.inactiveTab),{font:Object.assign(Object.assign({},e.textStyle),e.inactiveTab.textStyle),backgroundColor:e.inactiveTab.backColor,borderColor:e.inactiveTab.border.color}),hover:Object.assign(Object.assign({},e.hover),{font:Object.assign(Object.assign({},e.textStyle),e.hover.textStyle),borderColor:e.hover.border.color}),selected:Object.assign(Object.assign({},e.activeTab),{font:Object.assign(Object.assign({},e.textStyle),e.activeTab.textStyle),backgroundColor:e.activeTab.backColor,borderColor:e.activeTab.border.color,showMarkingLine:!0,markingLine:{color:e.activeTab.indicator.color}}),scale:s}),docTheme:t,node:this.tab.getRef()},e.heightMode===Nr.Fixed?{height:1}:{height:o}),i=this.tab.getRef().style,r=e.padding,i.setProperty("--tab-left-padding","".concat(r.left,"px")),i.setProperty("--tab-top-padding","".concat(r.top,"px")),i.setProperty("--tab-right-padding","".concat(r.right,"px")),i.setProperty("--tab-bottom-padding","".concat(r.bottom,"px"))}},{key:"hideSplitLine",value:function(){this.wrapper.addClassName("wyn-tab-container-without-splitline")}},{key:"getSize",value:function(){return this.tabSize}}]),n}(gU),$Z=function(e){k()(r,e);var i=w()(r);function r(e,t,a){var n;return I()(this,r),(n=i.call(this)).isFocus=!1,n.toggleFocus=function(){n.isFocus=!n.isFocus,n.store.clearCrossFilter()&&n.pageContext.pageModel.doCrossFilter(n.store.id),n.connectedHost.removeChildren(n.instance),n.createContainer(),n.instance.refresh(!0)},n.store=e,n.suspendProcessor=new sz,n.name=e.getName(),n.scenarioType=e.getScenarioType(),n.eventHub=a,(n.pageContext=t).getIsMobile()&&e.changeToMobileLayout(),n}return D()(r,[{key:"createContainer",value:function(){var e=this;this.isFocus?this.instance=new XZ(this.store):this.instance=new qZ(this.store),this.instance.setContext({pageContext:this.pageContext,eventHub:this.eventHub,suspendProcessor:this.suspendProcessor,toggleFocus:this.toggleFocus,getEnv:function(){return{viewer:!0,mobile:e.pageContext.getIsMobile(),focus:e.isFocus,editing:!1}}}),this.instance.init(),this.connectedHost.addChildren(this.instance)}},{key:"connect",value:function(e){C()(b()(r.prototype),"connect",this).call(this,e),this.createContainer()}},{key:"disconnect",value:function(){C()(b()(r.prototype),"disconnect",this).call(this),this.suspendProcessor.reset()}},{key:"refresh",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this.instance&&this.instance.refresh(t)}},{key:"resize",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.resize()}},{key:"suspend",value:function(){this.suspendProcessor.suspend()}},{key:"resume",value:function(){this.suspendProcessor.resume()}},{key:"getTitle",value:function(){var e;return null===(e=this.instance)||void 0===e?void 0:e.getTitle()}}],[{key:"findUIScenario",value:function(e,t){for(var a=0;a<e.length;){var n=t(e[a]);if(n)return n;a++}}}]),r}(Fz),e$=function(e){k()(c,e);var u=w()(c);function c(e){var t;I()(this,c),t=u.call(this);var a=e.scenarios,n=e.store,i=e.pageContext,r=e.eventHub;t.scenarios=a,t.pageContext=i,t.eventHub=r,t.store=n;var o=t.store.getAppearance();t.wrapper=new hU({tag:"div",className:"wyn-container",style:o.textStyle}),t.headerWrapper=new hU({tag:"div",className:"wyn-container-header"}),t.subHeaderWrapper=new hU({tag:"div",className:"wyn-container-sub-header"}),t.bodyWrapper=new hU({tag:"div",className:"wyn-container-body"}),t.footerWrapper=new hU({tag:"div",className:"wyn-container-footer"}),t.backgroundLayer=new wU;var s=t.store.getDocTheme(),l=t.store.getImageList();return t.backgroundLayer.setStyle(o,s,l),t.wrapper.addChildren(t.backgroundLayer,t.headerWrapper,t.subHeaderWrapper,t.bodyWrapper,t.footerWrapper),t.addChildren(t.wrapper),t}return D()(c,[{key:"updateScale",value:function(){var e=this.wrapper.getRef().getBoundingClientRect();if(this.pageContext.getIsMobile()){var t=this.pageContext.getParentGridSize().xScale;this.pageContext.setGridSize(t,t)}else{var a=this.getHeaderHeight(),n=this.pageContext.getParentGridSize().yScale,i=this.store.getLayout(),r=this.store.getMargin(),o=i.width-r.left-r.right,s=i.height-a-r.top-r.bottom;this.pageContext.setGridSize(e.width/o,(e.height-n*a)/s)}}},{key:"getHeaderHeight",value:function(){return 0}},{key:"refresh",value:function(){this.eventHub.fireRender(),this.current?this.resize():(this.updateScale(),this.eventHub.fireBeforeMount(this.scenarios.length),this.mountAllScenarios(),this.eventHub.fireMounted()),this.eventHub.fireRendered()}},{key:"getTitle",value:function(){return""}}]),c}(mU),t$=function(e){k()(i,e);var n=w()(i);function i(e){var t;I()(this,i),(t=n.call(this,e)).header=new QZ,t.headerWrapper.addChildren(t.header);var a=t.store.getProperties();return a.showSplitLine&&a.header.visible&&t.headerWrapper.addClassName("wyn-container-header-with-border"),t}return D()(i,[{key:"mountAllScenarios",value:function(){this.current=new Oz(this.scenarios,this.pageContext.getIsMobile()),this.bodyWrapper.addChildren(this.current);var e=this.store.getProperties();this.header.apply(e.header,this.pageContext.getParentGridSize().yScale,this.pageContext.getScale());var t=this.pageContext.getGridSize(),a=t.xScale,n=t.yScale;this.current.init(a,n)}},{key:"getHeaderHeight",value:function(){var e=this.store.getProperties();return e.header.visible?e.header.height:0}},{key:"resize",value:function(){if(this.current){this.updateScale();var e=this.store.getProperties();this.header.apply(e.header,this.pageContext.getParentGridSize().yScale,this.pageContext.getScale());var t=this.pageContext.getGridSize(),a=t.xScale,n=t.yScale;this.current.resizeAll(a,n)}}},{key:"getTitle",value:function(){return this.header.getTitle()}}]),i}(e$),a$=function(e){k()(u,e);var r=w()(u);function u(e){var i;I()(this,u),(i=r.call(this,e)).isFirstMounted=!0,i.showPrev=function(){var e=i.getTabSettingContent(),t=e.activeTab,a=e.tabs,n=a.indexOf(t);i.onTabSelect(a[n-1])},i.showNext=function(){var e=i.getTabSettingContent(),t=e.activeTab,a=e.tabs,n=a.indexOf(t);i.onTabSelect(a[n+1])},i.onTabSelect=function(e){var t,a;null!==(t=i.scheduler)&&void 0!==t&&t.restart(),i.changeTab(e),null!==(a=i.slideIndicator)&&void 0!==a&&a.setActive(e)},i.getTabSettingContent=function(){return i.store.getAttribute("tabSettingContent")},i.createAutoSwitchButton=function(){var e=new HU({className:"wyn-container-auto-switch-btn icon-page-play-pause",onClick:function(){i.scheduler.isStoped()?(e.removeClassName("icon-page-auto-play"),e.addClassName("icon-page-play-pause"),i.scheduler.start()):(e.removeClassName("icon-page-play-pause"),e.addClassName("icon-page-auto-play"),i.scheduler.stop())}});i.bodyWrapper.addChildren(e)},i.onAutoSwitch=function(){if(!d$.globalConfigManager.getState("pauseAutoSwitch")){var e=i.getTabSettingContent(),t=(e.tabs.indexOf(i.currentKey)+1)%e.tabs.length;i.changeTab(e.tabs[t])}},i.doChangeTab=function(e,t){e===i.store.id&&0<=t&&t<i.tabHeader.getSize()&&i.onTabSelect(t)},i.onScenarioFocusChange=function(e){i.scheduler&&(e?i.scheduler.suspend():i.scheduler.resume())};var t=i.getTabSettingContent(),a=i.store.getProperties(),n=t.tabs.map(function(e){return{key:e,text:t[e].text}});return i.header=new QZ,i.tabHeader=new ZZ({items:n,onSelect:i.onTabSelect,tabStrip:a.tabStrip}),i.headerWrapper.addChildren(i.header),"bottom"===a.tabStrip.position?i.footerWrapper.addChildren(i.tabHeader):i.subHeaderWrapper.addChildren(i.tabHeader),a.showSplitLine?a.header.visible&&i.headerWrapper.addClassName("wyn-container-header-with-border"):i.tabHeader.hideSplitLine(),i.scenariosWrapper=new hU({tag:"div",className:"wyn-container-scenarios"}),i.bodyWrapper.addChildren(i.scenariosWrapper),i}return D()(u,[{key:"createScenarioCollection",value:function(t){var e=this.scenarios.filter(function(e){return e.store.getTabId()===+t});return new Oz(e,this.pageContext.getIsMobile())}},{key:"changeTab",value:function(e){var t,a,n,i,r=this.getTabSettingContent(),o=r.tabs.indexOf(+e);this.store.setAttribute("tabSettingContent",Object.assign(Object.assign({},r),{activeTab:+e})),o<1?null!==(t=this.leftBtn)&&void 0!==t&&t.addClassName("wyn-hidden"):null!==(a=this.leftBtn)&&void 0!==a&&a.removeClassName("wyn-hidden"),1<r.tabs.length&&o>=r.tabs.length-1||1===r.tabs.length?null!==(n=this.rightBtn)&&void 0!==n&&n.addClassName("wyn-hidden"):null!==(i=this.rightBtn)&&void 0!==i&&i.removeClassName("wyn-hidden"),this.current&&this.scenariosWrapper.removeChildren(this.current),this.currentKey=+e,this.current=this.createScenarioCollection(e);var s=this.pageContext.getGridSize(),l=s.xScale,u=s.yScale;this.current.init(l,u),this.scenariosWrapper.addChildren(this.current),this.tabHeader.setActive(this.currentKey),this.current.refreshAll(!this.isFirstMounted)}},{key:"updateScale",value:function(){if(this.store.getProperties().tabStrip.heightMode===Nr.Fixed){var e=this.wrapper.getRef().getBoundingClientRect();if(this.pageContext.getIsMobile()){var t=this.pageContext.getParentGridSize().xScale;this.pageContext.setGridSize(t,t)}else{var a=this.store.getProperties().tabStrip.height,n=this.getHeaderHeight(),i=this.pageContext.getParentGridSize().yScale,r=this.store.getLayout(),o=this.store.getMargin(),s=r.width-o.left-o.right,l=r.height-n-o.top-o.bottom;this.pageContext.setGridSize(e.width/s,(e.height-i*n-a)/(l-a))}}else C()(b()(u.prototype),"updateScale",this).call(this)}},{key:"mountAllScenarios",value:function(){var e=this.store.getProperties(),t=this.getTabSettingContent(),a=t.activeTab,n=t.tabs,i=this.pageContext.getParentGridSize().yScale,r=this.store.getDocTheme();if(this.header.apply(e.header,i,this.pageContext.getScale()),this.tabHeader.apply(e.tabStrip,i,this.pageContext.getScale()),this.tabHeader.setCustomStyle(e.tabStrip,r,i,this.pageContext.getScale()),this.pageContext.getIsMobile()||(this.leftBtn=new HU({className:"wyn-nav-btn wyn-nav-btn-left mdi mdi-chevron-left",onClick:this.showPrev}),this.rightBtn=new HU({className:"wyn-nav-btn wyn-nav-btn-right mdi mdi-chevron-right",onClick:this.showNext}),this.bodyWrapper.addChildren(this.leftBtn,this.rightBtn)),this.changeTab(a),this.isFirstMounted=!1,1<n.length&&!e.tabStrip.visible){var o=new hU({tag:"div",className:"wyn-dashboard-dots"});this.slideIndicator=new XU({items:n,active:0,groupSize:5,onChangePage:this.onTabSelect}),o.addChildren(this.slideIndicator),this.bodyWrapper.addChildren(o)}e.tabStrip.autoSwitch&&!d$.globalConfigManager.get("static")&&!this.pageContext.getIsMobile()&&1<n.length&&(this.scheduler=new Rz(1e3*e.tabStrip.switchInterval,this.onAutoSwitch),this.createAutoSwitchButton(),this.scheduler.start())}},{key:"getHeaderHeight",value:function(){var e=this.store.getProperties(),t=0;return e.header.visible&&(t+=e.header.height),t}},{key:"didMount",value:function(){d$.reduxProxy.on(H.Command.SelectTab,this.doChangeTab),d$.reduxProxy.on(H.Command.SwitchTab,this.doChangeTab),d$.appEventHub.on(H.AppEvent.ScenarioFocusChange,this.onScenarioFocusChange)}},{key:"willUnmount",value:function(){var e;null!==(e=this.scheduler)&&void 0!==e&&e.destroy(),d$.reduxProxy.off(H.Command.SelectTab,this.doChangeTab),d$.reduxProxy.off(H.Command.SwitchTab,this.doChangeTab),d$.appEventHub.off(H.AppEvent.ScenarioFocusChange,this.onScenarioFocusChange)}},{key:"resize",value:function(){if(this.current){this.updateScale();var e=this.store.getProperties(),t=this.pageContext.getParentGridSize().yScale,a=this.store.getDocTheme();this.header.apply(e.header,this.pageContext.getParentGridSize().yScale,this.pageContext.getScale()),this.tabHeader.apply(e.tabStrip,this.pageContext.getParentGridSize().yScale,this.pageContext.getScale()),this.tabHeader.setCustomStyle(e.tabStrip,a,t,this.pageContext.getScale());var n=this.pageContext.getGridSize(),i=n.xScale,r=n.yScale;this.current.resizeAll(i,r)}}},{key:"refresh",value:function(){if(this.eventHub.fireRender(),this.current)this.resize();else{var t=this.getTabSettingContent().activeTab,e=this.scenarios.filter(function(e){return e.store.getTabId()===+t}).length;this.updateScale(),this.eventHub.fireBeforeMount(e),this.mountAllScenarios(),this.eventHub.fireMounted()}this.eventHub.fireRendered()}},{key:"getTitle",value:function(){return this.header.getTitle()}}]),u}(e$),n$=function(e){k()(n,e);var a=w()(n);function n(e){var t;return I()(this,n),(t=a.call(this,e)).headerWrapper.setStyle({display:"none"}),t.backgroundLayer.hide(),t}return D()(n,[{key:"mountAllScenarios",value:function(){this.current=new Oz(this.scenarios,this.pageContext.getIsMobile()),this.bodyWrapper.addChildren(this.current);var e=this.store.getLayout(),t=this.pageContext.getGridSize(),a=t.xScale,n=t.yScale;this.current.init(a,n,{x:e.left,y:e.top})}},{key:"resize",value:function(){if(this.current){this.updateScale();var e=this.pageContext.getGridSize(),t=e.xScale,a=e.yScale;this.current.resizeAll(t,a)}}}]),n}(e$),i$=function(e){k()(r,e);var a=w()(r);function r(e,n,t){var i;return I()(this,r),(i=a.call(this)).scenarios=[],i.name=e.getName(),i.scenarioType=e.getScenarioType(),i.store=e,i.eventHub=t,i.pageContext=n.spawn(),n.getIsMobile()&&e.changeToMobileLayout(),e.getScenarios().forEach(function(e){var t,a;n.getIsMobile()&&!e.isUsedInMobile()||(a=e.getScenarioType()===H.ScenarioType.Group?(t=new Lz(e.id),new r(e,i.pageContext,t)):(t=new _z(e.id),new $Z(e,i.pageContext,t)),i.scenarios.push(a),i.eventHub.addEventHub(t))}),i.children=i.scenarios,i}return D()(r,[{key:"getScenarioByName",value:function(t){return this.scenarios.find(function(e){return e.getName()===t})}},{key:"getScenarioByID",value:function(t){return this.scenarios.find(function(e){return e.store.id===t})}},{key:"connect",value:function(e){C()(b()(r.prototype),"connect",this).call(this,e),this.store.getScenarioType()===H.ScenarioType.TabContainer?this.instance=new a$({scenarios:this.scenarios,pageContext:this.pageContext,store:this.store,eventHub:this.eventHub}):this.store.getScenarioType()===H.ScenarioType.Container?this.instance=new t$({scenarios:this.scenarios,pageContext:this.pageContext,store:this.store,eventHub:this.eventHub}):this.instance=new n$({scenarios:this.scenarios,pageContext:this.pageContext,store:this.store,eventHub:this.eventHub}),this.connectedHost.addChildren(this.instance)}},{key:"disconnect",value:function(){this.isConnected()&&(this.scenarios.forEach(function(e){return e.disconnect()}),C()(b()(r.prototype),"disconnect",this).call(this),this.instance=null)}},{key:"resize",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.resize(),C()(b()(r.prototype),"resize",this).call(this)}},{key:"destroy",value:function(){this.scenarios=[],C()(b()(r.prototype),"destroy",this).call(this)}},{key:"refresh",value:function(e){var t,a=0<arguments.length&&void 0!==e&&e;null!==(t=this.instance)&&void 0!==t&&t.refresh(),this.scenarios.forEach(function(e){return e.refresh(a)}),C()(b()(r.prototype),"refresh",this).call(this)}},{key:"getTitle",value:function(){var e;return null===(e=this.instance)||void 0===e?void 0:e.getTitle()}}]),r}(Fz),r$=function(e){k()(o,e);var r=w()(o);function o(e,a){var n;I()(this,o),(n=r.call(this)).widgets=[],n.scenarios=[],n.containers=[],n.name=e.getName(),n.store=e,n.eventHub=a;var t=new pO(e.id),i=new lz(t,Et.language,e);return e.getScenarios().forEach(function(e){if(!i.getIsMobile()||e.isUsedInMobile()){var t,a=new _z(e.id);switch(e.getScenarioType()){case H.ScenarioType.Container:case H.ScenarioType.TabContainer:case H.ScenarioType.Group:a=new Lz(e.id),t=new i$(e,i,a),n.containers.push(t);break;default:a=new _z(e.id),t=new $Z(e,i,a),n.scenarios.push(t)}n.widgets.push(t),n.eventHub.addEventHub(a)}}),n.pageModel=t,n.pageContext=i,n.children=R()(n.widgets),d$.dashboardManager.setPageCommon(t),d$.dashboardManager.addPage(t),t.ready(),t.on(H.PageEvent.Error,function(e){var t=Pd(e);t.id=e.id||Bd.a.v1(),a.fireError(t)}),n}return D()(o,[{key:"getScenarioByName",value:function(a){return $Z.findUIScenario(this.widgets,function(e){var t;return e.getName()===a?e:null===(t=e.getScenarioByName)||void 0===t?void 0:t.call(e,a)})}},{key:"getScenarioByID",value:function(a){return $Z.findUIScenario(this.widgets,function(e){var t;return e.store.id===a?e:null===(t=e.getScenarioByID)||void 0===t?void 0:t.call(e,a)})}},{key:"resize",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.resize(),C()(b()(o.prototype),"resize",this).call(this)}},{key:"connect",value:function(e){C()(b()(o.prototype),"connect",this).call(this,e),this.instance=new Hz({scenarios:this.widgets,store:this.store,pageContext:this.pageContext,eventHub:this.eventHub}),this.connectedHost.addChildren(this.instance)}},{key:"_clearSelection",value:function(){this.pageModel.doOuterClick(void 0,void 0,!0)}},{key:"destroy",value:function(){this.pageModel.destroy(),this.widgets=[],this.scenarios=[],this.containers=[],C()(b()(o.prototype),"destroy",this).call(this)}},{key:"refresh",value:function(){var e;null!==(e=this.instance)&&void 0!==e&&e.refresh(),C()(b()(o.prototype),"refresh",this).call(this)}}]),o}(Fz),o$=function(e){k()(a,e);var t=w()(a);function a(e){var n;return I()(this,a),(n=t.call(this)).pages=[],n.hiddenPages=[],n.name=e.getName(),n.eventHub=new Lz(e.id),e.getPages().forEach(function(e){var t=new Lz(e.id),a=new r$(e,t);n.eventHub.addEventHub(t),e.isVisible()?n.pages.push(a):n.hiddenPages.push(a)}),n.children=[].concat(R()(n.pages),R()(n.hiddenPages)),n.store=e,n}return D()(a,[{key:"getCurrentPage",value:function(){return this.instance.getCurrentPage()}},{key:"showPrevPage",value:function(){return this.instance.showPrev(),this.getCurrentPage()}},{key:"showNextPage",value:function(){return this.instance.showNext(),this.getCurrentPage()}},{key:"getPageByName",value:function(t){return this.children.find(function(e){return e.getName()===t})}},{key:"getPageByID",value:function(t){return this.children.find(function(e){return e.store.id===t})}},{key:"getScenarioByName",value:function(t){return $Z.findUIScenario(this.children,function(e){return e.getScenarioByName(t)})}},{key:"getScenarioByID",value:function(t){return $Z.findUIScenario(this.children,function(e){return e.getScenarioByID(t)})}},{key:"connect",value:function(e){C()(b()(a.prototype),"connect",this).call(this,e),this.instance=new Ez({pages:this.pages,store:this.store,hiddenPages:this.hiddenPages,eventHub:this.eventHub}),this.connectedHost.addChildren(this.instance)}},{key:"destroy",value:function(){this.pages=[],C()(b()(a.prototype),"destroy",this).call(this)}}]),a}(Fz);a(86);a.d(t,"ViewerLite",function(){return c$});var s$,l$,u$=function(e,o,s,l){return new(s=s||Promise)(function(a,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?a(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}r((l=l.apply(e,o||[])).next())})};(l$=s$=s$||{}).Initial="initial",l$.Initializing="initializing",l$.Initialized="initialized";var c$=function(e){k()(a,e);var t=w()(a);function a(){var e;return I()(this,a),(e=t.apply(this,arguments)).phase=s$.Initial,e.shouldDestroy=!1,e}return D()(a,[{key:"loadDashboard",value:function(){var S,D,k,w,x;return u$(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,i,r,o,s,l,u,c,d,p,h,y,g,m,f,v,b,C,T;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.dashboardContext.httpResourceManager.get("Dashboard"),a=this.dashboardContext.httpResourceManager.get("DocTheme"),n=this.dashboardContext.httpResourceManager.get("DatasetInfoList"),i=this.dashboardContext.httpResourceManager.get("LanguageResource"),r=this.dashboardContext.httpResourceManager.get("User"),o=this.dashboardContext.globalConfigManager.get("dashboardId"),this.loader.show(),s=new oz,e.prev=8,e.next=11,r.fetch();case 11:if(l=e.sent,this.dashboardContext.dashboardVariableManager.setUserInfo(l),this.dashboardContext.globalConfigManager.setUserInfo(l),null!==(D=null===(S=null==l?void 0:l.roles)||void 0===S?void 0:S.includes)&&void 0!==D&&D.call(S,"view-dashboard")||null!==(w=null===(k=null==l?void 0:l.roles)||void 0===k?void 0:k.includes)&&void 0!==w&&w.call(k,"create-dashboard")){e.next=17;break}return this.dashboardContext.uiDelegatorManager.notificationDelegator.showError({title:Ft("error.errorCode.200201.title")}),e.abrupt("return");case 17:return this.dashboardContext.setReduxStore(s,!0),u=this.document?Promise.resolve(this.document):t.fetch(o),e.next=21,Promise.all([u,n.fetch({dashboardId:o})]);case 21:return c=e.sent,d=N()(c,2),p=d[0],h=d[1],this.dashboardContext.dashboardVariableManager.setDatasetInfo(h),s.setDocData(p,h),y=p.dashboard.options.dashboard.languageResourceId,g=p.languageResource&&y&&null!==(x=p.languageKeys)&&void 0!==x&&x.length?i.fetch({id:y,isViewer:!0,lng:Wt,lngKeys:p.languageKeys,revisionNo:p.languageVersion}).then(function(e){return Promise.resolve(e.languageResource)},function(e){return 304===e.httpStatusCode?Promise.resolve(p.languageResource):Promise.resolve({})}):Promise.resolve(p.languageResource),m=s.getDocThemeId(),f=m?a.fetch(m):Promise.resolve(null),e.next=33,Promise.all([g,f]);case 33:if(v=e.sent,b=N()(v,2),C=b[0],T=b[1],s.init(C,T),this.dashboardContext.globalConfigManager.get("preloadFonts"))return e.next=42,this.dashboardContext.resourceManager.webFontManager.loadUsedFonts({waitAll:!0});e.next=44;break;case 42:e.next=45;break;case 44:this.dashboardContext.resourceManager.webFontManager.loadUsedFonts();case 45:e.next=51;break;case 47:throw e.prev=47,e.t0=e.catch(8),this.dashboardContext.uiDelegatorManager.notificationDelegator.showError(Pd(e.t0)),e.t0;case 51:return e.prev=51,this.loader.hide(),e.finish(51);case 54:return this.dashboardContext.httpResourceManager.get("AuditLog").proxyMethod("recordPreview",[o]),this.dashboardContext.globalConfigManager.get("__isBuildInApp")||(this.refreshManager=new Vz(this.dashboardContext),this.refreshManager.start()),e.abrupt("return",new o$(s));case 58:case"end":return e.stop()}},e,this,[[8,47,51,54]])}))}},{key:"createDom",value:function(e,t){var a;this.container=e,this.root=e,this.wrapper=e;var n=np("wyn-dashboard-viewer-lite",this.dashboardContext.globalConfigManager.getThemeClass(),{"wyn-dashboard-inject":!(null==t||!t.uiDelegatorManager)});if(null!=t&&t.uiDelegatorManager){if(null==t||!t.useInjectUiDelegatorManager){var i=null==t?void 0:t.uiDelegatorManager.cardDropDownRoot;if(0===i.children.length){var r=document.createElement("div");r.setAttribute("data-role","dropdown-root"),i.appendChild(r),this.portalDom=r}else this.portalDom=i.children[0]}}else{var o=document.createElement("div");o.setAttribute("data-role","dropdown-root"),this.portalDom=o,this.root.appendChild(o)}(a=this.root.classList).add.apply(a,R()(n.split(" ")))}},{key:"initialize",value:function(a){var i,r;return u$(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.phase!==s$.Initial)throw"Do not initialize twice.";e.next=2;break;case 2:return this.document=a.document,this.phase=s$.Initializing,this.createDom(a.container,null==a?void 0:a.__injectData),this.initContext(a),null!==(i=null==a?void 0:a.__injectData)&&void 0!==i&&i.uiDelegatorManager&&null!==(r=null==a?void 0:a.__injectData)&&void 0!==r&&r.useInjectUiDelegatorManager||(t=this.dashboardContext.uiDelegatorManager.getNameSpace(),this.portalDom.id="".concat(t,"ui-dropdown-root")),this.host=new fU(this.container),this.loader=new LU(!0),this.errorNotification=new Nz("error"),this.infoNotification=new Nz("info"),this.host.addChildren(this.loader,this.errorNotification,this.infoNotification),this.dashboardContext.uiDelegatorManager.getInjectMode()!==kP.SameWithInjectObject&&this.dashboardContext.uiDelegatorManager.notificationDelegator.delegate(function(e,t){if(e===H.NotificationType.error){if(t instanceof Error)return;n.errorNotification.append(t)}else if(e===H.NotificationType.info){var a=t;n.infoNotification.append(a)}}),e.next=15,this.loadDashboard();case 15:if(this.dashboard=e.sent,this.dashboard){e.next=18;break}return e.abrupt("return");case 18:if(this.dashboardContext.appEventHub.emit(H.AppEvent.DashboardReady,this.dashboard),this.dashboard.on(xz.Error,function(e,t,a){n.dashboardContext.uiDelegatorManager.notificationDelegator.showError(a)}),this.phase=s$.Initialized,this.initialized=!0,this.shouldDestroy)throw this.destroy(),"ViewerLite has been destroyed";e.next=25;break;case 25:return e.abrupt("return",this.dashboard);case 26:case"end":return e.stop()}},e,this)}))}},{key:"initContext",value:function(e){C()(b()(a.prototype),"initContext",this).call(this,e),null!=e&&e.__injectData&&(this.dashboardContext.isInjectedParameterManager=null!=e.__injectData.parameterManager,void 0!==e.__injectData.isMobile&&this.dashboardContext.globalConfigManager.set("__isMobile",e.__injectData.isMobile),this.dashboardContext.embeddedDashboardManager.setOuterGlobalFilters(e.__injectData.injectedGlobalFilters),this.dashboardContext.reduxProxy.setParentStoreInfo(e.__injectData.parentStore,e.__injectData.getParentDocDataStateFn))}},{key:"destroy",value:function(){var e,t,a;if(this.phase!==s$.Initial)return this.phase===s$.Initialized?(null!==(e=this.injectData)&&void 0!==e&&e.useInjectUiDelegatorManager||null!==(t=this.injectData)&&void 0!==t&&t.uiDelegatorManager||this.root.removeChild(this.portalDom),this.wrapper.remove(),this.host.destroy(),this.dashboard.destroy(),null!==(a=this.refreshManager)&&void 0!==a&&a.destroy(),this.dashboardContext.destroy(null==this.injectData),this.root.classList.remove("wyn-dashboard-viewer-lite"),this.initialized=!1,this.phase=s$.Initial,this.shouldDestroy=!1,this.root=null,this.portalDom=null,this.dashboardContext=null,d$=null,this.document=null,this.dashboard=null,this.container=null,this.injectData=null,void(this.wrapper=null)):void 0}}]),a}(uU);c$.EventType={DashboardReady:H.AppEvent.DashboardReady}}])[o])(d$);l.dashboard=a,l._onDashboardReady&&a.once("ready.dashboard",l._onDashboardReady);var n={},i=new Promise(function(e,t){n.resolve=e,n.reject=t});return a.initialize(r).then(function(e){n.resolve(e)},function(e){n.reject(e)}),i})}}("ViewerLite",e)}var t=window.WynBi||{};t.createViewerLite=e,window.WynBi=t,(t=window.WynDashboards||{}).createViewerLite=e,window.WynDashboards=t}();